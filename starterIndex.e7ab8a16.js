"use strict";
var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
const obsidian = require("obsidian");
const require$$0$1 = require("fs");
const require$$1 = require("path");
const require$$2 = require("os");
const require$$3 = require("crypto");
const _interopDefaultLegacy = (e) => e && typeof e === "object" && "default" in e ? e : { default: e };
const require$$0__default = /* @__PURE__ */ _interopDefaultLegacy(require$$0$1);
const require$$1__default = /* @__PURE__ */ _interopDefaultLegacy(require$$1);
const require$$2__default = /* @__PURE__ */ _interopDefaultLegacy(require$$2);
const require$$3__default = /* @__PURE__ */ _interopDefaultLegacy(require$$3);
var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
function getDefaultExportFromCjs(x) {
  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, "default") ? x["default"] : x;
}
var main$2 = { exports: {} };
const name$1 = "dotenv";
const version$2 = "16.1.4";
const description$1 = "Loads environment variables from .env file";
const main$1 = "lib/main.js";
const types$1 = "lib/main.d.ts";
const exports$1 = {
  ".": {
    types: "./lib/main.d.ts",
    require: "./lib/main.js",
    "default": "./lib/main.js"
  },
  "./config": "./config.js",
  "./config.js": "./config.js",
  "./lib/env-options": "./lib/env-options.js",
  "./lib/env-options.js": "./lib/env-options.js",
  "./lib/cli-options": "./lib/cli-options.js",
  "./lib/cli-options.js": "./lib/cli-options.js",
  "./package.json": "./package.json"
};
const scripts$1 = {
  "dts-check": "tsc --project tests/types/tsconfig.json",
  lint: "standard",
  "lint-readme": "standard-markdown",
  pretest: "npm run lint && npm run dts-check",
  test: "tap tests/*.js --100 -Rspec",
  prerelease: "npm test",
  release: "standard-version"
};
const repository$1 = {
  type: "git",
  url: "git://github.com/motdotla/dotenv.git"
};
const funding = "https://github.com/motdotla/dotenv?sponsor=1";
const keywords$1 = [
  "dotenv",
  "env",
  ".env",
  "environment",
  "variables",
  "config",
  "settings"
];
const readmeFilename = "README.md";
const license$1 = "BSD-2-Clause";
const devDependencies$1 = {
  "@definitelytyped/dtslint": "^0.0.133",
  "@types/node": "^18.11.3",
  decache: "^4.6.1",
  sinon: "^14.0.1",
  standard: "^17.0.0",
  "standard-markdown": "^7.1.0",
  "standard-version": "^9.5.0",
  tap: "^16.3.0",
  tar: "^6.1.11",
  typescript: "^4.8.4"
};
const engines = {
  node: ">=12"
};
const browser$1 = {
  fs: false
};
const require$$4 = {
  name: name$1,
  version: version$2,
  description: description$1,
  main: main$1,
  types: types$1,
  exports: exports$1,
  scripts: scripts$1,
  repository: repository$1,
  funding,
  keywords: keywords$1,
  readmeFilename,
  license: license$1,
  devDependencies: devDependencies$1,
  engines,
  browser: browser$1
};
const fs = require$$0__default.default;
const path = require$$1__default.default;
const os = require$$2__default.default;
const crypto$1 = require$$3__default.default;
const packageJson$1 = require$$4;
const version$1 = packageJson$1.version;
const LINE = /(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;
function parse(src) {
  const obj = {};
  let lines = src.toString();
  lines = lines.replace(/\r\n?/mg, "\n");
  let match;
  while ((match = LINE.exec(lines)) != null) {
    const key = match[1];
    let value = match[2] || "";
    value = value.trim();
    const maybeQuote = value[0];
    value = value.replace(/^(['"`])([\s\S]*)\1$/mg, "$2");
    if (maybeQuote === '"') {
      value = value.replace(/\\n/g, "\n");
      value = value.replace(/\\r/g, "\r");
    }
    obj[key] = value;
  }
  return obj;
}
function _parseVault(options2) {
  const vaultPath = _vaultPath(options2);
  const result = DotenvModule.configDotenv({ path: vaultPath });
  if (!result.parsed) {
    throw new Error(`MISSING_DATA: Cannot parse ${vaultPath} for an unknown reason`);
  }
  const keys = _dotenvKey().split(",");
  const length = keys.length;
  let decrypted;
  for (let i = 0; i < length; i++) {
    try {
      const key = keys[i].trim();
      const attrs = _instructions(result, key);
      decrypted = DotenvModule.decrypt(attrs.ciphertext, attrs.key);
      break;
    } catch (error) {
      if (i + 1 >= length) {
        throw error;
      }
    }
  }
  return DotenvModule.parse(decrypted);
}
function _log(message) {
  console.log(`[dotenv@${version$1}][INFO] ${message}`);
}
function _warn(message) {
  console.log(`[dotenv@${version$1}][WARN] ${message}`);
}
function _debug(message) {
  console.log(`[dotenv@${version$1}][DEBUG] ${message}`);
}
function _dotenvKey() {
  if (process.env.DOTENV_KEY && process.env.DOTENV_KEY.length > 0) {
    return process.env.DOTENV_KEY;
  }
  return "";
}
function _instructions(result, dotenvKey) {
  let uri;
  try {
    uri = new URL(dotenvKey);
  } catch (error) {
    if (error.code === "ERR_INVALID_URL") {
      throw new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development");
    }
    throw error;
  }
  const key = uri.password;
  if (!key) {
    throw new Error("INVALID_DOTENV_KEY: Missing key part");
  }
  const environment = uri.searchParams.get("environment");
  if (!environment) {
    throw new Error("INVALID_DOTENV_KEY: Missing environment part");
  }
  const environmentKey = `DOTENV_VAULT_${environment.toUpperCase()}`;
  const ciphertext = result.parsed[environmentKey];
  if (!ciphertext) {
    throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${environmentKey} in your .env.vault file.`);
  }
  return { ciphertext, key };
}
function _vaultPath(options2) {
  let dotenvPath = path.resolve(process.cwd(), ".env");
  if (options2 && options2.path && options2.path.length > 0) {
    dotenvPath = options2.path;
  }
  return dotenvPath.endsWith(".vault") ? dotenvPath : `${dotenvPath}.vault`;
}
function _resolveHome(envPath) {
  return envPath[0] === "~" ? path.join(os.homedir(), envPath.slice(1)) : envPath;
}
function _configVault(options2) {
  _log("Loading env from encrypted .env.vault");
  const parsed = DotenvModule._parseVault(options2);
  DotenvModule.populate(process.env, parsed, options2);
  return { parsed };
}
function configDotenv(options2) {
  let dotenvPath = path.resolve(process.cwd(), ".env");
  let encoding = "utf8";
  const debug = Boolean(options2 && options2.debug);
  if (options2) {
    if (options2.path != null) {
      dotenvPath = _resolveHome(options2.path);
    }
    if (options2.encoding != null) {
      encoding = options2.encoding;
    }
  }
  try {
    const parsed = DotenvModule.parse(fs.readFileSync(dotenvPath, { encoding }));
    DotenvModule.populate(process.env, parsed, options2);
    return { parsed };
  } catch (e) {
    if (debug) {
      _debug(`Failed to load ${dotenvPath} ${e.message}`);
    }
    return { error: e };
  }
}
function config(options2) {
  const vaultPath = _vaultPath(options2);
  if (_dotenvKey().length === 0) {
    return DotenvModule.configDotenv(options2);
  }
  if (!fs.existsSync(vaultPath)) {
    _warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${vaultPath}. Did you forget to build it?`);
    return DotenvModule.configDotenv(options2);
  }
  return DotenvModule._configVault(options2);
}
function decrypt(encrypted, keyStr) {
  const key = Buffer.from(keyStr.slice(-64), "hex");
  let ciphertext = Buffer.from(encrypted, "base64");
  const nonce = ciphertext.slice(0, 12);
  const authTag = ciphertext.slice(-16);
  ciphertext = ciphertext.slice(12, -16);
  try {
    const aesgcm = crypto$1.createDecipheriv("aes-256-gcm", key, nonce);
    aesgcm.setAuthTag(authTag);
    return `${aesgcm.update(ciphertext)}${aesgcm.final()}`;
  } catch (error) {
    const isRange = error instanceof RangeError;
    const invalidKeyLength = error.message === "Invalid key length";
    const decryptionFailed = error.message === "Unsupported state or unable to authenticate data";
    if (isRange || invalidKeyLength) {
      const msg = "INVALID_DOTENV_KEY: It must be 64 characters long (or more)";
      throw new Error(msg);
    } else if (decryptionFailed) {
      const msg = "DECRYPTION_FAILED: Please check your DOTENV_KEY";
      throw new Error(msg);
    } else {
      console.error("Error: ", error.code);
      console.error("Error: ", error.message);
      throw error;
    }
  }
}
function populate(processEnv, parsed, options2 = {}) {
  const debug = Boolean(options2 && options2.debug);
  const override = Boolean(options2 && options2.override);
  if (typeof parsed !== "object") {
    throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");
  }
  for (const key of Object.keys(parsed)) {
    if (Object.prototype.hasOwnProperty.call(processEnv, key)) {
      if (override === true) {
        processEnv[key] = parsed[key];
      }
      if (debug) {
        if (override === true) {
          _debug(`"${key}" is already defined and WAS overwritten`);
        } else {
          _debug(`"${key}" is already defined and was NOT overwritten`);
        }
      }
    } else {
      processEnv[key] = parsed[key];
    }
  }
}
const DotenvModule = {
  configDotenv,
  _configVault,
  _parseVault,
  config,
  decrypt,
  parse,
  populate
};
main$2.exports.configDotenv = DotenvModule.configDotenv;
main$2.exports._configVault = DotenvModule._configVault;
main$2.exports._parseVault = DotenvModule._parseVault;
main$2.exports.config = DotenvModule.config;
main$2.exports.decrypt = DotenvModule.decrypt;
main$2.exports.parse = DotenvModule.parse;
main$2.exports.populate = DotenvModule.populate;
main$2.exports = DotenvModule;
const options = {};
if (process.env.DOTENV_CONFIG_ENCODING != null) {
  options.encoding = process.env.DOTENV_CONFIG_ENCODING;
}
if (process.env.DOTENV_CONFIG_PATH != null) {
  options.path = process.env.DOTENV_CONFIG_PATH;
}
if (process.env.DOTENV_CONFIG_DEBUG != null) {
  options.debug = process.env.DOTENV_CONFIG_DEBUG;
}
if (process.env.DOTENV_CONFIG_OVERRIDE != null) {
  options.override = process.env.DOTENV_CONFIG_OVERRIDE;
}
var envOptions = options;
const re = /^dotenv_config_(encoding|path|debug|override)=(.+)$/;
var cliOptions = function optionMatcher(args) {
  return args.reduce(function(acc, cur) {
    const matches = cur.match(re);
    if (matches) {
      acc[matches[1]] = matches[2];
    }
    return acc;
  }, {});
};
(function() {
  main$2.exports.config(
    Object.assign(
      {},
      envOptions,
      cliOptions(process.argv)
    )
  );
})();
function noop() {
}
function run(fn) {
  return fn();
}
function blank_object() {
  return /* @__PURE__ */ Object.create(null);
}
function run_all(fns) {
  fns.forEach(run);
}
function is_function(thing) {
  return typeof thing === "function";
}
function safe_not_equal(a, b) {
  return a != a ? b == b : a !== b || (a && typeof a === "object" || typeof a === "function");
}
function is_empty(obj) {
  return Object.keys(obj).length === 0;
}
function append(target, node) {
  target.appendChild(node);
}
function insert(target, node, anchor) {
  target.insertBefore(node, anchor || null);
}
function detach(node) {
  node.parentNode.removeChild(node);
}
function element(name2) {
  return document.createElement(name2);
}
function text(data2) {
  return document.createTextNode(data2);
}
function space() {
  return text(" ");
}
function listen(node, event, handler, options2) {
  node.addEventListener(event, handler, options2);
  return () => node.removeEventListener(event, handler, options2);
}
function attr(node, attribute, value) {
  if (value == null)
    node.removeAttribute(attribute);
  else if (node.getAttribute(attribute) !== value)
    node.setAttribute(attribute, value);
}
function children(element2) {
  return Array.from(element2.childNodes);
}
function set_input_value(input, value) {
  input.value = value == null ? "" : value;
}
let current_component;
function set_current_component(component) {
  current_component = component;
}
const dirty_components = [];
const binding_callbacks = [];
const render_callbacks = [];
const flush_callbacks = [];
const resolved_promise = Promise.resolve();
let update_scheduled = false;
function schedule_update() {
  if (!update_scheduled) {
    update_scheduled = true;
    resolved_promise.then(flush);
  }
}
function add_render_callback(fn) {
  render_callbacks.push(fn);
}
const seen_callbacks = /* @__PURE__ */ new Set();
let flushidx = 0;
function flush() {
  const saved_component = current_component;
  do {
    while (flushidx < dirty_components.length) {
      const component = dirty_components[flushidx];
      flushidx++;
      set_current_component(component);
      update(component.$$);
    }
    set_current_component(null);
    dirty_components.length = 0;
    flushidx = 0;
    while (binding_callbacks.length)
      binding_callbacks.pop()();
    for (let i = 0; i < render_callbacks.length; i += 1) {
      const callback = render_callbacks[i];
      if (!seen_callbacks.has(callback)) {
        seen_callbacks.add(callback);
        callback();
      }
    }
    render_callbacks.length = 0;
  } while (dirty_components.length);
  while (flush_callbacks.length) {
    flush_callbacks.pop()();
  }
  update_scheduled = false;
  seen_callbacks.clear();
  set_current_component(saved_component);
}
function update($$) {
  if ($$.fragment !== null) {
    $$.update();
    run_all($$.before_update);
    const dirty = $$.dirty;
    $$.dirty = [-1];
    $$.fragment && $$.fragment.p($$.ctx, dirty);
    $$.after_update.forEach(add_render_callback);
  }
}
const outroing = /* @__PURE__ */ new Set();
function transition_in(block, local) {
  if (block && block.i) {
    outroing.delete(block);
    block.i(local);
  }
}
function mount_component(component, target, anchor, customElement) {
  const { fragment, on_mount, on_destroy, after_update } = component.$$;
  fragment && fragment.m(target, anchor);
  if (!customElement) {
    add_render_callback(() => {
      const new_on_destroy = on_mount.map(run).filter(is_function);
      if (on_destroy) {
        on_destroy.push(...new_on_destroy);
      } else {
        run_all(new_on_destroy);
      }
      component.$$.on_mount = [];
    });
  }
  after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
  const $$ = component.$$;
  if ($$.fragment !== null) {
    run_all($$.on_destroy);
    $$.fragment && $$.fragment.d(detaching);
    $$.on_destroy = $$.fragment = null;
    $$.ctx = [];
  }
}
function make_dirty(component, i) {
  if (component.$$.dirty[0] === -1) {
    dirty_components.push(component);
    schedule_update();
    component.$$.dirty.fill(0);
  }
  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;
}
function init(component, options2, instance2, create_fragment2, not_equal, props, append_styles, dirty = [-1]) {
  const parent_component = current_component;
  set_current_component(component);
  const $$ = component.$$ = {
    fragment: null,
    ctx: null,
    props,
    update: noop,
    not_equal,
    bound: blank_object(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(options2.context || (parent_component ? parent_component.$$.context : [])),
    callbacks: blank_object(),
    dirty,
    skip_bound: false,
    root: options2.target || parent_component.$$.root
  };
  append_styles && append_styles($$.root);
  let ready = false;
  $$.ctx = instance2 ? instance2(component, options2.props || {}, (i, ret, ...rest) => {
    const value = rest.length ? rest[0] : ret;
    if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
      if (!$$.skip_bound && $$.bound[i])
        $$.bound[i](value);
      if (ready)
        make_dirty(component, i);
    }
    return ret;
  }) : [];
  $$.update();
  ready = true;
  run_all($$.before_update);
  $$.fragment = create_fragment2 ? create_fragment2($$.ctx) : false;
  if (options2.target) {
    if (options2.hydrate) {
      const nodes = children(options2.target);
      $$.fragment && $$.fragment.l(nodes);
      nodes.forEach(detach);
    } else {
      $$.fragment && $$.fragment.c();
    }
    if (options2.intro)
      transition_in(component.$$.fragment);
    mount_component(component, options2.target, options2.anchor, options2.customElement);
    flush();
  }
  set_current_component(parent_component);
}
class SvelteComponent {
  $destroy() {
    destroy_component(this, 1);
    this.$destroy = noop;
  }
  $on(type, callback) {
    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
    callbacks.push(callback);
    return () => {
      const index = callbacks.indexOf(callback);
      if (index !== -1)
        callbacks.splice(index, 1);
    };
  }
  $set($$props) {
    if (this.$$set && !is_empty($$props)) {
      this.$$.skip_bound = true;
      this.$$set($$props);
      this.$$.skip_bound = false;
    }
  }
}
var dist$1 = {};
var api = {};
var axios$3 = { exports: {} };
var axios$2 = { exports: {} };
var bind$2 = function bind(fn, thisArg) {
  return function wrap2() {
    var args = new Array(arguments.length);
    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i];
    }
    return fn.apply(thisArg, args);
  };
};
var bind$1 = bind$2;
var toString$1 = Object.prototype.toString;
function isArray$1(val) {
  return Array.isArray(val);
}
function isUndefined$1(val) {
  return typeof val === "undefined";
}
function isBuffer(val) {
  return val !== null && !isUndefined$1(val) && val.constructor !== null && !isUndefined$1(val.constructor) && typeof val.constructor.isBuffer === "function" && val.constructor.isBuffer(val);
}
function isArrayBuffer(val) {
  return toString$1.call(val) === "[object ArrayBuffer]";
}
function isFormData$1(val) {
  return toString$1.call(val) === "[object FormData]";
}
function isArrayBufferView(val) {
  var result;
  if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
    result = ArrayBuffer.isView(val);
  } else {
    result = val && val.buffer && isArrayBuffer(val.buffer);
  }
  return result;
}
function isString(val) {
  return typeof val === "string";
}
function isNumber(val) {
  return typeof val === "number";
}
function isObject$1(val) {
  return val !== null && typeof val === "object";
}
function isPlainObject(val) {
  if (toString$1.call(val) !== "[object Object]") {
    return false;
  }
  var prototype = Object.getPrototypeOf(val);
  return prototype === null || prototype === Object.prototype;
}
function isDate$1(val) {
  return toString$1.call(val) === "[object Date]";
}
function isFile(val) {
  return toString$1.call(val) === "[object File]";
}
function isBlob(val) {
  return toString$1.call(val) === "[object Blob]";
}
function isFunction(val) {
  return toString$1.call(val) === "[object Function]";
}
function isStream(val) {
  return isObject$1(val) && isFunction(val.pipe);
}
function isURLSearchParams$1(val) {
  return toString$1.call(val) === "[object URLSearchParams]";
}
function trim(str) {
  return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, "");
}
function isStandardBrowserEnv$1() {
  if (typeof navigator !== "undefined" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS")) {
    return false;
  }
  return typeof window !== "undefined" && typeof document !== "undefined";
}
function forEach$1(obj, fn) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray$1(obj)) {
    for (var i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        fn.call(null, obj[key], key, obj);
      }
    }
  }
}
function merge() {
  var result = {};
  function assignValue(val, key) {
    if (isPlainObject(result[key]) && isPlainObject(val)) {
      result[key] = merge(result[key], val);
    } else if (isPlainObject(val)) {
      result[key] = merge({}, val);
    } else if (isArray$1(val)) {
      result[key] = val.slice();
    } else {
      result[key] = val;
    }
  }
  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach$1(arguments[i], assignValue);
  }
  return result;
}
function extend(a, b, thisArg) {
  forEach$1(b, function assignValue(val, key) {
    if (thisArg && typeof val === "function") {
      a[key] = bind$1(val, thisArg);
    } else {
      a[key] = val;
    }
  });
  return a;
}
function stripBOM(content) {
  if (content.charCodeAt(0) === 65279) {
    content = content.slice(1);
  }
  return content;
}
var utils$9 = {
  isArray: isArray$1,
  isArrayBuffer,
  isBuffer,
  isFormData: isFormData$1,
  isArrayBufferView,
  isString,
  isNumber,
  isObject: isObject$1,
  isPlainObject,
  isUndefined: isUndefined$1,
  isDate: isDate$1,
  isFile,
  isBlob,
  isFunction,
  isStream,
  isURLSearchParams: isURLSearchParams$1,
  isStandardBrowserEnv: isStandardBrowserEnv$1,
  forEach: forEach$1,
  merge,
  extend,
  trim,
  stripBOM
};
var utils$8 = utils$9;
function encode$1(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
var buildURL$2 = function buildURL(url, params, paramsSerializer) {
  if (!params) {
    return url;
  }
  var serializedParams;
  if (paramsSerializer) {
    serializedParams = paramsSerializer(params);
  } else if (utils$8.isURLSearchParams(params)) {
    serializedParams = params.toString();
  } else {
    var parts = [];
    utils$8.forEach(params, function serialize(val, key) {
      if (val === null || typeof val === "undefined") {
        return;
      }
      if (utils$8.isArray(val)) {
        key = key + "[]";
      } else {
        val = [val];
      }
      utils$8.forEach(val, function parseValue(v) {
        if (utils$8.isDate(v)) {
          v = v.toISOString();
        } else if (utils$8.isObject(v)) {
          v = JSON.stringify(v);
        }
        parts.push(encode$1(key) + "=" + encode$1(v));
      });
    });
    serializedParams = parts.join("&");
  }
  if (serializedParams) {
    var hashmarkIndex = url.indexOf("#");
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url;
};
var utils$7 = utils$9;
function InterceptorManager$1() {
  this.handlers = [];
}
InterceptorManager$1.prototype.use = function use(fulfilled, rejected, options2) {
  this.handlers.push({
    fulfilled,
    rejected,
    synchronous: options2 ? options2.synchronous : false,
    runWhen: options2 ? options2.runWhen : null
  });
  return this.handlers.length - 1;
};
InterceptorManager$1.prototype.eject = function eject(id) {
  if (this.handlers[id]) {
    this.handlers[id] = null;
  }
};
InterceptorManager$1.prototype.forEach = function forEach(fn) {
  utils$7.forEach(this.handlers, function forEachHandler(h) {
    if (h !== null) {
      fn(h);
    }
  });
};
var InterceptorManager_1 = InterceptorManager$1;
var utils$6 = utils$9;
var normalizeHeaderName$1 = function normalizeHeaderName(headers, normalizedName) {
  utils$6.forEach(headers, function processHeader(value, name2) {
    if (name2 !== normalizedName && name2.toUpperCase() === normalizedName.toUpperCase()) {
      headers[normalizedName] = value;
      delete headers[name2];
    }
  });
};
var enhanceError$2 = function enhanceError(error, config2, code2, request2, response) {
  error.config = config2;
  if (code2) {
    error.code = code2;
  }
  error.request = request2;
  error.response = response;
  error.isAxiosError = true;
  error.toJSON = function toJSON() {
    return {
      message: this.message,
      name: this.name,
      description: this.description,
      number: this.number,
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      config: this.config,
      code: this.code,
      status: this.response && this.response.status ? this.response.status : null
    };
  };
  return error;
};
var transitional = {
  silentJSONParsing: true,
  forcedJSONParsing: true,
  clarifyTimeoutError: false
};
var createError$1;
var hasRequiredCreateError;
function requireCreateError() {
  if (hasRequiredCreateError)
    return createError$1;
  hasRequiredCreateError = 1;
  var enhanceError3 = enhanceError$2;
  createError$1 = function createError2(message, config2, code2, request2, response) {
    var error = new Error(message);
    return enhanceError3(error, config2, code2, request2, response);
  };
  return createError$1;
}
var settle$1;
var hasRequiredSettle;
function requireSettle() {
  if (hasRequiredSettle)
    return settle$1;
  hasRequiredSettle = 1;
  var createError2 = requireCreateError();
  settle$1 = function settle2(resolve, reject, response) {
    var validateStatus2 = response.config.validateStatus;
    if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
      resolve(response);
    } else {
      reject(createError2(
        "Request failed with status code " + response.status,
        response.config,
        null,
        response.request,
        response
      ));
    }
  };
  return settle$1;
}
var cookies;
var hasRequiredCookies;
function requireCookies() {
  if (hasRequiredCookies)
    return cookies;
  hasRequiredCookies = 1;
  var utils2 = utils$9;
  cookies = utils2.isStandardBrowserEnv() ? function standardBrowserEnv() {
    return {
      write: function write(name2, value, expires, path2, domain, secure) {
        var cookie = [];
        cookie.push(name2 + "=" + encodeURIComponent(value));
        if (utils2.isNumber(expires)) {
          cookie.push("expires=" + new Date(expires).toGMTString());
        }
        if (utils2.isString(path2)) {
          cookie.push("path=" + path2);
        }
        if (utils2.isString(domain)) {
          cookie.push("domain=" + domain);
        }
        if (secure === true) {
          cookie.push("secure");
        }
        document.cookie = cookie.join("; ");
      },
      read: function read(name2) {
        var match = document.cookie.match(new RegExp("(^|;\\s*)(" + name2 + ")=([^;]*)"));
        return match ? decodeURIComponent(match[3]) : null;
      },
      remove: function remove(name2) {
        this.write(name2, "", Date.now() - 864e5);
      }
    };
  }() : function nonStandardBrowserEnv() {
    return {
      write: function write() {
      },
      read: function read() {
        return null;
      },
      remove: function remove() {
      }
    };
  }();
  return cookies;
}
var isAbsoluteURL$1;
var hasRequiredIsAbsoluteURL;
function requireIsAbsoluteURL() {
  if (hasRequiredIsAbsoluteURL)
    return isAbsoluteURL$1;
  hasRequiredIsAbsoluteURL = 1;
  isAbsoluteURL$1 = function isAbsoluteURL2(url) {
    return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
  };
  return isAbsoluteURL$1;
}
var combineURLs$1;
var hasRequiredCombineURLs;
function requireCombineURLs() {
  if (hasRequiredCombineURLs)
    return combineURLs$1;
  hasRequiredCombineURLs = 1;
  combineURLs$1 = function combineURLs2(baseURL, relativeURL) {
    return relativeURL ? baseURL.replace(/\/+$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
  };
  return combineURLs$1;
}
var buildFullPath$1;
var hasRequiredBuildFullPath;
function requireBuildFullPath() {
  if (hasRequiredBuildFullPath)
    return buildFullPath$1;
  hasRequiredBuildFullPath = 1;
  var isAbsoluteURL2 = requireIsAbsoluteURL();
  var combineURLs2 = requireCombineURLs();
  buildFullPath$1 = function buildFullPath2(baseURL, requestedURL) {
    if (baseURL && !isAbsoluteURL2(requestedURL)) {
      return combineURLs2(baseURL, requestedURL);
    }
    return requestedURL;
  };
  return buildFullPath$1;
}
var parseHeaders;
var hasRequiredParseHeaders;
function requireParseHeaders() {
  if (hasRequiredParseHeaders)
    return parseHeaders;
  hasRequiredParseHeaders = 1;
  var utils2 = utils$9;
  var ignoreDuplicateOf = [
    "age",
    "authorization",
    "content-length",
    "content-type",
    "etag",
    "expires",
    "from",
    "host",
    "if-modified-since",
    "if-unmodified-since",
    "last-modified",
    "location",
    "max-forwards",
    "proxy-authorization",
    "referer",
    "retry-after",
    "user-agent"
  ];
  parseHeaders = function parseHeaders2(headers) {
    var parsed = {};
    var key;
    var val;
    var i;
    if (!headers) {
      return parsed;
    }
    utils2.forEach(headers.split("\n"), function parser(line) {
      i = line.indexOf(":");
      key = utils2.trim(line.substr(0, i)).toLowerCase();
      val = utils2.trim(line.substr(i + 1));
      if (key) {
        if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
          return;
        }
        if (key === "set-cookie") {
          parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
        } else {
          parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
        }
      }
    });
    return parsed;
  };
  return parseHeaders;
}
var isURLSameOrigin;
var hasRequiredIsURLSameOrigin;
function requireIsURLSameOrigin() {
  if (hasRequiredIsURLSameOrigin)
    return isURLSameOrigin;
  hasRequiredIsURLSameOrigin = 1;
  var utils2 = utils$9;
  isURLSameOrigin = utils2.isStandardBrowserEnv() ? function standardBrowserEnv() {
    var msie = /(msie|trident)/i.test(navigator.userAgent);
    var urlParsingNode = document.createElement("a");
    var originURL;
    function resolveURL(url) {
      var href = url;
      if (msie) {
        urlParsingNode.setAttribute("href", href);
        href = urlParsingNode.href;
      }
      urlParsingNode.setAttribute("href", href);
      return {
        href: urlParsingNode.href,
        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, "") : "",
        host: urlParsingNode.host,
        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, "") : "",
        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, "") : "",
        hostname: urlParsingNode.hostname,
        port: urlParsingNode.port,
        pathname: urlParsingNode.pathname.charAt(0) === "/" ? urlParsingNode.pathname : "/" + urlParsingNode.pathname
      };
    }
    originURL = resolveURL(window.location.href);
    return function isURLSameOrigin2(requestURL) {
      var parsed = utils2.isString(requestURL) ? resolveURL(requestURL) : requestURL;
      return parsed.protocol === originURL.protocol && parsed.host === originURL.host;
    };
  }() : function nonStandardBrowserEnv() {
    return function isURLSameOrigin2() {
      return true;
    };
  }();
  return isURLSameOrigin;
}
var Cancel_1;
var hasRequiredCancel;
function requireCancel() {
  if (hasRequiredCancel)
    return Cancel_1;
  hasRequiredCancel = 1;
  function Cancel2(message) {
    this.message = message;
  }
  Cancel2.prototype.toString = function toString2() {
    return "Cancel" + (this.message ? ": " + this.message : "");
  };
  Cancel2.prototype.__CANCEL__ = true;
  Cancel_1 = Cancel2;
  return Cancel_1;
}
var xhr;
var hasRequiredXhr;
function requireXhr() {
  if (hasRequiredXhr)
    return xhr;
  hasRequiredXhr = 1;
  var utils2 = utils$9;
  var settle2 = requireSettle();
  var cookies2 = requireCookies();
  var buildURL3 = buildURL$2;
  var buildFullPath2 = requireBuildFullPath();
  var parseHeaders2 = requireParseHeaders();
  var isURLSameOrigin2 = requireIsURLSameOrigin();
  var createError2 = requireCreateError();
  var transitionalDefaults2 = transitional;
  var Cancel2 = requireCancel();
  xhr = function xhrAdapter(config2) {
    return new Promise(function dispatchXhrRequest(resolve, reject) {
      var requestData = config2.data;
      var requestHeaders = config2.headers;
      var responseType = config2.responseType;
      var onCanceled;
      function done() {
        if (config2.cancelToken) {
          config2.cancelToken.unsubscribe(onCanceled);
        }
        if (config2.signal) {
          config2.signal.removeEventListener("abort", onCanceled);
        }
      }
      if (utils2.isFormData(requestData)) {
        delete requestHeaders["Content-Type"];
      }
      var request2 = new XMLHttpRequest();
      if (config2.auth) {
        var username = config2.auth.username || "";
        var password = config2.auth.password ? unescape(encodeURIComponent(config2.auth.password)) : "";
        requestHeaders.Authorization = "Basic " + btoa(username + ":" + password);
      }
      var fullPath = buildFullPath2(config2.baseURL, config2.url);
      request2.open(config2.method.toUpperCase(), buildURL3(fullPath, config2.params, config2.paramsSerializer), true);
      request2.timeout = config2.timeout;
      function onloadend() {
        if (!request2) {
          return;
        }
        var responseHeaders = "getAllResponseHeaders" in request2 ? parseHeaders2(request2.getAllResponseHeaders()) : null;
        var responseData = !responseType || responseType === "text" || responseType === "json" ? request2.responseText : request2.response;
        var response = {
          data: responseData,
          status: request2.status,
          statusText: request2.statusText,
          headers: responseHeaders,
          config: config2,
          request: request2
        };
        settle2(function _resolve(value) {
          resolve(value);
          done();
        }, function _reject(err) {
          reject(err);
          done();
        }, response);
        request2 = null;
      }
      if ("onloadend" in request2) {
        request2.onloadend = onloadend;
      } else {
        request2.onreadystatechange = function handleLoad() {
          if (!request2 || request2.readyState !== 4) {
            return;
          }
          if (request2.status === 0 && !(request2.responseURL && request2.responseURL.indexOf("file:") === 0)) {
            return;
          }
          setTimeout(onloadend);
        };
      }
      request2.onabort = function handleAbort() {
        if (!request2) {
          return;
        }
        reject(createError2("Request aborted", config2, "ECONNABORTED", request2));
        request2 = null;
      };
      request2.onerror = function handleError() {
        reject(createError2("Network Error", config2, null, request2));
        request2 = null;
      };
      request2.ontimeout = function handleTimeout() {
        var timeoutErrorMessage = config2.timeout ? "timeout of " + config2.timeout + "ms exceeded" : "timeout exceeded";
        var transitional3 = config2.transitional || transitionalDefaults2;
        if (config2.timeoutErrorMessage) {
          timeoutErrorMessage = config2.timeoutErrorMessage;
        }
        reject(createError2(
          timeoutErrorMessage,
          config2,
          transitional3.clarifyTimeoutError ? "ETIMEDOUT" : "ECONNABORTED",
          request2
        ));
        request2 = null;
      };
      if (utils2.isStandardBrowserEnv()) {
        var xsrfValue = (config2.withCredentials || isURLSameOrigin2(fullPath)) && config2.xsrfCookieName ? cookies2.read(config2.xsrfCookieName) : void 0;
        if (xsrfValue) {
          requestHeaders[config2.xsrfHeaderName] = xsrfValue;
        }
      }
      if ("setRequestHeader" in request2) {
        utils2.forEach(requestHeaders, function setRequestHeader(val, key) {
          if (typeof requestData === "undefined" && key.toLowerCase() === "content-type") {
            delete requestHeaders[key];
          } else {
            request2.setRequestHeader(key, val);
          }
        });
      }
      if (!utils2.isUndefined(config2.withCredentials)) {
        request2.withCredentials = !!config2.withCredentials;
      }
      if (responseType && responseType !== "json") {
        request2.responseType = config2.responseType;
      }
      if (typeof config2.onDownloadProgress === "function") {
        request2.addEventListener("progress", config2.onDownloadProgress);
      }
      if (typeof config2.onUploadProgress === "function" && request2.upload) {
        request2.upload.addEventListener("progress", config2.onUploadProgress);
      }
      if (config2.cancelToken || config2.signal) {
        onCanceled = function(cancel) {
          if (!request2) {
            return;
          }
          reject(!cancel || cancel && cancel.type ? new Cancel2("canceled") : cancel);
          request2.abort();
          request2 = null;
        };
        config2.cancelToken && config2.cancelToken.subscribe(onCanceled);
        if (config2.signal) {
          config2.signal.aborted ? onCanceled() : config2.signal.addEventListener("abort", onCanceled);
        }
      }
      if (!requestData) {
        requestData = null;
      }
      request2.send(requestData);
    });
  };
  return xhr;
}
var utils$5 = utils$9;
var normalizeHeaderName2 = normalizeHeaderName$1;
var enhanceError$1 = enhanceError$2;
var transitionalDefaults = transitional;
var DEFAULT_CONTENT_TYPE = {
  "Content-Type": "application/x-www-form-urlencoded"
};
function setContentTypeIfUnset(headers, value) {
  if (!utils$5.isUndefined(headers) && utils$5.isUndefined(headers["Content-Type"])) {
    headers["Content-Type"] = value;
  }
}
function getDefaultAdapter() {
  var adapter;
  if (typeof XMLHttpRequest !== "undefined") {
    adapter = requireXhr();
  } else if (typeof process !== "undefined" && Object.prototype.toString.call(process) === "[object process]") {
    adapter = requireXhr();
  }
  return adapter;
}
function stringifySafely(rawValue, parser, encoder) {
  if (utils$5.isString(rawValue)) {
    try {
      (parser || JSON.parse)(rawValue);
      return utils$5.trim(rawValue);
    } catch (e) {
      if (e.name !== "SyntaxError") {
        throw e;
      }
    }
  }
  return (encoder || JSON.stringify)(rawValue);
}
var defaults$3 = {
  transitional: transitionalDefaults,
  adapter: getDefaultAdapter(),
  transformRequest: [function transformRequest(data2, headers) {
    normalizeHeaderName2(headers, "Accept");
    normalizeHeaderName2(headers, "Content-Type");
    if (utils$5.isFormData(data2) || utils$5.isArrayBuffer(data2) || utils$5.isBuffer(data2) || utils$5.isStream(data2) || utils$5.isFile(data2) || utils$5.isBlob(data2)) {
      return data2;
    }
    if (utils$5.isArrayBufferView(data2)) {
      return data2.buffer;
    }
    if (utils$5.isURLSearchParams(data2)) {
      setContentTypeIfUnset(headers, "application/x-www-form-urlencoded;charset=utf-8");
      return data2.toString();
    }
    if (utils$5.isObject(data2) || headers && headers["Content-Type"] === "application/json") {
      setContentTypeIfUnset(headers, "application/json");
      return stringifySafely(data2);
    }
    return data2;
  }],
  transformResponse: [function transformResponse(data2) {
    var transitional3 = this.transitional || defaults$3.transitional;
    var silentJSONParsing = transitional3 && transitional3.silentJSONParsing;
    var forcedJSONParsing = transitional3 && transitional3.forcedJSONParsing;
    var strictJSONParsing = !silentJSONParsing && this.responseType === "json";
    if (strictJSONParsing || forcedJSONParsing && utils$5.isString(data2) && data2.length) {
      try {
        return JSON.parse(data2);
      } catch (e) {
        if (strictJSONParsing) {
          if (e.name === "SyntaxError") {
            throw enhanceError$1(e, this, "E_JSON_PARSE");
          }
          throw e;
        }
      }
    }
    return data2;
  }],
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  },
  headers: {
    common: {
      "Accept": "application/json, text/plain, */*"
    }
  }
};
utils$5.forEach(["delete", "get", "head"], function forEachMethodNoData(method) {
  defaults$3.headers[method] = {};
});
utils$5.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
  defaults$3.headers[method] = utils$5.merge(DEFAULT_CONTENT_TYPE);
});
var defaults_1 = defaults$3;
var utils$4 = utils$9;
var defaults$2 = defaults_1;
var transformData$1 = function transformData(data2, headers, fns) {
  var context = this || defaults$2;
  utils$4.forEach(fns, function transform(fn) {
    data2 = fn.call(context, data2, headers);
  });
  return data2;
};
var isCancel$1;
var hasRequiredIsCancel;
function requireIsCancel() {
  if (hasRequiredIsCancel)
    return isCancel$1;
  hasRequiredIsCancel = 1;
  isCancel$1 = function isCancel2(value) {
    return !!(value && value.__CANCEL__);
  };
  return isCancel$1;
}
var utils$3 = utils$9;
var transformData2 = transformData$1;
var isCancel = requireIsCancel();
var defaults$1 = defaults_1;
var Cancel = requireCancel();
function throwIfCancellationRequested(config2) {
  if (config2.cancelToken) {
    config2.cancelToken.throwIfRequested();
  }
  if (config2.signal && config2.signal.aborted) {
    throw new Cancel("canceled");
  }
}
var dispatchRequest$1 = function dispatchRequest(config2) {
  throwIfCancellationRequested(config2);
  config2.headers = config2.headers || {};
  config2.data = transformData2.call(
    config2,
    config2.data,
    config2.headers,
    config2.transformRequest
  );
  config2.headers = utils$3.merge(
    config2.headers.common || {},
    config2.headers[config2.method] || {},
    config2.headers
  );
  utils$3.forEach(
    ["delete", "get", "head", "post", "put", "patch", "common"],
    function cleanHeaderConfig(method) {
      delete config2.headers[method];
    }
  );
  var adapter = config2.adapter || defaults$1.adapter;
  return adapter(config2).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config2);
    response.data = transformData2.call(
      config2,
      response.data,
      response.headers,
      config2.transformResponse
    );
    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config2);
      if (reason && reason.response) {
        reason.response.data = transformData2.call(
          config2,
          reason.response.data,
          reason.response.headers,
          config2.transformResponse
        );
      }
    }
    return Promise.reject(reason);
  });
};
var utils$2 = utils$9;
var mergeConfig$2 = function mergeConfig(config1, config2) {
  config2 = config2 || {};
  var config3 = {};
  function getMergedValue(target, source) {
    if (utils$2.isPlainObject(target) && utils$2.isPlainObject(source)) {
      return utils$2.merge(target, source);
    } else if (utils$2.isPlainObject(source)) {
      return utils$2.merge({}, source);
    } else if (utils$2.isArray(source)) {
      return source.slice();
    }
    return source;
  }
  function mergeDeepProperties(prop) {
    if (!utils$2.isUndefined(config2[prop])) {
      return getMergedValue(config1[prop], config2[prop]);
    } else if (!utils$2.isUndefined(config1[prop])) {
      return getMergedValue(void 0, config1[prop]);
    }
  }
  function valueFromConfig2(prop) {
    if (!utils$2.isUndefined(config2[prop])) {
      return getMergedValue(void 0, config2[prop]);
    }
  }
  function defaultToConfig2(prop) {
    if (!utils$2.isUndefined(config2[prop])) {
      return getMergedValue(void 0, config2[prop]);
    } else if (!utils$2.isUndefined(config1[prop])) {
      return getMergedValue(void 0, config1[prop]);
    }
  }
  function mergeDirectKeys(prop) {
    if (prop in config2) {
      return getMergedValue(config1[prop], config2[prop]);
    } else if (prop in config1) {
      return getMergedValue(void 0, config1[prop]);
    }
  }
  var mergeMap = {
    "url": valueFromConfig2,
    "method": valueFromConfig2,
    "data": valueFromConfig2,
    "baseURL": defaultToConfig2,
    "transformRequest": defaultToConfig2,
    "transformResponse": defaultToConfig2,
    "paramsSerializer": defaultToConfig2,
    "timeout": defaultToConfig2,
    "timeoutMessage": defaultToConfig2,
    "withCredentials": defaultToConfig2,
    "adapter": defaultToConfig2,
    "responseType": defaultToConfig2,
    "xsrfCookieName": defaultToConfig2,
    "xsrfHeaderName": defaultToConfig2,
    "onUploadProgress": defaultToConfig2,
    "onDownloadProgress": defaultToConfig2,
    "decompress": defaultToConfig2,
    "maxContentLength": defaultToConfig2,
    "maxBodyLength": defaultToConfig2,
    "transport": defaultToConfig2,
    "httpAgent": defaultToConfig2,
    "httpsAgent": defaultToConfig2,
    "cancelToken": defaultToConfig2,
    "socketPath": defaultToConfig2,
    "responseEncoding": defaultToConfig2,
    "validateStatus": mergeDirectKeys
  };
  utils$2.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {
    var merge2 = mergeMap[prop] || mergeDeepProperties;
    var configValue = merge2(prop);
    utils$2.isUndefined(configValue) && merge2 !== mergeDirectKeys || (config3[prop] = configValue);
  });
  return config3;
};
var data;
var hasRequiredData;
function requireData() {
  if (hasRequiredData)
    return data;
  hasRequiredData = 1;
  data = {
    "version": "0.26.1"
  };
  return data;
}
var VERSION = requireData().version;
var validators$1 = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach(function(type, i) {
  validators$1[type] = function validator2(thing) {
    return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
  };
});
var deprecatedWarnings = {};
validators$1.transitional = function transitional2(validator2, version2, message) {
  function formatMessage(opt, desc) {
    return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
  }
  return function(value, opt, opts) {
    if (validator2 === false) {
      throw new Error(formatMessage(opt, " has been removed" + (version2 ? " in " + version2 : "")));
    }
    if (version2 && !deprecatedWarnings[opt]) {
      deprecatedWarnings[opt] = true;
      console.warn(
        formatMessage(
          opt,
          " has been deprecated since v" + version2 + " and will be removed in the near future"
        )
      );
    }
    return validator2 ? validator2(value, opt, opts) : true;
  };
};
function assertOptions(options2, schema, allowUnknown) {
  if (typeof options2 !== "object") {
    throw new TypeError("options must be an object");
  }
  var keys = Object.keys(options2);
  var i = keys.length;
  while (i-- > 0) {
    var opt = keys[i];
    var validator2 = schema[opt];
    if (validator2) {
      var value = options2[opt];
      var result = value === void 0 || validator2(value, opt, options2);
      if (result !== true) {
        throw new TypeError("option " + opt + " must be " + result);
      }
      continue;
    }
    if (allowUnknown !== true) {
      throw Error("Unknown option " + opt);
    }
  }
}
var validator$1 = {
  assertOptions,
  validators: validators$1
};
var utils$1 = utils$9;
var buildURL$1 = buildURL$2;
var InterceptorManager = InterceptorManager_1;
var dispatchRequest2 = dispatchRequest$1;
var mergeConfig$1 = mergeConfig$2;
var validator = validator$1;
var validators = validator.validators;
function Axios$1(instanceConfig) {
  this.defaults = instanceConfig;
  this.interceptors = {
    request: new InterceptorManager(),
    response: new InterceptorManager()
  };
}
Axios$1.prototype.request = function request(configOrUrl, config2) {
  if (typeof configOrUrl === "string") {
    config2 = config2 || {};
    config2.url = configOrUrl;
  } else {
    config2 = configOrUrl || {};
  }
  config2 = mergeConfig$1(this.defaults, config2);
  if (config2.method) {
    config2.method = config2.method.toLowerCase();
  } else if (this.defaults.method) {
    config2.method = this.defaults.method.toLowerCase();
  } else {
    config2.method = "get";
  }
  var transitional3 = config2.transitional;
  if (transitional3 !== void 0) {
    validator.assertOptions(transitional3, {
      silentJSONParsing: validators.transitional(validators.boolean),
      forcedJSONParsing: validators.transitional(validators.boolean),
      clarifyTimeoutError: validators.transitional(validators.boolean)
    }, false);
  }
  var requestInterceptorChain = [];
  var synchronousRequestInterceptors = true;
  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
    if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config2) === false) {
      return;
    }
    synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
    requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
  });
  var responseInterceptorChain = [];
  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
    responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
  });
  var promise;
  if (!synchronousRequestInterceptors) {
    var chain = [dispatchRequest2, void 0];
    Array.prototype.unshift.apply(chain, requestInterceptorChain);
    chain = chain.concat(responseInterceptorChain);
    promise = Promise.resolve(config2);
    while (chain.length) {
      promise = promise.then(chain.shift(), chain.shift());
    }
    return promise;
  }
  var newConfig = config2;
  while (requestInterceptorChain.length) {
    var onFulfilled = requestInterceptorChain.shift();
    var onRejected = requestInterceptorChain.shift();
    try {
      newConfig = onFulfilled(newConfig);
    } catch (error) {
      onRejected(error);
      break;
    }
  }
  try {
    promise = dispatchRequest2(newConfig);
  } catch (error) {
    return Promise.reject(error);
  }
  while (responseInterceptorChain.length) {
    promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());
  }
  return promise;
};
Axios$1.prototype.getUri = function getUri(config2) {
  config2 = mergeConfig$1(this.defaults, config2);
  return buildURL$1(config2.url, config2.params, config2.paramsSerializer).replace(/^\?/, "");
};
utils$1.forEach(["delete", "get", "head", "options"], function forEachMethodNoData2(method) {
  Axios$1.prototype[method] = function(url, config2) {
    return this.request(mergeConfig$1(config2 || {}, {
      method,
      url,
      data: (config2 || {}).data
    }));
  };
});
utils$1.forEach(["post", "put", "patch"], function forEachMethodWithData2(method) {
  Axios$1.prototype[method] = function(url, data2, config2) {
    return this.request(mergeConfig$1(config2 || {}, {
      method,
      url,
      data: data2
    }));
  };
});
var Axios_1 = Axios$1;
var CancelToken_1;
var hasRequiredCancelToken;
function requireCancelToken() {
  if (hasRequiredCancelToken)
    return CancelToken_1;
  hasRequiredCancelToken = 1;
  var Cancel2 = requireCancel();
  function CancelToken(executor) {
    if (typeof executor !== "function") {
      throw new TypeError("executor must be a function.");
    }
    var resolvePromise;
    this.promise = new Promise(function promiseExecutor(resolve) {
      resolvePromise = resolve;
    });
    var token = this;
    this.promise.then(function(cancel) {
      if (!token._listeners)
        return;
      var i;
      var l = token._listeners.length;
      for (i = 0; i < l; i++) {
        token._listeners[i](cancel);
      }
      token._listeners = null;
    });
    this.promise.then = function(onfulfilled) {
      var _resolve;
      var promise = new Promise(function(resolve) {
        token.subscribe(resolve);
        _resolve = resolve;
      }).then(onfulfilled);
      promise.cancel = function reject() {
        token.unsubscribe(_resolve);
      };
      return promise;
    };
    executor(function cancel(message) {
      if (token.reason) {
        return;
      }
      token.reason = new Cancel2(message);
      resolvePromise(token.reason);
    });
  }
  CancelToken.prototype.throwIfRequested = function throwIfRequested() {
    if (this.reason) {
      throw this.reason;
    }
  };
  CancelToken.prototype.subscribe = function subscribe(listener) {
    if (this.reason) {
      listener(this.reason);
      return;
    }
    if (this._listeners) {
      this._listeners.push(listener);
    } else {
      this._listeners = [listener];
    }
  };
  CancelToken.prototype.unsubscribe = function unsubscribe(listener) {
    if (!this._listeners) {
      return;
    }
    var index = this._listeners.indexOf(listener);
    if (index !== -1) {
      this._listeners.splice(index, 1);
    }
  };
  CancelToken.source = function source() {
    var cancel;
    var token = new CancelToken(function executor(c) {
      cancel = c;
    });
    return {
      token,
      cancel
    };
  };
  CancelToken_1 = CancelToken;
  return CancelToken_1;
}
var spread;
var hasRequiredSpread;
function requireSpread() {
  if (hasRequiredSpread)
    return spread;
  hasRequiredSpread = 1;
  spread = function spread2(callback) {
    return function wrap2(arr) {
      return callback.apply(null, arr);
    };
  };
  return spread;
}
var isAxiosError;
var hasRequiredIsAxiosError;
function requireIsAxiosError() {
  if (hasRequiredIsAxiosError)
    return isAxiosError;
  hasRequiredIsAxiosError = 1;
  var utils2 = utils$9;
  isAxiosError = function isAxiosError2(payload) {
    return utils2.isObject(payload) && payload.isAxiosError === true;
  };
  return isAxiosError;
}
var utils = utils$9;
var bind2 = bind$2;
var Axios = Axios_1;
var mergeConfig2 = mergeConfig$2;
var defaults = defaults_1;
function createInstance(defaultConfig) {
  var context = new Axios(defaultConfig);
  var instance2 = bind2(Axios.prototype.request, context);
  utils.extend(instance2, Axios.prototype, context);
  utils.extend(instance2, context);
  instance2.create = function create(instanceConfig) {
    return createInstance(mergeConfig2(defaultConfig, instanceConfig));
  };
  return instance2;
}
var axios$1 = createInstance(defaults);
axios$1.Axios = Axios;
axios$1.Cancel = requireCancel();
axios$1.CancelToken = requireCancelToken();
axios$1.isCancel = requireIsCancel();
axios$1.VERSION = requireData().version;
axios$1.all = function all(promises) {
  return Promise.all(promises);
};
axios$1.spread = requireSpread();
axios$1.isAxiosError = requireIsAxiosError();
axios$2.exports = axios$1;
axios$2.exports.default = axios$1;
(function(module2) {
  module2.exports = axios$2.exports;
})(axios$3);
const axios = /* @__PURE__ */ getDefaultExportFromCjs(axios$3.exports);
var common = {};
var base = {};
(function(exports2) {
  Object.defineProperty(exports2, "__esModule", { value: true });
  exports2.RequiredError = exports2.BaseAPI = exports2.COLLECTION_FORMATS = exports2.BASE_PATH = void 0;
  const axios_1 = axios$3.exports;
  exports2.BASE_PATH = "https://api.openai.com/v1".replace(/\/+$/, "");
  exports2.COLLECTION_FORMATS = {
    csv: ",",
    ssv: " ",
    tsv: "	",
    pipes: "|"
  };
  class BaseAPI {
    constructor(configuration2, basePath = exports2.BASE_PATH, axios2 = axios_1.default) {
      this.basePath = basePath;
      this.axios = axios2;
      if (configuration2) {
        this.configuration = configuration2;
        this.basePath = configuration2.basePath || this.basePath;
      }
    }
  }
  exports2.BaseAPI = BaseAPI;
  class RequiredError extends Error {
    constructor(field, msg) {
      super(msg);
      this.field = field;
      this.name = "RequiredError";
    }
  }
  exports2.RequiredError = RequiredError;
})(base);
var __awaiter = commonjsGlobal && commonjsGlobal.__awaiter || function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
Object.defineProperty(common, "__esModule", { value: true });
common.createRequestFunction = common.toPathString = common.serializeDataIfNeeded = common.setSearchParams = common.setOAuthToObject = common.setBearerAuthToObject = common.setBasicAuthToObject = common.setApiKeyToObject = common.assertParamExists = common.DUMMY_BASE_URL = void 0;
const base_1 = base;
common.DUMMY_BASE_URL = "https://example.com";
common.assertParamExists = function(functionName, paramName, paramValue) {
  if (paramValue === null || paramValue === void 0) {
    throw new base_1.RequiredError(paramName, `Required parameter ${paramName} was null or undefined when calling ${functionName}.`);
  }
};
common.setApiKeyToObject = function(object, keyParamName, configuration2) {
  return __awaiter(this, void 0, void 0, function* () {
    if (configuration2 && configuration2.apiKey) {
      const localVarApiKeyValue = typeof configuration2.apiKey === "function" ? yield configuration2.apiKey(keyParamName) : yield configuration2.apiKey;
      object[keyParamName] = localVarApiKeyValue;
    }
  });
};
common.setBasicAuthToObject = function(object, configuration2) {
  if (configuration2 && (configuration2.username || configuration2.password)) {
    object["auth"] = { username: configuration2.username, password: configuration2.password };
  }
};
common.setBearerAuthToObject = function(object, configuration2) {
  return __awaiter(this, void 0, void 0, function* () {
    if (configuration2 && configuration2.accessToken) {
      const accessToken = typeof configuration2.accessToken === "function" ? yield configuration2.accessToken() : yield configuration2.accessToken;
      object["Authorization"] = "Bearer " + accessToken;
    }
  });
};
common.setOAuthToObject = function(object, name2, scopes, configuration2) {
  return __awaiter(this, void 0, void 0, function* () {
    if (configuration2 && configuration2.accessToken) {
      const localVarAccessTokenValue = typeof configuration2.accessToken === "function" ? yield configuration2.accessToken(name2, scopes) : yield configuration2.accessToken;
      object["Authorization"] = "Bearer " + localVarAccessTokenValue;
    }
  });
};
function setFlattenedQueryParams(urlSearchParams, parameter, key = "") {
  if (parameter == null)
    return;
  if (typeof parameter === "object") {
    if (Array.isArray(parameter)) {
      parameter.forEach((item) => setFlattenedQueryParams(urlSearchParams, item, key));
    } else {
      Object.keys(parameter).forEach((currentKey) => setFlattenedQueryParams(urlSearchParams, parameter[currentKey], `${key}${key !== "" ? "." : ""}${currentKey}`));
    }
  } else {
    if (urlSearchParams.has(key)) {
      urlSearchParams.append(key, parameter);
    } else {
      urlSearchParams.set(key, parameter);
    }
  }
}
common.setSearchParams = function(url, ...objects) {
  const searchParams = new URLSearchParams(url.search);
  setFlattenedQueryParams(searchParams, objects);
  url.search = searchParams.toString();
};
common.serializeDataIfNeeded = function(value, requestOptions, configuration2) {
  const nonString = typeof value !== "string";
  const needsSerialization = nonString && configuration2 && configuration2.isJsonMime ? configuration2.isJsonMime(requestOptions.headers["Content-Type"]) : nonString;
  return needsSerialization ? JSON.stringify(value !== void 0 ? value : {}) : value || "";
};
common.toPathString = function(url) {
  return url.pathname + url.search + url.hash;
};
common.createRequestFunction = function(axiosArgs, globalAxios, BASE_PATH, configuration2) {
  return (axios2 = globalAxios, basePath = BASE_PATH) => {
    const axiosRequestArgs = Object.assign(Object.assign({}, axiosArgs.options), { url: ((configuration2 === null || configuration2 === void 0 ? void 0 : configuration2.basePath) || basePath) + axiosArgs.url });
    return axios2.request(axiosRequestArgs);
  };
};
(function(exports2) {
  var __awaiter2 = commonjsGlobal && commonjsGlobal.__awaiter || function(thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P ? value : new P(function(resolve) {
        resolve(value);
      });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  };
  Object.defineProperty(exports2, "__esModule", { value: true });
  exports2.OpenAIApi = exports2.OpenAIApiFactory = exports2.OpenAIApiFp = exports2.OpenAIApiAxiosParamCreator = exports2.CreateImageRequestResponseFormatEnum = exports2.CreateImageRequestSizeEnum = exports2.ChatCompletionResponseMessageRoleEnum = exports2.ChatCompletionRequestMessageRoleEnum = void 0;
  const axios_1 = axios$3.exports;
  const common_1 = common;
  const base_12 = base;
  exports2.ChatCompletionRequestMessageRoleEnum = {
    System: "system",
    User: "user",
    Assistant: "assistant"
  };
  exports2.ChatCompletionResponseMessageRoleEnum = {
    System: "system",
    User: "user",
    Assistant: "assistant"
  };
  exports2.CreateImageRequestSizeEnum = {
    _256x256: "256x256",
    _512x512: "512x512",
    _1024x1024: "1024x1024"
  };
  exports2.CreateImageRequestResponseFormatEnum = {
    Url: "url",
    B64Json: "b64_json"
  };
  exports2.OpenAIApiAxiosParamCreator = function(configuration2) {
    return {
      cancelFineTune: (fineTuneId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("cancelFineTune", "fineTuneId", fineTuneId);
        const localVarPath = `/fine-tunes/{fine_tune_id}/cancel`.replace(`{${"fine_tune_id"}}`, encodeURIComponent(String(fineTuneId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createAnswer: (createAnswerRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createAnswer", "createAnswerRequest", createAnswerRequest);
        const localVarPath = `/answers`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createAnswerRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createChatCompletion: (createChatCompletionRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createChatCompletion", "createChatCompletionRequest", createChatCompletionRequest);
        const localVarPath = `/chat/completions`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createChatCompletionRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createClassification: (createClassificationRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createClassification", "createClassificationRequest", createClassificationRequest);
        const localVarPath = `/classifications`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createClassificationRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createCompletion: (createCompletionRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createCompletion", "createCompletionRequest", createCompletionRequest);
        const localVarPath = `/completions`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createCompletionRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createEdit: (createEditRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createEdit", "createEditRequest", createEditRequest);
        const localVarPath = `/edits`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createEditRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createEmbedding: (createEmbeddingRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createEmbedding", "createEmbeddingRequest", createEmbeddingRequest);
        const localVarPath = `/embeddings`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createEmbeddingRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createFile: (file, purpose, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createFile", "file", file);
        common_1.assertParamExists("createFile", "purpose", purpose);
        const localVarPath = `/files`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (file !== void 0) {
          localVarFormParams.append("file", file);
        }
        if (purpose !== void 0) {
          localVarFormParams.append("purpose", purpose);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createFineTune: (createFineTuneRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createFineTune", "createFineTuneRequest", createFineTuneRequest);
        const localVarPath = `/fine-tunes`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createFineTuneRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createImage: (createImageRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createImage", "createImageRequest", createImageRequest);
        const localVarPath = `/images/generations`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createImageRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createImageEdit: (image, prompt, mask, n, size, responseFormat, user, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createImageEdit", "image", image);
        common_1.assertParamExists("createImageEdit", "prompt", prompt);
        const localVarPath = `/images/edits`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (image !== void 0) {
          localVarFormParams.append("image", image);
        }
        if (mask !== void 0) {
          localVarFormParams.append("mask", mask);
        }
        if (prompt !== void 0) {
          localVarFormParams.append("prompt", prompt);
        }
        if (n !== void 0) {
          localVarFormParams.append("n", n);
        }
        if (size !== void 0) {
          localVarFormParams.append("size", size);
        }
        if (responseFormat !== void 0) {
          localVarFormParams.append("response_format", responseFormat);
        }
        if (user !== void 0) {
          localVarFormParams.append("user", user);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createImageVariation: (image, n, size, responseFormat, user, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createImageVariation", "image", image);
        const localVarPath = `/images/variations`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (image !== void 0) {
          localVarFormParams.append("image", image);
        }
        if (n !== void 0) {
          localVarFormParams.append("n", n);
        }
        if (size !== void 0) {
          localVarFormParams.append("size", size);
        }
        if (responseFormat !== void 0) {
          localVarFormParams.append("response_format", responseFormat);
        }
        if (user !== void 0) {
          localVarFormParams.append("user", user);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createModeration: (createModerationRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createModeration", "createModerationRequest", createModerationRequest);
        const localVarPath = `/moderations`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createModerationRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createSearch: (engineId, createSearchRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createSearch", "engineId", engineId);
        common_1.assertParamExists("createSearch", "createSearchRequest", createSearchRequest);
        const localVarPath = `/engines/{engine_id}/search`.replace(`{${"engine_id"}}`, encodeURIComponent(String(engineId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createSearchRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createTranscription: (file, model, prompt, responseFormat, temperature, language, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createTranscription", "file", file);
        common_1.assertParamExists("createTranscription", "model", model);
        const localVarPath = `/audio/transcriptions`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (file !== void 0) {
          localVarFormParams.append("file", file);
        }
        if (model !== void 0) {
          localVarFormParams.append("model", model);
        }
        if (prompt !== void 0) {
          localVarFormParams.append("prompt", prompt);
        }
        if (responseFormat !== void 0) {
          localVarFormParams.append("response_format", responseFormat);
        }
        if (temperature !== void 0) {
          localVarFormParams.append("temperature", temperature);
        }
        if (language !== void 0) {
          localVarFormParams.append("language", language);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createTranslation: (file, model, prompt, responseFormat, temperature, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createTranslation", "file", file);
        common_1.assertParamExists("createTranslation", "model", model);
        const localVarPath = `/audio/translations`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (file !== void 0) {
          localVarFormParams.append("file", file);
        }
        if (model !== void 0) {
          localVarFormParams.append("model", model);
        }
        if (prompt !== void 0) {
          localVarFormParams.append("prompt", prompt);
        }
        if (responseFormat !== void 0) {
          localVarFormParams.append("response_format", responseFormat);
        }
        if (temperature !== void 0) {
          localVarFormParams.append("temperature", temperature);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      deleteFile: (fileId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("deleteFile", "fileId", fileId);
        const localVarPath = `/files/{file_id}`.replace(`{${"file_id"}}`, encodeURIComponent(String(fileId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "DELETE" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      deleteModel: (model, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("deleteModel", "model", model);
        const localVarPath = `/models/{model}`.replace(`{${"model"}}`, encodeURIComponent(String(model)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "DELETE" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      downloadFile: (fileId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("downloadFile", "fileId", fileId);
        const localVarPath = `/files/{file_id}/content`.replace(`{${"file_id"}}`, encodeURIComponent(String(fileId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listEngines: (options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        const localVarPath = `/engines`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listFiles: (options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        const localVarPath = `/files`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listFineTuneEvents: (fineTuneId, stream, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("listFineTuneEvents", "fineTuneId", fineTuneId);
        const localVarPath = `/fine-tunes/{fine_tune_id}/events`.replace(`{${"fine_tune_id"}}`, encodeURIComponent(String(fineTuneId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        if (stream !== void 0) {
          localVarQueryParameter["stream"] = stream;
        }
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listFineTunes: (options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        const localVarPath = `/fine-tunes`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listModels: (options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        const localVarPath = `/models`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      retrieveEngine: (engineId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("retrieveEngine", "engineId", engineId);
        const localVarPath = `/engines/{engine_id}`.replace(`{${"engine_id"}}`, encodeURIComponent(String(engineId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      retrieveFile: (fileId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("retrieveFile", "fileId", fileId);
        const localVarPath = `/files/{file_id}`.replace(`{${"file_id"}}`, encodeURIComponent(String(fileId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      retrieveFineTune: (fineTuneId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("retrieveFineTune", "fineTuneId", fineTuneId);
        const localVarPath = `/fine-tunes/{fine_tune_id}`.replace(`{${"fine_tune_id"}}`, encodeURIComponent(String(fineTuneId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      retrieveModel: (model, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("retrieveModel", "model", model);
        const localVarPath = `/models/{model}`.replace(`{${"model"}}`, encodeURIComponent(String(model)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      })
    };
  };
  exports2.OpenAIApiFp = function(configuration2) {
    const localVarAxiosParamCreator = exports2.OpenAIApiAxiosParamCreator(configuration2);
    return {
      cancelFineTune(fineTuneId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.cancelFineTune(fineTuneId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createAnswer(createAnswerRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createAnswer(createAnswerRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createChatCompletion(createChatCompletionRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createChatCompletion(createChatCompletionRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createClassification(createClassificationRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createClassification(createClassificationRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createCompletion(createCompletionRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createCompletion(createCompletionRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createEdit(createEditRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createEdit(createEditRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createEmbedding(createEmbeddingRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createEmbedding(createEmbeddingRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createFile(file, purpose, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createFile(file, purpose, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createFineTune(createFineTuneRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createFineTune(createFineTuneRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createImage(createImageRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createImage(createImageRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createImageVariation(image, n, size, responseFormat, user, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createImageVariation(image, n, size, responseFormat, user, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createModeration(createModerationRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createModeration(createModerationRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createSearch(engineId, createSearchRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createSearch(engineId, createSearchRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createTranscription(file, model, prompt, responseFormat, temperature, language, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createTranscription(file, model, prompt, responseFormat, temperature, language, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createTranslation(file, model, prompt, responseFormat, temperature, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createTranslation(file, model, prompt, responseFormat, temperature, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      deleteFile(fileId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.deleteFile(fileId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      deleteModel(model, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.deleteModel(model, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      downloadFile(fileId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.downloadFile(fileId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listEngines(options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listEngines(options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listFiles(options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listFiles(options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listFineTuneEvents(fineTuneId, stream, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listFineTuneEvents(fineTuneId, stream, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listFineTunes(options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listFineTunes(options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listModels(options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listModels(options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      retrieveEngine(engineId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveEngine(engineId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      retrieveFile(fileId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveFile(fileId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      retrieveFineTune(fineTuneId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveFineTune(fineTuneId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      retrieveModel(model, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveModel(model, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      }
    };
  };
  exports2.OpenAIApiFactory = function(configuration2, basePath, axios2) {
    const localVarFp = exports2.OpenAIApiFp(configuration2);
    return {
      cancelFineTune(fineTuneId, options2) {
        return localVarFp.cancelFineTune(fineTuneId, options2).then((request2) => request2(axios2, basePath));
      },
      createAnswer(createAnswerRequest, options2) {
        return localVarFp.createAnswer(createAnswerRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createChatCompletion(createChatCompletionRequest, options2) {
        return localVarFp.createChatCompletion(createChatCompletionRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createClassification(createClassificationRequest, options2) {
        return localVarFp.createClassification(createClassificationRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createCompletion(createCompletionRequest, options2) {
        return localVarFp.createCompletion(createCompletionRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createEdit(createEditRequest, options2) {
        return localVarFp.createEdit(createEditRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createEmbedding(createEmbeddingRequest, options2) {
        return localVarFp.createEmbedding(createEmbeddingRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createFile(file, purpose, options2) {
        return localVarFp.createFile(file, purpose, options2).then((request2) => request2(axios2, basePath));
      },
      createFineTune(createFineTuneRequest, options2) {
        return localVarFp.createFineTune(createFineTuneRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createImage(createImageRequest, options2) {
        return localVarFp.createImage(createImageRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2) {
        return localVarFp.createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2).then((request2) => request2(axios2, basePath));
      },
      createImageVariation(image, n, size, responseFormat, user, options2) {
        return localVarFp.createImageVariation(image, n, size, responseFormat, user, options2).then((request2) => request2(axios2, basePath));
      },
      createModeration(createModerationRequest, options2) {
        return localVarFp.createModeration(createModerationRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createSearch(engineId, createSearchRequest, options2) {
        return localVarFp.createSearch(engineId, createSearchRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createTranscription(file, model, prompt, responseFormat, temperature, language, options2) {
        return localVarFp.createTranscription(file, model, prompt, responseFormat, temperature, language, options2).then((request2) => request2(axios2, basePath));
      },
      createTranslation(file, model, prompt, responseFormat, temperature, options2) {
        return localVarFp.createTranslation(file, model, prompt, responseFormat, temperature, options2).then((request2) => request2(axios2, basePath));
      },
      deleteFile(fileId, options2) {
        return localVarFp.deleteFile(fileId, options2).then((request2) => request2(axios2, basePath));
      },
      deleteModel(model, options2) {
        return localVarFp.deleteModel(model, options2).then((request2) => request2(axios2, basePath));
      },
      downloadFile(fileId, options2) {
        return localVarFp.downloadFile(fileId, options2).then((request2) => request2(axios2, basePath));
      },
      listEngines(options2) {
        return localVarFp.listEngines(options2).then((request2) => request2(axios2, basePath));
      },
      listFiles(options2) {
        return localVarFp.listFiles(options2).then((request2) => request2(axios2, basePath));
      },
      listFineTuneEvents(fineTuneId, stream, options2) {
        return localVarFp.listFineTuneEvents(fineTuneId, stream, options2).then((request2) => request2(axios2, basePath));
      },
      listFineTunes(options2) {
        return localVarFp.listFineTunes(options2).then((request2) => request2(axios2, basePath));
      },
      listModels(options2) {
        return localVarFp.listModels(options2).then((request2) => request2(axios2, basePath));
      },
      retrieveEngine(engineId, options2) {
        return localVarFp.retrieveEngine(engineId, options2).then((request2) => request2(axios2, basePath));
      },
      retrieveFile(fileId, options2) {
        return localVarFp.retrieveFile(fileId, options2).then((request2) => request2(axios2, basePath));
      },
      retrieveFineTune(fineTuneId, options2) {
        return localVarFp.retrieveFineTune(fineTuneId, options2).then((request2) => request2(axios2, basePath));
      },
      retrieveModel(model, options2) {
        return localVarFp.retrieveModel(model, options2).then((request2) => request2(axios2, basePath));
      }
    };
  };
  class OpenAIApi extends base_12.BaseAPI {
    cancelFineTune(fineTuneId, options2) {
      return exports2.OpenAIApiFp(this.configuration).cancelFineTune(fineTuneId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createAnswer(createAnswerRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createAnswer(createAnswerRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createChatCompletion(createChatCompletionRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createChatCompletion(createChatCompletionRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createClassification(createClassificationRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createClassification(createClassificationRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createCompletion(createCompletionRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createCompletion(createCompletionRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createEdit(createEditRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createEdit(createEditRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createEmbedding(createEmbeddingRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createEmbedding(createEmbeddingRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createFile(file, purpose, options2) {
      return exports2.OpenAIApiFp(this.configuration).createFile(file, purpose, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createFineTune(createFineTuneRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createFineTune(createFineTuneRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createImage(createImageRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createImage(createImageRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2) {
      return exports2.OpenAIApiFp(this.configuration).createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createImageVariation(image, n, size, responseFormat, user, options2) {
      return exports2.OpenAIApiFp(this.configuration).createImageVariation(image, n, size, responseFormat, user, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createModeration(createModerationRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createModeration(createModerationRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createSearch(engineId, createSearchRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createSearch(engineId, createSearchRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createTranscription(file, model, prompt, responseFormat, temperature, language, options2) {
      return exports2.OpenAIApiFp(this.configuration).createTranscription(file, model, prompt, responseFormat, temperature, language, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createTranslation(file, model, prompt, responseFormat, temperature, options2) {
      return exports2.OpenAIApiFp(this.configuration).createTranslation(file, model, prompt, responseFormat, temperature, options2).then((request2) => request2(this.axios, this.basePath));
    }
    deleteFile(fileId, options2) {
      return exports2.OpenAIApiFp(this.configuration).deleteFile(fileId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    deleteModel(model, options2) {
      return exports2.OpenAIApiFp(this.configuration).deleteModel(model, options2).then((request2) => request2(this.axios, this.basePath));
    }
    downloadFile(fileId, options2) {
      return exports2.OpenAIApiFp(this.configuration).downloadFile(fileId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    listEngines(options2) {
      return exports2.OpenAIApiFp(this.configuration).listEngines(options2).then((request2) => request2(this.axios, this.basePath));
    }
    listFiles(options2) {
      return exports2.OpenAIApiFp(this.configuration).listFiles(options2).then((request2) => request2(this.axios, this.basePath));
    }
    listFineTuneEvents(fineTuneId, stream, options2) {
      return exports2.OpenAIApiFp(this.configuration).listFineTuneEvents(fineTuneId, stream, options2).then((request2) => request2(this.axios, this.basePath));
    }
    listFineTunes(options2) {
      return exports2.OpenAIApiFp(this.configuration).listFineTunes(options2).then((request2) => request2(this.axios, this.basePath));
    }
    listModels(options2) {
      return exports2.OpenAIApiFp(this.configuration).listModels(options2).then((request2) => request2(this.axios, this.basePath));
    }
    retrieveEngine(engineId, options2) {
      return exports2.OpenAIApiFp(this.configuration).retrieveEngine(engineId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    retrieveFile(fileId, options2) {
      return exports2.OpenAIApiFp(this.configuration).retrieveFile(fileId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    retrieveFineTune(fineTuneId, options2) {
      return exports2.OpenAIApiFp(this.configuration).retrieveFineTune(fineTuneId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    retrieveModel(model, options2) {
      return exports2.OpenAIApiFp(this.configuration).retrieveModel(model, options2).then((request2) => request2(this.axios, this.basePath));
    }
  }
  exports2.OpenAIApi = OpenAIApi;
})(api);
var configuration = {};
const name = "openai";
const version = "3.2.1";
const description = "Node.js library for the OpenAI API";
const repository = {
  type: "git",
  url: "git@github.com:openai/openai-node.git"
};
const keywords = [
  "openai",
  "open",
  "ai",
  "gpt-3",
  "gpt3"
];
const author = "OpenAI";
const license = "MIT";
const main = "./dist/index.js";
const types = "./dist/index.d.ts";
const scripts = {
  build: "tsc --outDir dist/"
};
const dependencies = {
  axios: "^0.26.0",
  "form-data": "^4.0.0"
};
const devDependencies = {
  "@types/node": "^12.11.5",
  typescript: "^3.6.4"
};
const require$$0 = {
  name,
  version,
  description,
  repository,
  keywords,
  author,
  license,
  main,
  types,
  scripts,
  dependencies,
  devDependencies
};
var browser;
var hasRequiredBrowser;
function requireBrowser() {
  if (hasRequiredBrowser)
    return browser;
  hasRequiredBrowser = 1;
  browser = typeof self == "object" ? self.FormData : window.FormData;
  return browser;
}
Object.defineProperty(configuration, "__esModule", { value: true });
configuration.Configuration = void 0;
const packageJson = require$$0;
class Configuration {
  constructor(param = {}) {
    this.apiKey = param.apiKey;
    this.organization = param.organization;
    this.username = param.username;
    this.password = param.password;
    this.accessToken = param.accessToken;
    this.basePath = param.basePath;
    this.baseOptions = param.baseOptions;
    this.formDataCtor = param.formDataCtor;
    if (!this.baseOptions) {
      this.baseOptions = {};
    }
    this.baseOptions.headers = Object.assign({ "User-Agent": `OpenAI/NodeJS/${packageJson.version}`, "Authorization": `Bearer ${this.apiKey}` }, this.baseOptions.headers);
    if (this.organization) {
      this.baseOptions.headers["OpenAI-Organization"] = this.organization;
    }
    if (!this.formDataCtor) {
      this.formDataCtor = requireBrowser();
    }
  }
  isJsonMime(mime) {
    const jsonMime = new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$", "i");
    return mime !== null && (jsonMime.test(mime) || mime.toLowerCase() === "application/json-patch+json");
  }
}
configuration.Configuration = Configuration;
(function(exports2) {
  var __createBinding = commonjsGlobal && commonjsGlobal.__createBinding || (Object.create ? function(o, m, k, k2) {
    if (k2 === void 0)
      k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() {
      return m[k];
    } });
  } : function(o, m, k, k2) {
    if (k2 === void 0)
      k2 = k;
    o[k2] = m[k];
  });
  var __exportStar = commonjsGlobal && commonjsGlobal.__exportStar || function(m, exports3) {
    for (var p in m)
      if (p !== "default" && !exports3.hasOwnProperty(p))
        __createBinding(exports3, m, p);
  };
  Object.defineProperty(exports2, "__esModule", { value: true });
  __exportStar(api, exports2);
  __exportStar(configuration, exports2);
})(dist$1);
const isBrowser = () => typeof window !== "undefined" && typeof window.document !== "undefined";
const isWebWorker = () => typeof globalThis === "object" && globalThis.constructor && globalThis.constructor.name === "DedicatedWorkerGlobalScope";
const isJsDom = () => typeof window !== "undefined" && window.name === "nodejs" || typeof navigator !== "undefined" && (navigator.userAgent.includes("Node.js") || navigator.userAgent.includes("jsdom"));
const isDeno = () => typeof Deno !== "undefined";
const isNode = () => typeof process !== "undefined" && typeof process.versions !== "undefined" && typeof process.versions.node !== "undefined" && !isDeno();
const getEnv = () => {
  let env;
  if (isBrowser()) {
    env = "browser";
  } else if (isNode()) {
    env = "node";
  } else if (isWebWorker()) {
    env = "webworker";
  } else if (isJsDom()) {
    env = "jsdom";
  } else if (isDeno()) {
    env = "deno";
  } else {
    env = "other";
  }
  return env;
};
let runtimeEnvironment;
async function getRuntimeEnvironment() {
  if (runtimeEnvironment === void 0) {
    const env = getEnv();
    runtimeEnvironment = {
      library: "langchain-js",
      runtime: env
    };
  }
  return runtimeEnvironment;
}
function getEnvironmentVariable(name2) {
  var _a;
  try {
    return typeof process !== "undefined" ? (_a = process.env) == null ? void 0 : _a[name2] : void 0;
  } catch (e) {
    return void 0;
  }
}
const EventStreamContentType = "text/event-stream";
async function getBytes(stream, onChunk) {
  const reader = stream.getReader();
  while (true) {
    const result = await reader.read();
    if (result.done) {
      onChunk(new Uint8Array(), true);
      break;
    }
    onChunk(result.value);
  }
}
function getLines(onLine) {
  let buffer;
  let position;
  let fieldLength;
  let discardTrailingNewline = false;
  return function onChunk(arr, flush2) {
    if (flush2) {
      onLine(arr, 0, true);
      return;
    }
    if (buffer === void 0) {
      buffer = arr;
      position = 0;
      fieldLength = -1;
    } else {
      buffer = concat(buffer, arr);
    }
    const bufLength = buffer.length;
    let lineStart = 0;
    while (position < bufLength) {
      if (discardTrailingNewline) {
        if (buffer[position] === 10) {
          lineStart = ++position;
        }
        discardTrailingNewline = false;
      }
      let lineEnd = -1;
      for (; position < bufLength && lineEnd === -1; ++position) {
        switch (buffer[position]) {
          case 58:
            if (fieldLength === -1) {
              fieldLength = position - lineStart;
            }
            break;
          case 13:
            discardTrailingNewline = true;
          case 10:
            lineEnd = position;
            break;
        }
      }
      if (lineEnd === -1) {
        break;
      }
      onLine(buffer.subarray(lineStart, lineEnd), fieldLength);
      lineStart = position;
      fieldLength = -1;
    }
    if (lineStart === bufLength) {
      buffer = void 0;
    } else if (lineStart !== 0) {
      buffer = buffer.subarray(lineStart);
      position -= lineStart;
    }
  };
}
function getMessages(onMessage, onId, onRetry) {
  let message = newMessage();
  const decoder = new TextDecoder();
  return function onLine(line, fieldLength, flush2) {
    if (flush2) {
      if (!isEmpty(message)) {
        onMessage == null ? void 0 : onMessage(message);
        message = newMessage();
      }
      return;
    }
    if (line.length === 0) {
      onMessage == null ? void 0 : onMessage(message);
      message = newMessage();
    } else if (fieldLength > 0) {
      const field = decoder.decode(line.subarray(0, fieldLength));
      const valueOffset = fieldLength + (line[fieldLength + 1] === 32 ? 2 : 1);
      const value = decoder.decode(line.subarray(valueOffset));
      switch (field) {
        case "data":
          message.data = message.data ? message.data + "\n" + value : value;
          break;
        case "event":
          message.event = value;
          break;
        case "id":
          onId == null ? void 0 : onId(message.id = value);
          break;
        case "retry": {
          const retry2 = parseInt(value, 10);
          if (!Number.isNaN(retry2)) {
            onRetry == null ? void 0 : onRetry(message.retry = retry2);
          }
          break;
        }
      }
    }
  };
}
function concat(a, b) {
  const res = new Uint8Array(a.length + b.length);
  res.set(a);
  res.set(b, a.length);
  return res;
}
function newMessage() {
  return {
    data: "",
    event: "",
    id: "",
    retry: void 0
  };
}
function isEmpty(message) {
  return message.data === "" && message.event === "" && message.id === "" && message.retry === void 0;
}
function tryJsonStringify$1(data2) {
  try {
    return JSON.stringify(data2);
  } catch (e) {
    return data2;
  }
}
function settle(resolve, reject, response) {
  const { validateStatus: validateStatus2 } = response.config;
  if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
    resolve(response);
  } else {
    reject(createError(`Request failed with status code ${response.status} and body ${typeof response.data === "string" ? response.data : tryJsonStringify$1(response.data)}`, response.config, null, response.request, response));
  }
}
function isAbsoluteURL(url) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
}
function combineURLs(baseURL, relativeURL) {
  return relativeURL ? baseURL.replace(/\/+$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
}
function encode(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function buildURL2(url, params, paramsSerializer) {
  if (!params) {
    return url;
  }
  var serializedParams;
  if (paramsSerializer) {
    serializedParams = paramsSerializer(params);
  } else if (isURLSearchParams(params)) {
    serializedParams = params.toString();
  } else {
    var parts = [];
    forEach2(params, function serialize(val, key) {
      if (val === null || typeof val === "undefined") {
        return;
      }
      if (isArray(val)) {
        key = `${key}[]`;
      } else {
        val = [val];
      }
      forEach2(val, function parseValue(v) {
        if (isDate(v)) {
          v = v.toISOString();
        } else if (isObject(v)) {
          v = JSON.stringify(v);
        }
        parts.push(`${encode(key)}=${encode(v)}`);
      });
    });
    serializedParams = parts.join("&");
  }
  if (serializedParams) {
    var hashmarkIndex = url.indexOf("#");
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url;
}
function buildFullPath(baseURL, requestedURL) {
  if (baseURL && !isAbsoluteURL(requestedURL)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
}
function isUndefined(val) {
  return typeof val === "undefined";
}
function isObject(val) {
  return val !== null && typeof val === "object";
}
function isDate(val) {
  return toString.call(val) === "[object Date]";
}
function isURLSearchParams(val) {
  return toString.call(val) === "[object URLSearchParams]";
}
function isArray(val) {
  return Array.isArray(val);
}
function forEach2(obj, fn) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray(obj)) {
    for (var i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        fn.call(null, obj[key], key, obj);
      }
    }
  }
}
function isFormData(val) {
  return toString.call(val) === "[object FormData]";
}
function isStandardBrowserEnv() {
  if (typeof navigator !== "undefined" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS")) {
    return false;
  }
  return typeof window !== "undefined" && typeof document !== "undefined";
}
async function fetchAdapter(config2) {
  const request2 = createRequest(config2);
  const data2 = await getResponse(request2, config2);
  return new Promise((resolve, reject) => {
    if (data2 instanceof Error) {
      reject(data2);
    } else {
      Object.prototype.toString.call(config2.settle) === "[object Function]" ? config2.settle(resolve, reject, data2) : settle(resolve, reject, data2);
    }
  });
}
async function getResponse(request2, config2) {
  let stageOne;
  try {
    stageOne = await fetch(request2);
  } catch (e) {
    if (e && e.name === "AbortError") {
      return createError("Request aborted", config2, "ECONNABORTED", request2);
    }
    if (e && e.name === "TimeoutError") {
      return createError("Request timeout", config2, "ECONNABORTED", request2);
    }
    return createError("Network Error", config2, "ERR_NETWORK", request2);
  }
  const headers = {};
  stageOne.headers.forEach((value, key) => {
    headers[key] = value;
  });
  const response = {
    ok: stageOne.ok,
    status: stageOne.status,
    statusText: stageOne.statusText,
    headers,
    config: config2,
    request: request2
  };
  if (stageOne.status >= 200 && stageOne.status !== 204) {
    if (config2.responseType === "stream") {
      const contentType = stageOne.headers.get("content-type");
      if (!(contentType == null ? void 0 : contentType.startsWith(EventStreamContentType))) {
        if (stageOne.status >= 400) {
          if (contentType == null ? void 0 : contentType.startsWith("application/json")) {
            response.data = await stageOne.json();
            return response;
          } else {
            response.data = await stageOne.text();
            return response;
          }
        }
        throw new Error(`Expected content-type to be ${EventStreamContentType}, Actual: ${contentType}`);
      }
      await getBytes(stageOne.body, getLines(getMessages(config2.onmessage)));
    } else {
      switch (config2.responseType) {
        case "arraybuffer":
          response.data = await stageOne.arrayBuffer();
          break;
        case "blob":
          response.data = await stageOne.blob();
          break;
        case "json":
          response.data = await stageOne.json();
          break;
        case "formData":
          response.data = await stageOne.formData();
          break;
        default:
          response.data = await stageOne.text();
          break;
      }
    }
  }
  return response;
}
function createRequest(config2) {
  const headers = new Headers(config2.headers);
  if (config2.auth) {
    const username = config2.auth.username || "";
    const password = config2.auth.password ? decodeURI(encodeURIComponent(config2.auth.password)) : "";
    headers.set("Authorization", `Basic ${btoa(`${username}:${password}`)}`);
  }
  const method = config2.method.toUpperCase();
  const options2 = {
    headers,
    method
  };
  if (method !== "GET" && method !== "HEAD") {
    options2.body = config2.data;
    if (isFormData(options2.body) && isStandardBrowserEnv()) {
      headers.delete("Content-Type");
    }
  }
  if (typeof options2.body === "string") {
    options2.body = new TextEncoder().encode(options2.body);
  }
  if (config2.mode) {
    options2.mode = config2.mode;
  }
  if (config2.cache) {
    options2.cache = config2.cache;
  }
  if (config2.integrity) {
    options2.integrity = config2.integrity;
  }
  if (config2.redirect) {
    options2.redirect = config2.redirect;
  }
  if (config2.referrer) {
    options2.referrer = config2.referrer;
  }
  if (config2.timeout && config2.timeout > 0) {
    options2.signal = AbortSignal.timeout(config2.timeout);
  }
  if (config2.signal) {
    options2.signal = config2.signal;
  }
  if (!isUndefined(config2.withCredentials)) {
    options2.credentials = config2.withCredentials ? "include" : "omit";
  }
  if (config2.responseType === "stream") {
    options2.headers.set("Accept", EventStreamContentType);
  }
  const fullPath = buildFullPath(config2.baseURL, config2.url);
  const url = buildURL2(fullPath, config2.params, config2.paramsSerializer);
  return new Request(url, options2);
}
function createError(message, config2, code2, request2, response) {
  if (axios.AxiosError && typeof axios.AxiosError === "function") {
    return new axios.AxiosError(message, axios.AxiosError[code2], config2, request2, response);
  }
  const error = new Error(message);
  return enhanceError2(error, config2, code2, request2, response);
}
function enhanceError2(error, config2, code2, request2, response) {
  error.config = config2;
  if (code2) {
    error.code = code2;
  }
  error.request = request2;
  error.response = response;
  error.isAxiosError = true;
  error.toJSON = function toJSON() {
    return {
      message: this.message,
      name: this.name,
      description: this.description,
      number: this.number,
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      config: this.config,
      code: this.code,
      status: this.response && this.response.status ? this.response.status : null
    };
  };
  return error;
}
const chunkArray = (arr, chunkSize) => arr.reduce((chunks, elem, index) => {
  const chunkIndex = Math.floor(index / chunkSize);
  const chunk = chunks[chunkIndex] || [];
  chunks[chunkIndex] = chunk.concat([elem]);
  return chunks;
}, []);
function commonjsRequire(path2) {
  throw new Error('Could not dynamically require "' + path2 + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var object_hash = { exports: {} };
(function(module2, exports2) {
  !function(e) {
    module2.exports = e();
  }(function() {
    return function r(o, i, u) {
      function s(n, e2) {
        if (!i[n]) {
          if (!o[n]) {
            var t = "function" == typeof commonjsRequire && commonjsRequire;
            if (!e2 && t)
              return t(n, true);
            if (a)
              return a(n, true);
            throw new Error("Cannot find module '" + n + "'");
          }
          e2 = i[n] = { exports: {} };
          o[n][0].call(e2.exports, function(e3) {
            var t2 = o[n][1][e3];
            return s(t2 || e3);
          }, e2, e2.exports, r, o, i, u);
        }
        return i[n].exports;
      }
      for (var a = "function" == typeof commonjsRequire && commonjsRequire, e = 0; e < u.length; e++)
        s(u[e]);
      return s;
    }({ 1: [function(w, b, m) {
      !function(e, n, s, c, d, h, p, g, y) {
        var r = w("crypto");
        function t(e2, t2) {
          t2 = u(e2, t2);
          var n2;
          return void 0 === (n2 = "passthrough" !== t2.algorithm ? r.createHash(t2.algorithm) : new l()).write && (n2.write = n2.update, n2.end = n2.update), f(t2, n2).dispatch(e2), n2.update || n2.end(""), n2.digest ? n2.digest("buffer" === t2.encoding ? void 0 : t2.encoding) : (e2 = n2.read(), "buffer" !== t2.encoding ? e2.toString(t2.encoding) : e2);
        }
        (m = b.exports = t).sha1 = function(e2) {
          return t(e2);
        }, m.keys = function(e2) {
          return t(e2, { excludeValues: true, algorithm: "sha1", encoding: "hex" });
        }, m.MD5 = function(e2) {
          return t(e2, { algorithm: "md5", encoding: "hex" });
        }, m.keysMD5 = function(e2) {
          return t(e2, { algorithm: "md5", encoding: "hex", excludeValues: true });
        };
        var o = r.getHashes ? r.getHashes().slice() : ["sha1", "md5"], i = (o.push("passthrough"), ["buffer", "hex", "binary", "base64"]);
        function u(e2, t2) {
          var n2 = {};
          if (n2.algorithm = (t2 = t2 || {}).algorithm || "sha1", n2.encoding = t2.encoding || "hex", n2.excludeValues = !!t2.excludeValues, n2.algorithm = n2.algorithm.toLowerCase(), n2.encoding = n2.encoding.toLowerCase(), n2.ignoreUnknown = true === t2.ignoreUnknown, n2.respectType = false !== t2.respectType, n2.respectFunctionNames = false !== t2.respectFunctionNames, n2.respectFunctionProperties = false !== t2.respectFunctionProperties, n2.unorderedArrays = true === t2.unorderedArrays, n2.unorderedSets = false !== t2.unorderedSets, n2.unorderedObjects = false !== t2.unorderedObjects, n2.replacer = t2.replacer || void 0, n2.excludeKeys = t2.excludeKeys || void 0, void 0 === e2)
            throw new Error("Object argument required.");
          for (var r2 = 0; r2 < o.length; ++r2)
            o[r2].toLowerCase() === n2.algorithm.toLowerCase() && (n2.algorithm = o[r2]);
          if (-1 === o.indexOf(n2.algorithm))
            throw new Error('Algorithm "' + n2.algorithm + '"  not supported. supported values: ' + o.join(", "));
          if (-1 === i.indexOf(n2.encoding) && "passthrough" !== n2.algorithm)
            throw new Error('Encoding "' + n2.encoding + '"  not supported. supported values: ' + i.join(", "));
          return n2;
        }
        function a(e2) {
          if ("function" == typeof e2)
            return null != /^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e2));
        }
        function f(o2, t2, i2) {
          i2 = i2 || [];
          function u2(e2) {
            return t2.update ? t2.update(e2, "utf8") : t2.write(e2, "utf8");
          }
          return { dispatch: function(e2) {
            return this["_" + (null === (e2 = o2.replacer ? o2.replacer(e2) : e2) ? "null" : typeof e2)](e2);
          }, _object: function(t3) {
            var n2, e2 = Object.prototype.toString.call(t3), r2 = /\[object (.*)\]/i.exec(e2);
            r2 = (r2 = r2 ? r2[1] : "unknown:[" + e2 + "]").toLowerCase();
            if (0 <= (e2 = i2.indexOf(t3)))
              return this.dispatch("[CIRCULAR:" + e2 + "]");
            if (i2.push(t3), void 0 !== s && s.isBuffer && s.isBuffer(t3))
              return u2("buffer:"), u2(t3);
            if ("object" === r2 || "function" === r2 || "asyncfunction" === r2)
              return e2 = Object.keys(t3), o2.unorderedObjects && (e2 = e2.sort()), false === o2.respectType || a(t3) || e2.splice(0, 0, "prototype", "__proto__", "constructor"), o2.excludeKeys && (e2 = e2.filter(function(e3) {
                return !o2.excludeKeys(e3);
              })), u2("object:" + e2.length + ":"), n2 = this, e2.forEach(function(e3) {
                n2.dispatch(e3), u2(":"), o2.excludeValues || n2.dispatch(t3[e3]), u2(",");
              });
            if (!this["_" + r2]) {
              if (o2.ignoreUnknown)
                return u2("[" + r2 + "]");
              throw new Error('Unknown object type "' + r2 + '"');
            }
            this["_" + r2](t3);
          }, _array: function(e2, t3) {
            t3 = void 0 !== t3 ? t3 : false !== o2.unorderedArrays;
            var n2 = this;
            if (u2("array:" + e2.length + ":"), !t3 || e2.length <= 1)
              return e2.forEach(function(e3) {
                return n2.dispatch(e3);
              });
            var r2 = [], t3 = e2.map(function(e3) {
              var t4 = new l(), n3 = i2.slice();
              return f(o2, t4, n3).dispatch(e3), r2 = r2.concat(n3.slice(i2.length)), t4.read().toString();
            });
            return i2 = i2.concat(r2), t3.sort(), this._array(t3, false);
          }, _date: function(e2) {
            return u2("date:" + e2.toJSON());
          }, _symbol: function(e2) {
            return u2("symbol:" + e2.toString());
          }, _error: function(e2) {
            return u2("error:" + e2.toString());
          }, _boolean: function(e2) {
            return u2("bool:" + e2.toString());
          }, _string: function(e2) {
            u2("string:" + e2.length + ":"), u2(e2.toString());
          }, _function: function(e2) {
            u2("fn:"), a(e2) ? this.dispatch("[native]") : this.dispatch(e2.toString()), false !== o2.respectFunctionNames && this.dispatch("function-name:" + String(e2.name)), o2.respectFunctionProperties && this._object(e2);
          }, _number: function(e2) {
            return u2("number:" + e2.toString());
          }, _xml: function(e2) {
            return u2("xml:" + e2.toString());
          }, _null: function() {
            return u2("Null");
          }, _undefined: function() {
            return u2("Undefined");
          }, _regexp: function(e2) {
            return u2("regex:" + e2.toString());
          }, _uint8array: function(e2) {
            return u2("uint8array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _uint8clampedarray: function(e2) {
            return u2("uint8clampedarray:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _int8array: function(e2) {
            return u2("int8array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _uint16array: function(e2) {
            return u2("uint16array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _int16array: function(e2) {
            return u2("int16array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _uint32array: function(e2) {
            return u2("uint32array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _int32array: function(e2) {
            return u2("int32array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _float32array: function(e2) {
            return u2("float32array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _float64array: function(e2) {
            return u2("float64array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _arraybuffer: function(e2) {
            return u2("arraybuffer:"), this.dispatch(new Uint8Array(e2));
          }, _url: function(e2) {
            return u2("url:" + e2.toString());
          }, _map: function(e2) {
            u2("map:");
            e2 = Array.from(e2);
            return this._array(e2, false !== o2.unorderedSets);
          }, _set: function(e2) {
            u2("set:");
            e2 = Array.from(e2);
            return this._array(e2, false !== o2.unorderedSets);
          }, _file: function(e2) {
            return u2("file:"), this.dispatch([e2.name, e2.size, e2.type, e2.lastModfied]);
          }, _blob: function() {
            if (o2.ignoreUnknown)
              return u2("[blob]");
            throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n');
          }, _domwindow: function() {
            return u2("domwindow");
          }, _bigint: function(e2) {
            return u2("bigint:" + e2.toString());
          }, _process: function() {
            return u2("process");
          }, _timer: function() {
            return u2("timer");
          }, _pipe: function() {
            return u2("pipe");
          }, _tcp: function() {
            return u2("tcp");
          }, _udp: function() {
            return u2("udp");
          }, _tty: function() {
            return u2("tty");
          }, _statwatcher: function() {
            return u2("statwatcher");
          }, _securecontext: function() {
            return u2("securecontext");
          }, _connection: function() {
            return u2("connection");
          }, _zlib: function() {
            return u2("zlib");
          }, _context: function() {
            return u2("context");
          }, _nodescript: function() {
            return u2("nodescript");
          }, _httpparser: function() {
            return u2("httpparser");
          }, _dataview: function() {
            return u2("dataview");
          }, _signal: function() {
            return u2("signal");
          }, _fsevent: function() {
            return u2("fsevent");
          }, _tlswrap: function() {
            return u2("tlswrap");
          } };
        }
        function l() {
          return { buf: "", write: function(e2) {
            this.buf += e2;
          }, end: function(e2) {
            this.buf += e2;
          }, read: function() {
            return this.buf;
          } };
        }
        m.writeToStream = function(e2, t2, n2) {
          return void 0 === n2 && (n2 = t2, t2 = {}), f(t2 = u(e2, t2), n2).dispatch(e2);
        };
      }.call(this, w("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, w("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/fake_9a5aa49d.js", "/");
    }, { buffer: 3, crypto: 5, lYpoI2: 11 }], 2: [function(e, t, f) {
      !function(e2, t2, n, r, o, i, u, s, a) {
        !function(e3) {
          var a2 = "undefined" != typeof Uint8Array ? Uint8Array : Array, t3 = "+".charCodeAt(0), n2 = "/".charCodeAt(0), r2 = "0".charCodeAt(0), o2 = "a".charCodeAt(0), i2 = "A".charCodeAt(0), u2 = "-".charCodeAt(0), s2 = "_".charCodeAt(0);
          function f2(e4) {
            e4 = e4.charCodeAt(0);
            return e4 === t3 || e4 === u2 ? 62 : e4 === n2 || e4 === s2 ? 63 : e4 < r2 ? -1 : e4 < r2 + 10 ? e4 - r2 + 26 + 26 : e4 < i2 + 26 ? e4 - i2 : e4 < o2 + 26 ? e4 - o2 + 26 : void 0;
          }
          e3.toByteArray = function(e4) {
            var t4, n3;
            if (0 < e4.length % 4)
              throw new Error("Invalid string. Length must be a multiple of 4");
            var r3 = e4.length, r3 = "=" === e4.charAt(r3 - 2) ? 2 : "=" === e4.charAt(r3 - 1) ? 1 : 0, o3 = new a2(3 * e4.length / 4 - r3), i3 = 0 < r3 ? e4.length - 4 : e4.length, u3 = 0;
            function s3(e5) {
              o3[u3++] = e5;
            }
            for (t4 = 0; t4 < i3; t4 += 4, 0)
              s3((16711680 & (n3 = f2(e4.charAt(t4)) << 18 | f2(e4.charAt(t4 + 1)) << 12 | f2(e4.charAt(t4 + 2)) << 6 | f2(e4.charAt(t4 + 3)))) >> 16), s3((65280 & n3) >> 8), s3(255 & n3);
            return 2 == r3 ? s3(255 & (n3 = f2(e4.charAt(t4)) << 2 | f2(e4.charAt(t4 + 1)) >> 4)) : 1 == r3 && (s3((n3 = f2(e4.charAt(t4)) << 10 | f2(e4.charAt(t4 + 1)) << 4 | f2(e4.charAt(t4 + 2)) >> 2) >> 8 & 255), s3(255 & n3)), o3;
          }, e3.fromByteArray = function(e4) {
            var t4, n3, r3, o3, i3 = e4.length % 3, u3 = "";
            function s3(e5) {
              return "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e5);
            }
            for (t4 = 0, r3 = e4.length - i3; t4 < r3; t4 += 3)
              n3 = (e4[t4] << 16) + (e4[t4 + 1] << 8) + e4[t4 + 2], u3 += s3((o3 = n3) >> 18 & 63) + s3(o3 >> 12 & 63) + s3(o3 >> 6 & 63) + s3(63 & o3);
            switch (i3) {
              case 1:
                u3 = (u3 += s3((n3 = e4[e4.length - 1]) >> 2)) + s3(n3 << 4 & 63) + "==";
                break;
              case 2:
                u3 = (u3 = (u3 += s3((n3 = (e4[e4.length - 2] << 8) + e4[e4.length - 1]) >> 10)) + s3(n3 >> 4 & 63)) + s3(n3 << 2 & 63) + "=";
            }
            return u3;
          };
        }(void 0 === f ? this.base64js = {} : f);
      }.call(this, e("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, e("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js", "/node_modules/gulp-browserify/node_modules/base64-js/lib");
    }, { buffer: 3, lYpoI2: 11 }], 3: [function(O, e, H) {
      !function(e2, n, f, r, h, p, g, y, w) {
        var a = O("base64-js"), i = O("ieee754");
        function f(e3, t2, n2) {
          if (!(this instanceof f))
            return new f(e3, t2, n2);
          var r2, o2, i2, u2, s2 = typeof e3;
          if ("base64" === t2 && "string" == s2)
            for (e3 = (u2 = e3).trim ? u2.trim() : u2.replace(/^\s+|\s+$/g, ""); e3.length % 4 != 0; )
              e3 += "=";
          if ("number" == s2)
            r2 = j(e3);
          else if ("string" == s2)
            r2 = f.byteLength(e3, t2);
          else {
            if ("object" != s2)
              throw new Error("First argument needs to be a number, array or string.");
            r2 = j(e3.length);
          }
          if (f._useTypedArrays ? o2 = f._augment(new Uint8Array(r2)) : ((o2 = this).length = r2, o2._isBuffer = true), f._useTypedArrays && "number" == typeof e3.byteLength)
            o2._set(e3);
          else if (C(u2 = e3) || f.isBuffer(u2) || u2 && "object" == typeof u2 && "number" == typeof u2.length)
            for (i2 = 0; i2 < r2; i2++)
              f.isBuffer(e3) ? o2[i2] = e3.readUInt8(i2) : o2[i2] = e3[i2];
          else if ("string" == s2)
            o2.write(e3, 0, t2);
          else if ("number" == s2 && !f._useTypedArrays && !n2)
            for (i2 = 0; i2 < r2; i2++)
              o2[i2] = 0;
          return o2;
        }
        function b(e3, t2, n2, r2) {
          return f._charsWritten = c(function(e4) {
            for (var t3 = [], n3 = 0; n3 < e4.length; n3++)
              t3.push(255 & e4.charCodeAt(n3));
            return t3;
          }(t2), e3, n2, r2);
        }
        function m(e3, t2, n2, r2) {
          return f._charsWritten = c(function(e4) {
            for (var t3, n3, r3 = [], o2 = 0; o2 < e4.length; o2++)
              n3 = e4.charCodeAt(o2), t3 = n3 >> 8, n3 = n3 % 256, r3.push(n3), r3.push(t3);
            return r3;
          }(t2), e3, n2, r2);
        }
        function v(e3, t2, n2) {
          var r2 = "";
          n2 = Math.min(e3.length, n2);
          for (var o2 = t2; o2 < n2; o2++)
            r2 += String.fromCharCode(e3[o2]);
          return r2;
        }
        function o(e3, t2, n2, r2) {
          r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(null != t2, "missing offset"), d(t2 + 1 < e3.length, "Trying to read beyond buffer length"));
          var o2, r2 = e3.length;
          if (!(r2 <= t2))
            return n2 ? (o2 = e3[t2], t2 + 1 < r2 && (o2 |= e3[t2 + 1] << 8)) : (o2 = e3[t2] << 8, t2 + 1 < r2 && (o2 |= e3[t2 + 1])), o2;
        }
        function u(e3, t2, n2, r2) {
          r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(null != t2, "missing offset"), d(t2 + 3 < e3.length, "Trying to read beyond buffer length"));
          var o2, r2 = e3.length;
          if (!(r2 <= t2))
            return n2 ? (t2 + 2 < r2 && (o2 = e3[t2 + 2] << 16), t2 + 1 < r2 && (o2 |= e3[t2 + 1] << 8), o2 |= e3[t2], t2 + 3 < r2 && (o2 += e3[t2 + 3] << 24 >>> 0)) : (t2 + 1 < r2 && (o2 = e3[t2 + 1] << 16), t2 + 2 < r2 && (o2 |= e3[t2 + 2] << 8), t2 + 3 < r2 && (o2 |= e3[t2 + 3]), o2 += e3[t2] << 24 >>> 0), o2;
        }
        function _(e3, t2, n2, r2) {
          if (r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(null != t2, "missing offset"), d(t2 + 1 < e3.length, "Trying to read beyond buffer length")), !(e3.length <= t2))
            return r2 = o(e3, t2, n2, true), 32768 & r2 ? -1 * (65535 - r2 + 1) : r2;
        }
        function E(e3, t2, n2, r2) {
          if (r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(null != t2, "missing offset"), d(t2 + 3 < e3.length, "Trying to read beyond buffer length")), !(e3.length <= t2))
            return r2 = u(e3, t2, n2, true), 2147483648 & r2 ? -1 * (4294967295 - r2 + 1) : r2;
        }
        function I(e3, t2, n2, r2) {
          return r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(t2 + 3 < e3.length, "Trying to read beyond buffer length")), i.read(e3, t2, n2, 23, 4);
        }
        function A(e3, t2, n2, r2) {
          return r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(t2 + 7 < e3.length, "Trying to read beyond buffer length")), i.read(e3, t2, n2, 52, 8);
        }
        function s(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 1 < e3.length, "trying to write beyond buffer length"), Y(t2, 65535));
          o2 = e3.length;
          if (!(o2 <= n2))
            for (var i2 = 0, u2 = Math.min(o2 - n2, 2); i2 < u2; i2++)
              e3[n2 + i2] = (t2 & 255 << 8 * (r2 ? i2 : 1 - i2)) >>> 8 * (r2 ? i2 : 1 - i2);
        }
        function l(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 3 < e3.length, "trying to write beyond buffer length"), Y(t2, 4294967295));
          o2 = e3.length;
          if (!(o2 <= n2))
            for (var i2 = 0, u2 = Math.min(o2 - n2, 4); i2 < u2; i2++)
              e3[n2 + i2] = t2 >>> 8 * (r2 ? i2 : 3 - i2) & 255;
        }
        function B(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 1 < e3.length, "Trying to write beyond buffer length"), F(t2, 32767, -32768)), e3.length <= n2 || s(e3, 0 <= t2 ? t2 : 65535 + t2 + 1, n2, r2, o2);
        }
        function L(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 3 < e3.length, "Trying to write beyond buffer length"), F(t2, 2147483647, -2147483648)), e3.length <= n2 || l(e3, 0 <= t2 ? t2 : 4294967295 + t2 + 1, n2, r2, o2);
        }
        function U(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 3 < e3.length, "Trying to write beyond buffer length"), D(t2, 34028234663852886e22, -34028234663852886e22)), e3.length <= n2 || i.write(e3, t2, n2, r2, 23, 4);
        }
        function x(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 7 < e3.length, "Trying to write beyond buffer length"), D(t2, 17976931348623157e292, -17976931348623157e292)), e3.length <= n2 || i.write(e3, t2, n2, r2, 52, 8);
        }
        H.Buffer = f, H.SlowBuffer = f, H.INSPECT_MAX_BYTES = 50, f.poolSize = 8192, f._useTypedArrays = function() {
          try {
            var e3 = new ArrayBuffer(0), t2 = new Uint8Array(e3);
            return t2.foo = function() {
              return 42;
            }, 42 === t2.foo() && "function" == typeof t2.subarray;
          } catch (e4) {
            return false;
          }
        }(), f.isEncoding = function(e3) {
          switch (String(e3).toLowerCase()) {
            case "hex":
            case "utf8":
            case "utf-8":
            case "ascii":
            case "binary":
            case "base64":
            case "raw":
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              return true;
            default:
              return false;
          }
        }, f.isBuffer = function(e3) {
          return !(null == e3 || !e3._isBuffer);
        }, f.byteLength = function(e3, t2) {
          var n2;
          switch (e3 += "", t2 || "utf8") {
            case "hex":
              n2 = e3.length / 2;
              break;
            case "utf8":
            case "utf-8":
              n2 = T(e3).length;
              break;
            case "ascii":
            case "binary":
            case "raw":
              n2 = e3.length;
              break;
            case "base64":
              n2 = M(e3).length;
              break;
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              n2 = 2 * e3.length;
              break;
            default:
              throw new Error("Unknown encoding");
          }
          return n2;
        }, f.concat = function(e3, t2) {
          if (d(C(e3), "Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."), 0 === e3.length)
            return new f(0);
          if (1 === e3.length)
            return e3[0];
          if ("number" != typeof t2)
            for (o2 = t2 = 0; o2 < e3.length; o2++)
              t2 += e3[o2].length;
          for (var n2 = new f(t2), r2 = 0, o2 = 0; o2 < e3.length; o2++) {
            var i2 = e3[o2];
            i2.copy(n2, r2), r2 += i2.length;
          }
          return n2;
        }, f.prototype.write = function(e3, t2, n2, r2) {
          isFinite(t2) ? isFinite(n2) || (r2 = n2, n2 = void 0) : (a2 = r2, r2 = t2, t2 = n2, n2 = a2), t2 = Number(t2) || 0;
          var o2, i2, u2, s2, a2 = this.length - t2;
          switch ((!n2 || a2 < (n2 = Number(n2))) && (n2 = a2), r2 = String(r2 || "utf8").toLowerCase()) {
            case "hex":
              o2 = function(e4, t3, n3, r3) {
                n3 = Number(n3) || 0;
                var o3 = e4.length - n3;
                (!r3 || o3 < (r3 = Number(r3))) && (r3 = o3), d((o3 = t3.length) % 2 == 0, "Invalid hex string"), o3 / 2 < r3 && (r3 = o3 / 2);
                for (var i3 = 0; i3 < r3; i3++) {
                  var u3 = parseInt(t3.substr(2 * i3, 2), 16);
                  d(!isNaN(u3), "Invalid hex string"), e4[n3 + i3] = u3;
                }
                return f._charsWritten = 2 * i3, i3;
              }(this, e3, t2, n2);
              break;
            case "utf8":
            case "utf-8":
              i2 = this, u2 = t2, s2 = n2, o2 = f._charsWritten = c(T(e3), i2, u2, s2);
              break;
            case "ascii":
            case "binary":
              o2 = b(this, e3, t2, n2);
              break;
            case "base64":
              i2 = this, u2 = t2, s2 = n2, o2 = f._charsWritten = c(M(e3), i2, u2, s2);
              break;
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              o2 = m(this, e3, t2, n2);
              break;
            default:
              throw new Error("Unknown encoding");
          }
          return o2;
        }, f.prototype.toString = function(e3, t2, n2) {
          var r2, o2, i2, u2, s2 = this;
          if (e3 = String(e3 || "utf8").toLowerCase(), t2 = Number(t2) || 0, (n2 = void 0 !== n2 ? Number(n2) : s2.length) === t2)
            return "";
          switch (e3) {
            case "hex":
              r2 = function(e4, t3, n3) {
                var r3 = e4.length;
                (!t3 || t3 < 0) && (t3 = 0);
                (!n3 || n3 < 0 || r3 < n3) && (n3 = r3);
                for (var o3 = "", i3 = t3; i3 < n3; i3++)
                  o3 += k(e4[i3]);
                return o3;
              }(s2, t2, n2);
              break;
            case "utf8":
            case "utf-8":
              r2 = function(e4, t3, n3) {
                var r3 = "", o3 = "";
                n3 = Math.min(e4.length, n3);
                for (var i3 = t3; i3 < n3; i3++)
                  e4[i3] <= 127 ? (r3 += N(o3) + String.fromCharCode(e4[i3]), o3 = "") : o3 += "%" + e4[i3].toString(16);
                return r3 + N(o3);
              }(s2, t2, n2);
              break;
            case "ascii":
            case "binary":
              r2 = v(s2, t2, n2);
              break;
            case "base64":
              o2 = s2, u2 = n2, r2 = 0 === (i2 = t2) && u2 === o2.length ? a.fromByteArray(o2) : a.fromByteArray(o2.slice(i2, u2));
              break;
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              r2 = function(e4, t3, n3) {
                for (var r3 = e4.slice(t3, n3), o3 = "", i3 = 0; i3 < r3.length; i3 += 2)
                  o3 += String.fromCharCode(r3[i3] + 256 * r3[i3 + 1]);
                return o3;
              }(s2, t2, n2);
              break;
            default:
              throw new Error("Unknown encoding");
          }
          return r2;
        }, f.prototype.toJSON = function() {
          return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
        }, f.prototype.copy = function(e3, t2, n2, r2) {
          if (t2 = t2 || 0, (r2 = r2 || 0 === r2 ? r2 : this.length) !== (n2 = n2 || 0) && 0 !== e3.length && 0 !== this.length) {
            d(n2 <= r2, "sourceEnd < sourceStart"), d(0 <= t2 && t2 < e3.length, "targetStart out of bounds"), d(0 <= n2 && n2 < this.length, "sourceStart out of bounds"), d(0 <= r2 && r2 <= this.length, "sourceEnd out of bounds"), r2 > this.length && (r2 = this.length);
            var o2 = (r2 = e3.length - t2 < r2 - n2 ? e3.length - t2 + n2 : r2) - n2;
            if (o2 < 100 || !f._useTypedArrays)
              for (var i2 = 0; i2 < o2; i2++)
                e3[i2 + t2] = this[i2 + n2];
            else
              e3._set(this.subarray(n2, n2 + o2), t2);
          }
        }, f.prototype.slice = function(e3, t2) {
          var n2 = this.length;
          if (e3 = S(e3, n2, 0), t2 = S(t2, n2, n2), f._useTypedArrays)
            return f._augment(this.subarray(e3, t2));
          for (var r2 = t2 - e3, o2 = new f(r2, void 0, true), i2 = 0; i2 < r2; i2++)
            o2[i2] = this[i2 + e3];
          return o2;
        }, f.prototype.get = function(e3) {
          return console.log(".get() is deprecated. Access using array indexes instead."), this.readUInt8(e3);
        }, f.prototype.set = function(e3, t2) {
          return console.log(".set() is deprecated. Access using array indexes instead."), this.writeUInt8(e3, t2);
        }, f.prototype.readUInt8 = function(e3, t2) {
          if (t2 || (d(null != e3, "missing offset"), d(e3 < this.length, "Trying to read beyond buffer length")), !(e3 >= this.length))
            return this[e3];
        }, f.prototype.readUInt16LE = function(e3, t2) {
          return o(this, e3, true, t2);
        }, f.prototype.readUInt16BE = function(e3, t2) {
          return o(this, e3, false, t2);
        }, f.prototype.readUInt32LE = function(e3, t2) {
          return u(this, e3, true, t2);
        }, f.prototype.readUInt32BE = function(e3, t2) {
          return u(this, e3, false, t2);
        }, f.prototype.readInt8 = function(e3, t2) {
          if (t2 || (d(null != e3, "missing offset"), d(e3 < this.length, "Trying to read beyond buffer length")), !(e3 >= this.length))
            return 128 & this[e3] ? -1 * (255 - this[e3] + 1) : this[e3];
        }, f.prototype.readInt16LE = function(e3, t2) {
          return _(this, e3, true, t2);
        }, f.prototype.readInt16BE = function(e3, t2) {
          return _(this, e3, false, t2);
        }, f.prototype.readInt32LE = function(e3, t2) {
          return E(this, e3, true, t2);
        }, f.prototype.readInt32BE = function(e3, t2) {
          return E(this, e3, false, t2);
        }, f.prototype.readFloatLE = function(e3, t2) {
          return I(this, e3, true, t2);
        }, f.prototype.readFloatBE = function(e3, t2) {
          return I(this, e3, false, t2);
        }, f.prototype.readDoubleLE = function(e3, t2) {
          return A(this, e3, true, t2);
        }, f.prototype.readDoubleBE = function(e3, t2) {
          return A(this, e3, false, t2);
        }, f.prototype.writeUInt8 = function(e3, t2, n2) {
          n2 || (d(null != e3, "missing value"), d(null != t2, "missing offset"), d(t2 < this.length, "trying to write beyond buffer length"), Y(e3, 255)), t2 >= this.length || (this[t2] = e3);
        }, f.prototype.writeUInt16LE = function(e3, t2, n2) {
          s(this, e3, t2, true, n2);
        }, f.prototype.writeUInt16BE = function(e3, t2, n2) {
          s(this, e3, t2, false, n2);
        }, f.prototype.writeUInt32LE = function(e3, t2, n2) {
          l(this, e3, t2, true, n2);
        }, f.prototype.writeUInt32BE = function(e3, t2, n2) {
          l(this, e3, t2, false, n2);
        }, f.prototype.writeInt8 = function(e3, t2, n2) {
          n2 || (d(null != e3, "missing value"), d(null != t2, "missing offset"), d(t2 < this.length, "Trying to write beyond buffer length"), F(e3, 127, -128)), t2 >= this.length || (0 <= e3 ? this.writeUInt8(e3, t2, n2) : this.writeUInt8(255 + e3 + 1, t2, n2));
        }, f.prototype.writeInt16LE = function(e3, t2, n2) {
          B(this, e3, t2, true, n2);
        }, f.prototype.writeInt16BE = function(e3, t2, n2) {
          B(this, e3, t2, false, n2);
        }, f.prototype.writeInt32LE = function(e3, t2, n2) {
          L(this, e3, t2, true, n2);
        }, f.prototype.writeInt32BE = function(e3, t2, n2) {
          L(this, e3, t2, false, n2);
        }, f.prototype.writeFloatLE = function(e3, t2, n2) {
          U(this, e3, t2, true, n2);
        }, f.prototype.writeFloatBE = function(e3, t2, n2) {
          U(this, e3, t2, false, n2);
        }, f.prototype.writeDoubleLE = function(e3, t2, n2) {
          x(this, e3, t2, true, n2);
        }, f.prototype.writeDoubleBE = function(e3, t2, n2) {
          x(this, e3, t2, false, n2);
        }, f.prototype.fill = function(e3, t2, n2) {
          if (t2 = t2 || 0, n2 = n2 || this.length, d("number" == typeof (e3 = "string" == typeof (e3 = e3 || 0) ? e3.charCodeAt(0) : e3) && !isNaN(e3), "value is not a number"), d(t2 <= n2, "end < start"), n2 !== t2 && 0 !== this.length) {
            d(0 <= t2 && t2 < this.length, "start out of bounds"), d(0 <= n2 && n2 <= this.length, "end out of bounds");
            for (var r2 = t2; r2 < n2; r2++)
              this[r2] = e3;
          }
        }, f.prototype.inspect = function() {
          for (var e3 = [], t2 = this.length, n2 = 0; n2 < t2; n2++)
            if (e3[n2] = k(this[n2]), n2 === H.INSPECT_MAX_BYTES) {
              e3[n2 + 1] = "...";
              break;
            }
          return "<Buffer " + e3.join(" ") + ">";
        }, f.prototype.toArrayBuffer = function() {
          if ("undefined" == typeof Uint8Array)
            throw new Error("Buffer.toArrayBuffer not supported in this browser");
          if (f._useTypedArrays)
            return new f(this).buffer;
          for (var e3 = new Uint8Array(this.length), t2 = 0, n2 = e3.length; t2 < n2; t2 += 1)
            e3[t2] = this[t2];
          return e3.buffer;
        };
        var t = f.prototype;
        function S(e3, t2, n2) {
          return "number" != typeof e3 ? n2 : t2 <= (e3 = ~~e3) ? t2 : 0 <= e3 || 0 <= (e3 += t2) ? e3 : 0;
        }
        function j(e3) {
          return (e3 = ~~Math.ceil(+e3)) < 0 ? 0 : e3;
        }
        function C(e3) {
          return (Array.isArray || function(e4) {
            return "[object Array]" === Object.prototype.toString.call(e4);
          })(e3);
        }
        function k(e3) {
          return e3 < 16 ? "0" + e3.toString(16) : e3.toString(16);
        }
        function T(e3) {
          for (var t2 = [], n2 = 0; n2 < e3.length; n2++) {
            var r2 = e3.charCodeAt(n2);
            if (r2 <= 127)
              t2.push(e3.charCodeAt(n2));
            else
              for (var o2 = n2, i2 = (55296 <= r2 && r2 <= 57343 && n2++, encodeURIComponent(e3.slice(o2, n2 + 1)).substr(1).split("%")), u2 = 0; u2 < i2.length; u2++)
                t2.push(parseInt(i2[u2], 16));
          }
          return t2;
        }
        function M(e3) {
          return a.toByteArray(e3);
        }
        function c(e3, t2, n2, r2) {
          for (var o2 = 0; o2 < r2 && !(o2 + n2 >= t2.length || o2 >= e3.length); o2++)
            t2[o2 + n2] = e3[o2];
          return o2;
        }
        function N(e3) {
          try {
            return decodeURIComponent(e3);
          } catch (e4) {
            return String.fromCharCode(65533);
          }
        }
        function Y(e3, t2) {
          d("number" == typeof e3, "cannot write a non-number as a number"), d(0 <= e3, "specified a negative value for writing an unsigned value"), d(e3 <= t2, "value is larger than maximum value for type"), d(Math.floor(e3) === e3, "value has a fractional component");
        }
        function F(e3, t2, n2) {
          d("number" == typeof e3, "cannot write a non-number as a number"), d(e3 <= t2, "value larger than maximum allowed value"), d(n2 <= e3, "value smaller than minimum allowed value"), d(Math.floor(e3) === e3, "value has a fractional component");
        }
        function D(e3, t2, n2) {
          d("number" == typeof e3, "cannot write a non-number as a number"), d(e3 <= t2, "value larger than maximum allowed value"), d(n2 <= e3, "value smaller than minimum allowed value");
        }
        function d(e3, t2) {
          if (!e3)
            throw new Error(t2 || "Failed assertion");
        }
        f._augment = function(e3) {
          return e3._isBuffer = true, e3._get = e3.get, e3._set = e3.set, e3.get = t.get, e3.set = t.set, e3.write = t.write, e3.toString = t.toString, e3.toLocaleString = t.toString, e3.toJSON = t.toJSON, e3.copy = t.copy, e3.slice = t.slice, e3.readUInt8 = t.readUInt8, e3.readUInt16LE = t.readUInt16LE, e3.readUInt16BE = t.readUInt16BE, e3.readUInt32LE = t.readUInt32LE, e3.readUInt32BE = t.readUInt32BE, e3.readInt8 = t.readInt8, e3.readInt16LE = t.readInt16LE, e3.readInt16BE = t.readInt16BE, e3.readInt32LE = t.readInt32LE, e3.readInt32BE = t.readInt32BE, e3.readFloatLE = t.readFloatLE, e3.readFloatBE = t.readFloatBE, e3.readDoubleLE = t.readDoubleLE, e3.readDoubleBE = t.readDoubleBE, e3.writeUInt8 = t.writeUInt8, e3.writeUInt16LE = t.writeUInt16LE, e3.writeUInt16BE = t.writeUInt16BE, e3.writeUInt32LE = t.writeUInt32LE, e3.writeUInt32BE = t.writeUInt32BE, e3.writeInt8 = t.writeInt8, e3.writeInt16LE = t.writeInt16LE, e3.writeInt16BE = t.writeInt16BE, e3.writeInt32LE = t.writeInt32LE, e3.writeInt32BE = t.writeInt32BE, e3.writeFloatLE = t.writeFloatLE, e3.writeFloatBE = t.writeFloatBE, e3.writeDoubleLE = t.writeDoubleLE, e3.writeDoubleBE = t.writeDoubleBE, e3.fill = t.fill, e3.inspect = t.inspect, e3.toArrayBuffer = t.toArrayBuffer, e3;
        };
      }.call(this, O("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, O("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/buffer/index.js", "/node_modules/gulp-browserify/node_modules/buffer");
    }, { "base64-js": 2, buffer: 3, ieee754: 10, lYpoI2: 11 }], 4: [function(c, d, e) {
      !function(e2, t, a, n, r, o, i, u, s) {
        var a = c("buffer").Buffer, f = 4, l = new a(f);
        l.fill(0);
        d.exports = { hash: function(e3, t2, n2, r2) {
          for (var o2 = t2(function(e4, t3) {
            e4.length % f != 0 && (n3 = e4.length + (f - e4.length % f), e4 = a.concat([e4, l], n3));
            for (var n3, r3 = [], o3 = t3 ? e4.readInt32BE : e4.readInt32LE, i3 = 0; i3 < e4.length; i3 += f)
              r3.push(o3.call(e4, i3));
            return r3;
          }(e3 = a.isBuffer(e3) ? e3 : new a(e3), r2), 8 * e3.length), t2 = r2, i2 = new a(n2), u2 = t2 ? i2.writeInt32BE : i2.writeInt32LE, s2 = 0; s2 < o2.length; s2++)
            u2.call(i2, o2[s2], 4 * s2, true);
          return i2;
        } };
      }.call(this, c("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, c("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { buffer: 3, lYpoI2: 11 }], 5: [function(v, e, _) {
      !function(l, c, u, d, h, p, g, y, w) {
        var u = v("buffer").Buffer, e2 = v("./sha"), t = v("./sha256"), n = v("./rng"), b = { sha1: e2, sha256: t, md5: v("./md5") }, s = 64, a = new u(s);
        function r(e3, n2) {
          var r2 = b[e3 = e3 || "sha1"], o2 = [];
          return r2 || i("algorithm:", e3, "is not yet supported"), { update: function(e4) {
            return u.isBuffer(e4) || (e4 = new u(e4)), o2.push(e4), e4.length, this;
          }, digest: function(e4) {
            var t2 = u.concat(o2), t2 = n2 ? function(e5, t3, n3) {
              u.isBuffer(t3) || (t3 = new u(t3)), u.isBuffer(n3) || (n3 = new u(n3)), t3.length > s ? t3 = e5(t3) : t3.length < s && (t3 = u.concat([t3, a], s));
              for (var r3 = new u(s), o3 = new u(s), i2 = 0; i2 < s; i2++)
                r3[i2] = 54 ^ t3[i2], o3[i2] = 92 ^ t3[i2];
              return n3 = e5(u.concat([r3, n3])), e5(u.concat([o3, n3]));
            }(r2, n2, t2) : r2(t2);
            return o2 = null, e4 ? t2.toString(e4) : t2;
          } };
        }
        function i() {
          var e3 = [].slice.call(arguments).join(" ");
          throw new Error([e3, "we accept pull requests", "http://github.com/dominictarr/crypto-browserify"].join("\n"));
        }
        a.fill(0), _.createHash = function(e3) {
          return r(e3);
        }, _.createHmac = r, _.randomBytes = function(e3, t2) {
          if (!t2 || !t2.call)
            return new u(n(e3));
          try {
            t2.call(this, void 0, new u(n(e3)));
          } catch (e4) {
            t2(e4);
          }
        };
        var o, f = ["createCredentials", "createCipher", "createCipheriv", "createDecipher", "createDecipheriv", "createSign", "createVerify", "createDiffieHellman", "pbkdf2"], m = function(e3) {
          _[e3] = function() {
            i("sorry,", e3, "is not implemented yet");
          };
        };
        for (o in f)
          m(f[o]);
      }.call(this, v("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, v("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { "./md5": 6, "./rng": 7, "./sha": 8, "./sha256": 9, buffer: 3, lYpoI2: 11 }], 6: [function(w, b, e) {
      !function(e2, r, o, i, u, a, f, l, y) {
        var t = w("./helpers");
        function n(e3, t2) {
          e3[t2 >> 5] |= 128 << t2 % 32, e3[14 + (t2 + 64 >>> 9 << 4)] = t2;
          for (var n2 = 1732584193, r2 = -271733879, o2 = -1732584194, i2 = 271733878, u2 = 0; u2 < e3.length; u2 += 16) {
            var s2 = n2, a2 = r2, f2 = o2, l2 = i2, n2 = c(n2, r2, o2, i2, e3[u2 + 0], 7, -680876936), i2 = c(i2, n2, r2, o2, e3[u2 + 1], 12, -389564586), o2 = c(o2, i2, n2, r2, e3[u2 + 2], 17, 606105819), r2 = c(r2, o2, i2, n2, e3[u2 + 3], 22, -1044525330);
            n2 = c(n2, r2, o2, i2, e3[u2 + 4], 7, -176418897), i2 = c(i2, n2, r2, o2, e3[u2 + 5], 12, 1200080426), o2 = c(o2, i2, n2, r2, e3[u2 + 6], 17, -1473231341), r2 = c(r2, o2, i2, n2, e3[u2 + 7], 22, -45705983), n2 = c(n2, r2, o2, i2, e3[u2 + 8], 7, 1770035416), i2 = c(i2, n2, r2, o2, e3[u2 + 9], 12, -1958414417), o2 = c(o2, i2, n2, r2, e3[u2 + 10], 17, -42063), r2 = c(r2, o2, i2, n2, e3[u2 + 11], 22, -1990404162), n2 = c(n2, r2, o2, i2, e3[u2 + 12], 7, 1804603682), i2 = c(i2, n2, r2, o2, e3[u2 + 13], 12, -40341101), o2 = c(o2, i2, n2, r2, e3[u2 + 14], 17, -1502002290), n2 = d(n2, r2 = c(r2, o2, i2, n2, e3[u2 + 15], 22, 1236535329), o2, i2, e3[u2 + 1], 5, -165796510), i2 = d(i2, n2, r2, o2, e3[u2 + 6], 9, -1069501632), o2 = d(o2, i2, n2, r2, e3[u2 + 11], 14, 643717713), r2 = d(r2, o2, i2, n2, e3[u2 + 0], 20, -373897302), n2 = d(n2, r2, o2, i2, e3[u2 + 5], 5, -701558691), i2 = d(i2, n2, r2, o2, e3[u2 + 10], 9, 38016083), o2 = d(o2, i2, n2, r2, e3[u2 + 15], 14, -660478335), r2 = d(r2, o2, i2, n2, e3[u2 + 4], 20, -405537848), n2 = d(n2, r2, o2, i2, e3[u2 + 9], 5, 568446438), i2 = d(i2, n2, r2, o2, e3[u2 + 14], 9, -1019803690), o2 = d(o2, i2, n2, r2, e3[u2 + 3], 14, -187363961), r2 = d(r2, o2, i2, n2, e3[u2 + 8], 20, 1163531501), n2 = d(n2, r2, o2, i2, e3[u2 + 13], 5, -1444681467), i2 = d(i2, n2, r2, o2, e3[u2 + 2], 9, -51403784), o2 = d(o2, i2, n2, r2, e3[u2 + 7], 14, 1735328473), n2 = h(n2, r2 = d(r2, o2, i2, n2, e3[u2 + 12], 20, -1926607734), o2, i2, e3[u2 + 5], 4, -378558), i2 = h(i2, n2, r2, o2, e3[u2 + 8], 11, -2022574463), o2 = h(o2, i2, n2, r2, e3[u2 + 11], 16, 1839030562), r2 = h(r2, o2, i2, n2, e3[u2 + 14], 23, -35309556), n2 = h(n2, r2, o2, i2, e3[u2 + 1], 4, -1530992060), i2 = h(i2, n2, r2, o2, e3[u2 + 4], 11, 1272893353), o2 = h(o2, i2, n2, r2, e3[u2 + 7], 16, -155497632), r2 = h(r2, o2, i2, n2, e3[u2 + 10], 23, -1094730640), n2 = h(n2, r2, o2, i2, e3[u2 + 13], 4, 681279174), i2 = h(i2, n2, r2, o2, e3[u2 + 0], 11, -358537222), o2 = h(o2, i2, n2, r2, e3[u2 + 3], 16, -722521979), r2 = h(r2, o2, i2, n2, e3[u2 + 6], 23, 76029189), n2 = h(n2, r2, o2, i2, e3[u2 + 9], 4, -640364487), i2 = h(i2, n2, r2, o2, e3[u2 + 12], 11, -421815835), o2 = h(o2, i2, n2, r2, e3[u2 + 15], 16, 530742520), n2 = p(n2, r2 = h(r2, o2, i2, n2, e3[u2 + 2], 23, -995338651), o2, i2, e3[u2 + 0], 6, -198630844), i2 = p(i2, n2, r2, o2, e3[u2 + 7], 10, 1126891415), o2 = p(o2, i2, n2, r2, e3[u2 + 14], 15, -1416354905), r2 = p(r2, o2, i2, n2, e3[u2 + 5], 21, -57434055), n2 = p(n2, r2, o2, i2, e3[u2 + 12], 6, 1700485571), i2 = p(i2, n2, r2, o2, e3[u2 + 3], 10, -1894986606), o2 = p(o2, i2, n2, r2, e3[u2 + 10], 15, -1051523), r2 = p(r2, o2, i2, n2, e3[u2 + 1], 21, -2054922799), n2 = p(n2, r2, o2, i2, e3[u2 + 8], 6, 1873313359), i2 = p(i2, n2, r2, o2, e3[u2 + 15], 10, -30611744), o2 = p(o2, i2, n2, r2, e3[u2 + 6], 15, -1560198380), r2 = p(r2, o2, i2, n2, e3[u2 + 13], 21, 1309151649), n2 = p(n2, r2, o2, i2, e3[u2 + 4], 6, -145523070), i2 = p(i2, n2, r2, o2, e3[u2 + 11], 10, -1120210379), o2 = p(o2, i2, n2, r2, e3[u2 + 2], 15, 718787259), r2 = p(r2, o2, i2, n2, e3[u2 + 9], 21, -343485551), n2 = g(n2, s2), r2 = g(r2, a2), o2 = g(o2, f2), i2 = g(i2, l2);
          }
          return Array(n2, r2, o2, i2);
        }
        function s(e3, t2, n2, r2, o2, i2) {
          return g((t2 = g(g(t2, e3), g(r2, i2))) << o2 | t2 >>> 32 - o2, n2);
        }
        function c(e3, t2, n2, r2, o2, i2, u2) {
          return s(t2 & n2 | ~t2 & r2, e3, t2, o2, i2, u2);
        }
        function d(e3, t2, n2, r2, o2, i2, u2) {
          return s(t2 & r2 | n2 & ~r2, e3, t2, o2, i2, u2);
        }
        function h(e3, t2, n2, r2, o2, i2, u2) {
          return s(t2 ^ n2 ^ r2, e3, t2, o2, i2, u2);
        }
        function p(e3, t2, n2, r2, o2, i2, u2) {
          return s(n2 ^ (t2 | ~r2), e3, t2, o2, i2, u2);
        }
        function g(e3, t2) {
          var n2 = (65535 & e3) + (65535 & t2);
          return (e3 >> 16) + (t2 >> 16) + (n2 >> 16) << 16 | 65535 & n2;
        }
        b.exports = function(e3) {
          return t.hash(e3, n, 16);
        };
      }.call(this, w("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, w("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { "./helpers": 4, buffer: 3, lYpoI2: 11 }], 7: [function(e, l, t) {
      !function(e2, t2, n, r, o, i, u, s, f) {
        l.exports = function(e3) {
          for (var t3, n2 = new Array(e3), r2 = 0; r2 < e3; r2++)
            0 == (3 & r2) && (t3 = 4294967296 * Math.random()), n2[r2] = t3 >>> ((3 & r2) << 3) & 255;
          return n2;
        };
      }.call(this, e("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, e("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { buffer: 3, lYpoI2: 11 }], 8: [function(c, d, e) {
      !function(e2, t, n, r, o, s, a, f, l) {
        var i = c("./helpers");
        function u(l2, c2) {
          l2[c2 >> 5] |= 128 << 24 - c2 % 32, l2[15 + (c2 + 64 >> 9 << 4)] = c2;
          for (var e3, t2, n2, r2 = Array(80), o2 = 1732584193, i2 = -271733879, u2 = -1732584194, s2 = 271733878, d2 = -1009589776, h = 0; h < l2.length; h += 16) {
            for (var p = o2, g = i2, y = u2, w = s2, b = d2, a2 = 0; a2 < 80; a2++) {
              r2[a2] = a2 < 16 ? l2[h + a2] : v(r2[a2 - 3] ^ r2[a2 - 8] ^ r2[a2 - 14] ^ r2[a2 - 16], 1);
              var f2 = m(m(v(o2, 5), (f2 = i2, t2 = u2, n2 = s2, (e3 = a2) < 20 ? f2 & t2 | ~f2 & n2 : !(e3 < 40) && e3 < 60 ? f2 & t2 | f2 & n2 | t2 & n2 : f2 ^ t2 ^ n2)), m(m(d2, r2[a2]), (e3 = a2) < 20 ? 1518500249 : e3 < 40 ? 1859775393 : e3 < 60 ? -1894007588 : -899497514)), d2 = s2, s2 = u2, u2 = v(i2, 30), i2 = o2, o2 = f2;
            }
            o2 = m(o2, p), i2 = m(i2, g), u2 = m(u2, y), s2 = m(s2, w), d2 = m(d2, b);
          }
          return Array(o2, i2, u2, s2, d2);
        }
        function m(e3, t2) {
          var n2 = (65535 & e3) + (65535 & t2);
          return (e3 >> 16) + (t2 >> 16) + (n2 >> 16) << 16 | 65535 & n2;
        }
        function v(e3, t2) {
          return e3 << t2 | e3 >>> 32 - t2;
        }
        d.exports = function(e3) {
          return i.hash(e3, u, 20, true);
        };
      }.call(this, c("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, c("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { "./helpers": 4, buffer: 3, lYpoI2: 11 }], 9: [function(c, d, e) {
      !function(e2, t, n, r, u, s, a, f, l) {
        function b(e3, t2) {
          var n2 = (65535 & e3) + (65535 & t2);
          return (e3 >> 16) + (t2 >> 16) + (n2 >> 16) << 16 | 65535 & n2;
        }
        function o(e3, l2) {
          var c2, d2 = new Array(1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298), t2 = new Array(1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225), n2 = new Array(64);
          e3[l2 >> 5] |= 128 << 24 - l2 % 32, e3[15 + (l2 + 64 >> 9 << 4)] = l2;
          for (var r2, o2, h = 0; h < e3.length; h += 16) {
            for (var i2 = t2[0], u2 = t2[1], s2 = t2[2], p = t2[3], a2 = t2[4], g = t2[5], y = t2[6], w = t2[7], f2 = 0; f2 < 64; f2++)
              n2[f2] = f2 < 16 ? e3[f2 + h] : b(b(b((o2 = n2[f2 - 2], m(o2, 17) ^ m(o2, 19) ^ v(o2, 10)), n2[f2 - 7]), (o2 = n2[f2 - 15], m(o2, 7) ^ m(o2, 18) ^ v(o2, 3))), n2[f2 - 16]), c2 = b(b(b(b(w, m(o2 = a2, 6) ^ m(o2, 11) ^ m(o2, 25)), a2 & g ^ ~a2 & y), d2[f2]), n2[f2]), r2 = b(m(r2 = i2, 2) ^ m(r2, 13) ^ m(r2, 22), i2 & u2 ^ i2 & s2 ^ u2 & s2), w = y, y = g, g = a2, a2 = b(p, c2), p = s2, s2 = u2, u2 = i2, i2 = b(c2, r2);
            t2[0] = b(i2, t2[0]), t2[1] = b(u2, t2[1]), t2[2] = b(s2, t2[2]), t2[3] = b(p, t2[3]), t2[4] = b(a2, t2[4]), t2[5] = b(g, t2[5]), t2[6] = b(y, t2[6]), t2[7] = b(w, t2[7]);
          }
          return t2;
        }
        var i = c("./helpers"), m = function(e3, t2) {
          return e3 >>> t2 | e3 << 32 - t2;
        }, v = function(e3, t2) {
          return e3 >>> t2;
        };
        d.exports = function(e3) {
          return i.hash(e3, o, 32, true);
        };
      }.call(this, c("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, c("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { "./helpers": 4, buffer: 3, lYpoI2: 11 }], 10: [function(e, t, f) {
      !function(e2, t2, n, r, o, i, u, s, a) {
        f.read = function(e3, t3, n2, r2, o2) {
          var i2, u2, l = 8 * o2 - r2 - 1, c = (1 << l) - 1, d = c >> 1, s2 = -7, a2 = n2 ? o2 - 1 : 0, f2 = n2 ? -1 : 1, o2 = e3[t3 + a2];
          for (a2 += f2, i2 = o2 & (1 << -s2) - 1, o2 >>= -s2, s2 += l; 0 < s2; i2 = 256 * i2 + e3[t3 + a2], a2 += f2, s2 -= 8)
            ;
          for (u2 = i2 & (1 << -s2) - 1, i2 >>= -s2, s2 += r2; 0 < s2; u2 = 256 * u2 + e3[t3 + a2], a2 += f2, s2 -= 8)
            ;
          if (0 === i2)
            i2 = 1 - d;
          else {
            if (i2 === c)
              return u2 ? NaN : 1 / 0 * (o2 ? -1 : 1);
            u2 += Math.pow(2, r2), i2 -= d;
          }
          return (o2 ? -1 : 1) * u2 * Math.pow(2, i2 - r2);
        }, f.write = function(e3, t3, l, n2, r2, c) {
          var o2, i2, u2 = 8 * c - r2 - 1, s2 = (1 << u2) - 1, a2 = s2 >> 1, d = 23 === r2 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, f2 = n2 ? 0 : c - 1, h = n2 ? 1 : -1, c = t3 < 0 || 0 === t3 && 1 / t3 < 0 ? 1 : 0;
          for (t3 = Math.abs(t3), isNaN(t3) || t3 === 1 / 0 ? (i2 = isNaN(t3) ? 1 : 0, o2 = s2) : (o2 = Math.floor(Math.log(t3) / Math.LN2), t3 * (n2 = Math.pow(2, -o2)) < 1 && (o2--, n2 *= 2), 2 <= (t3 += 1 <= o2 + a2 ? d / n2 : d * Math.pow(2, 1 - a2)) * n2 && (o2++, n2 /= 2), s2 <= o2 + a2 ? (i2 = 0, o2 = s2) : 1 <= o2 + a2 ? (i2 = (t3 * n2 - 1) * Math.pow(2, r2), o2 += a2) : (i2 = t3 * Math.pow(2, a2 - 1) * Math.pow(2, r2), o2 = 0)); 8 <= r2; e3[l + f2] = 255 & i2, f2 += h, i2 /= 256, r2 -= 8)
            ;
          for (o2 = o2 << r2 | i2, u2 += r2; 0 < u2; e3[l + f2] = 255 & o2, f2 += h, o2 /= 256, u2 -= 8)
            ;
          e3[l + f2 - h] |= 128 * c;
        };
      }.call(this, e("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, e("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/ieee754/index.js", "/node_modules/gulp-browserify/node_modules/ieee754");
    }, { buffer: 3, lYpoI2: 11 }], 11: [function(e, h, t) {
      !function(e2, t2, n, r, o, f, l, c, d) {
        var i, u, s;
        function a() {
        }
        (e2 = h.exports = {}).nextTick = (u = "undefined" != typeof window && window.setImmediate, s = "undefined" != typeof window && window.postMessage && window.addEventListener, u ? function(e3) {
          return window.setImmediate(e3);
        } : s ? (i = [], window.addEventListener("message", function(e3) {
          var t3 = e3.source;
          t3 !== window && null !== t3 || "process-tick" !== e3.data || (e3.stopPropagation(), 0 < i.length && i.shift()());
        }, true), function(e3) {
          i.push(e3), window.postMessage("process-tick", "*");
        }) : function(e3) {
          setTimeout(e3, 0);
        }), e2.title = "browser", e2.browser = true, e2.env = {}, e2.argv = [], e2.on = a, e2.addListener = a, e2.once = a, e2.off = a, e2.removeListener = a, e2.removeAllListeners = a, e2.emit = a, e2.binding = function(e3) {
          throw new Error("process.binding is not supported");
        }, e2.cwd = function() {
          return "/";
        }, e2.chdir = function(e3) {
          throw new Error("process.chdir is not supported");
        };
      }.call(this, e("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, e("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/process/browser.js", "/node_modules/gulp-browserify/node_modules/process");
    }, { buffer: 3, lYpoI2: 11 }] }, {}, [1])(1);
  });
})(object_hash);
const hash = object_hash.exports;
const getCacheKey = (...strings) => hash(strings.join("_"));
const RUN_KEY = "__run";
class BaseChatMessage {
  constructor(text2) {
    Object.defineProperty(this, "text", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.text = text2;
  }
  toJSON() {
    return {
      type: this._getType(),
      data: {
        content: this.text,
        role: "role" in this ? this.role : void 0
      }
    };
  }
}
class HumanChatMessage extends BaseChatMessage {
  _getType() {
    return "human";
  }
}
class AIChatMessage extends BaseChatMessage {
  _getType() {
    return "ai";
  }
}
class SystemChatMessage extends BaseChatMessage {
  _getType() {
    return "system";
  }
}
class ChatMessage extends BaseChatMessage {
  constructor(text2, role) {
    super(text2);
    Object.defineProperty(this, "role", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.role = role;
  }
  _getType() {
    return "generic";
  }
}
class BaseCache {
}
const GLOBAL_MAP = /* @__PURE__ */ new Map();
class InMemoryCache extends BaseCache {
  constructor(map) {
    super();
    Object.defineProperty(this, "cache", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.cache = map != null ? map : /* @__PURE__ */ new Map();
  }
  lookup(prompt, llmKey) {
    var _a;
    return Promise.resolve((_a = this.cache.get(getCacheKey(prompt, llmKey))) != null ? _a : null);
  }
  async update(prompt, llmKey, value) {
    this.cache.set(getCacheKey(prompt, llmKey), value);
  }
  static global() {
    return new InMemoryCache(GLOBAL_MAP);
  }
}
var pRetry$1 = { exports: {} };
var retry$2 = { exports: {} };
var retry$1 = {};
function RetryOperation(timeouts, options2) {
  if (typeof options2 === "boolean") {
    options2 = { forever: options2 };
  }
  this._originalTimeouts = JSON.parse(JSON.stringify(timeouts));
  this._timeouts = timeouts;
  this._options = options2 || {};
  this._maxRetryTime = options2 && options2.maxRetryTime || Infinity;
  this._fn = null;
  this._errors = [];
  this._attempts = 1;
  this._operationTimeout = null;
  this._operationTimeoutCb = null;
  this._timeout = null;
  this._operationStart = null;
  this._timer = null;
  if (this._options.forever) {
    this._cachedTimeouts = this._timeouts.slice(0);
  }
}
var retry_operation = RetryOperation;
RetryOperation.prototype.reset = function() {
  this._attempts = 1;
  this._timeouts = this._originalTimeouts.slice(0);
};
RetryOperation.prototype.stop = function() {
  if (this._timeout) {
    clearTimeout(this._timeout);
  }
  if (this._timer) {
    clearTimeout(this._timer);
  }
  this._timeouts = [];
  this._cachedTimeouts = null;
};
RetryOperation.prototype.retry = function(err) {
  if (this._timeout) {
    clearTimeout(this._timeout);
  }
  if (!err) {
    return false;
  }
  var currentTime = new Date().getTime();
  if (err && currentTime - this._operationStart >= this._maxRetryTime) {
    this._errors.push(err);
    this._errors.unshift(new Error("RetryOperation timeout occurred"));
    return false;
  }
  this._errors.push(err);
  var timeout = this._timeouts.shift();
  if (timeout === void 0) {
    if (this._cachedTimeouts) {
      this._errors.splice(0, this._errors.length - 1);
      timeout = this._cachedTimeouts.slice(-1);
    } else {
      return false;
    }
  }
  var self2 = this;
  this._timer = setTimeout(function() {
    self2._attempts++;
    if (self2._operationTimeoutCb) {
      self2._timeout = setTimeout(function() {
        self2._operationTimeoutCb(self2._attempts);
      }, self2._operationTimeout);
      if (self2._options.unref) {
        self2._timeout.unref();
      }
    }
    self2._fn(self2._attempts);
  }, timeout);
  if (this._options.unref) {
    this._timer.unref();
  }
  return true;
};
RetryOperation.prototype.attempt = function(fn, timeoutOps) {
  this._fn = fn;
  if (timeoutOps) {
    if (timeoutOps.timeout) {
      this._operationTimeout = timeoutOps.timeout;
    }
    if (timeoutOps.cb) {
      this._operationTimeoutCb = timeoutOps.cb;
    }
  }
  var self2 = this;
  if (this._operationTimeoutCb) {
    this._timeout = setTimeout(function() {
      self2._operationTimeoutCb();
    }, self2._operationTimeout);
  }
  this._operationStart = new Date().getTime();
  this._fn(this._attempts);
};
RetryOperation.prototype.try = function(fn) {
  console.log("Using RetryOperation.try() is deprecated");
  this.attempt(fn);
};
RetryOperation.prototype.start = function(fn) {
  console.log("Using RetryOperation.start() is deprecated");
  this.attempt(fn);
};
RetryOperation.prototype.start = RetryOperation.prototype.try;
RetryOperation.prototype.errors = function() {
  return this._errors;
};
RetryOperation.prototype.attempts = function() {
  return this._attempts;
};
RetryOperation.prototype.mainError = function() {
  if (this._errors.length === 0) {
    return null;
  }
  var counts = {};
  var mainError = null;
  var mainErrorCount = 0;
  for (var i = 0; i < this._errors.length; i++) {
    var error = this._errors[i];
    var message = error.message;
    var count = (counts[message] || 0) + 1;
    counts[message] = count;
    if (count >= mainErrorCount) {
      mainError = error;
      mainErrorCount = count;
    }
  }
  return mainError;
};
(function(exports2) {
  var RetryOperation2 = retry_operation;
  exports2.operation = function(options2) {
    var timeouts = exports2.timeouts(options2);
    return new RetryOperation2(timeouts, {
      forever: options2 && (options2.forever || options2.retries === Infinity),
      unref: options2 && options2.unref,
      maxRetryTime: options2 && options2.maxRetryTime
    });
  };
  exports2.timeouts = function(options2) {
    if (options2 instanceof Array) {
      return [].concat(options2);
    }
    var opts = {
      retries: 10,
      factor: 2,
      minTimeout: 1 * 1e3,
      maxTimeout: Infinity,
      randomize: false
    };
    for (var key in options2) {
      opts[key] = options2[key];
    }
    if (opts.minTimeout > opts.maxTimeout) {
      throw new Error("minTimeout is greater than maxTimeout");
    }
    var timeouts = [];
    for (var i = 0; i < opts.retries; i++) {
      timeouts.push(this.createTimeout(i, opts));
    }
    if (options2 && options2.forever && !timeouts.length) {
      timeouts.push(this.createTimeout(i, opts));
    }
    timeouts.sort(function(a, b) {
      return a - b;
    });
    return timeouts;
  };
  exports2.createTimeout = function(attempt, opts) {
    var random = opts.randomize ? Math.random() + 1 : 1;
    var timeout = Math.round(random * Math.max(opts.minTimeout, 1) * Math.pow(opts.factor, attempt));
    timeout = Math.min(timeout, opts.maxTimeout);
    return timeout;
  };
  exports2.wrap = function(obj, options2, methods) {
    if (options2 instanceof Array) {
      methods = options2;
      options2 = null;
    }
    if (!methods) {
      methods = [];
      for (var key in obj) {
        if (typeof obj[key] === "function") {
          methods.push(key);
        }
      }
    }
    for (var i = 0; i < methods.length; i++) {
      var method = methods[i];
      var original = obj[method];
      obj[method] = function retryWrapper(original2) {
        var op = exports2.operation(options2);
        var args = Array.prototype.slice.call(arguments, 1);
        var callback = args.pop();
        args.push(function(err) {
          if (op.retry(err)) {
            return;
          }
          if (err) {
            arguments[0] = op.mainError();
          }
          callback.apply(this, arguments);
        });
        op.attempt(function() {
          original2.apply(obj, args);
        });
      }.bind(obj, original);
      obj[method].options = options2;
    }
  };
})(retry$1);
(function(module2) {
  module2.exports = retry$1;
})(retry$2);
const retry = retry$2.exports;
const networkErrorMsgs = [
  "Failed to fetch",
  "NetworkError when attempting to fetch resource.",
  "The Internet connection appears to be offline.",
  "Network request failed"
];
class AbortError extends Error {
  constructor(message) {
    super();
    if (message instanceof Error) {
      this.originalError = message;
      ({ message } = message);
    } else {
      this.originalError = new Error(message);
      this.originalError.stack = this.stack;
    }
    this.name = "AbortError";
    this.message = message;
  }
}
const decorateErrorWithCounts = (error, attemptNumber, options2) => {
  const retriesLeft = options2.retries - (attemptNumber - 1);
  error.attemptNumber = attemptNumber;
  error.retriesLeft = retriesLeft;
  return error;
};
const isNetworkError = (errorMessage) => networkErrorMsgs.includes(errorMessage);
const pRetry = (input, options2) => new Promise((resolve, reject) => {
  options2 = {
    onFailedAttempt: () => {
    },
    retries: 10,
    ...options2
  };
  const operation = retry.operation(options2);
  operation.attempt(async (attemptNumber) => {
    try {
      resolve(await input(attemptNumber));
    } catch (error) {
      if (!(error instanceof Error)) {
        reject(new TypeError(`Non-error was thrown: "${error}". You should only throw errors.`));
        return;
      }
      if (error instanceof AbortError) {
        operation.stop();
        reject(error.originalError);
      } else if (error instanceof TypeError && !isNetworkError(error.message)) {
        operation.stop();
        reject(error);
      } else {
        decorateErrorWithCounts(error, attemptNumber, options2);
        try {
          await options2.onFailedAttempt(error);
        } catch (error2) {
          reject(error2);
          return;
        }
        if (!operation.retry(error)) {
          reject(operation.mainError());
        }
      }
    }
  });
});
pRetry$1.exports = pRetry;
pRetry$1.exports.default = pRetry;
pRetry$1.exports.AbortError = AbortError;
var dist = {};
var eventemitter3 = { exports: {} };
(function(module2) {
  var has = Object.prototype.hasOwnProperty, prefix = "~";
  function Events() {
  }
  if (Object.create) {
    Events.prototype = /* @__PURE__ */ Object.create(null);
    if (!new Events().__proto__)
      prefix = false;
  }
  function EE(fn, context, once) {
    this.fn = fn;
    this.context = context;
    this.once = once || false;
  }
  function addListener(emitter, event, fn, context, once) {
    if (typeof fn !== "function") {
      throw new TypeError("The listener must be a function");
    }
    var listener = new EE(fn, context || emitter, once), evt = prefix ? prefix + event : event;
    if (!emitter._events[evt])
      emitter._events[evt] = listener, emitter._eventsCount++;
    else if (!emitter._events[evt].fn)
      emitter._events[evt].push(listener);
    else
      emitter._events[evt] = [emitter._events[evt], listener];
    return emitter;
  }
  function clearEvent(emitter, evt) {
    if (--emitter._eventsCount === 0)
      emitter._events = new Events();
    else
      delete emitter._events[evt];
  }
  function EventEmitter2() {
    this._events = new Events();
    this._eventsCount = 0;
  }
  EventEmitter2.prototype.eventNames = function eventNames() {
    var names = [], events, name2;
    if (this._eventsCount === 0)
      return names;
    for (name2 in events = this._events) {
      if (has.call(events, name2))
        names.push(prefix ? name2.slice(1) : name2);
    }
    if (Object.getOwnPropertySymbols) {
      return names.concat(Object.getOwnPropertySymbols(events));
    }
    return names;
  };
  EventEmitter2.prototype.listeners = function listeners(event) {
    var evt = prefix ? prefix + event : event, handlers = this._events[evt];
    if (!handlers)
      return [];
    if (handlers.fn)
      return [handlers.fn];
    for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {
      ee[i] = handlers[i].fn;
    }
    return ee;
  };
  EventEmitter2.prototype.listenerCount = function listenerCount(event) {
    var evt = prefix ? prefix + event : event, listeners = this._events[evt];
    if (!listeners)
      return 0;
    if (listeners.fn)
      return 1;
    return listeners.length;
  };
  EventEmitter2.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
    var evt = prefix ? prefix + event : event;
    if (!this._events[evt])
      return false;
    var listeners = this._events[evt], len = arguments.length, args, i;
    if (listeners.fn) {
      if (listeners.once)
        this.removeListener(event, listeners.fn, void 0, true);
      switch (len) {
        case 1:
          return listeners.fn.call(listeners.context), true;
        case 2:
          return listeners.fn.call(listeners.context, a1), true;
        case 3:
          return listeners.fn.call(listeners.context, a1, a2), true;
        case 4:
          return listeners.fn.call(listeners.context, a1, a2, a3), true;
        case 5:
          return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
        case 6:
          return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
      }
      for (i = 1, args = new Array(len - 1); i < len; i++) {
        args[i - 1] = arguments[i];
      }
      listeners.fn.apply(listeners.context, args);
    } else {
      var length = listeners.length, j;
      for (i = 0; i < length; i++) {
        if (listeners[i].once)
          this.removeListener(event, listeners[i].fn, void 0, true);
        switch (len) {
          case 1:
            listeners[i].fn.call(listeners[i].context);
            break;
          case 2:
            listeners[i].fn.call(listeners[i].context, a1);
            break;
          case 3:
            listeners[i].fn.call(listeners[i].context, a1, a2);
            break;
          case 4:
            listeners[i].fn.call(listeners[i].context, a1, a2, a3);
            break;
          default:
            if (!args)
              for (j = 1, args = new Array(len - 1); j < len; j++) {
                args[j - 1] = arguments[j];
              }
            listeners[i].fn.apply(listeners[i].context, args);
        }
      }
    }
    return true;
  };
  EventEmitter2.prototype.on = function on(event, fn, context) {
    return addListener(this, event, fn, context, false);
  };
  EventEmitter2.prototype.once = function once(event, fn, context) {
    return addListener(this, event, fn, context, true);
  };
  EventEmitter2.prototype.removeListener = function removeListener(event, fn, context, once) {
    var evt = prefix ? prefix + event : event;
    if (!this._events[evt])
      return this;
    if (!fn) {
      clearEvent(this, evt);
      return this;
    }
    var listeners = this._events[evt];
    if (listeners.fn) {
      if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) {
        clearEvent(this, evt);
      }
    } else {
      for (var i = 0, events = [], length = listeners.length; i < length; i++) {
        if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) {
          events.push(listeners[i]);
        }
      }
      if (events.length)
        this._events[evt] = events.length === 1 ? events[0] : events;
      else
        clearEvent(this, evt);
    }
    return this;
  };
  EventEmitter2.prototype.removeAllListeners = function removeAllListeners(event) {
    var evt;
    if (event) {
      evt = prefix ? prefix + event : event;
      if (this._events[evt])
        clearEvent(this, evt);
    } else {
      this._events = new Events();
      this._eventsCount = 0;
    }
    return this;
  };
  EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;
  EventEmitter2.prototype.addListener = EventEmitter2.prototype.on;
  EventEmitter2.prefixed = prefix;
  EventEmitter2.EventEmitter = EventEmitter2;
  {
    module2.exports = EventEmitter2;
  }
})(eventemitter3);
var pTimeout$1 = { exports: {} };
var pFinally$1 = (promise, onFinally) => {
  onFinally = onFinally || (() => {
  });
  return promise.then(
    (val) => new Promise((resolve) => {
      resolve(onFinally());
    }).then(() => val),
    (err) => new Promise((resolve) => {
      resolve(onFinally());
    }).then(() => {
      throw err;
    })
  );
};
const pFinally = pFinally$1;
class TimeoutError extends Error {
  constructor(message) {
    super(message);
    this.name = "TimeoutError";
  }
}
const pTimeout = (promise, milliseconds, fallback) => new Promise((resolve, reject) => {
  if (typeof milliseconds !== "number" || milliseconds < 0) {
    throw new TypeError("Expected `milliseconds` to be a positive number");
  }
  if (milliseconds === Infinity) {
    resolve(promise);
    return;
  }
  const timer = setTimeout(() => {
    if (typeof fallback === "function") {
      try {
        resolve(fallback());
      } catch (error) {
        reject(error);
      }
      return;
    }
    const message = typeof fallback === "string" ? fallback : `Promise timed out after ${milliseconds} milliseconds`;
    const timeoutError2 = fallback instanceof Error ? fallback : new TimeoutError(message);
    if (typeof promise.cancel === "function") {
      promise.cancel();
    }
    reject(timeoutError2);
  }, milliseconds);
  pFinally(
    promise.then(resolve, reject),
    () => {
      clearTimeout(timer);
    }
  );
});
pTimeout$1.exports = pTimeout;
pTimeout$1.exports.default = pTimeout;
pTimeout$1.exports.TimeoutError = TimeoutError;
var priorityQueue = {};
var lowerBound$1 = {};
Object.defineProperty(lowerBound$1, "__esModule", { value: true });
function lowerBound(array, value, comparator) {
  let first = 0;
  let count = array.length;
  while (count > 0) {
    const step = count / 2 | 0;
    let it = first + step;
    if (comparator(array[it], value) <= 0) {
      first = ++it;
      count -= step + 1;
    } else {
      count = step;
    }
  }
  return first;
}
lowerBound$1.default = lowerBound;
Object.defineProperty(priorityQueue, "__esModule", { value: true });
const lower_bound_1 = lowerBound$1;
class PriorityQueue {
  constructor() {
    this._queue = [];
  }
  enqueue(run2, options2) {
    options2 = Object.assign({ priority: 0 }, options2);
    const element2 = {
      priority: options2.priority,
      run: run2
    };
    if (this.size && this._queue[this.size - 1].priority >= options2.priority) {
      this._queue.push(element2);
      return;
    }
    const index = lower_bound_1.default(this._queue, element2, (a, b) => b.priority - a.priority);
    this._queue.splice(index, 0, element2);
  }
  dequeue() {
    const item = this._queue.shift();
    return item === null || item === void 0 ? void 0 : item.run;
  }
  filter(options2) {
    return this._queue.filter((element2) => element2.priority === options2.priority).map((element2) => element2.run);
  }
  get size() {
    return this._queue.length;
  }
}
priorityQueue.default = PriorityQueue;
Object.defineProperty(dist, "__esModule", { value: true });
const EventEmitter = eventemitter3.exports;
const p_timeout_1 = pTimeout$1.exports;
const priority_queue_1 = priorityQueue;
const empty = () => {
};
const timeoutError = new p_timeout_1.TimeoutError();
class PQueue extends EventEmitter {
  constructor(options2) {
    var _a, _b, _c, _d;
    super();
    this._intervalCount = 0;
    this._intervalEnd = 0;
    this._pendingCount = 0;
    this._resolveEmpty = empty;
    this._resolveIdle = empty;
    options2 = Object.assign({ carryoverConcurrencyCount: false, intervalCap: Infinity, interval: 0, concurrency: Infinity, autoStart: true, queueClass: priority_queue_1.default }, options2);
    if (!(typeof options2.intervalCap === "number" && options2.intervalCap >= 1)) {
      throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(_b = (_a = options2.intervalCap) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : ""}\` (${typeof options2.intervalCap})`);
    }
    if (options2.interval === void 0 || !(Number.isFinite(options2.interval) && options2.interval >= 0)) {
      throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(_d = (_c = options2.interval) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : ""}\` (${typeof options2.interval})`);
    }
    this._carryoverConcurrencyCount = options2.carryoverConcurrencyCount;
    this._isIntervalIgnored = options2.intervalCap === Infinity || options2.interval === 0;
    this._intervalCap = options2.intervalCap;
    this._interval = options2.interval;
    this._queue = new options2.queueClass();
    this._queueClass = options2.queueClass;
    this.concurrency = options2.concurrency;
    this._timeout = options2.timeout;
    this._throwOnTimeout = options2.throwOnTimeout === true;
    this._isPaused = options2.autoStart === false;
  }
  get _doesIntervalAllowAnother() {
    return this._isIntervalIgnored || this._intervalCount < this._intervalCap;
  }
  get _doesConcurrentAllowAnother() {
    return this._pendingCount < this._concurrency;
  }
  _next() {
    this._pendingCount--;
    this._tryToStartAnother();
    this.emit("next");
  }
  _resolvePromises() {
    this._resolveEmpty();
    this._resolveEmpty = empty;
    if (this._pendingCount === 0) {
      this._resolveIdle();
      this._resolveIdle = empty;
      this.emit("idle");
    }
  }
  _onResumeInterval() {
    this._onInterval();
    this._initializeIntervalIfNeeded();
    this._timeoutId = void 0;
  }
  _isIntervalPaused() {
    const now = Date.now();
    if (this._intervalId === void 0) {
      const delay = this._intervalEnd - now;
      if (delay < 0) {
        this._intervalCount = this._carryoverConcurrencyCount ? this._pendingCount : 0;
      } else {
        if (this._timeoutId === void 0) {
          this._timeoutId = setTimeout(() => {
            this._onResumeInterval();
          }, delay);
        }
        return true;
      }
    }
    return false;
  }
  _tryToStartAnother() {
    if (this._queue.size === 0) {
      if (this._intervalId) {
        clearInterval(this._intervalId);
      }
      this._intervalId = void 0;
      this._resolvePromises();
      return false;
    }
    if (!this._isPaused) {
      const canInitializeInterval = !this._isIntervalPaused();
      if (this._doesIntervalAllowAnother && this._doesConcurrentAllowAnother) {
        const job = this._queue.dequeue();
        if (!job) {
          return false;
        }
        this.emit("active");
        job();
        if (canInitializeInterval) {
          this._initializeIntervalIfNeeded();
        }
        return true;
      }
    }
    return false;
  }
  _initializeIntervalIfNeeded() {
    if (this._isIntervalIgnored || this._intervalId !== void 0) {
      return;
    }
    this._intervalId = setInterval(() => {
      this._onInterval();
    }, this._interval);
    this._intervalEnd = Date.now() + this._interval;
  }
  _onInterval() {
    if (this._intervalCount === 0 && this._pendingCount === 0 && this._intervalId) {
      clearInterval(this._intervalId);
      this._intervalId = void 0;
    }
    this._intervalCount = this._carryoverConcurrencyCount ? this._pendingCount : 0;
    this._processQueue();
  }
  _processQueue() {
    while (this._tryToStartAnother()) {
    }
  }
  get concurrency() {
    return this._concurrency;
  }
  set concurrency(newConcurrency) {
    if (!(typeof newConcurrency === "number" && newConcurrency >= 1)) {
      throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${newConcurrency}\` (${typeof newConcurrency})`);
    }
    this._concurrency = newConcurrency;
    this._processQueue();
  }
  async add(fn, options2 = {}) {
    return new Promise((resolve, reject) => {
      const run2 = async () => {
        this._pendingCount++;
        this._intervalCount++;
        try {
          const operation = this._timeout === void 0 && options2.timeout === void 0 ? fn() : p_timeout_1.default(Promise.resolve(fn()), options2.timeout === void 0 ? this._timeout : options2.timeout, () => {
            if (options2.throwOnTimeout === void 0 ? this._throwOnTimeout : options2.throwOnTimeout) {
              reject(timeoutError);
            }
            return void 0;
          });
          resolve(await operation);
        } catch (error) {
          reject(error);
        }
        this._next();
      };
      this._queue.enqueue(run2, options2);
      this._tryToStartAnother();
      this.emit("add");
    });
  }
  async addAll(functions, options2) {
    return Promise.all(functions.map(async (function_) => this.add(function_, options2)));
  }
  start() {
    if (!this._isPaused) {
      return this;
    }
    this._isPaused = false;
    this._processQueue();
    return this;
  }
  pause() {
    this._isPaused = true;
  }
  clear() {
    this._queue = new this._queueClass();
  }
  async onEmpty() {
    if (this._queue.size === 0) {
      return;
    }
    return new Promise((resolve) => {
      const existingResolve = this._resolveEmpty;
      this._resolveEmpty = () => {
        existingResolve();
        resolve();
      };
    });
  }
  async onIdle() {
    if (this._pendingCount === 0 && this._queue.size === 0) {
      return;
    }
    return new Promise((resolve) => {
      const existingResolve = this._resolveIdle;
      this._resolveIdle = () => {
        existingResolve();
        resolve();
      };
    });
  }
  get size() {
    return this._queue.size;
  }
  sizeBy(options2) {
    return this._queue.filter(options2).length;
  }
  get pending() {
    return this._pendingCount;
  }
  get isPaused() {
    return this._isPaused;
  }
  get timeout() {
    return this._timeout;
  }
  set timeout(milliseconds) {
    this._timeout = milliseconds;
  }
}
var _default = dist.default = PQueue;
const STATUS_NO_RETRY = [
  400,
  401,
  403,
  404,
  405,
  406,
  407,
  408,
  409
];
class AsyncCaller {
  constructor(params) {
    var _a, _b;
    Object.defineProperty(this, "maxConcurrency", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "maxRetries", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "queue", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.maxConcurrency = (_a = params.maxConcurrency) != null ? _a : Infinity;
    this.maxRetries = (_b = params.maxRetries) != null ? _b : 6;
    const PQueue2 = "default" in _default ? _default.default : _default;
    this.queue = new PQueue2({ concurrency: this.maxConcurrency });
  }
  call(callable, ...args) {
    return this.queue.add(() => pRetry$1.exports(() => callable(...args).catch((error) => {
      if (error instanceof Error) {
        throw error;
      } else {
        throw new Error(error);
      }
    }), {
      onFailedAttempt(error) {
        var _a;
        if (error.message.startsWith("Cancel") || error.message.startsWith("TimeoutError") || error.message.startsWith("AbortError")) {
          throw error;
        }
        if ((error == null ? void 0 : error.code) === "ECONNABORTED") {
          throw error;
        }
        const status = (_a = error == null ? void 0 : error.response) == null ? void 0 : _a.status;
        if (status && STATUS_NO_RETRY.includes(+status)) {
          throw error;
        }
      },
      retries: this.maxRetries,
      randomize: true
    }), { throwOnTimeout: true });
  }
  callWithOptions(options2, callable, ...args) {
    if (options2.signal) {
      return Promise.race([
        this.call(callable, ...args),
        new Promise((_, reject) => {
          var _a;
          (_a = options2.signal) == null ? void 0 : _a.addEventListener("abort", () => {
            reject(new Error("AbortError"));
          });
        })
      ]);
    }
    return this.call(callable, ...args);
  }
  fetch(...args) {
    return this.call(() => fetch(...args).then((res) => res.ok ? res : Promise.reject(res)));
  }
}
var __defProp2 = Object.defineProperty;
var __defNormalProp2 = (obj, key, value) => key in obj ? __defProp2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField2 = (obj, key, value) => {
  __defNormalProp2(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
var base64Js = {};
base64Js.byteLength = byteLength;
base64Js.toByteArray = toByteArray;
base64Js.fromByteArray = fromByteArray;
var lookup = [];
var revLookup = [];
var Arr = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
var code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i];
  revLookup[code.charCodeAt(i)] = i;
}
revLookup["-".charCodeAt(0)] = 62;
revLookup["_".charCodeAt(0)] = 63;
function getLens(b64) {
  var len = b64.length;
  if (len % 4 > 0) {
    throw new Error("Invalid string. Length must be a multiple of 4");
  }
  var validLen = b64.indexOf("=");
  if (validLen === -1)
    validLen = len;
  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;
  return [validLen, placeHoldersLen];
}
function byteLength(b64) {
  var lens = getLens(b64);
  var validLen = lens[0];
  var placeHoldersLen = lens[1];
  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}
function _byteLength(b64, validLen, placeHoldersLen) {
  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}
function toByteArray(b64) {
  var tmp;
  var lens = getLens(b64);
  var validLen = lens[0];
  var placeHoldersLen = lens[1];
  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));
  var curByte = 0;
  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;
  var i;
  for (i = 0; i < len; i += 4) {
    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];
    arr[curByte++] = tmp >> 16 & 255;
    arr[curByte++] = tmp >> 8 & 255;
    arr[curByte++] = tmp & 255;
  }
  if (placeHoldersLen === 2) {
    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;
    arr[curByte++] = tmp & 255;
  }
  if (placeHoldersLen === 1) {
    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;
    arr[curByte++] = tmp >> 8 & 255;
    arr[curByte++] = tmp & 255;
  }
  return arr;
}
function tripletToBase64(num) {
  return lookup[num >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[num & 63];
}
function encodeChunk(uint8, start, end) {
  var tmp;
  var output = [];
  for (var i = start; i < end; i += 3) {
    tmp = (uint8[i] << 16 & 16711680) + (uint8[i + 1] << 8 & 65280) + (uint8[i + 2] & 255);
    output.push(tripletToBase64(tmp));
  }
  return output.join("");
}
function fromByteArray(uint8) {
  var tmp;
  var len = uint8.length;
  var extraBytes = len % 3;
  var parts = [];
  var maxChunkLength = 16383;
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));
  }
  if (extraBytes === 1) {
    tmp = uint8[len - 1];
    parts.push(
      lookup[tmp >> 2] + lookup[tmp << 4 & 63] + "=="
    );
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1];
    parts.push(
      lookup[tmp >> 10] + lookup[tmp >> 4 & 63] + lookup[tmp << 2 & 63] + "="
    );
  }
  return parts.join("");
}
function bytePairMerge(piece, ranks) {
  let parts = Array.from(
    { length: piece.length },
    (_, i) => ({ start: i, end: i + 1 })
  );
  while (parts.length > 1) {
    let minRank = null;
    for (let i = 0; i < parts.length - 1; i++) {
      const slice = piece.slice(parts[i].start, parts[i + 1].end);
      const rank = ranks.get(slice.join(","));
      if (rank == null)
        continue;
      if (minRank == null || rank < minRank[0]) {
        minRank = [rank, i];
      }
    }
    if (minRank != null) {
      const i = minRank[1];
      parts[i] = { start: parts[i].start, end: parts[i + 1].end };
      parts.splice(i + 1, 1);
    } else {
      break;
    }
  }
  return parts;
}
function bytePairEncode(piece, ranks) {
  if (piece.length === 1)
    return [ranks.get(piece.join(","))];
  return bytePairMerge(piece, ranks).map((p) => ranks.get(piece.slice(p.start, p.end).join(","))).filter((x) => x != null);
}
function escapeRegex(str) {
  return str.replace(/[\\^$*+?.()|[\]{}]/g, "\\$&");
}
var _Tiktoken = class {
  constructor(ranks, extendedSpecialTokens) {
    __publicField(this, "specialTokens");
    __publicField(this, "inverseSpecialTokens");
    __publicField(this, "patStr");
    __publicField(this, "textEncoder", new TextEncoder());
    __publicField(this, "textDecoder", new TextDecoder("utf-8"));
    __publicField(this, "rankMap", /* @__PURE__ */ new Map());
    __publicField(this, "textMap", /* @__PURE__ */ new Map());
    this.patStr = ranks.pat_str;
    const uncompressed = ranks.bpe_ranks.split("\n").filter(Boolean).reduce((memo, x) => {
      const [_, offsetStr, ...tokens] = x.split(" ");
      const offset = Number.parseInt(offsetStr, 10);
      tokens.forEach((token, i) => memo[token] = offset + i);
      return memo;
    }, {});
    for (const [token, rank] of Object.entries(uncompressed)) {
      const bytes = base64Js.toByteArray(token);
      this.rankMap.set(bytes.join(","), rank);
      this.textMap.set(rank, bytes);
    }
    this.specialTokens = { ...ranks.special_tokens, ...extendedSpecialTokens };
    this.inverseSpecialTokens = Object.entries(this.specialTokens).reduce((memo, [text2, rank]) => {
      memo[rank] = this.textEncoder.encode(text2);
      return memo;
    }, {});
  }
  encode(text2, allowedSpecial = [], disallowedSpecial = "all") {
    var _a;
    const regexes = new RegExp(this.patStr, "ug");
    const specialRegex = _Tiktoken.specialTokenRegex(
      Object.keys(this.specialTokens)
    );
    const ret = [];
    const allowedSpecialSet = new Set(
      allowedSpecial === "all" ? Object.keys(this.specialTokens) : allowedSpecial
    );
    const disallowedSpecialSet = new Set(
      disallowedSpecial === "all" ? Object.keys(this.specialTokens).filter(
        (x) => !allowedSpecialSet.has(x)
      ) : disallowedSpecial
    );
    if (disallowedSpecialSet.size > 0) {
      const disallowedSpecialRegex = _Tiktoken.specialTokenRegex([
        ...disallowedSpecialSet
      ]);
      const specialMatch = text2.match(disallowedSpecialRegex);
      if (specialMatch != null) {
        throw new Error(
          `The text contains a special token that is not allowed: ${specialMatch[0]}`
        );
      }
    }
    let start = 0;
    while (true) {
      let nextSpecial = null;
      let startFind = start;
      while (true) {
        specialRegex.lastIndex = startFind;
        nextSpecial = specialRegex.exec(text2);
        if (nextSpecial == null || allowedSpecialSet.has(nextSpecial[0]))
          break;
        startFind = nextSpecial.index + 1;
      }
      const end = (_a = nextSpecial == null ? void 0 : nextSpecial.index) != null ? _a : text2.length;
      for (const match of text2.substring(start, end).matchAll(regexes)) {
        const piece = this.textEncoder.encode(match[0]);
        const token2 = this.rankMap.get(piece.join(","));
        if (token2 != null) {
          ret.push(token2);
          continue;
        }
        ret.push(...bytePairEncode(piece, this.rankMap));
      }
      if (nextSpecial == null)
        break;
      let token = this.specialTokens[nextSpecial[0]];
      ret.push(token);
      start = nextSpecial.index + nextSpecial[0].length;
    }
    return ret;
  }
  decode(tokens) {
    var _a;
    const res = [];
    let length = 0;
    for (let i2 = 0; i2 < tokens.length; ++i2) {
      const token = tokens[i2];
      const bytes = (_a = this.textMap.get(token)) != null ? _a : this.inverseSpecialTokens[token];
      if (bytes != null) {
        res.push(bytes);
        length += bytes.length;
      }
    }
    const mergedArray = new Uint8Array(length);
    let i = 0;
    for (const bytes of res) {
      mergedArray.set(bytes, i);
      i += bytes.length;
    }
    return this.textDecoder.decode(mergedArray);
  }
};
var Tiktoken = _Tiktoken;
__publicField2(Tiktoken, "specialTokenRegex", (tokens) => {
  return new RegExp(tokens.map((i) => escapeRegex(i)).join("|"), "g");
});
function getEncodingNameForModel(model) {
  switch (model) {
    case "gpt2": {
      return "gpt2";
    }
    case "code-cushman-001":
    case "code-cushman-002":
    case "code-davinci-001":
    case "code-davinci-002":
    case "cushman-codex":
    case "davinci-codex":
    case "text-davinci-002":
    case "text-davinci-003": {
      return "p50k_base";
    }
    case "code-davinci-edit-001":
    case "text-davinci-edit-001": {
      return "p50k_edit";
    }
    case "ada":
    case "babbage":
    case "code-search-ada-code-001":
    case "code-search-babbage-code-001":
    case "curie":
    case "davinci":
    case "text-ada-001":
    case "text-babbage-001":
    case "text-curie-001":
    case "text-davinci-001":
    case "text-search-ada-doc-001":
    case "text-search-babbage-doc-001":
    case "text-search-curie-doc-001":
    case "text-search-davinci-doc-001":
    case "text-similarity-ada-001":
    case "text-similarity-babbage-001":
    case "text-similarity-curie-001":
    case "text-similarity-davinci-001": {
      return "r50k_base";
    }
    case "gpt-3.5-turbo-0301":
    case "gpt-3.5-turbo":
    case "gpt-4-0314":
    case "gpt-4-32k-0314":
    case "gpt-4-32k":
    case "gpt-4":
    case "text-embedding-ada-002": {
      return "cl100k_base";
    }
    default:
      throw new Error("Unknown model");
  }
}
const cache = {};
const caller = /* @__PURE__ */ new AsyncCaller({});
async function getEncoding(encoding, options2) {
  if (!(encoding in cache)) {
    cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`, {
      signal: options2 == null ? void 0 : options2.signal
    }).then((res) => res.json()).catch((e) => {
      delete cache[encoding];
      throw e;
    });
  }
  return new Tiktoken(await cache[encoding], options2 == null ? void 0 : options2.extendedSpecialTokens);
}
async function encodingForModel(model, options2) {
  return getEncoding(getEncodingNameForModel(model), options2);
}
const getModelNameForTiktoken = (modelName) => {
  if (modelName.startsWith("gpt-3.5-turbo-")) {
    return "gpt-3.5-turbo";
  }
  if (modelName.startsWith("gpt-4-32k-")) {
    return "gpt-4-32k";
  }
  if (modelName.startsWith("gpt-4-")) {
    return "gpt-4";
  }
  return modelName;
};
const getModelContextSize = (modelName) => {
  switch (getModelNameForTiktoken(modelName)) {
    case "gpt-3.5-turbo":
      return 4096;
    case "gpt-4-32k":
      return 32768;
    case "gpt-4":
      return 8192;
    case "text-davinci-003":
      return 4097;
    case "text-curie-001":
      return 2048;
    case "text-babbage-001":
      return 2048;
    case "text-ada-001":
      return 2048;
    case "code-davinci-002":
      return 8e3;
    case "code-cushman-001":
      return 2048;
    default:
      return 4097;
  }
};
const calculateMaxTokens = async ({ prompt, modelName }) => {
  let numTokens = Math.ceil(prompt.length / 4);
  try {
    numTokens = (await encodingForModel(modelName)).encode(prompt).length;
  } catch (error) {
    console.warn("Failed to calculate number of tokens, falling back to approximate count");
  }
  const maxTokens = getModelContextSize(modelName);
  return maxTokens - numTokens;
};
const getVerbosity = () => false;
class BaseLangChain {
  constructor(params) {
    var _a;
    Object.defineProperty(this, "verbose", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "callbacks", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.verbose = (_a = params.verbose) != null ? _a : getVerbosity();
    this.callbacks = params.callbacks;
  }
}
class BaseLanguageModel extends BaseLangChain {
  get callKeys() {
    return ["stop", "timeout", "signal"];
  }
  constructor(params) {
    var _a;
    super({
      verbose: params.verbose,
      callbacks: (_a = params.callbacks) != null ? _a : params.callbackManager
    });
    Object.defineProperty(this, "caller", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "_encoding", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.caller = new AsyncCaller(params != null ? params : {});
  }
  async getNumTokens(text2) {
    let numTokens = Math.ceil(text2.length / 4);
    if (!this._encoding) {
      try {
        this._encoding = await encodingForModel("modelName" in this ? getModelNameForTiktoken(this.modelName) : "gpt2");
      } catch (error) {
        console.warn("Failed to calculate number of tokens, falling back to approximate count", error);
      }
    }
    if (this._encoding) {
      numTokens = this._encoding.encode(text2).length;
    }
    return numTokens;
  }
  _identifyingParams() {
    return {};
  }
  serialize() {
    return {
      ...this._identifyingParams(),
      _type: this._llmType(),
      _model: this._modelType()
    };
  }
  static async deserialize(data2) {
    const { _type, _model, ...rest } = data2;
    if (_model && _model !== "base_chat_model") {
      throw new Error(`Cannot load LLM with model ${_model}`);
    }
    const Cls = {
      openai: (await Promise.resolve().then(() => require("./openai.df6d8947.js"))).ChatOpenAI
    }[_type];
    if (Cls === void 0) {
      throw new Error(`Cannot load  LLM with type ${_type}`);
    }
    return new Cls(rest);
  }
}
let getRandomValues;
const rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}
const byteToHex = [];
for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
function unsafeStringify(arr, offset = 0) {
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}
const randomUUID = typeof crypto !== "undefined" && crypto.randomUUID && crypto.randomUUID.bind(crypto);
const native = {
  randomUUID
};
function v4(options2, buf, offset) {
  if (native.randomUUID && !buf && !options2) {
    return native.randomUUID();
  }
  options2 = options2 || {};
  const rnds = options2.random || (options2.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return unsafeStringify(rnds);
}
class BaseCallbackHandlerMethodsClass {
}
class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {
  constructor(input) {
    var _a, _b, _c;
    super();
    Object.defineProperty(this, "ignoreLLM", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    Object.defineProperty(this, "ignoreChain", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    Object.defineProperty(this, "ignoreAgent", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    if (input) {
      this.ignoreLLM = (_a = input.ignoreLLM) != null ? _a : this.ignoreLLM;
      this.ignoreChain = (_b = input.ignoreChain) != null ? _b : this.ignoreChain;
      this.ignoreAgent = (_c = input.ignoreAgent) != null ? _c : this.ignoreAgent;
    }
  }
  copy() {
    return new this.constructor(this);
  }
  static fromMethods(methods) {
    class Handler extends BaseCallbackHandler {
      constructor() {
        super();
        Object.defineProperty(this, "name", {
          enumerable: true,
          configurable: true,
          writable: true,
          value: v4()
        });
        Object.assign(this, methods);
      }
    }
    return new Handler();
  }
}
var ansiStyles = { exports: {} };
(function(module2) {
  const ANSI_BACKGROUND_OFFSET = 10;
  const wrapAnsi256 = (offset = 0) => (code2) => `\x1B[${38 + offset};5;${code2}m`;
  const wrapAnsi16m = (offset = 0) => (red, green, blue) => `\x1B[${38 + offset};2;${red};${green};${blue}m`;
  function assembleStyles() {
    const codes = /* @__PURE__ */ new Map();
    const styles2 = {
      modifier: {
        reset: [0, 0],
        bold: [1, 22],
        dim: [2, 22],
        italic: [3, 23],
        underline: [4, 24],
        overline: [53, 55],
        inverse: [7, 27],
        hidden: [8, 28],
        strikethrough: [9, 29]
      },
      color: {
        black: [30, 39],
        red: [31, 39],
        green: [32, 39],
        yellow: [33, 39],
        blue: [34, 39],
        magenta: [35, 39],
        cyan: [36, 39],
        white: [37, 39],
        blackBright: [90, 39],
        redBright: [91, 39],
        greenBright: [92, 39],
        yellowBright: [93, 39],
        blueBright: [94, 39],
        magentaBright: [95, 39],
        cyanBright: [96, 39],
        whiteBright: [97, 39]
      },
      bgColor: {
        bgBlack: [40, 49],
        bgRed: [41, 49],
        bgGreen: [42, 49],
        bgYellow: [43, 49],
        bgBlue: [44, 49],
        bgMagenta: [45, 49],
        bgCyan: [46, 49],
        bgWhite: [47, 49],
        bgBlackBright: [100, 49],
        bgRedBright: [101, 49],
        bgGreenBright: [102, 49],
        bgYellowBright: [103, 49],
        bgBlueBright: [104, 49],
        bgMagentaBright: [105, 49],
        bgCyanBright: [106, 49],
        bgWhiteBright: [107, 49]
      }
    };
    styles2.color.gray = styles2.color.blackBright;
    styles2.bgColor.bgGray = styles2.bgColor.bgBlackBright;
    styles2.color.grey = styles2.color.blackBright;
    styles2.bgColor.bgGrey = styles2.bgColor.bgBlackBright;
    for (const [groupName, group] of Object.entries(styles2)) {
      for (const [styleName, style] of Object.entries(group)) {
        styles2[styleName] = {
          open: `\x1B[${style[0]}m`,
          close: `\x1B[${style[1]}m`
        };
        group[styleName] = styles2[styleName];
        codes.set(style[0], style[1]);
      }
      Object.defineProperty(styles2, groupName, {
        value: group,
        enumerable: false
      });
    }
    Object.defineProperty(styles2, "codes", {
      value: codes,
      enumerable: false
    });
    styles2.color.close = "\x1B[39m";
    styles2.bgColor.close = "\x1B[49m";
    styles2.color.ansi256 = wrapAnsi256();
    styles2.color.ansi16m = wrapAnsi16m();
    styles2.bgColor.ansi256 = wrapAnsi256(ANSI_BACKGROUND_OFFSET);
    styles2.bgColor.ansi16m = wrapAnsi16m(ANSI_BACKGROUND_OFFSET);
    Object.defineProperties(styles2, {
      rgbToAnsi256: {
        value: (red, green, blue) => {
          if (red === green && green === blue) {
            if (red < 8) {
              return 16;
            }
            if (red > 248) {
              return 231;
            }
            return Math.round((red - 8) / 247 * 24) + 232;
          }
          return 16 + 36 * Math.round(red / 255 * 5) + 6 * Math.round(green / 255 * 5) + Math.round(blue / 255 * 5);
        },
        enumerable: false
      },
      hexToRgb: {
        value: (hex) => {
          const matches = /(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(hex.toString(16));
          if (!matches) {
            return [0, 0, 0];
          }
          let { colorString } = matches.groups;
          if (colorString.length === 3) {
            colorString = colorString.split("").map((character) => character + character).join("");
          }
          const integer = Number.parseInt(colorString, 16);
          return [
            integer >> 16 & 255,
            integer >> 8 & 255,
            integer & 255
          ];
        },
        enumerable: false
      },
      hexToAnsi256: {
        value: (hex) => styles2.rgbToAnsi256(...styles2.hexToRgb(hex)),
        enumerable: false
      }
    });
    return styles2;
  }
  Object.defineProperty(module2, "exports", {
    enumerable: true,
    get: assembleStyles
  });
})(ansiStyles);
const styles = ansiStyles.exports;
class BaseTracer extends BaseCallbackHandler {
  constructor() {
    super();
    Object.defineProperty(this, "runMap", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: /* @__PURE__ */ new Map()
    });
  }
  copy() {
    return this;
  }
  _addChildRun(parentRun, childRun) {
    parentRun.child_runs.push(childRun);
  }
  _startTrace(run2) {
    if (run2.parent_run_id !== void 0) {
      const parentRun = this.runMap.get(run2.parent_run_id);
      if (parentRun) {
        this._addChildRun(parentRun, run2);
      }
    }
    this.runMap.set(run2.id, run2);
  }
  async _endTrace(run2) {
    const parentRun = run2.parent_run_id !== void 0 && this.runMap.get(run2.parent_run_id);
    if (parentRun) {
      parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run2.child_execution_order);
    } else {
      await this.persistRun(run2);
    }
    this.runMap.delete(run2.id);
  }
  _getExecutionOrder(parentRunId) {
    const parentRun = parentRunId !== void 0 && this.runMap.get(parentRunId);
    if (!parentRun) {
      return 1;
    }
    return parentRun.child_execution_order + 1;
  }
  async handleLLMStart(llm, prompts, runId, parentRunId, extraParams) {
    var _a;
    const execution_order = this._getExecutionOrder(parentRunId);
    const run2 = {
      id: runId,
      name: llm.name,
      parent_run_id: parentRunId,
      start_time: Date.now(),
      serialized: llm,
      inputs: { prompts },
      execution_order,
      child_runs: [],
      child_execution_order: execution_order,
      run_type: "llm",
      extra: extraParams
    };
    this._startTrace(run2);
    await ((_a = this.onLLMStart) == null ? void 0 : _a.call(this, run2));
  }
  async handleChatModelStart(llm, messages, runId, parentRunId, extraParams) {
    var _a;
    const execution_order = this._getExecutionOrder(parentRunId);
    const run2 = {
      id: runId,
      name: llm.name,
      parent_run_id: parentRunId,
      start_time: Date.now(),
      serialized: llm,
      inputs: { messages },
      execution_order,
      child_runs: [],
      child_execution_order: execution_order,
      run_type: "llm",
      extra: extraParams
    };
    this._startTrace(run2);
    await ((_a = this.onLLMStart) == null ? void 0 : _a.call(this, run2));
  }
  async handleLLMEnd(output, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "llm") {
      throw new Error("No LLM run to end.");
    }
    run2.end_time = Date.now();
    run2.outputs = output;
    await ((_a = this.onLLMEnd) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleLLMError(error, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "llm") {
      throw new Error("No LLM run to end.");
    }
    run2.end_time = Date.now();
    run2.error = error.message;
    await ((_a = this.onLLMError) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleChainStart(chain, inputs, runId, parentRunId) {
    var _a;
    const execution_order = this._getExecutionOrder(parentRunId);
    const run2 = {
      id: runId,
      name: chain.name,
      parent_run_id: parentRunId,
      start_time: Date.now(),
      serialized: chain,
      inputs,
      execution_order,
      child_execution_order: execution_order,
      run_type: "chain",
      child_runs: []
    };
    this._startTrace(run2);
    await ((_a = this.onChainStart) == null ? void 0 : _a.call(this, run2));
  }
  async handleChainEnd(outputs, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "chain") {
      throw new Error("No chain run to end.");
    }
    run2.end_time = Date.now();
    run2.outputs = outputs;
    await ((_a = this.onChainEnd) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleChainError(error, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "chain") {
      throw new Error("No chain run to end.");
    }
    run2.end_time = Date.now();
    run2.error = error.message;
    await ((_a = this.onChainError) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleToolStart(tool, input, runId, parentRunId) {
    var _a;
    const execution_order = this._getExecutionOrder(parentRunId);
    const run2 = {
      id: runId,
      name: tool.name,
      parent_run_id: parentRunId,
      start_time: Date.now(),
      serialized: tool,
      inputs: { input },
      execution_order,
      child_execution_order: execution_order,
      run_type: "tool",
      child_runs: []
    };
    this._startTrace(run2);
    await ((_a = this.onToolStart) == null ? void 0 : _a.call(this, run2));
  }
  async handleToolEnd(output, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "tool") {
      throw new Error("No tool run to end");
    }
    run2.end_time = Date.now();
    run2.outputs = { output };
    await ((_a = this.onToolEnd) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleToolError(error, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "tool") {
      throw new Error("No tool run to end");
    }
    run2.end_time = Date.now();
    run2.error = error.message;
    await ((_a = this.onToolError) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleAgentAction(action, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "chain") {
      return;
    }
    const agentRun = run2;
    agentRun.actions = agentRun.actions || [];
    agentRun.actions.push(action);
    await ((_a = this.onAgentAction) == null ? void 0 : _a.call(this, run2));
  }
}
function wrap(style, text2) {
  return `${style.open}${text2}${style.close}`;
}
function tryJsonStringify(obj, fallback) {
  try {
    return JSON.stringify(obj, null, 2);
  } catch (err) {
    return fallback;
  }
}
function elapsed(run2) {
  if (!run2.end_time)
    return "";
  const elapsed2 = run2.end_time - run2.start_time;
  if (elapsed2 < 1e3) {
    return `${elapsed2}ms`;
  }
  return `${(elapsed2 / 1e3).toFixed(2)}s`;
}
const { color } = styles;
class ConsoleCallbackHandler extends BaseTracer {
  constructor() {
    super(...arguments);
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "console_callback_handler"
    });
  }
  persistRun(_run) {
    return Promise.resolve();
  }
  getParents(run2) {
    const parents = [];
    let currentRun = run2;
    while (currentRun.parent_run_id) {
      const parent = this.runMap.get(currentRun.parent_run_id);
      if (parent) {
        parents.push(parent);
        currentRun = parent;
      } else {
        break;
      }
    }
    return parents;
  }
  getBreadcrumbs(run2) {
    const parents = this.getParents(run2).reverse();
    const string = [...parents, run2].map((parent, i, arr) => {
      const name2 = `${parent.execution_order}:${parent.run_type}:${parent.name}`;
      return i === arr.length - 1 ? wrap(styles.bold, name2) : name2;
    }).join(" > ");
    return wrap(color.grey, string);
  }
  onChainStart(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.green, "[chain/start]")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run2.inputs, "[inputs]")}`);
  }
  onChainEnd(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.cyan, "[chain/end]")} [${crumbs}] [${elapsed(run2)}] Exiting Chain run with output: ${tryJsonStringify(run2.outputs, "[outputs]")}`);
  }
  onChainError(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.red, "[chain/error]")} [${crumbs}] [${elapsed(run2)}] Chain run errored with error: ${tryJsonStringify(run2.error, "[error]")}`);
  }
  onLLMStart(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    const inputs = "prompts" in run2.inputs ? { prompts: run2.inputs.prompts.map((p) => p.trim()) } : run2.inputs;
    console.log(`${wrap(color.green, "[llm/start]")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, "[inputs]")}`);
  }
  onLLMEnd(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.cyan, "[llm/end]")} [${crumbs}] [${elapsed(run2)}] Exiting LLM run with output: ${tryJsonStringify(run2.outputs, "[response]")}`);
  }
  onLLMError(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.red, "[llm/error]")} [${crumbs}] [${elapsed(run2)}] LLM run errored with error: ${tryJsonStringify(run2.error, "[error]")}`);
  }
  onToolStart(run2) {
    var _a;
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.green, "[tool/start]")} [${crumbs}] Entering Tool run with input: "${(_a = run2.inputs.input) == null ? void 0 : _a.trim()}"`);
  }
  onToolEnd(run2) {
    var _a, _b;
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.cyan, "[tool/end]")} [${crumbs}] [${elapsed(run2)}] Exiting Tool run with output: "${(_b = (_a = run2.outputs) == null ? void 0 : _a.output) == null ? void 0 : _b.trim()}"`);
  }
  onToolError(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.red, "[tool/error]")} [${crumbs}] [${elapsed(run2)}] Tool run errored with error: ${tryJsonStringify(run2.error, "[error]")}`);
  }
  onAgentAction(run2) {
    const agentRun = run2;
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.blue, "[agent/action]")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], "[action]")}`);
  }
}
class LangChainTracer extends BaseTracer {
  constructor({ exampleId, sessionName, callerParams, timeout } = {}) {
    super();
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "langchain_tracer"
    });
    Object.defineProperty(this, "endpoint", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: getEnvironmentVariable("LANGCHAIN_ENDPOINT") || "http://localhost:1984"
    });
    Object.defineProperty(this, "headers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: {
        "Content-Type": "application/json"
      }
    });
    Object.defineProperty(this, "sessionName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "exampleId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "caller", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "timeout", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 5e3
    });
    const apiKey = getEnvironmentVariable("LANGCHAIN_API_KEY");
    if (apiKey) {
      this.headers["x-api-key"] = apiKey;
    }
    this.sessionName = sessionName != null ? sessionName : getEnvironmentVariable("LANGCHAIN_SESSION");
    this.exampleId = exampleId;
    this.timeout = timeout != null ? timeout : this.timeout;
    this.caller = new AsyncCaller(callerParams != null ? callerParams : { maxRetries: 2 });
  }
  async _convertToCreate(run2, example_id = void 0) {
    var _a, _b;
    const runExtra = (_a = run2.extra) != null ? _a : {};
    runExtra.runtime = await getRuntimeEnvironment();
    const persistedRun = {
      id: run2.id,
      name: run2.name,
      start_time: run2.start_time,
      end_time: run2.end_time,
      run_type: run2.run_type,
      reference_example_id: run2.parent_run_id ? void 0 : example_id,
      extra: runExtra,
      parent_run_id: run2.parent_run_id,
      execution_order: run2.execution_order,
      serialized: run2.serialized,
      error: run2.error,
      inputs: run2.inputs,
      outputs: (_b = run2.outputs) != null ? _b : {},
      session_name: this.sessionName,
      child_runs: []
    };
    return persistedRun;
  }
  async persistRun(_run) {
  }
  async _persistRunSingle(run2) {
    const persistedRun = await this._convertToCreate(run2, this.exampleId);
    const endpoint = `${this.endpoint}/runs`;
    const response = await this.caller.call(fetch, endpoint, {
      method: "POST",
      headers: this.headers,
      body: JSON.stringify(persistedRun),
      signal: AbortSignal.timeout(this.timeout)
    });
    const body = await response.text();
    if (!response.ok) {
      throw new Error(`Failed to persist run: ${response.status} ${response.statusText} ${body}`);
    }
  }
  async _updateRunSingle(run2) {
    const runUpdate = {
      end_time: run2.end_time,
      error: run2.error,
      outputs: run2.outputs,
      parent_run_id: run2.parent_run_id,
      reference_example_id: run2.reference_example_id
    };
    const endpoint = `${this.endpoint}/runs/${run2.id}`;
    const response = await this.caller.call(fetch, endpoint, {
      method: "PATCH",
      headers: this.headers,
      body: JSON.stringify(runUpdate),
      signal: AbortSignal.timeout(this.timeout)
    });
    const body = await response.text();
    if (!response.ok) {
      throw new Error(`Failed to update run: ${response.status} ${response.statusText} ${body}`);
    }
  }
  async onLLMStart(run2) {
    await this._persistRunSingle(run2);
  }
  async onLLMEnd(run2) {
    await this._updateRunSingle(run2);
  }
  async onLLMError(run2) {
    await this._updateRunSingle(run2);
  }
  async onChainStart(run2) {
    await this._persistRunSingle(run2);
  }
  async onChainEnd(run2) {
    await this._updateRunSingle(run2);
  }
  async onChainError(run2) {
    await this._updateRunSingle(run2);
  }
  async onToolStart(run2) {
    await this._persistRunSingle(run2);
  }
  async onToolEnd(run2) {
    await this._updateRunSingle(run2);
  }
  async onToolError(run2) {
    await this._updateRunSingle(run2);
  }
}
function getBufferString(messages, humanPrefix = "Human", aiPrefix = "AI") {
  const string_messages = [];
  for (const m of messages) {
    let role;
    if (m._getType() === "human") {
      role = humanPrefix;
    } else if (m._getType() === "ai") {
      role = aiPrefix;
    } else if (m._getType() === "system") {
      role = "System";
    } else if (m._getType() === "generic") {
      role = m.role;
    } else {
      throw new Error(`Got unsupported message type: ${m}`);
    }
    string_messages.push(`${role}: ${m.text}`);
  }
  return string_messages.join("\n");
}
class LangChainTracerV1 extends BaseTracer {
  constructor() {
    super();
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "langchain_tracer"
    });
    Object.defineProperty(this, "endpoint", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: getEnvironmentVariable("LANGCHAIN_ENDPOINT") || "http://localhost:1984"
    });
    Object.defineProperty(this, "headers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: {
        "Content-Type": "application/json"
      }
    });
    Object.defineProperty(this, "session", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    const apiKey = getEnvironmentVariable("LANGCHAIN_API_KEY");
    if (apiKey) {
      this.headers["x-api-key"] = apiKey;
    }
  }
  async newSession(sessionName) {
    const sessionCreate = {
      start_time: Date.now(),
      name: sessionName
    };
    const session = await this.persistSession(sessionCreate);
    this.session = session;
    return session;
  }
  async loadSession(sessionName) {
    const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;
    return this._handleSessionResponse(endpoint);
  }
  async loadDefaultSession() {
    const endpoint = `${this.endpoint}/sessions?name=default`;
    return this._handleSessionResponse(endpoint);
  }
  async convertV2RunToRun(run2) {
    var _a, _b;
    const session = (_a = this.session) != null ? _a : await this.loadDefaultSession();
    const serialized = run2.serialized;
    let runResult;
    if (run2.run_type === "llm") {
      const prompts = run2.inputs.prompts ? run2.inputs.prompts : run2.inputs.messages.map((x) => getBufferString(x));
      const llmRun = {
        uuid: run2.id,
        start_time: run2.start_time,
        end_time: run2.end_time,
        execution_order: run2.execution_order,
        child_execution_order: run2.child_execution_order,
        serialized,
        type: run2.run_type,
        session_id: session.id,
        prompts,
        response: run2.outputs
      };
      runResult = llmRun;
    } else if (run2.run_type === "chain") {
      const child_runs = await Promise.all(run2.child_runs.map((child_run) => this.convertV2RunToRun(child_run)));
      const chainRun = {
        uuid: run2.id,
        start_time: run2.start_time,
        end_time: run2.end_time,
        execution_order: run2.execution_order,
        child_execution_order: run2.child_execution_order,
        serialized,
        type: run2.run_type,
        session_id: session.id,
        inputs: run2.inputs,
        outputs: run2.outputs,
        child_llm_runs: child_runs.filter((child_run) => child_run.type === "llm"),
        child_chain_runs: child_runs.filter((child_run) => child_run.type === "chain"),
        child_tool_runs: child_runs.filter((child_run) => child_run.type === "tool")
      };
      runResult = chainRun;
    } else if (run2.run_type === "tool") {
      const child_runs = await Promise.all(run2.child_runs.map((child_run) => this.convertV2RunToRun(child_run)));
      const toolRun = {
        uuid: run2.id,
        start_time: run2.start_time,
        end_time: run2.end_time,
        execution_order: run2.execution_order,
        child_execution_order: run2.child_execution_order,
        serialized,
        type: run2.run_type,
        session_id: session.id,
        tool_input: run2.inputs.input,
        output: (_b = run2.outputs) == null ? void 0 : _b.output,
        action: JSON.stringify(serialized),
        child_llm_runs: child_runs.filter((child_run) => child_run.type === "llm"),
        child_chain_runs: child_runs.filter((child_run) => child_run.type === "chain"),
        child_tool_runs: child_runs.filter((child_run) => child_run.type === "tool")
      };
      runResult = toolRun;
    } else {
      throw new Error(`Unknown run type: ${run2.run_type}`);
    }
    return runResult;
  }
  async persistRun(run2) {
    let endpoint;
    let v1Run;
    if (run2.run_type !== void 0) {
      v1Run = await this.convertV2RunToRun(run2);
    } else {
      v1Run = run2;
    }
    if (v1Run.type === "llm") {
      endpoint = `${this.endpoint}/llm-runs`;
    } else if (v1Run.type === "chain") {
      endpoint = `${this.endpoint}/chain-runs`;
    } else {
      endpoint = `${this.endpoint}/tool-runs`;
    }
    const response = await fetch(endpoint, {
      method: "POST",
      headers: this.headers,
      body: JSON.stringify(v1Run)
    });
    if (!response.ok) {
      console.error(`Failed to persist run: ${response.status} ${response.statusText}`);
    }
  }
  async persistSession(sessionCreate) {
    const endpoint = `${this.endpoint}/sessions`;
    const response = await fetch(endpoint, {
      method: "POST",
      headers: this.headers,
      body: JSON.stringify(sessionCreate)
    });
    if (!response.ok) {
      console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);
      return {
        id: 1,
        ...sessionCreate
      };
    }
    return {
      id: (await response.json()).id,
      ...sessionCreate
    };
  }
  async _handleSessionResponse(endpoint) {
    const response = await fetch(endpoint, {
      method: "GET",
      headers: this.headers
    });
    let tracerSession;
    if (!response.ok) {
      console.error(`Failed to load session: ${response.status} ${response.statusText}`);
      tracerSession = {
        id: 1,
        start_time: Date.now()
      };
      this.session = tracerSession;
      return tracerSession;
    }
    const resp = await response.json();
    if (resp.length === 0) {
      tracerSession = {
        id: 1,
        start_time: Date.now()
      };
      this.session = tracerSession;
      return tracerSession;
    }
    [tracerSession] = resp;
    this.session = tracerSession;
    return tracerSession;
  }
}
async function getTracingCallbackHandler(session) {
  const tracer = new LangChainTracerV1();
  if (session) {
    await tracer.loadSession(session);
  } else {
    await tracer.loadDefaultSession();
  }
  return tracer;
}
async function getTracingV2CallbackHandler() {
  return new LangChainTracer();
}
class BaseCallbackManager {
  setHandler(handler) {
    return this.setHandlers([handler]);
  }
}
class BaseRunManager {
  constructor(runId, handlers, inheritableHandlers, _parentRunId) {
    Object.defineProperty(this, "runId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: runId
    });
    Object.defineProperty(this, "handlers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: handlers
    });
    Object.defineProperty(this, "inheritableHandlers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: inheritableHandlers
    });
    Object.defineProperty(this, "_parentRunId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: _parentRunId
    });
  }
  async handleText(text2) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      try {
        await ((_a = handler.handleText) == null ? void 0 : _a.call(handler, text2, this.runId, this._parentRunId));
      } catch (err) {
        console.error(`Error in handler ${handler.constructor.name}, handleText: ${err}`);
      }
    }));
  }
}
class CallbackManagerForLLMRun extends BaseRunManager {
  async handleLLMNewToken(token) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreLLM) {
        try {
          await ((_a = handler.handleLLMNewToken) == null ? void 0 : _a.call(handler, token, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);
        }
      }
    }));
  }
  async handleLLMError(err) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreLLM) {
        try {
          await ((_a = handler.handleLLMError) == null ? void 0 : _a.call(handler, err, this.runId, this._parentRunId));
        } catch (err2) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMError: ${err2}`);
        }
      }
    }));
  }
  async handleLLMEnd(output) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreLLM) {
        try {
          await ((_a = handler.handleLLMEnd) == null ? void 0 : _a.call(handler, output, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);
        }
      }
    }));
  }
}
class CallbackManagerForChainRun extends BaseRunManager {
  getChild() {
    const manager = new CallbackManager(this.runId);
    manager.setHandlers(this.inheritableHandlers);
    return manager;
  }
  async handleChainError(err) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreChain) {
        try {
          await ((_a = handler.handleChainError) == null ? void 0 : _a.call(handler, err, this.runId, this._parentRunId));
        } catch (err2) {
          console.error(`Error in handler ${handler.constructor.name}, handleChainError: ${err2}`);
        }
      }
    }));
  }
  async handleChainEnd(output) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreChain) {
        try {
          await ((_a = handler.handleChainEnd) == null ? void 0 : _a.call(handler, output, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);
        }
      }
    }));
  }
  async handleAgentAction(action) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleAgentAction) == null ? void 0 : _a.call(handler, action, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);
        }
      }
    }));
  }
  async handleAgentEnd(action) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleAgentEnd) == null ? void 0 : _a.call(handler, action, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);
        }
      }
    }));
  }
}
class CallbackManagerForToolRun extends BaseRunManager {
  getChild() {
    const manager = new CallbackManager(this.runId);
    manager.setHandlers(this.inheritableHandlers);
    return manager;
  }
  async handleToolError(err) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleToolError) == null ? void 0 : _a.call(handler, err, this.runId, this._parentRunId));
        } catch (err2) {
          console.error(`Error in handler ${handler.constructor.name}, handleToolError: ${err2}`);
        }
      }
    }));
  }
  async handleToolEnd(output) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleToolEnd) == null ? void 0 : _a.call(handler, output, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);
        }
      }
    }));
  }
}
class CallbackManager extends BaseCallbackManager {
  constructor(parentRunId) {
    super();
    Object.defineProperty(this, "handlers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "inheritableHandlers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "callback_manager"
    });
    Object.defineProperty(this, "_parentRunId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.handlers = [];
    this.inheritableHandlers = [];
    this._parentRunId = parentRunId;
  }
  async handleLLMStart(llm, prompts, runId = v4(), _parentRunId = void 0, extraParams = void 0) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreLLM) {
        try {
          await ((_a = handler.handleLLMStart) == null ? void 0 : _a.call(handler, llm, prompts, runId, this._parentRunId, extraParams));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);
        }
      }
    }));
    return new CallbackManagerForLLMRun(runId, this.handlers, this.inheritableHandlers, this._parentRunId);
  }
  async handleChatModelStart(llm, messages, runId = v4(), _parentRunId = void 0, extraParams = void 0) {
    let messageStrings;
    await Promise.all(this.handlers.map(async (handler) => {
      var _a, _b;
      if (!handler.ignoreLLM) {
        try {
          if (handler.handleChatModelStart)
            await ((_a = handler.handleChatModelStart) == null ? void 0 : _a.call(handler, llm, messages, runId, this._parentRunId, extraParams));
          else if (handler.handleLLMStart) {
            messageStrings = messages.map((x) => getBufferString(x));
            await ((_b = handler.handleLLMStart) == null ? void 0 : _b.call(handler, llm, messageStrings, runId, this._parentRunId, extraParams));
          }
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);
        }
      }
    }));
    return new CallbackManagerForLLMRun(runId, this.handlers, this.inheritableHandlers, this._parentRunId);
  }
  async handleChainStart(chain, inputs, runId = v4()) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreChain) {
        try {
          await ((_a = handler.handleChainStart) == null ? void 0 : _a.call(handler, chain, inputs, runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);
        }
      }
    }));
    return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this._parentRunId);
  }
  async handleToolStart(tool, input, runId = v4()) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleToolStart) == null ? void 0 : _a.call(handler, tool, input, runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);
        }
      }
    }));
    return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this._parentRunId);
  }
  addHandler(handler, inherit = true) {
    this.handlers.push(handler);
    if (inherit) {
      this.inheritableHandlers.push(handler);
    }
  }
  removeHandler(handler) {
    this.handlers = this.handlers.filter((_handler) => _handler !== handler);
    this.inheritableHandlers = this.inheritableHandlers.filter((_handler) => _handler !== handler);
  }
  setHandlers(handlers, inherit = true) {
    this.handlers = [];
    this.inheritableHandlers = [];
    for (const handler of handlers) {
      this.addHandler(handler, inherit);
    }
  }
  copy(additionalHandlers = [], inherit = true) {
    const manager = new CallbackManager(this._parentRunId);
    for (const handler of this.handlers) {
      const inheritable = this.inheritableHandlers.includes(handler);
      manager.addHandler(handler, inheritable);
    }
    for (const handler of additionalHandlers) {
      if (manager.handlers.filter((h) => h.name === "console_callback_handler").some((h) => h.name === handler.name)) {
        continue;
      }
      manager.addHandler(handler, inherit);
    }
    return manager;
  }
  static fromHandlers(handlers) {
    class Handler extends BaseCallbackHandler {
      constructor() {
        super();
        Object.defineProperty(this, "name", {
          enumerable: true,
          configurable: true,
          writable: true,
          value: v4()
        });
        Object.assign(this, handlers);
      }
    }
    const manager = new this();
    manager.addHandler(new Handler());
    return manager;
  }
  static async configure(inheritableHandlers, localHandlers, options2) {
    var _a, _b, _c;
    let callbackManager;
    if (inheritableHandlers || localHandlers) {
      if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {
        callbackManager = new CallbackManager();
        callbackManager.setHandlers((_a = inheritableHandlers == null ? void 0 : inheritableHandlers.map(ensureHandler)) != null ? _a : [], true);
      } else {
        callbackManager = inheritableHandlers;
      }
      callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers == null ? void 0 : localHandlers.handlers, false);
    }
    const verboseEnabled = getEnvironmentVariable("LANGCHAIN_VERBOSE") || (options2 == null ? void 0 : options2.verbose);
    const tracingV2Enabled = (_b = getEnvironmentVariable("LANGCHAIN_TRACING_V2")) != null ? _b : false;
    const tracingEnabled = tracingV2Enabled || ((_c = getEnvironmentVariable("LANGCHAIN_TRACING")) != null ? _c : false);
    if (verboseEnabled || tracingEnabled) {
      if (!callbackManager) {
        callbackManager = new CallbackManager();
      }
      if (verboseEnabled && !callbackManager.handlers.some((handler) => handler.name === ConsoleCallbackHandler.prototype.name)) {
        const consoleHandler = new ConsoleCallbackHandler();
        callbackManager.addHandler(consoleHandler, true);
      }
      if (tracingEnabled && !callbackManager.handlers.some((handler) => handler.name === "langchain_tracer")) {
        if (tracingV2Enabled) {
          callbackManager.addHandler(await getTracingV2CallbackHandler(), true);
        } else {
          const session = getEnvironmentVariable("LANGCHAIN_SESSION");
          callbackManager.addHandler(await getTracingCallbackHandler(session), true);
        }
      }
    }
    return callbackManager;
  }
}
function ensureHandler(handler) {
  if ("name" in handler) {
    return handler;
  }
  return BaseCallbackHandler.fromMethods(handler);
}
class BaseLLM extends BaseLanguageModel {
  constructor({ cache: cache2, concurrency, ...rest }) {
    super(concurrency ? { maxConcurrency: concurrency, ...rest } : rest);
    Object.defineProperty(this, "cache", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    if (typeof cache2 === "object") {
      this.cache = cache2;
    } else if (cache2) {
      this.cache = InMemoryCache.global();
    } else {
      this.cache = void 0;
    }
  }
  async generatePrompt(promptValues, options2, callbacks) {
    const prompts = promptValues.map((promptValue) => promptValue.toString());
    return this.generate(prompts, options2, callbacks);
  }
  invocationParams() {
    return {};
  }
  async _generateUncached(prompts, options2, callbacks) {
    const callbackManager_ = await CallbackManager.configure(callbacks, this.callbacks, { verbose: this.verbose });
    const invocationParams = { invocation_params: this == null ? void 0 : this.invocationParams() };
    const runManager = await (callbackManager_ == null ? void 0 : callbackManager_.handleLLMStart({ name: this._llmType() }, prompts, void 0, void 0, invocationParams));
    let output;
    try {
      output = await this._generate(prompts, options2, runManager);
    } catch (err) {
      await (runManager == null ? void 0 : runManager.handleLLMError(err));
      throw err;
    }
    await (runManager == null ? void 0 : runManager.handleLLMEnd(output));
    Object.defineProperty(output, RUN_KEY, {
      value: runManager ? { runId: runManager == null ? void 0 : runManager.runId } : void 0,
      configurable: true
    });
    return output;
  }
  async generate(prompts, options2, callbacks) {
    var _a, _b;
    if (!Array.isArray(prompts)) {
      throw new Error("Argument 'prompts' is expected to be a string[]");
    }
    let parsedOptions;
    if (Array.isArray(options2)) {
      parsedOptions = { stop: options2 };
    } else if ((options2 == null ? void 0 : options2.timeout) && !options2.signal) {
      parsedOptions = {
        ...options2,
        signal: AbortSignal.timeout(options2.timeout)
      };
    } else {
      parsedOptions = options2 != null ? options2 : {};
    }
    if (!this.cache) {
      return this._generateUncached(prompts, parsedOptions, callbacks);
    }
    const { cache: cache2 } = this;
    const params = this.serialize();
    params.stop = (_a = parsedOptions.stop) != null ? _a : params.stop;
    const llmStringKey = `${Object.entries(params).sort()}`;
    const missingPromptIndices = [];
    const generations = await Promise.all(prompts.map(async (prompt, index) => {
      const result = await cache2.lookup(prompt, llmStringKey);
      if (!result) {
        missingPromptIndices.push(index);
      }
      return result;
    }));
    let llmOutput = {};
    if (missingPromptIndices.length > 0) {
      const results = await this._generateUncached(missingPromptIndices.map((i) => prompts[i]), parsedOptions, callbacks);
      await Promise.all(results.generations.map(async (generation, index) => {
        const promptIndex = missingPromptIndices[index];
        generations[promptIndex] = generation;
        return cache2.update(prompts[promptIndex], llmStringKey, generation);
      }));
      llmOutput = (_b = results.llmOutput) != null ? _b : {};
    }
    return { generations, llmOutput };
  }
  async call(prompt, options2, callbacks) {
    const { generations } = await this.generate([prompt], options2 != null ? options2 : {}, callbacks);
    return generations[0][0].text;
  }
  async predict(text2, options2, callbacks) {
    return this.call(text2, options2, callbacks);
  }
  async predictMessages(messages, options2, callbacks) {
    const text2 = getBufferString(messages);
    const prediction = await this.call(text2, options2, callbacks);
    return new AIChatMessage(prediction);
  }
  _identifyingParams() {
    return {};
  }
  serialize() {
    return {
      ...this._identifyingParams(),
      _type: this._llmType(),
      _model: this._modelType()
    };
  }
  _modelType() {
    return "base_llm";
  }
  static async deserialize(data2) {
    const { _type, _model, ...rest } = data2;
    if (_model && _model !== "base_llm") {
      throw new Error(`Cannot load LLM with model ${_model}`);
    }
    const Cls = {
      openai: (await Promise.resolve().then(() => openai)).OpenAI
    }[_type];
    if (Cls === void 0) {
      throw new Error(`Cannot load  LLM with type ${_type}`);
    }
    return new Cls(rest);
  }
}
class LLM extends BaseLLM {
  async _generate(prompts, options2, runManager) {
    const generations = await Promise.all(prompts.map((prompt) => this._call(prompt, options2, runManager).then((text2) => [{ text: text2 }])));
    return { generations };
  }
}
const promptLayerTrackRequest = async (callerFunc, functionName, prompt, kwargs, plTags, requestResponse, startTime, endTime, apiKey) => {
  const promptLayerResp = await callerFunc.call(fetch, "https://api.promptlayer.com/track-request", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Accept: "application/json"
    },
    body: JSON.stringify({
      function_name: functionName,
      provider: "langchain",
      args: prompt,
      kwargs,
      tags: plTags,
      request_response: requestResponse,
      request_start_time: Math.floor(startTime / 1e3),
      request_end_time: Math.floor(endTime / 1e3),
      api_key: apiKey
    })
  });
  return promptLayerResp.json();
};
class OpenAIChat extends LLM {
  get callKeys() {
    return ["stop", "signal", "timeout", "options"];
  }
  constructor(fields, configuration2) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;
    super(fields != null ? fields : {});
    Object.defineProperty(this, "temperature", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "topP", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "frequencyPenalty", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0
    });
    Object.defineProperty(this, "presencePenalty", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0
    });
    Object.defineProperty(this, "n", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "logitBias", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "maxTokens", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "modelName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "gpt-3.5-turbo"
    });
    Object.defineProperty(this, "prefixMessages", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "modelKwargs", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "timeout", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "stop", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "streaming", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    Object.defineProperty(this, "azureOpenAIApiVersion", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiKey", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiInstanceName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiDeploymentName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "client", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "clientConfig", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    const apiKey = (_a = fields == null ? void 0 : fields.openAIApiKey) != null ? _a : getEnvironmentVariable("OPENAI_API_KEY");
    const azureApiKey = (_b = fields == null ? void 0 : fields.azureOpenAIApiKey) != null ? _b : getEnvironmentVariable("AZURE_OPENAI_API_KEY");
    if (!azureApiKey && !apiKey) {
      throw new Error("(Azure) OpenAI API key not found");
    }
    const azureApiInstanceName = (_c = fields == null ? void 0 : fields.azureOpenAIApiInstanceName) != null ? _c : getEnvironmentVariable("AZURE_OPENAI_API_INSTANCE_NAME");
    const azureApiDeploymentName = (_d = fields == null ? void 0 : fields.azureOpenAIApiDeploymentName) != null ? _d : getEnvironmentVariable("AZURE_OPENAI_API_DEPLOYMENT_NAME");
    const azureApiVersion = (_e = fields == null ? void 0 : fields.azureOpenAIApiVersion) != null ? _e : getEnvironmentVariable("AZURE_OPENAI_API_VERSION");
    this.modelName = (_f = fields == null ? void 0 : fields.modelName) != null ? _f : this.modelName;
    this.prefixMessages = (_g = fields == null ? void 0 : fields.prefixMessages) != null ? _g : this.prefixMessages;
    this.modelKwargs = (_h = fields == null ? void 0 : fields.modelKwargs) != null ? _h : {};
    this.timeout = fields == null ? void 0 : fields.timeout;
    this.temperature = (_i = fields == null ? void 0 : fields.temperature) != null ? _i : this.temperature;
    this.topP = (_j = fields == null ? void 0 : fields.topP) != null ? _j : this.topP;
    this.frequencyPenalty = (_k = fields == null ? void 0 : fields.frequencyPenalty) != null ? _k : this.frequencyPenalty;
    this.presencePenalty = (_l = fields == null ? void 0 : fields.presencePenalty) != null ? _l : this.presencePenalty;
    this.n = (_m = fields == null ? void 0 : fields.n) != null ? _m : this.n;
    this.logitBias = fields == null ? void 0 : fields.logitBias;
    this.maxTokens = fields == null ? void 0 : fields.maxTokens;
    this.stop = fields == null ? void 0 : fields.stop;
    this.streaming = (_n = fields == null ? void 0 : fields.streaming) != null ? _n : false;
    this.azureOpenAIApiVersion = azureApiVersion;
    this.azureOpenAIApiKey = azureApiKey;
    this.azureOpenAIApiInstanceName = azureApiInstanceName;
    this.azureOpenAIApiDeploymentName = azureApiDeploymentName;
    if (this.streaming && this.n > 1) {
      throw new Error("Cannot stream results when n > 1");
    }
    if (this.azureOpenAIApiKey) {
      if (!this.azureOpenAIApiInstanceName) {
        throw new Error("Azure OpenAI API instance name not found");
      }
      if (!this.azureOpenAIApiDeploymentName) {
        throw new Error("Azure OpenAI API deployment name not found");
      }
      if (!this.azureOpenAIApiVersion) {
        throw new Error("Azure OpenAI API version not found");
      }
    }
    this.clientConfig = {
      apiKey,
      ...configuration2
    };
  }
  invocationParams() {
    return {
      model: this.modelName,
      temperature: this.temperature,
      top_p: this.topP,
      frequency_penalty: this.frequencyPenalty,
      presence_penalty: this.presencePenalty,
      n: this.n,
      logit_bias: this.logitBias,
      max_tokens: this.maxTokens === -1 ? void 0 : this.maxTokens,
      stop: this.stop,
      stream: this.streaming,
      ...this.modelKwargs
    };
  }
  _identifyingParams() {
    return {
      model_name: this.modelName,
      ...this.invocationParams(),
      ...this.clientConfig
    };
  }
  identifyingParams() {
    return {
      model_name: this.modelName,
      ...this.invocationParams(),
      ...this.clientConfig
    };
  }
  formatMessages(prompt) {
    const message = {
      role: "user",
      content: prompt
    };
    return this.prefixMessages ? [...this.prefixMessages, message] : [message];
  }
  async _call(prompt, options2, runManager) {
    var _a, _b;
    const { stop } = options2;
    const params = this.invocationParams();
    params.stop = stop != null ? stop : params.stop;
    const data2 = params.stream ? await new Promise((resolve, reject) => {
      let response;
      let rejected = false;
      let resolved = false;
      this.completionWithRetry({
        ...params,
        messages: this.formatMessages(prompt)
      }, {
        signal: options2.signal,
        ...options2.options,
        adapter: fetchAdapter,
        responseType: "stream",
        onmessage: (event) => {
          var _a2, _b2, _c, _d, _e, _f, _g, _h, _i, _j;
          if (((_b2 = (_a2 = event.data) == null ? void 0 : _a2.trim) == null ? void 0 : _b2.call(_a2)) === "[DONE]") {
            if (resolved) {
              return;
            }
            resolved = true;
            resolve(response);
          } else {
            const message = JSON.parse(event.data);
            if (!response) {
              response = {
                id: message.id,
                object: message.object,
                created: message.created,
                model: message.model,
                choices: []
              };
            }
            for (const part of message.choices) {
              if (part != null) {
                let choice = response.choices.find((c) => c.index === part.index);
                if (!choice) {
                  choice = {
                    index: part.index,
                    finish_reason: (_c = part.finish_reason) != null ? _c : void 0
                  };
                  response.choices.push(choice);
                }
                if (!choice.message) {
                  choice.message = {
                    role: (_d = part.delta) == null ? void 0 : _d.role,
                    content: (_f = (_e = part.delta) == null ? void 0 : _e.content) != null ? _f : ""
                  };
                }
                choice.message.content += (_h = (_g = part.delta) == null ? void 0 : _g.content) != null ? _h : "";
                void (runManager == null ? void 0 : runManager.handleLLMNewToken((_j = (_i = part.delta) == null ? void 0 : _i.content) != null ? _j : ""));
              }
            }
            if (!resolved && message.choices.every((c) => c.finish_reason != null)) {
              resolved = true;
              resolve(response);
            }
          }
        }
      }).catch((error) => {
        if (!rejected) {
          rejected = true;
          reject(error);
        }
      });
    }) : await this.completionWithRetry({
      ...params,
      messages: this.formatMessages(prompt)
    }, {
      signal: options2.signal,
      ...options2.options
    });
    return (_b = (_a = data2.choices[0].message) == null ? void 0 : _a.content) != null ? _b : "";
  }
  async completionWithRetry(request2, options2) {
    if (!this.client) {
      const endpoint = this.azureOpenAIApiKey ? `https://${this.azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${this.azureOpenAIApiDeploymentName}` : this.clientConfig.basePath;
      const clientConfig = new dist$1.Configuration({
        ...this.clientConfig,
        basePath: endpoint,
        baseOptions: {
          timeout: this.timeout,
          ...this.clientConfig.baseOptions
        }
      });
      this.client = new dist$1.OpenAIApi(clientConfig);
    }
    const axiosOptions = {
      adapter: isNode() ? void 0 : fetchAdapter,
      ...this.clientConfig.baseOptions,
      ...options2
    };
    if (this.azureOpenAIApiKey) {
      axiosOptions.headers = {
        "api-key": this.azureOpenAIApiKey,
        ...axiosOptions.headers
      };
      axiosOptions.params = {
        "api-version": this.azureOpenAIApiVersion,
        ...axiosOptions.params
      };
    }
    return this.caller.call(this.client.createChatCompletion.bind(this.client), request2, axiosOptions).then((res) => res.data);
  }
  _llmType() {
    return "openai";
  }
}
class PromptLayerOpenAIChat extends OpenAIChat {
  constructor(fields) {
    var _a, _b, _c;
    super(fields);
    Object.defineProperty(this, "promptLayerApiKey", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "plTags", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "returnPromptLayerId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.plTags = (_a = fields == null ? void 0 : fields.plTags) != null ? _a : [];
    this.returnPromptLayerId = (_b = fields == null ? void 0 : fields.returnPromptLayerId) != null ? _b : false;
    this.promptLayerApiKey = (_c = fields == null ? void 0 : fields.promptLayerApiKey) != null ? _c : getEnvironmentVariable("PROMPTLAYER_API_KEY");
    if (!this.promptLayerApiKey) {
      throw new Error("Missing PromptLayer API key");
    }
  }
  async completionWithRetry(request2, options2) {
    if (request2.stream) {
      return super.completionWithRetry(request2, options2);
    }
    const response = await super.completionWithRetry(request2);
    return response;
  }
  async _generate(prompts, options2, runManager) {
    let choice;
    const generations = await Promise.all(prompts.map(async (prompt) => {
      const requestStartTime = Date.now();
      const text2 = await this._call(prompt, options2, runManager);
      const requestEndTime = Date.now();
      choice = [{ text: text2 }];
      const parsedResp = {
        text: text2
      };
      const promptLayerRespBody = await promptLayerTrackRequest(this.caller, "langchain.PromptLayerOpenAIChat", [prompt], this._identifyingParams(), this.plTags, parsedResp, requestStartTime, requestEndTime, this.promptLayerApiKey);
      if (this.returnPromptLayerId === true && promptLayerRespBody.success === true) {
        choice[0].generationInfo = {
          promptLayerRequestId: promptLayerRespBody.request_id
        };
      }
      return choice;
    }));
    return { generations };
  }
}
class OpenAI extends BaseLLM {
  get callKeys() {
    return ["stop", "signal", "timeout", "options"];
  }
  constructor(fields, configuration2) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;
    if (((_a = fields == null ? void 0 : fields.modelName) == null ? void 0 : _a.startsWith("gpt-3.5-turbo")) || ((_b = fields == null ? void 0 : fields.modelName) == null ? void 0 : _b.startsWith("gpt-4")) || ((_c = fields == null ? void 0 : fields.modelName) == null ? void 0 : _c.startsWith("gpt-4-32k"))) {
      return new OpenAIChat(fields, configuration2);
    }
    super(fields != null ? fields : {});
    Object.defineProperty(this, "temperature", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0.7
    });
    Object.defineProperty(this, "maxTokens", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 256
    });
    Object.defineProperty(this, "topP", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "frequencyPenalty", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0
    });
    Object.defineProperty(this, "presencePenalty", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0
    });
    Object.defineProperty(this, "n", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "bestOf", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "logitBias", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "modelName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "text-davinci-003"
    });
    Object.defineProperty(this, "modelKwargs", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "batchSize", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 20
    });
    Object.defineProperty(this, "timeout", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "stop", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "streaming", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    Object.defineProperty(this, "azureOpenAIApiVersion", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiKey", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiInstanceName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiDeploymentName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "client", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "clientConfig", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    const apiKey = (_d = fields == null ? void 0 : fields.openAIApiKey) != null ? _d : getEnvironmentVariable("OPENAI_API_KEY");
    const azureApiKey = (_e = fields == null ? void 0 : fields.azureOpenAIApiKey) != null ? _e : getEnvironmentVariable("AZURE_OPENAI_API_KEY");
    if (!azureApiKey && !apiKey) {
      throw new Error("(Azure) OpenAI API key not found");
    }
    const azureApiInstanceName = (_f = fields == null ? void 0 : fields.azureOpenAIApiInstanceName) != null ? _f : getEnvironmentVariable("AZURE_OPENAI_API_INSTANCE_NAME");
    const azureApiDeploymentName = (_g = (fields == null ? void 0 : fields.azureOpenAIApiCompletionsDeploymentName) || (fields == null ? void 0 : fields.azureOpenAIApiDeploymentName)) != null ? _g : getEnvironmentVariable("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME") || getEnvironmentVariable("AZURE_OPENAI_API_DEPLOYMENT_NAME");
    const azureApiVersion = (_h = fields == null ? void 0 : fields.azureOpenAIApiVersion) != null ? _h : getEnvironmentVariable("AZURE_OPENAI_API_VERSION");
    this.modelName = (_i = fields == null ? void 0 : fields.modelName) != null ? _i : this.modelName;
    this.modelKwargs = (_j = fields == null ? void 0 : fields.modelKwargs) != null ? _j : {};
    this.batchSize = (_k = fields == null ? void 0 : fields.batchSize) != null ? _k : this.batchSize;
    this.timeout = fields == null ? void 0 : fields.timeout;
    this.temperature = (_l = fields == null ? void 0 : fields.temperature) != null ? _l : this.temperature;
    this.maxTokens = (_m = fields == null ? void 0 : fields.maxTokens) != null ? _m : this.maxTokens;
    this.topP = (_n = fields == null ? void 0 : fields.topP) != null ? _n : this.topP;
    this.frequencyPenalty = (_o = fields == null ? void 0 : fields.frequencyPenalty) != null ? _o : this.frequencyPenalty;
    this.presencePenalty = (_p = fields == null ? void 0 : fields.presencePenalty) != null ? _p : this.presencePenalty;
    this.n = (_q = fields == null ? void 0 : fields.n) != null ? _q : this.n;
    this.bestOf = (_r = fields == null ? void 0 : fields.bestOf) != null ? _r : this.bestOf;
    this.logitBias = fields == null ? void 0 : fields.logitBias;
    this.stop = fields == null ? void 0 : fields.stop;
    this.streaming = (_s = fields == null ? void 0 : fields.streaming) != null ? _s : false;
    this.azureOpenAIApiVersion = azureApiVersion;
    this.azureOpenAIApiKey = azureApiKey;
    this.azureOpenAIApiInstanceName = azureApiInstanceName;
    this.azureOpenAIApiDeploymentName = azureApiDeploymentName;
    if (this.streaming && this.n > 1) {
      throw new Error("Cannot stream results when n > 1");
    }
    if (this.streaming && this.bestOf > 1) {
      throw new Error("Cannot stream results when bestOf > 1");
    }
    if (this.azureOpenAIApiKey) {
      if (!this.azureOpenAIApiInstanceName) {
        throw new Error("Azure OpenAI API instance name not found");
      }
      if (!this.azureOpenAIApiDeploymentName) {
        throw new Error("Azure OpenAI API deployment name not found");
      }
      if (!this.azureOpenAIApiVersion) {
        throw new Error("Azure OpenAI API version not found");
      }
    }
    this.clientConfig = {
      apiKey,
      ...configuration2
    };
  }
  invocationParams() {
    return {
      model: this.modelName,
      temperature: this.temperature,
      max_tokens: this.maxTokens,
      top_p: this.topP,
      frequency_penalty: this.frequencyPenalty,
      presence_penalty: this.presencePenalty,
      n: this.n,
      best_of: this.bestOf,
      logit_bias: this.logitBias,
      stop: this.stop,
      stream: this.streaming,
      ...this.modelKwargs
    };
  }
  _identifyingParams() {
    return {
      model_name: this.modelName,
      ...this.invocationParams(),
      ...this.clientConfig
    };
  }
  identifyingParams() {
    return this._identifyingParams();
  }
  async _generate(prompts, options2, runManager) {
    var _a, _b, _c, _d;
    const { stop } = options2;
    const subPrompts = chunkArray(prompts, this.batchSize);
    const choices = [];
    const tokenUsage = {};
    if (this.stop && stop) {
      throw new Error("Stop found in input and default params");
    }
    const params = this.invocationParams();
    params.stop = stop != null ? stop : params.stop;
    if (params.max_tokens === -1) {
      if (prompts.length !== 1) {
        throw new Error("max_tokens set to -1 not supported for multiple inputs");
      }
      params.max_tokens = await calculateMaxTokens({
        prompt: prompts[0],
        modelName: this.modelName
      });
    }
    for (let i = 0; i < subPrompts.length; i += 1) {
      const data2 = params.stream ? await new Promise((resolve, reject) => {
        const choices2 = [];
        let response;
        let rejected = false;
        let resolved = false;
        this.completionWithRetry({
          ...params,
          prompt: subPrompts[i]
        }, {
          signal: options2.signal,
          ...options2.options,
          adapter: fetchAdapter,
          responseType: "stream",
          onmessage: (event) => {
            var _a2, _b2, _c2, _d2, _e;
            if (((_b2 = (_a2 = event.data) == null ? void 0 : _a2.trim) == null ? void 0 : _b2.call(_a2)) === "[DONE]") {
              if (resolved) {
                return;
              }
              resolved = true;
              resolve({
                ...response,
                choices: choices2
              });
            } else {
              const message = JSON.parse(event.data);
              if (!response) {
                response = {
                  id: message.id,
                  object: message.object,
                  created: message.created,
                  model: message.model
                };
              }
              for (const part of message.choices) {
                if (part != null && part.index != null) {
                  if (!choices2[part.index])
                    choices2[part.index] = {};
                  const choice = choices2[part.index];
                  choice.text = ((_c2 = choice.text) != null ? _c2 : "") + ((_d2 = part.text) != null ? _d2 : "");
                  choice.finish_reason = part.finish_reason;
                  choice.logprobs = part.logprobs;
                  void (runManager == null ? void 0 : runManager.handleLLMNewToken((_e = part.text) != null ? _e : ""));
                }
              }
              if (!resolved && choices2.every((c) => c.finish_reason != null)) {
                resolved = true;
                resolve({
                  ...response,
                  choices: choices2
                });
              }
            }
          }
        }).catch((error) => {
          if (!rejected) {
            rejected = true;
            reject(error);
          }
        });
      }) : await this.completionWithRetry({
        ...params,
        prompt: subPrompts[i]
      }, {
        signal: options2.signal,
        ...options2.options
      });
      choices.push(...data2.choices);
      const { completion_tokens: completionTokens, prompt_tokens: promptTokens, total_tokens: totalTokens } = (_a = data2.usage) != null ? _a : {};
      if (completionTokens) {
        tokenUsage.completionTokens = ((_b = tokenUsage.completionTokens) != null ? _b : 0) + completionTokens;
      }
      if (promptTokens) {
        tokenUsage.promptTokens = ((_c = tokenUsage.promptTokens) != null ? _c : 0) + promptTokens;
      }
      if (totalTokens) {
        tokenUsage.totalTokens = ((_d = tokenUsage.totalTokens) != null ? _d : 0) + totalTokens;
      }
    }
    const generations = chunkArray(choices, this.n).map((promptChoices) => promptChoices.map((choice) => {
      var _a2;
      return {
        text: (_a2 = choice.text) != null ? _a2 : "",
        generationInfo: {
          finishReason: choice.finish_reason,
          logprobs: choice.logprobs
        }
      };
    }));
    return {
      generations,
      llmOutput: { tokenUsage }
    };
  }
  async completionWithRetry(request2, options2) {
    if (!this.client) {
      const endpoint = this.azureOpenAIApiKey ? `https://${this.azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${this.azureOpenAIApiDeploymentName}` : this.clientConfig.basePath;
      const clientConfig = new dist$1.Configuration({
        ...this.clientConfig,
        basePath: endpoint,
        baseOptions: {
          timeout: this.timeout,
          ...this.clientConfig.baseOptions
        }
      });
      this.client = new dist$1.OpenAIApi(clientConfig);
    }
    const axiosOptions = {
      adapter: isNode() ? void 0 : fetchAdapter,
      ...this.clientConfig.baseOptions,
      ...options2
    };
    if (this.azureOpenAIApiKey) {
      axiosOptions.headers = {
        "api-key": this.azureOpenAIApiKey,
        ...axiosOptions.headers
      };
      axiosOptions.params = {
        "api-version": this.azureOpenAIApiVersion,
        ...axiosOptions.params
      };
    }
    return this.caller.call(this.client.createCompletion.bind(this.client), request2, axiosOptions).then((res) => res.data);
  }
  _llmType() {
    return "openai";
  }
}
class PromptLayerOpenAI extends OpenAI {
  constructor(fields) {
    var _a, _b;
    super(fields);
    Object.defineProperty(this, "promptLayerApiKey", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "plTags", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "returnPromptLayerId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.plTags = (_a = fields == null ? void 0 : fields.plTags) != null ? _a : [];
    this.promptLayerApiKey = (_b = fields == null ? void 0 : fields.promptLayerApiKey) != null ? _b : getEnvironmentVariable("PROMPTLAYER_API_KEY");
    this.returnPromptLayerId = fields == null ? void 0 : fields.returnPromptLayerId;
    if (!this.promptLayerApiKey) {
      throw new Error("Missing PromptLayer API key");
    }
  }
  async completionWithRetry(request2, options2) {
    if (request2.stream) {
      return super.completionWithRetry(request2, options2);
    }
    const response = await super.completionWithRetry(request2);
    return response;
  }
  async _generate(prompts, options2, runManager) {
    const requestStartTime = Date.now();
    const generations = await super._generate(prompts, options2, runManager);
    for (let i = 0; i < generations.generations.length; i += 1) {
      const requestEndTime = Date.now();
      const parsedResp = {
        text: generations.generations[i][0].text,
        llm_output: generations.llmOutput
      };
      const promptLayerRespBody = await promptLayerTrackRequest(this.caller, "langchain.PromptLayerOpenAI", [prompts[i]], this._identifyingParams(), this.plTags, parsedResp, requestStartTime, requestEndTime, this.promptLayerApiKey);
      let promptLayerRequestId;
      if (this.returnPromptLayerId === true) {
        if (promptLayerRespBody && promptLayerRespBody.success === true) {
          promptLayerRequestId = promptLayerRespBody.request_id;
        }
        generations.generations[i][0].generationInfo = {
          ...generations.generations[i][0].generationInfo,
          promptLayerRequestId
        };
      }
    }
    return generations;
  }
}
const openai = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  OpenAI,
  PromptLayerOpenAI,
  OpenAIChat,
  PromptLayerOpenAIChat
}, Symbol.toStringTag, { value: "Module" }));
function create_fragment(ctx) {
  let div;
  let h1;
  let t1;
  let input;
  let t2;
  let button;
  let t4;
  let span;
  let mounted;
  let dispose;
  return {
    c() {
      div = element("div");
      h1 = element("h1");
      h1.textContent = "Basic Prompt";
      t1 = space();
      input = element("input");
      t2 = space();
      button = element("button");
      button.textContent = "Send Prompt";
      t4 = space();
      span = element("span");
      span.textContent = `${promptOutput}`;
      attr(input, "type", "text");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, h1);
      append(div, t1);
      append(div, input);
      set_input_value(input, ctx[0]);
      append(div, t2);
      append(div, button);
      append(div, t4);
      append(div, span);
      if (!mounted) {
        dispose = [
          listen(input, "input", ctx[3]),
          listen(button, "click", ctx[4])
        ];
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 1 && input.value !== ctx2[0]) {
        set_input_value(input, ctx2[0]);
      }
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      run_all(dispose);
    }
  };
}
let promptOutput = "res...";
function instance($$self, $$props, $$invalidate) {
  let promptInput = "";
  const openAIKey = "";
  new OpenAI({
    openAIApiKey: openAIKey,
    temperature: 0.4
  });
  async function sendPrompt(promptInput2) {
    console.log("input: " + promptInput2);
    console.log("api-key: " + openAIKey);
  }
  function input_input_handler() {
    promptInput = this.value;
    $$invalidate(0, promptInput);
  }
  const click_handler = () => {
    sendPrompt(promptInput);
  };
  return [promptInput, sendPrompt, openAIKey, input_input_handler, click_handler];
}
class BasicPrompt extends SvelteComponent {
  constructor(options2) {
    super();
    init(this, options2, instance, create_fragment, safe_not_equal, { openAIKey: 2 });
  }
  get openAIKey() {
    return this.$$.ctx[2];
  }
}
const VIEW_TYPE = "svelte-view";
const DEFAULT_SETTINGS = {
  mySetting: "default",
  openAI_API_Key: "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"
};
class BasicPromptView extends obsidian.ItemView {
  constructor(leaf, openAIKey) {
    super(leaf);
    this.openAIKey = openAIKey;
  }
  getViewType() {
    return VIEW_TYPE;
  }
  getDisplayText() {
    return "Basic Prompt";
  }
  getIcon() {
    return "dice";
  }
  async onOpen() {
    this.view = new BasicPrompt({ target: this.contentEl, props: { openAIKey: this.openAIKey } });
  }
}
class MyPlugin extends obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const openAIKey = this.settings.openAI_API_Key;
    this.registerView(
      VIEW_TYPE,
      (leaf) => this.view = new BasicPromptView(leaf, openAIKey)
    );
    this.app.workspace.onLayoutReady(this.onLayoutReady.bind(this));
    this.addRibbonIcon("dice", "Sample Plugin", (evt) => this.openMapView());
    this.addCommand({
      id: "open-sample-modal-simple",
      name: "Open sample modal (simple)",
      callback: () => this.openMapView()
    });
    this.addSettingTab(new SampleSettingTab(this.app, this));
  }
  onLayoutReady() {
    if (this.app.workspace.getLeavesOfType(VIEW_TYPE).length) {
      return;
    }
    this.app.workspace.getRightLeaf(false).setViewState({
      type: VIEW_TYPE
    });
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async openMapView() {
    const workspace = this.app.workspace;
    workspace.detachLeavesOfType(VIEW_TYPE);
    const leaf = workspace.getLeaf(
      !obsidian.Platform.isMobile
    );
    await leaf.setViewState({ type: VIEW_TYPE });
    workspace.revealLeaf(leaf);
  }
}
class SampleSettingTab extends obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for my awesome plugin." });
    new obsidian.Setting(containerEl).setName("Setting #1").setDesc("It's a secret").addText((text2) => text2.setPlaceholder("Enter your secret").setValue(this.plugin.settings.mySetting).onChange(async (value) => {
      this.plugin.settings.mySetting = value;
      await this.plugin.saveSettings();
    }));
    new obsidian.Setting(containerEl).setName("openAI_API_Key").setDesc("Add your openAI API key here").addText((text2) => text2.setPlaceholder("enter key").setValue(this.plugin.settings.mySetting));
  }
}
exports.AIChatMessage = AIChatMessage;
exports.BaseLanguageModel = BaseLanguageModel;
exports.CallbackManager = CallbackManager;
exports.ChatMessage = ChatMessage;
exports.HumanChatMessage = HumanChatMessage;
exports.MyPlugin = MyPlugin;
exports.RUN_KEY = RUN_KEY;
exports.SystemChatMessage = SystemChatMessage;
exports.dist = dist$1;
exports.fetchAdapter = fetchAdapter;
exports.getEnvironmentVariable = getEnvironmentVariable;
exports.getModelNameForTiktoken = getModelNameForTiktoken;
exports.isNode = isNode;
exports.promptLayerTrackRequest = promptLayerTrackRequest;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcnRlckluZGV4LmU3YWI4YTE2LmpzIiwic291cmNlcyI6WyJub2RlX21vZHVsZXMvZG90ZW52L2xpYi9tYWluLmpzIiwibm9kZV9tb2R1bGVzL2RvdGVudi9saWIvZW52LW9wdGlvbnMuanMiLCJub2RlX21vZHVsZXMvZG90ZW52L2xpYi9jbGktb3B0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9kb3RlbnYvY29uZmlnLmpzIiwibm9kZV9tb2R1bGVzL3N2ZWx0ZS9pbnRlcm5hbC9pbmRleC5tanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvdXRpbHMuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvSW50ZXJjZXB0b3JNYW5hZ2VyLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZW5oYW5jZUVycm9yLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy90cmFuc2l0aW9uYWwuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2Nvb2tpZXMuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9idWlsZEZ1bGxQYXRoLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWwuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL2lzQ2FuY2VsLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9tZXJnZUNvbmZpZy5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvZW52L2RhdGEuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdmFsaWRhdG9yLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvc3ByZWFkLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzQXhpb3NFcnJvci5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvYXhpb3MuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvaW5kZXguanMiLCJub2RlX21vZHVsZXMvb3BlbmFpL2Rpc3QvYmFzZS5qcyIsIm5vZGVfbW9kdWxlcy9vcGVuYWkvZGlzdC9jb21tb24uanMiLCJub2RlX21vZHVsZXMvb3BlbmFpL2Rpc3QvYXBpLmpzIiwibm9kZV9tb2R1bGVzL2Zvcm0tZGF0YS9saWIvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9vcGVuYWkvZGlzdC9jb25maWd1cmF0aW9uLmpzIiwibm9kZV9tb2R1bGVzL29wZW5haS9kaXN0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L3V0aWwvZW52LmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L3V0aWwvZXZlbnQtc291cmNlLXBhcnNlLmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L3V0aWwvYXhpb3MtZmV0Y2gtYWRhcHRlci5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC91dGlsL2NodW5rLmpzIiwibm9kZV9tb2R1bGVzL29iamVjdC1oYXNoL2Rpc3Qvb2JqZWN0X2hhc2guanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvY2FjaGUvYmFzZS5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9zY2hlbWEvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvY2FjaGUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcmV0cnkvbGliL3JldHJ5X29wZXJhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZXRyeS9saWIvcmV0cnkuanMiLCJub2RlX21vZHVsZXMvcmV0cnkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcC1yZXRyeS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3AtZmluYWxseS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wLXRpbWVvdXQvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcC1xdWV1ZS9kaXN0L2xvd2VyLWJvdW5kLmpzIiwibm9kZV9tb2R1bGVzL3AtcXVldWUvZGlzdC9wcmlvcml0eS1xdWV1ZS5qcyIsIm5vZGVfbW9kdWxlcy9wLXF1ZXVlL2Rpc3QvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvdXRpbC9hc3luY19jYWxsZXIuanMiLCJub2RlX21vZHVsZXMvanMtdGlrdG9rZW4vZGlzdC9jaHVuay1YWFBHWkhXWi5qcyIsIm5vZGVfbW9kdWxlcy9iYXNlNjQtanMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvanMtdGlrdG9rZW4vZGlzdC9jaHVuay1IT1JPREQ1UC5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC91dGlsL3Rpa3Rva2VuLmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2Jhc2VfbGFuZ3VhZ2UvY291bnRfdG9rZW5zLmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2Jhc2VfbGFuZ3VhZ2UvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JuZy5qcyIsIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc3RyaW5naWZ5LmpzIiwibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9uYXRpdmUuanMiLCJub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2NhbGxiYWNrcy9iYXNlLmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvYW5zaS1zdHlsZXMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvY2FsbGJhY2tzL2hhbmRsZXJzL3RyYWNlci5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9jYWxsYmFja3MvaGFuZGxlcnMvY29uc29sZS5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9jYWxsYmFja3MvaGFuZGxlcnMvdHJhY2VyX2xhbmdjaGFpbi5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9tZW1vcnkvYmFzZS5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9jYWxsYmFja3MvaGFuZGxlcnMvdHJhY2VyX2xhbmdjaGFpbl92MS5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9jYWxsYmFja3MvaGFuZGxlcnMvaW5pdGlhbGl6ZS5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9jYWxsYmFja3MvbWFuYWdlci5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9sbG1zL2Jhc2UuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvdXRpbC9wcm9tcHQtbGF5ZXIuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvbGxtcy9vcGVuYWktY2hhdC5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9sbG1zL29wZW5haS5qcyIsInNyYy91aS9CYXNpY1Byb21wdC5zdmVsdGUiLCJzcmMvc3RhcnRlckluZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKVxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKVxuY29uc3Qgb3MgPSByZXF1aXJlKCdvcycpXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKVxuY29uc3QgcGFja2FnZUpzb24gPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKVxuXG5jb25zdCB2ZXJzaW9uID0gcGFja2FnZUpzb24udmVyc2lvblxuXG5jb25zdCBMSU5FID0gLyg/Ol58XilcXHMqKD86ZXhwb3J0XFxzKyk/KFtcXHcuLV0rKSg/Olxccyo9XFxzKj98Olxccys/KShcXHMqJyg/OlxcXFwnfFteJ10pKid8XFxzKlwiKD86XFxcXFwifFteXCJdKSpcInxcXHMqYCg/OlxcXFxgfFteYF0pKmB8W14jXFxyXFxuXSspP1xccyooPzojLiopPyg/OiR8JCkvbWdcblxuLy8gUGFyc2Ugc3JjIGludG8gYW4gT2JqZWN0XG5mdW5jdGlvbiBwYXJzZSAoc3JjKSB7XG4gIGNvbnN0IG9iaiA9IHt9XG5cbiAgLy8gQ29udmVydCBidWZmZXIgdG8gc3RyaW5nXG4gIGxldCBsaW5lcyA9IHNyYy50b1N0cmluZygpXG5cbiAgLy8gQ29udmVydCBsaW5lIGJyZWFrcyB0byBzYW1lIGZvcm1hdFxuICBsaW5lcyA9IGxpbmVzLnJlcGxhY2UoL1xcclxcbj8vbWcsICdcXG4nKVxuXG4gIGxldCBtYXRjaFxuICB3aGlsZSAoKG1hdGNoID0gTElORS5leGVjKGxpbmVzKSkgIT0gbnVsbCkge1xuICAgIGNvbnN0IGtleSA9IG1hdGNoWzFdXG5cbiAgICAvLyBEZWZhdWx0IHVuZGVmaW5lZCBvciBudWxsIHRvIGVtcHR5IHN0cmluZ1xuICAgIGxldCB2YWx1ZSA9IChtYXRjaFsyXSB8fCAnJylcblxuICAgIC8vIFJlbW92ZSB3aGl0ZXNwYWNlXG4gICAgdmFsdWUgPSB2YWx1ZS50cmltKClcblxuICAgIC8vIENoZWNrIGlmIGRvdWJsZSBxdW90ZWRcbiAgICBjb25zdCBtYXliZVF1b3RlID0gdmFsdWVbMF1cblxuICAgIC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXNcbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL14oWydcImBdKShbXFxzXFxTXSopXFwxJC9tZywgJyQyJylcblxuICAgIC8vIEV4cGFuZCBuZXdsaW5lcyBpZiBkb3VibGUgcXVvdGVkXG4gICAgaWYgKG1heWJlUXVvdGUgPT09ICdcIicpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpXG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcXFxyL2csICdcXHInKVxuICAgIH1cblxuICAgIC8vIEFkZCB0byBvYmplY3RcbiAgICBvYmpba2V5XSA9IHZhbHVlXG4gIH1cblxuICByZXR1cm4gb2JqXG59XG5cbmZ1bmN0aW9uIF9wYXJzZVZhdWx0IChvcHRpb25zKSB7XG4gIGNvbnN0IHZhdWx0UGF0aCA9IF92YXVsdFBhdGgob3B0aW9ucylcblxuICAvLyBQYXJzZSAuZW52LnZhdWx0XG4gIGNvbnN0IHJlc3VsdCA9IERvdGVudk1vZHVsZS5jb25maWdEb3RlbnYoeyBwYXRoOiB2YXVsdFBhdGggfSlcbiAgaWYgKCFyZXN1bHQucGFyc2VkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNSVNTSU5HX0RBVEE6IENhbm5vdCBwYXJzZSAke3ZhdWx0UGF0aH0gZm9yIGFuIHVua25vd24gcmVhc29uYClcbiAgfVxuXG4gIC8vIGhhbmRsZSBzY2VuYXJpbyBmb3IgY29tbWEgc2VwYXJhdGVkIGtleXMgLSBmb3IgdXNlIHdpdGgga2V5IHJvdGF0aW9uXG4gIC8vIGV4YW1wbGU6IERPVEVOVl9LRVk9XCJkb3RlbnY6Ly86a2V5XzEyMzRAZG90ZW52Lm9yZy92YXVsdC8uZW52LnZhdWx0P2Vudmlyb25tZW50PXByb2QsZG90ZW52Oi8vOmtleV83ODkwQGRvdGVudi5vcmcvdmF1bHQvLmVudi52YXVsdD9lbnZpcm9ubWVudD1wcm9kXCJcbiAgY29uc3Qga2V5cyA9IF9kb3RlbnZLZXkoKS5zcGxpdCgnLCcpXG4gIGNvbnN0IGxlbmd0aCA9IGtleXMubGVuZ3RoXG5cbiAgbGV0IGRlY3J5cHRlZFxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBmdWxsIGtleVxuICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXS50cmltKClcblxuICAgICAgLy8gR2V0IGluc3RydWN0aW9ucyBmb3IgZGVjcnlwdFxuICAgICAgY29uc3QgYXR0cnMgPSBfaW5zdHJ1Y3Rpb25zKHJlc3VsdCwga2V5KVxuXG4gICAgICAvLyBEZWNyeXB0XG4gICAgICBkZWNyeXB0ZWQgPSBEb3RlbnZNb2R1bGUuZGVjcnlwdChhdHRycy5jaXBoZXJ0ZXh0LCBhdHRycy5rZXkpXG5cbiAgICAgIGJyZWFrXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIGxhc3Qga2V5XG4gICAgICBpZiAoaSArIDEgPj0gbGVuZ3RoKSB7XG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG4gICAgICAvLyB0cnkgbmV4dCBrZXlcbiAgICB9XG4gIH1cblxuICAvLyBQYXJzZSBkZWNyeXB0ZWQgLmVudiBzdHJpbmdcbiAgcmV0dXJuIERvdGVudk1vZHVsZS5wYXJzZShkZWNyeXB0ZWQpXG59XG5cbmZ1bmN0aW9uIF9sb2cgKG1lc3NhZ2UpIHtcbiAgY29uc29sZS5sb2coYFtkb3RlbnZAJHt2ZXJzaW9ufV1bSU5GT10gJHttZXNzYWdlfWApXG59XG5cbmZ1bmN0aW9uIF93YXJuIChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKGBbZG90ZW52QCR7dmVyc2lvbn1dW1dBUk5dICR7bWVzc2FnZX1gKVxufVxuXG5mdW5jdGlvbiBfZGVidWcgKG1lc3NhZ2UpIHtcbiAgY29uc29sZS5sb2coYFtkb3RlbnZAJHt2ZXJzaW9ufV1bREVCVUddICR7bWVzc2FnZX1gKVxufVxuXG5mdW5jdGlvbiBfZG90ZW52S2V5ICgpIHtcbiAgaWYgKHByb2Nlc3MuZW52LkRPVEVOVl9LRVkgJiYgcHJvY2Vzcy5lbnYuRE9URU5WX0tFWS5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52LkRPVEVOVl9LRVlcbiAgfVxuXG4gIHJldHVybiAnJ1xufVxuXG5mdW5jdGlvbiBfaW5zdHJ1Y3Rpb25zIChyZXN1bHQsIGRvdGVudktleSkge1xuICAvLyBQYXJzZSBET1RFTlZfS0VZLiBGb3JtYXQgaXMgYSBVUklcbiAgbGV0IHVyaVxuICB0cnkge1xuICAgIHVyaSA9IG5ldyBVUkwoZG90ZW52S2V5KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvci5jb2RlID09PSAnRVJSX0lOVkFMSURfVVJMJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJTlZBTElEX0RPVEVOVl9LRVk6IFdyb25nIGZvcm1hdC4gTXVzdCBiZSBpbiB2YWxpZCB1cmkgZm9ybWF0IGxpa2UgZG90ZW52Oi8vOmtleV8xMjM0QGRvdGVudi5vcmcvdmF1bHQvLmVudi52YXVsdD9lbnZpcm9ubWVudD1kZXZlbG9wbWVudCcpXG4gICAgfVxuXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxuXG4gIC8vIEdldCBkZWNyeXB0IGtleVxuICBjb25zdCBrZXkgPSB1cmkucGFzc3dvcmRcbiAgaWYgKCFrZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0lOVkFMSURfRE9URU5WX0tFWTogTWlzc2luZyBrZXkgcGFydCcpXG4gIH1cblxuICAvLyBHZXQgZW52aXJvbm1lbnRcbiAgY29uc3QgZW52aXJvbm1lbnQgPSB1cmkuc2VhcmNoUGFyYW1zLmdldCgnZW52aXJvbm1lbnQnKVxuICBpZiAoIWVudmlyb25tZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJTlZBTElEX0RPVEVOVl9LRVk6IE1pc3NpbmcgZW52aXJvbm1lbnQgcGFydCcpXG4gIH1cblxuICAvLyBHZXQgY2lwaGVydGV4dCBwYXlsb2FkXG4gIGNvbnN0IGVudmlyb25tZW50S2V5ID0gYERPVEVOVl9WQVVMVF8ke2Vudmlyb25tZW50LnRvVXBwZXJDYXNlKCl9YFxuICBjb25zdCBjaXBoZXJ0ZXh0ID0gcmVzdWx0LnBhcnNlZFtlbnZpcm9ubWVudEtleV0gLy8gRE9URU5WX1ZBVUxUX1BST0RVQ1RJT05cbiAgaWYgKCFjaXBoZXJ0ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBOT1RfRk9VTkRfRE9URU5WX0VOVklST05NRU5UOiBDYW5ub3QgbG9jYXRlIGVudmlyb25tZW50ICR7ZW52aXJvbm1lbnRLZXl9IGluIHlvdXIgLmVudi52YXVsdCBmaWxlLmApXG4gIH1cblxuICByZXR1cm4geyBjaXBoZXJ0ZXh0LCBrZXkgfVxufVxuXG5mdW5jdGlvbiBfdmF1bHRQYXRoIChvcHRpb25zKSB7XG4gIGxldCBkb3RlbnZQYXRoID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICcuZW52JylcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnBhdGggJiYgb3B0aW9ucy5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICBkb3RlbnZQYXRoID0gb3B0aW9ucy5wYXRoXG4gIH1cblxuICAvLyBMb2NhdGUgLmVudi52YXVsdFxuICByZXR1cm4gZG90ZW52UGF0aC5lbmRzV2l0aCgnLnZhdWx0JykgPyBkb3RlbnZQYXRoIDogYCR7ZG90ZW52UGF0aH0udmF1bHRgXG59XG5cbmZ1bmN0aW9uIF9yZXNvbHZlSG9tZSAoZW52UGF0aCkge1xuICByZXR1cm4gZW52UGF0aFswXSA9PT0gJ34nID8gcGF0aC5qb2luKG9zLmhvbWVkaXIoKSwgZW52UGF0aC5zbGljZSgxKSkgOiBlbnZQYXRoXG59XG5cbmZ1bmN0aW9uIF9jb25maWdWYXVsdCAob3B0aW9ucykge1xuICBfbG9nKCdMb2FkaW5nIGVudiBmcm9tIGVuY3J5cHRlZCAuZW52LnZhdWx0JylcblxuICBjb25zdCBwYXJzZWQgPSBEb3RlbnZNb2R1bGUuX3BhcnNlVmF1bHQob3B0aW9ucylcblxuICBEb3RlbnZNb2R1bGUucG9wdWxhdGUocHJvY2Vzcy5lbnYsIHBhcnNlZCwgb3B0aW9ucylcblxuICByZXR1cm4geyBwYXJzZWQgfVxufVxuXG5mdW5jdGlvbiBjb25maWdEb3RlbnYgKG9wdGlvbnMpIHtcbiAgbGV0IGRvdGVudlBhdGggPSBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgJy5lbnYnKVxuICBsZXQgZW5jb2RpbmcgPSAndXRmOCdcbiAgY29uc3QgZGVidWcgPSBCb29sZWFuKG9wdGlvbnMgJiYgb3B0aW9ucy5kZWJ1ZylcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLnBhdGggIT0gbnVsbCkge1xuICAgICAgZG90ZW52UGF0aCA9IF9yZXNvbHZlSG9tZShvcHRpb25zLnBhdGgpXG4gICAgfVxuICAgIGlmIChvcHRpb25zLmVuY29kaW5nICE9IG51bGwpIHtcbiAgICAgIGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZ1xuICAgIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gU3BlY2lmeWluZyBhbiBlbmNvZGluZyByZXR1cm5zIGEgc3RyaW5nIGluc3RlYWQgb2YgYSBidWZmZXJcbiAgICBjb25zdCBwYXJzZWQgPSBEb3RlbnZNb2R1bGUucGFyc2UoZnMucmVhZEZpbGVTeW5jKGRvdGVudlBhdGgsIHsgZW5jb2RpbmcgfSkpXG5cbiAgICBEb3RlbnZNb2R1bGUucG9wdWxhdGUocHJvY2Vzcy5lbnYsIHBhcnNlZCwgb3B0aW9ucylcblxuICAgIHJldHVybiB7IHBhcnNlZCB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIF9kZWJ1ZyhgRmFpbGVkIHRvIGxvYWQgJHtkb3RlbnZQYXRofSAke2UubWVzc2FnZX1gKVxuICAgIH1cblxuICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgfVxufVxuXG4vLyBQb3B1bGF0ZXMgcHJvY2Vzcy5lbnYgZnJvbSAuZW52IGZpbGVcbmZ1bmN0aW9uIGNvbmZpZyAob3B0aW9ucykge1xuICBjb25zdCB2YXVsdFBhdGggPSBfdmF1bHRQYXRoKG9wdGlvbnMpXG5cbiAgLy8gZmFsbGJhY2sgdG8gb3JpZ2luYWwgZG90ZW52IGlmIERPVEVOVl9LRVkgaXMgbm90IHNldFxuICBpZiAoX2RvdGVudktleSgpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52KG9wdGlvbnMpXG4gIH1cblxuICAvLyBkb3RlbnZLZXkgZXhpc3RzIGJ1dCAuZW52LnZhdWx0IGZpbGUgZG9lcyBub3QgZXhpc3RcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHZhdWx0UGF0aCkpIHtcbiAgICBfd2FybihgWW91IHNldCBET1RFTlZfS0VZIGJ1dCB5b3UgYXJlIG1pc3NpbmcgYSAuZW52LnZhdWx0IGZpbGUgYXQgJHt2YXVsdFBhdGh9LiBEaWQgeW91IGZvcmdldCB0byBidWlsZCBpdD9gKVxuXG4gICAgcmV0dXJuIERvdGVudk1vZHVsZS5jb25maWdEb3RlbnYob3B0aW9ucylcbiAgfVxuXG4gIHJldHVybiBEb3RlbnZNb2R1bGUuX2NvbmZpZ1ZhdWx0KG9wdGlvbnMpXG59XG5cbmZ1bmN0aW9uIGRlY3J5cHQgKGVuY3J5cHRlZCwga2V5U3RyKSB7XG4gIGNvbnN0IGtleSA9IEJ1ZmZlci5mcm9tKGtleVN0ci5zbGljZSgtNjQpLCAnaGV4JylcbiAgbGV0IGNpcGhlcnRleHQgPSBCdWZmZXIuZnJvbShlbmNyeXB0ZWQsICdiYXNlNjQnKVxuXG4gIGNvbnN0IG5vbmNlID0gY2lwaGVydGV4dC5zbGljZSgwLCAxMilcbiAgY29uc3QgYXV0aFRhZyA9IGNpcGhlcnRleHQuc2xpY2UoLTE2KVxuICBjaXBoZXJ0ZXh0ID0gY2lwaGVydGV4dC5zbGljZSgxMiwgLTE2KVxuXG4gIHRyeSB7XG4gICAgY29uc3QgYWVzZ2NtID0gY3J5cHRvLmNyZWF0ZURlY2lwaGVyaXYoJ2Flcy0yNTYtZ2NtJywga2V5LCBub25jZSlcbiAgICBhZXNnY20uc2V0QXV0aFRhZyhhdXRoVGFnKVxuICAgIHJldHVybiBgJHthZXNnY20udXBkYXRlKGNpcGhlcnRleHQpfSR7YWVzZ2NtLmZpbmFsKCl9YFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IGlzUmFuZ2UgPSBlcnJvciBpbnN0YW5jZW9mIFJhbmdlRXJyb3JcbiAgICBjb25zdCBpbnZhbGlkS2V5TGVuZ3RoID0gZXJyb3IubWVzc2FnZSA9PT0gJ0ludmFsaWQga2V5IGxlbmd0aCdcbiAgICBjb25zdCBkZWNyeXB0aW9uRmFpbGVkID0gZXJyb3IubWVzc2FnZSA9PT0gJ1Vuc3VwcG9ydGVkIHN0YXRlIG9yIHVuYWJsZSB0byBhdXRoZW50aWNhdGUgZGF0YSdcblxuICAgIGlmIChpc1JhbmdlIHx8IGludmFsaWRLZXlMZW5ndGgpIHtcbiAgICAgIGNvbnN0IG1zZyA9ICdJTlZBTElEX0RPVEVOVl9LRVk6IEl0IG11c3QgYmUgNjQgY2hhcmFjdGVycyBsb25nIChvciBtb3JlKSdcbiAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpXG4gICAgfSBlbHNlIGlmIChkZWNyeXB0aW9uRmFpbGVkKSB7XG4gICAgICBjb25zdCBtc2cgPSAnREVDUllQVElPTl9GQUlMRUQ6IFBsZWFzZSBjaGVjayB5b3VyIERPVEVOVl9LRVknXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjogJywgZXJyb3IuY29kZSlcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOiAnLCBlcnJvci5tZXNzYWdlKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cbn1cblxuLy8gUG9wdWxhdGUgcHJvY2Vzcy5lbnYgd2l0aCBwYXJzZWQgdmFsdWVzXG5mdW5jdGlvbiBwb3B1bGF0ZSAocHJvY2Vzc0VudiwgcGFyc2VkLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgZGVidWcgPSBCb29sZWFuKG9wdGlvbnMgJiYgb3B0aW9ucy5kZWJ1ZylcbiAgY29uc3Qgb3ZlcnJpZGUgPSBCb29sZWFuKG9wdGlvbnMgJiYgb3B0aW9ucy5vdmVycmlkZSlcblxuICBpZiAodHlwZW9mIHBhcnNlZCAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ09CSkVDVF9SRVFVSVJFRDogUGxlYXNlIGNoZWNrIHRoZSBwcm9jZXNzRW52IGFyZ3VtZW50IGJlaW5nIHBhc3NlZCB0byBwb3B1bGF0ZScpXG4gIH1cblxuICAvLyBTZXQgcHJvY2Vzcy5lbnZcbiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocGFyc2VkKSkge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvY2Vzc0Vudiwga2V5KSkge1xuICAgICAgaWYgKG92ZXJyaWRlID09PSB0cnVlKSB7XG4gICAgICAgIHByb2Nlc3NFbnZba2V5XSA9IHBhcnNlZFtrZXldXG4gICAgICB9XG5cbiAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICBpZiAob3ZlcnJpZGUgPT09IHRydWUpIHtcbiAgICAgICAgICBfZGVidWcoYFwiJHtrZXl9XCIgaXMgYWxyZWFkeSBkZWZpbmVkIGFuZCBXQVMgb3ZlcndyaXR0ZW5gKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9kZWJ1ZyhgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgYW5kIHdhcyBOT1Qgb3ZlcndyaXR0ZW5gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3NFbnZba2V5XSA9IHBhcnNlZFtrZXldXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IERvdGVudk1vZHVsZSA9IHtcbiAgY29uZmlnRG90ZW52LFxuICBfY29uZmlnVmF1bHQsXG4gIF9wYXJzZVZhdWx0LFxuICBjb25maWcsXG4gIGRlY3J5cHQsXG4gIHBhcnNlLFxuICBwb3B1bGF0ZVxufVxuXG5tb2R1bGUuZXhwb3J0cy5jb25maWdEb3RlbnYgPSBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52XG5tb2R1bGUuZXhwb3J0cy5fY29uZmlnVmF1bHQgPSBEb3RlbnZNb2R1bGUuX2NvbmZpZ1ZhdWx0XG5tb2R1bGUuZXhwb3J0cy5fcGFyc2VWYXVsdCA9IERvdGVudk1vZHVsZS5fcGFyc2VWYXVsdFxubW9kdWxlLmV4cG9ydHMuY29uZmlnID0gRG90ZW52TW9kdWxlLmNvbmZpZ1xubW9kdWxlLmV4cG9ydHMuZGVjcnlwdCA9IERvdGVudk1vZHVsZS5kZWNyeXB0XG5tb2R1bGUuZXhwb3J0cy5wYXJzZSA9IERvdGVudk1vZHVsZS5wYXJzZVxubW9kdWxlLmV4cG9ydHMucG9wdWxhdGUgPSBEb3RlbnZNb2R1bGUucG9wdWxhdGVcblxubW9kdWxlLmV4cG9ydHMgPSBEb3RlbnZNb2R1bGVcbiIsIi8vIC4uL2NvbmZpZy5qcyBhY2NlcHRzIG9wdGlvbnMgdmlhIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3Qgb3B0aW9ucyA9IHt9XG5cbmlmIChwcm9jZXNzLmVudi5ET1RFTlZfQ09ORklHX0VOQ09ESU5HICE9IG51bGwpIHtcbiAgb3B0aW9ucy5lbmNvZGluZyA9IHByb2Nlc3MuZW52LkRPVEVOVl9DT05GSUdfRU5DT0RJTkdcbn1cblxuaWYgKHByb2Nlc3MuZW52LkRPVEVOVl9DT05GSUdfUEFUSCAhPSBudWxsKSB7XG4gIG9wdGlvbnMucGF0aCA9IHByb2Nlc3MuZW52LkRPVEVOVl9DT05GSUdfUEFUSFxufVxuXG5pZiAocHJvY2Vzcy5lbnYuRE9URU5WX0NPTkZJR19ERUJVRyAhPSBudWxsKSB7XG4gIG9wdGlvbnMuZGVidWcgPSBwcm9jZXNzLmVudi5ET1RFTlZfQ09ORklHX0RFQlVHXG59XG5cbmlmIChwcm9jZXNzLmVudi5ET1RFTlZfQ09ORklHX09WRVJSSURFICE9IG51bGwpIHtcbiAgb3B0aW9ucy5vdmVycmlkZSA9IHByb2Nlc3MuZW52LkRPVEVOVl9DT05GSUdfT1ZFUlJJREVcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvcHRpb25zXG4iLCJjb25zdCByZSA9IC9eZG90ZW52X2NvbmZpZ18oZW5jb2Rpbmd8cGF0aHxkZWJ1Z3xvdmVycmlkZSk9KC4rKSQvXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gb3B0aW9uTWF0Y2hlciAoYXJncykge1xuICByZXR1cm4gYXJncy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyKSB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IGN1ci5tYXRjaChyZSlcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgYWNjW21hdGNoZXNbMV1dID0gbWF0Y2hlc1syXVxuICAgIH1cbiAgICByZXR1cm4gYWNjXG4gIH0sIHt9KVxufVxuIiwiKGZ1bmN0aW9uICgpIHtcbiAgcmVxdWlyZSgnLi9saWIvbWFpbicpLmNvbmZpZyhcbiAgICBPYmplY3QuYXNzaWduKFxuICAgICAge30sXG4gICAgICByZXF1aXJlKCcuL2xpYi9lbnYtb3B0aW9ucycpLFxuICAgICAgcmVxdWlyZSgnLi9saWIvY2xpLW9wdGlvbnMnKShwcm9jZXNzLmFyZ3YpXG4gICAgKVxuICApXG59KSgpXG4iLCJmdW5jdGlvbiBub29wKCkgeyB9XG5jb25zdCBpZGVudGl0eSA9IHggPT4geDtcbmZ1bmN0aW9uIGFzc2lnbih0YXIsIHNyYykge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBmb3IgKGNvbnN0IGsgaW4gc3JjKVxuICAgICAgICB0YXJba10gPSBzcmNba107XG4gICAgcmV0dXJuIHRhcjtcbn1cbmZ1bmN0aW9uIGlzX3Byb21pc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIGFkZF9sb2NhdGlvbihlbGVtZW50LCBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIpIHtcbiAgICBlbGVtZW50Ll9fc3ZlbHRlX21ldGEgPSB7XG4gICAgICAgIGxvYzogeyBmaWxlLCBsaW5lLCBjb2x1bW4sIGNoYXIgfVxuICAgIH07XG59XG5mdW5jdGlvbiBydW4oZm4pIHtcbiAgICByZXR1cm4gZm4oKTtcbn1cbmZ1bmN0aW9uIGJsYW5rX29iamVjdCgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cbmZ1bmN0aW9uIHJ1bl9hbGwoZm5zKSB7XG4gICAgZm5zLmZvckVhY2gocnVuKTtcbn1cbmZ1bmN0aW9uIGlzX2Z1bmN0aW9uKHRoaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIHNhZmVfbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYiB8fCAoKGEgJiYgdHlwZW9mIGEgPT09ICdvYmplY3QnKSB8fCB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5sZXQgc3JjX3VybF9lcXVhbF9hbmNob3I7XG5mdW5jdGlvbiBzcmNfdXJsX2VxdWFsKGVsZW1lbnRfc3JjLCB1cmwpIHtcbiAgICBpZiAoIXNyY191cmxfZXF1YWxfYW5jaG9yKSB7XG4gICAgICAgIHNyY191cmxfZXF1YWxfYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIH1cbiAgICBzcmNfdXJsX2VxdWFsX2FuY2hvci5ocmVmID0gdXJsO1xuICAgIHJldHVybiBlbGVtZW50X3NyYyA9PT0gc3JjX3VybF9lcXVhbF9hbmNob3IuaHJlZjtcbn1cbmZ1bmN0aW9uIG5vdF9lcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGI7XG59XG5mdW5jdGlvbiBpc19lbXB0eShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zdG9yZShzdG9yZSwgbmFtZSkge1xuICAgIGlmIChzdG9yZSAhPSBudWxsICYmIHR5cGVvZiBzdG9yZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtuYW1lfScgaXMgbm90IGEgc3RvcmUgd2l0aCBhICdzdWJzY3JpYmUnIG1ldGhvZGApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN1YnNjcmliZShzdG9yZSwgLi4uY2FsbGJhY2tzKSB7XG4gICAgaWYgKHN0b3JlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgfVxuICAgIGNvbnN0IHVuc3ViID0gc3RvcmUuc3Vic2NyaWJlKC4uLmNhbGxiYWNrcyk7XG4gICAgcmV0dXJuIHVuc3ViLnVuc3Vic2NyaWJlID8gKCkgPT4gdW5zdWIudW5zdWJzY3JpYmUoKSA6IHVuc3ViO1xufVxuZnVuY3Rpb24gZ2V0X3N0b3JlX3ZhbHVlKHN0b3JlKSB7XG4gICAgbGV0IHZhbHVlO1xuICAgIHN1YnNjcmliZShzdG9yZSwgXyA9PiB2YWx1ZSA9IF8pKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gY29tcG9uZW50X3N1YnNjcmliZShjb21wb25lbnQsIHN0b3JlLCBjYWxsYmFjaykge1xuICAgIGNvbXBvbmVudC4kJC5vbl9kZXN0cm95LnB1c2goc3Vic2NyaWJlKHN0b3JlLCBjYWxsYmFjaykpO1xufVxuZnVuY3Rpb24gY3JlYXRlX3Nsb3QoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNsb3RfY3R4ID0gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKTtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb25bMF0oc2xvdF9jdHgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NvbnRleHQoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbikge1xuICAgIHJldHVybiBkZWZpbml0aW9uWzFdICYmIGZuXG4gICAgICAgID8gYXNzaWduKCQkc2NvcGUuY3R4LnNsaWNlKCksIGRlZmluaXRpb25bMV0oZm4oY3R4KSkpXG4gICAgICAgIDogJCRzY29wZS5jdHg7XG59XG5mdW5jdGlvbiBnZXRfc2xvdF9jaGFuZ2VzKGRlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBmbikge1xuICAgIGlmIChkZWZpbml0aW9uWzJdICYmIGZuKSB7XG4gICAgICAgIGNvbnN0IGxldHMgPSBkZWZpbml0aW9uWzJdKGZuKGRpcnR5KSk7XG4gICAgICAgIGlmICgkJHNjb3BlLmRpcnR5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBsZXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbGV0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IFtdO1xuICAgICAgICAgICAgY29uc3QgbGVuID0gTWF0aC5tYXgoJCRzY29wZS5kaXJ0eS5sZW5ndGgsIGxldHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRbaV0gPSAkJHNjb3BlLmRpcnR5W2ldIHwgbGV0c1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICQkc2NvcGUuZGlydHkgfCBsZXRzO1xuICAgIH1cbiAgICByZXR1cm4gJCRzY29wZS5kaXJ0eTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZV9zbG90X2Jhc2Uoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIHNsb3RfY2hhbmdlcywgZ2V0X3Nsb3RfY29udGV4dF9mbikge1xuICAgIGlmIChzbG90X2NoYW5nZXMpIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jb250ZXh0ID0gZ2V0X3Nsb3RfY29udGV4dChzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZ2V0X3Nsb3RfY29udGV4dF9mbik7XG4gICAgICAgIHNsb3QucChzbG90X2NvbnRleHQsIHNsb3RfY2hhbmdlcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3Qoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgY29uc3Qgc2xvdF9jaGFuZ2VzID0gZ2V0X3Nsb3RfY2hhbmdlcyhzbG90X2RlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuKTtcbiAgICB1cGRhdGVfc2xvdF9iYXNlKHNsb3QsIHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBzbG90X2NoYW5nZXMsIGdldF9zbG90X2NvbnRleHRfZm4pO1xufVxuZnVuY3Rpb24gZ2V0X2FsbF9kaXJ0eV9mcm9tX3Njb3BlKCQkc2NvcGUpIHtcbiAgICBpZiAoJCRzY29wZS5jdHgubGVuZ3RoID4gMzIpIHtcbiAgICAgICAgY29uc3QgZGlydHkgPSBbXTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gJCRzY29wZS5jdHgubGVuZ3RoIC8gMzI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGRpcnR5W2ldID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcnR5O1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5mdW5jdGlvbiBleGNsdWRlX2ludGVybmFsX3Byb3BzKHByb3BzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIHByb3BzKVxuICAgICAgICBpZiAoa1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdWx0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVfcmVzdF9wcm9wcyhwcm9wcywga2V5cykge1xuICAgIGNvbnN0IHJlc3QgPSB7fTtcbiAgICBrZXlzID0gbmV3IFNldChrZXlzKTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmICgha2V5cy5oYXMoaykgJiYga1swXSAhPT0gJyQnKVxuICAgICAgICAgICAgcmVzdFtrXSA9IHByb3BzW2tdO1xuICAgIHJldHVybiByZXN0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9zbG90cyhzbG90cykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNsb3RzKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG9uY2UoZm4pIHtcbiAgICBsZXQgcmFuID0gZmFsc2U7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIGlmIChyYW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJhbiA9IHRydWU7XG4gICAgICAgIGZuLmNhbGwodGhpcywgLi4uYXJncyk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG51bGxfdG9fZW1wdHkodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG59XG5mdW5jdGlvbiBzZXRfc3RvcmVfdmFsdWUoc3RvcmUsIHJldCwgdmFsdWUpIHtcbiAgICBzdG9yZS5zZXQodmFsdWUpO1xuICAgIHJldHVybiByZXQ7XG59XG5jb25zdCBoYXNfcHJvcCA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xuZnVuY3Rpb24gYWN0aW9uX2Rlc3Ryb3llcihhY3Rpb25fcmVzdWx0KSB7XG4gICAgcmV0dXJuIGFjdGlvbl9yZXN1bHQgJiYgaXNfZnVuY3Rpb24oYWN0aW9uX3Jlc3VsdC5kZXN0cm95KSA/IGFjdGlvbl9yZXN1bHQuZGVzdHJveSA6IG5vb3A7XG59XG5cbmNvbnN0IGlzX2NsaWVudCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xubGV0IG5vdyA9IGlzX2NsaWVudFxuICAgID8gKCkgPT4gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpXG4gICAgOiAoKSA9PiBEYXRlLm5vdygpO1xubGV0IHJhZiA9IGlzX2NsaWVudCA/IGNiID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYikgOiBub29wO1xuLy8gdXNlZCBpbnRlcm5hbGx5IGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBzZXRfbm93KGZuKSB7XG4gICAgbm93ID0gZm47XG59XG5mdW5jdGlvbiBzZXRfcmFmKGZuKSB7XG4gICAgcmFmID0gZm47XG59XG5cbmNvbnN0IHRhc2tzID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gcnVuX3Rhc2tzKG5vdykge1xuICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGlmICghdGFzay5jKG5vdykpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgICAgIHRhc2suZigpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHRhc2tzLnNpemUgIT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xufVxuLyoqXG4gKiBGb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5IVxuICovXG5mdW5jdGlvbiBjbGVhcl9sb29wcygpIHtcbiAgICB0YXNrcy5jbGVhcigpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhc2sgdGhhdCBydW5zIG9uIGVhY2ggcmFmIGZyYW1lXG4gKiB1bnRpbCBpdCByZXR1cm5zIGEgZmFsc3kgdmFsdWUgb3IgaXMgYWJvcnRlZFxuICovXG5mdW5jdGlvbiBsb29wKGNhbGxiYWNrKSB7XG4gICAgbGV0IHRhc2s7XG4gICAgaWYgKHRhc2tzLnNpemUgPT09IDApXG4gICAgICAgIHJhZihydW5fdGFza3MpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb21pc2U6IG5ldyBQcm9taXNlKGZ1bGZpbGwgPT4ge1xuICAgICAgICAgICAgdGFza3MuYWRkKHRhc2sgPSB7IGM6IGNhbGxiYWNrLCBmOiBmdWxmaWxsIH0pO1xuICAgICAgICB9KSxcbiAgICAgICAgYWJvcnQoKSB7XG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzayk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBUcmFjayB3aGljaCBub2RlcyBhcmUgY2xhaW1lZCBkdXJpbmcgaHlkcmF0aW9uLiBVbmNsYWltZWQgbm9kZXMgY2FuIHRoZW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBET01cbi8vIGF0IHRoZSBlbmQgb2YgaHlkcmF0aW9uIHdpdGhvdXQgdG91Y2hpbmcgdGhlIHJlbWFpbmluZyBub2Rlcy5cbmxldCBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbmZ1bmN0aW9uIHN0YXJ0X2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSB0cnVlO1xufVxuZnVuY3Rpb24gZW5kX2h5ZHJhdGluZygpIHtcbiAgICBpc19oeWRyYXRpbmcgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwcGVyX2JvdW5kKGxvdywgaGlnaCwga2V5LCB2YWx1ZSkge1xuICAgIC8vIFJldHVybiBmaXJzdCBpbmRleCBvZiB2YWx1ZSBsYXJnZXIgdGhhbiBpbnB1dCB2YWx1ZSBpbiB0aGUgcmFuZ2UgW2xvdywgaGlnaClcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgICBjb25zdCBtaWQgPSBsb3cgKyAoKGhpZ2ggLSBsb3cpID4+IDEpO1xuICAgICAgICBpZiAoa2V5KG1pZCkgPD0gdmFsdWUpIHtcbiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb3c7XG59XG5mdW5jdGlvbiBpbml0X2h5ZHJhdGUodGFyZ2V0KSB7XG4gICAgaWYgKHRhcmdldC5oeWRyYXRlX2luaXQpXG4gICAgICAgIHJldHVybjtcbiAgICB0YXJnZXQuaHlkcmF0ZV9pbml0ID0gdHJ1ZTtcbiAgICAvLyBXZSBrbm93IHRoYXQgYWxsIGNoaWxkcmVuIGhhdmUgY2xhaW1fb3JkZXIgdmFsdWVzIHNpbmNlIHRoZSB1bmNsYWltZWQgaGF2ZSBiZWVuIGRldGFjaGVkIGlmIHRhcmdldCBpcyBub3QgPGhlYWQ+XG4gICAgbGV0IGNoaWxkcmVuID0gdGFyZ2V0LmNoaWxkTm9kZXM7XG4gICAgLy8gSWYgdGFyZ2V0IGlzIDxoZWFkPiwgdGhlcmUgbWF5IGJlIGNoaWxkcmVuIHdpdGhvdXQgY2xhaW1fb3JkZXJcbiAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lID09PSAnSEVBRCcpIHtcbiAgICAgICAgY29uc3QgbXlDaGlsZHJlbiA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAobm9kZS5jbGFpbV9vcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbXlDaGlsZHJlbi5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuID0gbXlDaGlsZHJlbjtcbiAgICB9XG4gICAgLypcbiAgICAqIFJlb3JkZXIgY2xhaW1lZCBjaGlsZHJlbiBvcHRpbWFsbHkuXG4gICAgKiBXZSBjYW4gcmVvcmRlciBjbGFpbWVkIGNoaWxkcmVuIG9wdGltYWxseSBieSBmaW5kaW5nIHRoZSBsb25nZXN0IHN1YnNlcXVlbmNlIG9mXG4gICAgKiBub2RlcyB0aGF0IGFyZSBhbHJlYWR5IGNsYWltZWQgaW4gb3JkZXIgYW5kIG9ubHkgbW92aW5nIHRoZSByZXN0LiBUaGUgbG9uZ2VzdFxuICAgICogc3Vic2VxdWVuY2Ugc3Vic2VxdWVuY2Ugb2Ygbm9kZXMgdGhhdCBhcmUgY2xhaW1lZCBpbiBvcmRlciBjYW4gYmUgZm91bmQgYnlcbiAgICAqIGNvbXB1dGluZyB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIC5jbGFpbV9vcmRlciB2YWx1ZXMuXG4gICAgKlxuICAgICogVGhpcyBhbGdvcml0aG0gaXMgb3B0aW1hbCBpbiBnZW5lcmF0aW5nIHRoZSBsZWFzdCBhbW91bnQgb2YgcmVvcmRlciBvcGVyYXRpb25zXG4gICAgKiBwb3NzaWJsZS5cbiAgICAqXG4gICAgKiBQcm9vZjpcbiAgICAqIFdlIGtub3cgdGhhdCwgZ2l2ZW4gYSBzZXQgb2YgcmVvcmRlcmluZyBvcGVyYXRpb25zLCB0aGUgbm9kZXMgdGhhdCBkbyBub3QgbW92ZVxuICAgICogYWx3YXlzIGZvcm0gYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSwgc2luY2UgdGhleSBkbyBub3QgbW92ZSBhbW9uZyBlYWNoIG90aGVyXG4gICAgKiBtZWFuaW5nIHRoYXQgdGhleSBtdXN0IGJlIGFscmVhZHkgb3JkZXJlZCBhbW9uZyBlYWNoIG90aGVyLiBUaHVzLCB0aGUgbWF4aW1hbFxuICAgICogc2V0IG9mIG5vZGVzIHRoYXQgZG8gbm90IG1vdmUgZm9ybSBhIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZS5cbiAgICAqL1xuICAgIC8vIENvbXB1dGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlXG4gICAgLy8gbTogc3Vic2VxdWVuY2UgbGVuZ3RoIGogPT4gaW5kZXggayBvZiBzbWFsbGVzdCB2YWx1ZSB0aGF0IGVuZHMgYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBsZW5ndGggalxuICAgIGNvbnN0IG0gPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGggKyAxKTtcbiAgICAvLyBQcmVkZWNlc3NvciBpbmRpY2VzICsgMVxuICAgIGNvbnN0IHAgPSBuZXcgSW50MzJBcnJheShjaGlsZHJlbi5sZW5ndGgpO1xuICAgIG1bMF0gPSAtMTtcbiAgICBsZXQgbG9uZ2VzdCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gY2hpbGRyZW5baV0uY2xhaW1fb3JkZXI7XG4gICAgICAgIC8vIEZpbmQgdGhlIGxhcmdlc3Qgc3Vic2VxdWVuY2UgbGVuZ3RoIHN1Y2ggdGhhdCBpdCBlbmRzIGluIGEgdmFsdWUgbGVzcyB0aGFuIG91ciBjdXJyZW50IHZhbHVlXG4gICAgICAgIC8vIHVwcGVyX2JvdW5kIHJldHVybnMgZmlyc3QgZ3JlYXRlciB2YWx1ZSwgc28gd2Ugc3VidHJhY3Qgb25lXG4gICAgICAgIC8vIHdpdGggZmFzdCBwYXRoIGZvciB3aGVuIHdlIGFyZSBvbiB0aGUgY3VycmVudCBsb25nZXN0IHN1YnNlcXVlbmNlXG4gICAgICAgIGNvbnN0IHNlcUxlbiA9ICgobG9uZ2VzdCA+IDAgJiYgY2hpbGRyZW5bbVtsb25nZXN0XV0uY2xhaW1fb3JkZXIgPD0gY3VycmVudCkgPyBsb25nZXN0ICsgMSA6IHVwcGVyX2JvdW5kKDEsIGxvbmdlc3QsIGlkeCA9PiBjaGlsZHJlblttW2lkeF1dLmNsYWltX29yZGVyLCBjdXJyZW50KSkgLSAxO1xuICAgICAgICBwW2ldID0gbVtzZXFMZW5dICsgMTtcbiAgICAgICAgY29uc3QgbmV3TGVuID0gc2VxTGVuICsgMTtcbiAgICAgICAgLy8gV2UgY2FuIGd1YXJhbnRlZSB0aGF0IGN1cnJlbnQgaXMgdGhlIHNtYWxsZXN0IHZhbHVlLiBPdGhlcndpc2UsIHdlIHdvdWxkIGhhdmUgZ2VuZXJhdGVkIGEgbG9uZ2VyIHNlcXVlbmNlLlxuICAgICAgICBtW25ld0xlbl0gPSBpO1xuICAgICAgICBsb25nZXN0ID0gTWF0aC5tYXgobmV3TGVuLCBsb25nZXN0KTtcbiAgICB9XG4gICAgLy8gVGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBub2RlcyAoaW5pdGlhbGx5IHJldmVyc2VkKVxuICAgIGNvbnN0IGxpcyA9IFtdO1xuICAgIC8vIFRoZSByZXN0IG9mIHRoZSBub2Rlcywgbm9kZXMgdGhhdCB3aWxsIGJlIG1vdmVkXG4gICAgY29uc3QgdG9Nb3ZlID0gW107XG4gICAgbGV0IGxhc3QgPSBjaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgIGZvciAobGV0IGN1ciA9IG1bbG9uZ2VzdF0gKyAxOyBjdXIgIT0gMDsgY3VyID0gcFtjdXIgLSAxXSkge1xuICAgICAgICBsaXMucHVzaChjaGlsZHJlbltjdXIgLSAxXSk7XG4gICAgICAgIGZvciAoOyBsYXN0ID49IGN1cjsgbGFzdC0tKSB7XG4gICAgICAgICAgICB0b01vdmUucHVzaChjaGlsZHJlbltsYXN0XSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdC0tO1xuICAgIH1cbiAgICBmb3IgKDsgbGFzdCA+PSAwOyBsYXN0LS0pIHtcbiAgICAgICAgdG9Nb3ZlLnB1c2goY2hpbGRyZW5bbGFzdF0pO1xuICAgIH1cbiAgICBsaXMucmV2ZXJzZSgpO1xuICAgIC8vIFdlIHNvcnQgdGhlIG5vZGVzIGJlaW5nIG1vdmVkIHRvIGd1YXJhbnRlZSB0aGF0IHRoZWlyIGluc2VydGlvbiBvcmRlciBtYXRjaGVzIHRoZSBjbGFpbSBvcmRlclxuICAgIHRvTW92ZS5zb3J0KChhLCBiKSA9PiBhLmNsYWltX29yZGVyIC0gYi5jbGFpbV9vcmRlcik7XG4gICAgLy8gRmluYWxseSwgd2UgbW92ZSB0aGUgbm9kZXNcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IDA7IGkgPCB0b01vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgd2hpbGUgKGogPCBsaXMubGVuZ3RoICYmIHRvTW92ZVtpXS5jbGFpbV9vcmRlciA+PSBsaXNbal0uY2xhaW1fb3JkZXIpIHtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbmNob3IgPSBqIDwgbGlzLmxlbmd0aCA/IGxpc1tqXSA6IG51bGw7XG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUodG9Nb3ZlW2ldLCBhbmNob3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFwcGVuZCh0YXJnZXQsIG5vZGUpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfc3R5bGVzKHRhcmdldCwgc3R5bGVfc2hlZXRfaWQsIHN0eWxlcykge1xuICAgIGNvbnN0IGFwcGVuZF9zdHlsZXNfdG8gPSBnZXRfcm9vdF9mb3Jfc3R5bGUodGFyZ2V0KTtcbiAgICBpZiAoIWFwcGVuZF9zdHlsZXNfdG8uZ2V0RWxlbWVudEJ5SWQoc3R5bGVfc2hlZXRfaWQpKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGUuaWQgPSBzdHlsZV9zaGVldF9pZDtcbiAgICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBzdHlsZXM7XG4gICAgICAgIGFwcGVuZF9zdHlsZXNoZWV0KGFwcGVuZF9zdHlsZXNfdG8sIHN0eWxlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSkge1xuICAgIGlmICghbm9kZSlcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIGNvbnN0IHJvb3QgPSBub2RlLmdldFJvb3ROb2RlID8gbm9kZS5nZXRSb290Tm9kZSgpIDogbm9kZS5vd25lckRvY3VtZW50O1xuICAgIGlmIChyb290ICYmIHJvb3QuaG9zdCkge1xuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGUub3duZXJEb2N1bWVudDtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0KG5vZGUpIHtcbiAgICBjb25zdCBzdHlsZV9lbGVtZW50ID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICBhcHBlbmRfc3R5bGVzaGVldChnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSksIHN0eWxlX2VsZW1lbnQpO1xuICAgIHJldHVybiBzdHlsZV9lbGVtZW50LnNoZWV0O1xufVxuZnVuY3Rpb24gYXBwZW5kX3N0eWxlc2hlZXQobm9kZSwgc3R5bGUpIHtcbiAgICBhcHBlbmQobm9kZS5oZWFkIHx8IG5vZGUsIHN0eWxlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKSB7XG4gICAgaWYgKGlzX2h5ZHJhdGluZykge1xuICAgICAgICBpbml0X2h5ZHJhdGUodGFyZ2V0KTtcbiAgICAgICAgaWYgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9PT0gdW5kZWZpbmVkKSB8fCAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkICE9PSBudWxsKSAmJiAodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQucGFyZW50RWxlbWVudCAhPT0gdGFyZ2V0KSkpIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gdGFyZ2V0LmZpcnN0Q2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2tpcCBub2RlcyBvZiB1bmRlZmluZWQgb3JkZXJpbmdcbiAgICAgICAgd2hpbGUgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCAhPT0gbnVsbCkgJiYgKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLmNsYWltX29yZGVyID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlICE9PSB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCkge1xuICAgICAgICAgICAgLy8gV2Ugb25seSBpbnNlcnQgaWYgdGhlIG9yZGVyaW5nIG9mIHRoaXMgbm9kZSBzaG91bGQgYmUgbW9kaWZpZWQgb3IgdGhlIHBhcmVudCBub2RlIGlzIG5vdCB0YXJnZXRcbiAgICAgICAgICAgIGlmIChub2RlLmNsYWltX29yZGVyICE9PSB1bmRlZmluZWQgfHwgbm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCB8fCBub2RlLm5leHRTaWJsaW5nICE9PSBudWxsKSB7XG4gICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIGFuY2hvciB8fCBudWxsKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9oeWRyYXRpb24odGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBpZiAoaXNfaHlkcmF0aW5nICYmICFhbmNob3IpIHtcbiAgICAgICAgYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCB8fCBub2RlLm5leHRTaWJsaW5nICE9IGFuY2hvcikge1xuICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIGFuY2hvciB8fCBudWxsKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2gobm9kZSkge1xuICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfZWFjaChpdGVyYXRpb25zLCBkZXRhY2hpbmcpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGl0ZXJhdGlvbnNbaV0pXG4gICAgICAgICAgICBpdGVyYXRpb25zW2ldLmQoZGV0YWNoaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBlbGVtZW50KG5hbWUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcbn1cbmZ1bmN0aW9uIGVsZW1lbnRfaXMobmFtZSwgaXMpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lLCB7IGlzIH0pO1xufVxuZnVuY3Rpb24gb2JqZWN0X3dpdGhvdXRfcHJvcGVydGllcyhvYmosIGV4Y2x1ZGUpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNfcHJvcChvYmosIGspXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAmJiBleGNsdWRlLmluZGV4T2YoaykgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB0YXJnZXRba10gPSBvYmpba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIHN2Z19lbGVtZW50KG5hbWUpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIG5hbWUpO1xufVxuZnVuY3Rpb24gdGV4dChkYXRhKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRhdGEpO1xufVxuZnVuY3Rpb24gc3BhY2UoKSB7XG4gICAgcmV0dXJuIHRleHQoJyAnKTtcbn1cbmZ1bmN0aW9uIGVtcHR5KCkge1xuICAgIHJldHVybiB0ZXh0KCcnKTtcbn1cbmZ1bmN0aW9uIGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiBwcmV2ZW50X2RlZmF1bHQoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBzdG9wX3Byb3BhZ2F0aW9uKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNlbGYoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcylcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cnVzdGVkKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC5pc1RydXN0ZWQpXG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgZWxzZSBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKSAhPT0gdmFsdWUpXG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gc2V0X2F0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcykge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBkZXNjcmlwdG9ycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG5vZGUuX19wcm90b19fKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuY3NzVGV4dCA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdfX3ZhbHVlJykge1xuICAgICAgICAgICAgbm9kZS52YWx1ZSA9IG5vZGVba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZXNjcmlwdG9yc1trZXldICYmIGRlc2NyaXB0b3JzW2tleV0uc2V0KSB7XG4gICAgICAgICAgICBub2RlW2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhdHRyKG5vZGUsIGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9zdmdfYXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBhdHRyKG5vZGUsIGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YShub2RlLCBwcm9wLCB2YWx1ZSkge1xuICAgIGlmIChwcm9wIGluIG5vZGUpIHtcbiAgICAgICAgbm9kZVtwcm9wXSA9IHR5cGVvZiBub2RlW3Byb3BdID09PSAnYm9vbGVhbicgJiYgdmFsdWUgPT09ICcnID8gdHJ1ZSA6IHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXR0cihub2RlLCBwcm9wLCB2YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24geGxpbmtfYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gZ2V0X2JpbmRpbmdfZ3JvdXBfdmFsdWUoZ3JvdXAsIF9fdmFsdWUsIGNoZWNrZWQpIHtcbiAgICBjb25zdCB2YWx1ZSA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3VwLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChncm91cFtpXS5jaGVja2VkKVxuICAgICAgICAgICAgdmFsdWUuYWRkKGdyb3VwW2ldLl9fdmFsdWUpO1xuICAgIH1cbiAgICBpZiAoIWNoZWNrZWQpIHtcbiAgICAgICAgdmFsdWUuZGVsZXRlKF9fdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gQXJyYXkuZnJvbSh2YWx1ZSk7XG59XG5mdW5jdGlvbiB0b19udW1iZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gbnVsbCA6ICt2YWx1ZTtcbn1cbmZ1bmN0aW9uIHRpbWVfcmFuZ2VzX3RvX2FycmF5KHJhbmdlcykge1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYXJyYXkucHVzaCh7IHN0YXJ0OiByYW5nZXMuc3RhcnQoaSksIGVuZDogcmFuZ2VzLmVuZChpKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuZnVuY3Rpb24gY2hpbGRyZW4oZWxlbWVudCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGVsZW1lbnQuY2hpbGROb2Rlcyk7XG59XG5mdW5jdGlvbiBpbml0X2NsYWltX2luZm8obm9kZXMpIHtcbiAgICBpZiAobm9kZXMuY2xhaW1faW5mbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5vZGVzLmNsYWltX2luZm8gPSB7IGxhc3RfaW5kZXg6IDAsIHRvdGFsX2NsYWltZWQ6IDAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbGFpbV9ub2RlKG5vZGVzLCBwcmVkaWNhdGUsIHByb2Nlc3NOb2RlLCBjcmVhdGVOb2RlLCBkb250VXBkYXRlTGFzdEluZGV4ID0gZmFsc2UpIHtcbiAgICAvLyBUcnkgdG8gZmluZCBub2RlcyBpbiBhbiBvcmRlciBzdWNoIHRoYXQgd2UgbGVuZ3RoZW4gdGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZVxuICAgIGluaXRfY2xhaW1faW5mbyhub2Rlcyk7XG4gICAgY29uc3QgcmVzdWx0Tm9kZSA9ICgoKSA9PiB7XG4gICAgICAgIC8vIFdlIGZpcnN0IHRyeSB0byBmaW5kIGFuIGVsZW1lbnQgYWZ0ZXIgdGhlIHByZXZpb3VzIG9uZVxuICAgICAgICBmb3IgKGxldCBpID0gbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4OyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHByb2Nlc3NOb2RlKG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzW2ldID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZG9udFVwZGF0ZUxhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIHdlIHRyeSB0byBmaW5kIG9uZSBiZWZvcmVcbiAgICAgICAgLy8gV2UgaXRlcmF0ZSBpbiByZXZlcnNlIHNvIHRoYXQgd2UgZG9uJ3QgZ28gdG9vIGZhciBiYWNrXG4gICAgICAgIGZvciAobGV0IGkgPSBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShub2RlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gcHJvY2Vzc05vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0gPSByZXBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkb250VXBkYXRlTGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2luY2Ugd2Ugc3BsaWNlZCBiZWZvcmUgdGhlIGxhc3RfaW5kZXgsIHdlIGRlY3JlYXNlIGl0XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBmaW5kIGFueSBtYXRjaGluZyBub2RlLCB3ZSBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgIHJldHVybiBjcmVhdGVOb2RlKCk7XG4gICAgfSkoKTtcbiAgICByZXN1bHROb2RlLmNsYWltX29yZGVyID0gbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkO1xuICAgIG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZCArPSAxO1xuICAgIHJldHVybiByZXN1bHROb2RlO1xufVxuZnVuY3Rpb24gY2xhaW1fZWxlbWVudF9iYXNlKG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzLCBjcmVhdGVfZWxlbWVudCkge1xuICAgIHJldHVybiBjbGFpbV9ub2RlKG5vZGVzLCAobm9kZSkgPT4gbm9kZS5ub2RlTmFtZSA9PT0gbmFtZSwgKG5vZGUpID0+IHtcbiAgICAgICAgY29uc3QgcmVtb3ZlID0gW107XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbm9kZS5hdHRyaWJ1dGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBub2RlLmF0dHJpYnV0ZXNbal07XG4gICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlLnB1c2goYXR0cmlidXRlLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbW92ZS5mb3JFYWNoKHYgPT4gbm9kZS5yZW1vdmVBdHRyaWJ1dGUodikpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sICgpID0+IGNyZWF0ZV9lbGVtZW50KG5hbWUpKTtcbn1cbmZ1bmN0aW9uIGNsYWltX2VsZW1lbnQobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICByZXR1cm4gY2xhaW1fZWxlbWVudF9iYXNlKG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzLCBlbGVtZW50KTtcbn1cbmZ1bmN0aW9uIGNsYWltX3N2Z19lbGVtZW50KG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIGNsYWltX2VsZW1lbnRfYmFzZShub2RlcywgbmFtZSwgYXR0cmlidXRlcywgc3ZnX2VsZW1lbnQpO1xufVxuZnVuY3Rpb24gY2xhaW1fdGV4dChub2RlcywgZGF0YSkge1xuICAgIHJldHVybiBjbGFpbV9ub2RlKG5vZGVzLCAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gMywgKG5vZGUpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YVN0ciA9ICcnICsgZGF0YTtcbiAgICAgICAgaWYgKG5vZGUuZGF0YS5zdGFydHNXaXRoKGRhdGFTdHIpKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5kYXRhLmxlbmd0aCAhPT0gZGF0YVN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5zcGxpdFRleHQoZGF0YVN0ci5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gZGF0YVN0cjtcbiAgICAgICAgfVxuICAgIH0sICgpID0+IHRleHQoZGF0YSksIHRydWUgLy8gVGV4dCBub2RlcyBzaG91bGQgbm90IHVwZGF0ZSBsYXN0IGluZGV4IHNpbmNlIGl0IGlzIGxpa2VseSBub3Qgd29ydGggaXQgdG8gZWxpbWluYXRlIGFuIGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2YgYWN0dWFsIGVsZW1lbnRzXG4gICAgKTtcbn1cbmZ1bmN0aW9uIGNsYWltX3NwYWNlKG5vZGVzKSB7XG4gICAgcmV0dXJuIGNsYWltX3RleHQobm9kZXMsICcgJyk7XG59XG5mdW5jdGlvbiBmaW5kX2NvbW1lbnQobm9kZXMsIHRleHQsIHN0YXJ0KSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgbm9kZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBjb21tZW50IG5vZGUgKi8gJiYgbm9kZS50ZXh0Q29udGVudC50cmltKCkgPT09IHRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2Rlcy5sZW5ndGg7XG59XG5mdW5jdGlvbiBjbGFpbV9odG1sX3RhZyhub2RlcywgaXNfc3ZnKSB7XG4gICAgLy8gZmluZCBodG1sIG9wZW5pbmcgdGFnXG4gICAgY29uc3Qgc3RhcnRfaW5kZXggPSBmaW5kX2NvbW1lbnQobm9kZXMsICdIVE1MX1RBR19TVEFSVCcsIDApO1xuICAgIGNvbnN0IGVuZF9pbmRleCA9IGZpbmRfY29tbWVudChub2RlcywgJ0hUTUxfVEFHX0VORCcsIHN0YXJ0X2luZGV4KTtcbiAgICBpZiAoc3RhcnRfaW5kZXggPT09IGVuZF9pbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24odW5kZWZpbmVkLCBpc19zdmcpO1xuICAgIH1cbiAgICBpbml0X2NsYWltX2luZm8obm9kZXMpO1xuICAgIGNvbnN0IGh0bWxfdGFnX25vZGVzID0gbm9kZXMuc3BsaWNlKHN0YXJ0X2luZGV4LCBlbmRfaW5kZXggLSBzdGFydF9pbmRleCArIDEpO1xuICAgIGRldGFjaChodG1sX3RhZ19ub2Rlc1swXSk7XG4gICAgZGV0YWNoKGh0bWxfdGFnX25vZGVzW2h0bWxfdGFnX25vZGVzLmxlbmd0aCAtIDFdKTtcbiAgICBjb25zdCBjbGFpbWVkX25vZGVzID0gaHRtbF90YWdfbm9kZXMuc2xpY2UoMSwgaHRtbF90YWdfbm9kZXMubGVuZ3RoIC0gMSk7XG4gICAgZm9yIChjb25zdCBuIG9mIGNsYWltZWRfbm9kZXMpIHtcbiAgICAgICAgbi5jbGFpbV9vcmRlciA9IG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZDtcbiAgICAgICAgbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkICs9IDE7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSHRtbFRhZ0h5ZHJhdGlvbihjbGFpbWVkX25vZGVzLCBpc19zdmcpO1xufVxuZnVuY3Rpb24gc2V0X2RhdGEodGV4dCwgZGF0YSkge1xuICAgIGRhdGEgPSAnJyArIGRhdGE7XG4gICAgaWYgKHRleHQud2hvbGVUZXh0ICE9PSBkYXRhKVxuICAgICAgICB0ZXh0LmRhdGEgPSBkYXRhO1xufVxuZnVuY3Rpb24gc2V0X2lucHV0X3ZhbHVlKGlucHV0LCB2YWx1ZSkge1xuICAgIGlucHV0LnZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG59XG5mdW5jdGlvbiBzZXRfaW5wdXRfdHlwZShpbnB1dCwgdHlwZSkge1xuICAgIHRyeSB7XG4gICAgICAgIGlucHV0LnR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X3N0eWxlKG5vZGUsIGtleSwgdmFsdWUsIGltcG9ydGFudCkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICBub2RlLnN0eWxlLnJlbW92ZVByb3BlcnR5KGtleSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBub2RlLnN0eWxlLnNldFByb3BlcnR5KGtleSwgdmFsdWUsIGltcG9ydGFudCA/ICdpbXBvcnRhbnQnIDogJycpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF9vcHRpb24oc2VsZWN0LCB2YWx1ZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbaV07XG4gICAgICAgIGlmIChvcHRpb24uX192YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0LnNlbGVjdGVkSW5kZXggPSAtMTsgLy8gbm8gb3B0aW9uIHNob3VsZCBiZSBzZWxlY3RlZFxufVxuZnVuY3Rpb24gc2VsZWN0X29wdGlvbnMoc2VsZWN0LCB2YWx1ZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbaV07XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IH52YWx1ZS5pbmRleE9mKG9wdGlvbi5fX3ZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3RfdmFsdWUoc2VsZWN0KSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRfb3B0aW9uID0gc2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJzpjaGVja2VkJykgfHwgc2VsZWN0Lm9wdGlvbnNbMF07XG4gICAgcmV0dXJuIHNlbGVjdGVkX29wdGlvbiAmJiBzZWxlY3RlZF9vcHRpb24uX192YWx1ZTtcbn1cbmZ1bmN0aW9uIHNlbGVjdF9tdWx0aXBsZV92YWx1ZShzZWxlY3QpIHtcbiAgICByZXR1cm4gW10ubWFwLmNhbGwoc2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJzpjaGVja2VkJyksIG9wdGlvbiA9PiBvcHRpb24uX192YWx1ZSk7XG59XG4vLyB1bmZvcnR1bmF0ZWx5IHRoaXMgY2FuJ3QgYmUgYSBjb25zdGFudCBhcyB0aGF0IHdvdWxkbid0IGJlIHRyZWUtc2hha2VhYmxlXG4vLyBzbyB3ZSBjYWNoZSB0aGUgcmVzdWx0IGluc3RlYWRcbmxldCBjcm9zc29yaWdpbjtcbmZ1bmN0aW9uIGlzX2Nyb3Nzb3JpZ2luKCkge1xuICAgIGlmIChjcm9zc29yaWdpbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNyb3Nzb3JpZ2luID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnBhcmVudCkge1xuICAgICAgICAgICAgICAgIHZvaWQgd2luZG93LnBhcmVudC5kb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNyb3Nzb3JpZ2luID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3Jvc3NvcmlnaW47XG59XG5mdW5jdGlvbiBhZGRfcmVzaXplX2xpc3RlbmVyKG5vZGUsIGZuKSB7XG4gICAgY29uc3QgY29tcHV0ZWRfc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgIGlmIChjb21wdXRlZF9zdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgfVxuICAgIGNvbnN0IGlmcmFtZSA9IGVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgJyArXG4gICAgICAgICdvdmVyZmxvdzogaGlkZGVuOyBib3JkZXI6IDA7IG9wYWNpdHk6IDA7IHBvaW50ZXItZXZlbnRzOiBub25lOyB6LWluZGV4OiAtMTsnKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgaWZyYW1lLnRhYkluZGV4ID0gLTE7XG4gICAgY29uc3QgY3Jvc3NvcmlnaW4gPSBpc19jcm9zc29yaWdpbigpO1xuICAgIGxldCB1bnN1YnNjcmliZTtcbiAgICBpZiAoY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgaWZyYW1lLnNyYyA9IFwiZGF0YTp0ZXh0L2h0bWwsPHNjcmlwdD5vbnJlc2l6ZT1mdW5jdGlvbigpe3BhcmVudC5wb3N0TWVzc2FnZSgwLCcqJyl9PC9zY3JpcHQ+XCI7XG4gICAgICAgIHVuc3Vic2NyaWJlID0gbGlzdGVuKHdpbmRvdywgJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGlmcmFtZS5jb250ZW50V2luZG93KVxuICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWZyYW1lLnNyYyA9ICdhYm91dDpibGFuayc7XG4gICAgICAgIGlmcmFtZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSA9IGxpc3RlbihpZnJhbWUuY29udGVudFdpbmRvdywgJ3Jlc2l6ZScsIGZuKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXBwZW5kKG5vZGUsIGlmcmFtZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKGNyb3Nzb3JpZ2luKSB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVuc3Vic2NyaWJlICYmIGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGRldGFjaChpZnJhbWUpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0b2dnbGVfY2xhc3MoZWxlbWVudCwgbmFtZSwgdG9nZ2xlKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3RbdG9nZ2xlID8gJ2FkZCcgOiAncmVtb3ZlJ10obmFtZSk7XG59XG5mdW5jdGlvbiBjdXN0b21fZXZlbnQodHlwZSwgZGV0YWlsLCB7IGJ1YmJsZXMgPSBmYWxzZSwgY2FuY2VsYWJsZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGNvbnN0IGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBidWJibGVzLCBjYW5jZWxhYmxlLCBkZXRhaWwpO1xuICAgIHJldHVybiBlO1xufVxuZnVuY3Rpb24gcXVlcnlfc2VsZWN0b3JfYWxsKHNlbGVjdG9yLCBwYXJlbnQgPSBkb2N1bWVudC5ib2R5KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20ocGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbn1cbmNsYXNzIEh0bWxUYWcge1xuICAgIGNvbnN0cnVjdG9yKGlzX3N2ZyA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuaXNfc3ZnID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNfc3ZnID0gaXNfc3ZnO1xuICAgICAgICB0aGlzLmUgPSB0aGlzLm4gPSBudWxsO1xuICAgIH1cbiAgICBjKGh0bWwpIHtcbiAgICAgICAgdGhpcy5oKGh0bWwpO1xuICAgIH1cbiAgICBtKGh0bWwsIHRhcmdldCwgYW5jaG9yID0gbnVsbCkge1xuICAgICAgICBpZiAoIXRoaXMuZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNfc3ZnKVxuICAgICAgICAgICAgICAgIHRoaXMuZSA9IHN2Z19lbGVtZW50KHRhcmdldC5ub2RlTmFtZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5lID0gZWxlbWVudCh0YXJnZXQubm9kZU5hbWUpO1xuICAgICAgICAgICAgdGhpcy50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5jKGh0bWwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaShhbmNob3IpO1xuICAgIH1cbiAgICBoKGh0bWwpIHtcbiAgICAgICAgdGhpcy5lLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgIHRoaXMubiA9IEFycmF5LmZyb20odGhpcy5lLmNoaWxkTm9kZXMpO1xuICAgIH1cbiAgICBpKGFuY2hvcikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaW5zZXJ0KHRoaXMudCwgdGhpcy5uW2ldLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHAoaHRtbCkge1xuICAgICAgICB0aGlzLmQoKTtcbiAgICAgICAgdGhpcy5oKGh0bWwpO1xuICAgICAgICB0aGlzLmkodGhpcy5hKTtcbiAgICB9XG4gICAgZCgpIHtcbiAgICAgICAgdGhpcy5uLmZvckVhY2goZGV0YWNoKTtcbiAgICB9XG59XG5jbGFzcyBIdG1sVGFnSHlkcmF0aW9uIGV4dGVuZHMgSHRtbFRhZyB7XG4gICAgY29uc3RydWN0b3IoY2xhaW1lZF9ub2RlcywgaXNfc3ZnID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIoaXNfc3ZnKTtcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICAgICAgdGhpcy5sID0gY2xhaW1lZF9ub2RlcztcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIGlmICh0aGlzLmwpIHtcbiAgICAgICAgICAgIHRoaXMubiA9IHRoaXMubDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLmMoaHRtbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaShhbmNob3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGluc2VydF9oeWRyYXRpb24odGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBhdHRyaWJ1dGVfdG9fb2JqZWN0KGF0dHJpYnV0ZXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHJlc3VsdFthdHRyaWJ1dGUubmFtZV0gPSBhdHRyaWJ1dGUudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBnZXRfY3VzdG9tX2VsZW1lbnRzX3Nsb3RzKGVsZW1lbnQpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBlbGVtZW50LmNoaWxkTm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICByZXN1bHRbbm9kZS5zbG90IHx8ICdkZWZhdWx0J10gPSB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIHdlIG5lZWQgdG8gc3RvcmUgdGhlIGluZm9ybWF0aW9uIGZvciBtdWx0aXBsZSBkb2N1bWVudHMgYmVjYXVzZSBhIFN2ZWx0ZSBhcHBsaWNhdGlvbiBjb3VsZCBhbHNvIGNvbnRhaW4gaWZyYW1lc1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3N2ZWx0ZWpzL3N2ZWx0ZS9pc3N1ZXMvMzYyNFxuY29uc3QgbWFuYWdlZF9zdHlsZXMgPSBuZXcgTWFwKCk7XG5sZXQgYWN0aXZlID0gMDtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL3N0cmluZy1oYXNoL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5mdW5jdGlvbiBoYXNoKHN0cikge1xuICAgIGxldCBoYXNoID0gNTM4MTtcbiAgICBsZXQgaSA9IHN0ci5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpIF4gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGhhc2ggPj4+IDA7XG59XG5mdW5jdGlvbiBjcmVhdGVfc3R5bGVfaW5mb3JtYXRpb24oZG9jLCBub2RlKSB7XG4gICAgY29uc3QgaW5mbyA9IHsgc3R5bGVzaGVldDogYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQobm9kZSksIHJ1bGVzOiB7fSB9O1xuICAgIG1hbmFnZWRfc3R5bGVzLnNldChkb2MsIGluZm8pO1xuICAgIHJldHVybiBpbmZvO1xufVxuZnVuY3Rpb24gY3JlYXRlX3J1bGUobm9kZSwgYSwgYiwgZHVyYXRpb24sIGRlbGF5LCBlYXNlLCBmbiwgdWlkID0gMCkge1xuICAgIGNvbnN0IHN0ZXAgPSAxNi42NjYgLyBkdXJhdGlvbjtcbiAgICBsZXQga2V5ZnJhbWVzID0gJ3tcXG4nO1xuICAgIGZvciAobGV0IHAgPSAwOyBwIDw9IDE7IHAgKz0gc3RlcCkge1xuICAgICAgICBjb25zdCB0ID0gYSArIChiIC0gYSkgKiBlYXNlKHApO1xuICAgICAgICBrZXlmcmFtZXMgKz0gcCAqIDEwMCArIGAleyR7Zm4odCwgMSAtIHQpfX1cXG5gO1xuICAgIH1cbiAgICBjb25zdCBydWxlID0ga2V5ZnJhbWVzICsgYDEwMCUgeyR7Zm4oYiwgMSAtIGIpfX1cXG59YDtcbiAgICBjb25zdCBuYW1lID0gYF9fc3ZlbHRlXyR7aGFzaChydWxlKX1fJHt1aWR9YDtcbiAgICBjb25zdCBkb2MgPSBnZXRfcm9vdF9mb3Jfc3R5bGUobm9kZSk7XG4gICAgY29uc3QgeyBzdHlsZXNoZWV0LCBydWxlcyB9ID0gbWFuYWdlZF9zdHlsZXMuZ2V0KGRvYykgfHwgY3JlYXRlX3N0eWxlX2luZm9ybWF0aW9uKGRvYywgbm9kZSk7XG4gICAgaWYgKCFydWxlc1tuYW1lXSkge1xuICAgICAgICBydWxlc1tuYW1lXSA9IHRydWU7XG4gICAgICAgIHN0eWxlc2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyAke25hbWV9ICR7cnVsZX1gLCBzdHlsZXNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIGNvbnN0IGFuaW1hdGlvbiA9IG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnO1xuICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gYCR7YW5pbWF0aW9uID8gYCR7YW5pbWF0aW9ufSwgYCA6ICcnfSR7bmFtZX0gJHtkdXJhdGlvbn1tcyBsaW5lYXIgJHtkZWxheX1tcyAxIGJvdGhgO1xuICAgIGFjdGl2ZSArPSAxO1xuICAgIHJldHVybiBuYW1lO1xufVxuZnVuY3Rpb24gZGVsZXRlX3J1bGUobm9kZSwgbmFtZSkge1xuICAgIGNvbnN0IHByZXZpb3VzID0gKG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnKS5zcGxpdCgnLCAnKTtcbiAgICBjb25zdCBuZXh0ID0gcHJldmlvdXMuZmlsdGVyKG5hbWVcbiAgICAgICAgPyBhbmltID0+IGFuaW0uaW5kZXhPZihuYW1lKSA8IDAgLy8gcmVtb3ZlIHNwZWNpZmljIGFuaW1hdGlvblxuICAgICAgICA6IGFuaW0gPT4gYW5pbS5pbmRleE9mKCdfX3N2ZWx0ZScpID09PSAtMSAvLyByZW1vdmUgYWxsIFN2ZWx0ZSBhbmltYXRpb25zXG4gICAgKTtcbiAgICBjb25zdCBkZWxldGVkID0gcHJldmlvdXMubGVuZ3RoIC0gbmV4dC5sZW5ndGg7XG4gICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5hbmltYXRpb24gPSBuZXh0LmpvaW4oJywgJyk7XG4gICAgICAgIGFjdGl2ZSAtPSBkZWxldGVkO1xuICAgICAgICBpZiAoIWFjdGl2ZSlcbiAgICAgICAgICAgIGNsZWFyX3J1bGVzKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYXJfcnVsZXMoKSB7XG4gICAgcmFmKCgpID0+IHtcbiAgICAgICAgaWYgKGFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbWFuYWdlZF9zdHlsZXMuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3R5bGVzaGVldCB9ID0gaW5mbztcbiAgICAgICAgICAgIGxldCBpID0gc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQuZGVsZXRlUnVsZShpKTtcbiAgICAgICAgICAgIGluZm8ucnVsZXMgPSB7fTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1hbmFnZWRfc3R5bGVzLmNsZWFyKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZV9hbmltYXRpb24obm9kZSwgZnJvbSwgZm4sIHBhcmFtcykge1xuICAgIGlmICghZnJvbSlcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgY29uc3QgdG8gPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChmcm9tLmxlZnQgPT09IHRvLmxlZnQgJiYgZnJvbS5yaWdodCA9PT0gdG8ucmlnaHQgJiYgZnJvbS50b3AgPT09IHRvLnRvcCAmJiBmcm9tLmJvdHRvbSA9PT0gdG8uYm90dG9tKVxuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86IHNob3VsZCB0aGlzIGJlIHNlcGFyYXRlZCBmcm9tIGRlc3RydWN0dXJpbmc/IE9yIHN0YXJ0L2VuZCBhZGRlZCB0byBwdWJsaWMgYXBpIGFuZCBkb2N1bWVudGF0aW9uP1xuICAgIHN0YXJ0OiBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheSwgXG4gICAgLy8gQHRzLWlnbm9yZSB0b2RvOlxuICAgIGVuZCA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbiwgdGljayA9IG5vb3AsIGNzcyB9ID0gZm4obm9kZSwgeyBmcm9tLCB0byB9LCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gdHJ1ZTtcbiAgICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICAgIGxldCBuYW1lO1xuICAgIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICBuYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMCwgMSwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZWxheSkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIG5hbWUpO1xuICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgaWYgKCFzdGFydGVkICYmIG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRlZCAmJiBub3cgPj0gZW5kKSB7XG4gICAgICAgICAgICB0aWNrKDEsIDApO1xuICAgICAgICAgICAgc3RvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcnVubmluZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgICAgICBjb25zdCBwID0gbm93IC0gc3RhcnRfdGltZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSAwICsgMSAqIGVhc2luZyhwIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgc3RhcnQoKTtcbiAgICB0aWNrKDAsIDEpO1xuICAgIHJldHVybiBzdG9wO1xufVxuZnVuY3Rpb24gZml4X3Bvc2l0aW9uKG5vZGUpIHtcbiAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgaWYgKHN0eWxlLnBvc2l0aW9uICE9PSAnYWJzb2x1dGUnICYmIHN0eWxlLnBvc2l0aW9uICE9PSAnZml4ZWQnKSB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gc3R5bGU7XG4gICAgICAgIGNvbnN0IGEgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgbm9kZS5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgYWRkX3RyYW5zZm9ybShub2RlLCBhKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhZGRfdHJhbnNmb3JtKG5vZGUsIGEpIHtcbiAgICBjb25zdCBiID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAoYS5sZWZ0ICE9PSBiLmxlZnQgfHwgYS50b3AgIT09IGIudG9wKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gc3R5bGUudHJhbnNmb3JtID09PSAnbm9uZScgPyAnJyA6IHN0eWxlLnRyYW5zZm9ybTtcbiAgICAgICAgbm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBgJHt0cmFuc2Zvcm19IHRyYW5zbGF0ZSgke2EubGVmdCAtIGIubGVmdH1weCwgJHthLnRvcCAtIGIudG9wfXB4KWA7XG4gICAgfVxufVxuXG5sZXQgY3VycmVudF9jb21wb25lbnQ7XG5mdW5jdGlvbiBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgY3VycmVudF9jb21wb25lbnQgPSBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBnZXRfY3VycmVudF9jb21wb25lbnQoKSB7XG4gICAgaWYgKCFjdXJyZW50X2NvbXBvbmVudClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGdW5jdGlvbiBjYWxsZWQgb3V0c2lkZSBjb21wb25lbnQgaW5pdGlhbGl6YXRpb24nKTtcbiAgICByZXR1cm4gY3VycmVudF9jb21wb25lbnQ7XG59XG5mdW5jdGlvbiBiZWZvcmVVcGRhdGUoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5iZWZvcmVfdXBkYXRlLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gb25Nb3VudChmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX21vdW50LnB1c2goZm4pO1xufVxuZnVuY3Rpb24gYWZ0ZXJVcGRhdGUoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5hZnRlcl91cGRhdGUucHVzaChmbik7XG59XG5mdW5jdGlvbiBvbkRlc3Ryb3koZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5vbl9kZXN0cm95LnB1c2goZm4pO1xufVxuZnVuY3Rpb24gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCkge1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IGdldF9jdXJyZW50X2NvbXBvbmVudCgpO1xuICAgIHJldHVybiAodHlwZSwgZGV0YWlsLCB7IGNhbmNlbGFibGUgPSBmYWxzZSB9ID0ge30pID0+IHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1t0eXBlXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAgICAgLy8gVE9ETyBhcmUgdGhlcmUgc2l0dWF0aW9ucyB3aGVyZSBldmVudHMgY291bGQgYmUgZGlzcGF0Y2hlZFxuICAgICAgICAgICAgLy8gaW4gYSBzZXJ2ZXIgKG5vbi1ET00pIGVudmlyb25tZW50P1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBjdXN0b21fZXZlbnQodHlwZSwgZGV0YWlsLCB7IGNhbmNlbGFibGUgfSk7XG4gICAgICAgICAgICBjYWxsYmFja3Muc2xpY2UoKS5mb3JFYWNoKGZuID0+IHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKGNvbXBvbmVudCwgZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNldENvbnRleHQoa2V5LCBjb250ZXh0KSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5zZXQoa2V5LCBjb250ZXh0KTtcbiAgICByZXR1cm4gY29udGV4dDtcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoa2V5KSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuZ2V0KGtleSk7XG59XG5mdW5jdGlvbiBnZXRBbGxDb250ZXh0cygpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dDtcbn1cbmZ1bmN0aW9uIGhhc0NvbnRleHQoa2V5KSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuaGFzKGtleSk7XG59XG4vLyBUT0RPIGZpZ3VyZSBvdXQgaWYgd2Ugc3RpbGwgd2FudCB0byBzdXBwb3J0XG4vLyBzaG9ydGhhbmQgZXZlbnRzLCBvciBpZiB3ZSB3YW50IHRvIGltcGxlbWVudFxuLy8gYSByZWFsIGJ1YmJsaW5nIG1lY2hhbmlzbVxuZnVuY3Rpb24gYnViYmxlKGNvbXBvbmVudCwgZXZlbnQpIHtcbiAgICBjb25zdCBjYWxsYmFja3MgPSBjb21wb25lbnQuJCQuY2FsbGJhY2tzW2V2ZW50LnR5cGVdO1xuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjYWxsYmFja3Muc2xpY2UoKS5mb3JFYWNoKGZuID0+IGZuLmNhbGwodGhpcywgZXZlbnQpKTtcbiAgICB9XG59XG5cbmNvbnN0IGRpcnR5X2NvbXBvbmVudHMgPSBbXTtcbmNvbnN0IGludHJvcyA9IHsgZW5hYmxlZDogZmFsc2UgfTtcbmNvbnN0IGJpbmRpbmdfY2FsbGJhY2tzID0gW107XG5jb25zdCByZW5kZXJfY2FsbGJhY2tzID0gW107XG5jb25zdCBmbHVzaF9jYWxsYmFja3MgPSBbXTtcbmNvbnN0IHJlc29sdmVkX3Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbmxldCB1cGRhdGVfc2NoZWR1bGVkID0gZmFsc2U7XG5mdW5jdGlvbiBzY2hlZHVsZV91cGRhdGUoKSB7XG4gICAgaWYgKCF1cGRhdGVfc2NoZWR1bGVkKSB7XG4gICAgICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICByZXNvbHZlZF9wcm9taXNlLnRoZW4oZmx1c2gpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRpY2soKSB7XG4gICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgcmV0dXJuIHJlc29sdmVkX3Byb21pc2U7XG59XG5mdW5jdGlvbiBhZGRfcmVuZGVyX2NhbGxiYWNrKGZuKSB7XG4gICAgcmVuZGVyX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGFkZF9mbHVzaF9jYWxsYmFjayhmbikge1xuICAgIGZsdXNoX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbi8vIGZsdXNoKCkgY2FsbHMgY2FsbGJhY2tzIGluIHRoaXMgb3JkZXI6XG4vLyAxLiBBbGwgYmVmb3JlVXBkYXRlIGNhbGxiYWNrcywgaW4gb3JkZXI6IHBhcmVudHMgYmVmb3JlIGNoaWxkcmVuXG4vLyAyLiBBbGwgYmluZDp0aGlzIGNhbGxiYWNrcywgaW4gcmV2ZXJzZSBvcmRlcjogY2hpbGRyZW4gYmVmb3JlIHBhcmVudHMuXG4vLyAzLiBBbGwgYWZ0ZXJVcGRhdGUgY2FsbGJhY2tzLCBpbiBvcmRlcjogcGFyZW50cyBiZWZvcmUgY2hpbGRyZW4uIEVYQ0VQVFxuLy8gICAgZm9yIGFmdGVyVXBkYXRlcyBjYWxsZWQgZHVyaW5nIHRoZSBpbml0aWFsIG9uTW91bnQsIHdoaWNoIGFyZSBjYWxsZWQgaW5cbi8vICAgIHJldmVyc2Ugb3JkZXI6IGNoaWxkcmVuIGJlZm9yZSBwYXJlbnRzLlxuLy8gU2luY2UgY2FsbGJhY2tzIG1pZ2h0IHVwZGF0ZSBjb21wb25lbnQgdmFsdWVzLCB3aGljaCBjb3VsZCB0cmlnZ2VyIGFub3RoZXJcbi8vIGNhbGwgdG8gZmx1c2goKSwgdGhlIGZvbGxvd2luZyBzdGVwcyBndWFyZCBhZ2FpbnN0IHRoaXM6XG4vLyAxLiBEdXJpbmcgYmVmb3JlVXBkYXRlLCBhbnkgdXBkYXRlZCBjb21wb25lbnRzIHdpbGwgYmUgYWRkZWQgdG8gdGhlXG4vLyAgICBkaXJ0eV9jb21wb25lbnRzIGFycmF5IGFuZCB3aWxsIGNhdXNlIGEgcmVlbnRyYW50IGNhbGwgdG8gZmx1c2goKS4gQmVjYXVzZVxuLy8gICAgdGhlIGZsdXNoIGluZGV4IGlzIGtlcHQgb3V0c2lkZSB0aGUgZnVuY3Rpb24sIHRoZSByZWVudHJhbnQgY2FsbCB3aWxsIHBpY2tcbi8vICAgIHVwIHdoZXJlIHRoZSBlYXJsaWVyIGNhbGwgbGVmdCBvZmYgYW5kIGdvIHRocm91Z2ggYWxsIGRpcnR5IGNvbXBvbmVudHMuIFRoZVxuLy8gICAgY3VycmVudF9jb21wb25lbnQgdmFsdWUgaXMgc2F2ZWQgYW5kIHJlc3RvcmVkIHNvIHRoYXQgdGhlIHJlZW50cmFudCBjYWxsIHdpbGxcbi8vICAgIG5vdCBpbnRlcmZlcmUgd2l0aCB0aGUgXCJwYXJlbnRcIiBmbHVzaCgpIGNhbGwuXG4vLyAyLiBiaW5kOnRoaXMgY2FsbGJhY2tzIGNhbm5vdCB0cmlnZ2VyIG5ldyBmbHVzaCgpIGNhbGxzLlxuLy8gMy4gRHVyaW5nIGFmdGVyVXBkYXRlLCBhbnkgdXBkYXRlZCBjb21wb25lbnRzIHdpbGwgTk9UIGhhdmUgdGhlaXIgYWZ0ZXJVcGRhdGVcbi8vICAgIGNhbGxiYWNrIGNhbGxlZCBhIHNlY29uZCB0aW1lOyB0aGUgc2Vlbl9jYWxsYmFja3Mgc2V0LCBvdXRzaWRlIHRoZSBmbHVzaCgpXG4vLyAgICBmdW5jdGlvbiwgZ3VhcmFudGVlcyB0aGlzIGJlaGF2aW9yLlxuY29uc3Qgc2Vlbl9jYWxsYmFja3MgPSBuZXcgU2V0KCk7XG5sZXQgZmx1c2hpZHggPSAwOyAvLyBEbyAqbm90KiBtb3ZlIHRoaXMgaW5zaWRlIHRoZSBmbHVzaCgpIGZ1bmN0aW9uXG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgICBjb25zdCBzYXZlZF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICBkbyB7XG4gICAgICAgIC8vIGZpcnN0LCBjYWxsIGJlZm9yZVVwZGF0ZSBmdW5jdGlvbnNcbiAgICAgICAgLy8gYW5kIHVwZGF0ZSBjb21wb25lbnRzXG4gICAgICAgIHdoaWxlIChmbHVzaGlkeCA8IGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBkaXJ0eV9jb21wb25lbnRzW2ZsdXNoaWR4XTtcbiAgICAgICAgICAgIGZsdXNoaWR4Kys7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShjb21wb25lbnQuJCQpO1xuICAgICAgICB9XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5sZW5ndGggPSAwO1xuICAgICAgICBmbHVzaGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChiaW5kaW5nX2NhbGxiYWNrcy5sZW5ndGgpXG4gICAgICAgICAgICBiaW5kaW5nX2NhbGxiYWNrcy5wb3AoKSgpO1xuICAgICAgICAvLyB0aGVuLCBvbmNlIGNvbXBvbmVudHMgYXJlIHVwZGF0ZWQsIGNhbGxcbiAgICAgICAgLy8gYWZ0ZXJVcGRhdGUgZnVuY3Rpb25zLiBUaGlzIG1heSBjYXVzZVxuICAgICAgICAvLyBzdWJzZXF1ZW50IHVwZGF0ZXMuLi5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IHJlbmRlcl9jYWxsYmFja3NbaV07XG4gICAgICAgICAgICBpZiAoIXNlZW5fY2FsbGJhY2tzLmhhcyhjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICAvLyAuLi5zbyBndWFyZCBhZ2FpbnN0IGluZmluaXRlIGxvb3BzXG4gICAgICAgICAgICAgICAgc2Vlbl9jYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICB9IHdoaWxlIChkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCk7XG4gICAgd2hpbGUgKGZsdXNoX2NhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgZmx1c2hfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgfVxuICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbiAgICBzZWVuX2NhbGxiYWNrcy5jbGVhcigpO1xuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChzYXZlZF9jb21wb25lbnQpO1xufVxuZnVuY3Rpb24gdXBkYXRlKCQkKSB7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICQkLnVwZGF0ZSgpO1xuICAgICAgICBydW5fYWxsKCQkLmJlZm9yZV91cGRhdGUpO1xuICAgICAgICBjb25zdCBkaXJ0eSA9ICQkLmRpcnR5O1xuICAgICAgICAkJC5kaXJ0eSA9IFstMV07XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LnAoJCQuY3R4LCBkaXJ0eSk7XG4gICAgICAgICQkLmFmdGVyX3VwZGF0ZS5mb3JFYWNoKGFkZF9yZW5kZXJfY2FsbGJhY2spO1xuICAgIH1cbn1cblxubGV0IHByb21pc2U7XG5mdW5jdGlvbiB3YWl0KCkge1xuICAgIGlmICghcHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gZGlzcGF0Y2gobm9kZSwgZGlyZWN0aW9uLCBraW5kKSB7XG4gICAgbm9kZS5kaXNwYXRjaEV2ZW50KGN1c3RvbV9ldmVudChgJHtkaXJlY3Rpb24gPyAnaW50cm8nIDogJ291dHJvJ30ke2tpbmR9YCkpO1xufVxuY29uc3Qgb3V0cm9pbmcgPSBuZXcgU2V0KCk7XG5sZXQgb3V0cm9zO1xuZnVuY3Rpb24gZ3JvdXBfb3V0cm9zKCkge1xuICAgIG91dHJvcyA9IHtcbiAgICAgICAgcjogMCxcbiAgICAgICAgYzogW10sXG4gICAgICAgIHA6IG91dHJvcyAvLyBwYXJlbnQgZ3JvdXBcbiAgICB9O1xufVxuZnVuY3Rpb24gY2hlY2tfb3V0cm9zKCkge1xuICAgIGlmICghb3V0cm9zLnIpIHtcbiAgICAgICAgcnVuX2FsbChvdXRyb3MuYyk7XG4gICAgfVxuICAgIG91dHJvcyA9IG91dHJvcy5wO1xufVxuZnVuY3Rpb24gdHJhbnNpdGlvbl9pbihibG9jaywgbG9jYWwpIHtcbiAgICBpZiAoYmxvY2sgJiYgYmxvY2suaSkge1xuICAgICAgICBvdXRyb2luZy5kZWxldGUoYmxvY2spO1xuICAgICAgICBibG9jay5pKGxvY2FsKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uX291dChibG9jaywgbG9jYWwsIGRldGFjaCwgY2FsbGJhY2spIHtcbiAgICBpZiAoYmxvY2sgJiYgYmxvY2subykge1xuICAgICAgICBpZiAob3V0cm9pbmcuaGFzKGJsb2NrKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgb3V0cm9pbmcuYWRkKGJsb2NrKTtcbiAgICAgICAgb3V0cm9zLmMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICBvdXRyb2luZy5kZWxldGUoYmxvY2spO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRldGFjaClcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suZCgxKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYmxvY2subyhsb2NhbCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxufVxuY29uc3QgbnVsbF90cmFuc2l0aW9uID0geyBkdXJhdGlvbjogMCB9O1xuZnVuY3Rpb24gY3JlYXRlX2luX3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gZmFsc2U7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lO1xuICAgIGxldCB0YXNrO1xuICAgIGxldCB1aWQgPSAwO1xuICAgIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDAsIDEsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MsIHVpZCsrKTtcbiAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBpZiAodGFzaylcbiAgICAgICAgICAgIHRhc2suYWJvcnQoKTtcbiAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgdHJ1ZSwgJ3N0YXJ0JykpO1xuICAgICAgICB0YXNrID0gbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHRydWUsICdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGVhc2luZygobm93IC0gc3RhcnRfdGltZSkgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5uaW5nO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydCgpIHtcbiAgICAgICAgICAgIGlmIChzdGFydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSk7XG4gICAgICAgICAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgICAgIHdhaXQoKS50aGVuKGdvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGludmFsaWRhdGUoKSB7XG4gICAgICAgICAgICBzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVuZCgpIHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfb3V0X3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gdHJ1ZTtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWU7XG4gICAgY29uc3QgZ3JvdXAgPSBvdXRyb3M7XG4gICAgZ3JvdXAuciArPSAxO1xuICAgIGZ1bmN0aW9uIGdvKCkge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAxLCAwLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnc3RhcnQnKSk7XG4gICAgICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBmYWxzZSwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS0tZ3JvdXAucikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIHJlc3VsdCBpbiBgZW5kKClgIGJlaW5nIGNhbGxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIGRvbid0IG5lZWQgdG8gY2xlYW4gdXAgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2FsbChncm91cC5jKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZWFzaW5nKChub3cgLSBzdGFydF90aW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGljaygxIC0gdCwgdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICB3YWl0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgIGdvKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ28oKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5kKHJlc2V0KSB7XG4gICAgICAgICAgICBpZiAocmVzZXQgJiYgY29uZmlnLnRpY2spIHtcbiAgICAgICAgICAgICAgICBjb25maWcudGljaygxLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9iaWRpcmVjdGlvbmFsX3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcywgaW50cm8pIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgdCA9IGludHJvID8gMCA6IDE7XG4gICAgbGV0IHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lID0gbnVsbDtcbiAgICBmdW5jdGlvbiBjbGVhcl9hbmltYXRpb24oKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdChwcm9ncmFtLCBkdXJhdGlvbikge1xuICAgICAgICBjb25zdCBkID0gKHByb2dyYW0uYiAtIHQpO1xuICAgICAgICBkdXJhdGlvbiAqPSBNYXRoLmFicyhkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGE6IHQsXG4gICAgICAgICAgICBiOiBwcm9ncmFtLmIsXG4gICAgICAgICAgICBkLFxuICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICBzdGFydDogcHJvZ3JhbS5zdGFydCxcbiAgICAgICAgICAgIGVuZDogcHJvZ3JhbS5zdGFydCArIGR1cmF0aW9uLFxuICAgICAgICAgICAgZ3JvdXA6IHByb2dyYW0uZ3JvdXBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ28oYikge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBjb25zdCBwcm9ncmFtID0ge1xuICAgICAgICAgICAgc3RhcnQ6IG5vdygpICsgZGVsYXksXG4gICAgICAgICAgICBiXG4gICAgICAgIH07XG4gICAgICAgIGlmICghYikge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIHByb2dyYW0uZ3JvdXAgPSBvdXRyb3M7XG4gICAgICAgICAgICBvdXRyb3MuciArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0gfHwgcGVuZGluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICBwZW5kaW5nX3Byb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhbiBpbnRybywgYW5kIHRoZXJlJ3MgYSBkZWxheSwgd2UgbmVlZCB0byBkb1xuICAgICAgICAgICAgLy8gYW4gaW5pdGlhbCB0aWNrIGFuZC9vciBhcHBseSBDU1MgYW5pbWF0aW9uIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCB0LCBiLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiKVxuICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBpbml0KHByb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgYiwgJ3N0YXJ0JykpO1xuICAgICAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nX3Byb2dyYW0gJiYgbm93ID4gcGVuZGluZ19wcm9ncmFtLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocGVuZGluZ19wcm9ncmFtLCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnc3RhcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIHJ1bm5pbmdfcHJvZ3JhbS5iLCBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24sIDAsIGVhc2luZywgY29uZmlnLmNzcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5lbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2sodCA9IHJ1bm5pbmdfcHJvZ3JhbS5iLCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBydW5uaW5nX3Byb2dyYW0uYiwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSBkb25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbS5iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGludHJvIOKAlCB3ZSBjYW4gdGlkeSB1cCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG91dHJvIOKAlCBuZWVkcyB0byBiZSBjb29yZGluYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIS0tcnVubmluZ19wcm9ncmFtLmdyb3VwLnIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKHJ1bm5pbmdfcHJvZ3JhbS5ncm91cC5jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vdyA+PSBydW5uaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBub3cgLSBydW5uaW5nX3Byb2dyYW0uc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ID0gcnVubmluZ19wcm9ncmFtLmEgKyBydW5uaW5nX3Byb2dyYW0uZCAqIGVhc2luZyhwIC8gcnVubmluZ19wcm9ncmFtLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhIShydW5uaW5nX3Byb2dyYW0gfHwgcGVuZGluZ19wcm9ncmFtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJ1bihiKSB7XG4gICAgICAgICAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICAgICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgICAgICAgICAgZ28oYik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBwZW5kaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlX3Byb21pc2UocHJvbWlzZSwgaW5mbykge1xuICAgIGNvbnN0IHRva2VuID0gaW5mby50b2tlbiA9IHt9O1xuICAgIGZ1bmN0aW9uIHVwZGF0ZSh0eXBlLCBpbmRleCwga2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAoaW5mby50b2tlbiAhPT0gdG9rZW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGluZm8ucmVzb2x2ZWQgPSB2YWx1ZTtcbiAgICAgICAgbGV0IGNoaWxkX2N0eCA9IGluZm8uY3R4O1xuICAgICAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNoaWxkX2N0eCA9IGNoaWxkX2N0eC5zbGljZSgpO1xuICAgICAgICAgICAgY2hpbGRfY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBibG9jayA9IHR5cGUgJiYgKGluZm8uY3VycmVudCA9IHR5cGUpKGNoaWxkX2N0eCk7XG4gICAgICAgIGxldCBuZWVkc19mbHVzaCA9IGZhbHNlO1xuICAgICAgICBpZiAoaW5mby5ibG9jaykge1xuICAgICAgICAgICAgaWYgKGluZm8uYmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9ja3MuZm9yRWFjaCgoYmxvY2ssIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGluZGV4ICYmIGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cF9vdXRyb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25fb3V0KGJsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uYmxvY2tzW2ldID09PSBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrc1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja19vdXRyb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9jay5kKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxvY2suYygpO1xuICAgICAgICAgICAgdHJhbnNpdGlvbl9pbihibG9jaywgMSk7XG4gICAgICAgICAgICBibG9jay5tKGluZm8ubW91bnQoKSwgaW5mby5hbmNob3IpO1xuICAgICAgICAgICAgbmVlZHNfZmx1c2ggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGluZm8uYmxvY2sgPSBibG9jaztcbiAgICAgICAgaWYgKGluZm8uYmxvY2tzKVxuICAgICAgICAgICAgaW5mby5ibG9ja3NbaW5kZXhdID0gYmxvY2s7XG4gICAgICAgIGlmIChuZWVkc19mbHVzaCkge1xuICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNfcHJvbWlzZShwcm9taXNlKSkge1xuICAgICAgICBjb25zdCBjdXJyZW50X2NvbXBvbmVudCA9IGdldF9jdXJyZW50X2NvbXBvbmVudCgpO1xuICAgICAgICBwcm9taXNlLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGN1cnJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnRoZW4sIDEsIGluZm8udmFsdWUsIHZhbHVlKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGN1cnJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLmNhdGNoLCAyLCBpbmZvLmVycm9yLCBlcnJvcik7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgICAgICBpZiAoIWluZm8uaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGlmIHdlIHByZXZpb3VzbHkgaGFkIGEgdGhlbi9jYXRjaCBibG9jaywgZGVzdHJveSBpdFxuICAgICAgICBpZiAoaW5mby5jdXJyZW50ICE9PSBpbmZvLnBlbmRpbmcpIHtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnBlbmRpbmcsIDApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8udGhlbikge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLnJlc29sdmVkID0gcHJvbWlzZTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVfYXdhaXRfYmxvY2tfYnJhbmNoKGluZm8sIGN0eCwgZGlydHkpIHtcbiAgICBjb25zdCBjaGlsZF9jdHggPSBjdHguc2xpY2UoKTtcbiAgICBjb25zdCB7IHJlc29sdmVkIH0gPSBpbmZvO1xuICAgIGlmIChpbmZvLmN1cnJlbnQgPT09IGluZm8udGhlbikge1xuICAgICAgICBjaGlsZF9jdHhbaW5mby52YWx1ZV0gPSByZXNvbHZlZDtcbiAgICB9XG4gICAgaWYgKGluZm8uY3VycmVudCA9PT0gaW5mby5jYXRjaCkge1xuICAgICAgICBjaGlsZF9jdHhbaW5mby5lcnJvcl0gPSByZXNvbHZlZDtcbiAgICB9XG4gICAgaW5mby5ibG9jay5wKGNoaWxkX2N0eCwgZGlydHkpO1xufVxuXG5jb25zdCBnbG9iYWxzID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgPyB3aW5kb3dcbiAgICA6IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGdsb2JhbFRoaXNcbiAgICAgICAgOiBnbG9iYWwpO1xuXG5mdW5jdGlvbiBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5kKDEpO1xuICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbn1cbmZ1bmN0aW9uIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICB0cmFuc2l0aW9uX291dChibG9jaywgMSwgMSwgKCkgPT4ge1xuICAgICAgICBsb29rdXAuZGVsZXRlKGJsb2NrLmtleSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmYoKTtcbiAgICBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gdXBkYXRlX2tleWVkX2VhY2gob2xkX2Jsb2NrcywgZGlydHksIGdldF9rZXksIGR5bmFtaWMsIGN0eCwgbGlzdCwgbG9va3VwLCBub2RlLCBkZXN0cm95LCBjcmVhdGVfZWFjaF9ibG9jaywgbmV4dCwgZ2V0X2NvbnRleHQpIHtcbiAgICBsZXQgbyA9IG9sZF9ibG9ja3MubGVuZ3RoO1xuICAgIGxldCBuID0gbGlzdC5sZW5ndGg7XG4gICAgbGV0IGkgPSBvO1xuICAgIGNvbnN0IG9sZF9pbmRleGVzID0ge307XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgb2xkX2luZGV4ZXNbb2xkX2Jsb2Nrc1tpXS5rZXldID0gaTtcbiAgICBjb25zdCBuZXdfYmxvY2tzID0gW107XG4gICAgY29uc3QgbmV3X2xvb2t1cCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBkZWx0YXMgPSBuZXcgTWFwKCk7XG4gICAgaSA9IG47XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBjaGlsZF9jdHggPSBnZXRfY29udGV4dChjdHgsIGxpc3QsIGkpO1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGNoaWxkX2N0eCk7XG4gICAgICAgIGxldCBibG9jayA9IGxvb2t1cC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFibG9jaykge1xuICAgICAgICAgICAgYmxvY2sgPSBjcmVhdGVfZWFjaF9ibG9jayhrZXksIGNoaWxkX2N0eCk7XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZHluYW1pYykge1xuICAgICAgICAgICAgYmxvY2sucChjaGlsZF9jdHgsIGRpcnR5KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdfbG9va3VwLnNldChrZXksIG5ld19ibG9ja3NbaV0gPSBibG9jayk7XG4gICAgICAgIGlmIChrZXkgaW4gb2xkX2luZGV4ZXMpXG4gICAgICAgICAgICBkZWx0YXMuc2V0KGtleSwgTWF0aC5hYnMoaSAtIG9sZF9pbmRleGVzW2tleV0pKTtcbiAgICB9XG4gICAgY29uc3Qgd2lsbF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IGRpZF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGZ1bmN0aW9uIGluc2VydChibG9jaykge1xuICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgYmxvY2subShub2RlLCBuZXh0KTtcbiAgICAgICAgbG9va3VwLnNldChibG9jay5rZXksIGJsb2NrKTtcbiAgICAgICAgbmV4dCA9IGJsb2NrLmZpcnN0O1xuICAgICAgICBuLS07XG4gICAgfVxuICAgIHdoaWxlIChvICYmIG4pIHtcbiAgICAgICAgY29uc3QgbmV3X2Jsb2NrID0gbmV3X2Jsb2Nrc1tuIC0gMV07XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3NbbyAtIDFdO1xuICAgICAgICBjb25zdCBuZXdfa2V5ID0gbmV3X2Jsb2NrLmtleTtcbiAgICAgICAgY29uc3Qgb2xkX2tleSA9IG9sZF9ibG9jay5rZXk7XG4gICAgICAgIGlmIChuZXdfYmxvY2sgPT09IG9sZF9ibG9jaykge1xuICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgbmV4dCA9IG5ld19ibG9jay5maXJzdDtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgICAgIG4tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2tleSkpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYmxvY2tcbiAgICAgICAgICAgIGRlc3Ryb3kob2xkX2Jsb2NrLCBsb29rdXApO1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFsb29rdXAuaGFzKG5ld19rZXkpIHx8IHdpbGxfbW92ZS5oYXMobmV3X2tleSkpIHtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpZF9tb3ZlLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlbHRhcy5nZXQobmV3X2tleSkgPiBkZWx0YXMuZ2V0KG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBkaWRfbW92ZS5hZGQobmV3X2tleSk7XG4gICAgICAgICAgICBpbnNlcnQobmV3X2Jsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdpbGxfbW92ZS5hZGQob2xkX2tleSk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2hpbGUgKG8tLSkge1xuICAgICAgICBjb25zdCBvbGRfYmxvY2sgPSBvbGRfYmxvY2tzW29dO1xuICAgICAgICBpZiAoIW5ld19sb29rdXAuaGFzKG9sZF9ibG9jay5rZXkpKVxuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgfVxuICAgIHdoaWxlIChuKVxuICAgICAgICBpbnNlcnQobmV3X2Jsb2Nrc1tuIC0gMV0pO1xuICAgIHJldHVybiBuZXdfYmxvY2tzO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfZWFjaF9rZXlzKGN0eCwgbGlzdCwgZ2V0X2NvbnRleHQsIGdldF9rZXkpIHtcbiAgICBjb25zdCBrZXlzID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSkpO1xuICAgICAgICBpZiAoa2V5cy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaGF2ZSBkdXBsaWNhdGUga2V5cyBpbiBhIGtleWVkIGVhY2gnKTtcbiAgICAgICAgfVxuICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0X3NwcmVhZF91cGRhdGUobGV2ZWxzLCB1cGRhdGVzKSB7XG4gICAgY29uc3QgdXBkYXRlID0ge307XG4gICAgY29uc3QgdG9fbnVsbF9vdXQgPSB7fTtcbiAgICBjb25zdCBhY2NvdW50ZWRfZm9yID0geyAkJHNjb3BlOiAxIH07XG4gICAgbGV0IGkgPSBsZXZlbHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY29uc3QgbyA9IGxldmVsc1tpXTtcbiAgICAgICAgY29uc3QgbiA9IHVwZGF0ZXNbaV07XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG4pKVxuICAgICAgICAgICAgICAgICAgICB0b19udWxsX291dFtrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFjY291bnRlZF9mb3Jba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVba2V5XSA9IG5ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXZlbHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbykge1xuICAgICAgICAgICAgICAgIGFjY291bnRlZF9mb3Jba2V5XSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdG9fbnVsbF9vdXQpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIHVwZGF0ZSkpXG4gICAgICAgICAgICB1cGRhdGVba2V5XSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZTtcbn1cbmZ1bmN0aW9uIGdldF9zcHJlYWRfb2JqZWN0KHNwcmVhZF9wcm9wcykge1xuICAgIHJldHVybiB0eXBlb2Ygc3ByZWFkX3Byb3BzID09PSAnb2JqZWN0JyAmJiBzcHJlYWRfcHJvcHMgIT09IG51bGwgPyBzcHJlYWRfcHJvcHMgOiB7fTtcbn1cblxuLy8gc291cmNlOiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmRpY2VzLmh0bWxcbmNvbnN0IGJvb2xlYW5fYXR0cmlidXRlcyA9IG5ldyBTZXQoW1xuICAgICdhbGxvd2Z1bGxzY3JlZW4nLFxuICAgICdhbGxvd3BheW1lbnRyZXF1ZXN0JyxcbiAgICAnYXN5bmMnLFxuICAgICdhdXRvZm9jdXMnLFxuICAgICdhdXRvcGxheScsXG4gICAgJ2NoZWNrZWQnLFxuICAgICdjb250cm9scycsXG4gICAgJ2RlZmF1bHQnLFxuICAgICdkZWZlcicsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnZm9ybW5vdmFsaWRhdGUnLFxuICAgICdoaWRkZW4nLFxuICAgICdpc21hcCcsXG4gICAgJ2xvb3AnLFxuICAgICdtdWx0aXBsZScsXG4gICAgJ211dGVkJyxcbiAgICAnbm9tb2R1bGUnLFxuICAgICdub3ZhbGlkYXRlJyxcbiAgICAnb3BlbicsXG4gICAgJ3BsYXlzaW5saW5lJyxcbiAgICAncmVhZG9ubHknLFxuICAgICdyZXF1aXJlZCcsXG4gICAgJ3JldmVyc2VkJyxcbiAgICAnc2VsZWN0ZWQnXG5dKTtcblxuY29uc3Qgdm9pZF9lbGVtZW50X25hbWVzID0gL14oPzphcmVhfGJhc2V8YnJ8Y29sfGNvbW1hbmR8ZW1iZWR8aHJ8aW1nfGlucHV0fGtleWdlbnxsaW5rfG1ldGF8cGFyYW18c291cmNlfHRyYWNrfHdicikkLztcbmZ1bmN0aW9uIGlzX3ZvaWQobmFtZSkge1xuICAgIHJldHVybiB2b2lkX2VsZW1lbnRfbmFtZXMudGVzdChuYW1lKSB8fCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09ICchZG9jdHlwZSc7XG59XG5cbmNvbnN0IGludmFsaWRfYXR0cmlidXRlX25hbWVfY2hhcmFjdGVyID0gL1tcXHMnXCI+Lz1cXHV7RkREMH0tXFx1e0ZERUZ9XFx1e0ZGRkV9XFx1e0ZGRkZ9XFx1ezFGRkZFfVxcdXsxRkZGRn1cXHV7MkZGRkV9XFx1ezJGRkZGfVxcdXszRkZGRX1cXHV7M0ZGRkZ9XFx1ezRGRkZFfVxcdXs0RkZGRn1cXHV7NUZGRkV9XFx1ezVGRkZGfVxcdXs2RkZGRX1cXHV7NkZGRkZ9XFx1ezdGRkZFfVxcdXs3RkZGRn1cXHV7OEZGRkV9XFx1ezhGRkZGfVxcdXs5RkZGRX1cXHV7OUZGRkZ9XFx1e0FGRkZFfVxcdXtBRkZGRn1cXHV7QkZGRkV9XFx1e0JGRkZGfVxcdXtDRkZGRX1cXHV7Q0ZGRkZ9XFx1e0RGRkZFfVxcdXtERkZGRn1cXHV7RUZGRkV9XFx1e0VGRkZGfVxcdXtGRkZGRX1cXHV7RkZGRkZ9XFx1ezEwRkZGRX1cXHV7MTBGRkZGfV0vdTtcbi8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2F0dHJpYnV0ZXMtMlxuLy8gaHR0cHM6Ly9pbmZyYS5zcGVjLndoYXR3Zy5vcmcvI25vbmNoYXJhY3RlclxuZnVuY3Rpb24gc3ByZWFkKGFyZ3MsIGF0dHJzX3RvX2FkZCkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBPYmplY3QuYXNzaWduKHt9LCAuLi5hcmdzKTtcbiAgICBpZiAoYXR0cnNfdG9fYWRkKSB7XG4gICAgICAgIGNvbnN0IGNsYXNzZXNfdG9fYWRkID0gYXR0cnNfdG9fYWRkLmNsYXNzZXM7XG4gICAgICAgIGNvbnN0IHN0eWxlc190b19hZGQgPSBhdHRyc190b19hZGQuc3R5bGVzO1xuICAgICAgICBpZiAoY2xhc3Nlc190b19hZGQpIHtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzLmNsYXNzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLmNsYXNzID0gY2xhc3Nlc190b19hZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLmNsYXNzICs9ICcgJyArIGNsYXNzZXNfdG9fYWRkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdHlsZXNfdG9fYWRkKSB7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcy5zdHlsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5zdHlsZSA9IHN0eWxlX29iamVjdF90b19zdHJpbmcoc3R5bGVzX3RvX2FkZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLnN0eWxlID0gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhtZXJnZV9zc3Jfc3R5bGVzKGF0dHJpYnV0ZXMuc3R5bGUsIHN0eWxlc190b19hZGQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgc3RyID0gJyc7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgaWYgKGludmFsaWRfYXR0cmlidXRlX25hbWVfY2hhcmFjdGVyLnRlc3QobmFtZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXR0cmlidXRlc1tuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlKVxuICAgICAgICAgICAgc3RyICs9ICcgJyArIG5hbWU7XG4gICAgICAgIGVsc2UgaWYgKGJvb2xlYW5fYXR0cmlidXRlcy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICAgICAgICAgIHN0ciArPSAnICcgKyBuYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHN0ciArPSBgICR7bmFtZX09XCIke3ZhbHVlfVwiYDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzdHI7XG59XG5mdW5jdGlvbiBtZXJnZV9zc3Jfc3R5bGVzKHN0eWxlX2F0dHJpYnV0ZSwgc3R5bGVfZGlyZWN0aXZlKSB7XG4gICAgY29uc3Qgc3R5bGVfb2JqZWN0ID0ge307XG4gICAgZm9yIChjb25zdCBpbmRpdmlkdWFsX3N0eWxlIG9mIHN0eWxlX2F0dHJpYnV0ZS5zcGxpdCgnOycpKSB7XG4gICAgICAgIGNvbnN0IGNvbG9uX2luZGV4ID0gaW5kaXZpZHVhbF9zdHlsZS5pbmRleE9mKCc6Jyk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBpbmRpdmlkdWFsX3N0eWxlLnNsaWNlKDAsIGNvbG9uX2luZGV4KS50cmltKCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaW5kaXZpZHVhbF9zdHlsZS5zbGljZShjb2xvbl9pbmRleCArIDEpLnRyaW0oKTtcbiAgICAgICAgaWYgKCFuYW1lKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIHN0eWxlX29iamVjdFtuYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gc3R5bGVfZGlyZWN0aXZlKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gc3R5bGVfZGlyZWN0aXZlW25hbWVdO1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHN0eWxlX29iamVjdFtuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIHN0eWxlX29iamVjdFtuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3R5bGVfb2JqZWN0O1xufVxuY29uc3QgQVRUUl9SRUdFWCA9IC9bJlwiXS9nO1xuY29uc3QgQ09OVEVOVF9SRUdFWCA9IC9bJjxdL2c7XG4vKipcbiAqIE5vdGU6IHRoaXMgbWV0aG9kIGlzIHBlcmZvcm1hbmNlIHNlbnNpdGl2ZSBhbmQgaGFzIGJlZW4gb3B0aW1pemVkXG4gKiBodHRwczovL2dpdGh1Yi5jb20vc3ZlbHRlanMvc3ZlbHRlL3B1bGwvNTcwMVxuICovXG5mdW5jdGlvbiBlc2NhcGUodmFsdWUsIGlzX2F0dHIgPSBmYWxzZSkge1xuICAgIGNvbnN0IHN0ciA9IFN0cmluZyh2YWx1ZSk7XG4gICAgY29uc3QgcGF0dGVybiA9IGlzX2F0dHIgPyBBVFRSX1JFR0VYIDogQ09OVEVOVF9SRUdFWDtcbiAgICBwYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG4gICAgbGV0IGVzY2FwZWQgPSAnJztcbiAgICBsZXQgbGFzdCA9IDA7XG4gICAgd2hpbGUgKHBhdHRlcm4udGVzdChzdHIpKSB7XG4gICAgICAgIGNvbnN0IGkgPSBwYXR0ZXJuLmxhc3RJbmRleCAtIDE7XG4gICAgICAgIGNvbnN0IGNoID0gc3RyW2ldO1xuICAgICAgICBlc2NhcGVkICs9IHN0ci5zdWJzdHJpbmcobGFzdCwgaSkgKyAoY2ggPT09ICcmJyA/ICcmYW1wOycgOiAoY2ggPT09ICdcIicgPyAnJnF1b3Q7JyA6ICcmbHQ7JykpO1xuICAgICAgICBsYXN0ID0gaSArIDE7XG4gICAgfVxuICAgIHJldHVybiBlc2NhcGVkICsgc3RyLnN1YnN0cmluZyhsYXN0KTtcbn1cbmZ1bmN0aW9uIGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUodmFsdWUpIHtcbiAgICAvLyBrZWVwIGJvb2xlYW5zLCBudWxsLCBhbmQgdW5kZWZpbmVkIGZvciB0aGUgc2FrZSBvZiBgc3ByZWFkYFxuICAgIGNvbnN0IHNob3VsZF9lc2NhcGUgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8ICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKTtcbiAgICByZXR1cm4gc2hvdWxkX2VzY2FwZSA/IGVzY2FwZSh2YWx1ZSwgdHJ1ZSkgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGVzY2FwZV9vYmplY3Qob2JqKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gZXNjYXBlX2F0dHJpYnV0ZV92YWx1ZShvYmpba2V5XSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBlYWNoKGl0ZW1zLCBmbikge1xuICAgIGxldCBzdHIgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHN0ciArPSBmbihpdGVtc1tpXSwgaSk7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5jb25zdCBtaXNzaW5nX2NvbXBvbmVudCA9IHtcbiAgICAkJHJlbmRlcjogKCkgPT4gJydcbn07XG5mdW5jdGlvbiB2YWxpZGF0ZV9jb21wb25lbnQoY29tcG9uZW50LCBuYW1lKSB7XG4gICAgaWYgKCFjb21wb25lbnQgfHwgIWNvbXBvbmVudC4kJHJlbmRlcikge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3N2ZWx0ZTpjb21wb25lbnQnKVxuICAgICAgICAgICAgbmFtZSArPSAnIHRoaXM9ey4uLn0nO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYDwke25hbWV9PiBpcyBub3QgYSB2YWxpZCBTU1IgY29tcG9uZW50LiBZb3UgbWF5IG5lZWQgdG8gcmV2aWV3IHlvdXIgYnVpbGQgY29uZmlnIHRvIGVuc3VyZSB0aGF0IGRlcGVuZGVuY2llcyBhcmUgY29tcGlsZWQsIHJhdGhlciB0aGFuIGltcG9ydGVkIGFzIHByZS1jb21waWxlZCBtb2R1bGVzYCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBkZWJ1ZyhmaWxlLCBsaW5lLCBjb2x1bW4sIHZhbHVlcykge1xuICAgIGNvbnNvbGUubG9nKGB7QGRlYnVnfSAke2ZpbGUgPyBmaWxlICsgJyAnIDogJyd9KCR7bGluZX06JHtjb2x1bW59KWApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICByZXR1cm4gJyc7XG59XG5sZXQgb25fZGVzdHJveTtcbmZ1bmN0aW9uIGNyZWF0ZV9zc3JfY29tcG9uZW50KGZuKSB7XG4gICAgZnVuY3Rpb24gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzLCBjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICAgICAgY29uc3QgJCQgPSB7XG4gICAgICAgICAgICBvbl9kZXN0cm95LFxuICAgICAgICAgICAgY29udGV4dDogbmV3IE1hcChjb250ZXh0IHx8IChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pKSxcbiAgICAgICAgICAgIC8vIHRoZXNlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZGlzY2FyZGVkXG4gICAgICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBjYWxsYmFja3M6IGJsYW5rX29iamVjdCgpXG4gICAgICAgIH07XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudCh7ICQkIH0pO1xuICAgICAgICBjb25zdCBodG1sID0gZm4ocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzKTtcbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHBhcmVudF9jb21wb25lbnQpO1xuICAgICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyOiAocHJvcHMgPSB7fSwgeyAkJHNsb3RzID0ge30sIGNvbnRleHQgPSBuZXcgTWFwKCkgfSA9IHt9KSA9PiB7XG4gICAgICAgICAgICBvbl9kZXN0cm95ID0gW107XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7IHRpdGxlOiAnJywgaGVhZDogJycsIGNzczogbmV3IFNldCgpIH07XG4gICAgICAgICAgICBjb25zdCBodG1sID0gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywge30sICQkc2xvdHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgcnVuX2FsbChvbl9kZXN0cm95KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaHRtbCxcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogQXJyYXkuZnJvbShyZXN1bHQuY3NzKS5tYXAoY3NzID0+IGNzcy5jb2RlKS5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBudWxsIC8vIFRPRE9cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhlYWQ6IHJlc3VsdC50aXRsZSArIHJlc3VsdC5oZWFkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAkJHJlbmRlclxuICAgIH07XG59XG5mdW5jdGlvbiBhZGRfYXR0cmlidXRlKG5hbWUsIHZhbHVlLCBib29sZWFuKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgKGJvb2xlYW4gJiYgIXZhbHVlKSlcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIGNvbnN0IGFzc2lnbm1lbnQgPSAoYm9vbGVhbiAmJiB2YWx1ZSA9PT0gdHJ1ZSkgPyAnJyA6IGA9XCIke2VzY2FwZSh2YWx1ZSwgdHJ1ZSl9XCJgO1xuICAgIHJldHVybiBgICR7bmFtZX0ke2Fzc2lnbm1lbnR9YDtcbn1cbmZ1bmN0aW9uIGFkZF9jbGFzc2VzKGNsYXNzZXMpIHtcbiAgICByZXR1cm4gY2xhc3NlcyA/IGAgY2xhc3M9XCIke2NsYXNzZXN9XCJgIDogJyc7XG59XG5mdW5jdGlvbiBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKHN0eWxlX29iamVjdCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzdHlsZV9vYmplY3QpXG4gICAgICAgIC5maWx0ZXIoa2V5ID0+IHN0eWxlX29iamVjdFtrZXldKVxuICAgICAgICAubWFwKGtleSA9PiBgJHtrZXl9OiAke3N0eWxlX29iamVjdFtrZXldfTtgKVxuICAgICAgICAuam9pbignICcpO1xufVxuZnVuY3Rpb24gYWRkX3N0eWxlcyhzdHlsZV9vYmplY3QpIHtcbiAgICBjb25zdCBzdHlsZXMgPSBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKHN0eWxlX29iamVjdCk7XG4gICAgcmV0dXJuIHN0eWxlcyA/IGAgc3R5bGU9XCIke3N0eWxlc31cImAgOiAnJztcbn1cblxuZnVuY3Rpb24gYmluZChjb21wb25lbnQsIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgaW5kZXggPSBjb21wb25lbnQuJCQucHJvcHNbbmFtZV07XG4gICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29tcG9uZW50LiQkLmJvdW5kW2luZGV4XSA9IGNhbGxiYWNrO1xuICAgICAgICBjYWxsYmFjayhjb21wb25lbnQuJCQuY3R4W2luZGV4XSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlX2NvbXBvbmVudChibG9jaykge1xuICAgIGJsb2NrICYmIGJsb2NrLmMoKTtcbn1cbmZ1bmN0aW9uIGNsYWltX2NvbXBvbmVudChibG9jaywgcGFyZW50X25vZGVzKSB7XG4gICAgYmxvY2sgJiYgYmxvY2subChwYXJlbnRfbm9kZXMpO1xufVxuZnVuY3Rpb24gbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgdGFyZ2V0LCBhbmNob3IsIGN1c3RvbUVsZW1lbnQpIHtcbiAgICBjb25zdCB7IGZyYWdtZW50LCBvbl9tb3VudCwgb25fZGVzdHJveSwgYWZ0ZXJfdXBkYXRlIH0gPSBjb21wb25lbnQuJCQ7XG4gICAgZnJhZ21lbnQgJiYgZnJhZ21lbnQubSh0YXJnZXQsIGFuY2hvcik7XG4gICAgaWYgKCFjdXN0b21FbGVtZW50KSB7XG4gICAgICAgIC8vIG9uTW91bnQgaGFwcGVucyBiZWZvcmUgdGhlIGluaXRpYWwgYWZ0ZXJVcGRhdGVcbiAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdfb25fZGVzdHJveSA9IG9uX21vdW50Lm1hcChydW4pLmZpbHRlcihpc19mdW5jdGlvbik7XG4gICAgICAgICAgICBpZiAob25fZGVzdHJveSkge1xuICAgICAgICAgICAgICAgIG9uX2Rlc3Ryb3kucHVzaCguLi5uZXdfb25fZGVzdHJveSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBFZGdlIGNhc2UgLSBjb21wb25lbnQgd2FzIGRlc3Ryb3llZCBpbW1lZGlhdGVseSxcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGxpa2VseSBhcyBhIHJlc3VsdCBvZiBhIGJpbmRpbmcgaW5pdGlhbGlzaW5nXG4gICAgICAgICAgICAgICAgcnVuX2FsbChuZXdfb25fZGVzdHJveSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wb25lbnQuJCQub25fbW91bnQgPSBbXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFmdGVyX3VwZGF0ZS5mb3JFYWNoKGFkZF9yZW5kZXJfY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gZGVzdHJveV9jb21wb25lbnQoY29tcG9uZW50LCBkZXRhY2hpbmcpIHtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJDtcbiAgICBpZiAoJCQuZnJhZ21lbnQgIT09IG51bGwpIHtcbiAgICAgICAgcnVuX2FsbCgkJC5vbl9kZXN0cm95KTtcbiAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQuZChkZXRhY2hpbmcpO1xuICAgICAgICAvLyBUT0RPIG51bGwgb3V0IG90aGVyIHJlZnMsIGluY2x1ZGluZyBjb21wb25lbnQuJCQgKGJ1dCBuZWVkIHRvXG4gICAgICAgIC8vIHByZXNlcnZlIGZpbmFsIHN0YXRlPylcbiAgICAgICAgJCQub25fZGVzdHJveSA9ICQkLmZyYWdtZW50ID0gbnVsbDtcbiAgICAgICAgJCQuY3R4ID0gW107XG4gICAgfVxufVxuZnVuY3Rpb24gbWFrZV9kaXJ0eShjb21wb25lbnQsIGkpIHtcbiAgICBpZiAoY29tcG9uZW50LiQkLmRpcnR5WzBdID09PSAtMSkge1xuICAgICAgICBkaXJ0eV9jb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICAgICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgICAgIGNvbXBvbmVudC4kJC5kaXJ0eS5maWxsKDApO1xuICAgIH1cbiAgICBjb21wb25lbnQuJCQuZGlydHlbKGkgLyAzMSkgfCAwXSB8PSAoMSA8PCAoaSAlIDMxKSk7XG59XG5mdW5jdGlvbiBpbml0KGNvbXBvbmVudCwgb3B0aW9ucywgaW5zdGFuY2UsIGNyZWF0ZV9mcmFnbWVudCwgbm90X2VxdWFsLCBwcm9wcywgYXBwZW5kX3N0eWxlcywgZGlydHkgPSBbLTFdKSB7XG4gICAgY29uc3QgcGFyZW50X2NvbXBvbmVudCA9IGN1cnJlbnRfY29tcG9uZW50O1xuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgIGNvbnN0ICQkID0gY29tcG9uZW50LiQkID0ge1xuICAgICAgICBmcmFnbWVudDogbnVsbCxcbiAgICAgICAgY3R4OiBudWxsLFxuICAgICAgICAvLyBzdGF0ZVxuICAgICAgICBwcm9wcyxcbiAgICAgICAgdXBkYXRlOiBub29wLFxuICAgICAgICBub3RfZXF1YWwsXG4gICAgICAgIGJvdW5kOiBibGFua19vYmplY3QoKSxcbiAgICAgICAgLy8gbGlmZWN5Y2xlXG4gICAgICAgIG9uX21vdW50OiBbXSxcbiAgICAgICAgb25fZGVzdHJveTogW10sXG4gICAgICAgIG9uX2Rpc2Nvbm5lY3Q6IFtdLFxuICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgYWZ0ZXJfdXBkYXRlOiBbXSxcbiAgICAgICAgY29udGV4dDogbmV3IE1hcChvcHRpb25zLmNvbnRleHQgfHwgKHBhcmVudF9jb21wb25lbnQgPyBwYXJlbnRfY29tcG9uZW50LiQkLmNvbnRleHQgOiBbXSkpLFxuICAgICAgICAvLyBldmVyeXRoaW5nIGVsc2VcbiAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKSxcbiAgICAgICAgZGlydHksXG4gICAgICAgIHNraXBfYm91bmQ6IGZhbHNlLFxuICAgICAgICByb290OiBvcHRpb25zLnRhcmdldCB8fCBwYXJlbnRfY29tcG9uZW50LiQkLnJvb3RcbiAgICB9O1xuICAgIGFwcGVuZF9zdHlsZXMgJiYgYXBwZW5kX3N0eWxlcygkJC5yb290KTtcbiAgICBsZXQgcmVhZHkgPSBmYWxzZTtcbiAgICAkJC5jdHggPSBpbnN0YW5jZVxuICAgICAgICA/IGluc3RhbmNlKGNvbXBvbmVudCwgb3B0aW9ucy5wcm9wcyB8fCB7fSwgKGksIHJldCwgLi4ucmVzdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByZXN0Lmxlbmd0aCA/IHJlc3RbMF0gOiByZXQ7XG4gICAgICAgICAgICBpZiAoJCQuY3R4ICYmIG5vdF9lcXVhbCgkJC5jdHhbaV0sICQkLmN0eFtpXSA9IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmICghJCQuc2tpcF9ib3VuZCAmJiAkJC5ib3VuZFtpXSlcbiAgICAgICAgICAgICAgICAgICAgJCQuYm91bmRbaV0odmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChyZWFkeSlcbiAgICAgICAgICAgICAgICAgICAgbWFrZV9kaXJ0eShjb21wb25lbnQsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSlcbiAgICAgICAgOiBbXTtcbiAgICAkJC51cGRhdGUoKTtcbiAgICByZWFkeSA9IHRydWU7XG4gICAgcnVuX2FsbCgkJC5iZWZvcmVfdXBkYXRlKTtcbiAgICAvLyBgZmFsc2VgIGFzIGEgc3BlY2lhbCBjYXNlIG9mIG5vIERPTSBjb21wb25lbnRcbiAgICAkJC5mcmFnbWVudCA9IGNyZWF0ZV9mcmFnbWVudCA/IGNyZWF0ZV9mcmFnbWVudCgkJC5jdHgpIDogZmFsc2U7XG4gICAgaWYgKG9wdGlvbnMudGFyZ2V0KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmh5ZHJhdGUpIHtcbiAgICAgICAgICAgIHN0YXJ0X2h5ZHJhdGluZygpO1xuICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSBjaGlsZHJlbihvcHRpb25zLnRhcmdldCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQubChub2Rlcyk7XG4gICAgICAgICAgICBub2Rlcy5mb3JFYWNoKGRldGFjaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQuYygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmludHJvKVxuICAgICAgICAgICAgdHJhbnNpdGlvbl9pbihjb21wb25lbnQuJCQuZnJhZ21lbnQpO1xuICAgICAgICBtb3VudF9jb21wb25lbnQoY29tcG9uZW50LCBvcHRpb25zLnRhcmdldCwgb3B0aW9ucy5hbmNob3IsIG9wdGlvbnMuY3VzdG9tRWxlbWVudCk7XG4gICAgICAgIGVuZF9oeWRyYXRpbmcoKTtcbiAgICAgICAgZmx1c2goKTtcbiAgICB9XG4gICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHBhcmVudF9jb21wb25lbnQpO1xufVxubGV0IFN2ZWx0ZUVsZW1lbnQ7XG5pZiAodHlwZW9mIEhUTUxFbGVtZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgU3ZlbHRlRWxlbWVudCA9IGNsYXNzIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25fbW91bnQgfSA9IHRoaXMuJCQ7XG4gICAgICAgICAgICB0aGlzLiQkLm9uX2Rpc2Nvbm5lY3QgPSBvbl9tb3VudC5tYXAocnVuKS5maWx0ZXIoaXNfZnVuY3Rpb24pO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuJCQuc2xvdHRlZCkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLiQkLnNsb3R0ZWRba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHIsIF9vbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXNbYXR0cl0gPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHJ1bl9hbGwodGhpcy4kJC5vbl9kaXNjb25uZWN0KTtcbiAgICAgICAgfVxuICAgICAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgICAgIGRlc3Ryb3lfY29tcG9uZW50KHRoaXMsIDEpO1xuICAgICAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgJG9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHNob3VsZCB0aGlzIGRlbGVnYXRlIHRvIGFkZEV2ZW50TGlzdGVuZXI/XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja3MgPSAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgICRzZXQoJCRwcm9wcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuJCRzZXQgJiYgIWlzX2VtcHR5KCQkcHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLiQkc2V0KCQkcHJvcHMpO1xuICAgICAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgU3ZlbHRlIGNvbXBvbmVudHMuIFVzZWQgd2hlbiBkZXY9ZmFsc2UuXG4gKi9cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gICAgJGRlc3Ryb3koKSB7XG4gICAgICAgIGRlc3Ryb3lfY29tcG9uZW50KHRoaXMsIDEpO1xuICAgICAgICB0aGlzLiRkZXN0cm95ID0gbm9vcDtcbiAgICB9XG4gICAgJG9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSB8fCAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gPSBbXSkpO1xuICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgICRzZXQoJCRwcm9wcykge1xuICAgICAgICBpZiAodGhpcy4kJHNldCAmJiAhaXNfZW1wdHkoJCRwcm9wcykpIHtcbiAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLiQkc2V0KCQkcHJvcHMpO1xuICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoX2Rldih0eXBlLCBkZXRhaWwpIHtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbV9ldmVudCh0eXBlLCBPYmplY3QuYXNzaWduKHsgdmVyc2lvbjogJzMuNDkuMCcgfSwgZGV0YWlsKSwgeyBidWJibGVzOiB0cnVlIH0pKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9kZXYodGFyZ2V0LCBub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSB9KTtcbiAgICBhcHBlbmQodGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9oeWRyYXRpb25fZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2Rldih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUsIGFuY2hvciB9KTtcbiAgICBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2h5ZHJhdGlvbl9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0X2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUsIGFuY2hvcik7XG59XG5mdW5jdGlvbiBkZXRhY2hfZGV2KG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZScsIHsgbm9kZSB9KTtcbiAgICBkZXRhY2gobm9kZSk7XG59XG5mdW5jdGlvbiBkZXRhY2hfYmV0d2Vlbl9kZXYoYmVmb3JlLCBhZnRlcikge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcgJiYgYmVmb3JlLm5leHRTaWJsaW5nICE9PSBhZnRlcikge1xuICAgICAgICBkZXRhY2hfZGV2KGJlZm9yZS5uZXh0U2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2JlZm9yZV9kZXYoYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2hfYWZ0ZXJfZGV2KGJlZm9yZSkge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxpc3Rlbl9kZXYobm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMsIGhhc19wcmV2ZW50X2RlZmF1bHQsIGhhc19zdG9wX3Byb3BhZ2F0aW9uKSB7XG4gICAgY29uc3QgbW9kaWZpZXJzID0gb3B0aW9ucyA9PT0gdHJ1ZSA/IFsnY2FwdHVyZSddIDogb3B0aW9ucyA/IEFycmF5LmZyb20oT2JqZWN0LmtleXMob3B0aW9ucykpIDogW107XG4gICAgaWYgKGhhc19wcmV2ZW50X2RlZmF1bHQpXG4gICAgICAgIG1vZGlmaWVycy5wdXNoKCdwcmV2ZW50RGVmYXVsdCcpO1xuICAgIGlmIChoYXNfc3RvcF9wcm9wYWdhdGlvbilcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3N0b3BQcm9wYWdhdGlvbicpO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NQWRkRXZlbnRMaXN0ZW5lcicsIHsgbm9kZSwgZXZlbnQsIGhhbmRsZXIsIG1vZGlmaWVycyB9KTtcbiAgICBjb25zdCBkaXNwb3NlID0gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZUV2ZW50TGlzdGVuZXInLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgICAgIGRpc3Bvc2UoKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cl9kZXYobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NUmVtb3ZlQXR0cmlidXRlJywgeyBub2RlLCBhdHRyaWJ1dGUgfSk7XG4gICAgZWxzZVxuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldEF0dHJpYnV0ZScsIHsgbm9kZSwgYXR0cmlidXRlLCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIHByb3BfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGVbcHJvcGVydHldID0gdmFsdWU7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXRQcm9wZXJ0eScsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gZGF0YXNldF9kZXYobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgbm9kZS5kYXRhc2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0RGF0YXNldCcsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gc2V0X2RhdGFfZGV2KHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0Lndob2xlVGV4dCA9PT0gZGF0YSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0RGF0YScsIHsgbm9kZTogdGV4dCwgZGF0YSB9KTtcbiAgICB0ZXh0LmRhdGEgPSBkYXRhO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfZWFjaF9hcmd1bWVudChhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ3N0cmluZycgJiYgIShhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gYXJnKSkge1xuICAgICAgICBsZXQgbXNnID0gJ3sjZWFjaH0gb25seSBpdGVyYXRlcyBvdmVyIGFycmF5LWxpa2Ugb2JqZWN0cy4nO1xuICAgICAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBhcmcgJiYgU3ltYm9sLml0ZXJhdG9yIGluIGFyZykge1xuICAgICAgICAgICAgbXNnICs9ICcgWW91IGNhbiB1c2UgYSBzcHJlYWQgdG8gY29udmVydCB0aGlzIGl0ZXJhYmxlIGludG8gYW4gYXJyYXkuJztcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zbG90cyhuYW1lLCBzbG90LCBrZXlzKSB7XG4gICAgZm9yIChjb25zdCBzbG90X2tleSBvZiBPYmplY3Qua2V5cyhzbG90KSkge1xuICAgICAgICBpZiAoIX5rZXlzLmluZGV4T2Yoc2xvdF9rZXkpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYDwke25hbWV9PiByZWNlaXZlZCBhbiB1bmV4cGVjdGVkIHNsb3QgXCIke3Nsb3Rfa2V5fVwiLmApO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVfZHluYW1pY19lbGVtZW50KHRhZykge1xuICAgIGNvbnN0IGlzX3N0cmluZyA9IHR5cGVvZiB0YWcgPT09ICdzdHJpbmcnO1xuICAgIGlmICh0YWcgJiYgIWlzX3N0cmluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJzxzdmVsdGU6ZWxlbWVudD4gZXhwZWN0cyBcInRoaXNcIiBhdHRyaWJ1dGUgdG8gYmUgYSBzdHJpbmcuJyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVfdm9pZF9keW5hbWljX2VsZW1lbnQodGFnKSB7XG4gICAgaWYgKHRhZyAmJiBpc192b2lkKHRhZykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGA8c3ZlbHRlOmVsZW1lbnQgdGhpcz1cIiR7dGFnfVwiPiBpcyBzZWxmLWNsb3NpbmcgYW5kIGNhbm5vdCBoYXZlIGNvbnRlbnQuYCk7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBTdmVsdGUgY29tcG9uZW50cyB3aXRoIHNvbWUgbWlub3IgZGV2LWVuaGFuY2VtZW50cy4gVXNlZCB3aGVuIGRldj10cnVlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnREZXYgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8ICghb3B0aW9ucy50YXJnZXQgJiYgIW9wdGlvbnMuJCRpbmxpbmUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIndGFyZ2V0JyBpcyBhIHJlcXVpcmVkIG9wdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIuJGRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ29tcG9uZW50IHdhcyBhbHJlYWR5IGRlc3Ryb3llZCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgJGNhcHR1cmVfc3RhdGUoKSB7IH1cbiAgICAkaW5qZWN0X3N0YXRlKCkgeyB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgdG8gY3JlYXRlIHN0cm9uZ2x5IHR5cGVkIFN2ZWx0ZSBjb21wb25lbnRzLlxuICogVGhpcyBvbmx5IGV4aXN0cyBmb3IgdHlwaW5nIHB1cnBvc2VzIGFuZCBzaG91bGQgYmUgdXNlZCBpbiBgLmQudHNgIGZpbGVzLlxuICpcbiAqICMjIyBFeGFtcGxlOlxuICpcbiAqIFlvdSBoYXZlIGNvbXBvbmVudCBsaWJyYXJ5IG9uIG5wbSBjYWxsZWQgYGNvbXBvbmVudC1saWJyYXJ5YCwgZnJvbSB3aGljaFxuICogeW91IGV4cG9ydCBhIGNvbXBvbmVudCBjYWxsZWQgYE15Q29tcG9uZW50YC4gRm9yIFN2ZWx0ZStUeXBlU2NyaXB0IHVzZXJzLFxuICogeW91IHdhbnQgdG8gcHJvdmlkZSB0eXBpbmdzLiBUaGVyZWZvcmUgeW91IGNyZWF0ZSBhIGBpbmRleC5kLnRzYDpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBTdmVsdGVDb21wb25lbnRUeXBlZCB9IGZyb20gXCJzdmVsdGVcIjtcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudFR5cGVkPHtmb286IHN0cmluZ30+IHt9XG4gKiBgYGBcbiAqIFR5cGluZyB0aGlzIG1ha2VzIGl0IHBvc3NpYmxlIGZvciBJREVzIGxpa2UgVlMgQ29kZSB3aXRoIHRoZSBTdmVsdGUgZXh0ZW5zaW9uXG4gKiB0byBwcm92aWRlIGludGVsbGlzZW5zZSBhbmQgdG8gdXNlIHRoZSBjb21wb25lbnQgbGlrZSB0aGlzIGluIGEgU3ZlbHRlIGZpbGVcbiAqIHdpdGggVHlwZVNjcmlwdDpcbiAqIGBgYHN2ZWx0ZVxuICogPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAqIFx0aW1wb3J0IHsgTXlDb21wb25lbnQgfSBmcm9tIFwiY29tcG9uZW50LWxpYnJhcnlcIjtcbiAqIDwvc2NyaXB0PlxuICogPE15Q29tcG9uZW50IGZvbz17J2Jhcid9IC8+XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFdoeSBub3QgbWFrZSB0aGlzIHBhcnQgb2YgYFN2ZWx0ZUNvbXBvbmVudChEZXYpYD9cbiAqIEJlY2F1c2VcbiAqIGBgYHRzXG4gKiBjbGFzcyBBU3ViY2xhc3NPZlN2ZWx0ZUNvbXBvbmVudCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudDx7Zm9vOiBzdHJpbmd9PiB7fVxuICogY29uc3QgY29tcG9uZW50OiB0eXBlb2YgU3ZlbHRlQ29tcG9uZW50ID0gQVN1YmNsYXNzT2ZTdmVsdGVDb21wb25lbnQ7XG4gKiBgYGBcbiAqIHdpbGwgdGhyb3cgYSB0eXBlIGVycm9yLCBzbyB3ZSBuZWVkIHRvIHNlcGFyYXRlIHRoZSBtb3JlIHN0cmljdGx5IHR5cGVkIGNsYXNzLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnRUeXBlZCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudERldiB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb29wX2d1YXJkKHRpbWVvdXQpIHtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydCA+IHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5maW5pdGUgbG9vcCBkZXRlY3RlZCcpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgSHRtbFRhZywgSHRtbFRhZ0h5ZHJhdGlvbiwgU3ZlbHRlQ29tcG9uZW50LCBTdmVsdGVDb21wb25lbnREZXYsIFN2ZWx0ZUNvbXBvbmVudFR5cGVkLCBTdmVsdGVFbGVtZW50LCBhY3Rpb25fZGVzdHJveWVyLCBhZGRfYXR0cmlidXRlLCBhZGRfY2xhc3NlcywgYWRkX2ZsdXNoX2NhbGxiYWNrLCBhZGRfbG9jYXRpb24sIGFkZF9yZW5kZXJfY2FsbGJhY2ssIGFkZF9yZXNpemVfbGlzdGVuZXIsIGFkZF9zdHlsZXMsIGFkZF90cmFuc2Zvcm0sIGFmdGVyVXBkYXRlLCBhcHBlbmQsIGFwcGVuZF9kZXYsIGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0LCBhcHBlbmRfaHlkcmF0aW9uLCBhcHBlbmRfaHlkcmF0aW9uX2RldiwgYXBwZW5kX3N0eWxlcywgYXNzaWduLCBhdHRyLCBhdHRyX2RldiwgYXR0cmlidXRlX3RvX29iamVjdCwgYmVmb3JlVXBkYXRlLCBiaW5kLCBiaW5kaW5nX2NhbGxiYWNrcywgYmxhbmtfb2JqZWN0LCBidWJibGUsIGNoZWNrX291dHJvcywgY2hpbGRyZW4sIGNsYWltX2NvbXBvbmVudCwgY2xhaW1fZWxlbWVudCwgY2xhaW1faHRtbF90YWcsIGNsYWltX3NwYWNlLCBjbGFpbV9zdmdfZWxlbWVudCwgY2xhaW1fdGV4dCwgY2xlYXJfbG9vcHMsIGNvbXBvbmVudF9zdWJzY3JpYmUsIGNvbXB1dGVfcmVzdF9wcm9wcywgY29tcHV0ZV9zbG90cywgY3JlYXRlRXZlbnREaXNwYXRjaGVyLCBjcmVhdGVfYW5pbWF0aW9uLCBjcmVhdGVfYmlkaXJlY3Rpb25hbF90cmFuc2l0aW9uLCBjcmVhdGVfY29tcG9uZW50LCBjcmVhdGVfaW5fdHJhbnNpdGlvbiwgY3JlYXRlX291dF90cmFuc2l0aW9uLCBjcmVhdGVfc2xvdCwgY3JlYXRlX3Nzcl9jb21wb25lbnQsIGN1cnJlbnRfY29tcG9uZW50LCBjdXN0b21fZXZlbnQsIGRhdGFzZXRfZGV2LCBkZWJ1ZywgZGVzdHJveV9ibG9jaywgZGVzdHJveV9jb21wb25lbnQsIGRlc3Ryb3lfZWFjaCwgZGV0YWNoLCBkZXRhY2hfYWZ0ZXJfZGV2LCBkZXRhY2hfYmVmb3JlX2RldiwgZGV0YWNoX2JldHdlZW5fZGV2LCBkZXRhY2hfZGV2LCBkaXJ0eV9jb21wb25lbnRzLCBkaXNwYXRjaF9kZXYsIGVhY2gsIGVsZW1lbnQsIGVsZW1lbnRfaXMsIGVtcHR5LCBlbmRfaHlkcmF0aW5nLCBlc2NhcGUsIGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUsIGVzY2FwZV9vYmplY3QsIGV4Y2x1ZGVfaW50ZXJuYWxfcHJvcHMsIGZpeF9hbmRfZGVzdHJveV9ibG9jaywgZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jaywgZml4X3Bvc2l0aW9uLCBmbHVzaCwgZ2V0QWxsQ29udGV4dHMsIGdldENvbnRleHQsIGdldF9hbGxfZGlydHlfZnJvbV9zY29wZSwgZ2V0X2JpbmRpbmdfZ3JvdXBfdmFsdWUsIGdldF9jdXJyZW50X2NvbXBvbmVudCwgZ2V0X2N1c3RvbV9lbGVtZW50c19zbG90cywgZ2V0X3Jvb3RfZm9yX3N0eWxlLCBnZXRfc2xvdF9jaGFuZ2VzLCBnZXRfc3ByZWFkX29iamVjdCwgZ2V0X3NwcmVhZF91cGRhdGUsIGdldF9zdG9yZV92YWx1ZSwgZ2xvYmFscywgZ3JvdXBfb3V0cm9zLCBoYW5kbGVfcHJvbWlzZSwgaGFzQ29udGV4dCwgaGFzX3Byb3AsIGlkZW50aXR5LCBpbml0LCBpbnNlcnQsIGluc2VydF9kZXYsIGluc2VydF9oeWRyYXRpb24sIGluc2VydF9oeWRyYXRpb25fZGV2LCBpbnRyb3MsIGludmFsaWRfYXR0cmlidXRlX25hbWVfY2hhcmFjdGVyLCBpc19jbGllbnQsIGlzX2Nyb3Nzb3JpZ2luLCBpc19lbXB0eSwgaXNfZnVuY3Rpb24sIGlzX3Byb21pc2UsIGlzX3ZvaWQsIGxpc3RlbiwgbGlzdGVuX2RldiwgbG9vcCwgbG9vcF9ndWFyZCwgbWVyZ2Vfc3NyX3N0eWxlcywgbWlzc2luZ19jb21wb25lbnQsIG1vdW50X2NvbXBvbmVudCwgbm9vcCwgbm90X2VxdWFsLCBub3csIG51bGxfdG9fZW1wdHksIG9iamVjdF93aXRob3V0X3Byb3BlcnRpZXMsIG9uRGVzdHJveSwgb25Nb3VudCwgb25jZSwgb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2ssIHByZXZlbnRfZGVmYXVsdCwgcHJvcF9kZXYsIHF1ZXJ5X3NlbGVjdG9yX2FsbCwgcmFmLCBydW4sIHJ1bl9hbGwsIHNhZmVfbm90X2VxdWFsLCBzY2hlZHVsZV91cGRhdGUsIHNlbGVjdF9tdWx0aXBsZV92YWx1ZSwgc2VsZWN0X29wdGlvbiwgc2VsZWN0X29wdGlvbnMsIHNlbGVjdF92YWx1ZSwgc2VsZiwgc2V0Q29udGV4dCwgc2V0X2F0dHJpYnV0ZXMsIHNldF9jdXJyZW50X2NvbXBvbmVudCwgc2V0X2N1c3RvbV9lbGVtZW50X2RhdGEsIHNldF9kYXRhLCBzZXRfZGF0YV9kZXYsIHNldF9pbnB1dF90eXBlLCBzZXRfaW5wdXRfdmFsdWUsIHNldF9ub3csIHNldF9yYWYsIHNldF9zdG9yZV92YWx1ZSwgc2V0X3N0eWxlLCBzZXRfc3ZnX2F0dHJpYnV0ZXMsIHNwYWNlLCBzcHJlYWQsIHNyY191cmxfZXF1YWwsIHN0YXJ0X2h5ZHJhdGluZywgc3RvcF9wcm9wYWdhdGlvbiwgc3Vic2NyaWJlLCBzdmdfZWxlbWVudCwgdGV4dCwgdGljaywgdGltZV9yYW5nZXNfdG9fYXJyYXksIHRvX251bWJlciwgdG9nZ2xlX2NsYXNzLCB0cmFuc2l0aW9uX2luLCB0cmFuc2l0aW9uX291dCwgdHJ1c3RlZCwgdXBkYXRlX2F3YWl0X2Jsb2NrX2JyYW5jaCwgdXBkYXRlX2tleWVkX2VhY2gsIHVwZGF0ZV9zbG90LCB1cGRhdGVfc2xvdF9iYXNlLCB2YWxpZGF0ZV9jb21wb25lbnQsIHZhbGlkYXRlX2R5bmFtaWNfZWxlbWVudCwgdmFsaWRhdGVfZWFjaF9hcmd1bWVudCwgdmFsaWRhdGVfZWFjaF9rZXlzLCB2YWxpZGF0ZV9zbG90cywgdmFsaWRhdGVfc3RvcmUsIHZhbGlkYXRlX3ZvaWRfZHluYW1pY19lbGVtZW50LCB4bGlua19hdHRyIH07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcCgpIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgfTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCdWZmZXIodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbCkgJiYgdmFsLmNvbnN0cnVjdG9yICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwuY29uc3RydWN0b3IpXG4gICAgJiYgdHlwZW9mIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIodmFsKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGb3JtRGF0YV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpICYmIChBcnJheUJ1ZmZlci5pc1ZpZXcpKSB7XG4gICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHZhbCkgJiYgKHZhbC5idWZmZXIpICYmIChpc0FycmF5QnVmZmVyKHZhbC5idWZmZXIpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgcGxhaW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHBsYWluIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsKSB7XG4gIGlmICh0b1N0cmluZy5jYWxsKHZhbCkgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWwpO1xuICByZXR1cm4gcHJvdG90eXBlID09PSBudWxsIHx8IHByb3RvdHlwZSA9PT0gT2JqZWN0LnByb3RvdHlwZTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIERhdGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0ZpbGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZpbGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Jsb2IodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyZWFtKHZhbCkge1xuICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgVVJMU2VhcmNoUGFyYW1zXSc7XG59XG5cbi8qKlxuICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW1cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci50cmltID8gc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICogbmF0aXZlc2NyaXB0XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJ1xuICovXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIChuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTlMnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICApO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmIChpc1BsYWluT2JqZWN0KHJlc3VsdFtrZXldKSAmJiBpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2Uoe30sIHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsLnNsaWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChhLCBiLCB0aGlzQXJnKSB7XG4gIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodGhpc0FyZyAmJiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gYTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYnl0ZSBvcmRlciBtYXJrZXIuIFRoaXMgY2F0Y2hlcyBFRiBCQiBCRiAodGhlIFVURi04IEJPTSlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCB3aXRoIEJPTVxuICogQHJldHVybiB7c3RyaW5nfSBjb250ZW50IHZhbHVlIHdpdGhvdXQgQk9NXG4gKi9cbmZ1bmN0aW9uIHN0cmlwQk9NKGNvbnRlbnQpIHtcbiAgaWYgKGNvbnRlbnQuY2hhckNvZGVBdCgwKSA9PT0gMHhGRUZGKSB7XG4gICAgY29udGVudCA9IGNvbnRlbnQuc2xpY2UoMSk7XG4gIH1cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc0FycmF5OiBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcjogaXNCdWZmZXIsXG4gIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsXG4gIGlzQXJyYXlCdWZmZXJWaWV3OiBpc0FycmF5QnVmZmVyVmlldyxcbiAgaXNTdHJpbmc6IGlzU3RyaW5nLFxuICBpc051bWJlcjogaXNOdW1iZXIsXG4gIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgaXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCxcbiAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuICBpc0RhdGU6IGlzRGF0ZSxcbiAgaXNGaWxlOiBpc0ZpbGUsXG4gIGlzQmxvYjogaXNCbG9iLFxuICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuICBpc1N0cmVhbTogaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zOiBpc1VSTFNlYXJjaFBhcmFtcyxcbiAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LFxuICBmb3JFYWNoOiBmb3JFYWNoLFxuICBtZXJnZTogbWVyZ2UsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICB0cmltOiB0cmltLFxuICBzdHJpcEJPTTogc3RyaXBCT01cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICByZXBsYWNlKC8lMjAvZywgJysnKS5cbiAgICByZXBsYWNlKC8lNUIvZ2ksICdbJykuXG4gICAgcmVwbGFjZSgvJTVEL2dpLCAnXScpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGJhc2Ugb2YgdGhlIHVybCAoZS5nLiwgaHR0cDovL3d3dy5nb29nbGUuY29tKVxuICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgdXJsXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIGlmICghcGFyYW1zKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHZhciBzZXJpYWxpemVkUGFyYW1zO1xuICBpZiAocGFyYW1zU2VyaWFsaXplcikge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXNTZXJpYWxpemVyKHBhcmFtcyk7XG4gIH0gZWxzZSBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSkge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgIHV0aWxzLmZvckVhY2gocGFyYW1zLCBmdW5jdGlvbiBzZXJpYWxpemUodmFsLCBrZXkpIHtcbiAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodXRpbHMuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIGtleSA9IGtleSArICdbXSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBbdmFsXTtcbiAgICAgIH1cblxuICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuICAgICAgICBpZiAodXRpbHMuaXNEYXRlKHYpKSB7XG4gICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkge1xuICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgdmFyIGhhc2htYXJrSW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICAgIGlmIChoYXNobWFya0luZGV4ICE9PSAtMSkge1xuICAgICAgdXJsID0gdXJsLnNsaWNlKDAsIGhhc2htYXJrSW5kZXgpO1xuICAgIH1cblxuICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIEludGVyY2VwdG9yTWFuYWdlcigpIHtcbiAgdGhpcy5oYW5kbGVycyA9IFtdO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdWxmaWxsZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgdGhlbmAgZm9yIGEgYFByb21pc2VgXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYFxuICpcbiAqIEByZXR1cm4ge051bWJlcn0gQW4gSUQgdXNlZCB0byByZW1vdmUgaW50ZXJjZXB0b3IgbGF0ZXJcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCwgb3B0aW9ucykge1xuICB0aGlzLmhhbmRsZXJzLnB1c2goe1xuICAgIGZ1bGZpbGxlZDogZnVsZmlsbGVkLFxuICAgIHJlamVjdGVkOiByZWplY3RlZCxcbiAgICBzeW5jaHJvbm91czogb3B0aW9ucyA/IG9wdGlvbnMuc3luY2hyb25vdXMgOiBmYWxzZSxcbiAgICBydW5XaGVuOiBvcHRpb25zID8gb3B0aW9ucy5ydW5XaGVuIDogbnVsbFxuICB9KTtcbiAgcmV0dXJuIHRoaXMuaGFuZGxlcnMubGVuZ3RoIC0gMTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFuIGludGVyY2VwdG9yIGZyb20gdGhlIHN0YWNrXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGlkIFRoZSBJRCB0aGF0IHdhcyByZXR1cm5lZCBieSBgdXNlYFxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0ID0gZnVuY3Rpb24gZWplY3QoaWQpIHtcbiAgaWYgKHRoaXMuaGFuZGxlcnNbaWRdKSB7XG4gICAgdGhpcy5oYW5kbGVyc1tpZF0gPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzXG4gKlxuICogVGhpcyBtZXRob2QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igc2tpcHBpbmcgb3ZlciBhbnlcbiAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGludGVyY2VwdG9yXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZm4pIHtcbiAgdXRpbHMuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbiBmb3JFYWNoSGFuZGxlcihoKSB7XG4gICAgaWYgKGggIT09IG51bGwpIHtcbiAgICAgIGZuKGgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEludGVyY2VwdG9yTWFuYWdlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG4gIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkge1xuICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG4gICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTtcbiAgICB9XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVcGRhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIGNvbmZpZywgZXJyb3IgY29kZSwgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIFRoZSBlcnJvciB0byB1cGRhdGUuXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICBlcnJvci5jb25maWcgPSBjb25maWc7XG4gIGlmIChjb2RlKSB7XG4gICAgZXJyb3IuY29kZSA9IGNvZGU7XG4gIH1cblxuICBlcnJvci5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgZXJyb3IuaXNBeGlvc0Vycm9yID0gdHJ1ZTtcblxuICBlcnJvci50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIFN0YW5kYXJkXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAvLyBNaWNyb3NvZnRcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgbnVtYmVyOiB0aGlzLm51bWJlcixcbiAgICAgIC8vIE1vemlsbGFcbiAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLFxuICAgICAgbGluZU51bWJlcjogdGhpcy5saW5lTnVtYmVyLFxuICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlcixcbiAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxuICAgICAgLy8gQXhpb3NcbiAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICBjb2RlOiB0aGlzLmNvZGUsXG4gICAgICBzdGF0dXM6IHRoaXMucmVzcG9uc2UgJiYgdGhpcy5yZXNwb25zZS5zdGF0dXMgPyB0aGlzLnJlc3BvbnNlLnN0YXR1cyA6IG51bGxcbiAgICB9O1xuICB9O1xuICByZXR1cm4gZXJyb3I7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2lsZW50SlNPTlBhcnNpbmc6IHRydWUsXG4gIGZvcmNlZEpTT05QYXJzaW5nOiB0cnVlLFxuICBjbGFyaWZ5VGltZW91dEVycm9yOiBmYWxzZVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVuaGFuY2VFcnJvciA9IHJlcXVpcmUoJy4vZW5oYW5jZUVycm9yJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2UsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJy4vY3JlYXRlRXJyb3InKTtcblxuLyoqXG4gKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7XG4gIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8ICF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gIH0gZWxzZSB7XG4gICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuICAgICAgJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgJyArIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHJlc3BvbnNlLmNvbmZpZyxcbiAgICAgIG51bGwsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG4gICAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcbiAgICAgICAgICB2YXIgY29va2llID0gW107XG4gICAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuXG4gICAgICAgICAgaWYgKHV0aWxzLmlzTnVtYmVyKGV4cGlyZXMpKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKHBhdGgpKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKGRvbWFpbikpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlY3VyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkge1xuICAgICAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7XG4gICAgICAgICAgcmV0dXJuIChtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7XG4gICAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gICAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LFxuICAgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgICAgfTtcbiAgICB9KSgpXG4pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHtcbiAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuICAvLyBSRkMgMzk4NiBkZWZpbmVzIHNjaGVtZSBuYW1lIGFzIGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyBiZWdpbm5pbmcgd2l0aCBhIGxldHRlciBhbmQgZm9sbG93ZWRcbiAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG4gIHJldHVybiAvXihbYS16XVthLXpcXGQrXFwtLl0qOik/XFwvXFwvL2kudGVzdCh1cmwpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIFVSTFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGlzQWJzb2x1dGVVUkwgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwnKTtcbnZhciBjb21iaW5lVVJMcyA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvY29tYmluZVVSTHMnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIGJhc2VVUkwgd2l0aCB0aGUgcmVxdWVzdGVkVVJMLFxuICogb25seSB3aGVuIHRoZSByZXF1ZXN0ZWRVUkwgaXMgbm90IGFscmVhZHkgYW4gYWJzb2x1dGUgVVJMLlxuICogSWYgdGhlIHJlcXVlc3RVUkwgaXMgYWJzb2x1dGUsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgcmVxdWVzdGVkVVJMIHVudG91Y2hlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0ZWRVUkwgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIHRvIGNvbWJpbmVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBmdWxsIHBhdGhcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZEZ1bGxQYXRoKGJhc2VVUkwsIHJlcXVlc3RlZFVSTCkge1xuICBpZiAoYmFzZVVSTCAmJiAhaXNBYnNvbHV0ZVVSTChyZXF1ZXN0ZWRVUkwpKSB7XG4gICAgcmV0dXJuIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlcXVlc3RlZFVSTCk7XG4gIH1cbiAgcmV0dXJuIHJlcXVlc3RlZFVSTDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLy8gSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbnZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFtcbiAgJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJyxcbiAgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLFxuICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXG5dO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGtleTtcbiAgdmFyIHZhbDtcbiAgdmFyIGk7XG5cbiAgaWYgKCFoZWFkZXJzKSB7IHJldHVybiBwYXJzZWQ7IH1cblxuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbiBwYXJzZXIobGluZSkge1xuICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSArIDEpKTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIGlmIChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSAocGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSA6IFtdKS5jb25jYXQoW3ZhbF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWQ7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3RcbiAgLy8gd2hldGhlciB0aGUgcmVxdWVzdCBVUkwgaXMgb2YgdGhlIHNhbWUgb3JpZ2luIGFzIGN1cnJlbnQgbG9jYXRpb24uXG4gICAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHZhciBtc2llID0gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIHZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIHZhciBvcmlnaW5VUkw7XG5cbiAgICAgIC8qKlxuICAgICogUGFyc2UgYSBVUkwgdG8gZGlzY292ZXIgaXQncyBjb21wb25lbnRzXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZFxuICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAqL1xuICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHtcbiAgICAgICAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgICAgICAgaWYgKG1zaWUpIHtcbiAgICAgICAgLy8gSUUgbmVlZHMgYXR0cmlidXRlIHNldCB0d2ljZSB0byBub3JtYWxpemUgcHJvcGVydGllc1xuICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICAgICAgICB9XG5cbiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cbiAgICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG4gICAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LFxuICAgICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcbiAgICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgICAgICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxcbiAgICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxuICAgICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cbiAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcbiAgICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgICAvKipcbiAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RVUkwgVGhlIFVSTCB0byB0ZXN0XG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlXG4gICAgKi9cbiAgICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkge1xuICAgICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuICAgICAgICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmXG4gICAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVVJMLmhvc3QpO1xuICAgICAgfTtcbiAgICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAgIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgfSkoKVxuKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBBIGBDYW5jZWxgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsKG1lc3NhZ2UpIHtcbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbn1cblxuQ2FuY2VsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gJ0NhbmNlbCcgKyAodGhpcy5tZXNzYWdlID8gJzogJyArIHRoaXMubWVzc2FnZSA6ICcnKTtcbn07XG5cbkNhbmNlbC5wcm90b3R5cGUuX19DQU5DRUxfXyA9IHRydWU7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FuY2VsO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgc2V0dGxlID0gcmVxdWlyZSgnLi8uLi9jb3JlL3NldHRsZScpO1xudmFyIGNvb2tpZXMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29va2llcycpO1xudmFyIGJ1aWxkVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2J1aWxkVVJMJyk7XG52YXIgYnVpbGRGdWxsUGF0aCA9IHJlcXVpcmUoJy4uL2NvcmUvYnVpbGRGdWxsUGF0aCcpO1xudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9wYXJzZUhlYWRlcnMnKTtcbnZhciBpc1VSTFNhbWVPcmlnaW4gPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luJyk7XG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuLi9jb3JlL2NyZWF0ZUVycm9yJyk7XG52YXIgdHJhbnNpdGlvbmFsRGVmYXVsdHMgPSByZXF1aXJlKCcuLi9kZWZhdWx0cy90cmFuc2l0aW9uYWwnKTtcbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvQ2FuY2VsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTtcbiAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcbiAgICB2YXIgcmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICB2YXIgb25DYW5jZWxlZDtcbiAgICBmdW5jdGlvbiBkb25lKCkge1xuICAgICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgICAgICBjb25maWcuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb25maWcuc2lnbmFsKSB7XG4gICAgICAgIGNvbmZpZy5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbkNhbmNlbGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcbiAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7XG4gICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCA/IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChjb25maWcuYXV0aC5wYXNzd29yZCkpIDogJyc7XG4gICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xuICAgIH1cblxuICAgIHZhciBmdWxsUGF0aCA9IGJ1aWxkRnVsbFBhdGgoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpO1xuICAgIHJlcXVlc3Qub3Blbihjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksIGJ1aWxkVVJMKGZ1bGxQYXRoLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplciksIHRydWUpO1xuXG4gICAgLy8gU2V0IHRoZSByZXF1ZXN0IHRpbWVvdXQgaW4gTVNcbiAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDtcblxuICAgIGZ1bmN0aW9uIG9ubG9hZGVuZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFyZXNwb25zZVR5cGUgfHwgcmVzcG9uc2VUeXBlID09PSAndGV4dCcgfHwgIHJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nID9cbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuICAgICAgdmFyIHJlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKGZ1bmN0aW9uIF9yZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCBmdW5jdGlvbiBfcmVqZWN0KGVycikge1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoJ29ubG9hZGVuZCcgaW4gcmVxdWVzdCkge1xuICAgICAgLy8gVXNlIG9ubG9hZGVuZCBpZiBhdmFpbGFibGVcbiAgICAgIHJlcXVlc3Qub25sb2FkZW5kID0gb25sb2FkZW5kO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlIHRvIGVtdWxhdGUgb25sb2FkZW5kXG4gICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCB8fCByZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbiAgICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcbiAgICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVhZHlzdGF0ZSBoYW5kbGVyIGlzIGNhbGxpbmcgYmVmb3JlIG9uZXJyb3Igb3Igb250aW1lb3V0IGhhbmRsZXJzLFxuICAgICAgICAvLyBzbyB3ZSBzaG91bGQgY2FsbCBvbmxvYWRlbmQgb24gdGhlIG5leHQgJ3RpY2snXG4gICAgICAgIHNldFRpbWVvdXQob25sb2FkZW5kKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGJyb3dzZXIgcmVxdWVzdCBjYW5jZWxsYXRpb24gKGFzIG9wcG9zZWQgdG8gYSBtYW51YWwgY2FuY2VsbGF0aW9uKVxuICAgIHJlcXVlc3Qub25hYm9ydCA9IGZ1bmN0aW9uIGhhbmRsZUFib3J0KCkge1xuICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdSZXF1ZXN0IGFib3J0ZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdOZXR3b3JrIEVycm9yJywgY29uZmlnLCBudWxsLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgdGltZW91dFxuICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcbiAgICAgIHZhciB0aW1lb3V0RXJyb3JNZXNzYWdlID0gY29uZmlnLnRpbWVvdXQgPyAndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnIDogJ3RpbWVvdXQgZXhjZWVkZWQnO1xuICAgICAgdmFyIHRyYW5zaXRpb25hbCA9IGNvbmZpZy50cmFuc2l0aW9uYWwgfHwgdHJhbnNpdGlvbmFsRGVmYXVsdHM7XG4gICAgICBpZiAoY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgdGltZW91dEVycm9yTWVzc2FnZSA9IGNvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlO1xuICAgICAgfVxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlLFxuICAgICAgICBjb25maWcsXG4gICAgICAgIHRyYW5zaXRpb25hbC5jbGFyaWZ5VGltZW91dEVycm9yID8gJ0VUSU1FRE9VVCcgOiAnRUNPTk5BQk9SVEVEJyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS5cbiAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICB2YXIgeHNyZlZhbHVlID0gKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgfHwgaXNVUkxTYW1lT3JpZ2luKGZ1bGxQYXRoKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID9cbiAgICAgICAgY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSkgOlxuICAgICAgICB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3REYXRhID09PSAndW5kZWZpbmVkJyAmJiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3RcbiAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSAhIWNvbmZpZy53aXRoQ3JlZGVudGlhbHM7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChyZXNwb25zZVR5cGUgJiYgcmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG4gICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuIHx8IGNvbmZpZy5zaWduYWwpIHtcbiAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb25cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgICBvbkNhbmNlbGVkID0gZnVuY3Rpb24oY2FuY2VsKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZWplY3QoIWNhbmNlbCB8fCAoY2FuY2VsICYmIGNhbmNlbC50eXBlKSA/IG5ldyBDYW5jZWwoJ2NhbmNlbGVkJykgOiBjYW5jZWwpO1xuICAgICAgICByZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgICAgfTtcblxuICAgICAgY29uZmlnLmNhbmNlbFRva2VuICYmIGNvbmZpZy5jYW5jZWxUb2tlbi5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG4gICAgICBpZiAoY29uZmlnLnNpZ25hbCkge1xuICAgICAgICBjb25maWcuc2lnbmFsLmFib3J0ZWQgPyBvbkNhbmNlbGVkKCkgOiBjb25maWcuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFyZXF1ZXN0RGF0YSkge1xuICAgICAgcmVxdWVzdERhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgbm9ybWFsaXplSGVhZGVyTmFtZSA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZScpO1xudmFyIGVuaGFuY2VFcnJvciA9IHJlcXVpcmUoJy4uL2NvcmUvZW5oYW5jZUVycm9yJyk7XG52YXIgdHJhbnNpdGlvbmFsRGVmYXVsdHMgPSByZXF1aXJlKCcuL3RyYW5zaXRpb25hbCcpO1xuXG52YXIgREVGQVVMVF9DT05URU5UX1RZUEUgPSB7XG4gICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xufTtcblxuZnVuY3Rpb24gc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsIHZhbHVlKSB7XG4gIGlmICghdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykgJiYgdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKSB7XG4gICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0QWRhcHRlcigpIHtcbiAgdmFyIGFkYXB0ZXI7XG4gIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gRm9yIGJyb3dzZXJzIHVzZSBYSFIgYWRhcHRlclxuICAgIGFkYXB0ZXIgPSByZXF1aXJlKCcuLi9hZGFwdGVycy94aHInKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcbiAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4uL2FkYXB0ZXJzL2h0dHAnKTtcbiAgfVxuICByZXR1cm4gYWRhcHRlcjtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5U2FmZWx5KHJhd1ZhbHVlLCBwYXJzZXIsIGVuY29kZXIpIHtcbiAgaWYgKHV0aWxzLmlzU3RyaW5nKHJhd1ZhbHVlKSkge1xuICAgIHRyeSB7XG4gICAgICAocGFyc2VyIHx8IEpTT04ucGFyc2UpKHJhd1ZhbHVlKTtcbiAgICAgIHJldHVybiB1dGlscy50cmltKHJhd1ZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZS5uYW1lICE9PSAnU3ludGF4RXJyb3InKSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChlbmNvZGVyIHx8IEpTT04uc3RyaW5naWZ5KShyYXdWYWx1ZSk7XG59XG5cbnZhciBkZWZhdWx0cyA9IHtcblxuICB0cmFuc2l0aW9uYWw6IHRyYW5zaXRpb25hbERlZmF1bHRzLFxuXG4gIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksXG5cbiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykge1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0FjY2VwdCcpO1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpO1xuXG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkgfHwgKGhlYWRlcnMgJiYgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPT09ICdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgcmV0dXJuIHN0cmluZ2lmeVNhZmVseShkYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkge1xuICAgIHZhciB0cmFuc2l0aW9uYWwgPSB0aGlzLnRyYW5zaXRpb25hbCB8fCBkZWZhdWx0cy50cmFuc2l0aW9uYWw7XG4gICAgdmFyIHNpbGVudEpTT05QYXJzaW5nID0gdHJhbnNpdGlvbmFsICYmIHRyYW5zaXRpb25hbC5zaWxlbnRKU09OUGFyc2luZztcbiAgICB2YXIgZm9yY2VkSlNPTlBhcnNpbmcgPSB0cmFuc2l0aW9uYWwgJiYgdHJhbnNpdGlvbmFsLmZvcmNlZEpTT05QYXJzaW5nO1xuICAgIHZhciBzdHJpY3RKU09OUGFyc2luZyA9ICFzaWxlbnRKU09OUGFyc2luZyAmJiB0aGlzLnJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nO1xuXG4gICAgaWYgKHN0cmljdEpTT05QYXJzaW5nIHx8IChmb3JjZWRKU09OUGFyc2luZyAmJiB1dGlscy5pc1N0cmluZyhkYXRhKSAmJiBkYXRhLmxlbmd0aCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoc3RyaWN0SlNPTlBhcnNpbmcpIHtcbiAgICAgICAgICBpZiAoZS5uYW1lID09PSAnU3ludGF4RXJyb3InKSB7XG4gICAgICAgICAgICB0aHJvdyBlbmhhbmNlRXJyb3IoZSwgdGhpcywgJ0VfSlNPTl9QQVJTRScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIC8qKlxuICAgKiBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIGFib3J0IGEgcmVxdWVzdC4gSWYgc2V0IHRvIDAgKGRlZmF1bHQpIGFcbiAgICogdGltZW91dCBpcyBub3QgY3JlYXRlZC5cbiAgICovXG4gIHRpbWVvdXQ6IDAsXG5cbiAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcbiAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuICBtYXhCb2R5TGVuZ3RoOiAtMSxcblxuICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7XG4gICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwO1xuICB9LFxuXG4gIGhlYWRlcnM6IHtcbiAgICBjb21tb246IHtcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICAgIH1cbiAgfVxufTtcblxudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB1dGlscy5tZXJnZShERUZBVUxUX0NPTlRFTlRfVFlQRSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIHZhciBjb250ZXh0ID0gdGhpcyB8fCBkZWZhdWx0cztcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4uY2FsbChjb250ZXh0LCBkYXRhLCBoZWFkZXJzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciB0cmFuc2Zvcm1EYXRhID0gcmVxdWlyZSgnLi90cmFuc2Zvcm1EYXRhJyk7XG52YXIgaXNDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvaXNDYW5jZWwnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4uL2RlZmF1bHRzJyk7XG52YXIgQ2FuY2VsID0gcmVxdWlyZSgnLi4vY2FuY2VsL0NhbmNlbCcpO1xuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG4gIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5zaWduYWwgJiYgY29uZmlnLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgdGhyb3cgbmV3IENhbmNlbCgnY2FuY2VsZWQnKTtcbiAgfVxufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkaXNwYXRjaFJlcXVlc3QoY29uZmlnKSB7XG4gIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAvLyBFbnN1cmUgaGVhZGVycyBleGlzdFxuICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuXG4gIC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGFcbiAgY29uZmlnLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoXG4gICAgY29uZmlnLFxuICAgIGNvbmZpZy5kYXRhLFxuICAgIGNvbmZpZy5oZWFkZXJzLFxuICAgIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0XG4gICk7XG5cbiAgLy8gRmxhdHRlbiBoZWFkZXJzXG4gIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoXG4gICAgY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzW2NvbmZpZy5tZXRob2RdIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzXG4gICk7XG5cbiAgdXRpbHMuZm9yRWFjaChcbiAgICBbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSxcbiAgICBmdW5jdGlvbiBjbGVhbkhlYWRlckNvbmZpZyhtZXRob2QpIHtcbiAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdO1xuICAgIH1cbiAgKTtcblxuICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXI7XG5cbiAgcmV0dXJuIGFkYXB0ZXIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHtcbiAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoXG4gICAgICBjb25maWcsXG4gICAgICByZXNwb25zZS5kYXRhLFxuICAgICAgcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHtcbiAgICBpZiAoIWlzQ2FuY2VsKHJlYXNvbikpIHtcbiAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7XG4gICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKFxuICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG4vKipcbiAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3RcbiAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzJcbiAqIEByZXR1cm5zIHtPYmplY3R9IE5ldyBvYmplY3QgcmVzdWx0aW5nIGZyb20gbWVyZ2luZyBjb25maWcyIHRvIGNvbmZpZzFcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBjb25maWcyID0gY29uZmlnMiB8fCB7fTtcbiAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gIGZ1bmN0aW9uIGdldE1lcmdlZFZhbHVlKHRhcmdldCwgc291cmNlKSB7XG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QodGFyZ2V0KSAmJiB1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh0YXJnZXQsIHNvdXJjZSk7XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh7fSwgc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zbGljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGVlcFByb3BlcnRpZXMocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShjb25maWcxW3Byb3BdLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGNvbmZpZzJbcHJvcF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBkZWZhdWx0VG9Db25maWcyKHByb3ApIHtcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzJbcHJvcF0pKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGlyZWN0S2V5cyhwcm9wKSB7XG4gICAgaWYgKHByb3AgaW4gY29uZmlnMikge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAocHJvcCBpbiBjb25maWcxKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcxW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICB2YXIgbWVyZ2VNYXAgPSB7XG4gICAgJ3VybCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ21ldGhvZCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ2RhdGEnOiB2YWx1ZUZyb21Db25maWcyLFxuICAgICdiYXNlVVJMJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNmb3JtUmVxdWVzdCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RyYW5zZm9ybVJlc3BvbnNlJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAncGFyYW1zU2VyaWFsaXplcic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RpbWVvdXQnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd0aW1lb3V0TWVzc2FnZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3dpdGhDcmVkZW50aWFscyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2FkYXB0ZXInOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdyZXNwb25zZVR5cGUnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd4c3JmQ29va2llTmFtZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3hzcmZIZWFkZXJOYW1lJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnb25VcGxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ29uRG93bmxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2RlY29tcHJlc3MnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdtYXhDb250ZW50TGVuZ3RoJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnbWF4Qm9keUxlbmd0aCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RyYW5zcG9ydCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2h0dHBBZ2VudCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2h0dHBzQWdlbnQnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdjYW5jZWxUb2tlbic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3NvY2tldFBhdGgnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdyZXNwb25zZUVuY29kaW5nJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndmFsaWRhdGVTdGF0dXMnOiBtZXJnZURpcmVjdEtleXNcbiAgfTtcblxuICB1dGlscy5mb3JFYWNoKE9iamVjdC5rZXlzKGNvbmZpZzEpLmNvbmNhdChPYmplY3Qua2V5cyhjb25maWcyKSksIGZ1bmN0aW9uIGNvbXB1dGVDb25maWdWYWx1ZShwcm9wKSB7XG4gICAgdmFyIG1lcmdlID0gbWVyZ2VNYXBbcHJvcF0gfHwgbWVyZ2VEZWVwUHJvcGVydGllcztcbiAgICB2YXIgY29uZmlnVmFsdWUgPSBtZXJnZShwcm9wKTtcbiAgICAodXRpbHMuaXNVbmRlZmluZWQoY29uZmlnVmFsdWUpICYmIG1lcmdlICE9PSBtZXJnZURpcmVjdEtleXMpIHx8IChjb25maWdbcHJvcF0gPSBjb25maWdWYWx1ZSk7XG4gIH0pO1xuXG4gIHJldHVybiBjb25maWc7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIFwidmVyc2lvblwiOiBcIjAuMjYuMVwiXG59OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFZFUlNJT04gPSByZXF1aXJlKCcuLi9lbnYvZGF0YScpLnZlcnNpb247XG5cbnZhciB2YWxpZGF0b3JzID0ge307XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5bJ29iamVjdCcsICdib29sZWFuJywgJ251bWJlcicsICdmdW5jdGlvbicsICdzdHJpbmcnLCAnc3ltYm9sJ10uZm9yRWFjaChmdW5jdGlvbih0eXBlLCBpKSB7XG4gIHZhbGlkYXRvcnNbdHlwZV0gPSBmdW5jdGlvbiB2YWxpZGF0b3IodGhpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaW5nID09PSB0eXBlIHx8ICdhJyArIChpIDwgMSA/ICduICcgOiAnICcpICsgdHlwZTtcbiAgfTtcbn0pO1xuXG52YXIgZGVwcmVjYXRlZFdhcm5pbmdzID0ge307XG5cbi8qKlxuICogVHJhbnNpdGlvbmFsIG9wdGlvbiB2YWxpZGF0b3JcbiAqIEBwYXJhbSB7ZnVuY3Rpb258Ym9vbGVhbj99IHZhbGlkYXRvciAtIHNldCB0byBmYWxzZSBpZiB0aGUgdHJhbnNpdGlvbmFsIG9wdGlvbiBoYXMgYmVlbiByZW1vdmVkXG4gKiBAcGFyYW0ge3N0cmluZz99IHZlcnNpb24gLSBkZXByZWNhdGVkIHZlcnNpb24gLyByZW1vdmVkIHNpbmNlIHZlcnNpb25cbiAqIEBwYXJhbSB7c3RyaW5nP30gbWVzc2FnZSAtIHNvbWUgbWVzc2FnZSB3aXRoIGFkZGl0aW9uYWwgaW5mb1xuICogQHJldHVybnMge2Z1bmN0aW9ufVxuICovXG52YWxpZGF0b3JzLnRyYW5zaXRpb25hbCA9IGZ1bmN0aW9uIHRyYW5zaXRpb25hbCh2YWxpZGF0b3IsIHZlcnNpb24sIG1lc3NhZ2UpIHtcbiAgZnVuY3Rpb24gZm9ybWF0TWVzc2FnZShvcHQsIGRlc2MpIHtcbiAgICByZXR1cm4gJ1tBeGlvcyB2JyArIFZFUlNJT04gKyAnXSBUcmFuc2l0aW9uYWwgb3B0aW9uIFxcJycgKyBvcHQgKyAnXFwnJyArIGRlc2MgKyAobWVzc2FnZSA/ICcuICcgKyBtZXNzYWdlIDogJycpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBvcHQsIG9wdHMpIHtcbiAgICBpZiAodmFsaWRhdG9yID09PSBmYWxzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdE1lc3NhZ2Uob3B0LCAnIGhhcyBiZWVuIHJlbW92ZWQnICsgKHZlcnNpb24gPyAnIGluICcgKyB2ZXJzaW9uIDogJycpKSk7XG4gICAgfVxuXG4gICAgaWYgKHZlcnNpb24gJiYgIWRlcHJlY2F0ZWRXYXJuaW5nc1tvcHRdKSB7XG4gICAgICBkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSA9IHRydWU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBmb3JtYXRNZXNzYWdlKFxuICAgICAgICAgIG9wdCxcbiAgICAgICAgICAnIGhhcyBiZWVuIGRlcHJlY2F0ZWQgc2luY2UgdicgKyB2ZXJzaW9uICsgJyBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZSdcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRhdG9yID8gdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdHMpIDogdHJ1ZTtcbiAgfTtcbn07XG5cbi8qKlxuICogQXNzZXJ0IG9iamVjdCdzIHByb3BlcnRpZXMgdHlwZVxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7b2JqZWN0fSBzY2hlbWFcbiAqIEBwYXJhbSB7Ym9vbGVhbj99IGFsbG93VW5rbm93blxuICovXG5cbmZ1bmN0aW9uIGFzc2VydE9wdGlvbnMob3B0aW9ucywgc2NoZW1hLCBhbGxvd1Vua25vd24pIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpO1xuICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tID4gMCkge1xuICAgIHZhciBvcHQgPSBrZXlzW2ldO1xuICAgIHZhciB2YWxpZGF0b3IgPSBzY2hlbWFbb3B0XTtcbiAgICBpZiAodmFsaWRhdG9yKSB7XG4gICAgICB2YXIgdmFsdWUgPSBvcHRpb25zW29wdF07XG4gICAgICB2YXIgcmVzdWx0ID0gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWxpZGF0b3IodmFsdWUsIG9wdCwgb3B0aW9ucyk7XG4gICAgICBpZiAocmVzdWx0ICE9PSB0cnVlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbiAnICsgb3B0ICsgJyBtdXN0IGJlICcgKyByZXN1bHQpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChhbGxvd1Vua25vd24gIT09IHRydWUpIHtcbiAgICAgIHRocm93IEVycm9yKCdVbmtub3duIG9wdGlvbiAnICsgb3B0KTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFzc2VydE9wdGlvbnM6IGFzc2VydE9wdGlvbnMsXG4gIHZhbGlkYXRvcnM6IHZhbGlkYXRvcnNcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBidWlsZFVSTCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyY2VwdG9yTWFuYWdlcicpO1xudmFyIGRpc3BhdGNoUmVxdWVzdCA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hSZXF1ZXN0Jyk7XG52YXIgbWVyZ2VDb25maWcgPSByZXF1aXJlKCcuL21lcmdlQ29uZmlnJyk7XG52YXIgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi4vaGVscGVycy92YWxpZGF0b3InKTtcblxudmFyIHZhbGlkYXRvcnMgPSB2YWxpZGF0b3IudmFsaWRhdG9ycztcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcbiAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAqL1xuQXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZ09yVXJsLCBjb25maWcpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIC8vIEFsbG93IGZvciBheGlvcygnZXhhbXBsZS91cmwnWywgY29uZmlnXSkgYSBsYSBmZXRjaCBBUElcbiAgaWYgKHR5cGVvZiBjb25maWdPclVybCA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG4gICAgY29uZmlnLnVybCA9IGNvbmZpZ09yVXJsO1xuICB9IGVsc2Uge1xuICAgIGNvbmZpZyA9IGNvbmZpZ09yVXJsIHx8IHt9O1xuICB9XG5cbiAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTtcblxuICAvLyBTZXQgY29uZmlnLm1ldGhvZFxuICBpZiAoY29uZmlnLm1ldGhvZCkge1xuICAgIGNvbmZpZy5tZXRob2QgPSBjb25maWcubWV0aG9kLnRvTG93ZXJDYXNlKCk7XG4gIH0gZWxzZSBpZiAodGhpcy5kZWZhdWx0cy5tZXRob2QpIHtcbiAgICBjb25maWcubWV0aG9kID0gdGhpcy5kZWZhdWx0cy5tZXRob2QudG9Mb3dlckNhc2UoKTtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcubWV0aG9kID0gJ2dldCc7XG4gIH1cblxuICB2YXIgdHJhbnNpdGlvbmFsID0gY29uZmlnLnRyYW5zaXRpb25hbDtcblxuICBpZiAodHJhbnNpdGlvbmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YWxpZGF0b3IuYXNzZXJ0T3B0aW9ucyh0cmFuc2l0aW9uYWwsIHtcbiAgICAgIHNpbGVudEpTT05QYXJzaW5nOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pLFxuICAgICAgZm9yY2VkSlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICBjbGFyaWZ5VGltZW91dEVycm9yOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pXG4gICAgfSwgZmFsc2UpO1xuICB9XG5cbiAgLy8gZmlsdGVyIG91dCBza2lwcGVkIGludGVyY2VwdG9yc1xuICB2YXIgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4gPSBbXTtcbiAgdmFyIHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHRydWU7XG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgIGlmICh0eXBlb2YgaW50ZXJjZXB0b3IucnVuV2hlbiA9PT0gJ2Z1bmN0aW9uJyAmJiBpbnRlcmNlcHRvci5ydW5XaGVuKGNvbmZpZykgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzID0gc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzICYmIGludGVyY2VwdG9yLnN5bmNocm9ub3VzO1xuXG4gICAgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgdmFyIHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICB0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIHB1c2hSZXNwb25zZUludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgIHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB2YXIgcHJvbWlzZTtcblxuICBpZiAoIXN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycykge1xuICAgIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07XG5cbiAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShjaGFpbiwgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4pO1xuICAgIGNoYWluID0gY2hhaW4uY29uY2F0KHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbik7XG5cbiAgICBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7XG4gICAgd2hpbGUgKGNoYWluLmxlbmd0aCkge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLCBjaGFpbi5zaGlmdCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG5cbiAgdmFyIG5ld0NvbmZpZyA9IGNvbmZpZztcbiAgd2hpbGUgKHJlcXVlc3RJbnRlcmNlcHRvckNoYWluLmxlbmd0aCkge1xuICAgIHZhciBvbkZ1bGZpbGxlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCk7XG4gICAgdmFyIG9uUmVqZWN0ZWQgPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi5zaGlmdCgpO1xuICAgIHRyeSB7XG4gICAgICBuZXdDb25maWcgPSBvbkZ1bGZpbGxlZChuZXdDb25maWcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBvblJlamVjdGVkKGVycm9yKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgcHJvbWlzZSA9IGRpc3BhdGNoUmVxdWVzdChuZXdDb25maWcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gIH1cblxuICB3aGlsZSAocmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLmxlbmd0aCkge1xuICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4ocmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCksIHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbi5zaGlmdCgpKTtcbiAgfVxuXG4gIHJldHVybiBwcm9taXNlO1xufTtcblxuQXhpb3MucHJvdG90eXBlLmdldFVyaSA9IGZ1bmN0aW9uIGdldFVyaShjb25maWcpIHtcbiAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTtcbiAgcmV0dXJuIGJ1aWxkVVJMKGNvbmZpZy51cmwsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKS5yZXBsYWNlKC9eXFw/LywgJycpO1xufTtcblxuLy8gUHJvdmlkZSBhbGlhc2VzIGZvciBzdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2RzXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ29wdGlvbnMnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QobWVyZ2VDb25maWcoY29uZmlnIHx8IHt9LCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJsLFxuICAgICAgZGF0YTogKGNvbmZpZyB8fCB7fSkuZGF0YVxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXhpb3M7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuL0NhbmNlbCcpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG5cbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gIH0pO1xuXG4gIHZhciB0b2tlbiA9IHRoaXM7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgdGhpcy5wcm9taXNlLnRoZW4oZnVuY3Rpb24oY2FuY2VsKSB7XG4gICAgaWYgKCF0b2tlbi5fbGlzdGVuZXJzKSByZXR1cm47XG5cbiAgICB2YXIgaTtcbiAgICB2YXIgbCA9IHRva2VuLl9saXN0ZW5lcnMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4uX2xpc3RlbmVyc1tpXShjYW5jZWwpO1xuICAgIH1cbiAgICB0b2tlbi5fbGlzdGVuZXJzID0gbnVsbDtcbiAgfSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgdGhpcy5wcm9taXNlLnRoZW4gPSBmdW5jdGlvbihvbmZ1bGZpbGxlZCkge1xuICAgIHZhciBfcmVzb2x2ZTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgdG9rZW4uc3Vic2NyaWJlKHJlc29sdmUpO1xuICAgICAgX3Jlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pLnRoZW4ob25mdWxmaWxsZWQpO1xuXG4gICAgcHJvbWlzZS5jYW5jZWwgPSBmdW5jdGlvbiByZWplY3QoKSB7XG4gICAgICB0b2tlbi51bnN1YnNjcmliZShfcmVzb2x2ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9O1xuXG4gIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG4gICAgaWYgKHRva2VuLnJlYXNvbikge1xuICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTtcbiAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZCA9IGZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKSB7XG4gIGlmICh0aGlzLnJlYXNvbikge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xuICB9XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZSB0byB0aGUgY2FuY2VsIHNpZ25hbFxuICovXG5cbkNhbmNlbFRva2VuLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgbGlzdGVuZXIodGhpcy5yZWFzb24pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0gW2xpc3RlbmVyXTtcbiAgfVxufTtcblxuLyoqXG4gKiBVbnN1YnNjcmliZSBmcm9tIHRoZSBjYW5jZWwgc2lnbmFsXG4gKi9cblxuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gdW5zdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgaWYgKCF0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGluZGV4ID0gdGhpcy5fbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLFxuICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC5cbiAqL1xuQ2FuY2VsVG9rZW4uc291cmNlID0gZnVuY3Rpb24gc291cmNlKCkge1xuICB2YXIgY2FuY2VsO1xuICB2YXIgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuICAgIGNhbmNlbCA9IGM7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHRva2VuOiB0b2tlbixcbiAgICBjYW5jZWw6IGNhbmNlbFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWxUb2tlbjtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikge1xuICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpO1xuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgcGF5bG9hZCBpcyBhbiBlcnJvciB0aHJvd24gYnkgQXhpb3NcbiAqXG4gKiBAcGFyYW0geyp9IHBheWxvYWQgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvcywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBeGlvc0Vycm9yKHBheWxvYWQpIHtcbiAgcmV0dXJuIHV0aWxzLmlzT2JqZWN0KHBheWxvYWQpICYmIChwYXlsb2FkLmlzQXhpb3NFcnJvciA9PT0gdHJ1ZSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG52YXIgQXhpb3MgPSByZXF1aXJlKCcuL2NvcmUvQXhpb3MnKTtcbnZhciBtZXJnZUNvbmZpZyA9IHJlcXVpcmUoJy4vY29yZS9tZXJnZUNvbmZpZycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXG4gIC8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcbiAgaW5zdGFuY2UuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKG1lcmdlQ29uZmlnKGRlZmF1bHRDb25maWcsIGluc3RhbmNlQ29uZmlnKSk7XG4gIH07XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG4vLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcbnZhciBheGlvcyA9IGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTtcblxuLy8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlXG5heGlvcy5BeGlvcyA9IEF4aW9zO1xuXG4vLyBFeHBvc2UgQ2FuY2VsICYgQ2FuY2VsVG9rZW5cbmF4aW9zLkNhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbCcpO1xuYXhpb3MuQ2FuY2VsVG9rZW4gPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWxUb2tlbicpO1xuYXhpb3MuaXNDYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9pc0NhbmNlbCcpO1xuYXhpb3MuVkVSU0lPTiA9IHJlcXVpcmUoJy4vZW52L2RhdGEnKS52ZXJzaW9uO1xuXG4vLyBFeHBvc2UgYWxsL3NwcmVhZFxuYXhpb3MuYWxsID0gZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG59O1xuYXhpb3Muc3ByZWFkID0gcmVxdWlyZSgnLi9oZWxwZXJzL3NwcmVhZCcpO1xuXG4vLyBFeHBvc2UgaXNBeGlvc0Vycm9yXG5heGlvcy5pc0F4aW9zRXJyb3IgPSByZXF1aXJlKCcuL2hlbHBlcnMvaXNBeGlvc0Vycm9yJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9heGlvcycpOyIsIlwidXNlIHN0cmljdFwiO1xuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIE9wZW5BSSBBUElcbiAqIEFQSXMgZm9yIHNhbXBsaW5nIGZyb20gYW5kIGZpbmUtdHVuaW5nIGxhbmd1YWdlIG1vZGVsc1xuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjIuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUmVxdWlyZWRFcnJvciA9IGV4cG9ydHMuQmFzZUFQSSA9IGV4cG9ydHMuQ09MTEVDVElPTl9GT1JNQVRTID0gZXhwb3J0cy5CQVNFX1BBVEggPSB2b2lkIDA7XG5jb25zdCBheGlvc18xID0gcmVxdWlyZShcImF4aW9zXCIpO1xuZXhwb3J0cy5CQVNFX1BBVEggPSBcImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjFcIi5yZXBsYWNlKC9cXC8rJC8sIFwiXCIpO1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLkNPTExFQ1RJT05fRk9STUFUUyA9IHtcbiAgICBjc3Y6IFwiLFwiLFxuICAgIHNzdjogXCIgXCIsXG4gICAgdHN2OiBcIlxcdFwiLFxuICAgIHBpcGVzOiBcInxcIixcbn07XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgQmFzZUFQSVxuICovXG5jbGFzcyBCYXNlQVBJIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWd1cmF0aW9uLCBiYXNlUGF0aCA9IGV4cG9ydHMuQkFTRV9QQVRILCBheGlvcyA9IGF4aW9zXzEuZGVmYXVsdCkge1xuICAgICAgICB0aGlzLmJhc2VQYXRoID0gYmFzZVBhdGg7XG4gICAgICAgIHRoaXMuYXhpb3MgPSBheGlvcztcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247XG4gICAgICAgICAgICB0aGlzLmJhc2VQYXRoID0gY29uZmlndXJhdGlvbi5iYXNlUGF0aCB8fCB0aGlzLmJhc2VQYXRoO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5CYXNlQVBJID0gQmFzZUFQSTtcbjtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBSZXF1aXJlZEVycm9yXG4gKiBAZXh0ZW5kcyB7RXJyb3J9XG4gKi9cbmNsYXNzIFJlcXVpcmVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZmllbGQsIG1zZykge1xuICAgICAgICBzdXBlcihtc2cpO1xuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiUmVxdWlyZWRFcnJvclwiO1xuICAgIH1cbn1cbmV4cG9ydHMuUmVxdWlyZWRFcnJvciA9IFJlcXVpcmVkRXJyb3I7XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBPcGVuQUkgQVBJXG4gKiBBUElzIGZvciBzYW1wbGluZyBmcm9tIGFuZCBmaW5lLXR1bmluZyBsYW5ndWFnZSBtb2RlbHNcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS4yLjBcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uID0gZXhwb3J0cy50b1BhdGhTdHJpbmcgPSBleHBvcnRzLnNlcmlhbGl6ZURhdGFJZk5lZWRlZCA9IGV4cG9ydHMuc2V0U2VhcmNoUGFyYW1zID0gZXhwb3J0cy5zZXRPQXV0aFRvT2JqZWN0ID0gZXhwb3J0cy5zZXRCZWFyZXJBdXRoVG9PYmplY3QgPSBleHBvcnRzLnNldEJhc2ljQXV0aFRvT2JqZWN0ID0gZXhwb3J0cy5zZXRBcGlLZXlUb09iamVjdCA9IGV4cG9ydHMuYXNzZXJ0UGFyYW1FeGlzdHMgPSBleHBvcnRzLkRVTU1ZX0JBU0VfVVJMID0gdm9pZCAwO1xuY29uc3QgYmFzZV8xID0gcmVxdWlyZShcIi4vYmFzZVwiKTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5EVU1NWV9CQVNFX1VSTCA9ICdodHRwczovL2V4YW1wbGUuY29tJztcbi8qKlxuICpcbiAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMuYXNzZXJ0UGFyYW1FeGlzdHMgPSBmdW5jdGlvbiAoZnVuY3Rpb25OYW1lLCBwYXJhbU5hbWUsIHBhcmFtVmFsdWUpIHtcbiAgICBpZiAocGFyYW1WYWx1ZSA9PT0gbnVsbCB8fCBwYXJhbVZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IGJhc2VfMS5SZXF1aXJlZEVycm9yKHBhcmFtTmFtZSwgYFJlcXVpcmVkIHBhcmFtZXRlciAke3BhcmFtTmFtZX0gd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyAke2Z1bmN0aW9uTmFtZX0uYCk7XG4gICAgfVxufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5zZXRBcGlLZXlUb09iamVjdCA9IGZ1bmN0aW9uIChvYmplY3QsIGtleVBhcmFtTmFtZSwgY29uZmlndXJhdGlvbikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckFwaUtleVZhbHVlID0gdHlwZW9mIGNvbmZpZ3VyYXRpb24uYXBpS2V5ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgPyB5aWVsZCBjb25maWd1cmF0aW9uLmFwaUtleShrZXlQYXJhbU5hbWUpXG4gICAgICAgICAgICAgICAgOiB5aWVsZCBjb25maWd1cmF0aW9uLmFwaUtleTtcbiAgICAgICAgICAgIG9iamVjdFtrZXlQYXJhbU5hbWVdID0gbG9jYWxWYXJBcGlLZXlWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5zZXRCYXNpY0F1dGhUb09iamVjdCA9IGZ1bmN0aW9uIChvYmplY3QsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICBpZiAoY29uZmlndXJhdGlvbiAmJiAoY29uZmlndXJhdGlvbi51c2VybmFtZSB8fCBjb25maWd1cmF0aW9uLnBhc3N3b3JkKSkge1xuICAgICAgICBvYmplY3RbXCJhdXRoXCJdID0geyB1c2VybmFtZTogY29uZmlndXJhdGlvbi51c2VybmFtZSwgcGFzc3dvcmQ6IGNvbmZpZ3VyYXRpb24ucGFzc3dvcmQgfTtcbiAgICB9XG59O1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnNldEJlYXJlckF1dGhUb09iamVjdCA9IGZ1bmN0aW9uIChvYmplY3QsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHR5cGVvZiBjb25maWd1cmF0aW9uLmFjY2Vzc1Rva2VuID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgPyB5aWVsZCBjb25maWd1cmF0aW9uLmFjY2Vzc1Rva2VuKClcbiAgICAgICAgICAgICAgICA6IHlpZWxkIGNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW47XG4gICAgICAgICAgICBvYmplY3RbXCJBdXRob3JpemF0aW9uXCJdID0gXCJCZWFyZXIgXCIgKyBhY2Nlc3NUb2tlbjtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5zZXRPQXV0aFRvT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgc2NvcGVzLCBjb25maWd1cmF0aW9uKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24gJiYgY29uZmlndXJhdGlvbi5hY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBY2Nlc3NUb2tlblZhbHVlID0gdHlwZW9mIGNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW4gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IHlpZWxkIGNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW4obmFtZSwgc2NvcGVzKVxuICAgICAgICAgICAgICAgIDogeWllbGQgY29uZmlndXJhdGlvbi5hY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgIG9iamVjdFtcIkF1dGhvcml6YXRpb25cIl0gPSBcIkJlYXJlciBcIiArIGxvY2FsVmFyQWNjZXNzVG9rZW5WYWx1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIHNldEZsYXR0ZW5lZFF1ZXJ5UGFyYW1zKHVybFNlYXJjaFBhcmFtcywgcGFyYW1ldGVyLCBrZXkgPSBcIlwiKSB7XG4gICAgaWYgKHBhcmFtZXRlciA9PSBudWxsKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKHR5cGVvZiBwYXJhbWV0ZXIgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyYW1ldGVyKSkge1xuICAgICAgICAgICAgcGFyYW1ldGVyLmZvckVhY2goaXRlbSA9PiBzZXRGbGF0dGVuZWRRdWVyeVBhcmFtcyh1cmxTZWFyY2hQYXJhbXMsIGl0ZW0sIGtleSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1ldGVyKS5mb3JFYWNoKGN1cnJlbnRLZXkgPT4gc2V0RmxhdHRlbmVkUXVlcnlQYXJhbXModXJsU2VhcmNoUGFyYW1zLCBwYXJhbWV0ZXJbY3VycmVudEtleV0sIGAke2tleX0ke2tleSAhPT0gJycgPyAnLicgOiAnJ30ke2N1cnJlbnRLZXl9YCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodXJsU2VhcmNoUGFyYW1zLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB1cmxTZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgcGFyYW1ldGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVybFNlYXJjaFBhcmFtcy5zZXQoa2V5LCBwYXJhbWV0ZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnNldFNlYXJjaFBhcmFtcyA9IGZ1bmN0aW9uICh1cmwsIC4uLm9iamVjdHMpIHtcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHVybC5zZWFyY2gpO1xuICAgIHNldEZsYXR0ZW5lZFF1ZXJ5UGFyYW1zKHNlYXJjaFBhcmFtcywgb2JqZWN0cyk7XG4gICAgdXJsLnNlYXJjaCA9IHNlYXJjaFBhcmFtcy50b1N0cmluZygpO1xufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5zZXJpYWxpemVEYXRhSWZOZWVkZWQgPSBmdW5jdGlvbiAodmFsdWUsIHJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKSB7XG4gICAgY29uc3Qgbm9uU3RyaW5nID0gdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJztcbiAgICBjb25zdCBuZWVkc1NlcmlhbGl6YXRpb24gPSBub25TdHJpbmcgJiYgY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmlzSnNvbk1pbWVcbiAgICAgICAgPyBjb25maWd1cmF0aW9uLmlzSnNvbk1pbWUocmVxdWVzdE9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10pXG4gICAgICAgIDogbm9uU3RyaW5nO1xuICAgIHJldHVybiBuZWVkc1NlcmlhbGl6YXRpb25cbiAgICAgICAgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiB7fSlcbiAgICAgICAgOiAodmFsdWUgfHwgXCJcIik7XG59O1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnRvUGF0aFN0cmluZyA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICByZXR1cm4gdXJsLnBhdGhuYW1lICsgdXJsLnNlYXJjaCArIHVybC5oYXNoO1xufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24gPSBmdW5jdGlvbiAoYXhpb3NBcmdzLCBnbG9iYWxBeGlvcywgQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKSB7XG4gICAgcmV0dXJuIChheGlvcyA9IGdsb2JhbEF4aW9zLCBiYXNlUGF0aCA9IEJBU0VfUEFUSCkgPT4ge1xuICAgICAgICBjb25zdCBheGlvc1JlcXVlc3RBcmdzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBheGlvc0FyZ3Mub3B0aW9ucyksIHsgdXJsOiAoKGNvbmZpZ3VyYXRpb24gPT09IG51bGwgfHwgY29uZmlndXJhdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29uZmlndXJhdGlvbi5iYXNlUGF0aCkgfHwgYmFzZVBhdGgpICsgYXhpb3NBcmdzLnVybCB9KTtcbiAgICAgICAgcmV0dXJuIGF4aW9zLnJlcXVlc3QoYXhpb3NSZXF1ZXN0QXJncyk7XG4gICAgfTtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBPcGVuQUkgQVBJXG4gKiBBUElzIGZvciBzYW1wbGluZyBmcm9tIGFuZCBmaW5lLXR1bmluZyBsYW5ndWFnZSBtb2RlbHNcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogMS4yLjBcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuT3BlbkFJQXBpID0gZXhwb3J0cy5PcGVuQUlBcGlGYWN0b3J5ID0gZXhwb3J0cy5PcGVuQUlBcGlGcCA9IGV4cG9ydHMuT3BlbkFJQXBpQXhpb3NQYXJhbUNyZWF0b3IgPSBleHBvcnRzLkNyZWF0ZUltYWdlUmVxdWVzdFJlc3BvbnNlRm9ybWF0RW51bSA9IGV4cG9ydHMuQ3JlYXRlSW1hZ2VSZXF1ZXN0U2l6ZUVudW0gPSBleHBvcnRzLkNoYXRDb21wbGV0aW9uUmVzcG9uc2VNZXNzYWdlUm9sZUVudW0gPSBleHBvcnRzLkNoYXRDb21wbGV0aW9uUmVxdWVzdE1lc3NhZ2VSb2xlRW51bSA9IHZvaWQgMDtcbmNvbnN0IGF4aW9zXzEgPSByZXF1aXJlKFwiYXhpb3NcIik7XG4vLyBTb21lIGltcG9ydHMgbm90IHVzZWQgZGVwZW5kaW5nIG9uIHRlbXBsYXRlIGNvbmRpdGlvbnNcbi8vIEB0cy1pZ25vcmVcbmNvbnN0IGNvbW1vbl8xID0gcmVxdWlyZShcIi4vY29tbW9uXCIpO1xuLy8gQHRzLWlnbm9yZVxuY29uc3QgYmFzZV8xID0gcmVxdWlyZShcIi4vYmFzZVwiKTtcbmV4cG9ydHMuQ2hhdENvbXBsZXRpb25SZXF1ZXN0TWVzc2FnZVJvbGVFbnVtID0ge1xuICAgIFN5c3RlbTogJ3N5c3RlbScsXG4gICAgVXNlcjogJ3VzZXInLFxuICAgIEFzc2lzdGFudDogJ2Fzc2lzdGFudCdcbn07XG5leHBvcnRzLkNoYXRDb21wbGV0aW9uUmVzcG9uc2VNZXNzYWdlUm9sZUVudW0gPSB7XG4gICAgU3lzdGVtOiAnc3lzdGVtJyxcbiAgICBVc2VyOiAndXNlcicsXG4gICAgQXNzaXN0YW50OiAnYXNzaXN0YW50J1xufTtcbmV4cG9ydHMuQ3JlYXRlSW1hZ2VSZXF1ZXN0U2l6ZUVudW0gPSB7XG4gICAgXzI1NngyNTY6ICcyNTZ4MjU2JyxcbiAgICBfNTEyeDUxMjogJzUxMng1MTInLFxuICAgIF8xMDI0eDEwMjQ6ICcxMDI0eDEwMjQnXG59O1xuZXhwb3J0cy5DcmVhdGVJbWFnZVJlcXVlc3RSZXNwb25zZUZvcm1hdEVudW0gPSB7XG4gICAgVXJsOiAndXJsJyxcbiAgICBCNjRKc29uOiAnYjY0X2pzb24nXG59O1xuLyoqXG4gKiBPcGVuQUlBcGkgLSBheGlvcyBwYXJhbWV0ZXIgY3JlYXRvclxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLk9wZW5BSUFwaUF4aW9zUGFyYW1DcmVhdG9yID0gZnVuY3Rpb24gKGNvbmZpZ3VyYXRpb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgSW1tZWRpYXRlbHkgY2FuY2VsIGEgZmluZS10dW5lIGpvYi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iIHRvIGNhbmNlbFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY2FuY2VsRmluZVR1bmU6IChmaW5lVHVuZUlkLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ZpbmVUdW5lSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NhbmNlbEZpbmVUdW5lJywgJ2ZpbmVUdW5lSWQnLCBmaW5lVHVuZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmluZS10dW5lcy97ZmluZV90dW5lX2lkfS9jYW5jZWxgXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiZmluZV90dW5lX2lkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZmluZVR1bmVJZCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBBbnN3ZXJzIHRoZSBzcGVjaWZpZWQgcXVlc3Rpb24gdXNpbmcgdGhlIHByb3ZpZGVkIGRvY3VtZW50cyBhbmQgZXhhbXBsZXMuICBUaGUgZW5kcG9pbnQgZmlyc3QgW3NlYXJjaGVzXSgvZG9jcy9hcGktcmVmZXJlbmNlL3NlYXJjaGVzKSBvdmVyIHByb3ZpZGVkIGRvY3VtZW50cyBvciBmaWxlcyB0byBmaW5kIHJlbGV2YW50IGNvbnRleHQuIFRoZSByZWxldmFudCBjb250ZXh0IGlzIGNvbWJpbmVkIHdpdGggdGhlIHByb3ZpZGVkIGV4YW1wbGVzIGFuZCBxdWVzdGlvbiB0byBjcmVhdGUgdGhlIHByb21wdCBmb3IgW2NvbXBsZXRpb25dKC9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMpLlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUFuc3dlclJlcXVlc3R9IGNyZWF0ZUFuc3dlclJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUFuc3dlcjogKGNyZWF0ZUFuc3dlclJlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlQW5zd2VyUmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlQW5zd2VyJywgJ2NyZWF0ZUFuc3dlclJlcXVlc3QnLCBjcmVhdGVBbnN3ZXJSZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvYW5zd2Vyc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZUFuc3dlclJlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBjaGF0IG1lc3NhZ2VcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3R9IGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ2hhdENvbXBsZXRpb246IChjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVDaGF0Q29tcGxldGlvbicsICdjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QnLCBjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9jaGF0L2NvbXBsZXRpb25zYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENsYXNzaWZpZXMgdGhlIHNwZWNpZmllZCBgcXVlcnlgIHVzaW5nIHByb3ZpZGVkIGV4YW1wbGVzLiAgVGhlIGVuZHBvaW50IGZpcnN0IFtzZWFyY2hlc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9zZWFyY2hlcykgb3ZlciB0aGUgbGFiZWxlZCBleGFtcGxlcyB0byBzZWxlY3QgdGhlIG9uZXMgbW9zdCByZWxldmFudCBmb3IgdGhlIHBhcnRpY3VsYXIgcXVlcnkuIFRoZW4sIHRoZSByZWxldmFudCBleGFtcGxlcyBhcmUgY29tYmluZWQgd2l0aCB0aGUgcXVlcnkgdG8gY29uc3RydWN0IGEgcHJvbXB0IHRvIHByb2R1Y2UgdGhlIGZpbmFsIGxhYmVsIHZpYSB0aGUgW2NvbXBsZXRpb25zXSgvZG9jcy9hcGktcmVmZXJlbmNlL2NvbXBsZXRpb25zKSBlbmRwb2ludC4gIExhYmVsZWQgZXhhbXBsZXMgY2FuIGJlIHByb3ZpZGVkIHZpYSBhbiB1cGxvYWRlZCBgZmlsZWAsIG9yIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSByZXF1ZXN0IHVzaW5nIHRoZSBgZXhhbXBsZXNgIHBhcmFtZXRlciBmb3IgcXVpY2sgdGVzdHMgYW5kIHNtYWxsIHNjYWxlIHVzZSBjYXNlcy5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3R9IGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ2xhc3NpZmljYXRpb246IChjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVDbGFzc2lmaWNhdGlvbicsICdjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QnLCBjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9jbGFzc2lmaWNhdGlvbnNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBwcm92aWRlZCBwcm9tcHQgYW5kIHBhcmFtZXRlcnNcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVDb21wbGV0aW9uUmVxdWVzdH0gY3JlYXRlQ29tcGxldGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNvbXBsZXRpb246IChjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlQ29tcGxldGlvbicsICdjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCcsIGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvY29tcGxldGlvbnNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgbmV3IGVkaXQgZm9yIHRoZSBwcm92aWRlZCBpbnB1dCwgaW5zdHJ1Y3Rpb24sIGFuZCBwYXJhbWV0ZXJzLlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUVkaXRSZXF1ZXN0fSBjcmVhdGVFZGl0UmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRWRpdDogKGNyZWF0ZUVkaXRSZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZUVkaXRSZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVFZGl0JywgJ2NyZWF0ZUVkaXRSZXF1ZXN0JywgY3JlYXRlRWRpdFJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9lZGl0c2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZUVkaXRSZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gZW1iZWRkaW5nIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGlucHV0IHRleHQuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlRW1iZWRkaW5nUmVxdWVzdH0gY3JlYXRlRW1iZWRkaW5nUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRW1iZWRkaW5nOiAoY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVFbWJlZGRpbmcnLCAnY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCcsIGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9lbWJlZGRpbmdzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBVcGxvYWQgYSBmaWxlIHRoYXQgY29udGFpbnMgZG9jdW1lbnQocykgdG8gYmUgdXNlZCBhY3Jvc3MgdmFyaW91cyBlbmRwb2ludHMvZmVhdHVyZXMuIEN1cnJlbnRseSwgdGhlIHNpemUgb2YgYWxsIHRoZSBmaWxlcyB1cGxvYWRlZCBieSBvbmUgb3JnYW5pemF0aW9uIGNhbiBiZSB1cCB0byAxIEdCLiBQbGVhc2UgY29udGFjdCB1cyBpZiB5b3UgbmVlZCB0byBpbmNyZWFzZSB0aGUgc3RvcmFnZSBsaW1pdC5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIE5hbWUgb2YgdGhlIFtKU09OIExpbmVzXShodHRwczovL2pzb25saW5lcy5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3QvKSBmaWxlIHRvIGJlIHVwbG9hZGVkLiAgSWYgdGhlICYjeDYwO3B1cnBvc2UmI3g2MDsgaXMgc2V0IHRvIFxcXFxcXCZxdW90O2ZpbmUtdHVuZVxcXFxcXCZxdW90OywgZWFjaCBsaW5lIGlzIGEgSlNPTiByZWNvcmQgd2l0aCBcXFxcXFwmcXVvdDtwcm9tcHRcXFxcXFwmcXVvdDsgYW5kIFxcXFxcXCZxdW90O2NvbXBsZXRpb25cXFxcXFwmcXVvdDsgZmllbGRzIHJlcHJlc2VudGluZyB5b3VyIFt0cmFpbmluZyBleGFtcGxlc10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nL3ByZXBhcmUtdHJhaW5pbmctZGF0YSkuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwdXJwb3NlIFRoZSBpbnRlbmRlZCBwdXJwb3NlIG9mIHRoZSB1cGxvYWRlZCBkb2N1bWVudHMuICBVc2UgXFxcXFxcJnF1b3Q7ZmluZS10dW5lXFxcXFxcJnF1b3Q7IGZvciBbRmluZS10dW5pbmddKC9kb2NzL2FwaS1yZWZlcmVuY2UvZmluZS10dW5lcykuIFRoaXMgYWxsb3dzIHVzIHRvIHZhbGlkYXRlIHRoZSBmb3JtYXQgb2YgdGhlIHVwbG9hZGVkIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVGaWxlOiAoZmlsZSwgcHVycG9zZSwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdmaWxlJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVGaWxlJywgJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ3B1cnBvc2UnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUZpbGUnLCAncHVycG9zZScsIHB1cnBvc2UpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maWxlc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJGb3JtUGFyYW1zID0gbmV3ICgoY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmZvcm1EYXRhQ3RvcikgfHwgRm9ybURhdGEpKCk7XG4gICAgICAgICAgICBpZiAoZmlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHB1cnBvc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3B1cnBvc2UnLCBwdXJwb3NlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGxvY2FsVmFyRm9ybVBhcmFtcy5nZXRIZWFkZXJzKCkpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGxvY2FsVmFyRm9ybVBhcmFtcztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBqb2IgdGhhdCBmaW5lLXR1bmVzIGEgc3BlY2lmaWVkIG1vZGVsIGZyb20gYSBnaXZlbiBkYXRhc2V0LiAgUmVzcG9uc2UgaW5jbHVkZXMgZGV0YWlscyBvZiB0aGUgZW5xdWV1ZWQgam9iIGluY2x1ZGluZyBqb2Igc3RhdHVzIGFuZCB0aGUgbmFtZSBvZiB0aGUgZmluZS10dW5lZCBtb2RlbHMgb25jZSBjb21wbGV0ZS4gIFtMZWFybiBtb3JlIGFib3V0IEZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlRmluZVR1bmVSZXF1ZXN0fSBjcmVhdGVGaW5lVHVuZVJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUZpbmVUdW5lOiAoY3JlYXRlRmluZVR1bmVSZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZUZpbmVUdW5lUmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlRmluZVR1bmUnLCAnY3JlYXRlRmluZVR1bmVSZXF1ZXN0JywgY3JlYXRlRmluZVR1bmVSZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmluZS10dW5lc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZUZpbmVUdW5lUmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGltYWdlIGdpdmVuIGEgcHJvbXB0LlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUltYWdlUmVxdWVzdH0gY3JlYXRlSW1hZ2VSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVJbWFnZTogKGNyZWF0ZUltYWdlUmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVJbWFnZVJlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUltYWdlJywgJ2NyZWF0ZUltYWdlUmVxdWVzdCcsIGNyZWF0ZUltYWdlUmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ltYWdlcy9nZW5lcmF0aW9uc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZUltYWdlUmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGVkaXRlZCBvciBleHRlbmRlZCBpbWFnZSBnaXZlbiBhbiBvcmlnaW5hbCBpbWFnZSBhbmQgYSBwcm9tcHQuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gaW1hZ2UgVGhlIGltYWdlIHRvIGVkaXQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS4gSWYgbWFzayBpcyBub3QgcHJvdmlkZWQsIGltYWdlIG11c3QgaGF2ZSB0cmFuc3BhcmVuY3ksIHdoaWNoIHdpbGwgYmUgdXNlZCBhcyB0aGUgbWFzay5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb21wdCBBIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGRlc2lyZWQgaW1hZ2UocykuIFRoZSBtYXhpbXVtIGxlbmd0aCBpcyAxMDAwIGNoYXJhY3RlcnMuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gW21hc2tdIEFuIGFkZGl0aW9uYWwgaW1hZ2Ugd2hvc2UgZnVsbHkgdHJhbnNwYXJlbnQgYXJlYXMgKGUuZy4gd2hlcmUgYWxwaGEgaXMgemVybykgaW5kaWNhdGUgd2hlcmUgJiN4NjA7aW1hZ2UmI3g2MDsgc2hvdWxkIGJlIGVkaXRlZC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb25zIGFzICYjeDYwO2ltYWdlJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc2l6ZV0gVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mICYjeDYwOzI1NngyNTYmI3g2MDssICYjeDYwOzUxMng1MTImI3g2MDssIG9yICYjeDYwOzEwMjR4MTAyNCYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mICYjeDYwO3VybCYjeDYwOyBvciAmI3g2MDtiNjRfanNvbiYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VyXSBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlSW1hZ2VFZGl0OiAoaW1hZ2UsIHByb21wdCwgbWFzaywgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnaW1hZ2UnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUltYWdlRWRpdCcsICdpbWFnZScsIGltYWdlKTtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ3Byb21wdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlSW1hZ2VFZGl0JywgJ3Byb21wdCcsIHByb21wdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ltYWdlcy9lZGl0c2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJGb3JtUGFyYW1zID0gbmV3ICgoY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmZvcm1EYXRhQ3RvcikgfHwgRm9ybURhdGEpKCk7XG4gICAgICAgICAgICBpZiAoaW1hZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ2ltYWdlJywgaW1hZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1hc2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ21hc2snLCBtYXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9tcHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3Byb21wdCcsIHByb21wdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnbicsIG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3NpemUnLCBzaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXNwb25zZUZvcm1hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgncmVzcG9uc2VfZm9ybWF0JywgcmVzcG9uc2VGb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVzZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3VzZXInLCB1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGxvY2FsVmFyRm9ybVBhcmFtcy5nZXRIZWFkZXJzKCkpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGxvY2FsVmFyRm9ybVBhcmFtcztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSB2YXJpYXRpb24gb2YgYSBnaXZlbiBpbWFnZS5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBpbWFnZSBUaGUgaW1hZ2UgdG8gdXNlIGFzIHRoZSBiYXNpcyBmb3IgdGhlIHZhcmlhdGlvbihzKS4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc2l6ZV0gVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mICYjeDYwOzI1NngyNTYmI3g2MDssICYjeDYwOzUxMng1MTImI3g2MDssIG9yICYjeDYwOzEwMjR4MTAyNCYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mICYjeDYwO3VybCYjeDYwOyBvciAmI3g2MDtiNjRfanNvbiYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VyXSBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlSW1hZ2VWYXJpYXRpb246IChpbWFnZSwgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnaW1hZ2UnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUltYWdlVmFyaWF0aW9uJywgJ2ltYWdlJywgaW1hZ2UpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9pbWFnZXMvdmFyaWF0aW9uc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJGb3JtUGFyYW1zID0gbmV3ICgoY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmZvcm1EYXRhQ3RvcikgfHwgRm9ybURhdGEpKCk7XG4gICAgICAgICAgICBpZiAoaW1hZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ2ltYWdlJywgaW1hZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ24nLCBuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdzaXplJywgc2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VGb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3Jlc3BvbnNlX2Zvcm1hdCcsIHJlc3BvbnNlRm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1c2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCd1c2VyJywgdXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSc7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBsb2NhbFZhckZvcm1QYXJhbXMuZ2V0SGVhZGVycygpKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBsb2NhbFZhckZvcm1QYXJhbXM7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDbGFzc2lmaWVzIGlmIHRleHQgdmlvbGF0ZXMgT3BlbkFJXFwncyBDb250ZW50IFBvbGljeVxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0fSBjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlTW9kZXJhdGlvbjogKGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVNb2RlcmF0aW9uJywgJ2NyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0JywgY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9tb2RlcmF0aW9uc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFRoZSBzZWFyY2ggZW5kcG9pbnQgY29tcHV0ZXMgc2ltaWxhcml0eSBzY29yZXMgYmV0d2VlbiBwcm92aWRlZCBxdWVyeSBhbmQgZG9jdW1lbnRzLiBEb2N1bWVudHMgY2FuIGJlIHBhc3NlZCBkaXJlY3RseSB0byB0aGUgQVBJIGlmIHRoZXJlIGFyZSBubyBtb3JlIHRoYW4gMjAwIG9mIHRoZW0uICBUbyBnbyBiZXlvbmQgdGhlIDIwMCBkb2N1bWVudCBsaW1pdCwgZG9jdW1lbnRzIGNhbiBiZSBwcm9jZXNzZWQgb2ZmbGluZSBhbmQgdGhlbiB1c2VkIGZvciBlZmZpY2llbnQgcmV0cmlldmFsIGF0IHF1ZXJ5IHRpbWUuIFdoZW4gYGZpbGVgIGlzIHNldCwgdGhlIHNlYXJjaCBlbmRwb2ludCBzZWFyY2hlcyBvdmVyIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBnaXZlbiBmaWxlIGFuZCByZXR1cm5zIHVwIHRvIHRoZSBgbWF4X3JlcmFua2AgbnVtYmVyIG9mIGRvY3VtZW50cy4gVGhlc2UgZG9jdW1lbnRzIHdpbGwgYmUgcmV0dXJuZWQgYWxvbmcgd2l0aCB0aGVpciBzZWFyY2ggc2NvcmVzLiAgVGhlIHNpbWlsYXJpdHkgc2NvcmUgaXMgYSBwb3NpdGl2ZSBzY29yZSB0aGF0IHVzdWFsbHkgcmFuZ2VzIGZyb20gMCB0byAzMDAgKGJ1dCBjYW4gc29tZXRpbWVzIGdvIGhpZ2hlciksIHdoZXJlIGEgc2NvcmUgYWJvdmUgMjAwIHVzdWFsbHkgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHNlbWFudGljYWxseSBzaW1pbGFyIHRvIHRoZSBxdWVyeS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVuZ2luZUlkIFRoZSBJRCBvZiB0aGUgZW5naW5lIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0LiAgWW91IGNhbiBzZWxlY3Qgb25lIG9mICYjeDYwO2FkYSYjeDYwOywgJiN4NjA7YmFiYmFnZSYjeDYwOywgJiN4NjA7Y3VyaWUmI3g2MDssIG9yICYjeDYwO2RhdmluY2kmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlU2VhcmNoUmVxdWVzdH0gY3JlYXRlU2VhcmNoUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlU2VhcmNoOiAoZW5naW5lSWQsIGNyZWF0ZVNlYXJjaFJlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZW5naW5lSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZVNlYXJjaCcsICdlbmdpbmVJZCcsIGVuZ2luZUlkKTtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZVNlYXJjaFJlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZVNlYXJjaCcsICdjcmVhdGVTZWFyY2hSZXF1ZXN0JywgY3JlYXRlU2VhcmNoUmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2VuZ2luZXMve2VuZ2luZV9pZH0vc2VhcmNoYFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcImVuZ2luZV9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGVuZ2luZUlkKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVTZWFyY2hSZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFRyYW5zY3JpYmVzIGF1ZGlvIGludG8gdGhlIGlucHV0IGxhbmd1YWdlLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIGF1ZGlvIGZpbGUgdG8gdHJhbnNjcmliZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6IG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIHdhdiwgb3Igd2VibS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgJiN4NjA7d2hpc3Blci0xJiN4NjA7IGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvbXB0XSBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbFxcXFxcXCYjMzk7cyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgbWF0Y2ggdGhlIGF1ZGlvIGxhbmd1YWdlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCwgdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGVtcGVyYXR1cmVdIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZSBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhbmd1YWdlXSBUaGUgbGFuZ3VhZ2Ugb2YgdGhlIGlucHV0IGF1ZGlvLiBTdXBwbHlpbmcgdGhlIGlucHV0IGxhbmd1YWdlIGluIFtJU08tNjM5LTFdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfSVNPXzYzOS0xX2NvZGVzKSBmb3JtYXQgd2lsbCBpbXByb3ZlIGFjY3VyYWN5IGFuZCBsYXRlbmN5LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlVHJhbnNjcmlwdGlvbjogKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgbGFuZ3VhZ2UsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZmlsZScgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlVHJhbnNjcmlwdGlvbicsICdmaWxlJywgZmlsZSk7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdtb2RlbCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlVHJhbnNjcmlwdGlvbicsICdtb2RlbCcsIG1vZGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvYXVkaW8vdHJhbnNjcmlwdGlvbnNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyRm9ybVBhcmFtcyA9IG5ldyAoKGNvbmZpZ3VyYXRpb24gJiYgY29uZmlndXJhdGlvbi5mb3JtRGF0YUN0b3IpIHx8IEZvcm1EYXRhKSgpO1xuICAgICAgICAgICAgaWYgKGZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb2RlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnbW9kZWwnLCBtb2RlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvbXB0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdwcm9tcHQnLCBwcm9tcHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlRm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdyZXNwb25zZV9mb3JtYXQnLCByZXNwb25zZUZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGVtcGVyYXR1cmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3RlbXBlcmF0dXJlJywgdGVtcGVyYXR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxhbmd1YWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdsYW5ndWFnZScsIGxhbmd1YWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGxvY2FsVmFyRm9ybVBhcmFtcy5nZXRIZWFkZXJzKCkpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGxvY2FsVmFyRm9ybVBhcmFtcztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFRyYW5zbGF0ZXMgYXVkaW8gaW50byBpbnRvIEVuZ2xpc2guXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgYXVkaW8gZmlsZSB0byB0cmFuc2xhdGUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOiBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCB3YXYsIG9yIHdlYm0uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5ICYjeDYwO3doaXNwZXItMSYjeDYwOyBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Byb21wdF0gQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWxcXFxcXFwmIzM5O3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIGJlIGluIEVuZ2xpc2guXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LCB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFt0ZW1wZXJhdHVyZV0gVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG8gYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVUcmFuc2xhdGlvbjogKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdmaWxlJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVUcmFuc2xhdGlvbicsICdmaWxlJywgZmlsZSk7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdtb2RlbCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlVHJhbnNsYXRpb24nLCAnbW9kZWwnLCBtb2RlbCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2F1ZGlvL3RyYW5zbGF0aW9uc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJGb3JtUGFyYW1zID0gbmV3ICgoY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmZvcm1EYXRhQ3RvcikgfHwgRm9ybURhdGEpKCk7XG4gICAgICAgICAgICBpZiAoZmlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vZGVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdtb2RlbCcsIG1vZGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9tcHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3Byb21wdCcsIHByb21wdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VGb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3Jlc3BvbnNlX2Zvcm1hdCcsIHJlc3BvbnNlRm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ZW1wZXJhdHVyZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgndGVtcGVyYXR1cmUnLCB0ZW1wZXJhdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSc7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBsb2NhbFZhckZvcm1QYXJhbXMuZ2V0SGVhZGVycygpKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBsb2NhbFZhckZvcm1QYXJhbXM7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBEZWxldGUgYSBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlRmlsZTogKGZpbGVJZCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdmaWxlSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2RlbGV0ZUZpbGUnLCAnZmlsZUlkJywgZmlsZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmlsZXMve2ZpbGVfaWR9YFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcImZpbGVfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhmaWxlSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0RFTEVURScgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBEZWxldGUgYSBmaW5lLXR1bmVkIG1vZGVsLiBZb3UgbXVzdCBoYXZlIHRoZSBPd25lciByb2xlIGluIHlvdXIgb3JnYW5pemF0aW9uLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgVGhlIG1vZGVsIHRvIGRlbGV0ZVxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlTW9kZWw6IChtb2RlbCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdtb2RlbCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnZGVsZXRlTW9kZWwnLCAnbW9kZWwnLCBtb2RlbCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL21vZGVscy97bW9kZWx9YFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcIm1vZGVsXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcobW9kZWwpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0RFTEVURScgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIHRoZSBjb250ZW50cyBvZiB0aGUgc3BlY2lmaWVkIGZpbGVcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGRvd25sb2FkRmlsZTogKGZpbGVJZCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdmaWxlSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2Rvd25sb2FkRmlsZScsICdmaWxlSWQnLCBmaWxlSWQpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maWxlcy97ZmlsZV9pZH0vY29udGVudGBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJmaWxlX2lkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZmlsZUlkKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgKG5vbi1maW5ldHVuZWQpIG1vZGVscywgYW5kIHByb3ZpZGVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVhY2ggb25lIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RW5naW5lczogKG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9lbmdpbmVzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHVybnMgYSBsaXN0IG9mIGZpbGVzIHRoYXQgYmVsb25nIHRvIHRoZSB1c2VyXFwncyBvcmdhbml6YXRpb24uXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RmlsZXM6IChvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmlsZXNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgR2V0IGZpbmUtZ3JhaW5lZCBzdGF0dXMgdXBkYXRlcyBmb3IgYSBmaW5lLXR1bmUgam9iLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2IgdG8gZ2V0IGV2ZW50cyBmb3IuXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0cmVhbV0gV2hldGhlciB0byBzdHJlYW0gZXZlbnRzIGZvciB0aGUgZmluZS10dW5lIGpvYi4gSWYgc2V0IHRvIHRydWUsIGV2ZW50cyB3aWxsIGJlIHNlbnQgYXMgZGF0YS1vbmx5IFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZS4gVGhlIHN0cmVhbSB3aWxsIHRlcm1pbmF0ZSB3aXRoIGEgJiN4NjA7ZGF0YTogW0RPTkVdJiN4NjA7IG1lc3NhZ2Ugd2hlbiB0aGUgam9iIGlzIGZpbmlzaGVkIChzdWNjZWVkZWQsIGNhbmNlbGxlZCwgb3IgZmFpbGVkKS4gIElmIHNldCB0byBmYWxzZSwgb25seSBldmVudHMgZ2VuZXJhdGVkIHNvIGZhciB3aWxsIGJlIHJldHVybmVkLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEZpbmVUdW5lRXZlbnRzOiAoZmluZVR1bmVJZCwgc3RyZWFtLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ZpbmVUdW5lSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2xpc3RGaW5lVHVuZUV2ZW50cycsICdmaW5lVHVuZUlkJywgZmluZVR1bmVJZCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbmUtdHVuZXMve2ZpbmVfdHVuZV9pZH0vZXZlbnRzYFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcImZpbmVfdHVuZV9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGZpbmVUdW5lSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBpZiAoc3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyWydzdHJlYW0nXSA9IHN0cmVhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IExpc3QgeW91ciBvcmdhbml6YXRpb25cXCdzIGZpbmUtdHVuaW5nIGpvYnNcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RGaW5lVHVuZXM6IChvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmluZS10dW5lc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdE1vZGVsczogKG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9tb2RlbHNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0cmlldmVzIGEgbW9kZWwgaW5zdGFuY2UsIHByb3ZpZGluZyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBpdCBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5naW5lSWQgVGhlIElEIG9mIHRoZSBlbmdpbmUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlRW5naW5lOiAoZW5naW5lSWQsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZW5naW5lSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ3JldHJpZXZlRW5naW5lJywgJ2VuZ2luZUlkJywgZW5naW5lSWQpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9lbmdpbmVzL3tlbmdpbmVfaWR9YFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcImVuZ2luZV9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGVuZ2luZUlkKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZUZpbGU6IChmaWxlSWQsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZmlsZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdyZXRyaWV2ZUZpbGUnLCAnZmlsZUlkJywgZmlsZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmlsZXMve2ZpbGVfaWR9YFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcImZpbGVfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhmaWxlSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBHZXRzIGluZm8gYWJvdXQgdGhlIGZpbmUtdHVuZSBqb2IuICBbTGVhcm4gbW9yZSBhYm91dCBGaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2JcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlRmluZVR1bmU6IChmaW5lVHVuZUlkLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ZpbmVUdW5lSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ3JldHJpZXZlRmluZVR1bmUnLCAnZmluZVR1bmVJZCcsIGZpbmVUdW5lSWQpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maW5lLXR1bmVzL3tmaW5lX3R1bmVfaWR9YFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcImZpbmVfdHVuZV9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGZpbmVUdW5lSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXRyaWV2ZXMgYSBtb2RlbCBpbnN0YW5jZSwgcHJvdmlkaW5nIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtb2RlbCBzdWNoIGFzIHRoZSBvd25lciBhbmQgcGVybWlzc2lvbmluZy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIFRoZSBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlTW9kZWw6IChtb2RlbCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdtb2RlbCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygncmV0cmlldmVNb2RlbCcsICdtb2RlbCcsIG1vZGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvbW9kZWxzL3ttb2RlbH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wibW9kZWxcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhtb2RlbCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICB9O1xufTtcbi8qKlxuICogT3BlbkFJQXBpIC0gZnVuY3Rpb25hbCBwcm9ncmFtbWluZyBpbnRlcmZhY2VcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5PcGVuQUlBcGlGcCA9IGZ1bmN0aW9uIChjb25maWd1cmF0aW9uKSB7XG4gICAgY29uc3QgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvciA9IGV4cG9ydHMuT3BlbkFJQXBpQXhpb3NQYXJhbUNyZWF0b3IoY29uZmlndXJhdGlvbik7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEltbWVkaWF0ZWx5IGNhbmNlbCBhIGZpbmUtdHVuZSBqb2IuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYiB0byBjYW5jZWxcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNhbmNlbEZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNhbmNlbEZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEFuc3dlcnMgdGhlIHNwZWNpZmllZCBxdWVzdGlvbiB1c2luZyB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzIGFuZCBleGFtcGxlcy4gIFRoZSBlbmRwb2ludCBmaXJzdCBbc2VhcmNoZXNdKC9kb2NzL2FwaS1yZWZlcmVuY2Uvc2VhcmNoZXMpIG92ZXIgcHJvdmlkZWQgZG9jdW1lbnRzIG9yIGZpbGVzIHRvIGZpbmQgcmVsZXZhbnQgY29udGV4dC4gVGhlIHJlbGV2YW50IGNvbnRleHQgaXMgY29tYmluZWQgd2l0aCB0aGUgcHJvdmlkZWQgZXhhbXBsZXMgYW5kIHF1ZXN0aW9uIHRvIGNyZWF0ZSB0aGUgcHJvbXB0IGZvciBbY29tcGxldGlvbl0oL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucykuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQW5zd2VyUmVxdWVzdH0gY3JlYXRlQW5zd2VyUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQW5zd2VyKGNyZWF0ZUFuc3dlclJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUFuc3dlcihjcmVhdGVBbnN3ZXJSZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgY29tcGxldGlvbiBmb3IgdGhlIGNoYXQgbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdH0gY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVDaGF0Q29tcGxldGlvbihjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUNoYXRDb21wbGV0aW9uKGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ2xhc3NpZmllcyB0aGUgc3BlY2lmaWVkIGBxdWVyeWAgdXNpbmcgcHJvdmlkZWQgZXhhbXBsZXMuICBUaGUgZW5kcG9pbnQgZmlyc3QgW3NlYXJjaGVzXSgvZG9jcy9hcGktcmVmZXJlbmNlL3NlYXJjaGVzKSBvdmVyIHRoZSBsYWJlbGVkIGV4YW1wbGVzIHRvIHNlbGVjdCB0aGUgb25lcyBtb3N0IHJlbGV2YW50IGZvciB0aGUgcGFydGljdWxhciBxdWVyeS4gVGhlbiwgdGhlIHJlbGV2YW50IGV4YW1wbGVzIGFyZSBjb21iaW5lZCB3aXRoIHRoZSBxdWVyeSB0byBjb25zdHJ1Y3QgYSBwcm9tcHQgdG8gcHJvZHVjZSB0aGUgZmluYWwgbGFiZWwgdmlhIHRoZSBbY29tcGxldGlvbnNdKC9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMpIGVuZHBvaW50LiAgTGFiZWxlZCBleGFtcGxlcyBjYW4gYmUgcHJvdmlkZWQgdmlhIGFuIHVwbG9hZGVkIGBmaWxlYCwgb3IgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIHJlcXVlc3QgdXNpbmcgdGhlIGBleGFtcGxlc2AgcGFyYW1ldGVyIGZvciBxdWljayB0ZXN0cyBhbmQgc21hbGwgc2NhbGUgdXNlIGNhc2VzLlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdH0gY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVDbGFzc2lmaWNhdGlvbihjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUNsYXNzaWZpY2F0aW9uKGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBwcm92aWRlZCBwcm9tcHQgYW5kIHBhcmFtZXRlcnNcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVDb21wbGV0aW9uUmVxdWVzdH0gY3JlYXRlQ29tcGxldGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNvbXBsZXRpb24oY3JlYXRlQ29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUNvbXBsZXRpb24oY3JlYXRlQ29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBuZXcgZWRpdCBmb3IgdGhlIHByb3ZpZGVkIGlucHV0LCBpbnN0cnVjdGlvbiwgYW5kIHBhcmFtZXRlcnMuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlRWRpdFJlcXVlc3R9IGNyZWF0ZUVkaXRSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVFZGl0KGNyZWF0ZUVkaXRSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVFZGl0KGNyZWF0ZUVkaXRSZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGVtYmVkZGluZyB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBpbnB1dCB0ZXh0LlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUVtYmVkZGluZ1JlcXVlc3R9IGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUVtYmVkZGluZyhjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVFbWJlZGRpbmcoY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVXBsb2FkIGEgZmlsZSB0aGF0IGNvbnRhaW5zIGRvY3VtZW50KHMpIHRvIGJlIHVzZWQgYWNyb3NzIHZhcmlvdXMgZW5kcG9pbnRzL2ZlYXR1cmVzLiBDdXJyZW50bHksIHRoZSBzaXplIG9mIGFsbCB0aGUgZmlsZXMgdXBsb2FkZWQgYnkgb25lIG9yZ2FuaXphdGlvbiBjYW4gYmUgdXAgdG8gMSBHQi4gUGxlYXNlIGNvbnRhY3QgdXMgaWYgeW91IG5lZWQgdG8gaW5jcmVhc2UgdGhlIHN0b3JhZ2UgbGltaXQuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBOYW1lIG9mIHRoZSBbSlNPTiBMaW5lc10oaHR0cHM6Ly9qc29ubGluZXMucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0LykgZmlsZSB0byBiZSB1cGxvYWRlZC4gIElmIHRoZSAmI3g2MDtwdXJwb3NlJiN4NjA7IGlzIHNldCB0byBcXFxcXFwmcXVvdDtmaW5lLXR1bmVcXFxcXFwmcXVvdDssIGVhY2ggbGluZSBpcyBhIEpTT04gcmVjb3JkIHdpdGggXFxcXFxcJnF1b3Q7cHJvbXB0XFxcXFxcJnF1b3Q7IGFuZCBcXFxcXFwmcXVvdDtjb21wbGV0aW9uXFxcXFxcJnF1b3Q7IGZpZWxkcyByZXByZXNlbnRpbmcgeW91ciBbdHJhaW5pbmcgZXhhbXBsZXNdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZy9wcmVwYXJlLXRyYWluaW5nLWRhdGEpLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHVycG9zZSBUaGUgaW50ZW5kZWQgcHVycG9zZSBvZiB0aGUgdXBsb2FkZWQgZG9jdW1lbnRzLiAgVXNlIFxcXFxcXCZxdW90O2ZpbmUtdHVuZVxcXFxcXCZxdW90OyBmb3IgW0ZpbmUtdHVuaW5nXSgvZG9jcy9hcGktcmVmZXJlbmNlL2ZpbmUtdHVuZXMpLiBUaGlzIGFsbG93cyB1cyB0byB2YWxpZGF0ZSB0aGUgZm9ybWF0IG9mIHRoZSB1cGxvYWRlZCBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRmlsZShmaWxlLCBwdXJwb3NlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVGaWxlKGZpbGUsIHB1cnBvc2UsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBqb2IgdGhhdCBmaW5lLXR1bmVzIGEgc3BlY2lmaWVkIG1vZGVsIGZyb20gYSBnaXZlbiBkYXRhc2V0LiAgUmVzcG9uc2UgaW5jbHVkZXMgZGV0YWlscyBvZiB0aGUgZW5xdWV1ZWQgam9iIGluY2x1ZGluZyBqb2Igc3RhdHVzIGFuZCB0aGUgbmFtZSBvZiB0aGUgZmluZS10dW5lZCBtb2RlbHMgb25jZSBjb21wbGV0ZS4gIFtMZWFybiBtb3JlIGFib3V0IEZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlRmluZVR1bmVSZXF1ZXN0fSBjcmVhdGVGaW5lVHVuZVJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUZpbmVUdW5lKGNyZWF0ZUZpbmVUdW5lUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlRmluZVR1bmUoY3JlYXRlRmluZVR1bmVSZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGltYWdlIGdpdmVuIGEgcHJvbXB0LlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUltYWdlUmVxdWVzdH0gY3JlYXRlSW1hZ2VSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVJbWFnZShjcmVhdGVJbWFnZVJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUltYWdlKGNyZWF0ZUltYWdlUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBlZGl0ZWQgb3IgZXh0ZW5kZWQgaW1hZ2UgZ2l2ZW4gYW4gb3JpZ2luYWwgaW1hZ2UgYW5kIGEgcHJvbXB0LlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGltYWdlIFRoZSBpbWFnZSB0byBlZGl0LiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuIElmIG1hc2sgaXMgbm90IHByb3ZpZGVkLCBpbWFnZSBtdXN0IGhhdmUgdHJhbnNwYXJlbmN5LCB3aGljaCB3aWxsIGJlIHVzZWQgYXMgdGhlIG1hc2suXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9tcHQgQSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBkZXNpcmVkIGltYWdlKHMpLiBUaGUgbWF4aW11bSBsZW5ndGggaXMgMTAwMCBjaGFyYWN0ZXJzLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IFttYXNrXSBBbiBhZGRpdGlvbmFsIGltYWdlIHdob3NlIGZ1bGx5IHRyYW5zcGFyZW50IGFyZWFzIChlLmcuIHdoZXJlIGFscGhhIGlzIHplcm8pIGluZGljYXRlIHdoZXJlICYjeDYwO2ltYWdlJiN4NjA7IHNob3VsZCBiZSBlZGl0ZWQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9ucyBhcyAmI3g2MDtpbWFnZSYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NpemVdIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDsyNTZ4MjU2JiN4NjA7LCAmI3g2MDs1MTJ4NTEyJiN4NjA7LCBvciAmI3g2MDsxMDI0eDEwMjQmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDt1cmwmI3g2MDsgb3IgJiN4NjA7YjY0X2pzb24mI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcl0gQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUltYWdlRWRpdChpbWFnZSwgcHJvbXB0LCBtYXNrLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlSW1hZ2VFZGl0KGltYWdlLCBwcm9tcHQsIG1hc2ssIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgdmFyaWF0aW9uIG9mIGEgZ2l2ZW4gaW1hZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gaW1hZ2UgVGhlIGltYWdlIHRvIHVzZSBhcyB0aGUgYmFzaXMgZm9yIHRoZSB2YXJpYXRpb24ocykuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NpemVdIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDsyNTZ4MjU2JiN4NjA7LCAmI3g2MDs1MTJ4NTEyJiN4NjA7LCBvciAmI3g2MDsxMDI0eDEwMjQmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDt1cmwmI3g2MDsgb3IgJiN4NjA7YjY0X2pzb24mI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcl0gQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUltYWdlVmFyaWF0aW9uKGltYWdlLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlSW1hZ2VWYXJpYXRpb24oaW1hZ2UsIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDbGFzc2lmaWVzIGlmIHRleHQgdmlvbGF0ZXMgT3BlbkFJXFwncyBDb250ZW50IFBvbGljeVxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0fSBjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlTW9kZXJhdGlvbihjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlTW9kZXJhdGlvbihjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVGhlIHNlYXJjaCBlbmRwb2ludCBjb21wdXRlcyBzaW1pbGFyaXR5IHNjb3JlcyBiZXR3ZWVuIHByb3ZpZGVkIHF1ZXJ5IGFuZCBkb2N1bWVudHMuIERvY3VtZW50cyBjYW4gYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBBUEkgaWYgdGhlcmUgYXJlIG5vIG1vcmUgdGhhbiAyMDAgb2YgdGhlbS4gIFRvIGdvIGJleW9uZCB0aGUgMjAwIGRvY3VtZW50IGxpbWl0LCBkb2N1bWVudHMgY2FuIGJlIHByb2Nlc3NlZCBvZmZsaW5lIGFuZCB0aGVuIHVzZWQgZm9yIGVmZmljaWVudCByZXRyaWV2YWwgYXQgcXVlcnkgdGltZS4gV2hlbiBgZmlsZWAgaXMgc2V0LCB0aGUgc2VhcmNoIGVuZHBvaW50IHNlYXJjaGVzIG92ZXIgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGdpdmVuIGZpbGUgYW5kIHJldHVybnMgdXAgdG8gdGhlIGBtYXhfcmVyYW5rYCBudW1iZXIgb2YgZG9jdW1lbnRzLiBUaGVzZSBkb2N1bWVudHMgd2lsbCBiZSByZXR1cm5lZCBhbG9uZyB3aXRoIHRoZWlyIHNlYXJjaCBzY29yZXMuICBUaGUgc2ltaWxhcml0eSBzY29yZSBpcyBhIHBvc2l0aXZlIHNjb3JlIHRoYXQgdXN1YWxseSByYW5nZXMgZnJvbSAwIHRvIDMwMCAoYnV0IGNhbiBzb21ldGltZXMgZ28gaGlnaGVyKSwgd2hlcmUgYSBzY29yZSBhYm92ZSAyMDAgdXN1YWxseSBtZWFucyB0aGUgZG9jdW1lbnQgaXMgc2VtYW50aWNhbGx5IHNpbWlsYXIgdG8gdGhlIHF1ZXJ5LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5naW5lSWQgVGhlIElEIG9mIHRoZSBlbmdpbmUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3QuICBZb3UgY2FuIHNlbGVjdCBvbmUgb2YgJiN4NjA7YWRhJiN4NjA7LCAmI3g2MDtiYWJiYWdlJiN4NjA7LCAmI3g2MDtjdXJpZSYjeDYwOywgb3IgJiN4NjA7ZGF2aW5jaSYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVTZWFyY2hSZXF1ZXN0fSBjcmVhdGVTZWFyY2hSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVTZWFyY2goZW5naW5lSWQsIGNyZWF0ZVNlYXJjaFJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZVNlYXJjaChlbmdpbmVJZCwgY3JlYXRlU2VhcmNoUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVHJhbnNjcmliZXMgYXVkaW8gaW50byB0aGUgaW5wdXQgbGFuZ3VhZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgYXVkaW8gZmlsZSB0byB0cmFuc2NyaWJlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgd2F2LCBvciB3ZWJtLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSAmI3g2MDt3aGlzcGVyLTEmI3g2MDsgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9tcHRdIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsXFxcXFxcJiMzOTtzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW8gc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBtYXRjaCB0aGUgYXVkaW8gbGFuZ3VhZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LCB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFt0ZW1wZXJhdHVyZV0gVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG8gYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFuZ3VhZ2VdIFRoZSBsYW5ndWFnZSBvZiB0aGUgaW5wdXQgYXVkaW8uIFN1cHBseWluZyB0aGUgaW5wdXQgbGFuZ3VhZ2UgaW4gW0lTTy02MzktMV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9JU09fNjM5LTFfY29kZXMpIGZvcm1hdCB3aWxsIGltcHJvdmUgYWNjdXJhY3kgYW5kIGxhdGVuY3kuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVUcmFuc2NyaXB0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgbGFuZ3VhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZVRyYW5zY3JpcHRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBsYW5ndWFnZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVHJhbnNsYXRlcyBhdWRpbyBpbnRvIGludG8gRW5nbGlzaC5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBhdWRpbyBmaWxlIHRvIHRyYW5zbGF0ZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6IG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIHdhdiwgb3Igd2VibS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgJiN4NjA7d2hpc3Blci0xJiN4NjA7IGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvbXB0XSBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbFxcXFxcXCYjMzk7cyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgYmUgaW4gRW5nbGlzaC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RlbXBlcmF0dXJlXSBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2UgW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0byBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVRyYW5zbGF0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlVHJhbnNsYXRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBEZWxldGUgYSBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlRmlsZShmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmRlbGV0ZUZpbGUoZmlsZUlkLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBEZWxldGUgYSBmaW5lLXR1bmVkIG1vZGVsLiBZb3UgbXVzdCBoYXZlIHRoZSBPd25lciByb2xlIGluIHlvdXIgb3JnYW5pemF0aW9uLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgVGhlIG1vZGVsIHRvIGRlbGV0ZVxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlTW9kZWwobW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmRlbGV0ZU1vZGVsKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIHRoZSBjb250ZW50cyBvZiB0aGUgc3BlY2lmaWVkIGZpbGVcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGRvd25sb2FkRmlsZShmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmRvd25sb2FkRmlsZShmaWxlSWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IExpc3RzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIChub24tZmluZXR1bmVkKSBtb2RlbHMsIGFuZCBwcm92aWRlcyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIG9uZSBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEVuZ2luZXMob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IubGlzdEVuZ2luZXMob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0dXJucyBhIGxpc3Qgb2YgZmlsZXMgdGhhdCBiZWxvbmcgdG8gdGhlIHVzZXJcXCdzIG9yZ2FuaXphdGlvbi5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RGaWxlcyhvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5saXN0RmlsZXMob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgR2V0IGZpbmUtZ3JhaW5lZCBzdGF0dXMgdXBkYXRlcyBmb3IgYSBmaW5lLXR1bmUgam9iLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2IgdG8gZ2V0IGV2ZW50cyBmb3IuXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0cmVhbV0gV2hldGhlciB0byBzdHJlYW0gZXZlbnRzIGZvciB0aGUgZmluZS10dW5lIGpvYi4gSWYgc2V0IHRvIHRydWUsIGV2ZW50cyB3aWxsIGJlIHNlbnQgYXMgZGF0YS1vbmx5IFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZS4gVGhlIHN0cmVhbSB3aWxsIHRlcm1pbmF0ZSB3aXRoIGEgJiN4NjA7ZGF0YTogW0RPTkVdJiN4NjA7IG1lc3NhZ2Ugd2hlbiB0aGUgam9iIGlzIGZpbmlzaGVkIChzdWNjZWVkZWQsIGNhbmNlbGxlZCwgb3IgZmFpbGVkKS4gIElmIHNldCB0byBmYWxzZSwgb25seSBldmVudHMgZ2VuZXJhdGVkIHNvIGZhciB3aWxsIGJlIHJldHVybmVkLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEZpbmVUdW5lRXZlbnRzKGZpbmVUdW5lSWQsIHN0cmVhbSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IubGlzdEZpbmVUdW5lRXZlbnRzKGZpbmVUdW5lSWQsIHN0cmVhbSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgTGlzdCB5b3VyIG9yZ2FuaXphdGlvblxcJ3MgZmluZS10dW5pbmcgam9ic1xuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEZpbmVUdW5lcyhvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5saXN0RmluZVR1bmVzKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IExpc3RzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIG1vZGVscywgYW5kIHByb3ZpZGVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVhY2ggb25lIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0TW9kZWxzKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmxpc3RNb2RlbHMob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0cmlldmVzIGEgbW9kZWwgaW5zdGFuY2UsIHByb3ZpZGluZyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBpdCBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5naW5lSWQgVGhlIElEIG9mIHRoZSBlbmdpbmUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlRW5naW5lKGVuZ2luZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5yZXRyaWV2ZUVuZ2luZShlbmdpbmVJZCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZUZpbGUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5yZXRyaWV2ZUZpbGUoZmlsZUlkLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBHZXRzIGluZm8gYWJvdXQgdGhlIGZpbmUtdHVuZSBqb2IuICBbTGVhcm4gbW9yZSBhYm91dCBGaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2JcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IucmV0cmlldmVGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXRyaWV2ZXMgYSBtb2RlbCBpbnN0YW5jZSwgcHJvdmlkaW5nIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtb2RlbCBzdWNoIGFzIHRoZSBvd25lciBhbmQgcGVybWlzc2lvbmluZy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIFRoZSBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlTW9kZWwobW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLnJldHJpZXZlTW9kZWwobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICB9O1xufTtcbi8qKlxuICogT3BlbkFJQXBpIC0gZmFjdG9yeSBpbnRlcmZhY2VcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5PcGVuQUlBcGlGYWN0b3J5ID0gZnVuY3Rpb24gKGNvbmZpZ3VyYXRpb24sIGJhc2VQYXRoLCBheGlvcykge1xuICAgIGNvbnN0IGxvY2FsVmFyRnAgPSBleHBvcnRzLk9wZW5BSUFwaUZwKGNvbmZpZ3VyYXRpb24pO1xuICAgIHJldHVybiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBJbW1lZGlhdGVseSBjYW5jZWwgYSBmaW5lLXR1bmUgam9iLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2IgdG8gY2FuY2VsXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjYW5jZWxGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jYW5jZWxGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQW5zd2VycyB0aGUgc3BlY2lmaWVkIHF1ZXN0aW9uIHVzaW5nIHRoZSBwcm92aWRlZCBkb2N1bWVudHMgYW5kIGV4YW1wbGVzLiAgVGhlIGVuZHBvaW50IGZpcnN0IFtzZWFyY2hlc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9zZWFyY2hlcykgb3ZlciBwcm92aWRlZCBkb2N1bWVudHMgb3IgZmlsZXMgdG8gZmluZCByZWxldmFudCBjb250ZXh0LiBUaGUgcmVsZXZhbnQgY29udGV4dCBpcyBjb21iaW5lZCB3aXRoIHRoZSBwcm92aWRlZCBleGFtcGxlcyBhbmQgcXVlc3Rpb24gdG8gY3JlYXRlIHRoZSBwcm9tcHQgZm9yIFtjb21wbGV0aW9uXSgvZG9jcy9hcGktcmVmZXJlbmNlL2NvbXBsZXRpb25zKS5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVBbnN3ZXJSZXF1ZXN0fSBjcmVhdGVBbnN3ZXJSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVBbnN3ZXIoY3JlYXRlQW5zd2VyUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlQW5zd2VyKGNyZWF0ZUFuc3dlclJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgY29tcGxldGlvbiBmb3IgdGhlIGNoYXQgbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdH0gY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVDaGF0Q29tcGxldGlvbihjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUNoYXRDb21wbGV0aW9uKGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENsYXNzaWZpZXMgdGhlIHNwZWNpZmllZCBgcXVlcnlgIHVzaW5nIHByb3ZpZGVkIGV4YW1wbGVzLiAgVGhlIGVuZHBvaW50IGZpcnN0IFtzZWFyY2hlc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9zZWFyY2hlcykgb3ZlciB0aGUgbGFiZWxlZCBleGFtcGxlcyB0byBzZWxlY3QgdGhlIG9uZXMgbW9zdCByZWxldmFudCBmb3IgdGhlIHBhcnRpY3VsYXIgcXVlcnkuIFRoZW4sIHRoZSByZWxldmFudCBleGFtcGxlcyBhcmUgY29tYmluZWQgd2l0aCB0aGUgcXVlcnkgdG8gY29uc3RydWN0IGEgcHJvbXB0IHRvIHByb2R1Y2UgdGhlIGZpbmFsIGxhYmVsIHZpYSB0aGUgW2NvbXBsZXRpb25zXSgvZG9jcy9hcGktcmVmZXJlbmNlL2NvbXBsZXRpb25zKSBlbmRwb2ludC4gIExhYmVsZWQgZXhhbXBsZXMgY2FuIGJlIHByb3ZpZGVkIHZpYSBhbiB1cGxvYWRlZCBgZmlsZWAsIG9yIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSByZXF1ZXN0IHVzaW5nIHRoZSBgZXhhbXBsZXNgIHBhcmFtZXRlciBmb3IgcXVpY2sgdGVzdHMgYW5kIHNtYWxsIHNjYWxlIHVzZSBjYXNlcy5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3R9IGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ2xhc3NpZmljYXRpb24oY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVDbGFzc2lmaWNhdGlvbihjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgY29tcGxldGlvbiBmb3IgdGhlIHByb3ZpZGVkIHByb21wdCBhbmQgcGFyYW1ldGVyc1xuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0fSBjcmVhdGVDb21wbGV0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ29tcGxldGlvbihjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlQ29tcGxldGlvbihjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBuZXcgZWRpdCBmb3IgdGhlIHByb3ZpZGVkIGlucHV0LCBpbnN0cnVjdGlvbiwgYW5kIHBhcmFtZXRlcnMuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlRWRpdFJlcXVlc3R9IGNyZWF0ZUVkaXRSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVFZGl0KGNyZWF0ZUVkaXRSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVFZGl0KGNyZWF0ZUVkaXRSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBlbWJlZGRpbmcgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgaW5wdXQgdGV4dC5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVFbWJlZGRpbmdSZXF1ZXN0fSBjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVFbWJlZGRpbmcoY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlRW1iZWRkaW5nKGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBVcGxvYWQgYSBmaWxlIHRoYXQgY29udGFpbnMgZG9jdW1lbnQocykgdG8gYmUgdXNlZCBhY3Jvc3MgdmFyaW91cyBlbmRwb2ludHMvZmVhdHVyZXMuIEN1cnJlbnRseSwgdGhlIHNpemUgb2YgYWxsIHRoZSBmaWxlcyB1cGxvYWRlZCBieSBvbmUgb3JnYW5pemF0aW9uIGNhbiBiZSB1cCB0byAxIEdCLiBQbGVhc2UgY29udGFjdCB1cyBpZiB5b3UgbmVlZCB0byBpbmNyZWFzZSB0aGUgc3RvcmFnZSBsaW1pdC5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIE5hbWUgb2YgdGhlIFtKU09OIExpbmVzXShodHRwczovL2pzb25saW5lcy5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3QvKSBmaWxlIHRvIGJlIHVwbG9hZGVkLiAgSWYgdGhlICYjeDYwO3B1cnBvc2UmI3g2MDsgaXMgc2V0IHRvIFxcXFxcXCZxdW90O2ZpbmUtdHVuZVxcXFxcXCZxdW90OywgZWFjaCBsaW5lIGlzIGEgSlNPTiByZWNvcmQgd2l0aCBcXFxcXFwmcXVvdDtwcm9tcHRcXFxcXFwmcXVvdDsgYW5kIFxcXFxcXCZxdW90O2NvbXBsZXRpb25cXFxcXFwmcXVvdDsgZmllbGRzIHJlcHJlc2VudGluZyB5b3VyIFt0cmFpbmluZyBleGFtcGxlc10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nL3ByZXBhcmUtdHJhaW5pbmctZGF0YSkuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwdXJwb3NlIFRoZSBpbnRlbmRlZCBwdXJwb3NlIG9mIHRoZSB1cGxvYWRlZCBkb2N1bWVudHMuICBVc2UgXFxcXFxcJnF1b3Q7ZmluZS10dW5lXFxcXFxcJnF1b3Q7IGZvciBbRmluZS10dW5pbmddKC9kb2NzL2FwaS1yZWZlcmVuY2UvZmluZS10dW5lcykuIFRoaXMgYWxsb3dzIHVzIHRvIHZhbGlkYXRlIHRoZSBmb3JtYXQgb2YgdGhlIHVwbG9hZGVkIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVGaWxlKGZpbGUsIHB1cnBvc2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUZpbGUoZmlsZSwgcHVycG9zZSwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBqb2IgdGhhdCBmaW5lLXR1bmVzIGEgc3BlY2lmaWVkIG1vZGVsIGZyb20gYSBnaXZlbiBkYXRhc2V0LiAgUmVzcG9uc2UgaW5jbHVkZXMgZGV0YWlscyBvZiB0aGUgZW5xdWV1ZWQgam9iIGluY2x1ZGluZyBqb2Igc3RhdHVzIGFuZCB0aGUgbmFtZSBvZiB0aGUgZmluZS10dW5lZCBtb2RlbHMgb25jZSBjb21wbGV0ZS4gIFtMZWFybiBtb3JlIGFib3V0IEZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlRmluZVR1bmVSZXF1ZXN0fSBjcmVhdGVGaW5lVHVuZVJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUZpbmVUdW5lKGNyZWF0ZUZpbmVUdW5lUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlRmluZVR1bmUoY3JlYXRlRmluZVR1bmVSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBpbWFnZSBnaXZlbiBhIHByb21wdC5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVJbWFnZVJlcXVlc3R9IGNyZWF0ZUltYWdlUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlSW1hZ2UoY3JlYXRlSW1hZ2VSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVJbWFnZShjcmVhdGVJbWFnZVJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGVkaXRlZCBvciBleHRlbmRlZCBpbWFnZSBnaXZlbiBhbiBvcmlnaW5hbCBpbWFnZSBhbmQgYSBwcm9tcHQuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gaW1hZ2UgVGhlIGltYWdlIHRvIGVkaXQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS4gSWYgbWFzayBpcyBub3QgcHJvdmlkZWQsIGltYWdlIG11c3QgaGF2ZSB0cmFuc3BhcmVuY3ksIHdoaWNoIHdpbGwgYmUgdXNlZCBhcyB0aGUgbWFzay5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb21wdCBBIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGRlc2lyZWQgaW1hZ2UocykuIFRoZSBtYXhpbXVtIGxlbmd0aCBpcyAxMDAwIGNoYXJhY3RlcnMuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gW21hc2tdIEFuIGFkZGl0aW9uYWwgaW1hZ2Ugd2hvc2UgZnVsbHkgdHJhbnNwYXJlbnQgYXJlYXMgKGUuZy4gd2hlcmUgYWxwaGEgaXMgemVybykgaW5kaWNhdGUgd2hlcmUgJiN4NjA7aW1hZ2UmI3g2MDsgc2hvdWxkIGJlIGVkaXRlZC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb25zIGFzICYjeDYwO2ltYWdlJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc2l6ZV0gVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mICYjeDYwOzI1NngyNTYmI3g2MDssICYjeDYwOzUxMng1MTImI3g2MDssIG9yICYjeDYwOzEwMjR4MTAyNCYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mICYjeDYwO3VybCYjeDYwOyBvciAmI3g2MDtiNjRfanNvbiYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VyXSBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlSW1hZ2VFZGl0KGltYWdlLCBwcm9tcHQsIG1hc2ssIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVJbWFnZUVkaXQoaW1hZ2UsIHByb21wdCwgbWFzaywgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgdmFyaWF0aW9uIG9mIGEgZ2l2ZW4gaW1hZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gaW1hZ2UgVGhlIGltYWdlIHRvIHVzZSBhcyB0aGUgYmFzaXMgZm9yIHRoZSB2YXJpYXRpb24ocykuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NpemVdIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDsyNTZ4MjU2JiN4NjA7LCAmI3g2MDs1MTJ4NTEyJiN4NjA7LCBvciAmI3g2MDsxMDI0eDEwMjQmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDt1cmwmI3g2MDsgb3IgJiN4NjA7YjY0X2pzb24mI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcl0gQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUltYWdlVmFyaWF0aW9uKGltYWdlLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlSW1hZ2VWYXJpYXRpb24oaW1hZ2UsIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ2xhc3NpZmllcyBpZiB0ZXh0IHZpb2xhdGVzIE9wZW5BSVxcJ3MgQ29udGVudCBQb2xpY3lcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVNb2RlcmF0aW9uUmVxdWVzdH0gY3JlYXRlTW9kZXJhdGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZU1vZGVyYXRpb24oY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZU1vZGVyYXRpb24oY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBUaGUgc2VhcmNoIGVuZHBvaW50IGNvbXB1dGVzIHNpbWlsYXJpdHkgc2NvcmVzIGJldHdlZW4gcHJvdmlkZWQgcXVlcnkgYW5kIGRvY3VtZW50cy4gRG9jdW1lbnRzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIEFQSSBpZiB0aGVyZSBhcmUgbm8gbW9yZSB0aGFuIDIwMCBvZiB0aGVtLiAgVG8gZ28gYmV5b25kIHRoZSAyMDAgZG9jdW1lbnQgbGltaXQsIGRvY3VtZW50cyBjYW4gYmUgcHJvY2Vzc2VkIG9mZmxpbmUgYW5kIHRoZW4gdXNlZCBmb3IgZWZmaWNpZW50IHJldHJpZXZhbCBhdCBxdWVyeSB0aW1lLiBXaGVuIGBmaWxlYCBpcyBzZXQsIHRoZSBzZWFyY2ggZW5kcG9pbnQgc2VhcmNoZXMgb3ZlciBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgZ2l2ZW4gZmlsZSBhbmQgcmV0dXJucyB1cCB0byB0aGUgYG1heF9yZXJhbmtgIG51bWJlciBvZiBkb2N1bWVudHMuIFRoZXNlIGRvY3VtZW50cyB3aWxsIGJlIHJldHVybmVkIGFsb25nIHdpdGggdGhlaXIgc2VhcmNoIHNjb3Jlcy4gIFRoZSBzaW1pbGFyaXR5IHNjb3JlIGlzIGEgcG9zaXRpdmUgc2NvcmUgdGhhdCB1c3VhbGx5IHJhbmdlcyBmcm9tIDAgdG8gMzAwIChidXQgY2FuIHNvbWV0aW1lcyBnbyBoaWdoZXIpLCB3aGVyZSBhIHNjb3JlIGFib3ZlIDIwMCB1c3VhbGx5IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBzZW1hbnRpY2FsbHkgc2ltaWxhciB0byB0aGUgcXVlcnkuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmdpbmVJZCBUaGUgSUQgb2YgdGhlIGVuZ2luZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdC4gIFlvdSBjYW4gc2VsZWN0IG9uZSBvZiAmI3g2MDthZGEmI3g2MDssICYjeDYwO2JhYmJhZ2UmI3g2MDssICYjeDYwO2N1cmllJiN4NjA7LCBvciAmI3g2MDtkYXZpbmNpJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZVNlYXJjaFJlcXVlc3R9IGNyZWF0ZVNlYXJjaFJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVNlYXJjaChlbmdpbmVJZCwgY3JlYXRlU2VhcmNoUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlU2VhcmNoKGVuZ2luZUlkLCBjcmVhdGVTZWFyY2hSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVHJhbnNjcmliZXMgYXVkaW8gaW50byB0aGUgaW5wdXQgbGFuZ3VhZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgYXVkaW8gZmlsZSB0byB0cmFuc2NyaWJlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgd2F2LCBvciB3ZWJtLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSAmI3g2MDt3aGlzcGVyLTEmI3g2MDsgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9tcHRdIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsXFxcXFxcJiMzOTtzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW8gc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBtYXRjaCB0aGUgYXVkaW8gbGFuZ3VhZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LCB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFt0ZW1wZXJhdHVyZV0gVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG8gYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFuZ3VhZ2VdIFRoZSBsYW5ndWFnZSBvZiB0aGUgaW5wdXQgYXVkaW8uIFN1cHBseWluZyB0aGUgaW5wdXQgbGFuZ3VhZ2UgaW4gW0lTTy02MzktMV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9JU09fNjM5LTFfY29kZXMpIGZvcm1hdCB3aWxsIGltcHJvdmUgYWNjdXJhY3kgYW5kIGxhdGVuY3kuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVUcmFuc2NyaXB0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgbGFuZ3VhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZVRyYW5zY3JpcHRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBsYW5ndWFnZSwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFRyYW5zbGF0ZXMgYXVkaW8gaW50byBpbnRvIEVuZ2xpc2guXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgYXVkaW8gZmlsZSB0byB0cmFuc2xhdGUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOiBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCB3YXYsIG9yIHdlYm0uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5ICYjeDYwO3doaXNwZXItMSYjeDYwOyBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Byb21wdF0gQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWxcXFxcXFwmIzM5O3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIGJlIGluIEVuZ2xpc2guXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LCB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFt0ZW1wZXJhdHVyZV0gVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG8gYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVUcmFuc2xhdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZVRyYW5zbGF0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGVGaWxlKGZpbGVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuZGVsZXRlRmlsZShmaWxlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBEZWxldGUgYSBmaW5lLXR1bmVkIG1vZGVsLiBZb3UgbXVzdCBoYXZlIHRoZSBPd25lciByb2xlIGluIHlvdXIgb3JnYW5pemF0aW9uLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgVGhlIG1vZGVsIHRvIGRlbGV0ZVxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlTW9kZWwobW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmRlbGV0ZU1vZGVsKG1vZGVsLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0dXJucyB0aGUgY29udGVudHMgb2YgdGhlIHNwZWNpZmllZCBmaWxlXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBkb3dubG9hZEZpbGUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5kb3dubG9hZEZpbGUoZmlsZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgKG5vbi1maW5ldHVuZWQpIG1vZGVscywgYW5kIHByb3ZpZGVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVhY2ggb25lIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RW5naW5lcyhvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5saXN0RW5naW5lcyhvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0dXJucyBhIGxpc3Qgb2YgZmlsZXMgdGhhdCBiZWxvbmcgdG8gdGhlIHVzZXJcXCdzIG9yZ2FuaXphdGlvbi5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RGaWxlcyhvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5saXN0RmlsZXMob3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEdldCBmaW5lLWdyYWluZWQgc3RhdHVzIHVwZGF0ZXMgZm9yIGEgZmluZS10dW5lIGpvYi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iIHRvIGdldCBldmVudHMgZm9yLlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdHJlYW1dIFdoZXRoZXIgdG8gc3RyZWFtIGV2ZW50cyBmb3IgdGhlIGZpbmUtdHVuZSBqb2IuIElmIHNldCB0byB0cnVlLCBldmVudHMgd2lsbCBiZSBzZW50IGFzIGRhdGEtb25seSBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KSBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUuIFRoZSBzdHJlYW0gd2lsbCB0ZXJtaW5hdGUgd2l0aCBhICYjeDYwO2RhdGE6IFtET05FXSYjeDYwOyBtZXNzYWdlIHdoZW4gdGhlIGpvYiBpcyBmaW5pc2hlZCAoc3VjY2VlZGVkLCBjYW5jZWxsZWQsIG9yIGZhaWxlZCkuICBJZiBzZXQgdG8gZmFsc2UsIG9ubHkgZXZlbnRzIGdlbmVyYXRlZCBzbyBmYXIgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RGaW5lVHVuZUV2ZW50cyhmaW5lVHVuZUlkLCBzdHJlYW0sIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmxpc3RGaW5lVHVuZUV2ZW50cyhmaW5lVHVuZUlkLCBzdHJlYW0sIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBMaXN0IHlvdXIgb3JnYW5pemF0aW9uXFwncyBmaW5lLXR1bmluZyBqb2JzXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RmluZVR1bmVzKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmxpc3RGaW5lVHVuZXMob3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IExpc3RzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIG1vZGVscywgYW5kIHByb3ZpZGVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVhY2ggb25lIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0TW9kZWxzKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmxpc3RNb2RlbHMob3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgaXQgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVuZ2luZUlkIFRoZSBJRCBvZiB0aGUgZW5naW5lIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZUVuZ2luZShlbmdpbmVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAucmV0cmlldmVFbmdpbmUoZW5naW5lSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlRmlsZShmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLnJldHJpZXZlRmlsZShmaWxlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBHZXRzIGluZm8gYWJvdXQgdGhlIGZpbmUtdHVuZSBqb2IuICBbTGVhcm4gbW9yZSBhYm91dCBGaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2JcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAucmV0cmlldmVGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0cmlldmVzIGEgbW9kZWwgaW5zdGFuY2UsIHByb3ZpZGluZyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbW9kZWwgc3VjaCBhcyB0aGUgb3duZXIgYW5kIHBlcm1pc3Npb25pbmcuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBUaGUgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICByZXRyaWV2ZU1vZGVsKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5yZXRyaWV2ZU1vZGVsKG1vZGVsLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuLyoqXG4gKiBPcGVuQUlBcGkgLSBvYmplY3Qtb3JpZW50ZWQgaW50ZXJmYWNlXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgT3BlbkFJQXBpXG4gKiBAZXh0ZW5kcyB7QmFzZUFQSX1cbiAqL1xuY2xhc3MgT3BlbkFJQXBpIGV4dGVuZHMgYmFzZV8xLkJhc2VBUEkge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgSW1tZWRpYXRlbHkgY2FuY2VsIGEgZmluZS10dW5lIGpvYi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2IgdG8gY2FuY2VsXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjYW5jZWxGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY2FuY2VsRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQW5zd2VycyB0aGUgc3BlY2lmaWVkIHF1ZXN0aW9uIHVzaW5nIHRoZSBwcm92aWRlZCBkb2N1bWVudHMgYW5kIGV4YW1wbGVzLiAgVGhlIGVuZHBvaW50IGZpcnN0IFtzZWFyY2hlc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9zZWFyY2hlcykgb3ZlciBwcm92aWRlZCBkb2N1bWVudHMgb3IgZmlsZXMgdG8gZmluZCByZWxldmFudCBjb250ZXh0LiBUaGUgcmVsZXZhbnQgY29udGV4dCBpcyBjb21iaW5lZCB3aXRoIHRoZSBwcm92aWRlZCBleGFtcGxlcyBhbmQgcXVlc3Rpb24gdG8gY3JlYXRlIHRoZSBwcm9tcHQgZm9yIFtjb21wbGV0aW9uXSgvZG9jcy9hcGktcmVmZXJlbmNlL2NvbXBsZXRpb25zKS5cbiAgICAgKiBAcGFyYW0ge0NyZWF0ZUFuc3dlclJlcXVlc3R9IGNyZWF0ZUFuc3dlclJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlQW5zd2VyKGNyZWF0ZUFuc3dlclJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVBbnN3ZXIoY3JlYXRlQW5zd2VyUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBjaGF0IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge0NyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdH0gY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVDaGF0Q29tcGxldGlvbihjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVDaGF0Q29tcGxldGlvbihjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENsYXNzaWZpZXMgdGhlIHNwZWNpZmllZCBgcXVlcnlgIHVzaW5nIHByb3ZpZGVkIGV4YW1wbGVzLiAgVGhlIGVuZHBvaW50IGZpcnN0IFtzZWFyY2hlc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9zZWFyY2hlcykgb3ZlciB0aGUgbGFiZWxlZCBleGFtcGxlcyB0byBzZWxlY3QgdGhlIG9uZXMgbW9zdCByZWxldmFudCBmb3IgdGhlIHBhcnRpY3VsYXIgcXVlcnkuIFRoZW4sIHRoZSByZWxldmFudCBleGFtcGxlcyBhcmUgY29tYmluZWQgd2l0aCB0aGUgcXVlcnkgdG8gY29uc3RydWN0IGEgcHJvbXB0IHRvIHByb2R1Y2UgdGhlIGZpbmFsIGxhYmVsIHZpYSB0aGUgW2NvbXBsZXRpb25zXSgvZG9jcy9hcGktcmVmZXJlbmNlL2NvbXBsZXRpb25zKSBlbmRwb2ludC4gIExhYmVsZWQgZXhhbXBsZXMgY2FuIGJlIHByb3ZpZGVkIHZpYSBhbiB1cGxvYWRlZCBgZmlsZWAsIG9yIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSByZXF1ZXN0IHVzaW5nIHRoZSBgZXhhbXBsZXNgIHBhcmFtZXRlciBmb3IgcXVpY2sgdGVzdHMgYW5kIHNtYWxsIHNjYWxlIHVzZSBjYXNlcy5cbiAgICAgKiBAcGFyYW0ge0NyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdH0gY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUNsYXNzaWZpY2F0aW9uKGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUNsYXNzaWZpY2F0aW9uKGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBwcm92aWRlZCBwcm9tcHQgYW5kIHBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0ge0NyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0fSBjcmVhdGVDb21wbGV0aW9uUmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlQ29tcGxldGlvbihjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUNvbXBsZXRpb24oY3JlYXRlQ29tcGxldGlvblJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBuZXcgZWRpdCBmb3IgdGhlIHByb3ZpZGVkIGlucHV0LCBpbnN0cnVjdGlvbiwgYW5kIHBhcmFtZXRlcnMuXG4gICAgICogQHBhcmFtIHtDcmVhdGVFZGl0UmVxdWVzdH0gY3JlYXRlRWRpdFJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUVkaXQoY3JlYXRlRWRpdFJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVFZGl0KGNyZWF0ZUVkaXRSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGVtYmVkZGluZyB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBpbnB1dCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7Q3JlYXRlRW1iZWRkaW5nUmVxdWVzdH0gY3JlYXRlRW1iZWRkaW5nUmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlRW1iZWRkaW5nKGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVFbWJlZGRpbmcoY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgVXBsb2FkIGEgZmlsZSB0aGF0IGNvbnRhaW5zIGRvY3VtZW50KHMpIHRvIGJlIHVzZWQgYWNyb3NzIHZhcmlvdXMgZW5kcG9pbnRzL2ZlYXR1cmVzLiBDdXJyZW50bHksIHRoZSBzaXplIG9mIGFsbCB0aGUgZmlsZXMgdXBsb2FkZWQgYnkgb25lIG9yZ2FuaXphdGlvbiBjYW4gYmUgdXAgdG8gMSBHQi4gUGxlYXNlIGNvbnRhY3QgdXMgaWYgeW91IG5lZWQgdG8gaW5jcmVhc2UgdGhlIHN0b3JhZ2UgbGltaXQuXG4gICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIE5hbWUgb2YgdGhlIFtKU09OIExpbmVzXShodHRwczovL2pzb25saW5lcy5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3QvKSBmaWxlIHRvIGJlIHVwbG9hZGVkLiAgSWYgdGhlICYjeDYwO3B1cnBvc2UmI3g2MDsgaXMgc2V0IHRvIFxcXFxcXCZxdW90O2ZpbmUtdHVuZVxcXFxcXCZxdW90OywgZWFjaCBsaW5lIGlzIGEgSlNPTiByZWNvcmQgd2l0aCBcXFxcXFwmcXVvdDtwcm9tcHRcXFxcXFwmcXVvdDsgYW5kIFxcXFxcXCZxdW90O2NvbXBsZXRpb25cXFxcXFwmcXVvdDsgZmllbGRzIHJlcHJlc2VudGluZyB5b3VyIFt0cmFpbmluZyBleGFtcGxlc10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nL3ByZXBhcmUtdHJhaW5pbmctZGF0YSkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHB1cnBvc2UgVGhlIGludGVuZGVkIHB1cnBvc2Ugb2YgdGhlIHVwbG9hZGVkIGRvY3VtZW50cy4gIFVzZSBcXFxcXFwmcXVvdDtmaW5lLXR1bmVcXFxcXFwmcXVvdDsgZm9yIFtGaW5lLXR1bmluZ10oL2RvY3MvYXBpLXJlZmVyZW5jZS9maW5lLXR1bmVzKS4gVGhpcyBhbGxvd3MgdXMgdG8gdmFsaWRhdGUgdGhlIGZvcm1hdCBvZiB0aGUgdXBsb2FkZWQgZmlsZS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUZpbGUoZmlsZSwgcHVycG9zZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUZpbGUoZmlsZSwgcHVycG9zZSwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGpvYiB0aGF0IGZpbmUtdHVuZXMgYSBzcGVjaWZpZWQgbW9kZWwgZnJvbSBhIGdpdmVuIGRhdGFzZXQuICBSZXNwb25zZSBpbmNsdWRlcyBkZXRhaWxzIG9mIHRoZSBlbnF1ZXVlZCBqb2IgaW5jbHVkaW5nIGpvYiBzdGF0dXMgYW5kIHRoZSBuYW1lIG9mIHRoZSBmaW5lLXR1bmVkIG1vZGVscyBvbmNlIGNvbXBsZXRlLiAgW0xlYXJuIG1vcmUgYWJvdXQgRmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICAgKiBAcGFyYW0ge0NyZWF0ZUZpbmVUdW5lUmVxdWVzdH0gY3JlYXRlRmluZVR1bmVSZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVGaW5lVHVuZShjcmVhdGVGaW5lVHVuZVJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVGaW5lVHVuZShjcmVhdGVGaW5lVHVuZVJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gaW1hZ2UgZ2l2ZW4gYSBwcm9tcHQuXG4gICAgICogQHBhcmFtIHtDcmVhdGVJbWFnZVJlcXVlc3R9IGNyZWF0ZUltYWdlUmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlSW1hZ2UoY3JlYXRlSW1hZ2VSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlSW1hZ2UoY3JlYXRlSW1hZ2VSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGVkaXRlZCBvciBleHRlbmRlZCBpbWFnZSBnaXZlbiBhbiBvcmlnaW5hbCBpbWFnZSBhbmQgYSBwcm9tcHQuXG4gICAgICogQHBhcmFtIHtGaWxlfSBpbWFnZSBUaGUgaW1hZ2UgdG8gZWRpdC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLiBJZiBtYXNrIGlzIG5vdCBwcm92aWRlZCwgaW1hZ2UgbXVzdCBoYXZlIHRyYW5zcGFyZW5jeSwgd2hpY2ggd2lsbCBiZSB1c2VkIGFzIHRoZSBtYXNrLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9tcHQgQSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBkZXNpcmVkIGltYWdlKHMpLiBUaGUgbWF4aW11bSBsZW5ndGggaXMgMTAwMCBjaGFyYWN0ZXJzLlxuICAgICAqIEBwYXJhbSB7RmlsZX0gW21hc2tdIEFuIGFkZGl0aW9uYWwgaW1hZ2Ugd2hvc2UgZnVsbHkgdHJhbnNwYXJlbnQgYXJlYXMgKGUuZy4gd2hlcmUgYWxwaGEgaXMgemVybykgaW5kaWNhdGUgd2hlcmUgJiN4NjA7aW1hZ2UmI3g2MDsgc2hvdWxkIGJlIGVkaXRlZC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb25zIGFzICYjeDYwO2ltYWdlJiN4NjA7LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NpemVdIFRoZSBzaXplIG9mIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDsyNTZ4MjU2JiN4NjA7LCAmI3g2MDs1MTJ4NTEyJiN4NjA7LCBvciAmI3g2MDsxMDI0eDEwMjQmI3g2MDsuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mICYjeDYwO3VybCYjeDYwOyBvciAmI3g2MDtiNjRfanNvbiYjeDYwOy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3VzZXJdIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVJbWFnZUVkaXQoaW1hZ2UsIHByb21wdCwgbWFzaywgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVJbWFnZUVkaXQoaW1hZ2UsIHByb21wdCwgbWFzaywgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSB2YXJpYXRpb24gb2YgYSBnaXZlbiBpbWFnZS5cbiAgICAgKiBAcGFyYW0ge0ZpbGV9IGltYWdlIFRoZSBpbWFnZSB0byB1c2UgYXMgdGhlIGJhc2lzIGZvciB0aGUgdmFyaWF0aW9uKHMpLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc2l6ZV0gVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mICYjeDYwOzI1NngyNTYmI3g2MDssICYjeDYwOzUxMng1MTImI3g2MDssIG9yICYjeDYwOzEwMjR4MTAyNCYjeDYwOy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7dXJsJiN4NjA7IG9yICYjeDYwO2I2NF9qc29uJiN4NjA7LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcl0gQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUltYWdlVmFyaWF0aW9uKGltYWdlLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUltYWdlVmFyaWF0aW9uKGltYWdlLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ2xhc3NpZmllcyBpZiB0ZXh0IHZpb2xhdGVzIE9wZW5BSVxcJ3MgQ29udGVudCBQb2xpY3lcbiAgICAgKiBAcGFyYW0ge0NyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0fSBjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlTW9kZXJhdGlvbihjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZU1vZGVyYXRpb24oY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFRoZSBzZWFyY2ggZW5kcG9pbnQgY29tcHV0ZXMgc2ltaWxhcml0eSBzY29yZXMgYmV0d2VlbiBwcm92aWRlZCBxdWVyeSBhbmQgZG9jdW1lbnRzLiBEb2N1bWVudHMgY2FuIGJlIHBhc3NlZCBkaXJlY3RseSB0byB0aGUgQVBJIGlmIHRoZXJlIGFyZSBubyBtb3JlIHRoYW4gMjAwIG9mIHRoZW0uICBUbyBnbyBiZXlvbmQgdGhlIDIwMCBkb2N1bWVudCBsaW1pdCwgZG9jdW1lbnRzIGNhbiBiZSBwcm9jZXNzZWQgb2ZmbGluZSBhbmQgdGhlbiB1c2VkIGZvciBlZmZpY2llbnQgcmV0cmlldmFsIGF0IHF1ZXJ5IHRpbWUuIFdoZW4gYGZpbGVgIGlzIHNldCwgdGhlIHNlYXJjaCBlbmRwb2ludCBzZWFyY2hlcyBvdmVyIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBnaXZlbiBmaWxlIGFuZCByZXR1cm5zIHVwIHRvIHRoZSBgbWF4X3JlcmFua2AgbnVtYmVyIG9mIGRvY3VtZW50cy4gVGhlc2UgZG9jdW1lbnRzIHdpbGwgYmUgcmV0dXJuZWQgYWxvbmcgd2l0aCB0aGVpciBzZWFyY2ggc2NvcmVzLiAgVGhlIHNpbWlsYXJpdHkgc2NvcmUgaXMgYSBwb3NpdGl2ZSBzY29yZSB0aGF0IHVzdWFsbHkgcmFuZ2VzIGZyb20gMCB0byAzMDAgKGJ1dCBjYW4gc29tZXRpbWVzIGdvIGhpZ2hlciksIHdoZXJlIGEgc2NvcmUgYWJvdmUgMjAwIHVzdWFsbHkgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHNlbWFudGljYWxseSBzaW1pbGFyIHRvIHRoZSBxdWVyeS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5naW5lSWQgVGhlIElEIG9mIHRoZSBlbmdpbmUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3QuICBZb3UgY2FuIHNlbGVjdCBvbmUgb2YgJiN4NjA7YWRhJiN4NjA7LCAmI3g2MDtiYWJiYWdlJiN4NjA7LCAmI3g2MDtjdXJpZSYjeDYwOywgb3IgJiN4NjA7ZGF2aW5jaSYjeDYwOy5cbiAgICAgKiBAcGFyYW0ge0NyZWF0ZVNlYXJjaFJlcXVlc3R9IGNyZWF0ZVNlYXJjaFJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlU2VhcmNoKGVuZ2luZUlkLCBjcmVhdGVTZWFyY2hSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlU2VhcmNoKGVuZ2luZUlkLCBjcmVhdGVTZWFyY2hSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBUcmFuc2NyaWJlcyBhdWRpbyBpbnRvIHRoZSBpbnB1dCBsYW5ndWFnZS5cbiAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIGF1ZGlvIGZpbGUgdG8gdHJhbnNjcmliZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6IG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIHdhdiwgb3Igd2VibS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSAmI3g2MDt3aGlzcGVyLTEmI3g2MDsgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Byb21wdF0gQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWxcXFxcXFwmIzM5O3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIG1hdGNoIHRoZSBhdWRpbyBsYW5ndWFnZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCwgdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt0ZW1wZXJhdHVyZV0gVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG8gYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtsYW5ndWFnZV0gVGhlIGxhbmd1YWdlIG9mIHRoZSBpbnB1dCBhdWRpby4gU3VwcGx5aW5nIHRoZSBpbnB1dCBsYW5ndWFnZSBpbiBbSVNPLTYzOS0xXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0lTT182MzktMV9jb2RlcykgZm9ybWF0IHdpbGwgaW1wcm92ZSBhY2N1cmFjeSBhbmQgbGF0ZW5jeS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZVRyYW5zY3JpcHRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBsYW5ndWFnZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZVRyYW5zY3JpcHRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBsYW5ndWFnZSwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgVHJhbnNsYXRlcyBhdWRpbyBpbnRvIGludG8gRW5nbGlzaC5cbiAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIGF1ZGlvIGZpbGUgdG8gdHJhbnNsYXRlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgd2F2LCBvciB3ZWJtLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5ICYjeDYwO3doaXNwZXItMSYjeDYwOyBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvbXB0XSBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbFxcXFxcXCYjMzk7cyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgYmUgaW4gRW5nbGlzaC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCwgdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt0ZW1wZXJhdHVyZV0gVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG8gYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVUcmFuc2xhdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVUcmFuc2xhdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGZpbGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGRlbGV0ZUZpbGUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuZGVsZXRlRmlsZShmaWxlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGZpbmUtdHVuZWQgbW9kZWwuIFlvdSBtdXN0IGhhdmUgdGhlIE93bmVyIHJvbGUgaW4geW91ciBvcmdhbml6YXRpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIFRoZSBtb2RlbCB0byBkZWxldGVcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGRlbGV0ZU1vZGVsKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuZGVsZXRlTW9kZWwobW9kZWwsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFJldHVybnMgdGhlIGNvbnRlbnRzIG9mIHRoZSBzcGVjaWZpZWQgZmlsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBkb3dubG9hZEZpbGUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuZG93bmxvYWRGaWxlKGZpbGVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgKG5vbi1maW5ldHVuZWQpIG1vZGVscywgYW5kIHByb3ZpZGVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVhY2ggb25lIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGxpc3RFbmdpbmVzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5saXN0RW5naW5lcyhvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIGEgbGlzdCBvZiBmaWxlcyB0aGF0IGJlbG9uZyB0byB0aGUgdXNlclxcJ3Mgb3JnYW5pemF0aW9uLlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgbGlzdEZpbGVzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5saXN0RmlsZXMob3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgR2V0IGZpbmUtZ3JhaW5lZCBzdGF0dXMgdXBkYXRlcyBmb3IgYSBmaW5lLXR1bmUgam9iLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYiB0byBnZXQgZXZlbnRzIGZvci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdHJlYW1dIFdoZXRoZXIgdG8gc3RyZWFtIGV2ZW50cyBmb3IgdGhlIGZpbmUtdHVuZSBqb2IuIElmIHNldCB0byB0cnVlLCBldmVudHMgd2lsbCBiZSBzZW50IGFzIGRhdGEtb25seSBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KSBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUuIFRoZSBzdHJlYW0gd2lsbCB0ZXJtaW5hdGUgd2l0aCBhICYjeDYwO2RhdGE6IFtET05FXSYjeDYwOyBtZXNzYWdlIHdoZW4gdGhlIGpvYiBpcyBmaW5pc2hlZCAoc3VjY2VlZGVkLCBjYW5jZWxsZWQsIG9yIGZhaWxlZCkuICBJZiBzZXQgdG8gZmFsc2UsIG9ubHkgZXZlbnRzIGdlbmVyYXRlZCBzbyBmYXIgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGxpc3RGaW5lVHVuZUV2ZW50cyhmaW5lVHVuZUlkLCBzdHJlYW0sIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5saXN0RmluZVR1bmVFdmVudHMoZmluZVR1bmVJZCwgc3RyZWFtLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBMaXN0IHlvdXIgb3JnYW5pemF0aW9uXFwncyBmaW5lLXR1bmluZyBqb2JzXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBsaXN0RmluZVR1bmVzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5saXN0RmluZVR1bmVzKG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IExpc3RzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIG1vZGVscywgYW5kIHByb3ZpZGVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVhY2ggb25lIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBsaXN0TW9kZWxzKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5saXN0TW9kZWxzKG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgaXQgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5naW5lSWQgVGhlIElEIG9mIHRoZSBlbmdpbmUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgcmV0cmlldmVFbmdpbmUoZW5naW5lSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5yZXRyaWV2ZUVuZ2luZShlbmdpbmVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgUmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIGZpbGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIHJldHJpZXZlRmlsZShmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5yZXRyaWV2ZUZpbGUoZmlsZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBHZXRzIGluZm8gYWJvdXQgdGhlIGZpbmUtdHVuZSBqb2IuICBbTGVhcm4gbW9yZSBhYm91dCBGaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgcmV0cmlldmVGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikucmV0cmlldmVGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBSZXRyaWV2ZXMgYSBtb2RlbCBpbnN0YW5jZSwgcHJvdmlkaW5nIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtb2RlbCBzdWNoIGFzIHRoZSBvd25lciBhbmQgcGVybWlzc2lvbmluZy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgVGhlIElEIG9mIHRoZSBtb2RlbCB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgcmV0cmlldmVNb2RlbChtb2RlbCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLnJldHJpZXZlTW9kZWwobW9kZWwsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbn1cbmV4cG9ydHMuT3BlbkFJQXBpID0gT3BlbkFJQXBpO1xuIiwiLyogZXNsaW50LWVudiBicm93c2VyICovXG5tb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnID8gc2VsZi5Gb3JtRGF0YSA6IHdpbmRvdy5Gb3JtRGF0YTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIE9wZW5BSSBBUElcbiAqIEFQSXMgZm9yIHNhbXBsaW5nIGZyb20gYW5kIGZpbmUtdHVuaW5nIGxhbmd1YWdlIG1vZGVsc1xuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjIuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQ29uZmlndXJhdGlvbiA9IHZvaWQgMDtcbmNvbnN0IHBhY2thZ2VKc29uID0gcmVxdWlyZShcIi4uL3BhY2thZ2UuanNvblwiKTtcbmNsYXNzIENvbmZpZ3VyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtID0ge30pIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBwYXJhbS5hcGlLZXk7XG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uID0gcGFyYW0ub3JnYW5pemF0aW9uO1xuICAgICAgICB0aGlzLnVzZXJuYW1lID0gcGFyYW0udXNlcm5hbWU7XG4gICAgICAgIHRoaXMucGFzc3dvcmQgPSBwYXJhbS5wYXNzd29yZDtcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHBhcmFtLmFjY2Vzc1Rva2VuO1xuICAgICAgICB0aGlzLmJhc2VQYXRoID0gcGFyYW0uYmFzZVBhdGg7XG4gICAgICAgIHRoaXMuYmFzZU9wdGlvbnMgPSBwYXJhbS5iYXNlT3B0aW9ucztcbiAgICAgICAgdGhpcy5mb3JtRGF0YUN0b3IgPSBwYXJhbS5mb3JtRGF0YUN0b3I7XG4gICAgICAgIGlmICghdGhpcy5iYXNlT3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5iYXNlT3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmFzZU9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oeyAnVXNlci1BZ2VudCc6IGBPcGVuQUkvTm9kZUpTLyR7cGFja2FnZUpzb24udmVyc2lvbn1gLCAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gIH0sIHRoaXMuYmFzZU9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgIGlmICh0aGlzLm9yZ2FuaXphdGlvbikge1xuICAgICAgICAgICAgdGhpcy5iYXNlT3B0aW9ucy5oZWFkZXJzWydPcGVuQUktT3JnYW5pemF0aW9uJ10gPSB0aGlzLm9yZ2FuaXphdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZm9ybURhdGFDdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1EYXRhQ3RvciA9IHJlcXVpcmUoXCJmb3JtLWRhdGFcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIGdpdmVuIE1JTUUgaXMgYSBKU09OIE1JTUUuXG4gICAgICogSlNPTiBNSU1FIGV4YW1wbGVzOlxuICAgICAqICAgYXBwbGljYXRpb24vanNvblxuICAgICAqICAgYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEY4XG4gICAgICogICBBUFBMSUNBVElPTi9KU09OXG4gICAgICogICBhcHBsaWNhdGlvbi92bmQuY29tcGFueStqc29uXG4gICAgICogQHBhcmFtIG1pbWUgLSBNSU1FIChNdWx0aXB1cnBvc2UgSW50ZXJuZXQgTWFpbCBFeHRlbnNpb25zKVxuICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgZ2l2ZW4gTUlNRSBpcyBKU09OLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNKc29uTWltZShtaW1lKSB7XG4gICAgICAgIGNvbnN0IGpzb25NaW1lID0gbmV3IFJlZ0V4cCgnXihhcHBsaWNhdGlvblxcL2pzb258W147LyBcXHRdK1xcL1teOy8gXFx0XStbK11qc29uKVsgXFx0XSooOy4qKT8kJywgJ2knKTtcbiAgICAgICAgcmV0dXJuIG1pbWUgIT09IG51bGwgJiYgKGpzb25NaW1lLnRlc3QobWltZSkgfHwgbWltZS50b0xvd2VyQ2FzZSgpID09PSAnYXBwbGljYXRpb24vanNvbi1wYXRjaCtqc29uJyk7XG4gICAgfVxufVxuZXhwb3J0cy5Db25maWd1cmF0aW9uID0gQ29uZmlndXJhdGlvbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIE9wZW5BSSBBUElcbiAqIEFQSXMgZm9yIHNhbXBsaW5nIGZyb20gYW5kIGZpbmUtdHVuaW5nIGxhbmd1YWdlIG1vZGVsc1xuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjIuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hcGlcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbmZpZ3VyYXRpb25cIiksIGV4cG9ydHMpO1xuIiwiZXhwb3J0IGNvbnN0IGlzQnJvd3NlciA9ICgpID0+IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbmV4cG9ydCBjb25zdCBpc1dlYldvcmtlciA9ICgpID0+IHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiICYmXG4gICAgZ2xvYmFsVGhpcy5jb25zdHJ1Y3RvciAmJlxuICAgIGdsb2JhbFRoaXMuY29uc3RydWN0b3IubmFtZSA9PT0gXCJEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZVwiO1xuZXhwb3J0IGNvbnN0IGlzSnNEb20gPSAoKSA9PiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubmFtZSA9PT0gXCJub2RlanNcIikgfHxcbiAgICAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIk5vZGUuanNcIikgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJqc2RvbVwiKSkpO1xuLy8gU3VwYWJhc2UgRWRnZSBGdW5jdGlvbiBwcm92aWRlcyBhIGBEZW5vYCBnbG9iYWwgb2JqZWN0XG4vLyB3aXRob3V0IGB2ZXJzaW9uYCBwcm9wZXJ0eVxuZXhwb3J0IGNvbnN0IGlzRGVubyA9ICgpID0+IHR5cGVvZiBEZW5vICE9PSBcInVuZGVmaW5lZFwiO1xuLy8gTWFyayBub3QtYXMtbm9kZSBpZiBpbiBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uXG5leHBvcnQgY29uc3QgaXNOb2RlID0gKCkgPT4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAhaXNEZW5vKCk7XG5leHBvcnQgY29uc3QgZ2V0RW52ID0gKCkgPT4ge1xuICAgIGxldCBlbnY7XG4gICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAgIGVudiA9IFwiYnJvd3NlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc05vZGUoKSkge1xuICAgICAgICBlbnYgPSBcIm5vZGVcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNXZWJXb3JrZXIoKSkge1xuICAgICAgICBlbnYgPSBcIndlYndvcmtlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0pzRG9tKCkpIHtcbiAgICAgICAgZW52ID0gXCJqc2RvbVwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Rlbm8oKSkge1xuICAgICAgICBlbnYgPSBcImRlbm9cIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVudiA9IFwib3RoZXJcIjtcbiAgICB9XG4gICAgcmV0dXJuIGVudjtcbn07XG5sZXQgcnVudGltZUVudmlyb25tZW50O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJ1bnRpbWVFbnZpcm9ubWVudCgpIHtcbiAgICBpZiAocnVudGltZUVudmlyb25tZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZW52ID0gZ2V0RW52KCk7XG4gICAgICAgIHJ1bnRpbWVFbnZpcm9ubWVudCA9IHtcbiAgICAgICAgICAgIGxpYnJhcnk6IFwibGFuZ2NoYWluLWpzXCIsXG4gICAgICAgICAgICBydW50aW1lOiBlbnYsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBydW50aW1lRW52aXJvbm1lbnQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShuYW1lKSB7XG4gICAgLy8gQ2VydGFpbiBEZW5vIHNldHVwcyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHlvdSB0cnkgdG8gYWNjZXNzIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9od2NoYXNlMTcvbGFuZ2NoYWluanMvaXNzdWVzLzE0MTJcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnY/LltuYW1lXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLXRlbXBsYXRlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBkZWZhdWx0LWNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBsdXNwbHVzICovXG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dmb3J0YWluZS9mZXRjaC1ldmVudC1zb3VyY2UvYmxvYi9tYWluL3NyYy9wYXJzZS50c1xuLy8gZHVlIHRvIGEgcGFja2FnaW5nIGlzc3VlIGluIHRoZSBvcmlnaW5hbC5cbi8vIE1JVCBMaWNlbnNlXG5leHBvcnQgY29uc3QgRXZlbnRTdHJlYW1Db250ZW50VHlwZSA9IFwidGV4dC9ldmVudC1zdHJlYW1cIjtcbi8qKlxuICogQ29udmVydHMgYSBSZWFkYWJsZVN0cmVhbSBpbnRvIGEgY2FsbGJhY2sgcGF0dGVybi5cbiAqIEBwYXJhbSBzdHJlYW0gVGhlIGlucHV0IFJlYWRhYmxlU3RyZWFtLlxuICogQHBhcmFtIG9uQ2h1bmsgQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggbmV3IGJ5dGUgY2h1bmsgaW4gdGhlIHN0cmVhbS5cbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdoZW4gdGhlIHN0cmVhbSBjbG9zZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRCeXRlcyhzdHJlYW0sIG9uQ2h1bmspIHtcbiAgICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gICAgLy8gQ0hBTkdFRDogSW50cm9kdWNlZCBhIFwiZmx1c2hcIiBtZWNoYW5pc20gdG8gcHJvY2VzcyBwb3RlbnRpYWwgcGVuZGluZyBtZXNzYWdlcyB3aGVuIHRoZSBzdHJlYW0gZW5kcy5cbiAgICAvLyAgICAgICAgICBUaGlzIGNoYW5nZSBpcyBlc3NlbnRpYWwgdG8gZW5zdXJlIHRoYXQgd2UgY2FwdHVyZSBldmVyeSBsYXN0IHBpZWNlIG9mIGluZm9ybWF0aW9uIGZyb20gc3RyZWFtcyxcbiAgICAvLyAgICAgICAgICBzdWNoIGFzIHRob3NlIGZyb20gQXp1cmUgT3BlbkFJLCB3aGljaCBtYXkgbm90IHRlcm1pbmF0ZSB3aXRoIGEgYmxhbmsgbGluZS4gV2l0aG91dCB0aGlzXG4gICAgLy8gICAgICAgICAgbWVjaGFuaXNtLCB3ZSByaXNrIGlnbm9yaW5nIGEgcG9zc2libHkgc2lnbmlmaWNhbnQgbGFzdCBtZXNzYWdlLlxuICAgIC8vICAgICAgICAgIFNlZSBodHRwczovL2dpdGh1Yi5jb20vaHdjaGFzZTE3L2xhbmdjaGFpbmpzL2lzc3Vlcy8xMjk5IGZvciBkZXRhaWxzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb25cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgIG9uQ2h1bmsobmV3IFVpbnQ4QXJyYXkoKSwgdHJ1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBvbkNodW5rKHJlc3VsdC52YWx1ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBQYXJzZXMgYXJiaXRhcnkgYnl0ZSBjaHVua3MgaW50byBFdmVudFNvdXJjZSBsaW5lIGJ1ZmZlcnMuXG4gKiBFYWNoIGxpbmUgc2hvdWxkIGJlIG9mIHRoZSBmb3JtYXQgXCJmaWVsZDogdmFsdWVcIiBhbmQgZW5kcyB3aXRoIFxcciwgXFxuLCBvciBcXHJcXG4uXG4gKiBAcGFyYW0gb25MaW5lIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbiBlYWNoIG5ldyBFdmVudFNvdXJjZSBsaW5lLlxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgZm9yIGVhY2ggaW5jb21pbmcgYnl0ZSBjaHVuay5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExpbmVzKG9uTGluZSkge1xuICAgIGxldCBidWZmZXI7XG4gICAgbGV0IHBvc2l0aW9uOyAvLyBjdXJyZW50IHJlYWQgcG9zaXRpb25cbiAgICBsZXQgZmllbGRMZW5ndGg7IC8vIGxlbmd0aCBvZiB0aGUgYGZpZWxkYCBwb3J0aW9uIG9mIHRoZSBsaW5lXG4gICAgbGV0IGRpc2NhcmRUcmFpbGluZ05ld2xpbmUgPSBmYWxzZTtcbiAgICAvLyByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGNhbiBwcm9jZXNzIGVhY2ggaW5jb21pbmcgYnl0ZSBjaHVuazpcbiAgICByZXR1cm4gZnVuY3Rpb24gb25DaHVuayhhcnIsIGZsdXNoKSB7XG4gICAgICAgIGlmIChmbHVzaCkge1xuICAgICAgICAgICAgb25MaW5lKGFyciwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJ1ZmZlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBidWZmZXIgPSBhcnI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICBmaWVsZExlbmd0aCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gd2UncmUgc3RpbGwgcGFyc2luZyB0aGUgb2xkIGxpbmUuIEFwcGVuZCB0aGUgbmV3IGJ5dGVzIGludG8gYnVmZmVyOlxuICAgICAgICAgICAgYnVmZmVyID0gY29uY2F0KGJ1ZmZlciwgYXJyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBidWZMZW5ndGggPSBidWZmZXIubGVuZ3RoO1xuICAgICAgICBsZXQgbGluZVN0YXJ0ID0gMDsgLy8gaW5kZXggd2hlcmUgdGhlIGN1cnJlbnQgbGluZSBzdGFydHNcbiAgICAgICAgd2hpbGUgKHBvc2l0aW9uIDwgYnVmTGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoZGlzY2FyZFRyYWlsaW5nTmV3bGluZSkge1xuICAgICAgICAgICAgICAgIGlmIChidWZmZXJbcG9zaXRpb25dID09PSAxMCAvKiBDb250cm9sQ2hhcnMuTmV3TGluZSAqLykge1xuICAgICAgICAgICAgICAgICAgICBsaW5lU3RhcnQgPSArK3Bvc2l0aW9uOyAvLyBza2lwIHRvIG5leHQgY2hhclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaXNjYXJkVHJhaWxpbmdOZXdsaW5lID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzdGFydCBsb29raW5nIGZvcndhcmQgdGlsbCB0aGUgZW5kIG9mIGxpbmU6XG4gICAgICAgICAgICBsZXQgbGluZUVuZCA9IC0xOyAvLyBpbmRleCBvZiB0aGUgXFxyIG9yIFxcbiBjaGFyXG4gICAgICAgICAgICBmb3IgKDsgcG9zaXRpb24gPCBidWZMZW5ndGggJiYgbGluZUVuZCA9PT0gLTE7ICsrcG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGJ1ZmZlcltwb3NpdGlvbl0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OCAvKiBDb250cm9sQ2hhcnMuQ29sb24gKi86XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRMZW5ndGggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyc3QgY29sb24gaW4gbGluZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkTGVuZ3RoID0gcG9zaXRpb24gLSBsaW5lU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlOjcwMjkgXFxyIGNhc2UgYmVsb3cgc2hvdWxkIGZhbGx0aHJvdWdoIHRvIFxcbjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMyAvKiBDb250cm9sQ2hhcnMuQ2FycmlhZ2VSZXR1cm4gKi86XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNjYXJkVHJhaWxpbmdOZXdsaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWZhbGx0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTAgLyogQ29udHJvbENoYXJzLk5ld0xpbmUgKi86XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lRW5kID0gcG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGluZUVuZCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlciBidXQgdGhlIGxpbmUgaGFzbid0IGVuZGVkLlxuICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBuZXh0IGFyciBhbmQgdGhlbiBjb250aW51ZSBwYXJzaW5nOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gd2UndmUgcmVhY2hlZCB0aGUgbGluZSBlbmQsIHNlbmQgaXQgb3V0OlxuICAgICAgICAgICAgb25MaW5lKGJ1ZmZlci5zdWJhcnJheShsaW5lU3RhcnQsIGxpbmVFbmQpLCBmaWVsZExlbmd0aCk7XG4gICAgICAgICAgICBsaW5lU3RhcnQgPSBwb3NpdGlvbjsgLy8gd2UncmUgbm93IG9uIHRoZSBuZXh0IGxpbmVcbiAgICAgICAgICAgIGZpZWxkTGVuZ3RoID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpbmVTdGFydCA9PT0gYnVmTGVuZ3RoKSB7XG4gICAgICAgICAgICBidWZmZXIgPSB1bmRlZmluZWQ7IC8vIHdlJ3ZlIGZpbmlzaGVkIHJlYWRpbmcgaXRcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsaW5lU3RhcnQgIT09IDApIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyB2aWV3IGludG8gYnVmZmVyIGJlZ2lubmluZyBhdCBsaW5lU3RhcnQgc28gd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY29weSBvdmVyIHRoZSBwcmV2aW91cyBsaW5lcyB3aGVuIHdlIGdldCB0aGUgbmV3IGFycjpcbiAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5zdWJhcnJheShsaW5lU3RhcnQpO1xuICAgICAgICAgICAgcG9zaXRpb24gLT0gbGluZVN0YXJ0O1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuICogUGFyc2VzIGxpbmUgYnVmZmVycyBpbnRvIEV2ZW50U291cmNlTWVzc2FnZXMuXG4gKiBAcGFyYW0gb25JZCBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZWFjaCBgaWRgIGZpZWxkLlxuICogQHBhcmFtIG9uUmV0cnkgQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggYHJldHJ5YCBmaWVsZC5cbiAqIEBwYXJhbSBvbk1lc3NhZ2UgQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggbWVzc2FnZS5cbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkIGZvciBlYWNoIGluY29taW5nIGxpbmUgYnVmZmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWVzc2FnZXMob25NZXNzYWdlLCBvbklkLCBvblJldHJ5KSB7XG4gICAgbGV0IG1lc3NhZ2UgPSBuZXdNZXNzYWdlKCk7XG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgIC8vIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgY2FuIHByb2Nlc3MgZWFjaCBpbmNvbWluZyBsaW5lIGJ1ZmZlcjpcbiAgICByZXR1cm4gZnVuY3Rpb24gb25MaW5lKGxpbmUsIGZpZWxkTGVuZ3RoLCBmbHVzaCkge1xuICAgICAgICBpZiAoZmx1c2gpIHtcbiAgICAgICAgICAgIGlmICghaXNFbXB0eShtZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIG9uTWVzc2FnZT8uKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBuZXdNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpbmUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBlbXB0eSBsaW5lIGRlbm90ZXMgZW5kIG9mIG1lc3NhZ2UuIFRyaWdnZXIgdGhlIGNhbGxiYWNrIGFuZCBzdGFydCBhIG5ldyBtZXNzYWdlOlxuICAgICAgICAgICAgb25NZXNzYWdlPy4obWVzc2FnZSk7XG4gICAgICAgICAgICBtZXNzYWdlID0gbmV3TWVzc2FnZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZpZWxkTGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gZXhjbHVkZSBjb21tZW50cyBhbmQgbGluZXMgd2l0aCBubyB2YWx1ZXNcbiAgICAgICAgICAgIC8vIGxpbmUgaXMgb2YgZm9ybWF0IFwiPGZpZWxkPjo8dmFsdWU+XCIgb3IgXCI8ZmllbGQ+OiA8dmFsdWU+XCJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NlcnZlci1zZW50LWV2ZW50cy5odG1sI2V2ZW50LXN0cmVhbS1pbnRlcnByZXRhdGlvblxuICAgICAgICAgICAgY29uc3QgZmllbGQgPSBkZWNvZGVyLmRlY29kZShsaW5lLnN1YmFycmF5KDAsIGZpZWxkTGVuZ3RoKSk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZU9mZnNldCA9IGZpZWxkTGVuZ3RoICsgKGxpbmVbZmllbGRMZW5ndGggKyAxXSA9PT0gMzIgLyogQ29udHJvbENoYXJzLlNwYWNlICovID8gMiA6IDEpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkZWNvZGVyLmRlY29kZShsaW5lLnN1YmFycmF5KHZhbHVlT2Zmc2V0KSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRhdGFcIjpcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBtZXNzYWdlIGFscmVhZHkgaGFzIGRhdGEsIGFwcGVuZCB0aGUgbmV3IHZhbHVlIHRvIHRoZSBvbGQuXG4gICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSwganVzdCBzZXQgdG8gdGhlIG5ldyB2YWx1ZTpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5kYXRhID0gbWVzc2FnZS5kYXRhID8gbWVzc2FnZS5kYXRhICsgXCJcXG5cIiArIHZhbHVlIDogdmFsdWU7IC8vIG90aGVyd2lzZSxcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImV2ZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXZlbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImlkXCI6XG4gICAgICAgICAgICAgICAgICAgIG9uSWQ/LigobWVzc2FnZS5pZCA9IHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyZXRyeVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHJ5ID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4ocmV0cnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwZXIgc3BlYywgaWdub3JlIG5vbi1pbnRlZ2Vyc1xuICAgICAgICAgICAgICAgICAgICAgICAgb25SZXRyeT8uKChtZXNzYWdlLnJldHJ5ID0gcmV0cnkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY29uY2F0KGEsIGIpIHtcbiAgICBjb25zdCByZXMgPSBuZXcgVWludDhBcnJheShhLmxlbmd0aCArIGIubGVuZ3RoKTtcbiAgICByZXMuc2V0KGEpO1xuICAgIHJlcy5zZXQoYiwgYS5sZW5ndGgpO1xuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBuZXdNZXNzYWdlKCkge1xuICAgIC8vIGRhdGEsIGV2ZW50LCBhbmQgaWQgbXVzdCBiZSBpbml0aWFsaXplZCB0byBlbXB0eSBzdHJpbmdzOlxuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NlcnZlci1zZW50LWV2ZW50cy5odG1sI2V2ZW50LXN0cmVhbS1pbnRlcnByZXRhdGlvblxuICAgIC8vIHJldHJ5IHNob3VsZCBiZSBpbml0aWFsaXplZCB0byB1bmRlZmluZWQgc28gd2UgcmV0dXJuIGEgY29uc2lzdGVudCBzaGFwZVxuICAgIC8vIHRvIHRoZSBqcyBlbmdpbmUgYWxsIHRoZSB0aW1lOiBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvc2hhcGVzLWljcyN0YWtlYXdheXNcbiAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBcIlwiLFxuICAgICAgICBldmVudDogXCJcIixcbiAgICAgICAgaWQ6IFwiXCIsXG4gICAgICAgIHJldHJ5OiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGlzRW1wdHkobWVzc2FnZSkge1xuICAgIHJldHVybiAobWVzc2FnZS5kYXRhID09PSBcIlwiICYmXG4gICAgICAgIG1lc3NhZ2UuZXZlbnQgPT09IFwiXCIgJiZcbiAgICAgICAgbWVzc2FnZS5pZCA9PT0gXCJcIiAmJlxuICAgICAgICBtZXNzYWdlLnJldHJ5ID09PSB1bmRlZmluZWQpO1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci10ZW1wbGF0ZSAqL1xuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWFycm93LWNhbGxiYWNrICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby12YXIgKi9cbi8qIGVzbGludC1kaXNhYmxlIHZhcnMtb24tdG9wICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzICovXG4vKipcbiAqIFRoaXMgaXMgY29waWVkIGZyb20gQHZlc3BhaWFjaC9heGlvcy1mZXRjaC1hZGFwdGVyLCB3aGljaCBleHBvc2VzIGFuIEVTTVxuICogbW9kdWxlIHdpdGhvdXQgc2V0dGluZyB0aGUgXCJ0eXBlXCIgZmllbGQgaW4gcGFja2FnZS5qc29uLlxuICovXG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XG5pbXBvcnQgeyBFdmVudFN0cmVhbUNvbnRlbnRUeXBlLCBnZXRMaW5lcywgZ2V0Qnl0ZXMsIGdldE1lc3NhZ2VzLCB9IGZyb20gXCIuL2V2ZW50LXNvdXJjZS1wYXJzZS5qc1wiO1xuZnVuY3Rpb24gdHJ5SnNvblN0cmluZ2lmeShkYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG59XG4vKipcbiAqIEluIG9yZGVyIHRvIGF2b2lkIGltcG9ydCBpc3N1ZXMgd2l0aCBheGlvcyAxLngsIGNvcHlpbmcgaGVyZSB0aGUgaW50ZXJuYWxcbiAqIHV0aWxpdHkgZnVuY3Rpb25zIHRoYXQgd2UgdXNlZCB0byBpbXBvcnQgZGlyZWN0bHkgZnJvbSBheGlvcy5cbiAqL1xuLy8gQ29waWVkIGZyb20gYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzXG5mdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuICAgIGNvbnN0IHsgdmFsaWRhdGVTdGF0dXMgfSA9IHJlc3BvbnNlLmNvbmZpZztcbiAgICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCAhdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlamVjdChjcmVhdGVFcnJvcihgUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAke3Jlc3BvbnNlLnN0YXR1c30gYW5kIGJvZHkgJHt0eXBlb2YgcmVzcG9uc2UuZGF0YSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXNwb25zZS5kYXRhXG4gICAgICAgICAgICA6IHRyeUpzb25TdHJpbmdpZnkocmVzcG9uc2UuZGF0YSl9YCwgcmVzcG9uc2UuY29uZmlnLCBudWxsLCByZXNwb25zZS5yZXF1ZXN0LCByZXNwb25zZSkpO1xuICAgIH1cbn1cbi8vIENvcGllZCBmcm9tIGF4aW9zL2xpYi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanNcbmZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gICAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuICAgIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuICAgIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICAgIHJldHVybiAvXihbYS16XVthLXpcXGQrXFwtLl0qOik/XFwvXFwvL2kudGVzdCh1cmwpO1xufVxuLy8gQ29waWVkIGZyb20gYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanNcbmZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gICAgcmV0dXJuIHJlbGF0aXZlVVJMXG4gICAgICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sIFwiXCIpICsgXCIvXCIgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sIFwiXCIpXG4gICAgICAgIDogYmFzZVVSTDtcbn1cbi8vIENvcGllZCBmcm9tIGF4aW9zL2xpYi9oZWxwZXJzL2J1aWxkVVJMLmpzXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpXG4gICAgICAgIC5yZXBsYWNlKC8lM0EvZ2ksIFwiOlwiKVxuICAgICAgICAucmVwbGFjZSgvJTI0L2csIFwiJFwiKVxuICAgICAgICAucmVwbGFjZSgvJTJDL2dpLCBcIixcIilcbiAgICAgICAgLnJlcGxhY2UoLyUyMC9nLCBcIitcIilcbiAgICAgICAgLnJlcGxhY2UoLyU1Qi9naSwgXCJbXCIpXG4gICAgICAgIC5yZXBsYWNlKC8lNUQvZ2ksIFwiXVwiKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG4gICAgaWYgKCFwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG4gICAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7XG4gICAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgICAgICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSkge1xuICAgICAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgcGFydHMgPSBbXTtcbiAgICAgICAgZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgICAgICAgICAgICAgIGtleSA9IGAke2tleX1bXWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWwgPSBbdmFsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEYXRlKHYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzT2JqZWN0KHYpKSB7XG4gICAgICAgICAgICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFydHMucHVzaChgJHtlbmNvZGUoa2V5KX09JHtlbmNvZGUodil9YCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKFwiJlwiKTtcbiAgICB9XG4gICAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMpIHtcbiAgICAgICAgdmFyIGhhc2htYXJrSW5kZXggPSB1cmwuaW5kZXhPZihcIiNcIik7XG4gICAgICAgIGlmIChoYXNobWFya0luZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdXJsID0gdXJsLnNsaWNlKDAsIGhhc2htYXJrSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHVybCArPSAodXJsLmluZGV4T2YoXCI/XCIpID09PSAtMSA/IFwiP1wiIDogXCImXCIpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgICB9XG4gICAgcmV0dXJuIHVybDtcbn1cbi8vIENvcGllZCBmcm9tIGF4aW9zL2xpYi9jb3JlL2J1aWxkRnVsbFBhdGguanNcbmZ1bmN0aW9uIGJ1aWxkRnVsbFBhdGgoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKSB7XG4gICAgaWYgKGJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwocmVxdWVzdGVkVVJMKSkge1xuICAgICAgICByZXR1cm4gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcXVlc3RlZFVSTDtcbn1cbi8vIENvcGllZCBmcm9tIGF4aW9zL2xpYi91dGlscy5qc1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09IFwidW5kZWZpbmVkXCI7XG59XG5mdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCI7XG59XG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gXCJbb2JqZWN0IERhdGVdXCI7XG59XG5mdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSBcIltvYmplY3QgVVJMU2VhcmNoUGFyYW1zXVwiO1xufVxuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWwpO1xufVxuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7XG4gICAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkXG4gICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlXG4gICAgaWYgKHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgb2JqID0gW29ial07XG4gICAgfVxuICAgIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXNcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09IFwiW29iamVjdCBGb3JtRGF0YV1cIjtcbn1cbi8vIFRPRE8gdGhpcyBuZWVkcyB0byBiZSBmaXhlZCB0byBydW4gaW4gbmV3ZXIgYnJvd3Nlci1saWtlIGVudmlyb25tZW50c1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3Zlc3BhaWFjaC9heGlvcy1mZXRjaC1hZGFwdGVyL2lzc3Vlcy8yMCNpc3N1ZS0xMzk2MzY1MzIyXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAgICAgKG5hdmlnYXRvci5wcm9kdWN0ID09PSBcIlJlYWN0TmF0aXZlXCIgfHxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgICAgICAgbmF2aWdhdG9yLnByb2R1Y3QgPT09IFwiTmF0aXZlU2NyaXB0XCIgfHxcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgICAgICAgbmF2aWdhdG9yLnByb2R1Y3QgPT09IFwiTlNcIikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCI7XG59XG4vKipcbiAqIC0gQ3JlYXRlIGEgcmVxdWVzdCBvYmplY3RcbiAqIC0gR2V0IHJlc3BvbnNlIGJvZHlcbiAqIC0gQ2hlY2sgaWYgdGltZW91dFxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBmZXRjaEFkYXB0ZXIoY29uZmlnKSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGNyZWF0ZVJlcXVlc3QoY29uZmlnKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0UmVzcG9uc2UocmVxdWVzdCwgY29uZmlnKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZWplY3QoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zXG4gICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY29uZmlnLnNldHRsZSkgPT09IFwiW29iamVjdCBGdW5jdGlvbl1cIlxuICAgICAgICAgICAgICAgID8gY29uZmlnLnNldHRsZShyZXNvbHZlLCByZWplY3QsIGRhdGEpXG4gICAgICAgICAgICAgICAgOiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkYXRhKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBGZXRjaCBBUEkgc3RhZ2UgdHdvIGlzIHRvIGdldCByZXNwb25zZSBib2R5LiBUaGlzIGZ1bnRpb24gdHJpZXMgdG8gcmV0cmlldmVcbiAqIHJlc3BvbnNlIGJvZHkgYmFzZWQgb24gcmVzcG9uc2UncyB0eXBlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFJlc3BvbnNlKHJlcXVlc3QsIGNvbmZpZykge1xuICAgIGxldCBzdGFnZU9uZTtcbiAgICB0cnkge1xuICAgICAgICBzdGFnZU9uZSA9IGF3YWl0IGZldGNoKHJlcXVlc3QpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSAmJiBlLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoXCJSZXF1ZXN0IGFib3J0ZWRcIiwgY29uZmlnLCBcIkVDT05OQUJPUlRFRFwiLCByZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZSAmJiBlLm5hbWUgPT09IFwiVGltZW91dEVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihcIlJlcXVlc3QgdGltZW91dFwiLCBjb25maWcsIFwiRUNPTk5BQk9SVEVEXCIsIHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihcIk5ldHdvcmsgRXJyb3JcIiwgY29uZmlnLCBcIkVSUl9ORVRXT1JLXCIsIHJlcXVlc3QpO1xuICAgIH1cbiAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgc3RhZ2VPbmUuaGVhZGVycy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgIGhlYWRlcnNba2V5XSA9IHZhbHVlO1xuICAgIH0pO1xuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgICBvazogc3RhZ2VPbmUub2ssXG4gICAgICAgIHN0YXR1czogc3RhZ2VPbmUuc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiBzdGFnZU9uZS5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBjb25maWcsXG4gICAgICAgIHJlcXVlc3QsXG4gICAgfTtcbiAgICBpZiAoc3RhZ2VPbmUuc3RhdHVzID49IDIwMCAmJiBzdGFnZU9uZS5zdGF0dXMgIT09IDIwNCkge1xuICAgICAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSA9PT0gXCJzdHJlYW1cIikge1xuICAgICAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSBzdGFnZU9uZS5oZWFkZXJzLmdldChcImNvbnRlbnQtdHlwZVwiKTtcbiAgICAgICAgICAgIGlmICghY29udGVudFR5cGU/LnN0YXJ0c1dpdGgoRXZlbnRTdHJlYW1Db250ZW50VHlwZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY29udGVudC10eXBlIGlzIG5vdCBzdHJlYW0sIHJlc3BvbnNlIGlzIG1vc3QgbGlrZWx5IGFuIGVycm9yXG4gICAgICAgICAgICAgICAgaWYgKHN0YWdlT25lLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVycm9yIGlzIGEgSlNPTiwgcGFyc2UgaXQuIE90aGVyd2lzZSwgcmV0dXJuIGFzIHRleHRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlPy5zdGFydHNXaXRoKFwiYXBwbGljYXRpb24vanNvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IGF3YWl0IHN0YWdlT25lLmpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSBhd2FpdCBzdGFnZU9uZS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5vbi1zdHJlYW0gcmVzcG9uc2UgaXMgYWxzbyBub3QgYW4gZXJyb3IsIHRocm93XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBjb250ZW50LXR5cGUgdG8gYmUgJHtFdmVudFN0cmVhbUNvbnRlbnRUeXBlfSwgQWN0dWFsOiAke2NvbnRlbnRUeXBlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgZ2V0Qnl0ZXMoc3RhZ2VPbmUuYm9keSwgZ2V0TGluZXMoZ2V0TWVzc2FnZXMoY29uZmlnLm9ubWVzc2FnZSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY29uZmlnLnJlc3BvbnNlVHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheWJ1ZmZlclwiOlxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID0gYXdhaXQgc3RhZ2VPbmUuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImJsb2JcIjpcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IGF3YWl0IHN0YWdlT25lLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImpzb25cIjpcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IGF3YWl0IHN0YWdlT25lLmpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImZvcm1EYXRhXCI6XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSBhd2FpdCBzdGFnZU9uZS5mb3JtRGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID0gYXdhaXQgc3RhZ2VPbmUudGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBSZXF1ZXN0IG9iamVjdCBiYXNlZCBvbiBjb25maWd1cmF0aW9uJ3MgYXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUmVxdWVzdChjb25maWcpIHtcbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoY29uZmlnLmhlYWRlcnMpO1xuICAgIC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cbiAgICBpZiAoY29uZmlnLmF1dGgpIHtcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBjb25maWcuYXV0aC51c2VybmFtZSB8fCBcIlwiO1xuICAgICAgICBjb25zdCBwYXNzd29yZCA9IGNvbmZpZy5hdXRoLnBhc3N3b3JkXG4gICAgICAgICAgICA/IGRlY29kZVVSSShlbmNvZGVVUklDb21wb25lbnQoY29uZmlnLmF1dGgucGFzc3dvcmQpKVxuICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICBoZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYEJhc2ljICR7YnRvYShgJHt1c2VybmFtZX06JHtwYXNzd29yZH1gKX1gKTtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIG1ldGhvZCxcbiAgICB9O1xuICAgIGlmIChtZXRob2QgIT09IFwiR0VUXCIgJiYgbWV0aG9kICE9PSBcIkhFQURcIikge1xuICAgICAgICBvcHRpb25zLmJvZHkgPSBjb25maWcuZGF0YTtcbiAgICAgICAgLy8gSW4gdGhlc2UgY2FzZXMgdGhlIGJyb3dzZXIgd2lsbCBhdXRvbWF0aWNhbGx5IHNldCB0aGUgY29ycmVjdCBDb250ZW50LVR5cGUsXG4gICAgICAgIC8vIGJ1dCBvbmx5IGlmIHRoYXQgaGVhZGVyIGhhc24ndCBiZWVuIHNldCB5ZXQuIFNvIHRoYXQncyB3aHkgd2UncmUgZGVsZXRpbmcgaXQuXG4gICAgICAgIGlmIChpc0Zvcm1EYXRhKG9wdGlvbnMuYm9keSkgJiYgaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoXCJDb250ZW50LVR5cGVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU29tZSBgZmV0Y2hgIGltcGxlbWVudGF0aW9ucyB3aWxsIG92ZXJyaWRlIHRoZSBDb250ZW50LVR5cGUgdG8gdGV4dC9wbGFpblxuICAgIC8vIHdoZW4gYm9keSBpcyBhIHN0cmluZy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2h3Y2hhc2UxNy9sYW5nY2hhaW5qcy9pc3N1ZXMvMTAxMFxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5ib2R5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG9wdGlvbnMuYm9keSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShvcHRpb25zLmJvZHkpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLm1vZGUpIHtcbiAgICAgICAgb3B0aW9ucy5tb2RlID0gY29uZmlnLm1vZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcuY2FjaGUpIHtcbiAgICAgICAgb3B0aW9ucy5jYWNoZSA9IGNvbmZpZy5jYWNoZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5pbnRlZ3JpdHkpIHtcbiAgICAgICAgb3B0aW9ucy5pbnRlZ3JpdHkgPSBjb25maWcuaW50ZWdyaXR5O1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnJlZGlyZWN0KSB7XG4gICAgICAgIG9wdGlvbnMucmVkaXJlY3QgPSBjb25maWcucmVkaXJlY3Q7XG4gICAgfVxuICAgIGlmIChjb25maWcucmVmZXJyZXIpIHtcbiAgICAgICAgb3B0aW9ucy5yZWZlcnJlciA9IGNvbmZpZy5yZWZlcnJlcjtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50aW1lb3V0ICYmIGNvbmZpZy50aW1lb3V0ID4gMCkge1xuICAgICAgICBvcHRpb25zLnNpZ25hbCA9IEFib3J0U2lnbmFsLnRpbWVvdXQoY29uZmlnLnRpbWVvdXQpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnNpZ25hbCkge1xuICAgICAgICAvLyB0aGlzIG92ZXJyaWRlcyB0aGUgdGltZW91dCBzaWduYWwgaWYgYm90aCBhcmUgc2V0XG4gICAgICAgIG9wdGlvbnMuc2lnbmFsID0gY29uZmlnLnNpZ25hbDtcbiAgICB9XG4gICAgLy8gVGhpcyBjb25maWcgaXMgc2ltaWxhciB0byBYSFLigJlzIHdpdGhDcmVkZW50aWFscyBmbGFnLCBidXQgd2l0aCB0aHJlZSBhdmFpbGFibGUgdmFsdWVzIGluc3RlYWQgb2YgdHdvLlxuICAgIC8vIFNvIGlmIHdpdGhDcmVkZW50aWFscyBpcyBub3Qgc2V0LCBkZWZhdWx0IHZhbHVlICdzYW1lLW9yaWdpbicgd2lsbCBiZSB1c2VkXG4gICAgaWYgKCFpc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgICBvcHRpb25zLmNyZWRlbnRpYWxzID0gY29uZmlnLndpdGhDcmVkZW50aWFscyA/IFwiaW5jbHVkZVwiIDogXCJvbWl0XCI7XG4gICAgfVxuICAgIC8vIGZvciBzdHJlYW1pbmdcbiAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSA9PT0gXCJzdHJlYW1cIikge1xuICAgICAgICBvcHRpb25zLmhlYWRlcnMuc2V0KFwiQWNjZXB0XCIsIEV2ZW50U3RyZWFtQ29udGVudFR5cGUpO1xuICAgIH1cbiAgICBjb25zdCBmdWxsUGF0aCA9IGJ1aWxkRnVsbFBhdGgoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpO1xuICAgIGNvbnN0IHVybCA9IGJ1aWxkVVJMKGZ1bGxQYXRoLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplcik7XG4gICAgLy8gRXhwZWN0ZWQgYnJvd3NlciB0byB0aHJvdyBlcnJvciBpZiB0aGVyZSBpcyBhbnkgd3JvbmcgY29uZmlndXJhdGlvbiB2YWx1ZVxuICAgIHJldHVybiBuZXcgUmVxdWVzdCh1cmwsIG9wdGlvbnMpO1xufVxuLyoqXG4gKiBOb3RlOlxuICpcbiAqICAgRnJvbSB2ZXJzaW9uID49IDAuMjcuMCwgY3JlYXRlRXJyb3IgZnVuY3Rpb24gaXMgcmVwbGFjZWQgYnkgQXhpb3NFcnJvciBjbGFzcy5cbiAqICAgU28gSSBjb3B5IHRoZSBvbGQgY3JlYXRlRXJyb3IgZnVuY3Rpb24gaGVyZSBmb3IgYmFja3dhcmQgY29tcGF0aWJsZS5cbiAqXG4gKlxuICpcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRXJyb3IobWVzc2FnZSwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICAgIGlmIChheGlvcy5BeGlvc0Vycm9yICYmIHR5cGVvZiBheGlvcy5BeGlvc0Vycm9yID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBheGlvcy5BeGlvc0Vycm9yKG1lc3NhZ2UsIGF4aW9zLkF4aW9zRXJyb3JbY29kZV0sIGNvbmZpZywgcmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTtcbn1cbi8qKlxuICpcbiAqIE5vdGU6XG4gKlxuICogICBUaGlzIGZ1bmN0aW9uIGlzIGZvciBiYWNrd2FyZCBjb21wYXRpYmxlLlxuICpcbiAqXG4gKiBVcGRhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIGNvbmZpZywgZXJyb3IgY29kZSwgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIFRoZSBlcnJvciB0byB1cGRhdGUuXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGVycm9yLlxuICovXG5mdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBlcnJvci5jb25maWcgPSBjb25maWc7XG4gICAgaWYgKGNvZGUpIHtcbiAgICAgICAgZXJyb3IuY29kZSA9IGNvZGU7XG4gICAgfVxuICAgIGVycm9yLnJlcXVlc3QgPSByZXF1ZXN0O1xuICAgIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgZXJyb3IuaXNBeGlvc0Vycm9yID0gdHJ1ZTtcbiAgICBlcnJvci50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyBTdGFuZGFyZFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgLy8gTWljcm9zb2Z0XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIG51bWJlcjogdGhpcy5udW1iZXIsXG4gICAgICAgICAgICAvLyBNb3ppbGxhXG4gICAgICAgICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSxcbiAgICAgICAgICAgIGxpbmVOdW1iZXI6IHRoaXMubGluZU51bWJlcixcbiAgICAgICAgICAgIGNvbHVtbk51bWJlcjogdGhpcy5jb2x1bW5OdW1iZXIsXG4gICAgICAgICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICAgICAgICAgIC8vIEF4aW9zXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgY29kZTogdGhpcy5jb2RlLFxuICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnJlc3BvbnNlICYmIHRoaXMucmVzcG9uc2Uuc3RhdHVzID8gdGhpcy5yZXNwb25zZS5zdGF0dXMgOiBudWxsLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIGVycm9yO1xufVxuIiwiZXhwb3J0IGNvbnN0IGNodW5rQXJyYXkgPSAoYXJyLCBjaHVua1NpemUpID0+IGFyci5yZWR1Y2UoKGNodW5rcywgZWxlbSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBjaHVua0luZGV4ID0gTWF0aC5mbG9vcihpbmRleCAvIGNodW5rU2l6ZSk7XG4gICAgY29uc3QgY2h1bmsgPSBjaHVua3NbY2h1bmtJbmRleF0gfHwgW107XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgY2h1bmtzW2NodW5rSW5kZXhdID0gY2h1bmsuY29uY2F0KFtlbGVtXSk7XG4gICAgcmV0dXJuIGNodW5rcztcbn0sIFtdKTtcbiIsIiFmdW5jdGlvbihlKXt2YXIgdDtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKTooXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz90PXdpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP3Q9Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiYodD1zZWxmKSx0Lm9iamVjdEhhc2g9ZSgpKX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gcihvLGksdSl7ZnVuY3Rpb24gcyhuLGUpe2lmKCFpW25dKXtpZighb1tuXSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZSYmdClyZXR1cm4gdChuLCEwKTtpZihhKXJldHVybiBhKG4sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbitcIidcIil9ZT1pW25dPXtleHBvcnRzOnt9fTtvW25dWzBdLmNhbGwoZS5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciB0PW9bbl1bMV1bZV07cmV0dXJuIHModHx8ZSl9LGUsZS5leHBvcnRzLHIsbyxpLHUpfXJldHVybiBpW25dLmV4cG9ydHN9Zm9yKHZhciBhPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsZT0wO2U8dS5sZW5ndGg7ZSsrKXModVtlXSk7cmV0dXJuIHN9KHsxOltmdW5jdGlvbih3LGIsbSl7IWZ1bmN0aW9uKGUsbixzLGMsZCxoLHAsZyx5KXtcInVzZSBzdHJpY3RcIjt2YXIgcj13KFwiY3J5cHRvXCIpO2Z1bmN0aW9uIHQoZSx0KXt0PXUoZSx0KTt2YXIgbjtyZXR1cm4gdm9pZCAwPT09KG49XCJwYXNzdGhyb3VnaFwiIT09dC5hbGdvcml0aG0/ci5jcmVhdGVIYXNoKHQuYWxnb3JpdGhtKTpuZXcgbCkud3JpdGUmJihuLndyaXRlPW4udXBkYXRlLG4uZW5kPW4udXBkYXRlKSxmKHQsbikuZGlzcGF0Y2goZSksbi51cGRhdGV8fG4uZW5kKFwiXCIpLG4uZGlnZXN0P24uZGlnZXN0KFwiYnVmZmVyXCI9PT10LmVuY29kaW5nP3ZvaWQgMDp0LmVuY29kaW5nKTooZT1uLnJlYWQoKSxcImJ1ZmZlclwiIT09dC5lbmNvZGluZz9lLnRvU3RyaW5nKHQuZW5jb2RpbmcpOmUpfShtPWIuZXhwb3J0cz10KS5zaGExPWZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfSxtLmtleXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSx7ZXhjbHVkZVZhbHVlczohMCxhbGdvcml0aG06XCJzaGExXCIsZW5jb2Rpbmc6XCJoZXhcIn0pfSxtLk1ENT1mdW5jdGlvbihlKXtyZXR1cm4gdChlLHthbGdvcml0aG06XCJtZDVcIixlbmNvZGluZzpcImhleFwifSl9LG0ua2V5c01ENT1mdW5jdGlvbihlKXtyZXR1cm4gdChlLHthbGdvcml0aG06XCJtZDVcIixlbmNvZGluZzpcImhleFwiLGV4Y2x1ZGVWYWx1ZXM6ITB9KX07dmFyIG89ci5nZXRIYXNoZXM/ci5nZXRIYXNoZXMoKS5zbGljZSgpOltcInNoYTFcIixcIm1kNVwiXSxpPShvLnB1c2goXCJwYXNzdGhyb3VnaFwiKSxbXCJidWZmZXJcIixcImhleFwiLFwiYmluYXJ5XCIsXCJiYXNlNjRcIl0pO2Z1bmN0aW9uIHUoZSx0KXt2YXIgbj17fTtpZihuLmFsZ29yaXRobT0odD10fHx7fSkuYWxnb3JpdGhtfHxcInNoYTFcIixuLmVuY29kaW5nPXQuZW5jb2Rpbmd8fFwiaGV4XCIsbi5leGNsdWRlVmFsdWVzPSEhdC5leGNsdWRlVmFsdWVzLG4uYWxnb3JpdGhtPW4uYWxnb3JpdGhtLnRvTG93ZXJDYXNlKCksbi5lbmNvZGluZz1uLmVuY29kaW5nLnRvTG93ZXJDYXNlKCksbi5pZ25vcmVVbmtub3duPSEwPT09dC5pZ25vcmVVbmtub3duLG4ucmVzcGVjdFR5cGU9ITEhPT10LnJlc3BlY3RUeXBlLG4ucmVzcGVjdEZ1bmN0aW9uTmFtZXM9ITEhPT10LnJlc3BlY3RGdW5jdGlvbk5hbWVzLG4ucmVzcGVjdEZ1bmN0aW9uUHJvcGVydGllcz0hMSE9PXQucmVzcGVjdEZ1bmN0aW9uUHJvcGVydGllcyxuLnVub3JkZXJlZEFycmF5cz0hMD09PXQudW5vcmRlcmVkQXJyYXlzLG4udW5vcmRlcmVkU2V0cz0hMSE9PXQudW5vcmRlcmVkU2V0cyxuLnVub3JkZXJlZE9iamVjdHM9ITEhPT10LnVub3JkZXJlZE9iamVjdHMsbi5yZXBsYWNlcj10LnJlcGxhY2VyfHx2b2lkIDAsbi5leGNsdWRlS2V5cz10LmV4Y2x1ZGVLZXlzfHx2b2lkIDAsdm9pZCAwPT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJPYmplY3QgYXJndW1lbnQgcmVxdWlyZWQuXCIpO2Zvcih2YXIgcj0wO3I8by5sZW5ndGg7KytyKW9bcl0udG9Mb3dlckNhc2UoKT09PW4uYWxnb3JpdGhtLnRvTG93ZXJDYXNlKCkmJihuLmFsZ29yaXRobT1vW3JdKTtpZigtMT09PW8uaW5kZXhPZihuLmFsZ29yaXRobSkpdGhyb3cgbmV3IEVycm9yKCdBbGdvcml0aG0gXCInK24uYWxnb3JpdGhtKydcIiAgbm90IHN1cHBvcnRlZC4gc3VwcG9ydGVkIHZhbHVlczogJytvLmpvaW4oXCIsIFwiKSk7aWYoLTE9PT1pLmluZGV4T2Yobi5lbmNvZGluZykmJlwicGFzc3Rocm91Z2hcIiE9PW4uYWxnb3JpdGhtKXRocm93IG5ldyBFcnJvcignRW5jb2RpbmcgXCInK24uZW5jb2RpbmcrJ1wiICBub3Qgc3VwcG9ydGVkLiBzdXBwb3J0ZWQgdmFsdWVzOiAnK2kuam9pbihcIiwgXCIpKTtyZXR1cm4gbn1mdW5jdGlvbiBhKGUpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUpcmV0dXJuIG51bGwhPS9eZnVuY3Rpb25cXHMrXFx3KlxccypcXChcXHMqXFwpXFxzKntcXHMrXFxbbmF0aXZlIGNvZGVcXF1cXHMrfSQvaS5leGVjKEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKX1mdW5jdGlvbiBmKG8sdCxpKXtpPWl8fFtdO2Z1bmN0aW9uIHUoZSl7cmV0dXJuIHQudXBkYXRlP3QudXBkYXRlKGUsXCJ1dGY4XCIpOnQud3JpdGUoZSxcInV0ZjhcIil9cmV0dXJue2Rpc3BhdGNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW1wiX1wiKyhudWxsPT09KGU9by5yZXBsYWNlcj9vLnJlcGxhY2VyKGUpOmUpP1wibnVsbFwiOnR5cGVvZiBlKV0oZSl9LF9vYmplY3Q6ZnVuY3Rpb24odCl7dmFyIG4sZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkscj0vXFxbb2JqZWN0ICguKilcXF0vaS5leGVjKGUpO3I9KHI9cj9yWzFdOlwidW5rbm93bjpbXCIrZStcIl1cIikudG9Mb3dlckNhc2UoKTtpZigwPD0oZT1pLmluZGV4T2YodCkpKXJldHVybiB0aGlzLmRpc3BhdGNoKFwiW0NJUkNVTEFSOlwiK2UrXCJdXCIpO2lmKGkucHVzaCh0KSx2b2lkIDAhPT1zJiZzLmlzQnVmZmVyJiZzLmlzQnVmZmVyKHQpKXJldHVybiB1KFwiYnVmZmVyOlwiKSx1KHQpO2lmKFwib2JqZWN0XCI9PT1yfHxcImZ1bmN0aW9uXCI9PT1yfHxcImFzeW5jZnVuY3Rpb25cIj09PXIpcmV0dXJuIGU9T2JqZWN0LmtleXModCksby51bm9yZGVyZWRPYmplY3RzJiYoZT1lLnNvcnQoKSksITE9PT1vLnJlc3BlY3RUeXBlfHxhKHQpfHxlLnNwbGljZSgwLDAsXCJwcm90b3R5cGVcIixcIl9fcHJvdG9fX1wiLFwiY29uc3RydWN0b3JcIiksby5leGNsdWRlS2V5cyYmKGU9ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIW8uZXhjbHVkZUtleXMoZSl9KSksdShcIm9iamVjdDpcIitlLmxlbmd0aCtcIjpcIiksbj10aGlzLGUuZm9yRWFjaChmdW5jdGlvbihlKXtuLmRpc3BhdGNoKGUpLHUoXCI6XCIpLG8uZXhjbHVkZVZhbHVlc3x8bi5kaXNwYXRjaCh0W2VdKSx1KFwiLFwiKX0pO2lmKCF0aGlzW1wiX1wiK3JdKXtpZihvLmlnbm9yZVVua25vd24pcmV0dXJuIHUoXCJbXCIrcitcIl1cIik7dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG9iamVjdCB0eXBlIFwiJytyKydcIicpfXRoaXNbXCJfXCIrcl0odCl9LF9hcnJheTpmdW5jdGlvbihlLHQpe3Q9dm9pZCAwIT09dD90OiExIT09by51bm9yZGVyZWRBcnJheXM7dmFyIG49dGhpcztpZih1KFwiYXJyYXk6XCIrZS5sZW5ndGgrXCI6XCIpLCF0fHxlLmxlbmd0aDw9MSlyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBuLmRpc3BhdGNoKGUpfSk7dmFyIHI9W10sdD1lLm1hcChmdW5jdGlvbihlKXt2YXIgdD1uZXcgbCxuPWkuc2xpY2UoKTtyZXR1cm4gZihvLHQsbikuZGlzcGF0Y2goZSkscj1yLmNvbmNhdChuLnNsaWNlKGkubGVuZ3RoKSksdC5yZWFkKCkudG9TdHJpbmcoKX0pO3JldHVybiBpPWkuY29uY2F0KHIpLHQuc29ydCgpLHRoaXMuX2FycmF5KHQsITEpfSxfZGF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdShcImRhdGU6XCIrZS50b0pTT04oKSl9LF9zeW1ib2w6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJzeW1ib2w6XCIrZS50b1N0cmluZygpKX0sX2Vycm9yOmZ1bmN0aW9uKGUpe3JldHVybiB1KFwiZXJyb3I6XCIrZS50b1N0cmluZygpKX0sX2Jvb2xlYW46ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJib29sOlwiK2UudG9TdHJpbmcoKSl9LF9zdHJpbmc6ZnVuY3Rpb24oZSl7dShcInN0cmluZzpcIitlLmxlbmd0aCtcIjpcIiksdShlLnRvU3RyaW5nKCkpfSxfZnVuY3Rpb246ZnVuY3Rpb24oZSl7dShcImZuOlwiKSxhKGUpP3RoaXMuZGlzcGF0Y2goXCJbbmF0aXZlXVwiKTp0aGlzLmRpc3BhdGNoKGUudG9TdHJpbmcoKSksITEhPT1vLnJlc3BlY3RGdW5jdGlvbk5hbWVzJiZ0aGlzLmRpc3BhdGNoKFwiZnVuY3Rpb24tbmFtZTpcIitTdHJpbmcoZS5uYW1lKSksby5yZXNwZWN0RnVuY3Rpb25Qcm9wZXJ0aWVzJiZ0aGlzLl9vYmplY3QoZSl9LF9udW1iZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJudW1iZXI6XCIrZS50b1N0cmluZygpKX0sX3htbDpmdW5jdGlvbihlKXtyZXR1cm4gdShcInhtbDpcIitlLnRvU3RyaW5nKCkpfSxfbnVsbDpmdW5jdGlvbigpe3JldHVybiB1KFwiTnVsbFwiKX0sX3VuZGVmaW5lZDpmdW5jdGlvbigpe3JldHVybiB1KFwiVW5kZWZpbmVkXCIpfSxfcmVnZXhwOmZ1bmN0aW9uKGUpe3JldHVybiB1KFwicmVnZXg6XCIrZS50b1N0cmluZygpKX0sX3VpbnQ4YXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJ1aW50OGFycmF5OlwiKSx0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpKX0sX3VpbnQ4Y2xhbXBlZGFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiB1KFwidWludDhjbGFtcGVkYXJyYXk6XCIpLHRoaXMuZGlzcGF0Y2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpfSxfaW50OGFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiB1KFwiaW50OGFycmF5OlwiKSx0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpKX0sX3VpbnQxNmFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiB1KFwidWludDE2YXJyYXk6XCIpLHRoaXMuZGlzcGF0Y2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpfSxfaW50MTZhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gdShcImludDE2YXJyYXk6XCIpLHRoaXMuZGlzcGF0Y2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpfSxfdWludDMyYXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJ1aW50MzJhcnJheTpcIiksdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKSl9LF9pbnQzMmFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiB1KFwiaW50MzJhcnJheTpcIiksdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKSl9LF9mbG9hdDMyYXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJmbG9hdDMyYXJyYXk6XCIpLHRoaXMuZGlzcGF0Y2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpfSxfZmxvYXQ2NGFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiB1KFwiZmxvYXQ2NGFycmF5OlwiKSx0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpKX0sX2FycmF5YnVmZmVyOmZ1bmN0aW9uKGUpe3JldHVybiB1KFwiYXJyYXlidWZmZXI6XCIpLHRoaXMuZGlzcGF0Y2gobmV3IFVpbnQ4QXJyYXkoZSkpfSxfdXJsOmZ1bmN0aW9uKGUpe3JldHVybiB1KFwidXJsOlwiK2UudG9TdHJpbmcoKSl9LF9tYXA6ZnVuY3Rpb24oZSl7dShcIm1hcDpcIik7ZT1BcnJheS5mcm9tKGUpO3JldHVybiB0aGlzLl9hcnJheShlLCExIT09by51bm9yZGVyZWRTZXRzKX0sX3NldDpmdW5jdGlvbihlKXt1KFwic2V0OlwiKTtlPUFycmF5LmZyb20oZSk7cmV0dXJuIHRoaXMuX2FycmF5KGUsITEhPT1vLnVub3JkZXJlZFNldHMpfSxfZmlsZTpmdW5jdGlvbihlKXtyZXR1cm4gdShcImZpbGU6XCIpLHRoaXMuZGlzcGF0Y2goW2UubmFtZSxlLnNpemUsZS50eXBlLGUubGFzdE1vZGZpZWRdKX0sX2Jsb2I6ZnVuY3Rpb24oKXtpZihvLmlnbm9yZVVua25vd24pcmV0dXJuIHUoXCJbYmxvYl1cIik7dGhyb3cgRXJyb3IoJ0hhc2hpbmcgQmxvYiBvYmplY3RzIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkXFxuKHNlZSBodHRwczovL2dpdGh1Yi5jb20vcHVsZW9zL29iamVjdC1oYXNoL2lzc3Vlcy8yNilcXG5Vc2UgXCJvcHRpb25zLnJlcGxhY2VyXCIgb3IgXCJvcHRpb25zLmlnbm9yZVVua25vd25cIlxcbicpfSxfZG9td2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJkb213aW5kb3dcIil9LF9iaWdpbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJiaWdpbnQ6XCIrZS50b1N0cmluZygpKX0sX3Byb2Nlc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdShcInByb2Nlc3NcIil9LF90aW1lcjpmdW5jdGlvbigpe3JldHVybiB1KFwidGltZXJcIil9LF9waXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJwaXBlXCIpfSxfdGNwOmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJ0Y3BcIil9LF91ZHA6ZnVuY3Rpb24oKXtyZXR1cm4gdShcInVkcFwiKX0sX3R0eTpmdW5jdGlvbigpe3JldHVybiB1KFwidHR5XCIpfSxfc3RhdHdhdGNoZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdShcInN0YXR3YXRjaGVyXCIpfSxfc2VjdXJlY29udGV4dDpmdW5jdGlvbigpe3JldHVybiB1KFwic2VjdXJlY29udGV4dFwiKX0sX2Nvbm5lY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdShcImNvbm5lY3Rpb25cIil9LF96bGliOmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJ6bGliXCIpfSxfY29udGV4dDpmdW5jdGlvbigpe3JldHVybiB1KFwiY29udGV4dFwiKX0sX25vZGVzY3JpcHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdShcIm5vZGVzY3JpcHRcIil9LF9odHRwcGFyc2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJodHRwcGFyc2VyXCIpfSxfZGF0YXZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4gdShcImRhdGF2aWV3XCIpfSxfc2lnbmFsOmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJzaWduYWxcIil9LF9mc2V2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJmc2V2ZW50XCIpfSxfdGxzd3JhcDpmdW5jdGlvbigpe3JldHVybiB1KFwidGxzd3JhcFwiKX19fWZ1bmN0aW9uIGwoKXtyZXR1cm57YnVmOlwiXCIsd3JpdGU6ZnVuY3Rpb24oZSl7dGhpcy5idWYrPWV9LGVuZDpmdW5jdGlvbihlKXt0aGlzLmJ1Zis9ZX0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1Zn19fW0ud3JpdGVUb1N0cmVhbT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPXQsdD17fSksZih0PXUoZSx0KSxuKS5kaXNwYXRjaChlKX19LmNhbGwodGhpcyx3KFwibFlwb0kyXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sdyhcImJ1ZmZlclwiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLFwiL2Zha2VfOWE1YWE0OWQuanNcIixcIi9cIil9LHtidWZmZXI6MyxjcnlwdG86NSxsWXBvSTI6MTF9XSwyOltmdW5jdGlvbihlLHQsZil7IWZ1bmN0aW9uKGUsdCxuLHIsbyxpLHUscyxhKXshZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGE9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSx0PVwiK1wiLmNoYXJDb2RlQXQoMCksbj1cIi9cIi5jaGFyQ29kZUF0KDApLHI9XCIwXCIuY2hhckNvZGVBdCgwKSxvPVwiYVwiLmNoYXJDb2RlQXQoMCksaT1cIkFcIi5jaGFyQ29kZUF0KDApLHU9XCItXCIuY2hhckNvZGVBdCgwKSxzPVwiX1wiLmNoYXJDb2RlQXQoMCk7ZnVuY3Rpb24gZihlKXtlPWUuY2hhckNvZGVBdCgwKTtyZXR1cm4gZT09PXR8fGU9PT11PzYyOmU9PT1ufHxlPT09cz82MzplPHI/LTE6ZTxyKzEwP2UtcisyNisyNjplPGkrMjY/ZS1pOmU8bysyNj9lLW8rMjY6dm9pZCAwfWUudG9CeXRlQXJyYXk9ZnVuY3Rpb24oZSl7dmFyIHQsbjtpZigwPGUubGVuZ3RoJTQpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNFwiKTt2YXIgcj1lLmxlbmd0aCxyPVwiPVwiPT09ZS5jaGFyQXQoci0yKT8yOlwiPVwiPT09ZS5jaGFyQXQoci0xKT8xOjAsbz1uZXcgYSgzKmUubGVuZ3RoLzQtciksaT0wPHI/ZS5sZW5ndGgtNDplLmxlbmd0aCx1PTA7ZnVuY3Rpb24gcyhlKXtvW3UrK109ZX1mb3IodD0wO3Q8aTt0Kz00LDApcygoMTY3MTE2ODAmKG49ZihlLmNoYXJBdCh0KSk8PDE4fGYoZS5jaGFyQXQodCsxKSk8PDEyfGYoZS5jaGFyQXQodCsyKSk8PDZ8ZihlLmNoYXJBdCh0KzMpKSkpPj4xNikscygoNjUyODAmbik+PjgpLHMoMjU1Jm4pO3JldHVybiAyPT1yP3MoMjU1JihuPWYoZS5jaGFyQXQodCkpPDwyfGYoZS5jaGFyQXQodCsxKSk+PjQpKToxPT1yJiYocygobj1mKGUuY2hhckF0KHQpKTw8MTB8ZihlLmNoYXJBdCh0KzEpKTw8NHxmKGUuY2hhckF0KHQrMikpPj4yKT4+OCYyNTUpLHMoMjU1Jm4pKSxvfSxlLmZyb21CeXRlQXJyYXk9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLG8saT1lLmxlbmd0aCUzLHU9XCJcIjtmdW5jdGlvbiBzKGUpe3JldHVyblwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLmNoYXJBdChlKX1mb3IodD0wLHI9ZS5sZW5ndGgtaTt0PHI7dCs9MyluPShlW3RdPDwxNikrKGVbdCsxXTw8OCkrZVt0KzJdLHUrPXMoKG89bik+PjE4JjYzKStzKG8+PjEyJjYzKStzKG8+PjYmNjMpK3MoNjMmbyk7c3dpdGNoKGkpe2Nhc2UgMTp1PSh1Kz1zKChuPWVbZS5sZW5ndGgtMV0pPj4yKSkrcyhuPDw0JjYzKStcIj09XCI7YnJlYWs7Y2FzZSAyOnU9KHU9KHUrPXMoKG49KGVbZS5sZW5ndGgtMl08PDgpK2VbZS5sZW5ndGgtMV0pPj4xMCkpK3Mobj4+NCY2MykpK3Mobjw8MiY2MykrXCI9XCJ9cmV0dXJuIHV9fSh2b2lkIDA9PT1mP3RoaXMuYmFzZTY0anM9e306Zil9LmNhbGwodGhpcyxlKFwibFlwb0kyXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sZShcImJ1ZmZlclwiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jhc2U2NC1qcy9saWIvYjY0LmpzXCIsXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYmFzZTY0LWpzL2xpYlwiKX0se2J1ZmZlcjozLGxZcG9JMjoxMX1dLDM6W2Z1bmN0aW9uKE8sZSxIKXshZnVuY3Rpb24oZSxuLGYscixoLHAsZyx5LHcpe3ZhciBhPU8oXCJiYXNlNjQtanNcIiksaT1PKFwiaWVlZTc1NFwiKTtmdW5jdGlvbiBmKGUsdCxuKXtpZighKHRoaXMgaW5zdGFuY2VvZiBmKSlyZXR1cm4gbmV3IGYoZSx0LG4pO3ZhciByLG8saSx1LHM9dHlwZW9mIGU7aWYoXCJiYXNlNjRcIj09PXQmJlwic3RyaW5nXCI9PXMpZm9yKGU9KHU9ZSkudHJpbT91LnRyaW0oKTp1LnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIik7ZS5sZW5ndGglNCE9MDspZSs9XCI9XCI7aWYoXCJudW1iZXJcIj09cylyPWooZSk7ZWxzZSBpZihcInN0cmluZ1wiPT1zKXI9Zi5ieXRlTGVuZ3RoKGUsdCk7ZWxzZXtpZihcIm9iamVjdFwiIT1zKXRocm93IG5ldyBFcnJvcihcIkZpcnN0IGFyZ3VtZW50IG5lZWRzIHRvIGJlIGEgbnVtYmVyLCBhcnJheSBvciBzdHJpbmcuXCIpO3I9aihlLmxlbmd0aCl9aWYoZi5fdXNlVHlwZWRBcnJheXM/bz1mLl9hdWdtZW50KG5ldyBVaW50OEFycmF5KHIpKTooKG89dGhpcykubGVuZ3RoPXIsby5faXNCdWZmZXI9ITApLGYuX3VzZVR5cGVkQXJyYXlzJiZcIm51bWJlclwiPT10eXBlb2YgZS5ieXRlTGVuZ3RoKW8uX3NldChlKTtlbHNlIGlmKEModT1lKXx8Zi5pc0J1ZmZlcih1KXx8dSYmXCJvYmplY3RcIj09dHlwZW9mIHUmJlwibnVtYmVyXCI9PXR5cGVvZiB1Lmxlbmd0aClmb3IoaT0wO2k8cjtpKyspZi5pc0J1ZmZlcihlKT9vW2ldPWUucmVhZFVJbnQ4KGkpOm9baV09ZVtpXTtlbHNlIGlmKFwic3RyaW5nXCI9PXMpby53cml0ZShlLDAsdCk7ZWxzZSBpZihcIm51bWJlclwiPT1zJiYhZi5fdXNlVHlwZWRBcnJheXMmJiFuKWZvcihpPTA7aTxyO2krKylvW2ldPTA7cmV0dXJuIG99ZnVuY3Rpb24gYihlLHQsbixyKXtyZXR1cm4gZi5fY2hhcnNXcml0dGVuPWMoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyl0LnB1c2goMjU1JmUuY2hhckNvZGVBdChuKSk7cmV0dXJuIHR9KHQpLGUsbixyKX1mdW5jdGlvbiBtKGUsdCxuLHIpe3JldHVybiBmLl9jaGFyc1dyaXR0ZW49YyhmdW5jdGlvbihlKXtmb3IodmFyIHQsbixyPVtdLG89MDtvPGUubGVuZ3RoO28rKyluPWUuY2hhckNvZGVBdChvKSx0PW4+Pjgsbj1uJTI1NixyLnB1c2gobiksci5wdXNoKHQpO3JldHVybiByfSh0KSxlLG4scil9ZnVuY3Rpb24gdihlLHQsbil7dmFyIHI9XCJcIjtuPU1hdGgubWluKGUubGVuZ3RoLG4pO2Zvcih2YXIgbz10O288bjtvKyspcis9U3RyaW5nLmZyb21DaGFyQ29kZShlW29dKTtyZXR1cm4gcn1mdW5jdGlvbiBvKGUsdCxuLHIpe3J8fChkKFwiYm9vbGVhblwiPT10eXBlb2YgbixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZChudWxsIT10LFwibWlzc2luZyBvZmZzZXRcIiksZCh0KzE8ZS5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSk7dmFyIG8scj1lLmxlbmd0aDtpZighKHI8PXQpKXJldHVybiBuPyhvPWVbdF0sdCsxPHImJihvfD1lW3QrMV08PDgpKToobz1lW3RdPDw4LHQrMTxyJiYob3w9ZVt0KzFdKSksb31mdW5jdGlvbiB1KGUsdCxuLHIpe3J8fChkKFwiYm9vbGVhblwiPT10eXBlb2YgbixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZChudWxsIT10LFwibWlzc2luZyBvZmZzZXRcIiksZCh0KzM8ZS5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSk7dmFyIG8scj1lLmxlbmd0aDtpZighKHI8PXQpKXJldHVybiBuPyh0KzI8ciYmKG89ZVt0KzJdPDwxNiksdCsxPHImJihvfD1lW3QrMV08PDgpLG98PWVbdF0sdCszPHImJihvKz1lW3QrM108PDI0Pj4+MCkpOih0KzE8ciYmKG89ZVt0KzFdPDwxNiksdCsyPHImJihvfD1lW3QrMl08PDgpLHQrMzxyJiYob3w9ZVt0KzNdKSxvKz1lW3RdPDwyND4+PjApLG99ZnVuY3Rpb24gXyhlLHQsbixyKXtpZihyfHwoZChcImJvb2xlYW5cIj09dHlwZW9mIG4sXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLGQobnVsbCE9dCxcIm1pc3Npbmcgb2Zmc2V0XCIpLGQodCsxPGUubGVuZ3RoLFwiVHJ5aW5nIHRvIHJlYWQgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIikpLCEoZS5sZW5ndGg8PXQpKXJldHVybiByPW8oZSx0LG4sITApLDMyNzY4JnI/LTEqKDY1NTM1LXIrMSk6cn1mdW5jdGlvbiBFKGUsdCxuLHIpe2lmKHJ8fChkKFwiYm9vbGVhblwiPT10eXBlb2YgbixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZChudWxsIT10LFwibWlzc2luZyBvZmZzZXRcIiksZCh0KzM8ZS5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSksIShlLmxlbmd0aDw9dCkpcmV0dXJuIHI9dShlLHQsbiwhMCksMjE0NzQ4MzY0OCZyPy0xKig0Mjk0OTY3Mjk1LXIrMSk6cn1mdW5jdGlvbiBJKGUsdCxuLHIpe3JldHVybiByfHwoZChcImJvb2xlYW5cIj09dHlwZW9mIG4sXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLGQodCszPGUubGVuZ3RoLFwiVHJ5aW5nIHRvIHJlYWQgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIikpLGkucmVhZChlLHQsbiwyMyw0KX1mdW5jdGlvbiBBKGUsdCxuLHIpe3JldHVybiByfHwoZChcImJvb2xlYW5cIj09dHlwZW9mIG4sXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLGQodCs3PGUubGVuZ3RoLFwiVHJ5aW5nIHRvIHJlYWQgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIikpLGkucmVhZChlLHQsbiw1Miw4KX1mdW5jdGlvbiBzKGUsdCxuLHIsbyl7b3x8KGQobnVsbCE9dCxcIm1pc3NpbmcgdmFsdWVcIiksZChcImJvb2xlYW5cIj09dHlwZW9mIHIsXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLGQobnVsbCE9bixcIm1pc3Npbmcgb2Zmc2V0XCIpLGQobisxPGUubGVuZ3RoLFwidHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpLFkodCw2NTUzNSkpO289ZS5sZW5ndGg7aWYoIShvPD1uKSlmb3IodmFyIGk9MCx1PU1hdGgubWluKG8tbiwyKTtpPHU7aSsrKWVbbitpXT0odCYyNTU8PDgqKHI/aToxLWkpKT4+PjgqKHI/aToxLWkpfWZ1bmN0aW9uIGwoZSx0LG4scixvKXtvfHwoZChudWxsIT10LFwibWlzc2luZyB2YWx1ZVwiKSxkKFwiYm9vbGVhblwiPT10eXBlb2YgcixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZChudWxsIT1uLFwibWlzc2luZyBvZmZzZXRcIiksZChuKzM8ZS5sZW5ndGgsXCJ0cnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIiksWSh0LDQyOTQ5NjcyOTUpKTtvPWUubGVuZ3RoO2lmKCEobzw9bikpZm9yKHZhciBpPTAsdT1NYXRoLm1pbihvLW4sNCk7aTx1O2krKyllW24raV09dD4+PjgqKHI/aTozLWkpJjI1NX1mdW5jdGlvbiBCKGUsdCxuLHIsbyl7b3x8KGQobnVsbCE9dCxcIm1pc3NpbmcgdmFsdWVcIiksZChcImJvb2xlYW5cIj09dHlwZW9mIHIsXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLGQobnVsbCE9bixcIm1pc3Npbmcgb2Zmc2V0XCIpLGQobisxPGUubGVuZ3RoLFwiVHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpLEYodCwzMjc2NywtMzI3NjgpKSxlLmxlbmd0aDw9bnx8cyhlLDA8PXQ/dDo2NTUzNSt0KzEsbixyLG8pfWZ1bmN0aW9uIEwoZSx0LG4scixvKXtvfHwoZChudWxsIT10LFwibWlzc2luZyB2YWx1ZVwiKSxkKFwiYm9vbGVhblwiPT10eXBlb2YgcixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZChudWxsIT1uLFwibWlzc2luZyBvZmZzZXRcIiksZChuKzM8ZS5sZW5ndGgsXCJUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIiksRih0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpKSxlLmxlbmd0aDw9bnx8bChlLDA8PXQ/dDo0Mjk0OTY3Mjk1K3QrMSxuLHIsbyl9ZnVuY3Rpb24gVShlLHQsbixyLG8pe298fChkKG51bGwhPXQsXCJtaXNzaW5nIHZhbHVlXCIpLGQoXCJib29sZWFuXCI9PXR5cGVvZiByLFwibWlzc2luZyBvciBpbnZhbGlkIGVuZGlhblwiKSxkKG51bGwhPW4sXCJtaXNzaW5nIG9mZnNldFwiKSxkKG4rMzxlLmxlbmd0aCxcIlRyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSxEKHQsMzQwMjgyMzQ2NjM4NTI4ODZlMjIsLTM0MDI4MjM0NjYzODUyODg2ZTIyKSksZS5sZW5ndGg8PW58fGkud3JpdGUoZSx0LG4sciwyMyw0KX1mdW5jdGlvbiB4KGUsdCxuLHIsbyl7b3x8KGQobnVsbCE9dCxcIm1pc3NpbmcgdmFsdWVcIiksZChcImJvb2xlYW5cIj09dHlwZW9mIHIsXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLGQobnVsbCE9bixcIm1pc3Npbmcgb2Zmc2V0XCIpLGQobis3PGUubGVuZ3RoLFwiVHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpLEQodCwxNzk3NjkzMTM0ODYyMzE1N2UyOTIsLTE3OTc2OTMxMzQ4NjIzMTU3ZTI5MikpLGUubGVuZ3RoPD1ufHxpLndyaXRlKGUsdCxuLHIsNTIsOCl9SC5CdWZmZXI9ZixILlNsb3dCdWZmZXI9ZixILklOU1BFQ1RfTUFYX0JZVEVTPTUwLGYucG9vbFNpemU9ODE5MixmLl91c2VUeXBlZEFycmF5cz1mdW5jdGlvbigpe3RyeXt2YXIgZT1uZXcgQXJyYXlCdWZmZXIoMCksdD1uZXcgVWludDhBcnJheShlKTtyZXR1cm4gdC5mb289ZnVuY3Rpb24oKXtyZXR1cm4gNDJ9LDQyPT09dC5mb28oKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5zdWJhcnJheX1jYXRjaChlKXtyZXR1cm4hMX19KCksZi5pc0VuY29kaW5nPWZ1bmN0aW9uKGUpe3N3aXRjaChTdHJpbmcoZSkudG9Mb3dlckNhc2UoKSl7Y2FzZVwiaGV4XCI6Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6Y2FzZVwiYXNjaWlcIjpjYXNlXCJiaW5hcnlcIjpjYXNlXCJiYXNlNjRcIjpjYXNlXCJyYXdcIjpjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0sZi5pc0J1ZmZlcj1mdW5jdGlvbihlKXtyZXR1cm4hKG51bGw9PWV8fCFlLl9pc0J1ZmZlcil9LGYuYnl0ZUxlbmd0aD1mdW5jdGlvbihlLHQpe3ZhciBuO3N3aXRjaChlKz1cIlwiLHR8fFwidXRmOFwiKXtjYXNlXCJoZXhcIjpuPWUubGVuZ3RoLzI7YnJlYWs7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6bj1UKGUpLmxlbmd0aDticmVhaztjYXNlXCJhc2NpaVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcInJhd1wiOm49ZS5sZW5ndGg7YnJlYWs7Y2FzZVwiYmFzZTY0XCI6bj1NKGUpLmxlbmd0aDticmVhaztjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpuPTIqZS5sZW5ndGg7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGVuY29kaW5nXCIpfXJldHVybiBufSxmLmNvbmNhdD1mdW5jdGlvbihlLHQpe2lmKGQoQyhlKSxcIlVzYWdlOiBCdWZmZXIuY29uY2F0KGxpc3QsIFt0b3RhbExlbmd0aF0pXFxubGlzdCBzaG91bGQgYmUgYW4gQXJyYXkuXCIpLDA9PT1lLmxlbmd0aClyZXR1cm4gbmV3IGYoMCk7aWYoMT09PWUubGVuZ3RoKXJldHVybiBlWzBdO2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KWZvcihvPXQ9MDtvPGUubGVuZ3RoO28rKyl0Kz1lW29dLmxlbmd0aDtmb3IodmFyIG49bmV3IGYodCkscj0wLG89MDtvPGUubGVuZ3RoO28rKyl7dmFyIGk9ZVtvXTtpLmNvcHkobixyKSxyKz1pLmxlbmd0aH1yZXR1cm4gbn0sZi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0LG4scil7aXNGaW5pdGUodCk/aXNGaW5pdGUobil8fChyPW4sbj12b2lkIDApOihhPXIscj10LHQ9bixuPWEpLHQ9TnVtYmVyKHQpfHwwO3ZhciBvLGksdSxzLGE9dGhpcy5sZW5ndGgtdDtzd2l0Y2goKCFufHxhPChuPU51bWJlcihuKSkpJiYobj1hKSxyPVN0cmluZyhyfHxcInV0ZjhcIikudG9Mb3dlckNhc2UoKSl7Y2FzZVwiaGV4XCI6bz1mdW5jdGlvbihlLHQsbixyKXtuPU51bWJlcihuKXx8MDt2YXIgbz1lLmxlbmd0aC1uOyghcnx8bzwocj1OdW1iZXIocikpKSYmKHI9byksZCgobz10Lmxlbmd0aCklMj09MCxcIkludmFsaWQgaGV4IHN0cmluZ1wiKSxvLzI8ciYmKHI9by8yKTtmb3IodmFyIGk9MDtpPHI7aSsrKXt2YXIgdT1wYXJzZUludCh0LnN1YnN0cigyKmksMiksMTYpO2QoIWlzTmFOKHUpLFwiSW52YWxpZCBoZXggc3RyaW5nXCIpLGVbbitpXT11fXJldHVybiBmLl9jaGFyc1dyaXR0ZW49MippLGl9KHRoaXMsZSx0LG4pO2JyZWFrO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmk9dGhpcyx1PXQscz1uLG89Zi5fY2hhcnNXcml0dGVuPWMoVChlKSxpLHUscyk7YnJlYWs7Y2FzZVwiYXNjaWlcIjpjYXNlXCJiaW5hcnlcIjpvPWIodGhpcyxlLHQsbik7YnJlYWs7Y2FzZVwiYmFzZTY0XCI6aT10aGlzLHU9dCxzPW4sbz1mLl9jaGFyc1dyaXR0ZW49YyhNKGUpLGksdSxzKTticmVhaztjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpvPW0odGhpcyxlLHQsbik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGVuY29kaW5nXCIpfXJldHVybiBvfSxmLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihlLHQsbil7dmFyIHIsbyxpLHUscz10aGlzO2lmKGU9U3RyaW5nKGV8fFwidXRmOFwiKS50b0xvd2VyQ2FzZSgpLHQ9TnVtYmVyKHQpfHwwLChuPXZvaWQgMCE9PW4/TnVtYmVyKG4pOnMubGVuZ3RoKT09PXQpcmV0dXJuXCJcIjtzd2l0Y2goZSl7Y2FzZVwiaGV4XCI6cj1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5sZW5ndGg7KCF0fHx0PDApJiYodD0wKTsoIW58fG48MHx8cjxuKSYmKG49cik7Zm9yKHZhciBvPVwiXCIsaT10O2k8bjtpKyspbys9ayhlW2ldKTtyZXR1cm4gb30ocyx0LG4pO2JyZWFrO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnI9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVwiXCIsbz1cIlwiO249TWF0aC5taW4oZS5sZW5ndGgsbik7Zm9yKHZhciBpPXQ7aTxuO2krKyllW2ldPD0xMjc/KHIrPU4obykrU3RyaW5nLmZyb21DaGFyQ29kZShlW2ldKSxvPVwiXCIpOm8rPVwiJVwiK2VbaV0udG9TdHJpbmcoMTYpO3JldHVybiByK04obyl9KHMsdCxuKTticmVhaztjYXNlXCJhc2NpaVwiOmNhc2VcImJpbmFyeVwiOnI9dihzLHQsbik7YnJlYWs7Y2FzZVwiYmFzZTY0XCI6bz1zLHU9bixyPTA9PT0oaT10KSYmdT09PW8ubGVuZ3RoP2EuZnJvbUJ5dGVBcnJheShvKTphLmZyb21CeXRlQXJyYXkoby5zbGljZShpLHUpKTticmVhaztjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9ZS5zbGljZSh0LG4pLG89XCJcIixpPTA7aTxyLmxlbmd0aDtpKz0yKW8rPVN0cmluZy5mcm9tQ2hhckNvZGUocltpXSsyNTYqcltpKzFdKTtyZXR1cm4gb30ocyx0LG4pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBlbmNvZGluZ1wiKX1yZXR1cm4gcn0sZi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJCdWZmZXJcIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19LGYucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSx0LG4scil7aWYodD10fHwwLChyPXJ8fDA9PT1yP3I6dGhpcy5sZW5ndGgpIT09KG49bnx8MCkmJjAhPT1lLmxlbmd0aCYmMCE9PXRoaXMubGVuZ3RoKXtkKG48PXIsXCJzb3VyY2VFbmQgPCBzb3VyY2VTdGFydFwiKSxkKDA8PXQmJnQ8ZS5sZW5ndGgsXCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzXCIpLGQoMDw9biYmbjx0aGlzLmxlbmd0aCxcInNvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHNcIiksZCgwPD1yJiZyPD10aGlzLmxlbmd0aCxcInNvdXJjZUVuZCBvdXQgb2YgYm91bmRzXCIpLHI+dGhpcy5sZW5ndGgmJihyPXRoaXMubGVuZ3RoKTt2YXIgbz0ocj1lLmxlbmd0aC10PHItbj9lLmxlbmd0aC10K246ciktbjtpZihvPDEwMHx8IWYuX3VzZVR5cGVkQXJyYXlzKWZvcih2YXIgaT0wO2k8bztpKyspZVtpK3RdPXRoaXNbaStuXTtlbHNlIGUuX3NldCh0aGlzLnN1YmFycmF5KG4sbitvKSx0KX19LGYucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5sZW5ndGg7aWYoZT1TKGUsbiwwKSx0PVModCxuLG4pLGYuX3VzZVR5cGVkQXJyYXlzKXJldHVybiBmLl9hdWdtZW50KHRoaXMuc3ViYXJyYXkoZSx0KSk7Zm9yKHZhciByPXQtZSxvPW5ldyBmKHIsdm9pZCAwLCEwKSxpPTA7aTxyO2krKylvW2ldPXRoaXNbaStlXTtyZXR1cm4gb30sZi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBjb25zb2xlLmxvZyhcIi5nZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLlwiKSx0aGlzLnJlYWRVSW50OChlKX0sZi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGNvbnNvbGUubG9nKFwiLnNldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuXCIpLHRoaXMud3JpdGVVSW50OChlLHQpfSxmLnByb3RvdHlwZS5yZWFkVUludDg9ZnVuY3Rpb24oZSx0KXtpZih0fHwoZChudWxsIT1lLFwibWlzc2luZyBvZmZzZXRcIiksZChlPHRoaXMubGVuZ3RoLFwiVHJ5aW5nIHRvIHJlYWQgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIikpLCEoZT49dGhpcy5sZW5ndGgpKXJldHVybiB0aGlzW2VdfSxmLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbyh0aGlzLGUsITAsdCl9LGYucHJvdG90eXBlLnJlYWRVSW50MTZCRT1mdW5jdGlvbihlLHQpe3JldHVybiBvKHRoaXMsZSwhMSx0KX0sZi5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUodGhpcyxlLCEwLHQpfSxmLnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdSh0aGlzLGUsITEsdCl9LGYucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKGUsdCl7aWYodHx8KGQobnVsbCE9ZSxcIm1pc3Npbmcgb2Zmc2V0XCIpLGQoZTx0aGlzLmxlbmd0aCxcIlRyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpKSwhKGU+PXRoaXMubGVuZ3RoKSlyZXR1cm4gMTI4JnRoaXNbZV0/LTEqKDI1NS10aGlzW2VdKzEpOnRoaXNbZV19LGYucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIF8odGhpcyxlLCEwLHQpfSxmLnByb3RvdHlwZS5yZWFkSW50MTZCRT1mdW5jdGlvbihlLHQpe3JldHVybiBfKHRoaXMsZSwhMSx0KX0sZi5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRSh0aGlzLGUsITAsdCl9LGYucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEUodGhpcyxlLCExLHQpfSxmLnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbihlLHQpe3JldHVybiBJKHRoaXMsZSwhMCx0KX0sZi5wcm90b3R5cGUucmVhZEZsb2F0QkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gSSh0aGlzLGUsITEsdCl9LGYucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihlLHQpe3JldHVybiBBKHRoaXMsZSwhMCx0KX0sZi5wcm90b3R5cGUucmVhZERvdWJsZUJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEEodGhpcyxlLCExLHQpfSxmLnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uKGUsdCxuKXtufHwoZChudWxsIT1lLFwibWlzc2luZyB2YWx1ZVwiKSxkKG51bGwhPXQsXCJtaXNzaW5nIG9mZnNldFwiKSxkKHQ8dGhpcy5sZW5ndGgsXCJ0cnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIiksWShlLDI1NSkpLHQ+PXRoaXMubGVuZ3RofHwodGhpc1t0XT1lKX0sZi5wcm90b3R5cGUud3JpdGVVSW50MTZMRT1mdW5jdGlvbihlLHQsbil7cyh0aGlzLGUsdCwhMCxuKX0sZi5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbihlLHQsbil7cyh0aGlzLGUsdCwhMSxuKX0sZi5wcm90b3R5cGUud3JpdGVVSW50MzJMRT1mdW5jdGlvbihlLHQsbil7bCh0aGlzLGUsdCwhMCxuKX0sZi5wcm90b3R5cGUud3JpdGVVSW50MzJCRT1mdW5jdGlvbihlLHQsbil7bCh0aGlzLGUsdCwhMSxuKX0sZi5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uKGUsdCxuKXtufHwoZChudWxsIT1lLFwibWlzc2luZyB2YWx1ZVwiKSxkKG51bGwhPXQsXCJtaXNzaW5nIG9mZnNldFwiKSxkKHQ8dGhpcy5sZW5ndGgsXCJUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIiksRihlLDEyNywtMTI4KSksdD49dGhpcy5sZW5ndGh8fCgwPD1lP3RoaXMud3JpdGVVSW50OChlLHQsbik6dGhpcy53cml0ZVVJbnQ4KDI1NStlKzEsdCxuKSl9LGYucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbihlLHQsbil7Qih0aGlzLGUsdCwhMCxuKX0sZi5wcm90b3R5cGUud3JpdGVJbnQxNkJFPWZ1bmN0aW9uKGUsdCxuKXtCKHRoaXMsZSx0LCExLG4pfSxmLnByb3RvdHlwZS53cml0ZUludDMyTEU9ZnVuY3Rpb24oZSx0LG4pe0wodGhpcyxlLHQsITAsbil9LGYucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbihlLHQsbil7TCh0aGlzLGUsdCwhMSxuKX0sZi5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uKGUsdCxuKXtVKHRoaXMsZSx0LCEwLG4pfSxmLnByb3RvdHlwZS53cml0ZUZsb2F0QkU9ZnVuY3Rpb24oZSx0LG4pe1UodGhpcyxlLHQsITEsbil9LGYucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24oZSx0LG4pe3godGhpcyxlLHQsITAsbil9LGYucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24oZSx0LG4pe3godGhpcyxlLHQsITEsbil9LGYucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24oZSx0LG4pe2lmKHQ9dHx8MCxuPW58fHRoaXMubGVuZ3RoLGQoXCJudW1iZXJcIj09dHlwZW9mKGU9XCJzdHJpbmdcIj09dHlwZW9mKGU9ZXx8MCk/ZS5jaGFyQ29kZUF0KDApOmUpJiYhaXNOYU4oZSksXCJ2YWx1ZSBpcyBub3QgYSBudW1iZXJcIiksZCh0PD1uLFwiZW5kIDwgc3RhcnRcIiksbiE9PXQmJjAhPT10aGlzLmxlbmd0aCl7ZCgwPD10JiZ0PHRoaXMubGVuZ3RoLFwic3RhcnQgb3V0IG9mIGJvdW5kc1wiKSxkKDA8PW4mJm48PXRoaXMubGVuZ3RoLFwiZW5kIG91dCBvZiBib3VuZHNcIik7Zm9yKHZhciByPXQ7cjxuO3IrKyl0aGlzW3JdPWV9fSxmLnByb3RvdHlwZS5pbnNwZWN0PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9dGhpcy5sZW5ndGgsbj0wO248dDtuKyspaWYoZVtuXT1rKHRoaXNbbl0pLG49PT1ILklOU1BFQ1RfTUFYX0JZVEVTKXtlW24rMV09XCIuLi5cIjticmVha31yZXR1cm5cIjxCdWZmZXIgXCIrZS5qb2luKFwiIFwiKStcIj5cIn0sZi5wcm90b3R5cGUudG9BcnJheUJ1ZmZlcj1mdW5jdGlvbigpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBVaW50OEFycmF5KXRocm93IG5ldyBFcnJvcihcIkJ1ZmZlci50b0FycmF5QnVmZmVyIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO2lmKGYuX3VzZVR5cGVkQXJyYXlzKXJldHVybiBuZXcgZih0aGlzKS5idWZmZXI7Zm9yKHZhciBlPW5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKSx0PTAsbj1lLmxlbmd0aDt0PG47dCs9MSllW3RdPXRoaXNbdF07cmV0dXJuIGUuYnVmZmVyfTt2YXIgdD1mLnByb3RvdHlwZTtmdW5jdGlvbiBTKGUsdCxuKXtyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgZT9uOnQ8PShlPX5+ZSk/dDowPD1lfHwwPD0oZSs9dCk/ZTowfWZ1bmN0aW9uIGooZSl7cmV0dXJuKGU9fn5NYXRoLmNlaWwoK2UpKTwwPzA6ZX1mdW5jdGlvbiBDKGUpe3JldHVybihBcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9KShlKX1mdW5jdGlvbiBrKGUpe3JldHVybiBlPDE2P1wiMFwiK2UudG9TdHJpbmcoMTYpOmUudG9TdHJpbmcoMTYpfWZ1bmN0aW9uIFQoZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZS5jaGFyQ29kZUF0KG4pO2lmKHI8PTEyNyl0LnB1c2goZS5jaGFyQ29kZUF0KG4pKTtlbHNlIGZvcih2YXIgbz1uLGk9KDU1Mjk2PD1yJiZyPD01NzM0MyYmbisrLGVuY29kZVVSSUNvbXBvbmVudChlLnNsaWNlKG8sbisxKSkuc3Vic3RyKDEpLnNwbGl0KFwiJVwiKSksdT0wO3U8aS5sZW5ndGg7dSsrKXQucHVzaChwYXJzZUludChpW3VdLDE2KSl9cmV0dXJuIHR9ZnVuY3Rpb24gTShlKXtyZXR1cm4gYS50b0J5dGVBcnJheShlKX1mdW5jdGlvbiBjKGUsdCxuLHIpe2Zvcih2YXIgbz0wO288ciYmIShvK24+PXQubGVuZ3RofHxvPj1lLmxlbmd0aCk7bysrKXRbbytuXT1lW29dO3JldHVybiBvfWZ1bmN0aW9uIE4oZSl7dHJ5e3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZSl9Y2F0Y2goZSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoNjU1MzMpfX1mdW5jdGlvbiBZKGUsdCl7ZChcIm51bWJlclwiPT10eXBlb2YgZSxcImNhbm5vdCB3cml0ZSBhIG5vbi1udW1iZXIgYXMgYSBudW1iZXJcIiksZCgwPD1lLFwic3BlY2lmaWVkIGEgbmVnYXRpdmUgdmFsdWUgZm9yIHdyaXRpbmcgYW4gdW5zaWduZWQgdmFsdWVcIiksZChlPD10LFwidmFsdWUgaXMgbGFyZ2VyIHRoYW4gbWF4aW11bSB2YWx1ZSBmb3IgdHlwZVwiKSxkKE1hdGguZmxvb3IoZSk9PT1lLFwidmFsdWUgaGFzIGEgZnJhY3Rpb25hbCBjb21wb25lbnRcIil9ZnVuY3Rpb24gRihlLHQsbil7ZChcIm51bWJlclwiPT10eXBlb2YgZSxcImNhbm5vdCB3cml0ZSBhIG5vbi1udW1iZXIgYXMgYSBudW1iZXJcIiksZChlPD10LFwidmFsdWUgbGFyZ2VyIHRoYW4gbWF4aW11bSBhbGxvd2VkIHZhbHVlXCIpLGQobjw9ZSxcInZhbHVlIHNtYWxsZXIgdGhhbiBtaW5pbXVtIGFsbG93ZWQgdmFsdWVcIiksZChNYXRoLmZsb29yKGUpPT09ZSxcInZhbHVlIGhhcyBhIGZyYWN0aW9uYWwgY29tcG9uZW50XCIpfWZ1bmN0aW9uIEQoZSx0LG4pe2QoXCJudW1iZXJcIj09dHlwZW9mIGUsXCJjYW5ub3Qgd3JpdGUgYSBub24tbnVtYmVyIGFzIGEgbnVtYmVyXCIpLGQoZTw9dCxcInZhbHVlIGxhcmdlciB0aGFuIG1heGltdW0gYWxsb3dlZCB2YWx1ZVwiKSxkKG48PWUsXCJ2YWx1ZSBzbWFsbGVyIHRoYW4gbWluaW11bSBhbGxvd2VkIHZhbHVlXCIpfWZ1bmN0aW9uIGQoZSx0KXtpZighZSl0aHJvdyBuZXcgRXJyb3IodHx8XCJGYWlsZWQgYXNzZXJ0aW9uXCIpfWYuX2F1Z21lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX2lzQnVmZmVyPSEwLGUuX2dldD1lLmdldCxlLl9zZXQ9ZS5zZXQsZS5nZXQ9dC5nZXQsZS5zZXQ9dC5zZXQsZS53cml0ZT10LndyaXRlLGUudG9TdHJpbmc9dC50b1N0cmluZyxlLnRvTG9jYWxlU3RyaW5nPXQudG9TdHJpbmcsZS50b0pTT049dC50b0pTT04sZS5jb3B5PXQuY29weSxlLnNsaWNlPXQuc2xpY2UsZS5yZWFkVUludDg9dC5yZWFkVUludDgsZS5yZWFkVUludDE2TEU9dC5yZWFkVUludDE2TEUsZS5yZWFkVUludDE2QkU9dC5yZWFkVUludDE2QkUsZS5yZWFkVUludDMyTEU9dC5yZWFkVUludDMyTEUsZS5yZWFkVUludDMyQkU9dC5yZWFkVUludDMyQkUsZS5yZWFkSW50OD10LnJlYWRJbnQ4LGUucmVhZEludDE2TEU9dC5yZWFkSW50MTZMRSxlLnJlYWRJbnQxNkJFPXQucmVhZEludDE2QkUsZS5yZWFkSW50MzJMRT10LnJlYWRJbnQzMkxFLGUucmVhZEludDMyQkU9dC5yZWFkSW50MzJCRSxlLnJlYWRGbG9hdExFPXQucmVhZEZsb2F0TEUsZS5yZWFkRmxvYXRCRT10LnJlYWRGbG9hdEJFLGUucmVhZERvdWJsZUxFPXQucmVhZERvdWJsZUxFLGUucmVhZERvdWJsZUJFPXQucmVhZERvdWJsZUJFLGUud3JpdGVVSW50OD10LndyaXRlVUludDgsZS53cml0ZVVJbnQxNkxFPXQud3JpdGVVSW50MTZMRSxlLndyaXRlVUludDE2QkU9dC53cml0ZVVJbnQxNkJFLGUud3JpdGVVSW50MzJMRT10LndyaXRlVUludDMyTEUsZS53cml0ZVVJbnQzMkJFPXQud3JpdGVVSW50MzJCRSxlLndyaXRlSW50OD10LndyaXRlSW50OCxlLndyaXRlSW50MTZMRT10LndyaXRlSW50MTZMRSxlLndyaXRlSW50MTZCRT10LndyaXRlSW50MTZCRSxlLndyaXRlSW50MzJMRT10LndyaXRlSW50MzJMRSxlLndyaXRlSW50MzJCRT10LndyaXRlSW50MzJCRSxlLndyaXRlRmxvYXRMRT10LndyaXRlRmxvYXRMRSxlLndyaXRlRmxvYXRCRT10LndyaXRlRmxvYXRCRSxlLndyaXRlRG91YmxlTEU9dC53cml0ZURvdWJsZUxFLGUud3JpdGVEb3VibGVCRT10LndyaXRlRG91YmxlQkUsZS5maWxsPXQuZmlsbCxlLmluc3BlY3Q9dC5pbnNwZWN0LGUudG9BcnJheUJ1ZmZlcj10LnRvQXJyYXlCdWZmZXIsZX19LmNhbGwodGhpcyxPKFwibFlwb0kyXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sTyhcImJ1ZmZlclwiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2J1ZmZlci9pbmRleC5qc1wiLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2J1ZmZlclwiKX0se1wiYmFzZTY0LWpzXCI6MixidWZmZXI6MyxpZWVlNzU0OjEwLGxZcG9JMjoxMX1dLDQ6W2Z1bmN0aW9uKGMsZCxlKXshZnVuY3Rpb24oZSx0LGEsbixyLG8saSx1LHMpe3ZhciBhPWMoXCJidWZmZXJcIikuQnVmZmVyLGY9NCxsPW5ldyBhKGYpO2wuZmlsbCgwKTtkLmV4cG9ydHM9e2hhc2g6ZnVuY3Rpb24oZSx0LG4scil7Zm9yKHZhciBvPXQoZnVuY3Rpb24oZSx0KXtlLmxlbmd0aCVmIT0wJiYobj1lLmxlbmd0aCsoZi1lLmxlbmd0aCVmKSxlPWEuY29uY2F0KFtlLGxdLG4pKTtmb3IodmFyIG4scj1bXSxvPXQ/ZS5yZWFkSW50MzJCRTplLnJlYWRJbnQzMkxFLGk9MDtpPGUubGVuZ3RoO2krPWYpci5wdXNoKG8uY2FsbChlLGkpKTtyZXR1cm4gcn0oZT1hLmlzQnVmZmVyKGUpP2U6bmV3IGEoZSksciksOCplLmxlbmd0aCksdD1yLGk9bmV3IGEobiksdT10P2kud3JpdGVJbnQzMkJFOmkud3JpdGVJbnQzMkxFLHM9MDtzPG8ubGVuZ3RoO3MrKyl1LmNhbGwoaSxvW3NdLDQqcywhMCk7cmV0dXJuIGl9fX0uY2FsbCh0aGlzLGMoXCJsWXBvSTJcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxjKFwiYnVmZmVyXCIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvY3J5cHRvLWJyb3dzZXJpZnkvaGVscGVycy5qc1wiLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2NyeXB0by1icm93c2VyaWZ5XCIpfSx7YnVmZmVyOjMsbFlwb0kyOjExfV0sNTpbZnVuY3Rpb24odixlLF8peyFmdW5jdGlvbihsLGMsdSxkLGgscCxnLHksdyl7dmFyIHU9dihcImJ1ZmZlclwiKS5CdWZmZXIsZT12KFwiLi9zaGFcIiksdD12KFwiLi9zaGEyNTZcIiksbj12KFwiLi9ybmdcIiksYj17c2hhMTplLHNoYTI1Njp0LG1kNTp2KFwiLi9tZDVcIil9LHM9NjQsYT1uZXcgdShzKTtmdW5jdGlvbiByKGUsbil7dmFyIHI9YltlPWV8fFwic2hhMVwiXSxvPVtdO3JldHVybiByfHxpKFwiYWxnb3JpdGhtOlwiLGUsXCJpcyBub3QgeWV0IHN1cHBvcnRlZFwiKSx7dXBkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB1LmlzQnVmZmVyKGUpfHwoZT1uZXcgdShlKSksby5wdXNoKGUpLGUubGVuZ3RoLHRoaXN9LGRpZ2VzdDpmdW5jdGlvbihlKXt2YXIgdD11LmNvbmNhdChvKSx0PW4/ZnVuY3Rpb24oZSx0LG4pe3UuaXNCdWZmZXIodCl8fCh0PW5ldyB1KHQpKSx1LmlzQnVmZmVyKG4pfHwobj1uZXcgdShuKSksdC5sZW5ndGg+cz90PWUodCk6dC5sZW5ndGg8cyYmKHQ9dS5jb25jYXQoW3QsYV0scykpO2Zvcih2YXIgcj1uZXcgdShzKSxvPW5ldyB1KHMpLGk9MDtpPHM7aSsrKXJbaV09NTRedFtpXSxvW2ldPTkyXnRbaV07cmV0dXJuIG49ZSh1LmNvbmNhdChbcixuXSkpLGUodS5jb25jYXQoW28sbl0pKX0ocixuLHQpOnIodCk7cmV0dXJuIG89bnVsbCxlP3QudG9TdHJpbmcoZSk6dH19fWZ1bmN0aW9uIGkoKXt2YXIgZT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbihcIiBcIik7dGhyb3cgbmV3IEVycm9yKFtlLFwid2UgYWNjZXB0IHB1bGwgcmVxdWVzdHNcIixcImh0dHA6Ly9naXRodWIuY29tL2RvbWluaWN0YXJyL2NyeXB0by1icm93c2VyaWZ5XCJdLmpvaW4oXCJcXG5cIikpfWEuZmlsbCgwKSxfLmNyZWF0ZUhhc2g9ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSl9LF8uY3JlYXRlSG1hYz1yLF8ucmFuZG9tQnl0ZXM9ZnVuY3Rpb24oZSx0KXtpZighdHx8IXQuY2FsbClyZXR1cm4gbmV3IHUobihlKSk7dHJ5e3QuY2FsbCh0aGlzLHZvaWQgMCxuZXcgdShuKGUpKSl9Y2F0Y2goZSl7dChlKX19O3ZhciBvLGY9W1wiY3JlYXRlQ3JlZGVudGlhbHNcIixcImNyZWF0ZUNpcGhlclwiLFwiY3JlYXRlQ2lwaGVyaXZcIixcImNyZWF0ZURlY2lwaGVyXCIsXCJjcmVhdGVEZWNpcGhlcml2XCIsXCJjcmVhdGVTaWduXCIsXCJjcmVhdGVWZXJpZnlcIixcImNyZWF0ZURpZmZpZUhlbGxtYW5cIixcInBia2RmMlwiXSxtPWZ1bmN0aW9uKGUpe19bZV09ZnVuY3Rpb24oKXtpKFwic29ycnksXCIsZSxcImlzIG5vdCBpbXBsZW1lbnRlZCB5ZXRcIil9fTtmb3IobyBpbiBmKW0oZltvXSxvKX0uY2FsbCh0aGlzLHYoXCJsWXBvSTJcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSx2KFwiYnVmZmVyXCIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvY3J5cHRvLWJyb3dzZXJpZnkvaW5kZXguanNcIixcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9jcnlwdG8tYnJvd3NlcmlmeVwiKX0se1wiLi9tZDVcIjo2LFwiLi9ybmdcIjo3LFwiLi9zaGFcIjo4LFwiLi9zaGEyNTZcIjo5LGJ1ZmZlcjozLGxZcG9JMjoxMX1dLDY6W2Z1bmN0aW9uKHcsYixlKXshZnVuY3Rpb24oZSxyLG8saSx1LGEsZixsLHkpe3ZhciB0PXcoXCIuL2hlbHBlcnNcIik7ZnVuY3Rpb24gbihlLHQpe2VbdD4+NV18PTEyODw8dCUzMixlWzE0Kyh0KzY0Pj4+OTw8NCldPXQ7Zm9yKHZhciBuPTE3MzI1ODQxOTMscj0tMjcxNzMzODc5LG89LTE3MzI1ODQxOTQsaT0yNzE3MzM4NzgsdT0wO3U8ZS5sZW5ndGg7dSs9MTYpe3ZhciBzPW4sYT1yLGY9byxsPWksbj1jKG4scixvLGksZVt1KzBdLDcsLTY4MDg3NjkzNiksaT1jKGksbixyLG8sZVt1KzFdLDEyLC0zODk1NjQ1ODYpLG89YyhvLGksbixyLGVbdSsyXSwxNyw2MDYxMDU4MTkpLHI9YyhyLG8saSxuLGVbdSszXSwyMiwtMTA0NDUyNTMzMCk7bj1jKG4scixvLGksZVt1KzRdLDcsLTE3NjQxODg5NyksaT1jKGksbixyLG8sZVt1KzVdLDEyLDEyMDAwODA0MjYpLG89YyhvLGksbixyLGVbdSs2XSwxNywtMTQ3MzIzMTM0MSkscj1jKHIsbyxpLG4sZVt1KzddLDIyLC00NTcwNTk4Myksbj1jKG4scixvLGksZVt1KzhdLDcsMTc3MDAzNTQxNiksaT1jKGksbixyLG8sZVt1KzldLDEyLC0xOTU4NDE0NDE3KSxvPWMobyxpLG4scixlW3UrMTBdLDE3LC00MjA2Mykscj1jKHIsbyxpLG4sZVt1KzExXSwyMiwtMTk5MDQwNDE2Miksbj1jKG4scixvLGksZVt1KzEyXSw3LDE4MDQ2MDM2ODIpLGk9YyhpLG4scixvLGVbdSsxM10sMTIsLTQwMzQxMTAxKSxvPWMobyxpLG4scixlW3UrMTRdLDE3LC0xNTAyMDAyMjkwKSxuPWQobixyPWMocixvLGksbixlW3UrMTVdLDIyLDEyMzY1MzUzMjkpLG8saSxlW3UrMV0sNSwtMTY1Nzk2NTEwKSxpPWQoaSxuLHIsbyxlW3UrNl0sOSwtMTA2OTUwMTYzMiksbz1kKG8saSxuLHIsZVt1KzExXSwxNCw2NDM3MTc3MTMpLHI9ZChyLG8saSxuLGVbdSswXSwyMCwtMzczODk3MzAyKSxuPWQobixyLG8saSxlW3UrNV0sNSwtNzAxNTU4NjkxKSxpPWQoaSxuLHIsbyxlW3UrMTBdLDksMzgwMTYwODMpLG89ZChvLGksbixyLGVbdSsxNV0sMTQsLTY2MDQ3ODMzNSkscj1kKHIsbyxpLG4sZVt1KzRdLDIwLC00MDU1Mzc4NDgpLG49ZChuLHIsbyxpLGVbdSs5XSw1LDU2ODQ0NjQzOCksaT1kKGksbixyLG8sZVt1KzE0XSw5LC0xMDE5ODAzNjkwKSxvPWQobyxpLG4scixlW3UrM10sMTQsLTE4NzM2Mzk2MSkscj1kKHIsbyxpLG4sZVt1KzhdLDIwLDExNjM1MzE1MDEpLG49ZChuLHIsbyxpLGVbdSsxM10sNSwtMTQ0NDY4MTQ2NyksaT1kKGksbixyLG8sZVt1KzJdLDksLTUxNDAzNzg0KSxvPWQobyxpLG4scixlW3UrN10sMTQsMTczNTMyODQ3Myksbj1oKG4scj1kKHIsbyxpLG4sZVt1KzEyXSwyMCwtMTkyNjYwNzczNCksbyxpLGVbdSs1XSw0LC0zNzg1NTgpLGk9aChpLG4scixvLGVbdSs4XSwxMSwtMjAyMjU3NDQ2Myksbz1oKG8saSxuLHIsZVt1KzExXSwxNiwxODM5MDMwNTYyKSxyPWgocixvLGksbixlW3UrMTRdLDIzLC0zNTMwOTU1Niksbj1oKG4scixvLGksZVt1KzFdLDQsLTE1MzA5OTIwNjApLGk9aChpLG4scixvLGVbdSs0XSwxMSwxMjcyODkzMzUzKSxvPWgobyxpLG4scixlW3UrN10sMTYsLTE1NTQ5NzYzMikscj1oKHIsbyxpLG4sZVt1KzEwXSwyMywtMTA5NDczMDY0MCksbj1oKG4scixvLGksZVt1KzEzXSw0LDY4MTI3OTE3NCksaT1oKGksbixyLG8sZVt1KzBdLDExLC0zNTg1MzcyMjIpLG89aChvLGksbixyLGVbdSszXSwxNiwtNzIyNTIxOTc5KSxyPWgocixvLGksbixlW3UrNl0sMjMsNzYwMjkxODkpLG49aChuLHIsbyxpLGVbdSs5XSw0LC02NDAzNjQ0ODcpLGk9aChpLG4scixvLGVbdSsxMl0sMTEsLTQyMTgxNTgzNSksbz1oKG8saSxuLHIsZVt1KzE1XSwxNiw1MzA3NDI1MjApLG49cChuLHI9aChyLG8saSxuLGVbdSsyXSwyMywtOTk1MzM4NjUxKSxvLGksZVt1KzBdLDYsLTE5ODYzMDg0NCksaT1wKGksbixyLG8sZVt1KzddLDEwLDExMjY4OTE0MTUpLG89cChvLGksbixyLGVbdSsxNF0sMTUsLTE0MTYzNTQ5MDUpLHI9cChyLG8saSxuLGVbdSs1XSwyMSwtNTc0MzQwNTUpLG49cChuLHIsbyxpLGVbdSsxMl0sNiwxNzAwNDg1NTcxKSxpPXAoaSxuLHIsbyxlW3UrM10sMTAsLTE4OTQ5ODY2MDYpLG89cChvLGksbixyLGVbdSsxMF0sMTUsLTEwNTE1MjMpLHI9cChyLG8saSxuLGVbdSsxXSwyMSwtMjA1NDkyMjc5OSksbj1wKG4scixvLGksZVt1KzhdLDYsMTg3MzMxMzM1OSksaT1wKGksbixyLG8sZVt1KzE1XSwxMCwtMzA2MTE3NDQpLG89cChvLGksbixyLGVbdSs2XSwxNSwtMTU2MDE5ODM4MCkscj1wKHIsbyxpLG4sZVt1KzEzXSwyMSwxMzA5MTUxNjQ5KSxuPXAobixyLG8saSxlW3UrNF0sNiwtMTQ1NTIzMDcwKSxpPXAoaSxuLHIsbyxlW3UrMTFdLDEwLC0xMTIwMjEwMzc5KSxvPXAobyxpLG4scixlW3UrMl0sMTUsNzE4Nzg3MjU5KSxyPXAocixvLGksbixlW3UrOV0sMjEsLTM0MzQ4NTU1MSksbj1nKG4scykscj1nKHIsYSksbz1nKG8sZiksaT1nKGksbCl9cmV0dXJuIEFycmF5KG4scixvLGkpfWZ1bmN0aW9uIHMoZSx0LG4scixvLGkpe3JldHVybiBnKCh0PWcoZyh0LGUpLGcocixpKSkpPDxvfHQ+Pj4zMi1vLG4pfWZ1bmN0aW9uIGMoZSx0LG4scixvLGksdSl7cmV0dXJuIHModCZufH50JnIsZSx0LG8saSx1KX1mdW5jdGlvbiBkKGUsdCxuLHIsbyxpLHUpe3JldHVybiBzKHQmcnxuJn5yLGUsdCxvLGksdSl9ZnVuY3Rpb24gaChlLHQsbixyLG8saSx1KXtyZXR1cm4gcyh0Xm5ecixlLHQsbyxpLHUpfWZ1bmN0aW9uIHAoZSx0LG4scixvLGksdSl7cmV0dXJuIHMobl4odHx+ciksZSx0LG8saSx1KX1mdW5jdGlvbiBnKGUsdCl7dmFyIG49KDY1NTM1JmUpKyg2NTUzNSZ0KTtyZXR1cm4oZT4+MTYpKyh0Pj4xNikrKG4+PjE2KTw8MTZ8NjU1MzUmbn1iLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuaGFzaChlLG4sMTYpfX0uY2FsbCh0aGlzLHcoXCJsWXBvSTJcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSx3KFwiYnVmZmVyXCIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvY3J5cHRvLWJyb3dzZXJpZnkvbWQ1LmpzXCIsXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvY3J5cHRvLWJyb3dzZXJpZnlcIil9LHtcIi4vaGVscGVyc1wiOjQsYnVmZmVyOjMsbFlwb0kyOjExfV0sNzpbZnVuY3Rpb24oZSxsLHQpeyFmdW5jdGlvbihlLHQsbixyLG8saSx1LHMsZil7dmFyIGE7bC5leHBvcnRzPWF8fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKykwPT0oMyZyKSYmKHQ9NDI5NDk2NzI5NipNYXRoLnJhbmRvbSgpKSxuW3JdPXQ+Pj4oKDMmcik8PDMpJjI1NTtyZXR1cm4gbn19LmNhbGwodGhpcyxlKFwibFlwb0kyXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sZShcImJ1ZmZlclwiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2NyeXB0by1icm93c2VyaWZ5L3JuZy5qc1wiLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2NyeXB0by1icm93c2VyaWZ5XCIpfSx7YnVmZmVyOjMsbFlwb0kyOjExfV0sODpbZnVuY3Rpb24oYyxkLGUpeyFmdW5jdGlvbihlLHQsbixyLG8scyxhLGYsbCl7dmFyIGk9YyhcIi4vaGVscGVyc1wiKTtmdW5jdGlvbiB1KGwsYyl7bFtjPj41XXw9MTI4PDwyNC1jJTMyLGxbMTUrKGMrNjQ+Pjk8PDQpXT1jO2Zvcih2YXIgZSx0LG4scj1BcnJheSg4MCksbz0xNzMyNTg0MTkzLGk9LTI3MTczMzg3OSx1PS0xNzMyNTg0MTk0LHM9MjcxNzMzODc4LGQ9LTEwMDk1ODk3NzYsaD0wO2g8bC5sZW5ndGg7aCs9MTYpe2Zvcih2YXIgcD1vLGc9aSx5PXUsdz1zLGI9ZCxhPTA7YTw4MDthKyspe3JbYV09YTwxNj9sW2grYV06dihyW2EtM11eclthLThdXnJbYS0xNF1eclthLTE2XSwxKTt2YXIgZj1tKG0odihvLDUpLChmPWksdD11LG49cywoZT1hKTwyMD9mJnR8fmYmbjohKGU8NDApJiZlPDYwP2YmdHxmJm58dCZuOmZedF5uKSksbShtKGQsclthXSksKGU9YSk8MjA/MTUxODUwMDI0OTplPDQwPzE4NTk3NzUzOTM6ZTw2MD8tMTg5NDAwNzU4ODotODk5NDk3NTE0KSksZD1zLHM9dSx1PXYoaSwzMCksaT1vLG89Zn1vPW0obyxwKSxpPW0oaSxnKSx1PW0odSx5KSxzPW0ocyx3KSxkPW0oZCxiKX1yZXR1cm4gQXJyYXkobyxpLHUscyxkKX1mdW5jdGlvbiBtKGUsdCl7dmFyIG49KDY1NTM1JmUpKyg2NTUzNSZ0KTtyZXR1cm4oZT4+MTYpKyh0Pj4xNikrKG4+PjE2KTw8MTZ8NjU1MzUmbn1mdW5jdGlvbiB2KGUsdCl7cmV0dXJuIGU8PHR8ZT4+PjMyLXR9ZC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpLmhhc2goZSx1LDIwLCEwKX19LmNhbGwodGhpcyxjKFwibFlwb0kyXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sYyhcImJ1ZmZlclwiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2NyeXB0by1icm93c2VyaWZ5L3NoYS5qc1wiLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2NyeXB0by1icm93c2VyaWZ5XCIpfSx7XCIuL2hlbHBlcnNcIjo0LGJ1ZmZlcjozLGxZcG9JMjoxMX1dLDk6W2Z1bmN0aW9uKGMsZCxlKXshZnVuY3Rpb24oZSx0LG4scix1LHMsYSxmLGwpe2Z1bmN0aW9uIGIoZSx0KXt2YXIgbj0oNjU1MzUmZSkrKDY1NTM1JnQpO3JldHVybihlPj4xNikrKHQ+PjE2KSsobj4+MTYpPDwxNnw2NTUzNSZufWZ1bmN0aW9uIG8oZSxsKXt2YXIgYyxkPW5ldyBBcnJheSgxMTE2MzUyNDA4LDE4OTk0NDc0NDEsMzA0OTMyMzQ3MSwzOTIxMDA5NTczLDk2MTk4NzE2MywxNTA4OTcwOTkzLDI0NTM2MzU3NDgsMjg3MDc2MzIyMSwzNjI0MzgxMDgwLDMxMDU5ODQwMSw2MDcyMjUyNzgsMTQyNjg4MTk4NywxOTI1MDc4Mzg4LDIxNjIwNzgyMDYsMjYxNDg4ODEwMywzMjQ4MjIyNTgwLDM4MzUzOTA0MDEsNDAyMjIyNDc3NCwyNjQzNDcwNzgsNjA0ODA3NjI4LDc3MDI1NTk4MywxMjQ5MTUwMTIyLDE1NTUwODE2OTIsMTk5NjA2NDk4NiwyNTU0MjIwODgyLDI4MjE4MzQzNDksMjk1Mjk5NjgwOCwzMjEwMzEzNjcxLDMzMzY1NzE4OTEsMzU4NDUyODcxMSwxMTM5MjY5OTMsMzM4MjQxODk1LDY2NjMwNzIwNSw3NzM1Mjk5MTIsMTI5NDc1NzM3MiwxMzk2MTgyMjkxLDE2OTUxODM3MDAsMTk4NjY2MTA1MSwyMTc3MDI2MzUwLDI0NTY5NTYwMzcsMjczMDQ4NTkyMSwyODIwMzAyNDExLDMyNTk3MzA4MDAsMzM0NTc2NDc3MSwzNTE2MDY1ODE3LDM2MDAzNTI4MDQsNDA5NDU3MTkwOSwyNzU0MjMzNDQsNDMwMjI3NzM0LDUwNjk0ODYxNiw2NTkwNjA1NTYsODgzOTk3ODc3LDk1ODEzOTU3MSwxMzIyODIyMjE4LDE1MzcwMDIwNjMsMTc0Nzg3Mzc3OSwxOTU1NTYyMjIyLDIwMjQxMDQ4MTUsMjIyNzczMDQ1MiwyMzYxODUyNDI0LDI0Mjg0MzY0NzQsMjc1NjczNDE4NywzMjA0MDMxNDc5LDMzMjkzMjUyOTgpLHQ9bmV3IEFycmF5KDE3NzkwMzM3MDMsMzE0NDEzNDI3NywxMDEzOTA0MjQyLDI3NzM0ODA3NjIsMTM1OTg5MzExOSwyNjAwODIyOTI0LDUyODczNDYzNSwxNTQxNDU5MjI1KSxuPW5ldyBBcnJheSg2NCk7ZVtsPj41XXw9MTI4PDwyNC1sJTMyLGVbMTUrKGwrNjQ+Pjk8PDQpXT1sO2Zvcih2YXIgcixvLGg9MDtoPGUubGVuZ3RoO2grPTE2KXtmb3IodmFyIGk9dFswXSx1PXRbMV0scz10WzJdLHA9dFszXSxhPXRbNF0sZz10WzVdLHk9dFs2XSx3PXRbN10sZj0wO2Y8NjQ7ZisrKW5bZl09ZjwxNj9lW2YraF06YihiKGIoKG89bltmLTJdLG0obywxNylebShvLDE5KV52KG8sMTApKSxuW2YtN10pLChvPW5bZi0xNV0sbShvLDcpXm0obywxOCledihvLDMpKSksbltmLTE2XSksYz1iKGIoYihiKHcsbShvPWEsNilebShvLDExKV5tKG8sMjUpKSxhJmdefmEmeSksZFtmXSksbltmXSkscj1iKG0ocj1pLDIpXm0ociwxMylebShyLDIyKSxpJnVeaSZzXnUmcyksdz15LHk9ZyxnPWEsYT1iKHAsYykscD1zLHM9dSx1PWksaT1iKGMscik7dFswXT1iKGksdFswXSksdFsxXT1iKHUsdFsxXSksdFsyXT1iKHMsdFsyXSksdFszXT1iKHAsdFszXSksdFs0XT1iKGEsdFs0XSksdFs1XT1iKGcsdFs1XSksdFs2XT1iKHksdFs2XSksdFs3XT1iKHcsdFs3XSl9cmV0dXJuIHR9dmFyIGk9YyhcIi4vaGVscGVyc1wiKSxtPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU+Pj50fGU8PDMyLXR9LHY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT4+PnR9O2QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaS5oYXNoKGUsbywzMiwhMCl9fS5jYWxsKHRoaXMsYyhcImxZcG9JMlwiKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9LGMoXCJidWZmZXJcIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSxcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9jcnlwdG8tYnJvd3NlcmlmeS9zaGEyNTYuanNcIixcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9jcnlwdG8tYnJvd3NlcmlmeVwiKX0se1wiLi9oZWxwZXJzXCI6NCxidWZmZXI6MyxsWXBvSTI6MTF9XSwxMDpbZnVuY3Rpb24oZSx0LGYpeyFmdW5jdGlvbihlLHQsbixyLG8saSx1LHMsYSl7Zi5yZWFkPWZ1bmN0aW9uKGUsdCxuLHIsbyl7dmFyIGksdSxsPTgqby1yLTEsYz0oMTw8bCktMSxkPWM+PjEscz0tNyxhPW4/by0xOjAsZj1uPy0xOjEsbz1lW3QrYV07Zm9yKGErPWYsaT1vJigxPDwtcyktMSxvPj49LXMscys9bDswPHM7aT0yNTYqaStlW3QrYV0sYSs9ZixzLT04KTtmb3IodT1pJigxPDwtcyktMSxpPj49LXMscys9cjswPHM7dT0yNTYqdStlW3QrYV0sYSs9ZixzLT04KTtpZigwPT09aSlpPTEtZDtlbHNle2lmKGk9PT1jKXJldHVybiB1P05hTjoxLzAqKG8/LTE6MSk7dSs9TWF0aC5wb3coMixyKSxpLT1kfXJldHVybihvPy0xOjEpKnUqTWF0aC5wb3coMixpLXIpfSxmLndyaXRlPWZ1bmN0aW9uKGUsdCxsLG4scixjKXt2YXIgbyxpLHU9OCpjLXItMSxzPSgxPDx1KS0xLGE9cz4+MSxkPTIzPT09cj9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjAsZj1uPzA6Yy0xLGg9bj8xOi0xLGM9dDwwfHwwPT09dCYmMS90PDA/MTowO2Zvcih0PU1hdGguYWJzKHQpLGlzTmFOKHQpfHx0PT09MS8wPyhpPWlzTmFOKHQpPzE6MCxvPXMpOihvPU1hdGguZmxvb3IoTWF0aC5sb2codCkvTWF0aC5MTjIpLHQqKG49TWF0aC5wb3coMiwtbykpPDEmJihvLS0sbio9MiksMjw9KHQrPTE8PW8rYT9kL246ZCpNYXRoLnBvdygyLDEtYSkpKm4mJihvKyssbi89Miksczw9bythPyhpPTAsbz1zKToxPD1vK2E/KGk9KHQqbi0xKSpNYXRoLnBvdygyLHIpLG8rPWEpOihpPXQqTWF0aC5wb3coMixhLTEpKk1hdGgucG93KDIsciksbz0wKSk7ODw9cjtlW2wrZl09MjU1JmksZis9aCxpLz0yNTYsci09OCk7Zm9yKG89bzw8cnxpLHUrPXI7MDx1O2VbbCtmXT0yNTUmbyxmKz1oLG8vPTI1Nix1LT04KTtlW2wrZi1oXXw9MTI4KmN9fS5jYWxsKHRoaXMsZShcImxZcG9JMlwiKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9LGUoXCJidWZmZXJcIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSxcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzXCIsXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvaWVlZTc1NFwiKX0se2J1ZmZlcjozLGxZcG9JMjoxMX1dLDExOltmdW5jdGlvbihlLGgsdCl7IWZ1bmN0aW9uKGUsdCxuLHIsbyxmLGwsYyxkKXt2YXIgaSx1LHM7ZnVuY3Rpb24gYSgpe30oZT1oLmV4cG9ydHM9e30pLm5leHRUaWNrPSh1PVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5zZXRJbW1lZGlhdGUscz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cucG9zdE1lc3NhZ2UmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyLHU/ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5zZXRJbW1lZGlhdGUoZSl9OnM/KGk9W10sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zb3VyY2U7dCE9PXdpbmRvdyYmbnVsbCE9PXR8fFwicHJvY2Vzcy10aWNrXCIhPT1lLmRhdGF8fChlLnN0b3BQcm9wYWdhdGlvbigpLDA8aS5sZW5ndGgmJmkuc2hpZnQoKSgpKX0sITApLGZ1bmN0aW9uKGUpe2kucHVzaChlKSx3aW5kb3cucG9zdE1lc3NhZ2UoXCJwcm9jZXNzLXRpY2tcIixcIipcIil9KTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMCl9KSxlLnRpdGxlPVwiYnJvd3NlclwiLGUuYnJvd3Nlcj0hMCxlLmVudj17fSxlLmFyZ3Y9W10sZS5vbj1hLGUuYWRkTGlzdGVuZXI9YSxlLm9uY2U9YSxlLm9mZj1hLGUucmVtb3ZlTGlzdGVuZXI9YSxlLnJlbW92ZUFsbExpc3RlbmVycz1hLGUuZW1pdD1hLGUuYmluZGluZz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX0sZS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0sZS5jaGRpcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9fS5jYWxsKHRoaXMsZShcImxZcG9JMlwiKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9LGUoXCJidWZmZXJcIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSxcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanNcIixcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9wcm9jZXNzXCIpfSx7YnVmZmVyOjMsbFlwb0kyOjExfV19LHt9LFsxXSkoMSl9KTsiLCJpbXBvcnQgaGFzaCBmcm9tIFwib2JqZWN0LWhhc2hcIjtcbi8qKlxuICogVGhpcyBjYWNoZSBrZXkgc2hvdWxkIGJlIGNvbnNpc3RlbnQgYWNyb3NzIGFsbCB2ZXJzaW9ucyBvZiBsYW5nY2hhaW4uXG4gKiBJdCBpcyBjdXJyZW50bHkgTk9UIGNvbnNpc3RlbnQgYWNyb3NzIHZlcnNpb25zIG9mIGxhbmdjaGFpbi5cbiAqXG4gKiBBIGh1Z2UgYmVuZWZpdCBvZiBoYXZpbmcgYSByZW1vdGUgY2FjaGUgKGxpa2UgcmVkaXMpIGlzIHRoYXQgeW91IGNhblxuICogYWNjZXNzIHRoZSBjYWNoZSBmcm9tIGRpZmZlcmVudCBwcm9jZXNzZXMvbWFjaGluZXMuIFRoZSBhbGxvd3MgeW91IHRvXG4gKiBzZXBlcmF0ZSBjb25jZXJucyBhbmQgc2NhbGUgaG9yaXpvbnRhbGx5LlxuICpcbiAqIFRPRE86IE1ha2UgY2FjaGUga2V5IGNvbnNpc3RlbnQgYWNyb3NzIHZlcnNpb25zIG9mIGxhbmdjaGFpbi5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldENhY2hlS2V5ID0gKC4uLnN0cmluZ3MpID0+IGhhc2goc3RyaW5ncy5qb2luKFwiX1wiKSk7XG4iLCJleHBvcnQgY29uc3QgUlVOX0tFWSA9IFwiX19ydW5cIjtcbmV4cG9ydCBjbGFzcyBCYXNlQ2hhdE1lc3NhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHRleHQpIHtcbiAgICAgICAgLyoqIFRoZSB0ZXh0IG9mIHRoZSBtZXNzYWdlLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZXh0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgbWVzc2FnZSBzZW5kZXIgaW4gYSBtdWx0aS11c2VyIGNoYXQuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy5fZ2V0VHlwZSgpLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMudGV4dCxcbiAgICAgICAgICAgICAgICByb2xlOiBcInJvbGVcIiBpbiB0aGlzID8gdGhpcy5yb2xlIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSHVtYW5DaGF0TWVzc2FnZSBleHRlbmRzIEJhc2VDaGF0TWVzc2FnZSB7XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImh1bWFuXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFJQ2hhdE1lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2hhdE1lc3NhZ2Uge1xuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJhaVwiO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTeXN0ZW1DaGF0TWVzc2FnZSBleHRlbmRzIEJhc2VDaGF0TWVzc2FnZSB7XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZSBleHRlbmRzIEJhc2VDaGF0TWVzc2FnZSB7XG4gICAgY29uc3RydWN0b3IodGV4dCwgcm9sZSkge1xuICAgICAgICBzdXBlcih0ZXh0KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSByb2xlO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZ2VuZXJpY1wiO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBQcm9tcHRWYWx1ZSBjbGFzcy4gQWxsIHByb21wdCB2YWx1ZXMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZVByb21wdFZhbHVlIHtcbn1cbi8qKlxuICogQmFzZSBJbmRleCBjbGFzcy4gQWxsIGluZGV4ZXMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZVJldHJpZXZlciB7XG59XG5leHBvcnQgY2xhc3MgQmFzZUNoYXRNZXNzYWdlSGlzdG9yeSB7XG59XG5leHBvcnQgY2xhc3MgQmFzZUxpc3RDaGF0TWVzc2FnZUhpc3Rvcnkge1xuICAgIGFkZFVzZXJNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkTWVzc2FnZShuZXcgSHVtYW5DaGF0TWVzc2FnZShtZXNzYWdlKSk7XG4gICAgfVxuICAgIGFkZEFJQ2hhdE1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRNZXNzYWdlKG5ldyBBSUNoYXRNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzZUNhY2hlIHtcbn1cbmV4cG9ydCBjbGFzcyBCYXNlRmlsZVN0b3JlIHtcbn1cbmV4cG9ydCBjbGFzcyBCYXNlRW50aXR5U3RvcmUge1xufVxuIiwiaW1wb3J0IHsgZ2V0Q2FjaGVLZXkgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBCYXNlQ2FjaGUgfSBmcm9tIFwiLi4vc2NoZW1hL2luZGV4LmpzXCI7XG5jb25zdCBHTE9CQUxfTUFQID0gbmV3IE1hcCgpO1xuZXhwb3J0IGNsYXNzIEluTWVtb3J5Q2FjaGUgZXh0ZW5kcyBCYXNlQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKG1hcCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWNoZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNhY2hlID0gbWFwID8/IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgbG9va3VwKHByb21wdCwgbGxtS2V5KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jYWNoZS5nZXQoZ2V0Q2FjaGVLZXkocHJvbXB0LCBsbG1LZXkpKSA/PyBudWxsKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlKHByb21wdCwgbGxtS2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmNhY2hlLnNldChnZXRDYWNoZUtleShwcm9tcHQsIGxsbUtleSksIHZhbHVlKTtcbiAgICB9XG4gICAgc3RhdGljIGdsb2JhbCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbk1lbW9yeUNhY2hlKEdMT0JBTF9NQVApO1xuICAgIH1cbn1cbiIsImZ1bmN0aW9uIFJldHJ5T3BlcmF0aW9uKHRpbWVvdXRzLCBvcHRpb25zKSB7XG4gIC8vIENvbXBhdGliaWxpdHkgZm9yIHRoZSBvbGQgKHRpbWVvdXRzLCByZXRyeUZvcmV2ZXIpIHNpZ25hdHVyZVxuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMgPSB7IGZvcmV2ZXI6IG9wdGlvbnMgfTtcbiAgfVxuXG4gIHRoaXMuX29yaWdpbmFsVGltZW91dHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRpbWVvdXRzKSk7XG4gIHRoaXMuX3RpbWVvdXRzID0gdGltZW91dHM7XG4gIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB0aGlzLl9tYXhSZXRyeVRpbWUgPSBvcHRpb25zICYmIG9wdGlvbnMubWF4UmV0cnlUaW1lIHx8IEluZmluaXR5O1xuICB0aGlzLl9mbiA9IG51bGw7XG4gIHRoaXMuX2Vycm9ycyA9IFtdO1xuICB0aGlzLl9hdHRlbXB0cyA9IDE7XG4gIHRoaXMuX29wZXJhdGlvblRpbWVvdXQgPSBudWxsO1xuICB0aGlzLl9vcGVyYXRpb25UaW1lb3V0Q2IgPSBudWxsO1xuICB0aGlzLl90aW1lb3V0ID0gbnVsbDtcbiAgdGhpcy5fb3BlcmF0aW9uU3RhcnQgPSBudWxsO1xuICB0aGlzLl90aW1lciA9IG51bGw7XG5cbiAgaWYgKHRoaXMuX29wdGlvbnMuZm9yZXZlcikge1xuICAgIHRoaXMuX2NhY2hlZFRpbWVvdXRzID0gdGhpcy5fdGltZW91dHMuc2xpY2UoMCk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gUmV0cnlPcGVyYXRpb247XG5cblJldHJ5T3BlcmF0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9hdHRlbXB0cyA9IDE7XG4gIHRoaXMuX3RpbWVvdXRzID0gdGhpcy5fb3JpZ2luYWxUaW1lb3V0cy5zbGljZSgwKTtcbn1cblxuUmV0cnlPcGVyYXRpb24ucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuX3RpbWVvdXQpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XG4gIH1cbiAgaWYgKHRoaXMuX3RpbWVyKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcbiAgfVxuXG4gIHRoaXMuX3RpbWVvdXRzICAgICAgID0gW107XG4gIHRoaXMuX2NhY2hlZFRpbWVvdXRzID0gbnVsbDtcbn07XG5cblJldHJ5T3BlcmF0aW9uLnByb3RvdHlwZS5yZXRyeSA9IGZ1bmN0aW9uKGVycikge1xuICBpZiAodGhpcy5fdGltZW91dCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgfVxuXG4gIGlmICghZXJyKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICBpZiAoZXJyICYmIGN1cnJlbnRUaW1lIC0gdGhpcy5fb3BlcmF0aW9uU3RhcnQgPj0gdGhpcy5fbWF4UmV0cnlUaW1lKSB7XG4gICAgdGhpcy5fZXJyb3JzLnB1c2goZXJyKTtcbiAgICB0aGlzLl9lcnJvcnMudW5zaGlmdChuZXcgRXJyb3IoJ1JldHJ5T3BlcmF0aW9uIHRpbWVvdXQgb2NjdXJyZWQnKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdGhpcy5fZXJyb3JzLnB1c2goZXJyKTtcblxuICB2YXIgdGltZW91dCA9IHRoaXMuX3RpbWVvdXRzLnNoaWZ0KCk7XG4gIGlmICh0aW1lb3V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodGhpcy5fY2FjaGVkVGltZW91dHMpIHtcbiAgICAgIC8vIHJldHJ5IGZvcmV2ZXIsIG9ubHkga2VlcCBsYXN0IGVycm9yXG4gICAgICB0aGlzLl9lcnJvcnMuc3BsaWNlKDAsIHRoaXMuX2Vycm9ycy5sZW5ndGggLSAxKTtcbiAgICAgIHRpbWVvdXQgPSB0aGlzLl9jYWNoZWRUaW1lb3V0cy5zbGljZSgtMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuX3RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBzZWxmLl9hdHRlbXB0cysrO1xuXG4gICAgaWYgKHNlbGYuX29wZXJhdGlvblRpbWVvdXRDYikge1xuICAgICAgc2VsZi5fdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGYuX29wZXJhdGlvblRpbWVvdXRDYihzZWxmLl9hdHRlbXB0cyk7XG4gICAgICB9LCBzZWxmLl9vcGVyYXRpb25UaW1lb3V0KTtcblxuICAgICAgaWYgKHNlbGYuX29wdGlvbnMudW5yZWYpIHtcbiAgICAgICAgICBzZWxmLl90aW1lb3V0LnVucmVmKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2VsZi5fZm4oc2VsZi5fYXR0ZW1wdHMpO1xuICB9LCB0aW1lb3V0KTtcblxuICBpZiAodGhpcy5fb3B0aW9ucy51bnJlZikge1xuICAgICAgdGhpcy5fdGltZXIudW5yZWYoKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuUmV0cnlPcGVyYXRpb24ucHJvdG90eXBlLmF0dGVtcHQgPSBmdW5jdGlvbihmbiwgdGltZW91dE9wcykge1xuICB0aGlzLl9mbiA9IGZuO1xuXG4gIGlmICh0aW1lb3V0T3BzKSB7XG4gICAgaWYgKHRpbWVvdXRPcHMudGltZW91dCkge1xuICAgICAgdGhpcy5fb3BlcmF0aW9uVGltZW91dCA9IHRpbWVvdXRPcHMudGltZW91dDtcbiAgICB9XG4gICAgaWYgKHRpbWVvdXRPcHMuY2IpIHtcbiAgICAgIHRoaXMuX29wZXJhdGlvblRpbWVvdXRDYiA9IHRpbWVvdXRPcHMuY2I7XG4gICAgfVxuICB9XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZiAodGhpcy5fb3BlcmF0aW9uVGltZW91dENiKSB7XG4gICAgdGhpcy5fdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl9vcGVyYXRpb25UaW1lb3V0Q2IoKTtcbiAgICB9LCBzZWxmLl9vcGVyYXRpb25UaW1lb3V0KTtcbiAgfVxuXG4gIHRoaXMuX29wZXJhdGlvblN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgdGhpcy5fZm4odGhpcy5fYXR0ZW1wdHMpO1xufTtcblxuUmV0cnlPcGVyYXRpb24ucHJvdG90eXBlLnRyeSA9IGZ1bmN0aW9uKGZuKSB7XG4gIGNvbnNvbGUubG9nKCdVc2luZyBSZXRyeU9wZXJhdGlvbi50cnkoKSBpcyBkZXByZWNhdGVkJyk7XG4gIHRoaXMuYXR0ZW1wdChmbik7XG59O1xuXG5SZXRyeU9wZXJhdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbihmbikge1xuICBjb25zb2xlLmxvZygnVXNpbmcgUmV0cnlPcGVyYXRpb24uc3RhcnQoKSBpcyBkZXByZWNhdGVkJyk7XG4gIHRoaXMuYXR0ZW1wdChmbik7XG59O1xuXG5SZXRyeU9wZXJhdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBSZXRyeU9wZXJhdGlvbi5wcm90b3R5cGUudHJ5O1xuXG5SZXRyeU9wZXJhdGlvbi5wcm90b3R5cGUuZXJyb3JzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLl9lcnJvcnM7XG59O1xuXG5SZXRyeU9wZXJhdGlvbi5wcm90b3R5cGUuYXR0ZW1wdHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2F0dGVtcHRzO1xufTtcblxuUmV0cnlPcGVyYXRpb24ucHJvdG90eXBlLm1haW5FcnJvciA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5fZXJyb3JzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGNvdW50cyA9IHt9O1xuICB2YXIgbWFpbkVycm9yID0gbnVsbDtcbiAgdmFyIG1haW5FcnJvckNvdW50ID0gMDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2Vycm9ycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlcnJvciA9IHRoaXMuX2Vycm9yc1tpXTtcbiAgICB2YXIgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgdmFyIGNvdW50ID0gKGNvdW50c1ttZXNzYWdlXSB8fCAwKSArIDE7XG5cbiAgICBjb3VudHNbbWVzc2FnZV0gPSBjb3VudDtcblxuICAgIGlmIChjb3VudCA+PSBtYWluRXJyb3JDb3VudCkge1xuICAgICAgbWFpbkVycm9yID0gZXJyb3I7XG4gICAgICBtYWluRXJyb3JDb3VudCA9IGNvdW50O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtYWluRXJyb3I7XG59O1xuIiwidmFyIFJldHJ5T3BlcmF0aW9uID0gcmVxdWlyZSgnLi9yZXRyeV9vcGVyYXRpb24nKTtcblxuZXhwb3J0cy5vcGVyYXRpb24gPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIHZhciB0aW1lb3V0cyA9IGV4cG9ydHMudGltZW91dHMob3B0aW9ucyk7XG4gIHJldHVybiBuZXcgUmV0cnlPcGVyYXRpb24odGltZW91dHMsIHtcbiAgICAgIGZvcmV2ZXI6IG9wdGlvbnMgJiYgKG9wdGlvbnMuZm9yZXZlciB8fCBvcHRpb25zLnJldHJpZXMgPT09IEluZmluaXR5KSxcbiAgICAgIHVucmVmOiBvcHRpb25zICYmIG9wdGlvbnMudW5yZWYsXG4gICAgICBtYXhSZXRyeVRpbWU6IG9wdGlvbnMgJiYgb3B0aW9ucy5tYXhSZXRyeVRpbWVcbiAgfSk7XG59O1xuXG5leHBvcnRzLnRpbWVvdXRzID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgcmV0dXJuIFtdLmNvbmNhdChvcHRpb25zKTtcbiAgfVxuXG4gIHZhciBvcHRzID0ge1xuICAgIHJldHJpZXM6IDEwLFxuICAgIGZhY3RvcjogMixcbiAgICBtaW5UaW1lb3V0OiAxICogMTAwMCxcbiAgICBtYXhUaW1lb3V0OiBJbmZpbml0eSxcbiAgICByYW5kb21pemU6IGZhbHNlXG4gIH07XG4gIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgb3B0c1trZXldID0gb3B0aW9uc1trZXldO1xuICB9XG5cbiAgaWYgKG9wdHMubWluVGltZW91dCA+IG9wdHMubWF4VGltZW91dCkge1xuICAgIHRocm93IG5ldyBFcnJvcignbWluVGltZW91dCBpcyBncmVhdGVyIHRoYW4gbWF4VGltZW91dCcpO1xuICB9XG5cbiAgdmFyIHRpbWVvdXRzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0cy5yZXRyaWVzOyBpKyspIHtcbiAgICB0aW1lb3V0cy5wdXNoKHRoaXMuY3JlYXRlVGltZW91dChpLCBvcHRzKSk7XG4gIH1cblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZvcmV2ZXIgJiYgIXRpbWVvdXRzLmxlbmd0aCkge1xuICAgIHRpbWVvdXRzLnB1c2godGhpcy5jcmVhdGVUaW1lb3V0KGksIG9wdHMpKTtcbiAgfVxuXG4gIC8vIHNvcnQgdGhlIGFycmF5IG51bWVyaWNhbGx5IGFzY2VuZGluZ1xuICB0aW1lb3V0cy5zb3J0KGZ1bmN0aW9uKGEsYikge1xuICAgIHJldHVybiBhIC0gYjtcbiAgfSk7XG5cbiAgcmV0dXJuIHRpbWVvdXRzO1xufTtcblxuZXhwb3J0cy5jcmVhdGVUaW1lb3V0ID0gZnVuY3Rpb24oYXR0ZW1wdCwgb3B0cykge1xuICB2YXIgcmFuZG9tID0gKG9wdHMucmFuZG9taXplKVxuICAgID8gKE1hdGgucmFuZG9tKCkgKyAxKVxuICAgIDogMTtcblxuICB2YXIgdGltZW91dCA9IE1hdGgucm91bmQocmFuZG9tICogTWF0aC5tYXgob3B0cy5taW5UaW1lb3V0LCAxKSAqIE1hdGgucG93KG9wdHMuZmFjdG9yLCBhdHRlbXB0KSk7XG4gIHRpbWVvdXQgPSBNYXRoLm1pbih0aW1lb3V0LCBvcHRzLm1heFRpbWVvdXQpO1xuXG4gIHJldHVybiB0aW1lb3V0O1xufTtcblxuZXhwb3J0cy53cmFwID0gZnVuY3Rpb24ob2JqLCBvcHRpb25zLCBtZXRob2RzKSB7XG4gIGlmIChvcHRpb25zIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBtZXRob2RzID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0gbnVsbDtcbiAgfVxuXG4gIGlmICghbWV0aG9kcykge1xuICAgIG1ldGhvZHMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9ialtrZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG1ldGhvZHMucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBtZXRob2QgICA9IG1ldGhvZHNbaV07XG4gICAgdmFyIG9yaWdpbmFsID0gb2JqW21ldGhvZF07XG5cbiAgICBvYmpbbWV0aG9kXSA9IGZ1bmN0aW9uIHJldHJ5V3JhcHBlcihvcmlnaW5hbCkge1xuICAgICAgdmFyIG9wICAgICAgID0gZXhwb3J0cy5vcGVyYXRpb24ob3B0aW9ucyk7XG4gICAgICB2YXIgYXJncyAgICAgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgdmFyIGNhbGxiYWNrID0gYXJncy5wb3AoKTtcblxuICAgICAgYXJncy5wdXNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAob3AucmV0cnkoZXJyKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgYXJndW1lbnRzWzBdID0gb3AubWFpbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuXG4gICAgICBvcC5hdHRlbXB0KGZ1bmN0aW9uKCkge1xuICAgICAgICBvcmlnaW5hbC5hcHBseShvYmosIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgfS5iaW5kKG9iaiwgb3JpZ2luYWwpO1xuICAgIG9ialttZXRob2RdLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9yZXRyeScpOyIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IHJldHJ5ID0gcmVxdWlyZSgncmV0cnknKTtcblxuY29uc3QgbmV0d29ya0Vycm9yTXNncyA9IFtcblx0J0ZhaWxlZCB0byBmZXRjaCcsIC8vIENocm9tZVxuXHQnTmV0d29ya0Vycm9yIHdoZW4gYXR0ZW1wdGluZyB0byBmZXRjaCByZXNvdXJjZS4nLCAvLyBGaXJlZm94XG5cdCdUaGUgSW50ZXJuZXQgY29ubmVjdGlvbiBhcHBlYXJzIHRvIGJlIG9mZmxpbmUuJywgLy8gU2FmYXJpXG5cdCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJyAvLyBgY3Jvc3MtZmV0Y2hgXG5dO1xuXG5jbGFzcyBBYm9ydEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG5cdFx0c3VwZXIoKTtcblxuXHRcdGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdHRoaXMub3JpZ2luYWxFcnJvciA9IG1lc3NhZ2U7XG5cdFx0XHQoe21lc3NhZ2V9ID0gbWVzc2FnZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMub3JpZ2luYWxFcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcblx0XHRcdHRoaXMub3JpZ2luYWxFcnJvci5zdGFjayA9IHRoaXMuc3RhY2s7XG5cdFx0fVxuXG5cdFx0dGhpcy5uYW1lID0gJ0Fib3J0RXJyb3InO1xuXHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdH1cbn1cblxuY29uc3QgZGVjb3JhdGVFcnJvcldpdGhDb3VudHMgPSAoZXJyb3IsIGF0dGVtcHROdW1iZXIsIG9wdGlvbnMpID0+IHtcblx0Ly8gTWludXMgMSBmcm9tIGF0dGVtcHROdW1iZXIgYmVjYXVzZSB0aGUgZmlyc3QgYXR0ZW1wdCBkb2VzIG5vdCBjb3VudCBhcyBhIHJldHJ5XG5cdGNvbnN0IHJldHJpZXNMZWZ0ID0gb3B0aW9ucy5yZXRyaWVzIC0gKGF0dGVtcHROdW1iZXIgLSAxKTtcblxuXHRlcnJvci5hdHRlbXB0TnVtYmVyID0gYXR0ZW1wdE51bWJlcjtcblx0ZXJyb3IucmV0cmllc0xlZnQgPSByZXRyaWVzTGVmdDtcblx0cmV0dXJuIGVycm9yO1xufTtcblxuY29uc3QgaXNOZXR3b3JrRXJyb3IgPSBlcnJvck1lc3NhZ2UgPT4gbmV0d29ya0Vycm9yTXNncy5pbmNsdWRlcyhlcnJvck1lc3NhZ2UpO1xuXG5jb25zdCBwUmV0cnkgPSAoaW5wdXQsIG9wdGlvbnMpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0b3B0aW9ucyA9IHtcblx0XHRvbkZhaWxlZEF0dGVtcHQ6ICgpID0+IHt9LFxuXHRcdHJldHJpZXM6IDEwLFxuXHRcdC4uLm9wdGlvbnNcblx0fTtcblxuXHRjb25zdCBvcGVyYXRpb24gPSByZXRyeS5vcGVyYXRpb24ob3B0aW9ucyk7XG5cblx0b3BlcmF0aW9uLmF0dGVtcHQoYXN5bmMgYXR0ZW1wdE51bWJlciA9PiB7XG5cdFx0dHJ5IHtcblx0XHRcdHJlc29sdmUoYXdhaXQgaW5wdXQoYXR0ZW1wdE51bWJlcikpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRpZiAoIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSkge1xuXHRcdFx0XHRyZWplY3QobmV3IFR5cGVFcnJvcihgTm9uLWVycm9yIHdhcyB0aHJvd246IFwiJHtlcnJvcn1cIi4gWW91IHNob3VsZCBvbmx5IHRocm93IGVycm9ycy5gKSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgQWJvcnRFcnJvcikge1xuXHRcdFx0XHRvcGVyYXRpb24uc3RvcCgpO1xuXHRcdFx0XHRyZWplY3QoZXJyb3Iub3JpZ2luYWxFcnJvcik7XG5cdFx0XHR9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgVHlwZUVycm9yICYmICFpc05ldHdvcmtFcnJvcihlcnJvci5tZXNzYWdlKSkge1xuXHRcdFx0XHRvcGVyYXRpb24uc3RvcCgpO1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVjb3JhdGVFcnJvcldpdGhDb3VudHMoZXJyb3IsIGF0dGVtcHROdW1iZXIsIG9wdGlvbnMpO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgb3B0aW9ucy5vbkZhaWxlZEF0dGVtcHQoZXJyb3IpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFvcGVyYXRpb24ucmV0cnkoZXJyb3IpKSB7XG5cdFx0XHRcdFx0cmVqZWN0KG9wZXJhdGlvbi5tYWluRXJyb3IoKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcFJldHJ5O1xuLy8gVE9ETzogcmVtb3ZlIHRoaXMgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvblxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IHBSZXRyeTtcblxubW9kdWxlLmV4cG9ydHMuQWJvcnRFcnJvciA9IEFib3J0RXJyb3I7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5XG4gICwgcHJlZml4ID0gJ34nO1xuXG4vKipcbiAqIENvbnN0cnVjdG9yIHRvIGNyZWF0ZSBhIHN0b3JhZ2UgZm9yIG91ciBgRUVgIG9iamVjdHMuXG4gKiBBbiBgRXZlbnRzYCBpbnN0YW5jZSBpcyBhIHBsYWluIG9iamVjdCB3aG9zZSBwcm9wZXJ0aWVzIGFyZSBldmVudCBuYW1lcy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEV2ZW50cygpIHt9XG5cbi8vXG4vLyBXZSB0cnkgdG8gbm90IGluaGVyaXQgZnJvbSBgT2JqZWN0LnByb3RvdHlwZWAuIEluIHNvbWUgZW5naW5lcyBjcmVhdGluZyBhblxuLy8gaW5zdGFuY2UgaW4gdGhpcyB3YXkgaXMgZmFzdGVyIHRoYW4gY2FsbGluZyBgT2JqZWN0LmNyZWF0ZShudWxsKWAgZGlyZWN0bHkuXG4vLyBJZiBgT2JqZWN0LmNyZWF0ZShudWxsKWAgaXMgbm90IHN1cHBvcnRlZCB3ZSBwcmVmaXggdGhlIGV2ZW50IG5hbWVzIHdpdGggYVxuLy8gY2hhcmFjdGVyIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBidWlsdC1pbiBvYmplY3QgcHJvcGVydGllcyBhcmUgbm90XG4vLyBvdmVycmlkZGVuIG9yIHVzZWQgYXMgYW4gYXR0YWNrIHZlY3Rvci5cbi8vXG5pZiAoT2JqZWN0LmNyZWF0ZSkge1xuICBFdmVudHMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAvL1xuICAvLyBUaGlzIGhhY2sgaXMgbmVlZGVkIGJlY2F1c2UgdGhlIGBfX3Byb3RvX19gIHByb3BlcnR5IGlzIHN0aWxsIGluaGVyaXRlZCBpblxuICAvLyBzb21lIG9sZCBicm93c2VycyBsaWtlIEFuZHJvaWQgNCwgaVBob25lIDUuMSwgT3BlcmEgMTEgYW5kIFNhZmFyaSA1LlxuICAvL1xuICBpZiAoIW5ldyBFdmVudHMoKS5fX3Byb3RvX18pIHByZWZpeCA9IGZhbHNlO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGEgc2luZ2xlIGV2ZW50IGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvbmNlPWZhbHNlXSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFRShmbiwgY29udGV4dCwgb25jZSkge1xuICB0aGlzLmZuID0gZm47XG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIHRoaXMub25jZSA9IG9uY2UgfHwgZmFsc2U7XG59XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVtaXR0ZXIgUmVmZXJlbmNlIHRvIHRoZSBgRXZlbnRFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgU3BlY2lmeSBpZiB0aGUgbGlzdGVuZXIgaXMgYSBvbmUtdGltZSBsaXN0ZW5lci5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBsaXN0ZW5lciA9IG5ldyBFRShmbiwgY29udGV4dCB8fCBlbWl0dGVyLCBvbmNlKVxuICAgICwgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIWVtaXR0ZXIuX2V2ZW50c1tldnRdKSBlbWl0dGVyLl9ldmVudHNbZXZ0XSA9IGxpc3RlbmVyLCBlbWl0dGVyLl9ldmVudHNDb3VudCsrO1xuICBlbHNlIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0uZm4pIGVtaXR0ZXIuX2V2ZW50c1tldnRdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gW2VtaXR0ZXIuX2V2ZW50c1tldnRdLCBsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIGVtaXR0ZXI7XG59XG5cbi8qKlxuICogQ2xlYXIgZXZlbnQgYnkgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2dCBUaGUgRXZlbnQgbmFtZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNsZWFyRXZlbnQoZW1pdHRlciwgZXZ0KSB7XG4gIGlmICgtLWVtaXR0ZXIuX2V2ZW50c0NvdW50ID09PSAwKSBlbWl0dGVyLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gIGVsc2UgZGVsZXRlIGVtaXR0ZXIuX2V2ZW50c1tldnRdO1xufVxuXG4vKipcbiAqIE1pbmltYWwgYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlIHRoYXQgaXMgbW9sZGVkIGFnYWluc3QgdGhlIE5vZGUuanNcbiAqIGBFdmVudEVtaXR0ZXJgIGludGVyZmFjZS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYW4gYXJyYXkgbGlzdGluZyB0aGUgZXZlbnRzIGZvciB3aGljaCB0aGUgZW1pdHRlciBoYXMgcmVnaXN0ZXJlZFxuICogbGlzdGVuZXJzLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgdmFyIG5hbWVzID0gW11cbiAgICAsIGV2ZW50c1xuICAgICwgbmFtZTtcblxuICBpZiAodGhpcy5fZXZlbnRzQ291bnQgPT09IDApIHJldHVybiBuYW1lcztcblxuICBmb3IgKG5hbWUgaW4gKGV2ZW50cyA9IHRoaXMuX2V2ZW50cykpIHtcbiAgICBpZiAoaGFzLmNhbGwoZXZlbnRzLCBuYW1lKSkgbmFtZXMucHVzaChwcmVmaXggPyBuYW1lLnNsaWNlKDEpIDogbmFtZSk7XG4gIH1cblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHJldHVybiBuYW1lcy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhldmVudHMpKTtcbiAgfVxuXG4gIHJldHVybiBuYW1lcztcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFRoZSByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnMoZXZlbnQpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnRcbiAgICAsIGhhbmRsZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKCFoYW5kbGVycykgcmV0dXJuIFtdO1xuICBpZiAoaGFuZGxlcnMuZm4pIHJldHVybiBbaGFuZGxlcnMuZm5dO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoLCBlZSA9IG5ldyBBcnJheShsKTsgaSA8IGw7IGkrKykge1xuICAgIGVlW2ldID0gaGFuZGxlcnNbaV0uZm47XG4gIH1cblxuICByZXR1cm4gZWU7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbnVtYmVyIG9mIGxpc3RlbmVycyBsaXN0ZW5pbmcgdG8gYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbnVtYmVyIG9mIGxpc3RlbmVycy5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gbGlzdGVuZXJDb3VudChldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiAwO1xuICBpZiAobGlzdGVuZXJzLmZuKSByZXR1cm4gMTtcbiAgcmV0dXJuIGxpc3RlbmVycy5sZW5ndGg7XG59O1xuXG4vKipcbiAqIENhbGxzIGVhY2ggb2YgdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGhhZCBsaXN0ZW5lcnMsIGVsc2UgYGZhbHNlYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudCwgYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiBmYWxzZTtcblxuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF1cbiAgICAsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAsIGFyZ3NcbiAgICAsIGk7XG5cbiAgaWYgKGxpc3RlbmVycy5mbikge1xuICAgIGlmIChsaXN0ZW5lcnMub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgc3dpdGNoIChsZW4pIHtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSksIHRydWU7XG4gICAgICBjYXNlIDM6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyKSwgdHJ1ZTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzKSwgdHJ1ZTtcbiAgICAgIGNhc2UgNTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCksIHRydWU7XG4gICAgICBjYXNlIDY6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQsIGE1KSwgdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGkgPCBsZW47IGkrKykge1xuICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuXG4gICAgbGlzdGVuZXJzLmZuLmFwcGx5KGxpc3RlbmVycy5jb250ZXh0LCBhcmdzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aFxuICAgICAgLCBqO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobGlzdGVuZXJzW2ldLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyc1tpXS5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuICAgICAgc3dpdGNoIChsZW4pIHtcbiAgICAgICAgY2FzZSAxOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCk7IGJyZWFrO1xuICAgICAgICBjYXNlIDI6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSk7IGJyZWFrO1xuICAgICAgICBjYXNlIDM6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIpOyBicmVhaztcbiAgICAgICAgY2FzZSA0OiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyLCBhMyk7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmICghYXJncykgZm9yIChqID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaiAtIDFdID0gYXJndW1lbnRzW2pdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpc3RlbmVyc1tpXS5mbi5hcHBseShsaXN0ZW5lcnNbaV0uY29udGV4dCwgYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24oZXZlbnQsIGZuLCBjb250ZXh0KSB7XG4gIHJldHVybiBhZGRMaXN0ZW5lcih0aGlzLCBldmVudCwgZm4sIGNvbnRleHQsIGZhbHNlKTtcbn07XG5cbi8qKlxuICogQWRkIGEgb25lLXRpbWUgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGZuLCBjb250ZXh0KSB7XG4gIHJldHVybiBhZGRMaXN0ZW5lcih0aGlzLCBldmVudCwgZm4sIGNvbnRleHQsIHRydWUpO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgdGhlIGxpc3RlbmVycyBvZiBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIE9ubHkgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgdGhhdCBtYXRjaCB0aGlzIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IE9ubHkgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgdGhhdCBoYXZlIHRoaXMgY29udGV4dC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBPbmx5IHJlbW92ZSBvbmUtdGltZSBsaXN0ZW5lcnMuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihldmVudCwgZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIHRoaXM7XG4gIGlmICghZm4pIHtcbiAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKGxpc3RlbmVycy5mbikge1xuICAgIGlmIChcbiAgICAgIGxpc3RlbmVycy5mbiA9PT0gZm4gJiZcbiAgICAgICghb25jZSB8fCBsaXN0ZW5lcnMub25jZSkgJiZcbiAgICAgICghY29udGV4dCB8fCBsaXN0ZW5lcnMuY29udGV4dCA9PT0gY29udGV4dClcbiAgICApIHtcbiAgICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGV2ZW50cyA9IFtdLCBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgbGlzdGVuZXJzW2ldLmZuICE9PSBmbiB8fFxuICAgICAgICAob25jZSAmJiAhbGlzdGVuZXJzW2ldLm9uY2UpIHx8XG4gICAgICAgIChjb250ZXh0ICYmIGxpc3RlbmVyc1tpXS5jb250ZXh0ICE9PSBjb250ZXh0KVxuICAgICAgKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKGxpc3RlbmVyc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBSZXNldCB0aGUgYXJyYXksIG9yIHJlbW92ZSBpdCBjb21wbGV0ZWx5IGlmIHdlIGhhdmUgbm8gbW9yZSBsaXN0ZW5lcnMuXG4gICAgLy9cbiAgICBpZiAoZXZlbnRzLmxlbmd0aCkgdGhpcy5fZXZlbnRzW2V2dF0gPSBldmVudHMubGVuZ3RoID09PSAxID8gZXZlbnRzWzBdIDogZXZlbnRzO1xuICAgIGVsc2UgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbGwgbGlzdGVuZXJzLCBvciB0aG9zZSBvZiB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBbZXZlbnRdIFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0O1xuXG4gIGlmIChldmVudCkge1xuICAgIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG4gICAgaWYgKHRoaXMuX2V2ZW50c1tldnRdKSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy9cbi8vIEFsaWFzIG1ldGhvZHMgbmFtZXMgYmVjYXVzZSBwZW9wbGUgcm9sbCBsaWtlIHRoYXQuXG4vL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUub247XG5cbi8vXG4vLyBFeHBvc2UgdGhlIHByZWZpeC5cbi8vXG5FdmVudEVtaXR0ZXIucHJlZml4ZWQgPSBwcmVmaXg7XG5cbi8vXG4vLyBBbGxvdyBgRXZlbnRFbWl0dGVyYCB0byBiZSBpbXBvcnRlZCBhcyBtb2R1bGUgbmFtZXNwYWNlLlxuLy9cbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbi8vXG4vLyBFeHBvc2UgdGhlIG1vZHVsZS5cbi8vXG5pZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBtb2R1bGUpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG59XG4iLCIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IChwcm9taXNlLCBvbkZpbmFsbHkpID0+IHtcblx0b25GaW5hbGx5ID0gb25GaW5hbGx5IHx8ICgoKSA9PiB7fSk7XG5cblx0cmV0dXJuIHByb21pc2UudGhlbihcblx0XHR2YWwgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG5cdFx0XHRyZXNvbHZlKG9uRmluYWxseSgpKTtcblx0XHR9KS50aGVuKCgpID0+IHZhbCksXG5cdFx0ZXJyID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuXHRcdFx0cmVzb2x2ZShvbkZpbmFsbHkoKSk7XG5cdFx0fSkudGhlbigoKSA9PiB7XG5cdFx0XHR0aHJvdyBlcnI7XG5cdFx0fSlcblx0KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHBGaW5hbGx5ID0gcmVxdWlyZSgncC1maW5hbGx5Jyk7XG5cbmNsYXNzIFRpbWVvdXRFcnJvciBleHRlbmRzIEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZSkge1xuXHRcdHN1cGVyKG1lc3NhZ2UpO1xuXHRcdHRoaXMubmFtZSA9ICdUaW1lb3V0RXJyb3InO1xuXHR9XG59XG5cbmNvbnN0IHBUaW1lb3V0ID0gKHByb21pc2UsIG1pbGxpc2Vjb25kcywgZmFsbGJhY2spID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0aWYgKHR5cGVvZiBtaWxsaXNlY29uZHMgIT09ICdudW1iZXInIHx8IG1pbGxpc2Vjb25kcyA8IDApIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBgbWlsbGlzZWNvbmRzYCB0byBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuXHR9XG5cblx0aWYgKG1pbGxpc2Vjb25kcyA9PT0gSW5maW5pdHkpIHtcblx0XHRyZXNvbHZlKHByb21pc2UpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0aWYgKHR5cGVvZiBmYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cmVzb2x2ZShmYWxsYmFjaygpKTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBtZXNzYWdlID0gdHlwZW9mIGZhbGxiYWNrID09PSAnc3RyaW5nJyA/IGZhbGxiYWNrIDogYFByb21pc2UgdGltZWQgb3V0IGFmdGVyICR7bWlsbGlzZWNvbmRzfSBtaWxsaXNlY29uZHNgO1xuXHRcdGNvbnN0IHRpbWVvdXRFcnJvciA9IGZhbGxiYWNrIGluc3RhbmNlb2YgRXJyb3IgPyBmYWxsYmFjayA6IG5ldyBUaW1lb3V0RXJyb3IobWVzc2FnZSk7XG5cblx0XHRpZiAodHlwZW9mIHByb21pc2UuY2FuY2VsID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRwcm9taXNlLmNhbmNlbCgpO1xuXHRcdH1cblxuXHRcdHJlamVjdCh0aW1lb3V0RXJyb3IpO1xuXHR9LCBtaWxsaXNlY29uZHMpO1xuXG5cdC8vIFRPRE86IFVzZSBuYXRpdmUgYGZpbmFsbHlgIGtleXdvcmQgd2hlbiB0YXJnZXRpbmcgTm9kZS5qcyAxMFxuXHRwRmluYWxseShcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlblxuXHRcdHByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpLFxuXHRcdCgpID0+IHtcblx0XHRcdGNsZWFyVGltZW91dCh0aW1lcik7XG5cdFx0fVxuXHQpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcFRpbWVvdXQ7XG4vLyBUT0RPOiBSZW1vdmUgdGhpcyBmb3IgdGhlIG5leHQgbWFqb3IgcmVsZWFzZVxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IHBUaW1lb3V0O1xuXG5tb2R1bGUuZXhwb3J0cy5UaW1lb3V0RXJyb3IgPSBUaW1lb3V0RXJyb3I7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIFBvcnQgb2YgbG93ZXJfYm91bmQgZnJvbSBodHRwczovL2VuLmNwcHJlZmVyZW5jZS5jb20vdy9jcHAvYWxnb3JpdGhtL2xvd2VyX2JvdW5kXG4vLyBVc2VkIHRvIGNvbXB1dGUgaW5zZXJ0aW9uIGluZGV4IHRvIGtlZXAgcXVldWUgc29ydGVkIGFmdGVyIGluc2VydGlvblxuZnVuY3Rpb24gbG93ZXJCb3VuZChhcnJheSwgdmFsdWUsIGNvbXBhcmF0b3IpIHtcbiAgICBsZXQgZmlyc3QgPSAwO1xuICAgIGxldCBjb3VudCA9IGFycmF5Lmxlbmd0aDtcbiAgICB3aGlsZSAoY291bnQgPiAwKSB7XG4gICAgICAgIGNvbnN0IHN0ZXAgPSAoY291bnQgLyAyKSB8IDA7XG4gICAgICAgIGxldCBpdCA9IGZpcnN0ICsgc3RlcDtcbiAgICAgICAgaWYgKGNvbXBhcmF0b3IoYXJyYXlbaXRdLCB2YWx1ZSkgPD0gMCkge1xuICAgICAgICAgICAgZmlyc3QgPSArK2l0O1xuICAgICAgICAgICAgY291bnQgLT0gc3RlcCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb3VudCA9IHN0ZXA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZpcnN0O1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gbG93ZXJCb3VuZDtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgbG93ZXJfYm91bmRfMSA9IHJlcXVpcmUoXCIuL2xvd2VyLWJvdW5kXCIpO1xuY2xhc3MgUHJpb3JpdHlRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3F1ZXVlID0gW107XG4gICAgfVxuICAgIGVucXVldWUocnVuLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgcHJpb3JpdHk6IDAgfSwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB7XG4gICAgICAgICAgICBwcmlvcml0eTogb3B0aW9ucy5wcmlvcml0eSxcbiAgICAgICAgICAgIHJ1blxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5zaXplICYmIHRoaXMuX3F1ZXVlW3RoaXMuc2l6ZSAtIDFdLnByaW9yaXR5ID49IG9wdGlvbnMucHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHRoaXMuX3F1ZXVlLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBsb3dlcl9ib3VuZF8xLmRlZmF1bHQodGhpcy5fcXVldWUsIGVsZW1lbnQsIChhLCBiKSA9PiBiLnByaW9yaXR5IC0gYS5wcmlvcml0eSk7XG4gICAgICAgIHRoaXMuX3F1ZXVlLnNwbGljZShpbmRleCwgMCwgZWxlbWVudCk7XG4gICAgfVxuICAgIGRlcXVldWUoKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLl9xdWV1ZS5zaGlmdCgpO1xuICAgICAgICByZXR1cm4gaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLnJ1bjtcbiAgICB9XG4gICAgZmlsdGVyKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXVlLmZpbHRlcigoZWxlbWVudCkgPT4gZWxlbWVudC5wcmlvcml0eSA9PT0gb3B0aW9ucy5wcmlvcml0eSkubWFwKChlbGVtZW50KSA9PiBlbGVtZW50LnJ1bik7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVldWUubGVuZ3RoO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IFByaW9yaXR5UXVldWU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoXCJldmVudGVtaXR0ZXIzXCIpO1xuY29uc3QgcF90aW1lb3V0XzEgPSByZXF1aXJlKFwicC10aW1lb3V0XCIpO1xuY29uc3QgcHJpb3JpdHlfcXVldWVfMSA9IHJlcXVpcmUoXCIuL3ByaW9yaXR5LXF1ZXVlXCIpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuY29uc3QgZW1wdHkgPSAoKSA9PiB7IH07XG5jb25zdCB0aW1lb3V0RXJyb3IgPSBuZXcgcF90aW1lb3V0XzEuVGltZW91dEVycm9yKCk7XG4vKipcblByb21pc2UgcXVldWUgd2l0aCBjb25jdXJyZW5jeSBjb250cm9sLlxuKi9cbmNsYXNzIFBRdWV1ZSBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2ludGVydmFsQ291bnQgPSAwO1xuICAgICAgICB0aGlzLl9pbnRlcnZhbEVuZCA9IDA7XG4gICAgICAgIHRoaXMuX3BlbmRpbmdDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVFbXB0eSA9IGVtcHR5O1xuICAgICAgICB0aGlzLl9yZXNvbHZlSWRsZSA9IGVtcHR5O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zXG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgY2FycnlvdmVyQ29uY3VycmVuY3lDb3VudDogZmFsc2UsIGludGVydmFsQ2FwOiBJbmZpbml0eSwgaW50ZXJ2YWw6IDAsIGNvbmN1cnJlbmN5OiBJbmZpbml0eSwgYXV0b1N0YXJ0OiB0cnVlLCBxdWV1ZUNsYXNzOiBwcmlvcml0eV9xdWV1ZV8xLmRlZmF1bHQgfSwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghKHR5cGVvZiBvcHRpb25zLmludGVydmFsQ2FwID09PSAnbnVtYmVyJyAmJiBvcHRpb25zLmludGVydmFsQ2FwID49IDEpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcXGBpbnRlcnZhbENhcFxcYCB0byBiZSBhIG51bWJlciBmcm9tIDEgYW5kIHVwLCBnb3QgXFxgJHsoX2IgPSAoX2EgPSBvcHRpb25zLmludGVydmFsQ2FwKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudG9TdHJpbmcoKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogJyd9XFxgICgke3R5cGVvZiBvcHRpb25zLmludGVydmFsQ2FwfSlgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbnRlcnZhbCA9PT0gdW5kZWZpbmVkIHx8ICEoTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMuaW50ZXJ2YWwpICYmIG9wdGlvbnMuaW50ZXJ2YWwgPj0gMCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIFxcYGludGVydmFsXFxgIHRvIGJlIGEgZmluaXRlIG51bWJlciA+PSAwLCBnb3QgXFxgJHsoX2QgPSAoX2MgPSBvcHRpb25zLmludGVydmFsKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MudG9TdHJpbmcoKSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogJyd9XFxgICgke3R5cGVvZiBvcHRpb25zLmludGVydmFsfSlgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYXJyeW92ZXJDb25jdXJyZW5jeUNvdW50ID0gb3B0aW9ucy5jYXJyeW92ZXJDb25jdXJyZW5jeUNvdW50O1xuICAgICAgICB0aGlzLl9pc0ludGVydmFsSWdub3JlZCA9IG9wdGlvbnMuaW50ZXJ2YWxDYXAgPT09IEluZmluaXR5IHx8IG9wdGlvbnMuaW50ZXJ2YWwgPT09IDA7XG4gICAgICAgIHRoaXMuX2ludGVydmFsQ2FwID0gb3B0aW9ucy5pbnRlcnZhbENhcDtcbiAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBvcHRpb25zLmludGVydmFsO1xuICAgICAgICB0aGlzLl9xdWV1ZSA9IG5ldyBvcHRpb25zLnF1ZXVlQ2xhc3MoKTtcbiAgICAgICAgdGhpcy5fcXVldWVDbGFzcyA9IG9wdGlvbnMucXVldWVDbGFzcztcbiAgICAgICAgdGhpcy5jb25jdXJyZW5jeSA9IG9wdGlvbnMuY29uY3VycmVuY3k7XG4gICAgICAgIHRoaXMuX3RpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXQ7XG4gICAgICAgIHRoaXMuX3Rocm93T25UaW1lb3V0ID0gb3B0aW9ucy50aHJvd09uVGltZW91dCA9PT0gdHJ1ZTtcbiAgICAgICAgdGhpcy5faXNQYXVzZWQgPSBvcHRpb25zLmF1dG9TdGFydCA9PT0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBfZG9lc0ludGVydmFsQWxsb3dBbm90aGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNJbnRlcnZhbElnbm9yZWQgfHwgdGhpcy5faW50ZXJ2YWxDb3VudCA8IHRoaXMuX2ludGVydmFsQ2FwO1xuICAgIH1cbiAgICBnZXQgX2RvZXNDb25jdXJyZW50QWxsb3dBbm90aGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVuZGluZ0NvdW50IDwgdGhpcy5fY29uY3VycmVuY3k7XG4gICAgfVxuICAgIF9uZXh0KCkge1xuICAgICAgICB0aGlzLl9wZW5kaW5nQ291bnQtLTtcbiAgICAgICAgdGhpcy5fdHJ5VG9TdGFydEFub3RoZXIoKTtcbiAgICAgICAgdGhpcy5lbWl0KCduZXh0Jyk7XG4gICAgfVxuICAgIF9yZXNvbHZlUHJvbWlzZXMoKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVFbXB0eSgpO1xuICAgICAgICB0aGlzLl9yZXNvbHZlRW1wdHkgPSBlbXB0eTtcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZUlkbGUoKTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVJZGxlID0gZW1wdHk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2lkbGUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfb25SZXN1bWVJbnRlcnZhbCgpIHtcbiAgICAgICAgdGhpcy5fb25JbnRlcnZhbCgpO1xuICAgICAgICB0aGlzLl9pbml0aWFsaXplSW50ZXJ2YWxJZk5lZWRlZCgpO1xuICAgICAgICB0aGlzLl90aW1lb3V0SWQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIF9pc0ludGVydmFsUGF1c2VkKCkge1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAodGhpcy5faW50ZXJ2YWxJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBkZWxheSA9IHRoaXMuX2ludGVydmFsRW5kIC0gbm93O1xuICAgICAgICAgICAgaWYgKGRlbGF5IDwgMCkge1xuICAgICAgICAgICAgICAgIC8vIEFjdCBhcyB0aGUgaW50ZXJ2YWwgd2FzIGRvbmVcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIHJlc3VtZSBpdCBoZXJlIGJlY2F1c2UgaXQgd2lsbCBiZSByZXN1bWVkIG9uIGxpbmUgMTYwXG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWxDb3VudCA9ICh0aGlzLl9jYXJyeW92ZXJDb25jdXJyZW5jeUNvdW50KSA/IHRoaXMuX3BlbmRpbmdDb3VudCA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBBY3QgYXMgdGhlIGludGVydmFsIGlzIHBlbmRpbmdcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fdGltZW91dElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblJlc3VtZUludGVydmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBfdHJ5VG9TdGFydEFub3RoZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLl9xdWV1ZS5zaXplID09PSAwKSB7XG4gICAgICAgICAgICAvLyBXZSBjYW4gY2xlYXIgdGhlIGludGVydmFsIChcInBhdXNlXCIpXG4gICAgICAgICAgICAvLyBCZWNhdXNlIHdlIGNhbiByZWRvIGl0IGxhdGVyIChcInJlc3VtZVwiKVxuICAgICAgICAgICAgaWYgKHRoaXMuX2ludGVydmFsSWQpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWxJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVQcm9taXNlcygpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5faXNQYXVzZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbkluaXRpYWxpemVJbnRlcnZhbCA9ICF0aGlzLl9pc0ludGVydmFsUGF1c2VkKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fZG9lc0ludGVydmFsQWxsb3dBbm90aGVyICYmIHRoaXMuX2RvZXNDb25jdXJyZW50QWxsb3dBbm90aGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gdGhpcy5fcXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgICAgIGlmICgham9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICBqb2IoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FuSW5pdGlhbGl6ZUludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVJbnRlcnZhbElmTmVlZGVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgX2luaXRpYWxpemVJbnRlcnZhbElmTmVlZGVkKCkge1xuICAgICAgICBpZiAodGhpcy5faXNJbnRlcnZhbElnbm9yZWQgfHwgdGhpcy5faW50ZXJ2YWxJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uSW50ZXJ2YWwoKTtcbiAgICAgICAgfSwgdGhpcy5faW50ZXJ2YWwpO1xuICAgICAgICB0aGlzLl9pbnRlcnZhbEVuZCA9IERhdGUubm93KCkgKyB0aGlzLl9pbnRlcnZhbDtcbiAgICB9XG4gICAgX29uSW50ZXJ2YWwoKSB7XG4gICAgICAgIGlmICh0aGlzLl9pbnRlcnZhbENvdW50ID09PSAwICYmIHRoaXMuX3BlbmRpbmdDb3VudCA9PT0gMCAmJiB0aGlzLl9pbnRlcnZhbElkKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsSWQpO1xuICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWxJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbnRlcnZhbENvdW50ID0gdGhpcy5fY2FycnlvdmVyQ29uY3VycmVuY3lDb3VudCA/IHRoaXMuX3BlbmRpbmdDb3VudCA6IDA7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NRdWV1ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICBFeGVjdXRlcyBhbGwgcXVldWVkIGZ1bmN0aW9ucyB1bnRpbCBpdCByZWFjaGVzIHRoZSBsaW1pdC5cbiAgICAqL1xuICAgIF9wcm9jZXNzUXVldWUoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICAgICAgICB3aGlsZSAodGhpcy5fdHJ5VG9TdGFydEFub3RoZXIoKSkgeyB9XG4gICAgfVxuICAgIGdldCBjb25jdXJyZW5jeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmN1cnJlbmN5O1xuICAgIH1cbiAgICBzZXQgY29uY3VycmVuY3kobmV3Q29uY3VycmVuY3kpIHtcbiAgICAgICAgaWYgKCEodHlwZW9mIG5ld0NvbmN1cnJlbmN5ID09PSAnbnVtYmVyJyAmJiBuZXdDb25jdXJyZW5jeSA+PSAxKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgXFxgY29uY3VycmVuY3lcXGAgdG8gYmUgYSBudW1iZXIgZnJvbSAxIGFuZCB1cCwgZ290IFxcYCR7bmV3Q29uY3VycmVuY3l9XFxgICgke3R5cGVvZiBuZXdDb25jdXJyZW5jeX0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY29uY3VycmVuY3kgPSBuZXdDb25jdXJyZW5jeTtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEFkZHMgYSBzeW5jIG9yIGFzeW5jIHRhc2sgdG8gdGhlIHF1ZXVlLiBBbHdheXMgcmV0dXJucyBhIHByb21pc2UuXG4gICAgKi9cbiAgICBhc3luYyBhZGQoZm4sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcnVuID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdDb3VudCsrO1xuICAgICAgICAgICAgICAgIHRoaXMuX2ludGVydmFsQ291bnQrKztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRpb24gPSAodGhpcy5fdGltZW91dCA9PT0gdW5kZWZpbmVkICYmIG9wdGlvbnMudGltZW91dCA9PT0gdW5kZWZpbmVkKSA/IGZuKCkgOiBwX3RpbWVvdXRfMS5kZWZhdWx0KFByb21pc2UucmVzb2x2ZShmbigpKSwgKG9wdGlvbnMudGltZW91dCA9PT0gdW5kZWZpbmVkID8gdGhpcy5fdGltZW91dCA6IG9wdGlvbnMudGltZW91dCksICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRocm93T25UaW1lb3V0ID09PSB1bmRlZmluZWQgPyB0aGlzLl90aHJvd09uVGltZW91dCA6IG9wdGlvbnMudGhyb3dPblRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QodGltZW91dEVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGF3YWl0IG9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9uZXh0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5fcXVldWUuZW5xdWV1ZShydW4sIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5fdHJ5VG9TdGFydEFub3RoZXIoKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWRkJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBTYW1lIGFzIGAuYWRkKClgLCBidXQgYWNjZXB0cyBhbiBhcnJheSBvZiBzeW5jIG9yIGFzeW5jIGZ1bmN0aW9ucy5cblxuICAgIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIGZ1bmN0aW9ucyBhcmUgcmVzb2x2ZWQuXG4gICAgKi9cbiAgICBhc3luYyBhZGRBbGwoZnVuY3Rpb25zLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChmdW5jdGlvbnMubWFwKGFzeW5jIChmdW5jdGlvbl8pID0+IHRoaXMuYWRkKGZ1bmN0aW9uXywgb3B0aW9ucykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgU3RhcnQgKG9yIHJlc3VtZSkgZXhlY3V0aW5nIGVucXVldWVkIHRhc2tzIHdpdGhpbiBjb25jdXJyZW5jeSBsaW1pdC4gTm8gbmVlZCB0byBjYWxsIHRoaXMgaWYgcXVldWUgaXMgbm90IHBhdXNlZCAodmlhIGBvcHRpb25zLmF1dG9TdGFydCA9IGZhbHNlYCBvciBieSBgLnBhdXNlKClgIG1ldGhvZC4pXG4gICAgKi9cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faXNQYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBQdXQgcXVldWUgZXhlY3V0aW9uIG9uIGhvbGQuXG4gICAgKi9cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5faXNQYXVzZWQgPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBDbGVhciB0aGUgcXVldWUuXG4gICAgKi9cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5fcXVldWUgPSBuZXcgdGhpcy5fcXVldWVDbGFzcygpO1xuICAgIH1cbiAgICAvKipcbiAgICBDYW4gYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzLiBVc2VmdWwgaWYgeW91IGZvciBleGFtcGxlIGFkZCBhZGRpdGlvbmFsIGl0ZW1zIGF0IGEgbGF0ZXIgdGltZS5cblxuICAgIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHNldHRsZXMgd2hlbiB0aGUgcXVldWUgYmVjb21lcyBlbXB0eS5cbiAgICAqL1xuICAgIGFzeW5jIG9uRW1wdHkoKSB7XG4gICAgICAgIC8vIEluc3RhbnRseSByZXNvbHZlIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eVxuICAgICAgICBpZiAodGhpcy5fcXVldWUuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nUmVzb2x2ZSA9IHRoaXMuX3Jlc29sdmVFbXB0eTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVFbXB0eSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1Jlc29sdmUoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGRpZmZlcmVuY2Ugd2l0aCBgLm9uRW1wdHlgIGlzIHRoYXQgYC5vbklkbGVgIGd1YXJhbnRlZXMgdGhhdCBhbGwgd29yayBmcm9tIHRoZSBxdWV1ZSBoYXMgZmluaXNoZWQuIGAub25FbXB0eWAgbWVyZWx5IHNpZ25hbHMgdGhhdCB0aGUgcXVldWUgaXMgZW1wdHksIGJ1dCBpdCBjb3VsZCBtZWFuIHRoYXQgc29tZSBwcm9taXNlcyBoYXZlbid0IGNvbXBsZXRlZCB5ZXQuXG5cbiAgICBAcmV0dXJucyBBIHByb21pc2UgdGhhdCBzZXR0bGVzIHdoZW4gdGhlIHF1ZXVlIGJlY29tZXMgZW1wdHksIGFuZCBhbGwgcHJvbWlzZXMgaGF2ZSBjb21wbGV0ZWQ7IGBxdWV1ZS5zaXplID09PSAwICYmIHF1ZXVlLnBlbmRpbmcgPT09IDBgLlxuICAgICovXG4gICAgYXN5bmMgb25JZGxlKCkge1xuICAgICAgICAvLyBJbnN0YW50bHkgcmVzb2x2ZSBpZiBub25lIHBlbmRpbmcgYW5kIGlmIG5vdGhpbmcgZWxzZSBpcyBxdWV1ZWRcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdDb3VudCA9PT0gMCAmJiB0aGlzLl9xdWV1ZS5zaXplID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdSZXNvbHZlID0gdGhpcy5fcmVzb2x2ZUlkbGU7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlSWRsZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1Jlc29sdmUoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgU2l6ZSBvZiB0aGUgcXVldWUuXG4gICAgKi9cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXVlLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgIFNpemUgb2YgdGhlIHF1ZXVlLCBmaWx0ZXJlZCBieSB0aGUgZ2l2ZW4gb3B0aW9ucy5cblxuICAgIEZvciBleGFtcGxlLCB0aGlzIGNhbiBiZSB1c2VkIHRvIGZpbmQgdGhlIG51bWJlciBvZiBpdGVtcyByZW1haW5pbmcgaW4gdGhlIHF1ZXVlIHdpdGggYSBzcGVjaWZpYyBwcmlvcml0eSBsZXZlbC5cbiAgICAqL1xuICAgIHNpemVCeShvcHRpb25zKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL25vLWZuLXJlZmVyZW5jZS1pbi1pdGVyYXRvclxuICAgICAgICByZXR1cm4gdGhpcy5fcXVldWUuZmlsdGVyKG9wdGlvbnMpLmxlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgTnVtYmVyIG9mIHBlbmRpbmcgcHJvbWlzZXMuXG4gICAgKi9cbiAgICBnZXQgcGVuZGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlbmRpbmdDb3VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgcXVldWUgaXMgY3VycmVudGx5IHBhdXNlZC5cbiAgICAqL1xuICAgIGdldCBpc1BhdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzUGF1c2VkO1xuICAgIH1cbiAgICBnZXQgdGltZW91dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWVvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFNldCB0aGUgdGltZW91dCBmb3IgZnV0dXJlIG9wZXJhdGlvbnMuXG4gICAgKi9cbiAgICBzZXQgdGltZW91dChtaWxsaXNlY29uZHMpIHtcbiAgICAgICAgdGhpcy5fdGltZW91dCA9IG1pbGxpc2Vjb25kcztcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBQUXVldWU7XG4iLCJpbXBvcnQgcFJldHJ5IGZyb20gXCJwLXJldHJ5XCI7XG5pbXBvcnQgUFF1ZXVlTW9kIGZyb20gXCJwLXF1ZXVlXCI7XG5jb25zdCBTVEFUVVNfTk9fUkVUUlkgPSBbXG4gICAgNDAwLFxuICAgIDQwMSxcbiAgICA0MDMsXG4gICAgNDA0LFxuICAgIDQwNSxcbiAgICA0MDYsXG4gICAgNDA3LFxuICAgIDQwOCxcbiAgICA0MDksIC8vIENvbmZsaWN0XG5dO1xuLyoqXG4gKiBBIGNsYXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFrZSBhc3luYyBjYWxscyB3aXRoIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgbWFraW5nIGNhbGxzIHRvIGFueSBraW5kIG9mIFwiZXhwZW5zaXZlXCIgZXh0ZXJuYWwgcmVzb3VyY2UsXG4gKiBiZSBpdCBiZWNhdXNlIGl0J3MgcmF0ZS1saW1pdGVkLCBzdWJqZWN0IHRvIG5ldHdvcmsgaXNzdWVzLCBldGMuXG4gKlxuICogQ29uY3VycmVudCBjYWxscyBhcmUgbGltaXRlZCBieSB0aGUgYG1heENvbmN1cnJlbmN5YCBwYXJhbWV0ZXIsIHdoaWNoIGRlZmF1bHRzXG4gKiB0byBgSW5maW5pdHlgLiBUaGlzIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgYWxsIGNhbGxzIHdpbGwgYmUgbWFkZSBpbiBwYXJhbGxlbC5cbiAqXG4gKiBSZXRyaWVzIGFyZSBsaW1pdGVkIGJ5IHRoZSBgbWF4UmV0cmllc2AgcGFyYW1ldGVyLCB3aGljaCBkZWZhdWx0cyB0byA2LiBUaGlzXG4gKiBtZWFucyB0aGF0IGJ5IGRlZmF1bHQsIGVhY2ggY2FsbCB3aWxsIGJlIHJldHJpZWQgdXAgdG8gNiB0aW1lcywgd2l0aCBhblxuICogZXhwb25lbnRpYWwgYmFja29mZiBiZXR3ZWVuIGVhY2ggYXR0ZW1wdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEFzeW5jQ2FsbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4Q29uY3VycmVuY3lcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4UmV0cmllc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJxdWV1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heENvbmN1cnJlbmN5ID0gcGFyYW1zLm1heENvbmN1cnJlbmN5ID8/IEluZmluaXR5O1xuICAgICAgICB0aGlzLm1heFJldHJpZXMgPSBwYXJhbXMubWF4UmV0cmllcyA/PyA2O1xuICAgICAgICBjb25zdCBQUXVldWUgPSBcImRlZmF1bHRcIiBpbiBQUXVldWVNb2QgPyBQUXVldWVNb2QuZGVmYXVsdCA6IFBRdWV1ZU1vZDtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBQUXVldWUoeyBjb25jdXJyZW5jeTogdGhpcy5tYXhDb25jdXJyZW5jeSB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjYWxsKGNhbGxhYmxlLCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmFkZCgoKSA9PiBwUmV0cnkoKCkgPT4gY2FsbGFibGUoLi4uYXJncykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIHtcbiAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJDYW5jZWxcIikgfHxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKFwiVGltZW91dEVycm9yXCIpIHx8XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkFib3J0RXJyb3JcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yPy5jb2RlID09PSBcIkVDT05OQUJPUlRFRFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGVycm9yPy5yZXNwb25zZT8uc3RhdHVzO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgJiYgU1RBVFVTX05PX1JFVFJZLmluY2x1ZGVzKCtzdGF0dXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXRyaWVzOiB0aGlzLm1heFJldHJpZXMsXG4gICAgICAgICAgICByYW5kb21pemU6IHRydWUsXG4gICAgICAgICAgICAvLyBJZiBuZWVkZWQgd2UgY2FuIGNoYW5nZSBzb21lIG9mIHRoZSBkZWZhdWx0cyBoZXJlLFxuICAgICAgICAgICAgLy8gYnV0IHRoZXkncmUgcXVpdGUgc2Vuc2libGUuXG4gICAgICAgIH0pLCB7IHRocm93T25UaW1lb3V0OiB0cnVlIH0pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNhbGxXaXRoT3B0aW9ucyhvcHRpb25zLCBjYWxsYWJsZSwgLi4uYXJncykge1xuICAgICAgICAvLyBOb3RlIHRoaXMgZG9lc24ndCBjYW5jZWwgdGhlIHVuZGVybHlpbmcgcmVxdWVzdCxcbiAgICAgICAgLy8gd2hlbiBhdmFpbGFibGUgcHJlZmVyIHRvIHVzZSB0aGUgc2lnbmFsIG9wdGlvbiBvZiB0aGUgdW5kZXJseWluZyBjYWxsXG4gICAgICAgIGlmIChvcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsKGNhbGxhYmxlLCAuLi5hcmdzKSxcbiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkFib3J0RXJyb3JcIikpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwoY2FsbGFibGUsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBmZXRjaCguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwoKCkgPT4gZmV0Y2goLi4uYXJncykudGhlbigocmVzKSA9PiAocmVzLm9rID8gcmVzIDogUHJvbWlzZS5yZWplY3QocmVzKSkpKTtcbiAgICB9XG59XG4iLCJ2YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiB7XG4gIF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbmV4cG9ydCB7IF9fcHVibGljRmllbGQgfTtcbiIsIid1c2Ugc3RyaWN0J1xuXG5leHBvcnRzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5leHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXlcbmV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IGZyb21CeXRlQXJyYXlcblxudmFyIGxvb2t1cCA9IFtdXG52YXIgcmV2TG9va3VwID0gW11cbnZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXlcblxudmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLydcbmZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gIGxvb2t1cFtpXSA9IGNvZGVbaV1cbiAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpXG59XG5cbi8vIFN1cHBvcnQgZGVjb2RpbmcgVVJMLXNhZmUgYmFzZTY0IHN0cmluZ3MsIGFzIE5vZGUuanMgZG9lcy5cbi8vIFNlZTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmFzZTY0I1VSTF9hcHBsaWNhdGlvbnNcbnJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MlxucmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzXG5cbmZ1bmN0aW9uIGdldExlbnMgKGI2NCkge1xuICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuXG4gIGlmIChsZW4gJSA0ID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG4gIH1cblxuICAvLyBUcmltIG9mZiBleHRyYSBieXRlcyBhZnRlciBwbGFjZWhvbGRlciBieXRlcyBhcmUgZm91bmRcbiAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vYmVhdGdhbW1pdC9iYXNlNjQtanMvaXNzdWVzLzQyXG4gIHZhciB2YWxpZExlbiA9IGI2NC5pbmRleE9mKCc9JylcbiAgaWYgKHZhbGlkTGVuID09PSAtMSkgdmFsaWRMZW4gPSBsZW5cblxuICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gdmFsaWRMZW4gPT09IGxlblxuICAgID8gMFxuICAgIDogNCAtICh2YWxpZExlbiAlIDQpXG5cbiAgcmV0dXJuIFt2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuXVxufVxuXG4vLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkge1xuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG4gIHJldHVybiAoKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0KSAtIHBsYWNlSG9sZGVyc0xlblxufVxuXG5mdW5jdGlvbiBfYnl0ZUxlbmd0aCAoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSB7XG4gIHJldHVybiAoKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0KSAtIHBsYWNlSG9sZGVyc0xlblxufVxuXG5mdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NClcbiAgdmFyIHZhbGlkTGVuID0gbGVuc1swXVxuICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gbGVuc1sxXVxuXG4gIHZhciBhcnIgPSBuZXcgQXJyKF9ieXRlTGVuZ3RoKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikpXG5cbiAgdmFyIGN1ckJ5dGUgPSAwXG5cbiAgLy8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuICB2YXIgbGVuID0gcGxhY2VIb2xkZXJzTGVuID4gMFxuICAgID8gdmFsaWRMZW4gLSA0XG4gICAgOiB2YWxpZExlblxuXG4gIHZhciBpXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfFxuICAgICAgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDIpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXBcbiAgdmFyIG91dHB1dCA9IFtdXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG4gICAgdG1wID1cbiAgICAgICgodWludDhbaV0gPDwgMTYpICYgMHhGRjAwMDApICtcbiAgICAgICgodWludDhbaSArIDFdIDw8IDgpICYgMHhGRjAwKSArXG4gICAgICAodWludDhbaSArIDJdICYgMHhGRilcbiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aFxuICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIHBhcnRzID0gW11cbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpKSlcbiAgfVxuXG4gIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDJdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl0gK1xuICAgICAgJz09J1xuICAgIClcbiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7XG4gICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgdWludDhbbGVuIC0gMV1cbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgbG9va3VwW3RtcCA+PiAxMF0gK1xuICAgICAgbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXSArXG4gICAgICBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdICtcbiAgICAgICc9J1xuICAgIClcbiAgfVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKCcnKVxufVxuIiwiaW1wb3J0IHsgX19wdWJsaWNGaWVsZCB9IGZyb20gJy4vY2h1bmstWFhQR1pIV1ouanMnO1xuaW1wb3J0IGJhc2U2NCBmcm9tICdiYXNlNjQtanMnO1xuXG4vLyBzcmMvdXRpbHMudHNcbmZ1bmN0aW9uIG5ldmVyKF8pIHtcbn1cbmZ1bmN0aW9uIGJ5dGVQYWlyTWVyZ2UocGllY2UsIHJhbmtzKSB7XG4gIGxldCBwYXJ0cyA9IEFycmF5LmZyb20oXG4gICAgeyBsZW5ndGg6IHBpZWNlLmxlbmd0aCB9LFxuICAgIChfLCBpKSA9PiAoeyBzdGFydDogaSwgZW5kOiBpICsgMSB9KVxuICApO1xuICB3aGlsZSAocGFydHMubGVuZ3RoID4gMSkge1xuICAgIGxldCBtaW5SYW5rID0gbnVsbDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgY29uc3Qgc2xpY2UgPSBwaWVjZS5zbGljZShwYXJ0c1tpXS5zdGFydCwgcGFydHNbaSArIDFdLmVuZCk7XG4gICAgICBjb25zdCByYW5rID0gcmFua3MuZ2V0KHNsaWNlLmpvaW4oXCIsXCIpKTtcbiAgICAgIGlmIChyYW5rID09IG51bGwpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgaWYgKG1pblJhbmsgPT0gbnVsbCB8fCByYW5rIDwgbWluUmFua1swXSkge1xuICAgICAgICBtaW5SYW5rID0gW3JhbmssIGldO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWluUmFuayAhPSBudWxsKSB7XG4gICAgICBjb25zdCBpID0gbWluUmFua1sxXTtcbiAgICAgIHBhcnRzW2ldID0geyBzdGFydDogcGFydHNbaV0uc3RhcnQsIGVuZDogcGFydHNbaSArIDFdLmVuZCB9O1xuICAgICAgcGFydHMuc3BsaWNlKGkgKyAxLCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJ0cztcbn1cbmZ1bmN0aW9uIGJ5dGVQYWlyRW5jb2RlKHBpZWNlLCByYW5rcykge1xuICBpZiAocGllY2UubGVuZ3RoID09PSAxKVxuICAgIHJldHVybiBbcmFua3MuZ2V0KHBpZWNlLmpvaW4oXCIsXCIpKV07XG4gIHJldHVybiBieXRlUGFpck1lcmdlKHBpZWNlLCByYW5rcykubWFwKChwKSA9PiByYW5rcy5nZXQocGllY2Uuc2xpY2UocC5zdGFydCwgcC5lbmQpLmpvaW4oXCIsXCIpKSkuZmlsdGVyKCh4KSA9PiB4ICE9IG51bGwpO1xufVxuZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvW1xcXFxeJCorPy4oKXxbXFxde31dL2csIFwiXFxcXCQmXCIpO1xufVxudmFyIF9UaWt0b2tlbiA9IGNsYXNzIHtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBzcGVjaWFsVG9rZW5zO1xuICAvKiogQGludGVybmFsICovXG4gIGludmVyc2VTcGVjaWFsVG9rZW5zO1xuICAvKiogQGludGVybmFsICovXG4gIHBhdFN0cjtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAvKiogQGludGVybmFsICovXG4gIHRleHREZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKFwidXRmLThcIik7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcmFua01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgdGV4dE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGNvbnN0cnVjdG9yKHJhbmtzLCBleHRlbmRlZFNwZWNpYWxUb2tlbnMpIHtcbiAgICB0aGlzLnBhdFN0ciA9IHJhbmtzLnBhdF9zdHI7XG4gICAgY29uc3QgdW5jb21wcmVzc2VkID0gcmFua3MuYnBlX3JhbmtzLnNwbGl0KFwiXFxuXCIpLmZpbHRlcihCb29sZWFuKS5yZWR1Y2UoKG1lbW8sIHgpID0+IHtcbiAgICAgIGNvbnN0IFtfLCBvZmZzZXRTdHIsIC4uLnRva2Vuc10gPSB4LnNwbGl0KFwiIFwiKTtcbiAgICAgIGNvbnN0IG9mZnNldCA9IE51bWJlci5wYXJzZUludChvZmZzZXRTdHIsIDEwKTtcbiAgICAgIHRva2Vucy5mb3JFYWNoKCh0b2tlbiwgaSkgPT4gbWVtb1t0b2tlbl0gPSBvZmZzZXQgKyBpKTtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH0sIHt9KTtcbiAgICBmb3IgKGNvbnN0IFt0b2tlbiwgcmFua10gb2YgT2JqZWN0LmVudHJpZXModW5jb21wcmVzc2VkKSkge1xuICAgICAgY29uc3QgYnl0ZXMgPSBiYXNlNjQudG9CeXRlQXJyYXkodG9rZW4pO1xuICAgICAgdGhpcy5yYW5rTWFwLnNldChieXRlcy5qb2luKFwiLFwiKSwgcmFuayk7XG4gICAgICB0aGlzLnRleHRNYXAuc2V0KHJhbmssIGJ5dGVzKTtcbiAgICB9XG4gICAgdGhpcy5zcGVjaWFsVG9rZW5zID0geyAuLi5yYW5rcy5zcGVjaWFsX3Rva2VucywgLi4uZXh0ZW5kZWRTcGVjaWFsVG9rZW5zIH07XG4gICAgdGhpcy5pbnZlcnNlU3BlY2lhbFRva2VucyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuc3BlY2lhbFRva2VucykucmVkdWNlKChtZW1vLCBbdGV4dCwgcmFua10pID0+IHtcbiAgICAgIG1lbW9bcmFua10gPSB0aGlzLnRleHRFbmNvZGVyLmVuY29kZSh0ZXh0KTtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH0sIHt9KTtcbiAgfVxuICBlbmNvZGUodGV4dCwgYWxsb3dlZFNwZWNpYWwgPSBbXSwgZGlzYWxsb3dlZFNwZWNpYWwgPSBcImFsbFwiKSB7XG4gICAgY29uc3QgcmVnZXhlcyA9IG5ldyBSZWdFeHAodGhpcy5wYXRTdHIsIFwidWdcIik7XG4gICAgY29uc3Qgc3BlY2lhbFJlZ2V4ID0gX1Rpa3Rva2VuLnNwZWNpYWxUb2tlblJlZ2V4KFxuICAgICAgT2JqZWN0LmtleXModGhpcy5zcGVjaWFsVG9rZW5zKVxuICAgICk7XG4gICAgY29uc3QgcmV0ID0gW107XG4gICAgY29uc3QgYWxsb3dlZFNwZWNpYWxTZXQgPSBuZXcgU2V0KFxuICAgICAgYWxsb3dlZFNwZWNpYWwgPT09IFwiYWxsXCIgPyBPYmplY3Qua2V5cyh0aGlzLnNwZWNpYWxUb2tlbnMpIDogYWxsb3dlZFNwZWNpYWxcbiAgICApO1xuICAgIGNvbnN0IGRpc2FsbG93ZWRTcGVjaWFsU2V0ID0gbmV3IFNldChcbiAgICAgIGRpc2FsbG93ZWRTcGVjaWFsID09PSBcImFsbFwiID8gT2JqZWN0LmtleXModGhpcy5zcGVjaWFsVG9rZW5zKS5maWx0ZXIoXG4gICAgICAgICh4KSA9PiAhYWxsb3dlZFNwZWNpYWxTZXQuaGFzKHgpXG4gICAgICApIDogZGlzYWxsb3dlZFNwZWNpYWxcbiAgICApO1xuICAgIGlmIChkaXNhbGxvd2VkU3BlY2lhbFNldC5zaXplID4gMCkge1xuICAgICAgY29uc3QgZGlzYWxsb3dlZFNwZWNpYWxSZWdleCA9IF9UaWt0b2tlbi5zcGVjaWFsVG9rZW5SZWdleChbXG4gICAgICAgIC4uLmRpc2FsbG93ZWRTcGVjaWFsU2V0XG4gICAgICBdKTtcbiAgICAgIGNvbnN0IHNwZWNpYWxNYXRjaCA9IHRleHQubWF0Y2goZGlzYWxsb3dlZFNwZWNpYWxSZWdleCk7XG4gICAgICBpZiAoc3BlY2lhbE1hdGNoICE9IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBUaGUgdGV4dCBjb250YWlucyBhIHNwZWNpYWwgdG9rZW4gdGhhdCBpcyBub3QgYWxsb3dlZDogJHtzcGVjaWFsTWF0Y2hbMF19YFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBsZXQgbmV4dFNwZWNpYWwgPSBudWxsO1xuICAgICAgbGV0IHN0YXJ0RmluZCA9IHN0YXJ0O1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgc3BlY2lhbFJlZ2V4Lmxhc3RJbmRleCA9IHN0YXJ0RmluZDtcbiAgICAgICAgbmV4dFNwZWNpYWwgPSBzcGVjaWFsUmVnZXguZXhlYyh0ZXh0KTtcbiAgICAgICAgaWYgKG5leHRTcGVjaWFsID09IG51bGwgfHwgYWxsb3dlZFNwZWNpYWxTZXQuaGFzKG5leHRTcGVjaWFsWzBdKSlcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgc3RhcnRGaW5kID0gbmV4dFNwZWNpYWwuaW5kZXggKyAxO1xuICAgICAgfVxuICAgICAgY29uc3QgZW5kID0gbmV4dFNwZWNpYWw/LmluZGV4ID8/IHRleHQubGVuZ3RoO1xuICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiB0ZXh0LnN1YnN0cmluZyhzdGFydCwgZW5kKS5tYXRjaEFsbChyZWdleGVzKSkge1xuICAgICAgICBjb25zdCBwaWVjZSA9IHRoaXMudGV4dEVuY29kZXIuZW5jb2RlKG1hdGNoWzBdKTtcbiAgICAgICAgY29uc3QgdG9rZW4yID0gdGhpcy5yYW5rTWFwLmdldChwaWVjZS5qb2luKFwiLFwiKSk7XG4gICAgICAgIGlmICh0b2tlbjIgIT0gbnVsbCkge1xuICAgICAgICAgIHJldC5wdXNoKHRva2VuMik7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0LnB1c2goLi4uYnl0ZVBhaXJFbmNvZGUocGllY2UsIHRoaXMucmFua01hcCkpO1xuICAgICAgfVxuICAgICAgaWYgKG5leHRTcGVjaWFsID09IG51bGwpXG4gICAgICAgIGJyZWFrO1xuICAgICAgbGV0IHRva2VuID0gdGhpcy5zcGVjaWFsVG9rZW5zW25leHRTcGVjaWFsWzBdXTtcbiAgICAgIHJldC5wdXNoKHRva2VuKTtcbiAgICAgIHN0YXJ0ID0gbmV4dFNwZWNpYWwuaW5kZXggKyBuZXh0U3BlY2lhbFswXS5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH1cbiAgZGVjb2RlKHRva2Vucykge1xuICAgIGNvbnN0IHJlcyA9IFtdO1xuICAgIGxldCBsZW5ndGggPSAwO1xuICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCB0b2tlbnMubGVuZ3RoOyArK2kyKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IHRva2Vuc1tpMl07XG4gICAgICBjb25zdCBieXRlcyA9IHRoaXMudGV4dE1hcC5nZXQodG9rZW4pID8/IHRoaXMuaW52ZXJzZVNwZWNpYWxUb2tlbnNbdG9rZW5dO1xuICAgICAgaWYgKGJ5dGVzICE9IG51bGwpIHtcbiAgICAgICAgcmVzLnB1c2goYnl0ZXMpO1xuICAgICAgICBsZW5ndGggKz0gYnl0ZXMubGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBtZXJnZWRBcnJheSA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoY29uc3QgYnl0ZXMgb2YgcmVzKSB7XG4gICAgICBtZXJnZWRBcnJheS5zZXQoYnl0ZXMsIGkpO1xuICAgICAgaSArPSBieXRlcy5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRleHREZWNvZGVyLmRlY29kZShtZXJnZWRBcnJheSk7XG4gIH1cbn07XG52YXIgVGlrdG9rZW4gPSBfVGlrdG9rZW47XG5fX3B1YmxpY0ZpZWxkKFRpa3Rva2VuLCBcInNwZWNpYWxUb2tlblJlZ2V4XCIsICh0b2tlbnMpID0+IHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAodG9rZW5zLm1hcCgoaSkgPT4gZXNjYXBlUmVnZXgoaSkpLmpvaW4oXCJ8XCIpLCBcImdcIik7XG59KTtcbmZ1bmN0aW9uIGdldEVuY29kaW5nTmFtZUZvck1vZGVsKG1vZGVsKSB7XG4gIHN3aXRjaCAobW9kZWwpIHtcbiAgICBjYXNlIFwiZ3B0MlwiOiB7XG4gICAgICByZXR1cm4gXCJncHQyXCI7XG4gICAgfVxuICAgIGNhc2UgXCJjb2RlLWN1c2htYW4tMDAxXCI6XG4gICAgY2FzZSBcImNvZGUtY3VzaG1hbi0wMDJcIjpcbiAgICBjYXNlIFwiY29kZS1kYXZpbmNpLTAwMVwiOlxuICAgIGNhc2UgXCJjb2RlLWRhdmluY2ktMDAyXCI6XG4gICAgY2FzZSBcImN1c2htYW4tY29kZXhcIjpcbiAgICBjYXNlIFwiZGF2aW5jaS1jb2RleFwiOlxuICAgIGNhc2UgXCJ0ZXh0LWRhdmluY2ktMDAyXCI6XG4gICAgY2FzZSBcInRleHQtZGF2aW5jaS0wMDNcIjoge1xuICAgICAgcmV0dXJuIFwicDUwa19iYXNlXCI7XG4gICAgfVxuICAgIGNhc2UgXCJjb2RlLWRhdmluY2ktZWRpdC0wMDFcIjpcbiAgICBjYXNlIFwidGV4dC1kYXZpbmNpLWVkaXQtMDAxXCI6IHtcbiAgICAgIHJldHVybiBcInA1MGtfZWRpdFwiO1xuICAgIH1cbiAgICBjYXNlIFwiYWRhXCI6XG4gICAgY2FzZSBcImJhYmJhZ2VcIjpcbiAgICBjYXNlIFwiY29kZS1zZWFyY2gtYWRhLWNvZGUtMDAxXCI6XG4gICAgY2FzZSBcImNvZGUtc2VhcmNoLWJhYmJhZ2UtY29kZS0wMDFcIjpcbiAgICBjYXNlIFwiY3VyaWVcIjpcbiAgICBjYXNlIFwiZGF2aW5jaVwiOlxuICAgIGNhc2UgXCJ0ZXh0LWFkYS0wMDFcIjpcbiAgICBjYXNlIFwidGV4dC1iYWJiYWdlLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LWN1cmllLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LWRhdmluY2ktMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2VhcmNoLWFkYS1kb2MtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2VhcmNoLWJhYmJhZ2UtZG9jLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LXNlYXJjaC1jdXJpZS1kb2MtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2VhcmNoLWRhdmluY2ktZG9jLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LXNpbWlsYXJpdHktYWRhLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LXNpbWlsYXJpdHktYmFiYmFnZS0wMDFcIjpcbiAgICBjYXNlIFwidGV4dC1zaW1pbGFyaXR5LWN1cmllLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LXNpbWlsYXJpdHktZGF2aW5jaS0wMDFcIjoge1xuICAgICAgcmV0dXJuIFwicjUwa19iYXNlXCI7XG4gICAgfVxuICAgIGNhc2UgXCJncHQtMy41LXR1cmJvLTAzMDFcIjpcbiAgICBjYXNlIFwiZ3B0LTMuNS10dXJib1wiOlxuICAgIGNhc2UgXCJncHQtNC0wMzE0XCI6XG4gICAgY2FzZSBcImdwdC00LTMyay0wMzE0XCI6XG4gICAgY2FzZSBcImdwdC00LTMya1wiOlxuICAgIGNhc2UgXCJncHQtNFwiOlxuICAgIGNhc2UgXCJ0ZXh0LWVtYmVkZGluZy1hZGEtMDAyXCI6IHtcbiAgICAgIHJldHVybiBcImNsMTAwa19iYXNlXCI7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG1vZGVsXCIpO1xuICB9XG59XG5cbmV4cG9ydCB7IFRpa3Rva2VuLCBnZXRFbmNvZGluZ05hbWVGb3JNb2RlbCwgbmV2ZXIgfTtcbiIsImltcG9ydCB7IFRpa3Rva2VuLCBnZXRFbmNvZGluZ05hbWVGb3JNb2RlbCwgfSBmcm9tIFwianMtdGlrdG9rZW4vbGl0ZVwiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi9hc3luY19jYWxsZXIuanNcIjtcbmNvbnN0IGNhY2hlID0ge307XG5jb25zdCBjYWxsZXIgPSAvKiAjX19QVVJFX18gKi8gbmV3IEFzeW5jQ2FsbGVyKHt9KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbmNvZGluZyhlbmNvZGluZywgb3B0aW9ucykge1xuICAgIGlmICghKGVuY29kaW5nIGluIGNhY2hlKSkge1xuICAgICAgICBjYWNoZVtlbmNvZGluZ10gPSBjYWxsZXJcbiAgICAgICAgICAgIC5mZXRjaChgaHR0cHM6Ly90aWt0b2tlbi5wYWdlcy5kZXYvanMvJHtlbmNvZGluZ30uanNvbmAsIHtcbiAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2VuY29kaW5nXTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFRpa3Rva2VuKGF3YWl0IGNhY2hlW2VuY29kaW5nXSwgb3B0aW9ucz8uZXh0ZW5kZWRTcGVjaWFsVG9rZW5zKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNvZGluZ0Zvck1vZGVsKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGdldEVuY29kaW5nKGdldEVuY29kaW5nTmFtZUZvck1vZGVsKG1vZGVsKSwgb3B0aW9ucyk7XG59XG4iLCJpbXBvcnQgeyBlbmNvZGluZ0Zvck1vZGVsIH0gZnJvbSBcIi4uL3V0aWwvdGlrdG9rZW4uanNcIjtcbi8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2pzLXRpa3Rva2VuXG5leHBvcnQgY29uc3QgZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4gPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby1cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTMuNS10dXJib1wiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNC0zMmstXCIpKSB7XG4gICAgICAgIHJldHVybiBcImdwdC00LTMya1wiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNC1cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTRcIjtcbiAgICB9XG4gICAgcmV0dXJuIG1vZGVsTmFtZTtcbn07XG5leHBvcnQgY29uc3QgZ2V0RW1iZWRkaW5nQ29udGV4dFNpemUgPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgc3dpdGNoIChtb2RlbE5hbWUpIHtcbiAgICAgICAgY2FzZSBcInRleHQtZW1iZWRkaW5nLWFkYS0wMDJcIjpcbiAgICAgICAgICAgIHJldHVybiA4MTkxO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIDIwNDY7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBnZXRNb2RlbENvbnRleHRTaXplID0gKG1vZGVsTmFtZSkgPT4ge1xuICAgIHN3aXRjaCAoZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4obW9kZWxOYW1lKSkge1xuICAgICAgICBjYXNlIFwiZ3B0LTMuNS10dXJib1wiOlxuICAgICAgICAgICAgcmV0dXJuIDQwOTY7XG4gICAgICAgIGNhc2UgXCJncHQtNC0zMmtcIjpcbiAgICAgICAgICAgIHJldHVybiAzMjc2ODtcbiAgICAgICAgY2FzZSBcImdwdC00XCI6XG4gICAgICAgICAgICByZXR1cm4gODE5MjtcbiAgICAgICAgY2FzZSBcInRleHQtZGF2aW5jaS0wMDNcIjpcbiAgICAgICAgICAgIHJldHVybiA0MDk3O1xuICAgICAgICBjYXNlIFwidGV4dC1jdXJpZS0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBjYXNlIFwidGV4dC1iYWJiYWdlLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWFkYS0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBjYXNlIFwiY29kZS1kYXZpbmNpLTAwMlwiOlxuICAgICAgICAgICAgcmV0dXJuIDgwMDA7XG4gICAgICAgIGNhc2UgXCJjb2RlLWN1c2htYW4tMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiA0MDk3O1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgY2FsY3VsYXRlTWF4VG9rZW5zID0gYXN5bmMgKHsgcHJvbXB0LCBtb2RlbE5hbWUsIH0pID0+IHtcbiAgICAvLyBmYWxsYmFjayB0byBhcHByb3hpbWF0ZSBjYWxjdWxhdGlvbiBpZiB0aWt0b2tlbiBpcyBub3QgYXZhaWxhYmxlXG4gICAgbGV0IG51bVRva2VucyA9IE1hdGguY2VpbChwcm9tcHQubGVuZ3RoIC8gNCk7XG4gICAgdHJ5IHtcbiAgICAgICAgbnVtVG9rZW5zID0gKGF3YWl0IGVuY29kaW5nRm9yTW9kZWwobW9kZWxOYW1lKSkuZW5jb2RlKHByb21wdCkubGVuZ3RoO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNhbGN1bGF0ZSBudW1iZXIgb2YgdG9rZW5zLCBmYWxsaW5nIGJhY2sgdG8gYXBwcm94aW1hdGUgY291bnRcIik7XG4gICAgfVxuICAgIGNvbnN0IG1heFRva2VucyA9IGdldE1vZGVsQ29udGV4dFNpemUobW9kZWxOYW1lKTtcbiAgICByZXR1cm4gbWF4VG9rZW5zIC0gbnVtVG9rZW5zO1xufTtcbiIsImltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4uL3V0aWwvYXN5bmNfY2FsbGVyLmpzXCI7XG5pbXBvcnQgeyBnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbiB9IGZyb20gXCIuL2NvdW50X3Rva2Vucy5qc1wiO1xuaW1wb3J0IHsgZW5jb2RpbmdGb3JNb2RlbCB9IGZyb20gXCIuLi91dGlsL3Rpa3Rva2VuLmpzXCI7XG5jb25zdCBnZXRWZXJib3NpdHkgPSAoKSA9PiBmYWxzZTtcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgbGFuZ3VhZ2UgbW9kZWxzLCBjaGFpbnMsIHRvb2xzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUxhbmdDaGFpbiB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIHByaW50IG91dCByZXNwb25zZSB0ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmVyYm9zZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52ZXJib3NlID0gcGFyYW1zLnZlcmJvc2UgPz8gZ2V0VmVyYm9zaXR5KCk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gcGFyYW1zLmNhbGxiYWNrcztcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGxhbmd1YWdlIG1vZGVscy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMYW5ndWFnZU1vZGVsIGV4dGVuZHMgQmFzZUxhbmdDaGFpbiB7XG4gICAgLyoqXG4gICAgICogS2V5cyB0aGF0IHRoZSBsYW5ndWFnZSBtb2RlbCBhY2NlcHRzIGFzIGNhbGwgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBnZXQgY2FsbEtleXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJzdG9wXCIsIFwidGltZW91dFwiLCBcInNpZ25hbFwiXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIHZlcmJvc2U6IHBhcmFtcy52ZXJib3NlLFxuICAgICAgICAgICAgY2FsbGJhY2tzOiBwYXJhbXMuY2FsbGJhY2tzID8/IHBhcmFtcy5jYWxsYmFja01hbmFnZXIsXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFzeW5jIGNhbGxlciBzaG91bGQgYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIG1ha2UgYW55IGFzeW5jIGNhbGxzLFxuICAgICAgICAgKiB3aGljaCB3aWxsIHRodXMgYmVuZWZpdCBmcm9tIHRoZSBjb25jdXJyZW5jeSBhbmQgcmV0cnkgbG9naWMuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX2VuY29kaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKHBhcmFtcyA/PyB7fSk7XG4gICAgfVxuICAgIGFzeW5jIGdldE51bVRva2Vucyh0ZXh0KSB7XG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIGFwcHJveGltYXRlIGNhbGN1bGF0aW9uIGlmIHRpa3Rva2VuIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgbGV0IG51bVRva2VucyA9IE1hdGguY2VpbCh0ZXh0Lmxlbmd0aCAvIDQpO1xuICAgICAgICBpZiAoIXRoaXMuX2VuY29kaW5nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VuY29kaW5nID0gYXdhaXQgZW5jb2RpbmdGb3JNb2RlbChcIm1vZGVsTmFtZVwiIGluIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgPyBnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbih0aGlzLm1vZGVsTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgOiBcImdwdDJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2VuY29kaW5nKSB7XG4gICAgICAgICAgICBudW1Ub2tlbnMgPSB0aGlzLl9lbmNvZGluZy5lbmNvZGUodGV4dCkubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudW1Ub2tlbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBvZiB0aGUgTExNLlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgX2lkZW50aWZ5aW5nUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGpzb24tbGlrZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoaXMgTExNLlxuICAgICAqL1xuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksXG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuICAgICAgICAgICAgX21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZCBhbiBMTE0gZnJvbSBhIGpzb24tbGlrZSBvYmplY3QgZGVzY3JpYmluZyBpdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoZGF0YSkge1xuICAgICAgICBjb25zdCB7IF90eXBlLCBfbW9kZWwsIC4uLnJlc3QgfSA9IGRhdGE7XG4gICAgICAgIGlmIChfbW9kZWwgJiYgX21vZGVsICE9PSBcImJhc2VfY2hhdF9tb2RlbFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBsb2FkIExMTSB3aXRoIG1vZGVsICR7X21vZGVsfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IENscyA9IHtcbiAgICAgICAgICAgIG9wZW5haTogKGF3YWl0IGltcG9ydChcIi4uL2NoYXRfbW9kZWxzL29wZW5haS5qc1wiKSkuQ2hhdE9wZW5BSSxcbiAgICAgICAgfVtfdHlwZV07XG4gICAgICAgIGlmIChDbHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgbG9hZCAgTExNIHdpdGggdHlwZSAke190eXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ2xzKHJlc3QpO1xuICAgIH1cbn1cbi8qXG4gKiBDYWxjdWxhdGUgbWF4IHRva2VucyBmb3IgZ2l2ZW4gbW9kZWwgYW5kIHByb21wdC5cbiAqIFRoYXQgaXMgdGhlIG1vZGVsIHNpemUgLSBudW1iZXIgb2YgdG9rZW5zIGluIHByb21wdC5cbiAqL1xuZXhwb3J0IHsgY2FsY3VsYXRlTWF4VG9rZW5zIH0gZnJvbSBcIi4vY291bnRfdG9rZW5zLmpzXCI7XG4iLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbmxldCBnZXRSYW5kb21WYWx1ZXM7XG5jb25zdCBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgLy8gbGF6eSBsb2FkIHNvIHRoYXQgZW52aXJvbm1lbnRzIHRoYXQgbmVlZCB0byBwb2x5ZmlsbCBoYXZlIGEgY2hhbmNlIHRvIGRvIHNvXG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byk7XG5cbiAgICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufSIsImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuXG5jb25zdCBieXRlVG9IZXggPSBbXTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc2xpY2UoMSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgcmV0dXJuIChieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgcmV0dXJuIHV1aWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiLCJjb25zdCByYW5kb21VVUlEID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLnJhbmRvbVVVSUQgJiYgY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pO1xuZXhwb3J0IGRlZmF1bHQge1xuICByYW5kb21VVUlEXG59OyIsImltcG9ydCBuYXRpdmUgZnJvbSAnLi9uYXRpdmUuanMnO1xuaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgeyB1bnNhZmVTdHJpbmdpZnkgfSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGlmIChuYXRpdmUucmFuZG9tVVVJRCAmJiAhYnVmICYmICFvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5hdGl2ZS5yYW5kb21VVUlEKCk7XG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgY29uc3Qgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7IC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcblxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwOyAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcblxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHJuZHNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuXG4gIHJldHVybiB1bnNhZmVTdHJpbmdpZnkocm5kcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHY0OyIsImltcG9ydCAqIGFzIHV1aWQgZnJvbSBcInV1aWRcIjtcbmNsYXNzIEJhc2VDYWxsYmFja0hhbmRsZXJNZXRob2RzQ2xhc3Mge1xufVxuZXhwb3J0IGNsYXNzIEJhc2VDYWxsYmFja0hhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyTWV0aG9kc0NsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVMTE1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVDaGFpblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUFnZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUxMTSA9IGlucHV0Lmlnbm9yZUxMTSA/PyB0aGlzLmlnbm9yZUxMTTtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlQ2hhaW4gPSBpbnB1dC5pZ25vcmVDaGFpbiA/PyB0aGlzLmlnbm9yZUNoYWluO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVBZ2VudCA9IGlucHV0Lmlnbm9yZUFnZW50ID8/IHRoaXMuaWdub3JlQWdlbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU1ldGhvZHMobWV0aG9kcykge1xuICAgICAgICBjbGFzcyBIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdXVpZC52NCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBtZXRob2RzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEhhbmRsZXIoKTtcbiAgICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IEFOU0lfQkFDS0dST1VORF9PRkZTRVQgPSAxMDtcblxuY29uc3Qgd3JhcEFuc2kyNTYgPSAob2Zmc2V0ID0gMCkgPT4gY29kZSA9PiBgXFx1MDAxQlskezM4ICsgb2Zmc2V0fTs1OyR7Y29kZX1tYDtcblxuY29uc3Qgd3JhcEFuc2kxNm0gPSAob2Zmc2V0ID0gMCkgPT4gKHJlZCwgZ3JlZW4sIGJsdWUpID0+IGBcXHUwMDFCWyR7MzggKyBvZmZzZXR9OzI7JHtyZWR9OyR7Z3JlZW59OyR7Ymx1ZX1tYDtcblxuZnVuY3Rpb24gYXNzZW1ibGVTdHlsZXMoKSB7XG5cdGNvbnN0IGNvZGVzID0gbmV3IE1hcCgpO1xuXHRjb25zdCBzdHlsZXMgPSB7XG5cdFx0bW9kaWZpZXI6IHtcblx0XHRcdHJlc2V0OiBbMCwgMF0sXG5cdFx0XHQvLyAyMSBpc24ndCB3aWRlbHkgc3VwcG9ydGVkIGFuZCAyMiBkb2VzIHRoZSBzYW1lIHRoaW5nXG5cdFx0XHRib2xkOiBbMSwgMjJdLFxuXHRcdFx0ZGltOiBbMiwgMjJdLFxuXHRcdFx0aXRhbGljOiBbMywgMjNdLFxuXHRcdFx0dW5kZXJsaW5lOiBbNCwgMjRdLFxuXHRcdFx0b3ZlcmxpbmU6IFs1MywgNTVdLFxuXHRcdFx0aW52ZXJzZTogWzcsIDI3XSxcblx0XHRcdGhpZGRlbjogWzgsIDI4XSxcblx0XHRcdHN0cmlrZXRocm91Z2g6IFs5LCAyOV1cblx0XHR9LFxuXHRcdGNvbG9yOiB7XG5cdFx0XHRibGFjazogWzMwLCAzOV0sXG5cdFx0XHRyZWQ6IFszMSwgMzldLFxuXHRcdFx0Z3JlZW46IFszMiwgMzldLFxuXHRcdFx0eWVsbG93OiBbMzMsIDM5XSxcblx0XHRcdGJsdWU6IFszNCwgMzldLFxuXHRcdFx0bWFnZW50YTogWzM1LCAzOV0sXG5cdFx0XHRjeWFuOiBbMzYsIDM5XSxcblx0XHRcdHdoaXRlOiBbMzcsIDM5XSxcblxuXHRcdFx0Ly8gQnJpZ2h0IGNvbG9yXG5cdFx0XHRibGFja0JyaWdodDogWzkwLCAzOV0sXG5cdFx0XHRyZWRCcmlnaHQ6IFs5MSwgMzldLFxuXHRcdFx0Z3JlZW5CcmlnaHQ6IFs5MiwgMzldLFxuXHRcdFx0eWVsbG93QnJpZ2h0OiBbOTMsIDM5XSxcblx0XHRcdGJsdWVCcmlnaHQ6IFs5NCwgMzldLFxuXHRcdFx0bWFnZW50YUJyaWdodDogWzk1LCAzOV0sXG5cdFx0XHRjeWFuQnJpZ2h0OiBbOTYsIDM5XSxcblx0XHRcdHdoaXRlQnJpZ2h0OiBbOTcsIDM5XVxuXHRcdH0sXG5cdFx0YmdDb2xvcjoge1xuXHRcdFx0YmdCbGFjazogWzQwLCA0OV0sXG5cdFx0XHRiZ1JlZDogWzQxLCA0OV0sXG5cdFx0XHRiZ0dyZWVuOiBbNDIsIDQ5XSxcblx0XHRcdGJnWWVsbG93OiBbNDMsIDQ5XSxcblx0XHRcdGJnQmx1ZTogWzQ0LCA0OV0sXG5cdFx0XHRiZ01hZ2VudGE6IFs0NSwgNDldLFxuXHRcdFx0YmdDeWFuOiBbNDYsIDQ5XSxcblx0XHRcdGJnV2hpdGU6IFs0NywgNDldLFxuXG5cdFx0XHQvLyBCcmlnaHQgY29sb3Jcblx0XHRcdGJnQmxhY2tCcmlnaHQ6IFsxMDAsIDQ5XSxcblx0XHRcdGJnUmVkQnJpZ2h0OiBbMTAxLCA0OV0sXG5cdFx0XHRiZ0dyZWVuQnJpZ2h0OiBbMTAyLCA0OV0sXG5cdFx0XHRiZ1llbGxvd0JyaWdodDogWzEwMywgNDldLFxuXHRcdFx0YmdCbHVlQnJpZ2h0OiBbMTA0LCA0OV0sXG5cdFx0XHRiZ01hZ2VudGFCcmlnaHQ6IFsxMDUsIDQ5XSxcblx0XHRcdGJnQ3lhbkJyaWdodDogWzEwNiwgNDldLFxuXHRcdFx0YmdXaGl0ZUJyaWdodDogWzEwNywgNDldXG5cdFx0fVxuXHR9O1xuXG5cdC8vIEFsaWFzIGJyaWdodCBibGFjayBhcyBncmF5IChhbmQgZ3JleSlcblx0c3R5bGVzLmNvbG9yLmdyYXkgPSBzdHlsZXMuY29sb3IuYmxhY2tCcmlnaHQ7XG5cdHN0eWxlcy5iZ0NvbG9yLmJnR3JheSA9IHN0eWxlcy5iZ0NvbG9yLmJnQmxhY2tCcmlnaHQ7XG5cdHN0eWxlcy5jb2xvci5ncmV5ID0gc3R5bGVzLmNvbG9yLmJsYWNrQnJpZ2h0O1xuXHRzdHlsZXMuYmdDb2xvci5iZ0dyZXkgPSBzdHlsZXMuYmdDb2xvci5iZ0JsYWNrQnJpZ2h0O1xuXG5cdGZvciAoY29uc3QgW2dyb3VwTmFtZSwgZ3JvdXBdIG9mIE9iamVjdC5lbnRyaWVzKHN0eWxlcykpIHtcblx0XHRmb3IgKGNvbnN0IFtzdHlsZU5hbWUsIHN0eWxlXSBvZiBPYmplY3QuZW50cmllcyhncm91cCkpIHtcblx0XHRcdHN0eWxlc1tzdHlsZU5hbWVdID0ge1xuXHRcdFx0XHRvcGVuOiBgXFx1MDAxQlske3N0eWxlWzBdfW1gLFxuXHRcdFx0XHRjbG9zZTogYFxcdTAwMUJbJHtzdHlsZVsxXX1tYFxuXHRcdFx0fTtcblxuXHRcdFx0Z3JvdXBbc3R5bGVOYW1lXSA9IHN0eWxlc1tzdHlsZU5hbWVdO1xuXG5cdFx0XHRjb2Rlcy5zZXQoc3R5bGVbMF0sIHN0eWxlWzFdKTtcblx0XHR9XG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoc3R5bGVzLCBncm91cE5hbWUsIHtcblx0XHRcdHZhbHVlOiBncm91cCxcblx0XHRcdGVudW1lcmFibGU6IGZhbHNlXG5cdFx0fSk7XG5cdH1cblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoc3R5bGVzLCAnY29kZXMnLCB7XG5cdFx0dmFsdWU6IGNvZGVzLFxuXHRcdGVudW1lcmFibGU6IGZhbHNlXG5cdH0pO1xuXG5cdHN0eWxlcy5jb2xvci5jbG9zZSA9ICdcXHUwMDFCWzM5bSc7XG5cdHN0eWxlcy5iZ0NvbG9yLmNsb3NlID0gJ1xcdTAwMUJbNDltJztcblxuXHRzdHlsZXMuY29sb3IuYW5zaTI1NiA9IHdyYXBBbnNpMjU2KCk7XG5cdHN0eWxlcy5jb2xvci5hbnNpMTZtID0gd3JhcEFuc2kxNm0oKTtcblx0c3R5bGVzLmJnQ29sb3IuYW5zaTI1NiA9IHdyYXBBbnNpMjU2KEFOU0lfQkFDS0dST1VORF9PRkZTRVQpO1xuXHRzdHlsZXMuYmdDb2xvci5hbnNpMTZtID0gd3JhcEFuc2kxNm0oQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7XG5cblx0Ly8gRnJvbSBodHRwczovL2dpdGh1Yi5jb20vUWl4LS9jb2xvci1jb252ZXJ0L2Jsb2IvM2YwZTBkNGU5MmUyMzU3OTZjY2IxN2Y2ZTg1YzcyMDk0YTY1MWY0OS9jb252ZXJzaW9ucy5qc1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHlsZXMsIHtcblx0XHRyZ2JUb0Fuc2kyNTY6IHtcblx0XHRcdHZhbHVlOiAocmVkLCBncmVlbiwgYmx1ZSkgPT4ge1xuXHRcdFx0XHQvLyBXZSB1c2UgdGhlIGV4dGVuZGVkIGdyZXlzY2FsZSBwYWxldHRlIGhlcmUsIHdpdGggdGhlIGV4Y2VwdGlvbiBvZlxuXHRcdFx0XHQvLyBibGFjayBhbmQgd2hpdGUuIG5vcm1hbCBwYWxldHRlIG9ubHkgaGFzIDQgZ3JleXNjYWxlIHNoYWRlcy5cblx0XHRcdFx0aWYgKHJlZCA9PT0gZ3JlZW4gJiYgZ3JlZW4gPT09IGJsdWUpIHtcblx0XHRcdFx0XHRpZiAocmVkIDwgOCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIDE2O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChyZWQgPiAyNDgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAyMzE7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgucm91bmQoKChyZWQgLSA4KSAvIDI0NykgKiAyNCkgKyAyMzI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gMTYgK1xuXHRcdFx0XHRcdCgzNiAqIE1hdGgucm91bmQocmVkIC8gMjU1ICogNSkpICtcblx0XHRcdFx0XHQoNiAqIE1hdGgucm91bmQoZ3JlZW4gLyAyNTUgKiA1KSkgK1xuXHRcdFx0XHRcdE1hdGgucm91bmQoYmx1ZSAvIDI1NSAqIDUpO1xuXHRcdFx0fSxcblx0XHRcdGVudW1lcmFibGU6IGZhbHNlXG5cdFx0fSxcblx0XHRoZXhUb1JnYjoge1xuXHRcdFx0dmFsdWU6IGhleCA9PiB7XG5cdFx0XHRcdGNvbnN0IG1hdGNoZXMgPSAvKD88Y29sb3JTdHJpbmc+W2EtZlxcZF17Nn18W2EtZlxcZF17M30pL2kuZXhlYyhoZXgudG9TdHJpbmcoMTYpKTtcblx0XHRcdFx0aWYgKCFtYXRjaGVzKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFswLCAwLCAwXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGxldCB7Y29sb3JTdHJpbmd9ID0gbWF0Y2hlcy5ncm91cHM7XG5cblx0XHRcdFx0aWYgKGNvbG9yU3RyaW5nLmxlbmd0aCA9PT0gMykge1xuXHRcdFx0XHRcdGNvbG9yU3RyaW5nID0gY29sb3JTdHJpbmcuc3BsaXQoJycpLm1hcChjaGFyYWN0ZXIgPT4gY2hhcmFjdGVyICsgY2hhcmFjdGVyKS5qb2luKCcnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGludGVnZXIgPSBOdW1iZXIucGFyc2VJbnQoY29sb3JTdHJpbmcsIDE2KTtcblxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdChpbnRlZ2VyID4+IDE2KSAmIDB4RkYsXG5cdFx0XHRcdFx0KGludGVnZXIgPj4gOCkgJiAweEZGLFxuXHRcdFx0XHRcdGludGVnZXIgJiAweEZGXG5cdFx0XHRcdF07XG5cdFx0XHR9LFxuXHRcdFx0ZW51bWVyYWJsZTogZmFsc2Vcblx0XHR9LFxuXHRcdGhleFRvQW5zaTI1Njoge1xuXHRcdFx0dmFsdWU6IGhleCA9PiBzdHlsZXMucmdiVG9BbnNpMjU2KC4uLnN0eWxlcy5oZXhUb1JnYihoZXgpKSxcblx0XHRcdGVudW1lcmFibGU6IGZhbHNlXG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG4vLyBNYWtlIHRoZSBleHBvcnQgaW1tdXRhYmxlXG5PYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCAnZXhwb3J0cycsIHtcblx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0Z2V0OiBhc3NlbWJsZVN0eWxlc1xufSk7XG4iLCJpbXBvcnQgeyBCYXNlQ2FsbGJhY2tIYW5kbGVyIH0gZnJvbSBcIi4uL2Jhc2UuanNcIjtcbmV4cG9ydCBjbGFzcyBCYXNlVHJhY2VyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bk1hcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgX2FkZENoaWxkUnVuKHBhcmVudFJ1biwgY2hpbGRSdW4pIHtcbiAgICAgICAgcGFyZW50UnVuLmNoaWxkX3J1bnMucHVzaChjaGlsZFJ1bik7XG4gICAgfVxuICAgIF9zdGFydFRyYWNlKHJ1bikge1xuICAgICAgICBpZiAocnVuLnBhcmVudF9ydW5faWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50UnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bi5wYXJlbnRfcnVuX2lkKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRDaGlsZFJ1bihwYXJlbnRSdW4sIHJ1bik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ydW5NYXAuc2V0KHJ1bi5pZCwgcnVuKTtcbiAgICB9XG4gICAgYXN5bmMgX2VuZFRyYWNlKHJ1bikge1xuICAgICAgICBjb25zdCBwYXJlbnRSdW4gPSBydW4ucGFyZW50X3J1bl9pZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucnVuTWFwLmdldChydW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgIGlmIChwYXJlbnRSdW4pIHtcbiAgICAgICAgICAgIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgPSBNYXRoLm1heChwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLCBydW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdFJ1bihydW4pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucnVuTWFwLmRlbGV0ZShydW4uaWQpO1xuICAgIH1cbiAgICBfZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpIHtcbiAgICAgICAgY29uc3QgcGFyZW50UnVuID0gcGFyZW50UnVuSWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJ1bk1hcC5nZXQocGFyZW50UnVuSWQpO1xuICAgICAgICAvLyBJZiBhIHJ1biBoYXMgbm8gcGFyZW50IHRoZW4gZXhlY3V0aW9uIG9yZGVyIGlzIDFcbiAgICAgICAgaWYgKCFwYXJlbnRSdW4pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyICsgMTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbGxtLm5hbWUsXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBsbG0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgcHJvbXB0cyB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAgICAgICAgZXh0cmE6IGV4dHJhUGFyYW1zLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYXRNb2RlbFN0YXJ0KGxsbSwgbWVzc2FnZXMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBsbG0ubmFtZSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGxsbSxcbiAgICAgICAgICAgIGlucHV0czogeyBtZXNzYWdlcyB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAgICAgICAgZXh0cmE6IGV4dHJhUGFyYW1zLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVuZChvdXRwdXQsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIExMTSBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IG91dHB1dDtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTUVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBMTE0gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTUVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCwgcGFyZW50UnVuSWQpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBjaGFpbi5uYW1lLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogY2hhaW4sXG4gICAgICAgICAgICBpbnB1dHMsXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImNoYWluXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fc3RhcnRUcmFjZShydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5TdGFydD8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRW5kKG91dHB1dHMsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhaW4gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSBvdXRwdXRzO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5FbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNoYWluIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpbkVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCwgcGFyZW50UnVuSWQpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICBzZXJpYWxpemVkOiB0b29sLFxuICAgICAgICAgICAgaW5wdXRzOiB7IGlucHV0IH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcInRvb2xcIixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sU3RhcnQ/LihydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRW5kKG91dHB1dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHRvb2wgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IHsgb3V0cHV0IH07XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInRvb2xcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdG9vbCBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEFjdGlvbihhY3Rpb24sIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFnZW50UnVuID0gcnVuO1xuICAgICAgICBhZ2VudFJ1bi5hY3Rpb25zID0gYWdlbnRSdW4uYWN0aW9ucyB8fCBbXTtcbiAgICAgICAgYWdlbnRSdW4uYWN0aW9ucy5wdXNoKGFjdGlvbik7XG4gICAgICAgIGF3YWl0IHRoaXMub25BZ2VudEFjdGlvbj8uKHJ1bik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHN0eWxlcyBmcm9tIFwiYW5zaS1zdHlsZXNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi90cmFjZXIuanNcIjtcbmZ1bmN0aW9uIHdyYXAoc3R5bGUsIHRleHQpIHtcbiAgICByZXR1cm4gYCR7c3R5bGUub3Blbn0ke3RleHR9JHtzdHlsZS5jbG9zZX1gO1xufVxuZnVuY3Rpb24gdHJ5SnNvblN0cmluZ2lmeShvYmosIGZhbGxiYWNrKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVsYXBzZWQocnVuKSB7XG4gICAgaWYgKCFydW4uZW5kX3RpbWUpXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIGNvbnN0IGVsYXBzZWQgPSBydW4uZW5kX3RpbWUgLSBydW4uc3RhcnRfdGltZTtcbiAgICBpZiAoZWxhcHNlZCA8IDEwMDApIHtcbiAgICAgICAgcmV0dXJuIGAke2VsYXBzZWR9bXNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7KGVsYXBzZWQgLyAxMDAwKS50b0ZpeGVkKDIpfXNgO1xufVxuY29uc3QgeyBjb2xvciB9ID0gc3R5bGVzO1xuZXhwb3J0IGNsYXNzIENvbnNvbGVDYWxsYmFja0hhbmRsZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJjb25zb2xlX2NhbGxiYWNrX2hhbmRsZXJcIlxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGVyc2lzdFJ1bihfcnVuKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLy8gdXRpbGl0eSBtZXRob2RzXG4gICAgZ2V0UGFyZW50cyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IFtdO1xuICAgICAgICBsZXQgY3VycmVudFJ1biA9IHJ1bjtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5ydW5NYXAuZ2V0KGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFJ1biA9IHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cbiAgICBnZXRCcmVhZGNydW1icyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IHRoaXMuZ2V0UGFyZW50cyhydW4pLnJldmVyc2UoKTtcbiAgICAgICAgY29uc3Qgc3RyaW5nID0gWy4uLnBhcmVudHMsIHJ1bl1cbiAgICAgICAgICAgIC5tYXAoKHBhcmVudCwgaSwgYXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7cGFyZW50LmV4ZWN1dGlvbl9vcmRlcn06JHtwYXJlbnQucnVuX3R5cGV9OiR7cGFyZW50Lm5hbWV9YDtcbiAgICAgICAgICAgIHJldHVybiBpID09PSBhcnIubGVuZ3RoIC0gMSA/IHdyYXAoc3R5bGVzLmJvbGQsIG5hbWUpIDogbmFtZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKFwiID4gXCIpO1xuICAgICAgICByZXR1cm4gd3JhcChjb2xvci5ncmV5LCBzdHJpbmcpO1xuICAgIH1cbiAgICAvLyBsb2dnaW5nIG1ldGhvZHNcbiAgICBvbkNoYWluU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbY2hhaW4vc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBDaGFpbiBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5pbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIG9uQ2hhaW5FbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIltjaGFpbi9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIENoYWluIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltvdXRwdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgb25DaGFpbkVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltjaGFpbi9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIENoYWluIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgb25MTE1TdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBcInByb21wdHNcIiBpbiBydW4uaW5wdXRzXG4gICAgICAgICAgICA/IHsgcHJvbXB0czogcnVuLmlucHV0cy5wcm9tcHRzLm1hcCgocCkgPT4gcC50cmltKCkpIH1cbiAgICAgICAgICAgIDogcnVuLmlucHV0cztcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbbGxtL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgTExNIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkoaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICBvbkxMTUVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2xsbS9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIExMTSBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbcmVzcG9uc2VdXCIpfWApO1xuICAgIH1cbiAgICBvbkxMTUVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltsbG0vZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBMTE0gcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICBvblRvb2xTdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIlt0b29sL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgVG9vbCBydW4gd2l0aCBpbnB1dDogXCIke3J1bi5pbnB1dHMuaW5wdXQ/LnRyaW0oKX1cImApO1xuICAgIH1cbiAgICBvblRvb2xFbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIlt0b29sL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgVG9vbCBydW4gd2l0aCBvdXRwdXQ6IFwiJHtydW4ub3V0cHV0cz8ub3V0cHV0Py50cmltKCl9XCJgKTtcbiAgICB9XG4gICAgb25Ub29sRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW3Rvb2wvZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBUb29sIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgb25BZ2VudEFjdGlvbihydW4pIHtcbiAgICAgICAgY29uc3QgYWdlbnRSdW4gPSBydW47XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ibHVlLCBcIlthZ2VudC9hY3Rpb25dXCIpfSBbJHtjcnVtYnN9XSBBZ2VudCBzZWxlY3RlZCBhY3Rpb246ICR7dHJ5SnNvblN0cmluZ2lmeShhZ2VudFJ1bi5hY3Rpb25zW2FnZW50UnVuLmFjdGlvbnMubGVuZ3RoIC0gMV0sIFwiW2FjdGlvbl1cIil9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi4vLi4vdXRpbC9hc3luY19jYWxsZXIuanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUsIGdldFJ1bnRpbWVFbnZpcm9ubWVudCwgfSBmcm9tIFwiLi4vLi4vdXRpbC9lbnYuanNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi90cmFjZXIuanNcIjtcbmV4cG9ydCBjbGFzcyBMYW5nQ2hhaW5UcmFjZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGV4YW1wbGVJZCwgc2Vzc2lvbk5hbWUsIGNhbGxlclBhcmFtcywgdGltZW91dCwgfSA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwibGFuZ2NoYWluX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbmRwb2ludFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9FTkRQT0lOVFwiKSB8fCBcImh0dHA6Ly9sb2NhbGhvc3Q6MTk4NFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoZWFkZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXNzaW9uTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVvdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDUwMDBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fQVBJX0tFWVwiKTtcbiAgICAgICAgaWYgKGFwaUtleSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJzW1wieC1hcGkta2V5XCJdID0gYXBpS2V5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2Vzc2lvbk5hbWUgPVxuICAgICAgICAgICAgc2Vzc2lvbk5hbWUgPz8gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9TRVNTSU9OXCIpO1xuICAgICAgICB0aGlzLmV4YW1wbGVJZCA9IGV4YW1wbGVJZDtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dCA/PyB0aGlzLnRpbWVvdXQ7XG4gICAgICAgIHRoaXMuY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKGNhbGxlclBhcmFtcyA/PyB7IG1heFJldHJpZXM6IDIgfSk7XG4gICAgfVxuICAgIGFzeW5jIF9jb252ZXJ0VG9DcmVhdGUocnVuLCBleGFtcGxlX2lkID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHJ1bkV4dHJhID0gcnVuLmV4dHJhID8/IHt9O1xuICAgICAgICBydW5FeHRyYS5ydW50aW1lID0gYXdhaXQgZ2V0UnVudGltZUVudmlyb25tZW50KCk7XG4gICAgICAgIGNvbnN0IHBlcnNpc3RlZFJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW4uaWQsXG4gICAgICAgICAgICBuYW1lOiBydW4ubmFtZSxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bi5zdGFydF90aW1lLFxuICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgIHJ1bl90eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAvLyBleGFtcGxlX2lkIGlzIG9ubHkgc2V0IGZvciB0aGUgcm9vdCBydW5cbiAgICAgICAgICAgIHJlZmVyZW5jZV9leGFtcGxlX2lkOiBydW4ucGFyZW50X3J1bl9pZCA/IHVuZGVmaW5lZCA6IGV4YW1wbGVfaWQsXG4gICAgICAgICAgICBleHRyYTogcnVuRXh0cmEsXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBydW4ucGFyZW50X3J1bl9pZCxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IHJ1bi5zZXJpYWxpemVkLFxuICAgICAgICAgICAgZXJyb3I6IHJ1bi5lcnJvcixcbiAgICAgICAgICAgIGlucHV0czogcnVuLmlucHV0cyxcbiAgICAgICAgICAgIG91dHB1dHM6IHJ1bi5vdXRwdXRzID8/IHt9LFxuICAgICAgICAgICAgc2Vzc2lvbl9uYW1lOiB0aGlzLnNlc3Npb25OYW1lLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwZXJzaXN0ZWRSdW47XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RSdW4oX3J1bikgeyB9XG4gICAgYXN5bmMgX3BlcnNpc3RSdW5TaW5nbGUocnVuKSB7XG4gICAgICAgIGNvbnN0IHBlcnNpc3RlZFJ1biA9IGF3YWl0IHRoaXMuX2NvbnZlcnRUb0NyZWF0ZShydW4sIHRoaXMuZXhhbXBsZUlkKTtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9ydW5zYDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGZldGNoLCBlbmRwb2ludCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBlcnNpc3RlZFJ1biksXG4gICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0KSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNvbnN1bWUgdGhlIHJlc3BvbnNlIGJvZHkgdG8gcmVsZWFzZSB0aGUgY29ubmVjdGlvblxuICAgICAgICAvLyBodHRwczovL3VuZGljaS5ub2RlanMub3JnLyMvP2lkPWdhcmJhZ2UtY29sbGVjdGlvblxuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwZXJzaXN0IHJ1bjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0gJHtib2R5fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIF91cGRhdGVSdW5TaW5nbGUocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1blVwZGF0ZSA9IHtcbiAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICBlcnJvcjogcnVuLmVycm9yLFxuICAgICAgICAgICAgb3V0cHV0czogcnVuLm91dHB1dHMsXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBydW4ucGFyZW50X3J1bl9pZCxcbiAgICAgICAgICAgIHJlZmVyZW5jZV9leGFtcGxlX2lkOiBydW4ucmVmZXJlbmNlX2V4YW1wbGVfaWQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vcnVucy8ke3J1bi5pZH1gO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoZmV0Y2gsIGVuZHBvaW50LCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJ1blVwZGF0ZSksXG4gICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy50aW1lb3V0KSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNvbnN1bWUgdGhlIHJlc3BvbnNlIGJvZHkgdG8gcmVsZWFzZSB0aGUgY29ubmVjdGlvblxuICAgICAgICAvLyBodHRwczovL3VuZGljaS5ub2RlanMub3JnLyMvP2lkPWdhcmJhZ2UtY29sbGVjdGlvblxuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgcnVuOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAke2JvZHl9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25MTE1TdGFydChydW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fcGVyc2lzdFJ1blNpbmdsZShydW4pO1xuICAgIH1cbiAgICBhc3luYyBvbkxMTUVuZChydW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlUnVuU2luZ2xlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIG9uTExNRXJyb3IocnVuKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZVJ1blNpbmdsZShydW4pO1xuICAgIH1cbiAgICBhc3luYyBvbkNoYWluU3RhcnQocnVuKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX3BlcnNpc3RSdW5TaW5nbGUocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgb25DaGFpbkVuZChydW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlUnVuU2luZ2xlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIG9uQ2hhaW5FcnJvcihydW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlUnVuU2luZ2xlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIG9uVG9vbFN0YXJ0KHJ1bikge1xuICAgICAgICBhd2FpdCB0aGlzLl9wZXJzaXN0UnVuU2luZ2xlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIG9uVG9vbEVuZChydW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlUnVuU2luZ2xlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIG9uVG9vbEVycm9yKHJ1bikge1xuICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVSdW5TaW5nbGUocnVuKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQmFzZU1lbW9yeSB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBieSBtZW1vcnkgY2xhc3NlcyB0byBzZWxlY3QgdGhlIGlucHV0IHZhbHVlXG4gKiB0byB1c2UgZm9yIHRoZSBtZW1vcnkuIElmIHRoZXJlIGlzIG9ubHkgb25lIGlucHV0IHZhbHVlLCBpdCBpcyB1c2VkLlxuICogSWYgdGhlcmUgYXJlIG11bHRpcGxlIGlucHV0IHZhbHVlcywgdGhlIGlucHV0S2V5IG11c3QgYmUgc3BlY2lmaWVkLlxuICovXG5leHBvcnQgY29uc3QgZ2V0SW5wdXRWYWx1ZSA9IChpbnB1dFZhbHVlcywgaW5wdXRLZXkpID0+IHtcbiAgICBpZiAoaW5wdXRLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXNbaW5wdXRLZXldO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoaW5wdXRWYWx1ZXMpO1xuICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXNba2V5c1swXV07XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgaW5wdXQgdmFsdWVzIGhhdmUgJHtrZXlzLmxlbmd0aH0ga2V5cywgeW91IG11c3Qgc3BlY2lmeSBhbiBpbnB1dCBrZXkgb3IgcGFzcyBvbmx5IDEga2V5IGFzIGlucHV0YCk7XG59O1xuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYnkgbWVtb3J5IGNsYXNzZXMgdG8gZ2V0IGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gKiBvZiB0aGUgY2hhdCBtZXNzYWdlIGhpc3RvcnksIGJhc2VkIG9uIHRoZSBtZXNzYWdlIGNvbnRlbnQgYW5kIHJvbGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCdWZmZXJTdHJpbmcobWVzc2FnZXMsIGh1bWFuUHJlZml4ID0gXCJIdW1hblwiLCBhaVByZWZpeCA9IFwiQUlcIikge1xuICAgIGNvbnN0IHN0cmluZ19tZXNzYWdlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgbSBvZiBtZXNzYWdlcykge1xuICAgICAgICBsZXQgcm9sZTtcbiAgICAgICAgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJodW1hblwiKSB7XG4gICAgICAgICAgICByb2xlID0gaHVtYW5QcmVmaXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImFpXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBhaVByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcIlN5c3RlbVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJnZW5lcmljXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBtLnJvbGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bnN1cHBvcnRlZCBtZXNzYWdlIHR5cGU6ICR7bX1gKTtcbiAgICAgICAgfVxuICAgICAgICBzdHJpbmdfbWVzc2FnZXMucHVzaChgJHtyb2xlfTogJHttLnRleHR9YCk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmdfbWVzc2FnZXMuam9pbihcIlxcblwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9tcHRJbnB1dEtleShpbnB1dHMsIG1lbW9yeVZhcmlhYmxlcykge1xuICAgIGNvbnN0IHByb21wdElucHV0S2V5cyA9IE9iamVjdC5rZXlzKGlucHV0cykuZmlsdGVyKChrZXkpID0+ICFtZW1vcnlWYXJpYWJsZXMuaW5jbHVkZXMoa2V5KSAmJiBrZXkgIT09IFwic3RvcFwiKTtcbiAgICBpZiAocHJvbXB0SW5wdXRLZXlzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9uZSBpbnB1dCBrZXkgZXhwZWN0ZWQsIGJ1dCBnb3QgJHtwcm9tcHRJbnB1dEtleXMubGVuZ3RofWApO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbXB0SW5wdXRLZXlzWzBdO1xufVxuIiwiaW1wb3J0IHsgZ2V0QnVmZmVyU3RyaW5nIH0gZnJvbSBcIi4uLy4uL21lbW9yeS9iYXNlLmpzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uLy4uL3V0aWwvZW52LmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vdHJhY2VyLmpzXCI7XG5leHBvcnQgY2xhc3MgTGFuZ0NoYWluVHJhY2VyVjEgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsYW5nY2hhaW5fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuZHBvaW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0VORFBPSU5UXCIpIHx8IFwiaHR0cDovL2xvY2FsaG9zdDoxOTg0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlYWRlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlc3Npb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoYXBpS2V5KSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNbXCJ4LWFwaS1rZXlcIl0gPSBhcGlLZXk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbmV3U2Vzc2lvbihzZXNzaW9uTmFtZSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uQ3JlYXRlID0ge1xuICAgICAgICAgICAgc3RhcnRfdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5hbWU6IHNlc3Npb25OYW1lLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5wZXJzaXN0U2Vzc2lvbihzZXNzaW9uQ3JlYXRlKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICAgIGFzeW5jIGxvYWRTZXNzaW9uKHNlc3Npb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vc2Vzc2lvbnM/bmFtZT0ke3Nlc3Npb25OYW1lfWA7XG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZW5kcG9pbnQpO1xuICAgIH1cbiAgICBhc3luYyBsb2FkRGVmYXVsdFNlc3Npb24oKSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vc2Vzc2lvbnM/bmFtZT1kZWZhdWx0YDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVNlc3Npb25SZXNwb25zZShlbmRwb2ludCk7XG4gICAgfVxuICAgIGFzeW5jIGNvbnZlcnRWMlJ1blRvUnVuKHJ1bikge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9uID8/IChhd2FpdCB0aGlzLmxvYWREZWZhdWx0U2Vzc2lvbigpKTtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IHJ1bi5zZXJpYWxpemVkO1xuICAgICAgICBsZXQgcnVuUmVzdWx0O1xuICAgICAgICBpZiAocnVuLnJ1bl90eXBlID09PSBcImxsbVwiKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9tcHRzID0gcnVuLmlucHV0cy5wcm9tcHRzXG4gICAgICAgICAgICAgICAgPyBydW4uaW5wdXRzLnByb21wdHNcbiAgICAgICAgICAgICAgICA6IHJ1bi5pbnB1dHMubWVzc2FnZXMubWFwKCh4KSA9PiBnZXRCdWZmZXJTdHJpbmcoeCkpO1xuICAgICAgICAgICAgY29uc3QgbGxtUnVuID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICAgICAgICBwcm9tcHRzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBydW4ub3V0cHV0cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBydW5SZXN1bHQgPSBsbG1SdW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocnVuLnJ1bl90eXBlID09PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkX3J1bnMgPSBhd2FpdCBQcm9taXNlLmFsbChydW4uY2hpbGRfcnVucy5tYXAoKGNoaWxkX3J1bikgPT4gdGhpcy5jb252ZXJ0VjJSdW5Ub1J1bihjaGlsZF9ydW4pKSk7XG4gICAgICAgICAgICBjb25zdCBjaGFpblJ1biA9IHtcbiAgICAgICAgICAgICAgICB1dWlkOiBydW4uaWQsXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZTogcnVuLnN0YXJ0X3RpbWUsXG4gICAgICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgICAgICBleGVjdXRpb25fb3JkZXI6IHJ1bi5leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBydW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWQsXG4gICAgICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb24uaWQsXG4gICAgICAgICAgICAgICAgaW5wdXRzOiBydW4uaW5wdXRzLFxuICAgICAgICAgICAgICAgIG91dHB1dHM6IHJ1bi5vdXRwdXRzLFxuICAgICAgICAgICAgICAgIGNoaWxkX2xsbV9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJsbG1cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfY2hhaW5fcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwiY2hhaW5cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfdG9vbF9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJ0b29sXCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1blJlc3VsdCA9IGNoYWluUnVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bi5ydW5fdHlwZSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkX3J1bnMgPSBhd2FpdCBQcm9taXNlLmFsbChydW4uY2hpbGRfcnVucy5tYXAoKGNoaWxkX3J1bikgPT4gdGhpcy5jb252ZXJ0VjJSdW5Ub1J1bihjaGlsZF9ydW4pKSk7XG4gICAgICAgICAgICBjb25zdCB0b29sUnVuID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICAgICAgICB0b29sX2lucHV0OiBydW4uaW5wdXRzLmlucHV0LFxuICAgICAgICAgICAgICAgIG91dHB1dDogcnVuLm91dHB1dHM/Lm91dHB1dCxcbiAgICAgICAgICAgICAgICBhY3Rpb246IEpTT04uc3RyaW5naWZ5KHNlcmlhbGl6ZWQpLFxuICAgICAgICAgICAgICAgIGNoaWxkX2xsbV9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJsbG1cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfY2hhaW5fcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwiY2hhaW5cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfdG9vbF9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJ0b29sXCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1blJlc3VsdCA9IHRvb2xSdW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcnVuIHR5cGU6ICR7cnVuLnJ1bl90eXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5SZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RSdW4ocnVuKSB7XG4gICAgICAgIGxldCBlbmRwb2ludDtcbiAgICAgICAgbGV0IHYxUnVuO1xuICAgICAgICBpZiAocnVuLnJ1bl90eXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHYxUnVuID0gYXdhaXQgdGhpcy5jb252ZXJ0VjJSdW5Ub1J1bihydW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdjFSdW4gPSBydW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYxUnVuLnR5cGUgPT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vbGxtLXJ1bnNgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHYxUnVuLnR5cGUgPT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9jaGFpbi1ydW5zYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vdG9vbC1ydW5zYDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGVuZHBvaW50LCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodjFSdW4pLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHBlcnNpc3QgcnVuOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RTZXNzaW9uKHNlc3Npb25DcmVhdGUpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9zZXNzaW9uc2A7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZXNzaW9uQ3JlYXRlKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBwZXJzaXN0IHNlc3Npb246ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LCB1c2luZyBkZWZhdWx0IHNlc3Npb24uYCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIC4uLnNlc3Npb25DcmVhdGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkuaWQsXG4gICAgICAgICAgICAuLi5zZXNzaW9uQ3JlYXRlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBfaGFuZGxlU2Vzc2lvblJlc3BvbnNlKGVuZHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCB0cmFjZXJTZXNzaW9uO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBzZXNzaW9uOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgdHJhY2VyU2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IHRyYWNlclNlc3Npb247XG4gICAgICAgICAgICByZXR1cm4gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgIGlmIChyZXNwLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdHJhY2VyU2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IHRyYWNlclNlc3Npb247XG4gICAgICAgICAgICByZXR1cm4gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBbdHJhY2VyU2Vzc2lvbl0gPSByZXNwO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSB0cmFjZXJTZXNzaW9uO1xuICAgICAgICByZXR1cm4gdHJhY2VyU2Vzc2lvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMYW5nQ2hhaW5UcmFjZXIgfSBmcm9tIFwiLi90cmFjZXJfbGFuZ2NoYWluLmpzXCI7XG5pbXBvcnQgeyBMYW5nQ2hhaW5UcmFjZXJWMSB9IGZyb20gXCIuL3RyYWNlcl9sYW5nY2hhaW5fdjEuanNcIjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUcmFjaW5nQ2FsbGJhY2tIYW5kbGVyKHNlc3Npb24pIHtcbiAgICBjb25zdCB0cmFjZXIgPSBuZXcgTGFuZ0NoYWluVHJhY2VyVjEoKTtcbiAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICBhd2FpdCB0cmFjZXIubG9hZFNlc3Npb24oc2Vzc2lvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhd2FpdCB0cmFjZXIubG9hZERlZmF1bHRTZXNzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiB0cmFjZXI7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VHJhY2luZ1YyQ2FsbGJhY2tIYW5kbGVyKCkge1xuICAgIHJldHVybiBuZXcgTGFuZ0NoYWluVHJhY2VyKCk7XG59XG4iLCJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgQmFzZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IENvbnNvbGVDYWxsYmFja0hhbmRsZXIgfSBmcm9tIFwiLi9oYW5kbGVycy9jb25zb2xlLmpzXCI7XG5pbXBvcnQgeyBnZXRUcmFjaW5nQ2FsbGJhY2tIYW5kbGVyLCBnZXRUcmFjaW5nVjJDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4vaGFuZGxlcnMvaW5pdGlhbGl6ZS5qc1wiO1xuaW1wb3J0IHsgZ2V0QnVmZmVyU3RyaW5nIH0gZnJvbSBcIi4uL21lbW9yeS9iYXNlLmpzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWwvZW52LmpzXCI7XG5leHBvcnQgY2xhc3MgQmFzZUNhbGxiYWNrTWFuYWdlciB7XG4gICAgc2V0SGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldEhhbmRsZXJzKFtoYW5kbGVyXSk7XG4gICAgfVxufVxuY2xhc3MgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHJ1bklkLCBoYW5kbGVycywgaW5oZXJpdGFibGVIYW5kbGVycywgX3BhcmVudFJ1bklkKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBydW5JZFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZUhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZUhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcGFyZW50UnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IF9wYXJlbnRSdW5JZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVGV4dCh0ZXh0KSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVGV4dD8uKHRleHQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVGV4dDogJHtlcnJ9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGFzeW5jIGhhbmRsZUxMTU5ld1Rva2VuKHRva2VuKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1OZXdUb2tlbj8uKHRva2VuLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTU5ld1Rva2VuOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRXJyb3IoZXJyKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1FcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVuZChvdXRwdXQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1FbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBnZXRDaGlsZCgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcbiAgICAgICAgbWFuYWdlci5zZXRIYW5kbGVycyh0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMpO1xuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpbkVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FbmQob3V0cHV0KSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUNoYWluRW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRBY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUFnZW50QWN0aW9uPy4oYWN0aW9uLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUFnZW50QWN0aW9uOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRFbmQoYWN0aW9uKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUFnZW50RW5kPy4oYWN0aW9uLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUFnZW50RW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBnZXRDaGlsZCgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcbiAgICAgICAgbWFuYWdlci5zZXRIYW5kbGVycyh0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMpO1xuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVycm9yKGVycikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcChhc3luYyAoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUb29sRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbEVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVG9vbEVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sRW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyIGV4dGVuZHMgQmFzZUNhbGxiYWNrTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IocGFyZW50UnVuSWQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVIYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNhbGxiYWNrX21hbmFnZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3BhcmVudFJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gW107XG4gICAgICAgIHRoaXMuX3BhcmVudFJ1bklkID0gcGFyZW50UnVuSWQ7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTVN0YXJ0KGxsbSwgcHJvbXB0cywgcnVuSWQgPSB1dWlkdjQoKSwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBleHRyYVBhcmFtcyA9IHVuZGVmaW5lZCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcChhc3luYyAoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNU3RhcnQ/LihsbG0sIHByb21wdHMsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQgPSB1dWlkdjQoKSwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBleHRyYVBhcmFtcyA9IHVuZGVmaW5lZCkge1xuICAgICAgICBsZXQgbWVzc2FnZVN0cmluZ3M7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIuaGFuZGxlQ2hhdE1vZGVsU3RhcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYXRNb2RlbFN0YXJ0Py4obGxtLCBtZXNzYWdlcywgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhbmRsZXIuaGFuZGxlTExNU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VTdHJpbmdzID0gbWVzc2FnZXMubWFwKCh4KSA9PiBnZXRCdWZmZXJTdHJpbmcoeCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1TdGFydD8uKGxsbSwgbWVzc2FnZVN0cmluZ3MsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTVN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkID0gdXVpZHY0KCkpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5TdGFydD8uKGNoYWluLCBpbnB1dHMsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUNoYWluU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCA9IHV1aWR2NCgpKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xTdGFydD8uKHRvb2wsIGlucHV0LCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvclRvb2xSdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUhhbmRsZXIoaGFuZGxlcikge1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5maWx0ZXIoKF9oYW5kbGVyKSA9PiBfaGFuZGxlciAhPT0gaGFuZGxlcik7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyA9IHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5maWx0ZXIoKF9oYW5kbGVyKSA9PiBfaGFuZGxlciAhPT0gaGFuZGxlcik7XG4gICAgfVxuICAgIHNldEhhbmRsZXJzKGhhbmRsZXJzLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5KGFkZGl0aW9uYWxIYW5kbGVycyA9IFtdLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5pbmNsdWRlcyhoYW5kbGVyKTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGFkZGl0aW9uYWxIYW5kbGVycykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBjb3BpZXMgb2YgY29uc29sZV9jYWxsYmFja19oYW5kbGVyXG4gICAgICAgICAgICBtYW5hZ2VyLmhhbmRsZXJzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaCkgPT4gaC5uYW1lID09PSBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiKVxuICAgICAgICAgICAgICAgIC5zb21lKChoKSA9PiBoLm5hbWUgPT09IGhhbmRsZXIubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21IYW5kbGVycyhoYW5kbGVycykge1xuICAgICAgICBjbGFzcyBIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdXVpZHY0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGhhbmRsZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IHRoaXMoKTtcbiAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKG5ldyBIYW5kbGVyKCkpO1xuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGNvbmZpZ3VyZShpbmhlcml0YWJsZUhhbmRsZXJzLCBsb2NhbEhhbmRsZXJzLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBjYWxsYmFja01hbmFnZXI7XG4gICAgICAgIGlmIChpbmhlcml0YWJsZUhhbmRsZXJzIHx8IGxvY2FsSGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGluaGVyaXRhYmxlSGFuZGxlcnMpIHx8ICFpbmhlcml0YWJsZUhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcigpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5zZXRIYW5kbGVycyhpbmhlcml0YWJsZUhhbmRsZXJzPy5tYXAoZW5zdXJlSGFuZGxlcikgPz8gW10sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gaW5oZXJpdGFibGVIYW5kbGVycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IGNhbGxiYWNrTWFuYWdlci5jb3B5KEFycmF5LmlzQXJyYXkobG9jYWxIYW5kbGVycylcbiAgICAgICAgICAgICAgICA/IGxvY2FsSGFuZGxlcnMubWFwKGVuc3VyZUhhbmRsZXIpXG4gICAgICAgICAgICAgICAgOiBsb2NhbEhhbmRsZXJzPy5oYW5kbGVycywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZlcmJvc2VFbmFibGVkID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9WRVJCT1NFXCIpIHx8IG9wdGlvbnM/LnZlcmJvc2U7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdWMkVuYWJsZWQgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1RSQUNJTkdfVjJcIikgPz8gZmFsc2U7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdFbmFibGVkID0gdHJhY2luZ1YyRW5hYmxlZCB8fFxuICAgICAgICAgICAgKGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVFJBQ0lOR1wiKSA/PyBmYWxzZSk7XG4gICAgICAgIGlmICh2ZXJib3NlRW5hYmxlZCB8fCB0cmFjaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKCFjYWxsYmFja01hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmVyYm9zZUVuYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhY2FsbGJhY2tNYW5hZ2VyLmhhbmRsZXJzLnNvbWUoKGhhbmRsZXIpID0+IGhhbmRsZXIubmFtZSA9PT0gQ29uc29sZUNhbGxiYWNrSGFuZGxlci5wcm90b3R5cGUubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25zb2xlSGFuZGxlciA9IG5ldyBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZEhhbmRsZXIoY29uc29sZUhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYWNpbmdFbmFibGVkICYmXG4gICAgICAgICAgICAgICAgIWNhbGxiYWNrTWFuYWdlci5oYW5kbGVycy5zb21lKChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibGFuZ2NoYWluX3RyYWNlclwiKSkge1xuICAgICAgICAgICAgICAgIGlmICh0cmFjaW5nVjJFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRIYW5kbGVyKGF3YWl0IGdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlcigpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1NFU1NJT05cIik7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRIYW5kbGVyKGF3YWl0IGdldFRyYWNpbmdDYWxsYmFja0hhbmRsZXIoc2Vzc2lvbiksIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2tNYW5hZ2VyO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVuc3VyZUhhbmRsZXIoaGFuZGxlcikge1xuICAgIGlmIChcIm5hbWVcIiBpbiBoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVyO1xuICAgIH1cbiAgICByZXR1cm4gQmFzZUNhbGxiYWNrSGFuZGxlci5mcm9tTWV0aG9kcyhoYW5kbGVyKTtcbn1cbiIsImltcG9ydCB7IEluTWVtb3J5Q2FjaGUgfSBmcm9tIFwiLi4vY2FjaGUvaW5kZXguanNcIjtcbmltcG9ydCB7IEFJQ2hhdE1lc3NhZ2UsIFJVTl9LRVksIH0gZnJvbSBcIi4uL3NjaGVtYS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQmFzZUxhbmd1YWdlTW9kZWwsIH0gZnJvbSBcIi4uL2Jhc2VfbGFuZ3VhZ2UvaW5kZXguanNcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuLi9tZW1vcnkvYmFzZS5qc1wiO1xuLyoqXG4gKiBMTE0gV3JhcHBlci4gUHJvdmlkZXMgYW4ge0BsaW5rIGNhbGx9IChhbiB7QGxpbmsgZ2VuZXJhdGV9KSBmdW5jdGlvbiB0aGF0IHRha2VzIGluIGEgcHJvbXB0IChvciBwcm9tcHRzKSBhbmQgcmV0dXJucyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMTE0gZXh0ZW5kcyBCYXNlTGFuZ3VhZ2VNb2RlbCB7XG4gICAgY29uc3RydWN0b3IoeyBjYWNoZSwgY29uY3VycmVuY3ksIC4uLnJlc3QgfSkge1xuICAgICAgICBzdXBlcihjb25jdXJyZW5jeSA/IHsgbWF4Q29uY3VycmVuY3k6IGNvbmN1cnJlbmN5LCAuLi5yZXN0IH0gOiByZXN0KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FjaGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWNoZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gSW5NZW1vcnlDYWNoZS5nbG9iYWwoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZ2VuZXJhdGVQcm9tcHQocHJvbXB0VmFsdWVzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0cyA9IHByb21wdFZhbHVlcy5tYXAoKHByb21wdFZhbHVlKSA9PiBwcm9tcHRWYWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwYXJhbWV0ZXJzIHVzZWQgdG8gaW52b2tlIHRoZSBtb2RlbFxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaW52b2NhdGlvblBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIF9nZW5lcmF0ZVVuY2FjaGVkKHByb21wdHMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShjYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgY29uc3QgaW52b2NhdGlvblBhcmFtcyA9IHsgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMoKSB9O1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlTExNU3RhcnQoeyBuYW1lOiB0aGlzLl9sbG1UeXBlKCkgfSwgcHJvbXB0cywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGludm9jYXRpb25QYXJhbXMpO1xuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQob3V0cHV0KTtcbiAgICAgICAgLy8gVGhpcyBkZWZpbmVzIFJVTl9LRVkgYXMgYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBvbiB0aGUgb3V0cHV0IG9iamVjdFxuICAgICAgICAvLyBzbyB0aGF0IGl0IGlzIG5vdCBzZXJpYWxpemVkIHdoZW4gdGhlIG91dHB1dCBpcyBzdHJpbmdpZmllZCwgYW5kIHNvIHRoYXRcbiAgICAgICAgLy8gaXQgaXNudCBpbmNsdWRlZCB3aGVuIGxpc3RpbmcgdGhlIGtleXMgb2YgdGhlIG91dHB1dCBvYmplY3QuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdXRwdXQsIFJVTl9LRVksIHtcbiAgICAgICAgICAgIHZhbHVlOiBydW5NYW5hZ2VyID8geyBydW5JZDogcnVuTWFuYWdlcj8ucnVuSWQgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJ1biB0aGUgTExNIG9uIHRoZSBnaXZlbiBwcm9wbXRzIGFuIGlucHV0LCBoYW5kbGluZyBjYWNoaW5nLlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlKHByb21wdHMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocHJvbXB0cykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFyZ3VtZW50ICdwcm9tcHRzJyBpcyBleHBlY3RlZCB0byBiZSBhIHN0cmluZ1tdXCIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwYXJzZWRPcHRpb25zO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICAgICAgcGFyc2VkT3B0aW9ucyA9IHsgc3RvcDogb3B0aW9ucyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnM/LnRpbWVvdXQgJiYgIW9wdGlvbnMuc2lnbmFsKSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KG9wdGlvbnMudGltZW91dCksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VkT3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNhY2hlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2VuZXJhdGVVbmNhY2hlZChwcm9tcHRzLCBwYXJzZWRPcHRpb25zLCBjYWxsYmFja3MpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgY2FjaGUgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuc2VyaWFsaXplKCk7XG4gICAgICAgIHBhcmFtcy5zdG9wID0gcGFyc2VkT3B0aW9ucy5zdG9wID8/IHBhcmFtcy5zdG9wO1xuICAgICAgICBjb25zdCBsbG1TdHJpbmdLZXkgPSBgJHtPYmplY3QuZW50cmllcyhwYXJhbXMpLnNvcnQoKX1gO1xuICAgICAgICBjb25zdCBtaXNzaW5nUHJvbXB0SW5kaWNlcyA9IFtdO1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21wdHMubWFwKGFzeW5jIChwcm9tcHQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWNoZS5sb29rdXAocHJvbXB0LCBsbG1TdHJpbmdLZXkpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nUHJvbXB0SW5kaWNlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IGxsbU91dHB1dCA9IHt9O1xuICAgICAgICBpZiAobWlzc2luZ1Byb21wdEluZGljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuX2dlbmVyYXRlVW5jYWNoZWQobWlzc2luZ1Byb21wdEluZGljZXMubWFwKChpKSA9PiBwcm9tcHRzW2ldKSwgcGFyc2VkT3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlc3VsdHMuZ2VuZXJhdGlvbnMubWFwKGFzeW5jIChnZW5lcmF0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdEluZGV4ID0gbWlzc2luZ1Byb21wdEluZGljZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zW3Byb21wdEluZGV4XSA9IGdlbmVyYXRpb247XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnVwZGF0ZShwcm9tcHRzW3Byb21wdEluZGV4XSwgbGxtU3RyaW5nS2V5LCBnZW5lcmF0aW9uKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGxsbU91dHB1dCA9IHJlc3VsdHMubGxtT3V0cHV0ID8/IHt9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGdlbmVyYXRpb25zLCBsbG1PdXRwdXQgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVuaWVuY2Ugd3JhcHBlciBmb3Ige0BsaW5rIGdlbmVyYXRlfSB0aGF0IHRha2VzIGluIGEgc2luZ2xlIHN0cmluZyBwcm9tcHQgYW5kIHJldHVybnMgYSBzaW5nbGUgc3RyaW5nIG91dHB1dC5cbiAgICAgKi9cbiAgICBhc3luYyBjYWxsKHByb21wdCwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHsgZ2VuZXJhdGlvbnMgfSA9IGF3YWl0IHRoaXMuZ2VuZXJhdGUoW3Byb21wdF0sIG9wdGlvbnMgPz8ge30sIGNhbGxiYWNrcyk7XG4gICAgICAgIHJldHVybiBnZW5lcmF0aW9uc1swXVswXS50ZXh0O1xuICAgIH1cbiAgICBhc3luYyBwcmVkaWN0KHRleHQsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKHRleHQsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIGFzeW5jIHByZWRpY3RNZXNzYWdlcyhtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBnZXRCdWZmZXJTdHJpbmcobWVzc2FnZXMpO1xuICAgICAgICBjb25zdCBwcmVkaWN0aW9uID0gYXdhaXQgdGhpcy5jYWxsKHRleHQsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgICAgIHJldHVybiBuZXcgQUlDaGF0TWVzc2FnZShwcmVkaWN0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpZGVudGlmeWluZyBwYXJhbWV0ZXJzIG9mIHRoZSBMTE0uXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBfaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEganNvbi1saWtlIG9iamVjdCByZXByZXNlbnRpbmcgdGhpcyBMTE0uXG4gICAgICovXG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4udGhpcy5faWRlbnRpZnlpbmdQYXJhbXMoKSxcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9sbG1UeXBlKCksXG4gICAgICAgICAgICBfbW9kZWw6IHRoaXMuX21vZGVsVHlwZSgpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfbW9kZWxUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJiYXNlX2xsbVwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkIGFuIExMTSBmcm9tIGEganNvbi1saWtlIG9iamVjdCBkZXNjcmliaW5nIGl0LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShkYXRhKSB7XG4gICAgICAgIGNvbnN0IHsgX3R5cGUsIF9tb2RlbCwgLi4ucmVzdCB9ID0gZGF0YTtcbiAgICAgICAgaWYgKF9tb2RlbCAmJiBfbW9kZWwgIT09IFwiYmFzZV9sbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgbG9hZCBMTE0gd2l0aCBtb2RlbCAke19tb2RlbH1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBDbHMgPSB7XG4gICAgICAgICAgICBvcGVuYWk6IChhd2FpdCBpbXBvcnQoXCIuL29wZW5haS5qc1wiKSkuT3BlbkFJLFxuICAgICAgICB9W190eXBlXTtcbiAgICAgICAgaWYgKENscyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBsb2FkICBMTE0gd2l0aCB0eXBlICR7X3R5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDbHMocmVzdCk7XG4gICAgfVxufVxuLyoqXG4gKiBMTE0gY2xhc3MgdGhhdCBwcm92aWRlcyBhIHNpbXBsZXIgaW50ZXJmYWNlIHRvIHN1YmNsYXNzIHRoYW4ge0BsaW5rIEJhc2VMTE19LlxuICpcbiAqIFJlcXVpcmVzIG9ubHkgaW1wbGVtZW50aW5nIGEgc2ltcGxlciB7QGxpbmsgX2NhbGx9IG1ldGhvZCBpbnN0ZWFkIG9mIHtAbGluayBfZ2VuZXJhdGV9LlxuICpcbiAqIEBhdWdtZW50cyBCYXNlTExNXG4gKi9cbmV4cG9ydCBjbGFzcyBMTE0gZXh0ZW5kcyBCYXNlTExNIHtcbiAgICBhc3luYyBfZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21wdHMubWFwKChwcm9tcHQpID0+IHRoaXMuX2NhbGwocHJvbXB0LCBvcHRpb25zLCBydW5NYW5hZ2VyKS50aGVuKCh0ZXh0KSA9PiBbeyB0ZXh0IH1dKSkpO1xuICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucyB9O1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBwcm9tcHRMYXllclRyYWNrUmVxdWVzdCA9IGFzeW5jIChjYWxsZXJGdW5jLCBmdW5jdGlvbk5hbWUsIHByb21wdCwga3dhcmdzLCBwbFRhZ3MsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnJlcXVlc3RSZXNwb25zZSwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhcGlLZXkpID0+IHtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWFnbml2T3JnL3Byb21wdGxheWVyLWpzLWhlbHBlclxuICAgIGNvbnN0IHByb21wdExheWVyUmVzcCA9IGF3YWl0IGNhbGxlckZ1bmMuY2FsbChmZXRjaCwgXCJodHRwczovL2FwaS5wcm9tcHRsYXllci5jb20vdHJhY2stcmVxdWVzdFwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZnVuY3Rpb25fbmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgcHJvdmlkZXI6IFwibGFuZ2NoYWluXCIsXG4gICAgICAgICAgICBhcmdzOiBwcm9tcHQsXG4gICAgICAgICAgICBrd2FyZ3MsXG4gICAgICAgICAgICB0YWdzOiBwbFRhZ3MsXG4gICAgICAgICAgICByZXF1ZXN0X3Jlc3BvbnNlOiByZXF1ZXN0UmVzcG9uc2UsXG4gICAgICAgICAgICByZXF1ZXN0X3N0YXJ0X3RpbWU6IE1hdGguZmxvb3Ioc3RhcnRUaW1lIC8gMTAwMCksXG4gICAgICAgICAgICByZXF1ZXN0X2VuZF90aW1lOiBNYXRoLmZsb29yKGVuZFRpbWUgLyAxMDAwKSxcbiAgICAgICAgICAgIGFwaV9rZXk6IGFwaUtleSxcbiAgICAgICAgfSksXG4gICAgfSk7XG4gICAgcmV0dXJuIHByb21wdExheWVyUmVzcC5qc29uKCk7XG59O1xuIiwiaW1wb3J0IHsgQ29uZmlndXJhdGlvbiwgT3BlbkFJQXBpLCB9IGZyb20gXCJvcGVuYWlcIjtcbmltcG9ydCB7IGlzTm9kZSwgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlsL2Vudi5qc1wiO1xuaW1wb3J0IGZldGNoQWRhcHRlciBmcm9tIFwiLi4vdXRpbC9heGlvcy1mZXRjaC1hZGFwdGVyLmpzXCI7XG5pbXBvcnQgeyBMTE0gfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRMYXllclRyYWNrUmVxdWVzdCB9IGZyb20gXCIuLi91dGlsL3Byb21wdC1sYXllci5qc1wiO1xuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBPcGVuQUkgbGFyZ2UgbGFuZ3VhZ2UgbW9kZWxzIHRoYXQgdXNlIHRoZSBDaGF0IGVuZHBvaW50LlxuICpcbiAqIFRvIHVzZSB5b3Ugc2hvdWxkIGhhdmUgdGhlIGBvcGVuYWlgIHBhY2thZ2UgaW5zdGFsbGVkLCB3aXRoIHRoZVxuICogYE9QRU5BSV9BUElfS0VZYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBzZXQuXG4gKlxuICogVG8gdXNlIHdpdGggQXp1cmUgeW91IHNob3VsZCBoYXZlIHRoZSBgb3BlbmFpYCBwYWNrYWdlIGluc3RhbGxlZCwgd2l0aCB0aGVcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0tFWWAsXG4gKiBgQVpVUkVfT1BFTkFJX0FQSV9JTlNUQU5DRV9OQU1FYCxcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0RFUExPWU1FTlRfTkFNRWBcbiAqIGFuZCBgQVpVUkVfT1BFTkFJX0FQSV9WRVJTSU9OYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBzZXQuXG4gKlxuICogQHJlbWFya3NcbiAqIEFueSBwYXJhbWV0ZXJzIHRoYXQgYXJlIHZhbGlkIHRvIGJlIHBhc3NlZCB0byB7QGxpbmtcbiAqIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvY2hhdC9jcmVhdGUgfFxuICogYG9wZW5haS5jcmVhdGVDb21wbGV0aW9uYH0gY2FuIGJlIHBhc3NlZCB0aHJvdWdoIHtAbGluayBtb2RlbEt3YXJnc30sIGV2ZW5cbiAqIGlmIG5vdCBleHBsaWNpdGx5IGF2YWlsYWJsZSBvbiB0aGlzIGNsYXNzLlxuICpcbiAqIEBhdWdtZW50cyBCYXNlTExNXG4gKiBAYXVnbWVudHMgT3BlbkFJSW5wdXRcbiAqIEBhdWdtZW50cyBBenVyZU9wZW5BSUNoYXRJbnB1dFxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJQ2hhdCBleHRlbmRzIExMTSB7XG4gICAgZ2V0IGNhbGxLZXlzKCkge1xuICAgICAgICByZXR1cm4gW1wic3RvcFwiLCBcInNpZ25hbFwiLCBcInRpbWVvdXRcIiwgXCJvcHRpb25zXCJdO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgc3VwZXIoZmllbGRzID8/IHt9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGVtcGVyYXR1cmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvcFBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZyZXF1ZW5jeVBlbmFsdHlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByZXNlbmNlUGVuYWx0eVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibG9naXRCaWFzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heFRva2Vuc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiZ3B0LTMuNS10dXJib1wiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcmVmaXhNZXNzYWdlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbEt3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0aW1lb3V0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0b3BcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlWZXJzaW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudENvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBmaWVsZHM/Lm9wZW5BSUFwaUtleSA/PyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiT1BFTkFJX0FQSV9LRVlcIik7XG4gICAgICAgIGNvbnN0IGF6dXJlQXBpS2V5ID0gZmllbGRzPy5henVyZU9wZW5BSUFwaUtleSA/P1xuICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoIWF6dXJlQXBpS2V5ICYmICFhcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIihBenVyZSkgT3BlbkFJIEFQSSBrZXkgbm90IGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF6dXJlQXBpSW5zdGFuY2VOYW1lID0gZmllbGRzPy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSA/P1xuICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfSU5TVEFOQ0VfTkFNRVwiKTtcbiAgICAgICAgY29uc3QgYXp1cmVBcGlEZXBsb3ltZW50TmFtZSA9IGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSA/P1xuICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfREVQTE9ZTUVOVF9OQU1FXCIpO1xuICAgICAgICBjb25zdCBhenVyZUFwaVZlcnNpb24gPSBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpVmVyc2lvbiA/P1xuICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfVkVSU0lPTlwiKTtcbiAgICAgICAgdGhpcy5tb2RlbE5hbWUgPSBmaWVsZHM/Lm1vZGVsTmFtZSA/PyB0aGlzLm1vZGVsTmFtZTtcbiAgICAgICAgdGhpcy5wcmVmaXhNZXNzYWdlcyA9IGZpZWxkcz8ucHJlZml4TWVzc2FnZXMgPz8gdGhpcy5wcmVmaXhNZXNzYWdlcztcbiAgICAgICAgdGhpcy5tb2RlbEt3YXJncyA9IGZpZWxkcz8ubW9kZWxLd2FyZ3MgPz8ge307XG4gICAgICAgIHRoaXMudGltZW91dCA9IGZpZWxkcz8udGltZW91dDtcbiAgICAgICAgdGhpcy50ZW1wZXJhdHVyZSA9IGZpZWxkcz8udGVtcGVyYXR1cmUgPz8gdGhpcy50ZW1wZXJhdHVyZTtcbiAgICAgICAgdGhpcy50b3BQID0gZmllbGRzPy50b3BQID8/IHRoaXMudG9wUDtcbiAgICAgICAgdGhpcy5mcmVxdWVuY3lQZW5hbHR5ID0gZmllbGRzPy5mcmVxdWVuY3lQZW5hbHR5ID8/IHRoaXMuZnJlcXVlbmN5UGVuYWx0eTtcbiAgICAgICAgdGhpcy5wcmVzZW5jZVBlbmFsdHkgPSBmaWVsZHM/LnByZXNlbmNlUGVuYWx0eSA/PyB0aGlzLnByZXNlbmNlUGVuYWx0eTtcbiAgICAgICAgdGhpcy5uID0gZmllbGRzPy5uID8/IHRoaXMubjtcbiAgICAgICAgdGhpcy5sb2dpdEJpYXMgPSBmaWVsZHM/LmxvZ2l0QmlhcztcbiAgICAgICAgdGhpcy5tYXhUb2tlbnMgPSBmaWVsZHM/Lm1heFRva2VucztcbiAgICAgICAgdGhpcy5zdG9wID0gZmllbGRzPy5zdG9wO1xuICAgICAgICB0aGlzLnN0cmVhbWluZyA9IGZpZWxkcz8uc3RyZWFtaW5nID8/IGZhbHNlO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbiA9IGF6dXJlQXBpVmVyc2lvbjtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaUtleSA9IGF6dXJlQXBpS2V5O1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lID0gYXp1cmVBcGlJbnN0YW5jZU5hbWU7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSA9IGF6dXJlQXBpRGVwbG95bWVudE5hbWU7XG4gICAgICAgIGlmICh0aGlzLnN0cmVhbWluZyAmJiB0aGlzLm4gPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc3RyZWFtIHJlc3VsdHMgd2hlbiBuID4gMVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5henVyZU9wZW5BSUFwaUtleSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSBpbnN0YW5jZSBuYW1lIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSBkZXBsb3ltZW50IG5hbWUgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgdmVyc2lvbiBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnRDb25maWcgPSB7XG4gICAgICAgICAgICBhcGlLZXksXG4gICAgICAgICAgICAuLi5jb25maWd1cmF0aW9uLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBpbnZva2UgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaW52b2NhdGlvblBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgdG9wX3A6IHRoaXMudG9wUCxcbiAgICAgICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiB0aGlzLmZyZXF1ZW5jeVBlbmFsdHksXG4gICAgICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiB0aGlzLnByZXNlbmNlUGVuYWx0eSxcbiAgICAgICAgICAgIG46IHRoaXMubixcbiAgICAgICAgICAgIGxvZ2l0X2JpYXM6IHRoaXMubG9naXRCaWFzLFxuICAgICAgICAgICAgbWF4X3Rva2VuczogdGhpcy5tYXhUb2tlbnMgPT09IC0xID8gdW5kZWZpbmVkIDogdGhpcy5tYXhUb2tlbnMsXG4gICAgICAgICAgICBzdG9wOiB0aGlzLnN0b3AsXG4gICAgICAgICAgICBzdHJlYW06IHRoaXMuc3RyZWFtaW5nLFxuICAgICAgICAgICAgLi4udGhpcy5tb2RlbEt3YXJncyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBfaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbF9uYW1lOiB0aGlzLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvblBhcmFtcygpLFxuICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBmb3IgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbF9uYW1lOiB0aGlzLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvblBhcmFtcygpLFxuICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZvcm1hdE1lc3NhZ2VzKHByb21wdCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICBjb250ZW50OiBwcm9tcHQsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLnByZWZpeE1lc3NhZ2VzID8gWy4uLnRoaXMucHJlZml4TWVzc2FnZXMsIG1lc3NhZ2VdIDogW21lc3NhZ2VdO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIF9jYWxsKHByb21wdCwgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB7IHN0b3AgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuaW52b2NhdGlvblBhcmFtcygpO1xuICAgICAgICBwYXJhbXMuc3RvcCA9IHN0b3AgPz8gcGFyYW1zLnN0b3A7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBwYXJhbXMuc3RyZWFtXG4gICAgICAgICAgICA/IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgbGV0IHJlamVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbGV0IHJlc29sdmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0aW9uV2l0aFJldHJ5KHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogdGhpcy5mb3JtYXRNZXNzYWdlcyhwcm9tcHQpLFxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICBhZGFwdGVyOiBmZXRjaEFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogXCJzdHJlYW1cIixcbiAgICAgICAgICAgICAgICAgICAgb25tZXNzYWdlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhPy50cmltPy4oKSA9PT0gXCJbRE9ORV1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBmaXJzdCBtZXNzYWdlIHNldCB0aGUgcmVzcG9uc2UgcHJvcGVydGllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogbWVzc2FnZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkOiBtZXNzYWdlLmNyZWF0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogbWVzc2FnZS5tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiBhbGwgbWVzc2FnZXMsIHVwZGF0ZSBjaG9pY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgbWVzc2FnZS5jaG9pY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaG9pY2UgPSByZXNwb25zZS5jaG9pY2VzLmZpbmQoKGMpID0+IGMuaW5kZXggPT09IHBhcnQuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaG9pY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBwYXJ0LmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hfcmVhc29uOiBwYXJ0LmZpbmlzaF9yZWFzb24gPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuY2hvaWNlcy5wdXNoKGNob2ljZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNob2ljZS5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLm1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnQuZGVsdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFydC5kZWx0YT8uY29udGVudCA/PyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2UubWVzc2FnZS5jb250ZW50ICs9IHBhcnQuZGVsdGE/LmNvbnRlbnQgPz8gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12b2lkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIHJ1bk1hbmFnZXI/LmhhbmRsZUxMTU5ld1Rva2VuKHBhcnQuZGVsdGE/LmNvbnRlbnQgPz8gXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBhbGwgbWVzc2FnZXMgYXJlIGZpbmlzaGVkLCByZXNvbHZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNvbHZlZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNob2ljZXMuZXZlcnkoKGMpID0+IGMuZmluaXNoX3JlYXNvbiAhPSBudWxsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWplY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogYXdhaXQgdGhpcy5jb21wbGV0aW9uV2l0aFJldHJ5KHtcbiAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IHRoaXMuZm9ybWF0TWVzc2FnZXMocHJvbXB0KSxcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMub3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2U/LmNvbnRlbnQgPz8gXCJcIjtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBhc3luYyBjb21wbGV0aW9uV2l0aFJldHJ5KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5XG4gICAgICAgICAgICAgICAgPyBgaHR0cHM6Ly8ke3RoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWV9Lm9wZW5haS5henVyZS5jb20vb3BlbmFpL2RlcGxveW1lbnRzLyR7dGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lfWBcbiAgICAgICAgICAgICAgICA6IHRoaXMuY2xpZW50Q29uZmlnLmJhc2VQYXRoO1xuICAgICAgICAgICAgY29uc3QgY2xpZW50Q29uZmlnID0gbmV3IENvbmZpZ3VyYXRpb24oe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgICAgIGJhc2VQYXRoOiBlbmRwb2ludCxcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLmJhc2VPcHRpb25zLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IE9wZW5BSUFwaShjbGllbnRDb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF4aW9zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IGlzTm9kZSgpID8gdW5kZWZpbmVkIDogZmV0Y2hBZGFwdGVyLFxuICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcuYmFzZU9wdGlvbnMsXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5henVyZU9wZW5BSUFwaUtleSkge1xuICAgICAgICAgICAgYXhpb3NPcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgXCJhcGkta2V5XCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlLZXksXG4gICAgICAgICAgICAgICAgLi4uYXhpb3NPcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXhpb3NPcHRpb25zLnBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS12ZXJzaW9uXCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uLFxuICAgICAgICAgICAgICAgIC4uLmF4aW9zT3B0aW9ucy5wYXJhbXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxlclxuICAgICAgICAgICAgLmNhbGwodGhpcy5jbGllbnQuY3JlYXRlQ2hhdENvbXBsZXRpb24uYmluZCh0aGlzLmNsaWVudCksIHJlcXVlc3QsIGF4aW9zT3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5kYXRhKTtcbiAgICB9XG4gICAgX2xsbVR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcIm9wZW5haVwiO1xuICAgIH1cbn1cbi8qKlxuICogUHJvbXB0TGF5ZXIgd3JhcHBlciB0byBPcGVuQUlDaGF0XG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9tcHRMYXllck9wZW5BSUNoYXQgZXh0ZW5kcyBPcGVuQUlDaGF0IHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvbXB0TGF5ZXJBcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicGxUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJldHVyblByb21wdExheWVySWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wbFRhZ3MgPSBmaWVsZHM/LnBsVGFncyA/PyBbXTtcbiAgICAgICAgdGhpcy5yZXR1cm5Qcm9tcHRMYXllcklkID0gZmllbGRzPy5yZXR1cm5Qcm9tcHRMYXllcklkID8/IGZhbHNlO1xuICAgICAgICB0aGlzLnByb21wdExheWVyQXBpS2V5ID1cbiAgICAgICAgICAgIGZpZWxkcz8ucHJvbXB0TGF5ZXJBcGlLZXkgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiUFJPTVBUTEFZRVJfQVBJX0tFWVwiKTtcbiAgICAgICAgaWYgKCF0aGlzLnByb21wdExheWVyQXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIFByb21wdExheWVyIEFQSSBrZXlcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY29tcGxldGlvbldpdGhSZXRyeShyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0cmVhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmNvbXBsZXRpb25XaXRoUmV0cnkocmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdXBlci5jb21wbGV0aW9uV2l0aFJldHJ5KHJlcXVlc3QpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIGFzeW5jIF9nZW5lcmF0ZShwcm9tcHRzLCBvcHRpb25zLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGxldCBjaG9pY2U7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoYXN5bmMgKHByb21wdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdFN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgdGhpcy5fY2FsbChwcm9tcHQsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpO1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEVuZFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY2hvaWNlID0gW3sgdGV4dCB9XTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJlc3AgPSB7XG4gICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwcm9tcHRMYXllclJlc3BCb2R5ID0gYXdhaXQgcHJvbXB0TGF5ZXJUcmFja1JlcXVlc3QodGhpcy5jYWxsZXIsIFwibGFuZ2NoYWluLlByb21wdExheWVyT3BlbkFJQ2hhdFwiLCBbcHJvbXB0XSwgdGhpcy5faWRlbnRpZnlpbmdQYXJhbXMoKSwgdGhpcy5wbFRhZ3MsIHBhcnNlZFJlc3AsIHJlcXVlc3RTdGFydFRpbWUsIHJlcXVlc3RFbmRUaW1lLCB0aGlzLnByb21wdExheWVyQXBpS2V5KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJldHVyblByb21wdExheWVySWQgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICBwcm9tcHRMYXllclJlc3BCb2R5LnN1Y2Nlc3MgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjaG9pY2VbMF0uZ2VuZXJhdGlvbkluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21wdExheWVyUmVxdWVzdElkOiBwcm9tcHRMYXllclJlc3BCb2R5LnJlcXVlc3RfaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjaG9pY2U7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHsgZ2VuZXJhdGlvbnMgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb25maWd1cmF0aW9uLCBPcGVuQUlBcGksIH0gZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgaXNOb2RlLCBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWwvZW52LmpzXCI7XG5pbXBvcnQgZmV0Y2hBZGFwdGVyIGZyb20gXCIuLi91dGlsL2F4aW9zLWZldGNoLWFkYXB0ZXIuanNcIjtcbmltcG9ydCB7IGNodW5rQXJyYXkgfSBmcm9tIFwiLi4vdXRpbC9jaHVuay5qc1wiO1xuaW1wb3J0IHsgQmFzZUxMTSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IGNhbGN1bGF0ZU1heFRva2VucyB9IGZyb20gXCIuLi9iYXNlX2xhbmd1YWdlL2NvdW50X3Rva2Vucy5qc1wiO1xuaW1wb3J0IHsgT3BlbkFJQ2hhdCB9IGZyb20gXCIuL29wZW5haS1jaGF0LmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRMYXllclRyYWNrUmVxdWVzdCB9IGZyb20gXCIuLi91dGlsL3Byb21wdC1sYXllci5qc1wiO1xuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBPcGVuQUkgbGFyZ2UgbGFuZ3VhZ2UgbW9kZWxzLlxuICpcbiAqIFRvIHVzZSB5b3Ugc2hvdWxkIGhhdmUgdGhlIGBvcGVuYWlgIHBhY2thZ2UgaW5zdGFsbGVkLCB3aXRoIHRoZVxuICogYE9QRU5BSV9BUElfS0VZYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBzZXQuXG4gKlxuICogVG8gdXNlIHdpdGggQXp1cmUgeW91IHNob3VsZCBoYXZlIHRoZSBgb3BlbmFpYCBwYWNrYWdlIGluc3RhbGxlZCwgd2l0aCB0aGVcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0tFWWAsXG4gKiBgQVpVUkVfT1BFTkFJX0FQSV9JTlNUQU5DRV9OQU1FYCxcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0RFUExPWU1FTlRfTkFNRWBcbiAqIGFuZCBgQVpVUkVfT1BFTkFJX0FQSV9WRVJTSU9OYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBzZXQuXG4gKlxuICogQHJlbWFya3NcbiAqIEFueSBwYXJhbWV0ZXJzIHRoYXQgYXJlIHZhbGlkIHRvIGJlIHBhc3NlZCB0byB7QGxpbmtcbiAqIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMvY3JlYXRlIHxcbiAqIGBvcGVuYWkuY3JlYXRlQ29tcGxldGlvbmB9IGNhbiBiZSBwYXNzZWQgdGhyb3VnaCB7QGxpbmsgbW9kZWxLd2FyZ3N9LCBldmVuXG4gKiBpZiBub3QgZXhwbGljaXRseSBhdmFpbGFibGUgb24gdGhpcyBjbGFzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSSBleHRlbmRzIEJhc2VMTE0ge1xuICAgIGdldCBjYWxsS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFtcInN0b3BcIiwgXCJzaWduYWxcIiwgXCJ0aW1lb3V0XCIsIFwib3B0aW9uc1wiXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBjb25maWd1cmF0aW9uKSB7XG4gICAgICAgIGlmIChmaWVsZHM/Lm1vZGVsTmFtZT8uc3RhcnRzV2l0aChcImdwdC0zLjUtdHVyYm9cIikgfHxcbiAgICAgICAgICAgIGZpZWxkcz8ubW9kZWxOYW1lPy5zdGFydHNXaXRoKFwiZ3B0LTRcIikgfHxcbiAgICAgICAgICAgIGZpZWxkcz8ubW9kZWxOYW1lPy5zdGFydHNXaXRoKFwiZ3B0LTQtMzJrXCIpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RydWN0b3ItcmV0dXJuLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9wZW5BSUNoYXQoZmllbGRzLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMgPz8ge30pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZW1wZXJhdHVyZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMC43XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhUb2tlbnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDI1NlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9wUFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJlcXVlbmN5UGVuYWx0eVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJlc2VuY2VQZW5hbHR5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJiZXN0T2ZcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxvZ2l0Qmlhc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwidGV4dC1kYXZpbmNpLTAwM1wiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbEt3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJiYXRjaFNpemVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDIwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0aW1lb3V0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0b3BcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlWZXJzaW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudENvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBmaWVsZHM/Lm9wZW5BSUFwaUtleSA/PyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiT1BFTkFJX0FQSV9LRVlcIik7XG4gICAgICAgIGNvbnN0IGF6dXJlQXBpS2V5ID0gZmllbGRzPy5henVyZU9wZW5BSUFwaUtleSA/P1xuICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoIWF6dXJlQXBpS2V5ICYmICFhcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIihBenVyZSkgT3BlbkFJIEFQSSBrZXkgbm90IGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF6dXJlQXBpSW5zdGFuY2VOYW1lID0gZmllbGRzPy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSA/P1xuICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfSU5TVEFOQ0VfTkFNRVwiKTtcbiAgICAgICAgY29uc3QgYXp1cmVBcGlEZXBsb3ltZW50TmFtZSA9IChmaWVsZHM/LmF6dXJlT3BlbkFJQXBpQ29tcGxldGlvbnNEZXBsb3ltZW50TmFtZSB8fFxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSA/P1xuICAgICAgICAgICAgKGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0NPTVBMRVRJT05TX0RFUExPWU1FTlRfTkFNRVwiKSB8fFxuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0RFUExPWU1FTlRfTkFNRVwiKSk7XG4gICAgICAgIGNvbnN0IGF6dXJlQXBpVmVyc2lvbiA9IGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlWZXJzaW9uID8/XG4gICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9WRVJTSU9OXCIpO1xuICAgICAgICB0aGlzLm1vZGVsTmFtZSA9IGZpZWxkcz8ubW9kZWxOYW1lID8/IHRoaXMubW9kZWxOYW1lO1xuICAgICAgICB0aGlzLm1vZGVsS3dhcmdzID0gZmllbGRzPy5tb2RlbEt3YXJncyA/PyB7fTtcbiAgICAgICAgdGhpcy5iYXRjaFNpemUgPSBmaWVsZHM/LmJhdGNoU2l6ZSA/PyB0aGlzLmJhdGNoU2l6ZTtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gZmllbGRzPy50aW1lb3V0O1xuICAgICAgICB0aGlzLnRlbXBlcmF0dXJlID0gZmllbGRzPy50ZW1wZXJhdHVyZSA/PyB0aGlzLnRlbXBlcmF0dXJlO1xuICAgICAgICB0aGlzLm1heFRva2VucyA9IGZpZWxkcz8ubWF4VG9rZW5zID8/IHRoaXMubWF4VG9rZW5zO1xuICAgICAgICB0aGlzLnRvcFAgPSBmaWVsZHM/LnRvcFAgPz8gdGhpcy50b3BQO1xuICAgICAgICB0aGlzLmZyZXF1ZW5jeVBlbmFsdHkgPSBmaWVsZHM/LmZyZXF1ZW5jeVBlbmFsdHkgPz8gdGhpcy5mcmVxdWVuY3lQZW5hbHR5O1xuICAgICAgICB0aGlzLnByZXNlbmNlUGVuYWx0eSA9IGZpZWxkcz8ucHJlc2VuY2VQZW5hbHR5ID8/IHRoaXMucHJlc2VuY2VQZW5hbHR5O1xuICAgICAgICB0aGlzLm4gPSBmaWVsZHM/Lm4gPz8gdGhpcy5uO1xuICAgICAgICB0aGlzLmJlc3RPZiA9IGZpZWxkcz8uYmVzdE9mID8/IHRoaXMuYmVzdE9mO1xuICAgICAgICB0aGlzLmxvZ2l0QmlhcyA9IGZpZWxkcz8ubG9naXRCaWFzO1xuICAgICAgICB0aGlzLnN0b3AgPSBmaWVsZHM/LnN0b3A7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nID0gZmllbGRzPy5zdHJlYW1pbmcgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uID0gYXp1cmVBcGlWZXJzaW9uO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5ID0gYXp1cmVBcGlLZXk7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgPSBhenVyZUFwaUluc3RhbmNlTmFtZTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lID0gYXp1cmVBcGlEZXBsb3ltZW50TmFtZTtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtaW5nICYmIHRoaXMubiA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzdHJlYW0gcmVzdWx0cyB3aGVuIG4gPiAxXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0cmVhbWluZyAmJiB0aGlzLmJlc3RPZiA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzdHJlYW0gcmVzdWx0cyB3aGVuIGJlc3RPZiA+IDFcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgaW5zdGFuY2UgbmFtZSBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgZGVwbG95bWVudCBuYW1lIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBenVyZSBPcGVuQUkgQVBJIHZlcnNpb24gbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xpZW50Q29uZmlnID0ge1xuICAgICAgICAgICAgYXBpS2V5LFxuICAgICAgICAgICAgLi4uY29uZmlndXJhdGlvbixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwYXJhbWV0ZXJzIHVzZWQgdG8gaW52b2tlIHRoZSBtb2RlbFxuICAgICAqL1xuICAgIGludm9jYXRpb25QYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbE5hbWUsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy50ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IHRoaXMubWF4VG9rZW5zLFxuICAgICAgICAgICAgdG9wX3A6IHRoaXMudG9wUCxcbiAgICAgICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiB0aGlzLmZyZXF1ZW5jeVBlbmFsdHksXG4gICAgICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiB0aGlzLnByZXNlbmNlUGVuYWx0eSxcbiAgICAgICAgICAgIG46IHRoaXMubixcbiAgICAgICAgICAgIGJlc3Rfb2Y6IHRoaXMuYmVzdE9mLFxuICAgICAgICAgICAgbG9naXRfYmlhczogdGhpcy5sb2dpdEJpYXMsXG4gICAgICAgICAgICBzdG9wOiB0aGlzLnN0b3AsXG4gICAgICAgICAgICBzdHJlYW06IHRoaXMuc3RyZWFtaW5nLFxuICAgICAgICAgICAgLi4udGhpcy5tb2RlbEt3YXJncyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2lkZW50aWZ5aW5nUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWxfbmFtZTogdGhpcy5tb2RlbE5hbWUsXG4gICAgICAgICAgICAuLi50aGlzLmludm9jYXRpb25QYXJhbXMoKSxcbiAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGlkZW50aWZ5aW5nIHBhcmFtZXRlcnMgZm9yIHRoZSBtb2RlbFxuICAgICAqL1xuICAgIGlkZW50aWZ5aW5nUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWRlbnRpZnlpbmdQYXJhbXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBvdXQgdG8gT3BlbkFJJ3MgZW5kcG9pbnQgd2l0aCBrIHVuaXF1ZSBwcm9tcHRzXG4gICAgICpcbiAgICAgKiBAcGFyYW0gW3Byb21wdHNdIC0gVGhlIHByb21wdHMgdG8gcGFzcyBpbnRvIHRoZSBtb2RlbC5cbiAgICAgKiBAcGFyYW0gW29wdGlvbnNdIC0gT3B0aW9uYWwgbGlzdCBvZiBzdG9wIHdvcmRzIHRvIHVzZSB3aGVuIGdlbmVyYXRpbmcuXG4gICAgICogQHBhcmFtIFtydW5NYW5hZ2VyXSAtIE9wdGlvbmFsIGNhbGxiYWNrIG1hbmFnZXIgdG8gdXNlIHdoZW4gZ2VuZXJhdGluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBmdWxsIExMTSBvdXRwdXQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogaW1wb3J0IHsgT3BlbkFJIH0gZnJvbSBcImxhbmdjaGFpbi9sbG1zL29wZW5haVwiO1xuICAgICAqIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoKTtcbiAgICAgKiBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5nZW5lcmF0ZShbXCJUZWxsIG1lIGEgam9rZS5cIl0pO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGFzeW5jIF9nZW5lcmF0ZShwcm9tcHRzLCBvcHRpb25zLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IHsgc3RvcCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3Qgc3ViUHJvbXB0cyA9IGNodW5rQXJyYXkocHJvbXB0cywgdGhpcy5iYXRjaFNpemUpO1xuICAgICAgICBjb25zdCBjaG9pY2VzID0gW107XG4gICAgICAgIGNvbnN0IHRva2VuVXNhZ2UgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuc3RvcCAmJiBzdG9wKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdG9wIGZvdW5kIGluIGlucHV0IGFuZCBkZWZhdWx0IHBhcmFtc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLmludm9jYXRpb25QYXJhbXMoKTtcbiAgICAgICAgcGFyYW1zLnN0b3AgPSBzdG9wID8/IHBhcmFtcy5zdG9wO1xuICAgICAgICBpZiAocGFyYW1zLm1heF90b2tlbnMgPT09IC0xKSB7XG4gICAgICAgICAgICBpZiAocHJvbXB0cy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYXhfdG9rZW5zIHNldCB0byAtMSBub3Qgc3VwcG9ydGVkIGZvciBtdWx0aXBsZSBpbnB1dHNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJhbXMubWF4X3Rva2VucyA9IGF3YWl0IGNhbGN1bGF0ZU1heFRva2Vucyh7XG4gICAgICAgICAgICAgICAgcHJvbXB0OiBwcm9tcHRzWzBdLFxuICAgICAgICAgICAgICAgIC8vIENhc3QgaGVyZSB0byBhbGxvdyBmb3Igb3RoZXIgbW9kZWxzIHRoYXQgbWF5IG5vdCBmaXQgdGhlIHVuaW9uXG4gICAgICAgICAgICAgICAgbW9kZWxOYW1lOiB0aGlzLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3ViUHJvbXB0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHBhcmFtcy5zdHJlYW1cbiAgICAgICAgICAgICAgICA/IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hvaWNlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZWplY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzb2x2ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0aW9uV2l0aFJldHJ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogc3ViUHJvbXB0c1tpXSxcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkYXB0ZXI6IGZldGNoQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogXCJzdHJlYW1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ubWVzc2FnZTogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGE/LnRyaW0/LigpID09PSBcIltET05FXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBmaXJzdCBtZXNzYWdlIHNldCB0aGUgcmVzcG9uc2UgcHJvcGVydGllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG1lc3NhZ2Uub2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IG1lc3NhZ2UuY3JlYXRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogbWVzc2FnZS5tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24gYWxsIG1lc3NhZ2VzLCB1cGRhdGUgY2hvaWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBtZXNzYWdlLmNob2ljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0ICE9IG51bGwgJiYgcGFydC5pbmRleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaG9pY2VzW3BhcnQuaW5kZXhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzW3BhcnQuaW5kZXhdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hvaWNlID0gY2hvaWNlc1twYXJ0LmluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2UudGV4dCA9IChjaG9pY2UudGV4dCA/PyBcIlwiKSArIChwYXJ0LnRleHQgPz8gXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLmZpbmlzaF9yZWFzb24gPSBwYXJ0LmZpbmlzaF9yZWFzb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLmxvZ3Byb2JzID0gcGFydC5sb2dwcm9icztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIHRoaXMgc2hvdWxkIHBhc3MgcGFydC5pbmRleCB0byB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoYXQncyBzdXBwb3J0ZWQgdGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdm9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4ocGFydC50ZXh0ID8/IFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gYWxsIG1lc3NhZ2VzIGFyZSBmaW5pc2hlZCwgcmVzb2x2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc29sdmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzLmV2ZXJ5KChjKSA9PiBjLmZpbmlzaF9yZWFzb24gIT0gbnVsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWplY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5jb21wbGV0aW9uV2l0aFJldHJ5KHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IHN1YlByb21wdHNbaV0sXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjaG9pY2VzLnB1c2goLi4uZGF0YS5jaG9pY2VzKTtcbiAgICAgICAgICAgIGNvbnN0IHsgY29tcGxldGlvbl90b2tlbnM6IGNvbXBsZXRpb25Ub2tlbnMsIHByb21wdF90b2tlbnM6IHByb21wdFRva2VucywgdG90YWxfdG9rZW5zOiB0b3RhbFRva2VucywgfSA9IGRhdGEudXNhZ2UgPz8ge307XG4gICAgICAgICAgICBpZiAoY29tcGxldGlvblRva2Vucykge1xuICAgICAgICAgICAgICAgIHRva2VuVXNhZ2UuY29tcGxldGlvblRva2VucyA9XG4gICAgICAgICAgICAgICAgICAgICh0b2tlblVzYWdlLmNvbXBsZXRpb25Ub2tlbnMgPz8gMCkgKyBjb21wbGV0aW9uVG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb21wdFRva2Vucykge1xuICAgICAgICAgICAgICAgIHRva2VuVXNhZ2UucHJvbXB0VG9rZW5zID0gKHRva2VuVXNhZ2UucHJvbXB0VG9rZW5zID8/IDApICsgcHJvbXB0VG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvdGFsVG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5Vc2FnZS50b3RhbFRva2VucyA9ICh0b2tlblVzYWdlLnRvdGFsVG9rZW5zID8/IDApICsgdG90YWxUb2tlbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBjaHVua0FycmF5KGNob2ljZXMsIHRoaXMubikubWFwKChwcm9tcHRDaG9pY2VzKSA9PiBwcm9tcHRDaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiAoe1xuICAgICAgICAgICAgdGV4dDogY2hvaWNlLnRleHQgPz8gXCJcIixcbiAgICAgICAgICAgIGdlbmVyYXRpb25JbmZvOiB7XG4gICAgICAgICAgICAgICAgZmluaXNoUmVhc29uOiBjaG9pY2UuZmluaXNoX3JlYXNvbixcbiAgICAgICAgICAgICAgICBsb2dwcm9iczogY2hvaWNlLmxvZ3Byb2JzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgbGxtT3V0cHV0OiB7IHRva2VuVXNhZ2UgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBhc3luYyBjb21wbGV0aW9uV2l0aFJldHJ5KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3QgZW5kcG9pbnQgPSB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5XG4gICAgICAgICAgICAgICAgPyBgaHR0cHM6Ly8ke3RoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWV9Lm9wZW5haS5henVyZS5jb20vb3BlbmFpL2RlcGxveW1lbnRzLyR7dGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lfWBcbiAgICAgICAgICAgICAgICA6IHRoaXMuY2xpZW50Q29uZmlnLmJhc2VQYXRoO1xuICAgICAgICAgICAgY29uc3QgY2xpZW50Q29uZmlnID0gbmV3IENvbmZpZ3VyYXRpb24oe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgICAgIGJhc2VQYXRoOiBlbmRwb2ludCxcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLmJhc2VPcHRpb25zLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IE9wZW5BSUFwaShjbGllbnRDb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF4aW9zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IGlzTm9kZSgpID8gdW5kZWZpbmVkIDogZmV0Y2hBZGFwdGVyLFxuICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcuYmFzZU9wdGlvbnMsXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5henVyZU9wZW5BSUFwaUtleSkge1xuICAgICAgICAgICAgYXhpb3NPcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgXCJhcGkta2V5XCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlLZXksXG4gICAgICAgICAgICAgICAgLi4uYXhpb3NPcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXhpb3NPcHRpb25zLnBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS12ZXJzaW9uXCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uLFxuICAgICAgICAgICAgICAgIC4uLmF4aW9zT3B0aW9ucy5wYXJhbXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxlclxuICAgICAgICAgICAgLmNhbGwodGhpcy5jbGllbnQuY3JlYXRlQ29tcGxldGlvbi5iaW5kKHRoaXMuY2xpZW50KSwgcmVxdWVzdCwgYXhpb3NPcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmRhdGEpO1xuICAgIH1cbiAgICBfbGxtVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwib3BlbmFpXCI7XG4gICAgfVxufVxuLyoqXG4gKiBQcm9tcHRMYXllciB3cmFwcGVyIHRvIE9wZW5BSVxuICogQGF1Z21lbnRzIE9wZW5BSVxuICovXG5leHBvcnQgY2xhc3MgUHJvbXB0TGF5ZXJPcGVuQUkgZXh0ZW5kcyBPcGVuQUkge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9tcHRMYXllckFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwbFRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmV0dXJuUHJvbXB0TGF5ZXJJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBsVGFncyA9IGZpZWxkcz8ucGxUYWdzID8/IFtdO1xuICAgICAgICB0aGlzLnByb21wdExheWVyQXBpS2V5ID1cbiAgICAgICAgICAgIGZpZWxkcz8ucHJvbXB0TGF5ZXJBcGlLZXkgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiUFJPTVBUTEFZRVJfQVBJX0tFWVwiKTtcbiAgICAgICAgdGhpcy5yZXR1cm5Qcm9tcHRMYXllcklkID0gZmllbGRzPy5yZXR1cm5Qcm9tcHRMYXllcklkO1xuICAgICAgICBpZiAoIXRoaXMucHJvbXB0TGF5ZXJBcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgUHJvbXB0TGF5ZXIgQVBJIGtleVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjb21wbGV0aW9uV2l0aFJldHJ5KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RyZWFtKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuY29tcGxldGlvbldpdGhSZXRyeShyZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVyLmNvbXBsZXRpb25XaXRoUmV0cnkocmVxdWVzdCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgYXN5bmMgX2dlbmVyYXRlKHByb21wdHMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdFN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gYXdhaXQgc3VwZXIuX2dlbmVyYXRlKHByb21wdHMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdlbmVyYXRpb25zLmdlbmVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0RW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRSZXNwID0ge1xuICAgICAgICAgICAgICAgIHRleHQ6IGdlbmVyYXRpb25zLmdlbmVyYXRpb25zW2ldWzBdLnRleHQsXG4gICAgICAgICAgICAgICAgbGxtX291dHB1dDogZ2VuZXJhdGlvbnMubGxtT3V0cHV0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdExheWVyUmVzcEJvZHkgPSBhd2FpdCBwcm9tcHRMYXllclRyYWNrUmVxdWVzdCh0aGlzLmNhbGxlciwgXCJsYW5nY2hhaW4uUHJvbXB0TGF5ZXJPcGVuQUlcIiwgW3Byb21wdHNbaV1dLCB0aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLCB0aGlzLnBsVGFncywgcGFyc2VkUmVzcCwgcmVxdWVzdFN0YXJ0VGltZSwgcmVxdWVzdEVuZFRpbWUsIHRoaXMucHJvbXB0TGF5ZXJBcGlLZXkpO1xuICAgICAgICAgICAgbGV0IHByb21wdExheWVyUmVxdWVzdElkO1xuICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuUHJvbXB0TGF5ZXJJZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChwcm9tcHRMYXllclJlc3BCb2R5ICYmIHByb21wdExheWVyUmVzcEJvZHkuc3VjY2VzcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHRMYXllclJlcXVlc3RJZCA9IHByb21wdExheWVyUmVzcEJvZHkucmVxdWVzdF9pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnMuZ2VuZXJhdGlvbnNbaV1bMF0uZ2VuZXJhdGlvbkluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmdlbmVyYXRpb25zLmdlbmVyYXRpb25zW2ldWzBdLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgICAgICBwcm9tcHRMYXllclJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZW5lcmF0aW9ucztcbiAgICB9XG59XG5leHBvcnQgeyBPcGVuQUlDaGF0LCBQcm9tcHRMYXllck9wZW5BSUNoYXQgfSBmcm9tIFwiLi9vcGVuYWktY2hhdC5qc1wiO1xuIiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCAnZG90ZW52L2NvbmZpZydcclxuICAgIGltcG9ydCB7IE9wZW5BSSB9IGZyb20gXCJsYW5nY2hhaW4vbGxtcy9vcGVuYWlcIjtcclxuICAgIFxyXG5cclxuICAgIGxldCBwcm9tcHRJbnB1dCA9IFwiXCJcclxuICAgIGxldCBwcm9tcHRPdXRwdXQgPSBcInJlcy4uLlwiXHJcbiAgICBleHBvcnQgY29uc3Qgb3BlbkFJS2V5ID0gXCJcIjtcclxuXHJcbiAgICBjb25zdCBtb2RlbCA9IG5ldyBPcGVuQUkoeyBvcGVuQUlBcGlLZXk6IG9wZW5BSUtleSwgdGVtcGVyYXR1cmU6IDAuNCB9KTtcclxuXHJcblxyXG4gICAgYXN5bmMgZnVuY3Rpb24gc2VuZFByb21wdChwcm9tcHRJbnB1dDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJpbnB1dDogXCIgKyBwcm9tcHRJbnB1dCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJhcGkta2V5OiBcIiArIG9wZW5BSUtleSk7XHJcbiAgICAgICAgLy8gY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBtb2RlbC5jYWxsKHByb21wdElucHV0KTtcclxuICAgICAgICAvLyBwcm9tcHRPdXRwdXQgPSByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbjwvc2NyaXB0PlxyXG5cclxuXHJcbjxkaXY+XHJcbiAgICA8aDE+QmFzaWMgUHJvbXB0PC9oMT5cclxuICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGJpbmQ6dmFsdWU9e3Byb21wdElucHV0fT5cclxuICAgIDxidXR0b24gb246Y2xpY2s9eygpID0+IHtzZW5kUHJvbXB0KHByb21wdElucHV0KX19PlNlbmQgUHJvbXB0PC9idXR0b24+XHJcbiAgICA8c3Bhbj57cHJvbXB0T3V0cHV0fTwvc3Bhbj5cclxuPC9kaXY+IiwiaW1wb3J0IHsgQXBwLCBJdGVtVmlldywgUGxhdGZvcm0sIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcblxyXG5pbXBvcnQgJ2RvdGVudi9jb25maWcnXHJcbi8vIGltcG9ydCB7IE9wZW5BSSB9IGZyb20gXCJsYW5nY2hhaW4vbGxtcy9vcGVuYWlcIjtcclxuLy8gaW1wb3J0IERpY2VSb2xsZXIgZnJvbSBcIi4vdWkvREljZVJvbGxlci5zdmVsdGVcIjtcclxuaW1wb3J0IEJhc2ljUHJvbXB0IGZyb20gJy4vdWkvQmFzaWNQcm9tcHQuc3ZlbHRlJztcclxuXHJcbmNvbnN0IFZJRVdfVFlQRSA9IFwic3ZlbHRlLXZpZXdcIjtcclxuXHJcbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxyXG5cclxuaW50ZXJmYWNlIE15UGx1Z2luU2V0dGluZ3Mge1xyXG4gICAgbXlTZXR0aW5nOiBzdHJpbmc7XHJcbiAgICBvcGVuQUlfQVBJX0tleTogYW55O1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xyXG4gICAgbXlTZXR0aW5nOiAnZGVmYXVsdCcsXHJcbiAgICBvcGVuQUlfQVBJX0tleTogaW1wb3J0Lm1ldGEuZW52LlZJVEVfT1BFTkFJX0FQSV9LRVlcclxufVxyXG5cclxuXHJcbi8vIGNsYXNzIE15U3ZlbHRlVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcclxuLy8gICAgIHZpZXc6IERpY2VSb2xsZXI7XHJcblxyXG4vLyAgICAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcclxuLy8gICAgICAgICByZXR1cm4gVklFV19UWVBFO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcbi8vICAgICAgICAgcmV0dXJuIFwiRGljZSBSb2xsZXJcIjtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBnZXRJY29uKCk6IHN0cmluZyB7XHJcbi8vICAgICAgICAgcmV0dXJuIFwiZGljZVwiO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGFzeW5jIG9uT3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHJcbi8vICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuLy8gICAgICAgICB0aGlzLnZpZXcgPSBuZXcgRGljZVJvbGxlcih7IHRhcmdldDogKHRoaXMgYXMgYW55KS5jb250ZW50RWwsIHByb3BzOiB7fSB9KTtcclxuLy8gICAgIH1cclxuLy8gfVxyXG5cclxuY2xhc3MgQmFzaWNQcm9tcHRWaWV3IGV4dGVuZHMgSXRlbVZpZXd7XHJcbiAgICB2aWV3OiBCYXNpY1Byb21wdDtcclxuICAgIG9wZW5BSUtleTogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIG9wZW5BSUtleTogc3RyaW5nKXtcclxuICAgICAgICBzdXBlcihsZWFmKTtcclxuICAgICAgICB0aGlzLm9wZW5BSUtleSA9IG9wZW5BSUtleTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gVklFV19UWVBFXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJCYXNpYyBQcm9tcHRcIjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiZGljZVwiXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFzeW5jIG9uT3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMudmlldyA9IG5ldyBCYXNpY1Byb21wdCh7IHRhcmdldDogKHRoaXMgYXMgYW55KS5jb250ZW50RWwsIHByb3BzOiB7b3BlbkFJS2V5OiB0aGlzLm9wZW5BSUtleX0gfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIC8vIHByaXZhdGUgdmlldzogTXlTdmVsdGVWaWV3O1xyXG4gICAgcHJpdmF0ZSB2aWV3OiBCYXNpY1Byb21wdFZpZXc7XHJcbiAgICBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncztcclxuXHJcbiAgICBhc3luYyBvbmxvYWQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuICAgICAgICBjb25zdCBvcGVuQUlLZXkgPSB0aGlzLnNldHRpbmdzLm9wZW5BSV9BUElfS2V5O1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcclxuICAgICAgICAgICAgVklFV19UWVBFLFxyXG4gICAgICAgICAgICAobGVhZjogV29ya3NwYWNlTGVhZikgPT4gKHRoaXMudmlldyA9IG5ldyBCYXNpY1Byb21wdFZpZXcobGVhZiwgb3BlbkFJS2V5KSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyB0aGlzLnJlZ2lzdGVyVmlldyhcclxuICAgICAgICAvLyAgICAgVklFV19UWVBFLFxyXG4gICAgICAgIC8vICAgICAobGVhZjogV29ya3NwYWNlTGVhZikgPT4gKHRoaXMudmlldyA9IG5ldyBCYXNpY1Byb21wdChsZWFmKSlcclxuICAgICAgICAvLyApO1xyXG5cclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSh0aGlzLm9uTGF5b3V0UmVhZHkuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIC8vIFRoaXMgY3JlYXRlcyBhbiBpY29uIGluIHRoZSBsZWZ0IHJpYmJvbi5cclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2RpY2UnLCAnU2FtcGxlIFBsdWdpbicsIChldnQ6IE1vdXNlRXZlbnQpID0+IHRoaXMub3Blbk1hcFZpZXcoKSk7XHJcblxyXG4gICAgICAgIC8vIFRoaXMgYWRkcyBhIHNpbXBsZSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnb3Blbi1zYW1wbGUtbW9kYWwtc2ltcGxlJyxcclxuICAgICAgICAgICAgbmFtZTogJ09wZW4gc2FtcGxlIG1vZGFsIChzaW1wbGUpJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMub3Blbk1hcFZpZXcoKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTGF5b3V0UmVhZHkoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKS5zZXRWaWV3U3RhdGUoe1xyXG4gICAgICAgICAgICB0eXBlOiBWSUVXX1RZUEUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb251bmxvYWQoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvcGVuTWFwVmlldygpIHtcclxuICAgICAgICBjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLmFwcC53b3Jrc3BhY2U7XHJcbiAgICAgICAgd29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShWSUVXX1RZUEUpO1xyXG4gICAgICAgIGNvbnN0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZihcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAhUGxhdGZvcm0uaXNNb2JpbGVcclxuICAgICAgICApO1xyXG4gICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFIH0pO1xyXG4gICAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IE15UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnU2V0dGluZ3MgZm9yIG15IGF3ZXNvbWUgcGx1Z2luLicgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2V0dGluZyAjMScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdJdFxcJ3MgYSBzZWNyZXQnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBzZWNyZXQnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnb3BlbkFJX0FQSV9LZXknKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0FkZCB5b3VyIG9wZW5BSSBBUEkga2V5IGhlcmUnKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiZW50ZXIga2V5XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZykpXHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInJlcXVpcmUkJDAiLCJyZXF1aXJlJCQxIiwicmVxdWlyZSQkMiIsImNyeXB0byIsInJlcXVpcmUkJDMiLCJwYWNrYWdlSnNvbiIsInZlcnNpb24iLCJvcHRpb25zIiwibWFpbiIsIm1haW5Nb2R1bGUiLCJuYW1lIiwiZGF0YSIsImVsZW1lbnQiLCJpbnN0YW5jZSIsImNyZWF0ZV9mcmFnbWVudCIsImJpbmQiLCJ3cmFwIiwidG9TdHJpbmciLCJpc0FycmF5IiwiaXNVbmRlZmluZWQiLCJpc0Zvcm1EYXRhIiwiaXNPYmplY3QiLCJpc0RhdGUiLCJpc1VSTFNlYXJjaFBhcmFtcyIsImlzU3RhbmRhcmRCcm93c2VyRW52IiwiZm9yRWFjaCIsInV0aWxzIiwiZW5jb2RlIiwiYnVpbGRVUkwiLCJJbnRlcmNlcHRvck1hbmFnZXIiLCJub3JtYWxpemVIZWFkZXJOYW1lIiwiZW5oYW5jZUVycm9yIiwiY29uZmlnIiwiY29kZSIsInJlcXVlc3QiLCJjcmVhdGVFcnJvciIsInNldHRsZSIsInZhbGlkYXRlU3RhdHVzIiwicGF0aCIsImlzQWJzb2x1dGVVUkwiLCJjb21iaW5lVVJMcyIsImJ1aWxkRnVsbFBhdGgiLCJwYXJzZUhlYWRlcnMiLCJpc1VSTFNhbWVPcmlnaW4iLCJDYW5jZWwiLCJjb29raWVzIiwicmVxdWlyZSQkNCIsInJlcXVpcmUkJDUiLCJyZXF1aXJlJCQ2IiwicmVxdWlyZSQkNyIsInRyYW5zaXRpb25hbERlZmF1bHRzIiwicmVxdWlyZSQkOCIsInJlcXVpcmUkJDkiLCJ0cmFuc2l0aW9uYWwiLCJkZWZhdWx0cyIsInRyYW5zZm9ybURhdGEiLCJpc0NhbmNlbCIsImRpc3BhdGNoUmVxdWVzdCIsIm1lcmdlQ29uZmlnIiwibWVyZ2UiLCJ2YWxpZGF0b3JzIiwidmFsaWRhdG9yIiwiQXhpb3MiLCJmb3JFYWNoTWV0aG9kTm9EYXRhIiwiZm9yRWFjaE1ldGhvZFdpdGhEYXRhIiwic3ByZWFkIiwiaXNBeGlvc0Vycm9yIiwiYXhpb3MiLCJyZXF1aXJlJCQxMCIsImF4aW9zTW9kdWxlIiwiYXhpb3NfMSIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb25maWd1cmF0aW9uIiwidGhpcyIsIl9fYXdhaXRlciIsImJhc2VfMSIsImZsdXNoIiwicmV0cnkiLCJ0cnlKc29uU3RyaW5naWZ5IiwiZSIsInJlcXVpcmUiLCJ0IiwibiIsInIiLCJvIiwiaSIsInUiLCJhIiwicyIsImYiLCJsIiwiYyIsImQiLCJ0ZXh0Iiwic2VsZiIsIlJldHJ5T3BlcmF0aW9uIiwib3JpZ2luYWwiLCJlcnJvciIsInBSZXRyeU1vZHVsZSIsInBSZXRyeV8xIiwiRXZlbnRFbWl0dGVyIiwicEZpbmFsbHkiLCJ0aW1lb3V0RXJyb3IiLCJwVGltZW91dE1vZHVsZSIsInBUaW1lb3V0XzEiLCJsb3dlckJvdW5kXzEiLCJydW4iLCJQUXVldWUiLCJQUXVldWVNb2QiLCJwUmV0cnkiLCJfX2RlZlByb3AiLCJfX2RlZk5vcm1hbFByb3AiLCJfX3B1YmxpY0ZpZWxkIiwiYmFzZTY0IiwidXVpZC52NCIsInN0eWxlcyIsImVsYXBzZWQiLCJlcnIiLCJ1dWlkdjQiLCJjYWNoZSIsIl9iIiwiX2EiLCJDb25maWd1cmF0aW9uIiwiT3BlbkFJQXBpIiwiY2hvaWNlcyIsIl9jIiwiX2QiLCJjdHgiLCJwcm9tcHRJbnB1dCIsIkl0ZW1WaWV3IiwiUGx1Z2luIiwiUGxhdGZvcm0iLCJQbHVnaW5TZXR0aW5nVGFiIiwiU2V0dGluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFNLEtBQUtBLG9CQUFhO0FBQ3hCLE1BQU0sT0FBT0Msb0JBQWU7QUFDNUIsTUFBTSxLQUFLQyxvQkFBYTtBQUN4QixNQUFNQyxXQUFTQyxvQkFBaUI7QUFDaEMsTUFBTUMsZ0JBQWM7QUFFcEIsTUFBTUMsWUFBVUQsY0FBWTtBQUU1QixNQUFNLE9BQU87QUFHYixTQUFTLE1BQU8sS0FBSztBQUNuQixRQUFNLE1BQU0sQ0FBRTtBQUdkLE1BQUksUUFBUSxJQUFJLFNBQVU7QUFHMUIsVUFBUSxNQUFNLFFBQVEsV0FBVyxJQUFJO0FBRXJDLE1BQUk7QUFDSixVQUFRLFFBQVEsS0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNO0FBQ3pDLFVBQU0sTUFBTSxNQUFNO0FBR2xCLFFBQUksUUFBUyxNQUFNLE1BQU07QUFHekIsWUFBUSxNQUFNLEtBQU07QUFHcEIsVUFBTSxhQUFhLE1BQU07QUFHekIsWUFBUSxNQUFNLFFBQVEsMEJBQTBCLElBQUk7QUFHcEQsUUFBSSxlQUFlLEtBQUs7QUFDdEIsY0FBUSxNQUFNLFFBQVEsUUFBUSxJQUFJO0FBQ2xDLGNBQVEsTUFBTSxRQUFRLFFBQVEsSUFBSTtBQUFBLElBQ25DO0FBR0QsUUFBSSxPQUFPO0FBQUEsRUFDWjtBQUVELFNBQU87QUFDVDtBQUVBLFNBQVMsWUFBYUUsVUFBUztBQUM3QixRQUFNLFlBQVksV0FBV0EsUUFBTztBQUdwQyxR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T0EsR0FBRSxZQUFVLE1BQUdBLEdBQUUsT0FBS0EsR0FBRSxLQUFJQSxHQUFFLE9BQUtBLEdBQUUsS0FBSUEsR0FBRSxNQUFJLEVBQUUsS0FBSUEsR0FBRSxNQUFJLEVBQUUsS0FBSUEsR0FBRSxRQUFNLEVBQUUsT0FBTUEsR0FBRSxXQUFTLEVBQUUsVUFBU0EsR0FBRSxpQkFBZSxFQUFFLFVBQVNBLEdBQUUsU0FBTyxFQUFFLFFBQU9BLEdBQUUsT0FBSyxFQUFFLE1BQUtBLEdBQUUsUUFBTSxFQUFFLE9BQU1BLEdBQUUsWUFBVSxFQUFFLFdBQVVBLEdBQUUsZUFBYSxFQUFFLGNBQWFBLEdBQUUsZUFBYSxFQUFFLGNBQWFBLEdBQUUsZUFBYSxFQUFFLGNBQWFBLEdBQUUsZUFBYSxFQUFFLGNBQWFBLEdBQUUsV0FBUyxFQUFFLFVBQVNBLEdBQUUsY0FBWSxFQUFFLGFBQVlBLEdBQUUsY0FBWSxFQUFFLGFBQVlBLEdBQUUsY0FBWSxFQUFFLGFBQVlBLEdBQUUsY0FBWSxFQUFFLGFBQVlBLEdBQUUsY0FBWSxFQUFFLGFBQVlBLEdBQUUsY0FBWSxFQUFFLGFBQVlBLEdBQUUsZUFBYSxFQUFFLGNBQWFBLEdBQUUsZUFBYSxFQUFFLGNBQWFBLEdBQUUsYUFBVyxFQUFFLFlBQVdBLEdBQUUsZ0JBQWMsRUFBRSxlQUFjQSxHQUFFLGdCQUFjLEVBQUUsZUFBY0EsR0FBRSxnQkFBYyxFQUFFLGVBQWNBLEdBQUUsZ0JBQWMsRUFBRSxlQUFjQSxHQUFFLFlBQVUsRUFBRSxXQUFVQSxHQUFFLGVBQWEsRUFBRSxjQUFhQSxHQUFFLGVBQWEsRUFBRSxjQUFhQSxHQUFFLGVBQWEsRUFBRSxjQUFhQSxHQUFFLGVBQWEsRUFBRSxjQUFhQSxHQUFFLGVBQWEsRUFBRSxjQUFhQSxHQUFFLGVBQWEsRUFBRSxjQUFhQSxHQUFFLGdCQUFjLEVBQUUsZUFBY0EsR0FBRSxnQkFBYyxFQUFFLGVBQWNBLEdBQUUsT0FBSyxFQUFFLE1BQUtBLEdBQUUsVUFBUSxFQUFFLFNBQVFBLEdBQUUsZ0JBQWMsRUFBRSxlQUFjQTtBQUFBLFFBQUM7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QUFJLElBQUcsTUFBTSxHQUFFSCxLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVILElBQUVILEdBQUVPLEtBQUUsS0FBSSxJQUFHLFdBQVcsR0FBRUosS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFQyxJQUFFTixHQUFFTyxLQUFFLEtBQUksR0FBRSxVQUFVLEdBQUVELEtBQUUsRUFBRUEsSUFBRUgsSUFBRUMsSUFBRUMsSUFBRUwsR0FBRU8sS0FBRSxLQUFJLElBQUcsU0FBUyxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsS0FBSSxJQUFHLFdBQVcsR0FBRUosS0FBRSxFQUFFQSxJQUFFQyxLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVILElBQUVILEdBQUVPLEtBQUUsS0FBSSxJQUFHLFVBQVUsR0FBRUYsSUFBRUMsSUFBRU4sR0FBRU8sS0FBRSxJQUFHLEdBQUUsVUFBVSxHQUFFRCxLQUFFLEVBQUVBLElBQUVILElBQUVDLElBQUVDLElBQUVMLEdBQUVPLEtBQUUsSUFBRyxHQUFFLFdBQVcsR0FBRUYsS0FBRSxFQUFFQSxJQUFFQyxJQUFFSCxJQUFFQyxJQUFFSixHQUFFTyxLQUFFLEtBQUksSUFBRyxTQUFTLEdBQUVILEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUgsSUFBRUgsR0FBRU8sS0FBRSxJQUFHLElBQUcsVUFBVSxHQUFFSixLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVDLElBQUVOLEdBQUVPLEtBQUUsSUFBRyxHQUFFLFVBQVUsR0FBRUQsS0FBRSxFQUFFQSxJQUFFSCxJQUFFQyxJQUFFQyxJQUFFTCxHQUFFTyxLQUFFLEtBQUksR0FBRSxRQUFRLEdBQUVGLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUgsSUFBRUMsSUFBRUosR0FBRU8sS0FBRSxLQUFJLElBQUcsVUFBVSxHQUFFSCxLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVILElBQUVILEdBQUVPLEtBQUUsSUFBRyxJQUFHLFVBQVUsR0FBRUosS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFQyxJQUFFTixHQUFFTyxLQUFFLElBQUcsR0FBRSxTQUFTLEdBQUVELEtBQUUsRUFBRUEsSUFBRUgsSUFBRUMsSUFBRUMsSUFBRUwsR0FBRU8sS0FBRSxLQUFJLEdBQUUsV0FBVyxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsSUFBRyxJQUFHLFVBQVUsR0FBRUgsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLElBQUcsSUFBRyxVQUFVLEdBQUVKLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUMsSUFBRU4sR0FBRU8sS0FBRSxLQUFJLEdBQUUsV0FBVyxHQUFFRCxLQUFFLEVBQUVBLElBQUVILElBQUVDLElBQUVDLElBQUVMLEdBQUVPLEtBQUUsSUFBRyxHQUFFLFNBQVMsR0FBRUYsS0FBRSxFQUFFQSxJQUFFQyxJQUFFSCxJQUFFQyxJQUFFSixHQUFFTyxLQUFFLElBQUcsSUFBRyxVQUFVLEdBQUVKLEtBQUUsRUFBRUEsSUFBRUMsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLEtBQUksSUFBRyxXQUFXLEdBQUVGLElBQUVDLElBQUVOLEdBQUVPLEtBQUUsSUFBRyxHQUFFLE9BQU8sR0FBRUQsS0FBRSxFQUFFQSxJQUFFSCxJQUFFQyxJQUFFQyxJQUFFTCxHQUFFTyxLQUFFLElBQUcsSUFBRyxXQUFXLEdBQUVGLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUgsSUFBRUMsSUFBRUosR0FBRU8sS0FBRSxLQUFJLElBQUcsVUFBVSxHQUFFSCxLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVILElBQUVILEdBQUVPLEtBQUUsS0FBSSxJQUFHLFNBQVMsR0FBRUosS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFQyxJQUFFTixHQUFFTyxLQUFFLElBQUcsR0FBRSxXQUFXLEdBQUVELEtBQUUsRUFBRUEsSUFBRUgsSUFBRUMsSUFBRUMsSUFBRUwsR0FBRU8sS0FBRSxJQUFHLElBQUcsVUFBVSxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsSUFBRyxJQUFHLFVBQVUsR0FBRUgsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLEtBQUksSUFBRyxXQUFXLEdBQUVKLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUMsSUFBRU4sR0FBRU8sS0FBRSxLQUFJLEdBQUUsU0FBUyxHQUFFRCxLQUFFLEVBQUVBLElBQUVILElBQUVDLElBQUVDLElBQUVMLEdBQUVPLEtBQUUsSUFBRyxJQUFHLFVBQVUsR0FBRUYsS0FBRSxFQUFFQSxJQUFFQyxJQUFFSCxJQUFFQyxJQUFFSixHQUFFTyxLQUFFLElBQUcsSUFBRyxVQUFVLEdBQUVILEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUgsSUFBRUgsR0FBRU8sS0FBRSxJQUFHLElBQUcsUUFBUSxHQUFFSixLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVDLElBQUVOLEdBQUVPLEtBQUUsSUFBRyxHQUFFLFVBQVUsR0FBRUQsS0FBRSxFQUFFQSxJQUFFSCxJQUFFQyxJQUFFQyxJQUFFTCxHQUFFTyxLQUFFLEtBQUksSUFBRyxVQUFVLEdBQUVGLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUgsSUFBRUMsSUFBRUosR0FBRU8sS0FBRSxLQUFJLElBQUcsU0FBUyxHQUFFSixLQUFFLEVBQUVBLElBQUVDLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUgsSUFBRUgsR0FBRU8sS0FBRSxJQUFHLElBQUcsVUFBVSxHQUFFRixJQUFFQyxJQUFFTixHQUFFTyxLQUFFLElBQUcsR0FBRSxVQUFVLEdBQUVELEtBQUUsRUFBRUEsSUFBRUgsSUFBRUMsSUFBRUMsSUFBRUwsR0FBRU8sS0FBRSxJQUFHLElBQUcsVUFBVSxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsS0FBSSxJQUFHLFdBQVcsR0FBRUgsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLElBQUcsSUFBRyxTQUFTLEdBQUVKLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUMsSUFBRU4sR0FBRU8sS0FBRSxLQUFJLEdBQUUsVUFBVSxHQUFFRCxLQUFFLEVBQUVBLElBQUVILElBQUVDLElBQUVDLElBQUVMLEdBQUVPLEtBQUUsSUFBRyxJQUFHLFdBQVcsR0FBRUYsS0FBRSxFQUFFQSxJQUFFQyxJQUFFSCxJQUFFQyxJQUFFSixHQUFFTyxLQUFFLEtBQUksSUFBRyxRQUFRLEdBQUVILEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUgsSUFBRUgsR0FBRU8sS0FBRSxJQUFHLElBQUcsV0FBVyxHQUFFSixLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVDLElBQUVOLEdBQUVPLEtBQUUsSUFBRyxHQUFFLFVBQVUsR0FBRUQsS0FBRSxFQUFFQSxJQUFFSCxJQUFFQyxJQUFFQyxJQUFFTCxHQUFFTyxLQUFFLEtBQUksSUFBRyxTQUFTLEdBQUVGLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUgsSUFBRUMsSUFBRUosR0FBRU8sS0FBRSxJQUFHLElBQUcsV0FBVyxHQUFFSCxLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVILElBQUVILEdBQUVPLEtBQUUsS0FBSSxJQUFHLFVBQVUsR0FBRUosS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFQyxJQUFFTixHQUFFTyxLQUFFLElBQUcsR0FBRSxVQUFVLEdBQUVELEtBQUUsRUFBRUEsSUFBRUgsSUFBRUMsSUFBRUMsSUFBRUwsR0FBRU8sS0FBRSxLQUFJLElBQUcsV0FBVyxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsSUFBRyxJQUFHLFNBQVMsR0FBRUgsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLElBQUcsSUFBRyxVQUFVLEdBQUVKLEtBQUUsRUFBRUEsSUFBRU0sRUFBQyxHQUFFTCxLQUFFLEVBQUVBLElBQUVJLEVB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LEVBQUUsRUFBRSxHQUFHTCxLQUFFRixHQUFFTyxLQUFFLElBQUcsRUFBRUwsSUFBRSxFQUFFLElBQUUsRUFBRUEsSUFBRSxFQUFFLElBQUUsRUFBRUEsSUFBRSxFQUFFLElBQUdGLEdBQUVPLEtBQUUsRUFBRSxJQUFHTCxLQUFFRixHQUFFTyxLQUFFLEtBQUksRUFBRUwsSUFBRSxDQUFDLElBQUUsRUFBRUEsSUFBRSxFQUFFLElBQUUsRUFBRUEsSUFBRSxDQUFDLEVBQUcsR0FBQ0YsR0FBRU8sS0FBRSxHQUFHLEdBQUVFLEtBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFFLEVBQUVQLEtBQUVHLElBQUUsQ0FBQyxJQUFFLEVBQUVILElBQUUsRUFBRSxJQUFFLEVBQUVBLElBQUUsRUFBRSxDQUFDLEdBQUVHLEtBQUUsSUFBRSxDQUFDQSxLQUFFLENBQUMsR0FBRUssR0FBRUgsR0FBRSxHQUFFUCxHQUFFTyxHQUFFLEdBQUVOLEtBQUUsRUFBRSxFQUFFQSxLQUFFRSxJQUFFLENBQUMsSUFBRSxFQUFFRixJQUFFLEVBQUUsSUFBRSxFQUFFQSxJQUFFLEVBQUUsR0FBRUUsS0FBRUMsS0FBRUQsS0FBRUcsS0FBRUYsS0FBRUUsRUFBQyxHQUFFLElBQUUsR0FBRSxJQUFFLEdBQUUsSUFBRUQsSUFBRUEsS0FBRSxFQUFFLEdBQUVJLEVBQUMsR0FBRSxJQUFFSCxJQUFFQSxLQUFFRixJQUFFQSxLQUFFRCxJQUFFQSxLQUFFLEVBQUVNLElBQUVSLEVBQUM7QUFBRSxZQUFBRixHQUFFLEtBQUcsRUFBRUksSUFBRUosR0FBRSxFQUFFLEdBQUVBLEdBQUUsS0FBRyxFQUFFSyxJQUFFTCxHQUFFLEVBQUUsR0FBRUEsR0FBRSxLQUFHLEVBQUVPLElBQUVQLEdBQUUsRUFBRSxHQUFFQSxHQUFFLEtBQUcsRUFBRSxHQUFFQSxHQUFFLEVBQUUsR0FBRUEsR0FBRSxLQUFHLEVBQUVNLElBQUVOLEdBQUUsRUFBRSxHQUFFQSxHQUFFLEtBQUcsRUFBRSxHQUFFQSxHQUFFLEVBQUUsR0FBRUEsR0FBRSxLQUFHLEVBQUUsR0FB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
