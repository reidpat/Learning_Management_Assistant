"use strict";
var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
const obsidian = require("obsidian");
const require$$0$1 = require("fs");
const require$$1 = require("path");
const require$$2 = require("os");
const require$$3 = require("crypto");
const _interopDefaultLegacy = (e) => e && typeof e === "object" && "default" in e ? e : { default: e };
const require$$0__default = /* @__PURE__ */ _interopDefaultLegacy(require$$0$1);
const require$$1__default = /* @__PURE__ */ _interopDefaultLegacy(require$$1);
const require$$2__default = /* @__PURE__ */ _interopDefaultLegacy(require$$2);
const require$$3__default = /* @__PURE__ */ _interopDefaultLegacy(require$$3);
var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
function getDefaultExportFromCjs(x) {
  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, "default") ? x["default"] : x;
}
var main$2 = { exports: {} };
const name$1 = "dotenv";
const version$2 = "16.1.4";
const description$1 = "Loads environment variables from .env file";
const main$1 = "lib/main.js";
const types$1 = "lib/main.d.ts";
const exports$1 = {
  ".": {
    types: "./lib/main.d.ts",
    require: "./lib/main.js",
    "default": "./lib/main.js"
  },
  "./config": "./config.js",
  "./config.js": "./config.js",
  "./lib/env-options": "./lib/env-options.js",
  "./lib/env-options.js": "./lib/env-options.js",
  "./lib/cli-options": "./lib/cli-options.js",
  "./lib/cli-options.js": "./lib/cli-options.js",
  "./package.json": "./package.json"
};
const scripts$1 = {
  "dts-check": "tsc --project tests/types/tsconfig.json",
  lint: "standard",
  "lint-readme": "standard-markdown",
  pretest: "npm run lint && npm run dts-check",
  test: "tap tests/*.js --100 -Rspec",
  prerelease: "npm test",
  release: "standard-version"
};
const repository$1 = {
  type: "git",
  url: "git://github.com/motdotla/dotenv.git"
};
const funding = "https://github.com/motdotla/dotenv?sponsor=1";
const keywords$1 = [
  "dotenv",
  "env",
  ".env",
  "environment",
  "variables",
  "config",
  "settings"
];
const readmeFilename = "README.md";
const license$1 = "BSD-2-Clause";
const devDependencies$1 = {
  "@definitelytyped/dtslint": "^0.0.133",
  "@types/node": "^18.11.3",
  decache: "^4.6.1",
  sinon: "^14.0.1",
  standard: "^17.0.0",
  "standard-markdown": "^7.1.0",
  "standard-version": "^9.5.0",
  tap: "^16.3.0",
  tar: "^6.1.11",
  typescript: "^4.8.4"
};
const engines = {
  node: ">=12"
};
const browser$1 = {
  fs: false
};
const require$$4 = {
  name: name$1,
  version: version$2,
  description: description$1,
  main: main$1,
  types: types$1,
  exports: exports$1,
  scripts: scripts$1,
  repository: repository$1,
  funding,
  keywords: keywords$1,
  readmeFilename,
  license: license$1,
  devDependencies: devDependencies$1,
  engines,
  browser: browser$1
};
const fs = require$$0__default.default;
const path = require$$1__default.default;
const os = require$$2__default.default;
const crypto$1 = require$$3__default.default;
const packageJson$1 = require$$4;
const version$1 = packageJson$1.version;
const LINE = /(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;
function parse(src) {
  const obj = {};
  let lines = src.toString();
  lines = lines.replace(/\r\n?/mg, "\n");
  let match;
  while ((match = LINE.exec(lines)) != null) {
    const key = match[1];
    let value = match[2] || "";
    value = value.trim();
    const maybeQuote = value[0];
    value = value.replace(/^(['"`])([\s\S]*)\1$/mg, "$2");
    if (maybeQuote === '"') {
      value = value.replace(/\\n/g, "\n");
      value = value.replace(/\\r/g, "\r");
    }
    obj[key] = value;
  }
  return obj;
}
function _parseVault(options2) {
  const vaultPath = _vaultPath(options2);
  const result = DotenvModule.configDotenv({ path: vaultPath });
  if (!result.parsed) {
    throw new Error(`MISSING_DATA: Cannot parse ${vaultPath} for an unknown reason`);
  }
  const keys = _dotenvKey().split(",");
  const length = keys.length;
  let decrypted;
  for (let i = 0; i < length; i++) {
    try {
      const key = keys[i].trim();
      const attrs = _instructions(result, key);
      decrypted = DotenvModule.decrypt(attrs.ciphertext, attrs.key);
      break;
    } catch (error) {
      if (i + 1 >= length) {
        throw error;
      }
    }
  }
  return DotenvModule.parse(decrypted);
}
function _log(message) {
  console.log(`[dotenv@${version$1}][INFO] ${message}`);
}
function _warn(message) {
  console.log(`[dotenv@${version$1}][WARN] ${message}`);
}
function _debug(message) {
  console.log(`[dotenv@${version$1}][DEBUG] ${message}`);
}
function _dotenvKey() {
  if (process.env.DOTENV_KEY && process.env.DOTENV_KEY.length > 0) {
    return process.env.DOTENV_KEY;
  }
  return "";
}
function _instructions(result, dotenvKey) {
  let uri;
  try {
    uri = new URL(dotenvKey);
  } catch (error) {
    if (error.code === "ERR_INVALID_URL") {
      throw new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development");
    }
    throw error;
  }
  const key = uri.password;
  if (!key) {
    throw new Error("INVALID_DOTENV_KEY: Missing key part");
  }
  const environment = uri.searchParams.get("environment");
  if (!environment) {
    throw new Error("INVALID_DOTENV_KEY: Missing environment part");
  }
  const environmentKey = `DOTENV_VAULT_${environment.toUpperCase()}`;
  const ciphertext = result.parsed[environmentKey];
  if (!ciphertext) {
    throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${environmentKey} in your .env.vault file.`);
  }
  return { ciphertext, key };
}
function _vaultPath(options2) {
  let dotenvPath = path.resolve(process.cwd(), ".env");
  if (options2 && options2.path && options2.path.length > 0) {
    dotenvPath = options2.path;
  }
  return dotenvPath.endsWith(".vault") ? dotenvPath : `${dotenvPath}.vault`;
}
function _resolveHome(envPath) {
  return envPath[0] === "~" ? path.join(os.homedir(), envPath.slice(1)) : envPath;
}
function _configVault(options2) {
  _log("Loading env from encrypted .env.vault");
  const parsed = DotenvModule._parseVault(options2);
  DotenvModule.populate(process.env, parsed, options2);
  return { parsed };
}
function configDotenv(options2) {
  let dotenvPath = path.resolve(process.cwd(), ".env");
  let encoding = "utf8";
  const debug = Boolean(options2 && options2.debug);
  if (options2) {
    if (options2.path != null) {
      dotenvPath = _resolveHome(options2.path);
    }
    if (options2.encoding != null) {
      encoding = options2.encoding;
    }
  }
  try {
    const parsed = DotenvModule.parse(fs.readFileSync(dotenvPath, { encoding }));
    DotenvModule.populate(process.env, parsed, options2);
    return { parsed };
  } catch (e) {
    if (debug) {
      _debug(`Failed to load ${dotenvPath} ${e.message}`);
    }
    return { error: e };
  }
}
function config(options2) {
  const vaultPath = _vaultPath(options2);
  if (_dotenvKey().length === 0) {
    return DotenvModule.configDotenv(options2);
  }
  if (!fs.existsSync(vaultPath)) {
    _warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${vaultPath}. Did you forget to build it?`);
    return DotenvModule.configDotenv(options2);
  }
  return DotenvModule._configVault(options2);
}
function decrypt(encrypted, keyStr) {
  const key = Buffer.from(keyStr.slice(-64), "hex");
  let ciphertext = Buffer.from(encrypted, "base64");
  const nonce = ciphertext.slice(0, 12);
  const authTag = ciphertext.slice(-16);
  ciphertext = ciphertext.slice(12, -16);
  try {
    const aesgcm = crypto$1.createDecipheriv("aes-256-gcm", key, nonce);
    aesgcm.setAuthTag(authTag);
    return `${aesgcm.update(ciphertext)}${aesgcm.final()}`;
  } catch (error) {
    const isRange = error instanceof RangeError;
    const invalidKeyLength = error.message === "Invalid key length";
    const decryptionFailed = error.message === "Unsupported state or unable to authenticate data";
    if (isRange || invalidKeyLength) {
      const msg = "INVALID_DOTENV_KEY: It must be 64 characters long (or more)";
      throw new Error(msg);
    } else if (decryptionFailed) {
      const msg = "DECRYPTION_FAILED: Please check your DOTENV_KEY";
      throw new Error(msg);
    } else {
      console.error("Error: ", error.code);
      console.error("Error: ", error.message);
      throw error;
    }
  }
}
function populate(processEnv, parsed, options2 = {}) {
  const debug = Boolean(options2 && options2.debug);
  const override = Boolean(options2 && options2.override);
  if (typeof parsed !== "object") {
    throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");
  }
  for (const key of Object.keys(parsed)) {
    if (Object.prototype.hasOwnProperty.call(processEnv, key)) {
      if (override === true) {
        processEnv[key] = parsed[key];
      }
      if (debug) {
        if (override === true) {
          _debug(`"${key}" is already defined and WAS overwritten`);
        } else {
          _debug(`"${key}" is already defined and was NOT overwritten`);
        }
      }
    } else {
      processEnv[key] = parsed[key];
    }
  }
}
const DotenvModule = {
  configDotenv,
  _configVault,
  _parseVault,
  config,
  decrypt,
  parse,
  populate
};
main$2.exports.configDotenv = DotenvModule.configDotenv;
main$2.exports._configVault = DotenvModule._configVault;
main$2.exports._parseVault = DotenvModule._parseVault;
main$2.exports.config = DotenvModule.config;
main$2.exports.decrypt = DotenvModule.decrypt;
main$2.exports.parse = DotenvModule.parse;
main$2.exports.populate = DotenvModule.populate;
main$2.exports = DotenvModule;
const options = {};
if (process.env.DOTENV_CONFIG_ENCODING != null) {
  options.encoding = process.env.DOTENV_CONFIG_ENCODING;
}
if (process.env.DOTENV_CONFIG_PATH != null) {
  options.path = process.env.DOTENV_CONFIG_PATH;
}
if (process.env.DOTENV_CONFIG_DEBUG != null) {
  options.debug = process.env.DOTENV_CONFIG_DEBUG;
}
if (process.env.DOTENV_CONFIG_OVERRIDE != null) {
  options.override = process.env.DOTENV_CONFIG_OVERRIDE;
}
var envOptions = options;
const re = /^dotenv_config_(encoding|path|debug|override)=(.+)$/;
var cliOptions = function optionMatcher(args) {
  return args.reduce(function(acc, cur) {
    const matches = cur.match(re);
    if (matches) {
      acc[matches[1]] = matches[2];
    }
    return acc;
  }, {});
};
(function() {
  main$2.exports.config(
    Object.assign(
      {},
      envOptions,
      cliOptions(process.argv)
    )
  );
})();
function noop() {
}
function run(fn) {
  return fn();
}
function blank_object() {
  return /* @__PURE__ */ Object.create(null);
}
function run_all(fns) {
  fns.forEach(run);
}
function is_function(thing) {
  return typeof thing === "function";
}
function safe_not_equal(a, b) {
  return a != a ? b == b : a !== b || (a && typeof a === "object" || typeof a === "function");
}
function is_empty(obj) {
  return Object.keys(obj).length === 0;
}
function append(target, node) {
  target.appendChild(node);
}
function insert(target, node, anchor) {
  target.insertBefore(node, anchor || null);
}
function detach(node) {
  node.parentNode.removeChild(node);
}
function element(name2) {
  return document.createElement(name2);
}
function text(data2) {
  return document.createTextNode(data2);
}
function space() {
  return text(" ");
}
function listen(node, event, handler, options2) {
  node.addEventListener(event, handler, options2);
  return () => node.removeEventListener(event, handler, options2);
}
function attr(node, attribute, value) {
  if (value == null)
    node.removeAttribute(attribute);
  else if (node.getAttribute(attribute) !== value)
    node.setAttribute(attribute, value);
}
function children(element2) {
  return Array.from(element2.childNodes);
}
function set_data(text2, data2) {
  data2 = "" + data2;
  if (text2.wholeText !== data2)
    text2.data = data2;
}
function set_input_value(input, value) {
  input.value = value == null ? "" : value;
}
let current_component;
function set_current_component(component) {
  current_component = component;
}
const dirty_components = [];
const binding_callbacks = [];
const render_callbacks = [];
const flush_callbacks = [];
const resolved_promise = Promise.resolve();
let update_scheduled = false;
function schedule_update() {
  if (!update_scheduled) {
    update_scheduled = true;
    resolved_promise.then(flush);
  }
}
function add_render_callback(fn) {
  render_callbacks.push(fn);
}
const seen_callbacks = /* @__PURE__ */ new Set();
let flushidx = 0;
function flush() {
  const saved_component = current_component;
  do {
    while (flushidx < dirty_components.length) {
      const component = dirty_components[flushidx];
      flushidx++;
      set_current_component(component);
      update(component.$$);
    }
    set_current_component(null);
    dirty_components.length = 0;
    flushidx = 0;
    while (binding_callbacks.length)
      binding_callbacks.pop()();
    for (let i = 0; i < render_callbacks.length; i += 1) {
      const callback = render_callbacks[i];
      if (!seen_callbacks.has(callback)) {
        seen_callbacks.add(callback);
        callback();
      }
    }
    render_callbacks.length = 0;
  } while (dirty_components.length);
  while (flush_callbacks.length) {
    flush_callbacks.pop()();
  }
  update_scheduled = false;
  seen_callbacks.clear();
  set_current_component(saved_component);
}
function update($$) {
  if ($$.fragment !== null) {
    $$.update();
    run_all($$.before_update);
    const dirty = $$.dirty;
    $$.dirty = [-1];
    $$.fragment && $$.fragment.p($$.ctx, dirty);
    $$.after_update.forEach(add_render_callback);
  }
}
const outroing = /* @__PURE__ */ new Set();
function transition_in(block, local) {
  if (block && block.i) {
    outroing.delete(block);
    block.i(local);
  }
}
function mount_component(component, target, anchor, customElement) {
  const { fragment, on_mount, on_destroy, after_update } = component.$$;
  fragment && fragment.m(target, anchor);
  if (!customElement) {
    add_render_callback(() => {
      const new_on_destroy = on_mount.map(run).filter(is_function);
      if (on_destroy) {
        on_destroy.push(...new_on_destroy);
      } else {
        run_all(new_on_destroy);
      }
      component.$$.on_mount = [];
    });
  }
  after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
  const $$ = component.$$;
  if ($$.fragment !== null) {
    run_all($$.on_destroy);
    $$.fragment && $$.fragment.d(detaching);
    $$.on_destroy = $$.fragment = null;
    $$.ctx = [];
  }
}
function make_dirty(component, i) {
  if (component.$$.dirty[0] === -1) {
    dirty_components.push(component);
    schedule_update();
    component.$$.dirty.fill(0);
  }
  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;
}
function init(component, options2, instance2, create_fragment2, not_equal, props, append_styles, dirty = [-1]) {
  const parent_component = current_component;
  set_current_component(component);
  const $$ = component.$$ = {
    fragment: null,
    ctx: null,
    props,
    update: noop,
    not_equal,
    bound: blank_object(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(options2.context || (parent_component ? parent_component.$$.context : [])),
    callbacks: blank_object(),
    dirty,
    skip_bound: false,
    root: options2.target || parent_component.$$.root
  };
  append_styles && append_styles($$.root);
  let ready = false;
  $$.ctx = instance2 ? instance2(component, options2.props || {}, (i, ret, ...rest) => {
    const value = rest.length ? rest[0] : ret;
    if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
      if (!$$.skip_bound && $$.bound[i])
        $$.bound[i](value);
      if (ready)
        make_dirty(component, i);
    }
    return ret;
  }) : [];
  $$.update();
  ready = true;
  run_all($$.before_update);
  $$.fragment = create_fragment2 ? create_fragment2($$.ctx) : false;
  if (options2.target) {
    if (options2.hydrate) {
      const nodes = children(options2.target);
      $$.fragment && $$.fragment.l(nodes);
      nodes.forEach(detach);
    } else {
      $$.fragment && $$.fragment.c();
    }
    if (options2.intro)
      transition_in(component.$$.fragment);
    mount_component(component, options2.target, options2.anchor, options2.customElement);
    flush();
  }
  set_current_component(parent_component);
}
class SvelteComponent {
  $destroy() {
    destroy_component(this, 1);
    this.$destroy = noop;
  }
  $on(type, callback) {
    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
    callbacks.push(callback);
    return () => {
      const index = callbacks.indexOf(callback);
      if (index !== -1)
        callbacks.splice(index, 1);
    };
  }
  $set($$props) {
    if (this.$$set && !is_empty($$props)) {
      this.$$.skip_bound = true;
      this.$$set($$props);
      this.$$.skip_bound = false;
    }
  }
}
function __awaiter$1(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}
var dist$1 = {};
var api = {};
var axios$3 = { exports: {} };
var axios$2 = { exports: {} };
var bind$2 = function bind(fn, thisArg) {
  return function wrap2() {
    var args = new Array(arguments.length);
    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i];
    }
    return fn.apply(thisArg, args);
  };
};
var bind$1 = bind$2;
var toString$1 = Object.prototype.toString;
function isArray$1(val) {
  return Array.isArray(val);
}
function isUndefined$1(val) {
  return typeof val === "undefined";
}
function isBuffer(val) {
  return val !== null && !isUndefined$1(val) && val.constructor !== null && !isUndefined$1(val.constructor) && typeof val.constructor.isBuffer === "function" && val.constructor.isBuffer(val);
}
function isArrayBuffer(val) {
  return toString$1.call(val) === "[object ArrayBuffer]";
}
function isFormData$1(val) {
  return toString$1.call(val) === "[object FormData]";
}
function isArrayBufferView(val) {
  var result;
  if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
    result = ArrayBuffer.isView(val);
  } else {
    result = val && val.buffer && isArrayBuffer(val.buffer);
  }
  return result;
}
function isString(val) {
  return typeof val === "string";
}
function isNumber(val) {
  return typeof val === "number";
}
function isObject$1(val) {
  return val !== null && typeof val === "object";
}
function isPlainObject(val) {
  if (toString$1.call(val) !== "[object Object]") {
    return false;
  }
  var prototype = Object.getPrototypeOf(val);
  return prototype === null || prototype === Object.prototype;
}
function isDate$1(val) {
  return toString$1.call(val) === "[object Date]";
}
function isFile(val) {
  return toString$1.call(val) === "[object File]";
}
function isBlob(val) {
  return toString$1.call(val) === "[object Blob]";
}
function isFunction(val) {
  return toString$1.call(val) === "[object Function]";
}
function isStream(val) {
  return isObject$1(val) && isFunction(val.pipe);
}
function isURLSearchParams$1(val) {
  return toString$1.call(val) === "[object URLSearchParams]";
}
function trim(str) {
  return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, "");
}
function isStandardBrowserEnv$1() {
  if (typeof navigator !== "undefined" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS")) {
    return false;
  }
  return typeof window !== "undefined" && typeof document !== "undefined";
}
function forEach$1(obj, fn) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray$1(obj)) {
    for (var i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        fn.call(null, obj[key], key, obj);
      }
    }
  }
}
function merge() {
  var result = {};
  function assignValue(val, key) {
    if (isPlainObject(result[key]) && isPlainObject(val)) {
      result[key] = merge(result[key], val);
    } else if (isPlainObject(val)) {
      result[key] = merge({}, val);
    } else if (isArray$1(val)) {
      result[key] = val.slice();
    } else {
      result[key] = val;
    }
  }
  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach$1(arguments[i], assignValue);
  }
  return result;
}
function extend(a, b, thisArg) {
  forEach$1(b, function assignValue(val, key) {
    if (thisArg && typeof val === "function") {
      a[key] = bind$1(val, thisArg);
    } else {
      a[key] = val;
    }
  });
  return a;
}
function stripBOM(content) {
  if (content.charCodeAt(0) === 65279) {
    content = content.slice(1);
  }
  return content;
}
var utils$9 = {
  isArray: isArray$1,
  isArrayBuffer,
  isBuffer,
  isFormData: isFormData$1,
  isArrayBufferView,
  isString,
  isNumber,
  isObject: isObject$1,
  isPlainObject,
  isUndefined: isUndefined$1,
  isDate: isDate$1,
  isFile,
  isBlob,
  isFunction,
  isStream,
  isURLSearchParams: isURLSearchParams$1,
  isStandardBrowserEnv: isStandardBrowserEnv$1,
  forEach: forEach$1,
  merge,
  extend,
  trim,
  stripBOM
};
var utils$8 = utils$9;
function encode$1(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
var buildURL$2 = function buildURL(url, params, paramsSerializer) {
  if (!params) {
    return url;
  }
  var serializedParams;
  if (paramsSerializer) {
    serializedParams = paramsSerializer(params);
  } else if (utils$8.isURLSearchParams(params)) {
    serializedParams = params.toString();
  } else {
    var parts = [];
    utils$8.forEach(params, function serialize(val, key) {
      if (val === null || typeof val === "undefined") {
        return;
      }
      if (utils$8.isArray(val)) {
        key = key + "[]";
      } else {
        val = [val];
      }
      utils$8.forEach(val, function parseValue(v) {
        if (utils$8.isDate(v)) {
          v = v.toISOString();
        } else if (utils$8.isObject(v)) {
          v = JSON.stringify(v);
        }
        parts.push(encode$1(key) + "=" + encode$1(v));
      });
    });
    serializedParams = parts.join("&");
  }
  if (serializedParams) {
    var hashmarkIndex = url.indexOf("#");
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url;
};
var utils$7 = utils$9;
function InterceptorManager$1() {
  this.handlers = [];
}
InterceptorManager$1.prototype.use = function use(fulfilled, rejected, options2) {
  this.handlers.push({
    fulfilled,
    rejected,
    synchronous: options2 ? options2.synchronous : false,
    runWhen: options2 ? options2.runWhen : null
  });
  return this.handlers.length - 1;
};
InterceptorManager$1.prototype.eject = function eject(id) {
  if (this.handlers[id]) {
    this.handlers[id] = null;
  }
};
InterceptorManager$1.prototype.forEach = function forEach(fn) {
  utils$7.forEach(this.handlers, function forEachHandler(h) {
    if (h !== null) {
      fn(h);
    }
  });
};
var InterceptorManager_1 = InterceptorManager$1;
var utils$6 = utils$9;
var normalizeHeaderName$1 = function normalizeHeaderName(headers, normalizedName) {
  utils$6.forEach(headers, function processHeader(value, name2) {
    if (name2 !== normalizedName && name2.toUpperCase() === normalizedName.toUpperCase()) {
      headers[normalizedName] = value;
      delete headers[name2];
    }
  });
};
var enhanceError$2 = function enhanceError(error, config2, code2, request2, response) {
  error.config = config2;
  if (code2) {
    error.code = code2;
  }
  error.request = request2;
  error.response = response;
  error.isAxiosError = true;
  error.toJSON = function toJSON() {
    return {
      message: this.message,
      name: this.name,
      description: this.description,
      number: this.number,
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      config: this.config,
      code: this.code,
      status: this.response && this.response.status ? this.response.status : null
    };
  };
  return error;
};
var transitional = {
  silentJSONParsing: true,
  forcedJSONParsing: true,
  clarifyTimeoutError: false
};
var createError$1;
var hasRequiredCreateError;
function requireCreateError() {
  if (hasRequiredCreateError)
    return createError$1;
  hasRequiredCreateError = 1;
  var enhanceError3 = enhanceError$2;
  createError$1 = function createError2(message, config2, code2, request2, response) {
    var error = new Error(message);
    return enhanceError3(error, config2, code2, request2, response);
  };
  return createError$1;
}
var settle$1;
var hasRequiredSettle;
function requireSettle() {
  if (hasRequiredSettle)
    return settle$1;
  hasRequiredSettle = 1;
  var createError2 = requireCreateError();
  settle$1 = function settle2(resolve, reject, response) {
    var validateStatus2 = response.config.validateStatus;
    if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
      resolve(response);
    } else {
      reject(createError2(
        "Request failed with status code " + response.status,
        response.config,
        null,
        response.request,
        response
      ));
    }
  };
  return settle$1;
}
var cookies;
var hasRequiredCookies;
function requireCookies() {
  if (hasRequiredCookies)
    return cookies;
  hasRequiredCookies = 1;
  var utils2 = utils$9;
  cookies = utils2.isStandardBrowserEnv() ? function standardBrowserEnv() {
    return {
      write: function write(name2, value, expires, path2, domain, secure) {
        var cookie = [];
        cookie.push(name2 + "=" + encodeURIComponent(value));
        if (utils2.isNumber(expires)) {
          cookie.push("expires=" + new Date(expires).toGMTString());
        }
        if (utils2.isString(path2)) {
          cookie.push("path=" + path2);
        }
        if (utils2.isString(domain)) {
          cookie.push("domain=" + domain);
        }
        if (secure === true) {
          cookie.push("secure");
        }
        document.cookie = cookie.join("; ");
      },
      read: function read(name2) {
        var match = document.cookie.match(new RegExp("(^|;\\s*)(" + name2 + ")=([^;]*)"));
        return match ? decodeURIComponent(match[3]) : null;
      },
      remove: function remove(name2) {
        this.write(name2, "", Date.now() - 864e5);
      }
    };
  }() : function nonStandardBrowserEnv() {
    return {
      write: function write() {
      },
      read: function read() {
        return null;
      },
      remove: function remove() {
      }
    };
  }();
  return cookies;
}
var isAbsoluteURL$1;
var hasRequiredIsAbsoluteURL;
function requireIsAbsoluteURL() {
  if (hasRequiredIsAbsoluteURL)
    return isAbsoluteURL$1;
  hasRequiredIsAbsoluteURL = 1;
  isAbsoluteURL$1 = function isAbsoluteURL2(url) {
    return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
  };
  return isAbsoluteURL$1;
}
var combineURLs$1;
var hasRequiredCombineURLs;
function requireCombineURLs() {
  if (hasRequiredCombineURLs)
    return combineURLs$1;
  hasRequiredCombineURLs = 1;
  combineURLs$1 = function combineURLs2(baseURL, relativeURL) {
    return relativeURL ? baseURL.replace(/\/+$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
  };
  return combineURLs$1;
}
var buildFullPath$1;
var hasRequiredBuildFullPath;
function requireBuildFullPath() {
  if (hasRequiredBuildFullPath)
    return buildFullPath$1;
  hasRequiredBuildFullPath = 1;
  var isAbsoluteURL2 = requireIsAbsoluteURL();
  var combineURLs2 = requireCombineURLs();
  buildFullPath$1 = function buildFullPath2(baseURL, requestedURL) {
    if (baseURL && !isAbsoluteURL2(requestedURL)) {
      return combineURLs2(baseURL, requestedURL);
    }
    return requestedURL;
  };
  return buildFullPath$1;
}
var parseHeaders;
var hasRequiredParseHeaders;
function requireParseHeaders() {
  if (hasRequiredParseHeaders)
    return parseHeaders;
  hasRequiredParseHeaders = 1;
  var utils2 = utils$9;
  var ignoreDuplicateOf = [
    "age",
    "authorization",
    "content-length",
    "content-type",
    "etag",
    "expires",
    "from",
    "host",
    "if-modified-since",
    "if-unmodified-since",
    "last-modified",
    "location",
    "max-forwards",
    "proxy-authorization",
    "referer",
    "retry-after",
    "user-agent"
  ];
  parseHeaders = function parseHeaders2(headers) {
    var parsed = {};
    var key;
    var val;
    var i;
    if (!headers) {
      return parsed;
    }
    utils2.forEach(headers.split("\n"), function parser(line) {
      i = line.indexOf(":");
      key = utils2.trim(line.substr(0, i)).toLowerCase();
      val = utils2.trim(line.substr(i + 1));
      if (key) {
        if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
          return;
        }
        if (key === "set-cookie") {
          parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
        } else {
          parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
        }
      }
    });
    return parsed;
  };
  return parseHeaders;
}
var isURLSameOrigin;
var hasRequiredIsURLSameOrigin;
function requireIsURLSameOrigin() {
  if (hasRequiredIsURLSameOrigin)
    return isURLSameOrigin;
  hasRequiredIsURLSameOrigin = 1;
  var utils2 = utils$9;
  isURLSameOrigin = utils2.isStandardBrowserEnv() ? function standardBrowserEnv() {
    var msie = /(msie|trident)/i.test(navigator.userAgent);
    var urlParsingNode = document.createElement("a");
    var originURL;
    function resolveURL(url) {
      var href = url;
      if (msie) {
        urlParsingNode.setAttribute("href", href);
        href = urlParsingNode.href;
      }
      urlParsingNode.setAttribute("href", href);
      return {
        href: urlParsingNode.href,
        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, "") : "",
        host: urlParsingNode.host,
        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, "") : "",
        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, "") : "",
        hostname: urlParsingNode.hostname,
        port: urlParsingNode.port,
        pathname: urlParsingNode.pathname.charAt(0) === "/" ? urlParsingNode.pathname : "/" + urlParsingNode.pathname
      };
    }
    originURL = resolveURL(window.location.href);
    return function isURLSameOrigin2(requestURL) {
      var parsed = utils2.isString(requestURL) ? resolveURL(requestURL) : requestURL;
      return parsed.protocol === originURL.protocol && parsed.host === originURL.host;
    };
  }() : function nonStandardBrowserEnv() {
    return function isURLSameOrigin2() {
      return true;
    };
  }();
  return isURLSameOrigin;
}
var Cancel_1;
var hasRequiredCancel;
function requireCancel() {
  if (hasRequiredCancel)
    return Cancel_1;
  hasRequiredCancel = 1;
  function Cancel2(message) {
    this.message = message;
  }
  Cancel2.prototype.toString = function toString2() {
    return "Cancel" + (this.message ? ": " + this.message : "");
  };
  Cancel2.prototype.__CANCEL__ = true;
  Cancel_1 = Cancel2;
  return Cancel_1;
}
var xhr;
var hasRequiredXhr;
function requireXhr() {
  if (hasRequiredXhr)
    return xhr;
  hasRequiredXhr = 1;
  var utils2 = utils$9;
  var settle2 = requireSettle();
  var cookies2 = requireCookies();
  var buildURL3 = buildURL$2;
  var buildFullPath2 = requireBuildFullPath();
  var parseHeaders2 = requireParseHeaders();
  var isURLSameOrigin2 = requireIsURLSameOrigin();
  var createError2 = requireCreateError();
  var transitionalDefaults2 = transitional;
  var Cancel2 = requireCancel();
  xhr = function xhrAdapter(config2) {
    return new Promise(function dispatchXhrRequest(resolve, reject) {
      var requestData = config2.data;
      var requestHeaders = config2.headers;
      var responseType = config2.responseType;
      var onCanceled;
      function done() {
        if (config2.cancelToken) {
          config2.cancelToken.unsubscribe(onCanceled);
        }
        if (config2.signal) {
          config2.signal.removeEventListener("abort", onCanceled);
        }
      }
      if (utils2.isFormData(requestData)) {
        delete requestHeaders["Content-Type"];
      }
      var request2 = new XMLHttpRequest();
      if (config2.auth) {
        var username = config2.auth.username || "";
        var password = config2.auth.password ? unescape(encodeURIComponent(config2.auth.password)) : "";
        requestHeaders.Authorization = "Basic " + btoa(username + ":" + password);
      }
      var fullPath = buildFullPath2(config2.baseURL, config2.url);
      request2.open(config2.method.toUpperCase(), buildURL3(fullPath, config2.params, config2.paramsSerializer), true);
      request2.timeout = config2.timeout;
      function onloadend() {
        if (!request2) {
          return;
        }
        var responseHeaders = "getAllResponseHeaders" in request2 ? parseHeaders2(request2.getAllResponseHeaders()) : null;
        var responseData = !responseType || responseType === "text" || responseType === "json" ? request2.responseText : request2.response;
        var response = {
          data: responseData,
          status: request2.status,
          statusText: request2.statusText,
          headers: responseHeaders,
          config: config2,
          request: request2
        };
        settle2(function _resolve(value) {
          resolve(value);
          done();
        }, function _reject(err) {
          reject(err);
          done();
        }, response);
        request2 = null;
      }
      if ("onloadend" in request2) {
        request2.onloadend = onloadend;
      } else {
        request2.onreadystatechange = function handleLoad() {
          if (!request2 || request2.readyState !== 4) {
            return;
          }
          if (request2.status === 0 && !(request2.responseURL && request2.responseURL.indexOf("file:") === 0)) {
            return;
          }
          setTimeout(onloadend);
        };
      }
      request2.onabort = function handleAbort() {
        if (!request2) {
          return;
        }
        reject(createError2("Request aborted", config2, "ECONNABORTED", request2));
        request2 = null;
      };
      request2.onerror = function handleError() {
        reject(createError2("Network Error", config2, null, request2));
        request2 = null;
      };
      request2.ontimeout = function handleTimeout() {
        var timeoutErrorMessage = config2.timeout ? "timeout of " + config2.timeout + "ms exceeded" : "timeout exceeded";
        var transitional3 = config2.transitional || transitionalDefaults2;
        if (config2.timeoutErrorMessage) {
          timeoutErrorMessage = config2.timeoutErrorMessage;
        }
        reject(createError2(
          timeoutErrorMessage,
          config2,
          transitional3.clarifyTimeoutError ? "ETIMEDOUT" : "ECONNABORTED",
          request2
        ));
        request2 = null;
      };
      if (utils2.isStandardBrowserEnv()) {
        var xsrfValue = (config2.withCredentials || isURLSameOrigin2(fullPath)) && config2.xsrfCookieName ? cookies2.read(config2.xsrfCookieName) : void 0;
        if (xsrfValue) {
          requestHeaders[config2.xsrfHeaderName] = xsrfValue;
        }
      }
      if ("setRequestHeader" in request2) {
        utils2.forEach(requestHeaders, function setRequestHeader(val, key) {
          if (typeof requestData === "undefined" && key.toLowerCase() === "content-type") {
            delete requestHeaders[key];
          } else {
            request2.setRequestHeader(key, val);
          }
        });
      }
      if (!utils2.isUndefined(config2.withCredentials)) {
        request2.withCredentials = !!config2.withCredentials;
      }
      if (responseType && responseType !== "json") {
        request2.responseType = config2.responseType;
      }
      if (typeof config2.onDownloadProgress === "function") {
        request2.addEventListener("progress", config2.onDownloadProgress);
      }
      if (typeof config2.onUploadProgress === "function" && request2.upload) {
        request2.upload.addEventListener("progress", config2.onUploadProgress);
      }
      if (config2.cancelToken || config2.signal) {
        onCanceled = function(cancel) {
          if (!request2) {
            return;
          }
          reject(!cancel || cancel && cancel.type ? new Cancel2("canceled") : cancel);
          request2.abort();
          request2 = null;
        };
        config2.cancelToken && config2.cancelToken.subscribe(onCanceled);
        if (config2.signal) {
          config2.signal.aborted ? onCanceled() : config2.signal.addEventListener("abort", onCanceled);
        }
      }
      if (!requestData) {
        requestData = null;
      }
      request2.send(requestData);
    });
  };
  return xhr;
}
var utils$5 = utils$9;
var normalizeHeaderName2 = normalizeHeaderName$1;
var enhanceError$1 = enhanceError$2;
var transitionalDefaults = transitional;
var DEFAULT_CONTENT_TYPE = {
  "Content-Type": "application/x-www-form-urlencoded"
};
function setContentTypeIfUnset(headers, value) {
  if (!utils$5.isUndefined(headers) && utils$5.isUndefined(headers["Content-Type"])) {
    headers["Content-Type"] = value;
  }
}
function getDefaultAdapter() {
  var adapter;
  if (typeof XMLHttpRequest !== "undefined") {
    adapter = requireXhr();
  } else if (typeof process !== "undefined" && Object.prototype.toString.call(process) === "[object process]") {
    adapter = requireXhr();
  }
  return adapter;
}
function stringifySafely(rawValue, parser, encoder) {
  if (utils$5.isString(rawValue)) {
    try {
      (parser || JSON.parse)(rawValue);
      return utils$5.trim(rawValue);
    } catch (e) {
      if (e.name !== "SyntaxError") {
        throw e;
      }
    }
  }
  return (encoder || JSON.stringify)(rawValue);
}
var defaults$3 = {
  transitional: transitionalDefaults,
  adapter: getDefaultAdapter(),
  transformRequest: [function transformRequest(data2, headers) {
    normalizeHeaderName2(headers, "Accept");
    normalizeHeaderName2(headers, "Content-Type");
    if (utils$5.isFormData(data2) || utils$5.isArrayBuffer(data2) || utils$5.isBuffer(data2) || utils$5.isStream(data2) || utils$5.isFile(data2) || utils$5.isBlob(data2)) {
      return data2;
    }
    if (utils$5.isArrayBufferView(data2)) {
      return data2.buffer;
    }
    if (utils$5.isURLSearchParams(data2)) {
      setContentTypeIfUnset(headers, "application/x-www-form-urlencoded;charset=utf-8");
      return data2.toString();
    }
    if (utils$5.isObject(data2) || headers && headers["Content-Type"] === "application/json") {
      setContentTypeIfUnset(headers, "application/json");
      return stringifySafely(data2);
    }
    return data2;
  }],
  transformResponse: [function transformResponse(data2) {
    var transitional3 = this.transitional || defaults$3.transitional;
    var silentJSONParsing = transitional3 && transitional3.silentJSONParsing;
    var forcedJSONParsing = transitional3 && transitional3.forcedJSONParsing;
    var strictJSONParsing = !silentJSONParsing && this.responseType === "json";
    if (strictJSONParsing || forcedJSONParsing && utils$5.isString(data2) && data2.length) {
      try {
        return JSON.parse(data2);
      } catch (e) {
        if (strictJSONParsing) {
          if (e.name === "SyntaxError") {
            throw enhanceError$1(e, this, "E_JSON_PARSE");
          }
          throw e;
        }
      }
    }
    return data2;
  }],
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  },
  headers: {
    common: {
      "Accept": "application/json, text/plain, */*"
    }
  }
};
utils$5.forEach(["delete", "get", "head"], function forEachMethodNoData(method) {
  defaults$3.headers[method] = {};
});
utils$5.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
  defaults$3.headers[method] = utils$5.merge(DEFAULT_CONTENT_TYPE);
});
var defaults_1 = defaults$3;
var utils$4 = utils$9;
var defaults$2 = defaults_1;
var transformData$1 = function transformData(data2, headers, fns) {
  var context = this || defaults$2;
  utils$4.forEach(fns, function transform(fn) {
    data2 = fn.call(context, data2, headers);
  });
  return data2;
};
var isCancel$1;
var hasRequiredIsCancel;
function requireIsCancel() {
  if (hasRequiredIsCancel)
    return isCancel$1;
  hasRequiredIsCancel = 1;
  isCancel$1 = function isCancel2(value) {
    return !!(value && value.__CANCEL__);
  };
  return isCancel$1;
}
var utils$3 = utils$9;
var transformData2 = transformData$1;
var isCancel = requireIsCancel();
var defaults$1 = defaults_1;
var Cancel = requireCancel();
function throwIfCancellationRequested(config2) {
  if (config2.cancelToken) {
    config2.cancelToken.throwIfRequested();
  }
  if (config2.signal && config2.signal.aborted) {
    throw new Cancel("canceled");
  }
}
var dispatchRequest$1 = function dispatchRequest(config2) {
  throwIfCancellationRequested(config2);
  config2.headers = config2.headers || {};
  config2.data = transformData2.call(
    config2,
    config2.data,
    config2.headers,
    config2.transformRequest
  );
  config2.headers = utils$3.merge(
    config2.headers.common || {},
    config2.headers[config2.method] || {},
    config2.headers
  );
  utils$3.forEach(
    ["delete", "get", "head", "post", "put", "patch", "common"],
    function cleanHeaderConfig(method) {
      delete config2.headers[method];
    }
  );
  var adapter = config2.adapter || defaults$1.adapter;
  return adapter(config2).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config2);
    response.data = transformData2.call(
      config2,
      response.data,
      response.headers,
      config2.transformResponse
    );
    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config2);
      if (reason && reason.response) {
        reason.response.data = transformData2.call(
          config2,
          reason.response.data,
          reason.response.headers,
          config2.transformResponse
        );
      }
    }
    return Promise.reject(reason);
  });
};
var utils$2 = utils$9;
var mergeConfig$2 = function mergeConfig(config1, config2) {
  config2 = config2 || {};
  var config3 = {};
  function getMergedValue(target, source) {
    if (utils$2.isPlainObject(target) && utils$2.isPlainObject(source)) {
      return utils$2.merge(target, source);
    } else if (utils$2.isPlainObject(source)) {
      return utils$2.merge({}, source);
    } else if (utils$2.isArray(source)) {
      return source.slice();
    }
    return source;
  }
  function mergeDeepProperties(prop) {
    if (!utils$2.isUndefined(config2[prop])) {
      return getMergedValue(config1[prop], config2[prop]);
    } else if (!utils$2.isUndefined(config1[prop])) {
      return getMergedValue(void 0, config1[prop]);
    }
  }
  function valueFromConfig2(prop) {
    if (!utils$2.isUndefined(config2[prop])) {
      return getMergedValue(void 0, config2[prop]);
    }
  }
  function defaultToConfig2(prop) {
    if (!utils$2.isUndefined(config2[prop])) {
      return getMergedValue(void 0, config2[prop]);
    } else if (!utils$2.isUndefined(config1[prop])) {
      return getMergedValue(void 0, config1[prop]);
    }
  }
  function mergeDirectKeys(prop) {
    if (prop in config2) {
      return getMergedValue(config1[prop], config2[prop]);
    } else if (prop in config1) {
      return getMergedValue(void 0, config1[prop]);
    }
  }
  var mergeMap = {
    "url": valueFromConfig2,
    "method": valueFromConfig2,
    "data": valueFromConfig2,
    "baseURL": defaultToConfig2,
    "transformRequest": defaultToConfig2,
    "transformResponse": defaultToConfig2,
    "paramsSerializer": defaultToConfig2,
    "timeout": defaultToConfig2,
    "timeoutMessage": defaultToConfig2,
    "withCredentials": defaultToConfig2,
    "adapter": defaultToConfig2,
    "responseType": defaultToConfig2,
    "xsrfCookieName": defaultToConfig2,
    "xsrfHeaderName": defaultToConfig2,
    "onUploadProgress": defaultToConfig2,
    "onDownloadProgress": defaultToConfig2,
    "decompress": defaultToConfig2,
    "maxContentLength": defaultToConfig2,
    "maxBodyLength": defaultToConfig2,
    "transport": defaultToConfig2,
    "httpAgent": defaultToConfig2,
    "httpsAgent": defaultToConfig2,
    "cancelToken": defaultToConfig2,
    "socketPath": defaultToConfig2,
    "responseEncoding": defaultToConfig2,
    "validateStatus": mergeDirectKeys
  };
  utils$2.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {
    var merge2 = mergeMap[prop] || mergeDeepProperties;
    var configValue = merge2(prop);
    utils$2.isUndefined(configValue) && merge2 !== mergeDirectKeys || (config3[prop] = configValue);
  });
  return config3;
};
var data;
var hasRequiredData;
function requireData() {
  if (hasRequiredData)
    return data;
  hasRequiredData = 1;
  data = {
    "version": "0.26.1"
  };
  return data;
}
var VERSION = requireData().version;
var validators$1 = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach(function(type, i) {
  validators$1[type] = function validator2(thing) {
    return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
  };
});
var deprecatedWarnings = {};
validators$1.transitional = function transitional2(validator2, version2, message) {
  function formatMessage(opt, desc) {
    return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
  }
  return function(value, opt, opts) {
    if (validator2 === false) {
      throw new Error(formatMessage(opt, " has been removed" + (version2 ? " in " + version2 : "")));
    }
    if (version2 && !deprecatedWarnings[opt]) {
      deprecatedWarnings[opt] = true;
      console.warn(
        formatMessage(
          opt,
          " has been deprecated since v" + version2 + " and will be removed in the near future"
        )
      );
    }
    return validator2 ? validator2(value, opt, opts) : true;
  };
};
function assertOptions(options2, schema, allowUnknown) {
  if (typeof options2 !== "object") {
    throw new TypeError("options must be an object");
  }
  var keys = Object.keys(options2);
  var i = keys.length;
  while (i-- > 0) {
    var opt = keys[i];
    var validator2 = schema[opt];
    if (validator2) {
      var value = options2[opt];
      var result = value === void 0 || validator2(value, opt, options2);
      if (result !== true) {
        throw new TypeError("option " + opt + " must be " + result);
      }
      continue;
    }
    if (allowUnknown !== true) {
      throw Error("Unknown option " + opt);
    }
  }
}
var validator$1 = {
  assertOptions,
  validators: validators$1
};
var utils$1 = utils$9;
var buildURL$1 = buildURL$2;
var InterceptorManager = InterceptorManager_1;
var dispatchRequest2 = dispatchRequest$1;
var mergeConfig$1 = mergeConfig$2;
var validator = validator$1;
var validators = validator.validators;
function Axios$1(instanceConfig) {
  this.defaults = instanceConfig;
  this.interceptors = {
    request: new InterceptorManager(),
    response: new InterceptorManager()
  };
}
Axios$1.prototype.request = function request(configOrUrl, config2) {
  if (typeof configOrUrl === "string") {
    config2 = config2 || {};
    config2.url = configOrUrl;
  } else {
    config2 = configOrUrl || {};
  }
  config2 = mergeConfig$1(this.defaults, config2);
  if (config2.method) {
    config2.method = config2.method.toLowerCase();
  } else if (this.defaults.method) {
    config2.method = this.defaults.method.toLowerCase();
  } else {
    config2.method = "get";
  }
  var transitional3 = config2.transitional;
  if (transitional3 !== void 0) {
    validator.assertOptions(transitional3, {
      silentJSONParsing: validators.transitional(validators.boolean),
      forcedJSONParsing: validators.transitional(validators.boolean),
      clarifyTimeoutError: validators.transitional(validators.boolean)
    }, false);
  }
  var requestInterceptorChain = [];
  var synchronousRequestInterceptors = true;
  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
    if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config2) === false) {
      return;
    }
    synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
    requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
  });
  var responseInterceptorChain = [];
  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
    responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
  });
  var promise;
  if (!synchronousRequestInterceptors) {
    var chain = [dispatchRequest2, void 0];
    Array.prototype.unshift.apply(chain, requestInterceptorChain);
    chain = chain.concat(responseInterceptorChain);
    promise = Promise.resolve(config2);
    while (chain.length) {
      promise = promise.then(chain.shift(), chain.shift());
    }
    return promise;
  }
  var newConfig = config2;
  while (requestInterceptorChain.length) {
    var onFulfilled = requestInterceptorChain.shift();
    var onRejected = requestInterceptorChain.shift();
    try {
      newConfig = onFulfilled(newConfig);
    } catch (error) {
      onRejected(error);
      break;
    }
  }
  try {
    promise = dispatchRequest2(newConfig);
  } catch (error) {
    return Promise.reject(error);
  }
  while (responseInterceptorChain.length) {
    promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());
  }
  return promise;
};
Axios$1.prototype.getUri = function getUri(config2) {
  config2 = mergeConfig$1(this.defaults, config2);
  return buildURL$1(config2.url, config2.params, config2.paramsSerializer).replace(/^\?/, "");
};
utils$1.forEach(["delete", "get", "head", "options"], function forEachMethodNoData2(method) {
  Axios$1.prototype[method] = function(url, config2) {
    return this.request(mergeConfig$1(config2 || {}, {
      method,
      url,
      data: (config2 || {}).data
    }));
  };
});
utils$1.forEach(["post", "put", "patch"], function forEachMethodWithData2(method) {
  Axios$1.prototype[method] = function(url, data2, config2) {
    return this.request(mergeConfig$1(config2 || {}, {
      method,
      url,
      data: data2
    }));
  };
});
var Axios_1 = Axios$1;
var CancelToken_1;
var hasRequiredCancelToken;
function requireCancelToken() {
  if (hasRequiredCancelToken)
    return CancelToken_1;
  hasRequiredCancelToken = 1;
  var Cancel2 = requireCancel();
  function CancelToken(executor) {
    if (typeof executor !== "function") {
      throw new TypeError("executor must be a function.");
    }
    var resolvePromise;
    this.promise = new Promise(function promiseExecutor(resolve) {
      resolvePromise = resolve;
    });
    var token = this;
    this.promise.then(function(cancel) {
      if (!token._listeners)
        return;
      var i;
      var l = token._listeners.length;
      for (i = 0; i < l; i++) {
        token._listeners[i](cancel);
      }
      token._listeners = null;
    });
    this.promise.then = function(onfulfilled) {
      var _resolve;
      var promise = new Promise(function(resolve) {
        token.subscribe(resolve);
        _resolve = resolve;
      }).then(onfulfilled);
      promise.cancel = function reject() {
        token.unsubscribe(_resolve);
      };
      return promise;
    };
    executor(function cancel(message) {
      if (token.reason) {
        return;
      }
      token.reason = new Cancel2(message);
      resolvePromise(token.reason);
    });
  }
  CancelToken.prototype.throwIfRequested = function throwIfRequested() {
    if (this.reason) {
      throw this.reason;
    }
  };
  CancelToken.prototype.subscribe = function subscribe(listener) {
    if (this.reason) {
      listener(this.reason);
      return;
    }
    if (this._listeners) {
      this._listeners.push(listener);
    } else {
      this._listeners = [listener];
    }
  };
  CancelToken.prototype.unsubscribe = function unsubscribe(listener) {
    if (!this._listeners) {
      return;
    }
    var index = this._listeners.indexOf(listener);
    if (index !== -1) {
      this._listeners.splice(index, 1);
    }
  };
  CancelToken.source = function source() {
    var cancel;
    var token = new CancelToken(function executor(c) {
      cancel = c;
    });
    return {
      token,
      cancel
    };
  };
  CancelToken_1 = CancelToken;
  return CancelToken_1;
}
var spread;
var hasRequiredSpread;
function requireSpread() {
  if (hasRequiredSpread)
    return spread;
  hasRequiredSpread = 1;
  spread = function spread2(callback) {
    return function wrap2(arr) {
      return callback.apply(null, arr);
    };
  };
  return spread;
}
var isAxiosError;
var hasRequiredIsAxiosError;
function requireIsAxiosError() {
  if (hasRequiredIsAxiosError)
    return isAxiosError;
  hasRequiredIsAxiosError = 1;
  var utils2 = utils$9;
  isAxiosError = function isAxiosError2(payload) {
    return utils2.isObject(payload) && payload.isAxiosError === true;
  };
  return isAxiosError;
}
var utils = utils$9;
var bind2 = bind$2;
var Axios = Axios_1;
var mergeConfig2 = mergeConfig$2;
var defaults = defaults_1;
function createInstance(defaultConfig) {
  var context = new Axios(defaultConfig);
  var instance2 = bind2(Axios.prototype.request, context);
  utils.extend(instance2, Axios.prototype, context);
  utils.extend(instance2, context);
  instance2.create = function create(instanceConfig) {
    return createInstance(mergeConfig2(defaultConfig, instanceConfig));
  };
  return instance2;
}
var axios$1 = createInstance(defaults);
axios$1.Axios = Axios;
axios$1.Cancel = requireCancel();
axios$1.CancelToken = requireCancelToken();
axios$1.isCancel = requireIsCancel();
axios$1.VERSION = requireData().version;
axios$1.all = function all(promises) {
  return Promise.all(promises);
};
axios$1.spread = requireSpread();
axios$1.isAxiosError = requireIsAxiosError();
axios$2.exports = axios$1;
axios$2.exports.default = axios$1;
(function(module2) {
  module2.exports = axios$2.exports;
})(axios$3);
const axios = /* @__PURE__ */ getDefaultExportFromCjs(axios$3.exports);
var common = {};
var base = {};
(function(exports2) {
  Object.defineProperty(exports2, "__esModule", { value: true });
  exports2.RequiredError = exports2.BaseAPI = exports2.COLLECTION_FORMATS = exports2.BASE_PATH = void 0;
  const axios_1 = axios$3.exports;
  exports2.BASE_PATH = "https://api.openai.com/v1".replace(/\/+$/, "");
  exports2.COLLECTION_FORMATS = {
    csv: ",",
    ssv: " ",
    tsv: "	",
    pipes: "|"
  };
  class BaseAPI {
    constructor(configuration2, basePath = exports2.BASE_PATH, axios2 = axios_1.default) {
      this.basePath = basePath;
      this.axios = axios2;
      if (configuration2) {
        this.configuration = configuration2;
        this.basePath = configuration2.basePath || this.basePath;
      }
    }
  }
  exports2.BaseAPI = BaseAPI;
  class RequiredError extends Error {
    constructor(field, msg) {
      super(msg);
      this.field = field;
      this.name = "RequiredError";
    }
  }
  exports2.RequiredError = RequiredError;
})(base);
var __awaiter = commonjsGlobal && commonjsGlobal.__awaiter || function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
Object.defineProperty(common, "__esModule", { value: true });
common.createRequestFunction = common.toPathString = common.serializeDataIfNeeded = common.setSearchParams = common.setOAuthToObject = common.setBearerAuthToObject = common.setBasicAuthToObject = common.setApiKeyToObject = common.assertParamExists = common.DUMMY_BASE_URL = void 0;
const base_1 = base;
common.DUMMY_BASE_URL = "https://example.com";
common.assertParamExists = function(functionName, paramName, paramValue) {
  if (paramValue === null || paramValue === void 0) {
    throw new base_1.RequiredError(paramName, `Required parameter ${paramName} was null or undefined when calling ${functionName}.`);
  }
};
common.setApiKeyToObject = function(object, keyParamName, configuration2) {
  return __awaiter(this, void 0, void 0, function* () {
    if (configuration2 && configuration2.apiKey) {
      const localVarApiKeyValue = typeof configuration2.apiKey === "function" ? yield configuration2.apiKey(keyParamName) : yield configuration2.apiKey;
      object[keyParamName] = localVarApiKeyValue;
    }
  });
};
common.setBasicAuthToObject = function(object, configuration2) {
  if (configuration2 && (configuration2.username || configuration2.password)) {
    object["auth"] = { username: configuration2.username, password: configuration2.password };
  }
};
common.setBearerAuthToObject = function(object, configuration2) {
  return __awaiter(this, void 0, void 0, function* () {
    if (configuration2 && configuration2.accessToken) {
      const accessToken = typeof configuration2.accessToken === "function" ? yield configuration2.accessToken() : yield configuration2.accessToken;
      object["Authorization"] = "Bearer " + accessToken;
    }
  });
};
common.setOAuthToObject = function(object, name2, scopes, configuration2) {
  return __awaiter(this, void 0, void 0, function* () {
    if (configuration2 && configuration2.accessToken) {
      const localVarAccessTokenValue = typeof configuration2.accessToken === "function" ? yield configuration2.accessToken(name2, scopes) : yield configuration2.accessToken;
      object["Authorization"] = "Bearer " + localVarAccessTokenValue;
    }
  });
};
function setFlattenedQueryParams(urlSearchParams, parameter, key = "") {
  if (parameter == null)
    return;
  if (typeof parameter === "object") {
    if (Array.isArray(parameter)) {
      parameter.forEach((item) => setFlattenedQueryParams(urlSearchParams, item, key));
    } else {
      Object.keys(parameter).forEach((currentKey) => setFlattenedQueryParams(urlSearchParams, parameter[currentKey], `${key}${key !== "" ? "." : ""}${currentKey}`));
    }
  } else {
    if (urlSearchParams.has(key)) {
      urlSearchParams.append(key, parameter);
    } else {
      urlSearchParams.set(key, parameter);
    }
  }
}
common.setSearchParams = function(url, ...objects) {
  const searchParams = new URLSearchParams(url.search);
  setFlattenedQueryParams(searchParams, objects);
  url.search = searchParams.toString();
};
common.serializeDataIfNeeded = function(value, requestOptions, configuration2) {
  const nonString = typeof value !== "string";
  const needsSerialization = nonString && configuration2 && configuration2.isJsonMime ? configuration2.isJsonMime(requestOptions.headers["Content-Type"]) : nonString;
  return needsSerialization ? JSON.stringify(value !== void 0 ? value : {}) : value || "";
};
common.toPathString = function(url) {
  return url.pathname + url.search + url.hash;
};
common.createRequestFunction = function(axiosArgs, globalAxios, BASE_PATH, configuration2) {
  return (axios2 = globalAxios, basePath = BASE_PATH) => {
    const axiosRequestArgs = Object.assign(Object.assign({}, axiosArgs.options), { url: ((configuration2 === null || configuration2 === void 0 ? void 0 : configuration2.basePath) || basePath) + axiosArgs.url });
    return axios2.request(axiosRequestArgs);
  };
};
(function(exports2) {
  var __awaiter2 = commonjsGlobal && commonjsGlobal.__awaiter || function(thisArg, _arguments, P, generator) {
    function adopt(value) {
      return value instanceof P ? value : new P(function(resolve) {
        resolve(value);
      });
    }
    return new (P || (P = Promise))(function(resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }
      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }
      function step(result) {
        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
      }
      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  };
  Object.defineProperty(exports2, "__esModule", { value: true });
  exports2.OpenAIApi = exports2.OpenAIApiFactory = exports2.OpenAIApiFp = exports2.OpenAIApiAxiosParamCreator = exports2.CreateImageRequestResponseFormatEnum = exports2.CreateImageRequestSizeEnum = exports2.ChatCompletionResponseMessageRoleEnum = exports2.ChatCompletionRequestMessageRoleEnum = void 0;
  const axios_1 = axios$3.exports;
  const common_1 = common;
  const base_12 = base;
  exports2.ChatCompletionRequestMessageRoleEnum = {
    System: "system",
    User: "user",
    Assistant: "assistant"
  };
  exports2.ChatCompletionResponseMessageRoleEnum = {
    System: "system",
    User: "user",
    Assistant: "assistant"
  };
  exports2.CreateImageRequestSizeEnum = {
    _256x256: "256x256",
    _512x512: "512x512",
    _1024x1024: "1024x1024"
  };
  exports2.CreateImageRequestResponseFormatEnum = {
    Url: "url",
    B64Json: "b64_json"
  };
  exports2.OpenAIApiAxiosParamCreator = function(configuration2) {
    return {
      cancelFineTune: (fineTuneId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("cancelFineTune", "fineTuneId", fineTuneId);
        const localVarPath = `/fine-tunes/{fine_tune_id}/cancel`.replace(`{${"fine_tune_id"}}`, encodeURIComponent(String(fineTuneId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createAnswer: (createAnswerRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createAnswer", "createAnswerRequest", createAnswerRequest);
        const localVarPath = `/answers`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createAnswerRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createChatCompletion: (createChatCompletionRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createChatCompletion", "createChatCompletionRequest", createChatCompletionRequest);
        const localVarPath = `/chat/completions`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createChatCompletionRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createClassification: (createClassificationRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createClassification", "createClassificationRequest", createClassificationRequest);
        const localVarPath = `/classifications`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createClassificationRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createCompletion: (createCompletionRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createCompletion", "createCompletionRequest", createCompletionRequest);
        const localVarPath = `/completions`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createCompletionRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createEdit: (createEditRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createEdit", "createEditRequest", createEditRequest);
        const localVarPath = `/edits`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createEditRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createEmbedding: (createEmbeddingRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createEmbedding", "createEmbeddingRequest", createEmbeddingRequest);
        const localVarPath = `/embeddings`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createEmbeddingRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createFile: (file, purpose, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createFile", "file", file);
        common_1.assertParamExists("createFile", "purpose", purpose);
        const localVarPath = `/files`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (file !== void 0) {
          localVarFormParams.append("file", file);
        }
        if (purpose !== void 0) {
          localVarFormParams.append("purpose", purpose);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createFineTune: (createFineTuneRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createFineTune", "createFineTuneRequest", createFineTuneRequest);
        const localVarPath = `/fine-tunes`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createFineTuneRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createImage: (createImageRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createImage", "createImageRequest", createImageRequest);
        const localVarPath = `/images/generations`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createImageRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createImageEdit: (image, prompt, mask, n, size, responseFormat, user, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createImageEdit", "image", image);
        common_1.assertParamExists("createImageEdit", "prompt", prompt);
        const localVarPath = `/images/edits`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (image !== void 0) {
          localVarFormParams.append("image", image);
        }
        if (mask !== void 0) {
          localVarFormParams.append("mask", mask);
        }
        if (prompt !== void 0) {
          localVarFormParams.append("prompt", prompt);
        }
        if (n !== void 0) {
          localVarFormParams.append("n", n);
        }
        if (size !== void 0) {
          localVarFormParams.append("size", size);
        }
        if (responseFormat !== void 0) {
          localVarFormParams.append("response_format", responseFormat);
        }
        if (user !== void 0) {
          localVarFormParams.append("user", user);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createImageVariation: (image, n, size, responseFormat, user, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createImageVariation", "image", image);
        const localVarPath = `/images/variations`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (image !== void 0) {
          localVarFormParams.append("image", image);
        }
        if (n !== void 0) {
          localVarFormParams.append("n", n);
        }
        if (size !== void 0) {
          localVarFormParams.append("size", size);
        }
        if (responseFormat !== void 0) {
          localVarFormParams.append("response_format", responseFormat);
        }
        if (user !== void 0) {
          localVarFormParams.append("user", user);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createModeration: (createModerationRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createModeration", "createModerationRequest", createModerationRequest);
        const localVarPath = `/moderations`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createModerationRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createSearch: (engineId, createSearchRequest, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createSearch", "engineId", engineId);
        common_1.assertParamExists("createSearch", "createSearchRequest", createSearchRequest);
        const localVarPath = `/engines/{engine_id}/search`.replace(`{${"engine_id"}}`, encodeURIComponent(String(engineId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        localVarHeaderParameter["Content-Type"] = "application/json";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = common_1.serializeDataIfNeeded(createSearchRequest, localVarRequestOptions, configuration2);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createTranscription: (file, model, prompt, responseFormat, temperature, language, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createTranscription", "file", file);
        common_1.assertParamExists("createTranscription", "model", model);
        const localVarPath = `/audio/transcriptions`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (file !== void 0) {
          localVarFormParams.append("file", file);
        }
        if (model !== void 0) {
          localVarFormParams.append("model", model);
        }
        if (prompt !== void 0) {
          localVarFormParams.append("prompt", prompt);
        }
        if (responseFormat !== void 0) {
          localVarFormParams.append("response_format", responseFormat);
        }
        if (temperature !== void 0) {
          localVarFormParams.append("temperature", temperature);
        }
        if (language !== void 0) {
          localVarFormParams.append("language", language);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      createTranslation: (file, model, prompt, responseFormat, temperature, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("createTranslation", "file", file);
        common_1.assertParamExists("createTranslation", "model", model);
        const localVarPath = `/audio/translations`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "POST" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        const localVarFormParams = new (configuration2 && configuration2.formDataCtor || FormData)();
        if (file !== void 0) {
          localVarFormParams.append("file", file);
        }
        if (model !== void 0) {
          localVarFormParams.append("model", model);
        }
        if (prompt !== void 0) {
          localVarFormParams.append("prompt", prompt);
        }
        if (responseFormat !== void 0) {
          localVarFormParams.append("response_format", responseFormat);
        }
        if (temperature !== void 0) {
          localVarFormParams.append("temperature", temperature);
        }
        localVarHeaderParameter["Content-Type"] = "multipart/form-data";
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), localVarFormParams.getHeaders()), headersFromBaseOptions), options2.headers);
        localVarRequestOptions.data = localVarFormParams;
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      deleteFile: (fileId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("deleteFile", "fileId", fileId);
        const localVarPath = `/files/{file_id}`.replace(`{${"file_id"}}`, encodeURIComponent(String(fileId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "DELETE" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      deleteModel: (model, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("deleteModel", "model", model);
        const localVarPath = `/models/{model}`.replace(`{${"model"}}`, encodeURIComponent(String(model)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "DELETE" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      downloadFile: (fileId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("downloadFile", "fileId", fileId);
        const localVarPath = `/files/{file_id}/content`.replace(`{${"file_id"}}`, encodeURIComponent(String(fileId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listEngines: (options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        const localVarPath = `/engines`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listFiles: (options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        const localVarPath = `/files`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listFineTuneEvents: (fineTuneId, stream, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("listFineTuneEvents", "fineTuneId", fineTuneId);
        const localVarPath = `/fine-tunes/{fine_tune_id}/events`.replace(`{${"fine_tune_id"}}`, encodeURIComponent(String(fineTuneId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        if (stream !== void 0) {
          localVarQueryParameter["stream"] = stream;
        }
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listFineTunes: (options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        const localVarPath = `/fine-tunes`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      listModels: (options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        const localVarPath = `/models`;
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      retrieveEngine: (engineId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("retrieveEngine", "engineId", engineId);
        const localVarPath = `/engines/{engine_id}`.replace(`{${"engine_id"}}`, encodeURIComponent(String(engineId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      retrieveFile: (fileId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("retrieveFile", "fileId", fileId);
        const localVarPath = `/files/{file_id}`.replace(`{${"file_id"}}`, encodeURIComponent(String(fileId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      retrieveFineTune: (fineTuneId, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("retrieveFineTune", "fineTuneId", fineTuneId);
        const localVarPath = `/fine-tunes/{fine_tune_id}`.replace(`{${"fine_tune_id"}}`, encodeURIComponent(String(fineTuneId)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      }),
      retrieveModel: (model, options2 = {}) => __awaiter2(this, void 0, void 0, function* () {
        common_1.assertParamExists("retrieveModel", "model", model);
        const localVarPath = `/models/{model}`.replace(`{${"model"}}`, encodeURIComponent(String(model)));
        const localVarUrlObj = new URL(localVarPath, common_1.DUMMY_BASE_URL);
        let baseOptions;
        if (configuration2) {
          baseOptions = configuration2.baseOptions;
        }
        const localVarRequestOptions = Object.assign(Object.assign({ method: "GET" }, baseOptions), options2);
        const localVarHeaderParameter = {};
        const localVarQueryParameter = {};
        common_1.setSearchParams(localVarUrlObj, localVarQueryParameter);
        let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
        localVarRequestOptions.headers = Object.assign(Object.assign(Object.assign({}, localVarHeaderParameter), headersFromBaseOptions), options2.headers);
        return {
          url: common_1.toPathString(localVarUrlObj),
          options: localVarRequestOptions
        };
      })
    };
  };
  exports2.OpenAIApiFp = function(configuration2) {
    const localVarAxiosParamCreator = exports2.OpenAIApiAxiosParamCreator(configuration2);
    return {
      cancelFineTune(fineTuneId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.cancelFineTune(fineTuneId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createAnswer(createAnswerRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createAnswer(createAnswerRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createChatCompletion(createChatCompletionRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createChatCompletion(createChatCompletionRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createClassification(createClassificationRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createClassification(createClassificationRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createCompletion(createCompletionRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createCompletion(createCompletionRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createEdit(createEditRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createEdit(createEditRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createEmbedding(createEmbeddingRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createEmbedding(createEmbeddingRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createFile(file, purpose, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createFile(file, purpose, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createFineTune(createFineTuneRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createFineTune(createFineTuneRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createImage(createImageRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createImage(createImageRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createImageVariation(image, n, size, responseFormat, user, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createImageVariation(image, n, size, responseFormat, user, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createModeration(createModerationRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createModeration(createModerationRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createSearch(engineId, createSearchRequest, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createSearch(engineId, createSearchRequest, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createTranscription(file, model, prompt, responseFormat, temperature, language, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createTranscription(file, model, prompt, responseFormat, temperature, language, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      createTranslation(file, model, prompt, responseFormat, temperature, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.createTranslation(file, model, prompt, responseFormat, temperature, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      deleteFile(fileId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.deleteFile(fileId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      deleteModel(model, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.deleteModel(model, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      downloadFile(fileId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.downloadFile(fileId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listEngines(options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listEngines(options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listFiles(options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listFiles(options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listFineTuneEvents(fineTuneId, stream, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listFineTuneEvents(fineTuneId, stream, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listFineTunes(options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listFineTunes(options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      listModels(options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.listModels(options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      retrieveEngine(engineId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveEngine(engineId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      retrieveFile(fileId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveFile(fileId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      retrieveFineTune(fineTuneId, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveFineTune(fineTuneId, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      },
      retrieveModel(model, options2) {
        return __awaiter2(this, void 0, void 0, function* () {
          const localVarAxiosArgs = yield localVarAxiosParamCreator.retrieveModel(model, options2);
          return common_1.createRequestFunction(localVarAxiosArgs, axios_1.default, base_12.BASE_PATH, configuration2);
        });
      }
    };
  };
  exports2.OpenAIApiFactory = function(configuration2, basePath, axios2) {
    const localVarFp = exports2.OpenAIApiFp(configuration2);
    return {
      cancelFineTune(fineTuneId, options2) {
        return localVarFp.cancelFineTune(fineTuneId, options2).then((request2) => request2(axios2, basePath));
      },
      createAnswer(createAnswerRequest, options2) {
        return localVarFp.createAnswer(createAnswerRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createChatCompletion(createChatCompletionRequest, options2) {
        return localVarFp.createChatCompletion(createChatCompletionRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createClassification(createClassificationRequest, options2) {
        return localVarFp.createClassification(createClassificationRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createCompletion(createCompletionRequest, options2) {
        return localVarFp.createCompletion(createCompletionRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createEdit(createEditRequest, options2) {
        return localVarFp.createEdit(createEditRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createEmbedding(createEmbeddingRequest, options2) {
        return localVarFp.createEmbedding(createEmbeddingRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createFile(file, purpose, options2) {
        return localVarFp.createFile(file, purpose, options2).then((request2) => request2(axios2, basePath));
      },
      createFineTune(createFineTuneRequest, options2) {
        return localVarFp.createFineTune(createFineTuneRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createImage(createImageRequest, options2) {
        return localVarFp.createImage(createImageRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2) {
        return localVarFp.createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2).then((request2) => request2(axios2, basePath));
      },
      createImageVariation(image, n, size, responseFormat, user, options2) {
        return localVarFp.createImageVariation(image, n, size, responseFormat, user, options2).then((request2) => request2(axios2, basePath));
      },
      createModeration(createModerationRequest, options2) {
        return localVarFp.createModeration(createModerationRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createSearch(engineId, createSearchRequest, options2) {
        return localVarFp.createSearch(engineId, createSearchRequest, options2).then((request2) => request2(axios2, basePath));
      },
      createTranscription(file, model, prompt, responseFormat, temperature, language, options2) {
        return localVarFp.createTranscription(file, model, prompt, responseFormat, temperature, language, options2).then((request2) => request2(axios2, basePath));
      },
      createTranslation(file, model, prompt, responseFormat, temperature, options2) {
        return localVarFp.createTranslation(file, model, prompt, responseFormat, temperature, options2).then((request2) => request2(axios2, basePath));
      },
      deleteFile(fileId, options2) {
        return localVarFp.deleteFile(fileId, options2).then((request2) => request2(axios2, basePath));
      },
      deleteModel(model, options2) {
        return localVarFp.deleteModel(model, options2).then((request2) => request2(axios2, basePath));
      },
      downloadFile(fileId, options2) {
        return localVarFp.downloadFile(fileId, options2).then((request2) => request2(axios2, basePath));
      },
      listEngines(options2) {
        return localVarFp.listEngines(options2).then((request2) => request2(axios2, basePath));
      },
      listFiles(options2) {
        return localVarFp.listFiles(options2).then((request2) => request2(axios2, basePath));
      },
      listFineTuneEvents(fineTuneId, stream, options2) {
        return localVarFp.listFineTuneEvents(fineTuneId, stream, options2).then((request2) => request2(axios2, basePath));
      },
      listFineTunes(options2) {
        return localVarFp.listFineTunes(options2).then((request2) => request2(axios2, basePath));
      },
      listModels(options2) {
        return localVarFp.listModels(options2).then((request2) => request2(axios2, basePath));
      },
      retrieveEngine(engineId, options2) {
        return localVarFp.retrieveEngine(engineId, options2).then((request2) => request2(axios2, basePath));
      },
      retrieveFile(fileId, options2) {
        return localVarFp.retrieveFile(fileId, options2).then((request2) => request2(axios2, basePath));
      },
      retrieveFineTune(fineTuneId, options2) {
        return localVarFp.retrieveFineTune(fineTuneId, options2).then((request2) => request2(axios2, basePath));
      },
      retrieveModel(model, options2) {
        return localVarFp.retrieveModel(model, options2).then((request2) => request2(axios2, basePath));
      }
    };
  };
  class OpenAIApi extends base_12.BaseAPI {
    cancelFineTune(fineTuneId, options2) {
      return exports2.OpenAIApiFp(this.configuration).cancelFineTune(fineTuneId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createAnswer(createAnswerRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createAnswer(createAnswerRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createChatCompletion(createChatCompletionRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createChatCompletion(createChatCompletionRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createClassification(createClassificationRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createClassification(createClassificationRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createCompletion(createCompletionRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createCompletion(createCompletionRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createEdit(createEditRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createEdit(createEditRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createEmbedding(createEmbeddingRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createEmbedding(createEmbeddingRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createFile(file, purpose, options2) {
      return exports2.OpenAIApiFp(this.configuration).createFile(file, purpose, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createFineTune(createFineTuneRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createFineTune(createFineTuneRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createImage(createImageRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createImage(createImageRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2) {
      return exports2.OpenAIApiFp(this.configuration).createImageEdit(image, prompt, mask, n, size, responseFormat, user, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createImageVariation(image, n, size, responseFormat, user, options2) {
      return exports2.OpenAIApiFp(this.configuration).createImageVariation(image, n, size, responseFormat, user, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createModeration(createModerationRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createModeration(createModerationRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createSearch(engineId, createSearchRequest, options2) {
      return exports2.OpenAIApiFp(this.configuration).createSearch(engineId, createSearchRequest, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createTranscription(file, model, prompt, responseFormat, temperature, language, options2) {
      return exports2.OpenAIApiFp(this.configuration).createTranscription(file, model, prompt, responseFormat, temperature, language, options2).then((request2) => request2(this.axios, this.basePath));
    }
    createTranslation(file, model, prompt, responseFormat, temperature, options2) {
      return exports2.OpenAIApiFp(this.configuration).createTranslation(file, model, prompt, responseFormat, temperature, options2).then((request2) => request2(this.axios, this.basePath));
    }
    deleteFile(fileId, options2) {
      return exports2.OpenAIApiFp(this.configuration).deleteFile(fileId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    deleteModel(model, options2) {
      return exports2.OpenAIApiFp(this.configuration).deleteModel(model, options2).then((request2) => request2(this.axios, this.basePath));
    }
    downloadFile(fileId, options2) {
      return exports2.OpenAIApiFp(this.configuration).downloadFile(fileId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    listEngines(options2) {
      return exports2.OpenAIApiFp(this.configuration).listEngines(options2).then((request2) => request2(this.axios, this.basePath));
    }
    listFiles(options2) {
      return exports2.OpenAIApiFp(this.configuration).listFiles(options2).then((request2) => request2(this.axios, this.basePath));
    }
    listFineTuneEvents(fineTuneId, stream, options2) {
      return exports2.OpenAIApiFp(this.configuration).listFineTuneEvents(fineTuneId, stream, options2).then((request2) => request2(this.axios, this.basePath));
    }
    listFineTunes(options2) {
      return exports2.OpenAIApiFp(this.configuration).listFineTunes(options2).then((request2) => request2(this.axios, this.basePath));
    }
    listModels(options2) {
      return exports2.OpenAIApiFp(this.configuration).listModels(options2).then((request2) => request2(this.axios, this.basePath));
    }
    retrieveEngine(engineId, options2) {
      return exports2.OpenAIApiFp(this.configuration).retrieveEngine(engineId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    retrieveFile(fileId, options2) {
      return exports2.OpenAIApiFp(this.configuration).retrieveFile(fileId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    retrieveFineTune(fineTuneId, options2) {
      return exports2.OpenAIApiFp(this.configuration).retrieveFineTune(fineTuneId, options2).then((request2) => request2(this.axios, this.basePath));
    }
    retrieveModel(model, options2) {
      return exports2.OpenAIApiFp(this.configuration).retrieveModel(model, options2).then((request2) => request2(this.axios, this.basePath));
    }
  }
  exports2.OpenAIApi = OpenAIApi;
})(api);
var configuration = {};
const name = "openai";
const version = "3.2.1";
const description = "Node.js library for the OpenAI API";
const repository = {
  type: "git",
  url: "git@github.com:openai/openai-node.git"
};
const keywords = [
  "openai",
  "open",
  "ai",
  "gpt-3",
  "gpt3"
];
const author = "OpenAI";
const license = "MIT";
const main = "./dist/index.js";
const types = "./dist/index.d.ts";
const scripts = {
  build: "tsc --outDir dist/"
};
const dependencies = {
  axios: "^0.26.0",
  "form-data": "^4.0.0"
};
const devDependencies = {
  "@types/node": "^12.11.5",
  typescript: "^3.6.4"
};
const require$$0 = {
  name,
  version,
  description,
  repository,
  keywords,
  author,
  license,
  main,
  types,
  scripts,
  dependencies,
  devDependencies
};
var browser;
var hasRequiredBrowser;
function requireBrowser() {
  if (hasRequiredBrowser)
    return browser;
  hasRequiredBrowser = 1;
  browser = typeof self == "object" ? self.FormData : window.FormData;
  return browser;
}
Object.defineProperty(configuration, "__esModule", { value: true });
configuration.Configuration = void 0;
const packageJson = require$$0;
class Configuration {
  constructor(param = {}) {
    this.apiKey = param.apiKey;
    this.organization = param.organization;
    this.username = param.username;
    this.password = param.password;
    this.accessToken = param.accessToken;
    this.basePath = param.basePath;
    this.baseOptions = param.baseOptions;
    this.formDataCtor = param.formDataCtor;
    if (!this.baseOptions) {
      this.baseOptions = {};
    }
    this.baseOptions.headers = Object.assign({ "User-Agent": `OpenAI/NodeJS/${packageJson.version}`, "Authorization": `Bearer ${this.apiKey}` }, this.baseOptions.headers);
    if (this.organization) {
      this.baseOptions.headers["OpenAI-Organization"] = this.organization;
    }
    if (!this.formDataCtor) {
      this.formDataCtor = requireBrowser();
    }
  }
  isJsonMime(mime) {
    const jsonMime = new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$", "i");
    return mime !== null && (jsonMime.test(mime) || mime.toLowerCase() === "application/json-patch+json");
  }
}
configuration.Configuration = Configuration;
(function(exports2) {
  var __createBinding = commonjsGlobal && commonjsGlobal.__createBinding || (Object.create ? function(o, m, k, k2) {
    if (k2 === void 0)
      k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() {
      return m[k];
    } });
  } : function(o, m, k, k2) {
    if (k2 === void 0)
      k2 = k;
    o[k2] = m[k];
  });
  var __exportStar = commonjsGlobal && commonjsGlobal.__exportStar || function(m, exports3) {
    for (var p in m)
      if (p !== "default" && !exports3.hasOwnProperty(p))
        __createBinding(exports3, m, p);
  };
  Object.defineProperty(exports2, "__esModule", { value: true });
  __exportStar(api, exports2);
  __exportStar(configuration, exports2);
})(dist$1);
const isBrowser = () => typeof window !== "undefined" && typeof window.document !== "undefined";
const isWebWorker = () => typeof globalThis === "object" && globalThis.constructor && globalThis.constructor.name === "DedicatedWorkerGlobalScope";
const isJsDom = () => typeof window !== "undefined" && window.name === "nodejs" || typeof navigator !== "undefined" && (navigator.userAgent.includes("Node.js") || navigator.userAgent.includes("jsdom"));
const isDeno = () => typeof Deno !== "undefined";
const isNode = () => typeof process !== "undefined" && typeof process.versions !== "undefined" && typeof process.versions.node !== "undefined" && !isDeno();
const getEnv = () => {
  let env;
  if (isBrowser()) {
    env = "browser";
  } else if (isNode()) {
    env = "node";
  } else if (isWebWorker()) {
    env = "webworker";
  } else if (isJsDom()) {
    env = "jsdom";
  } else if (isDeno()) {
    env = "deno";
  } else {
    env = "other";
  }
  return env;
};
let runtimeEnvironment;
async function getRuntimeEnvironment() {
  if (runtimeEnvironment === void 0) {
    const env = getEnv();
    runtimeEnvironment = {
      library: "langchain-js",
      runtime: env
    };
  }
  return runtimeEnvironment;
}
function getEnvironmentVariable(name2) {
  var _a;
  try {
    return typeof process !== "undefined" ? (_a = process.env) == null ? void 0 : _a[name2] : void 0;
  } catch (e) {
    return void 0;
  }
}
const EventStreamContentType = "text/event-stream";
async function getBytes(stream, onChunk) {
  const reader = stream.getReader();
  while (true) {
    const result = await reader.read();
    if (result.done) {
      onChunk(new Uint8Array(), true);
      break;
    }
    onChunk(result.value);
  }
}
function getLines(onLine) {
  let buffer;
  let position;
  let fieldLength;
  let discardTrailingNewline = false;
  return function onChunk(arr, flush2) {
    if (flush2) {
      onLine(arr, 0, true);
      return;
    }
    if (buffer === void 0) {
      buffer = arr;
      position = 0;
      fieldLength = -1;
    } else {
      buffer = concat(buffer, arr);
    }
    const bufLength = buffer.length;
    let lineStart = 0;
    while (position < bufLength) {
      if (discardTrailingNewline) {
        if (buffer[position] === 10) {
          lineStart = ++position;
        }
        discardTrailingNewline = false;
      }
      let lineEnd = -1;
      for (; position < bufLength && lineEnd === -1; ++position) {
        switch (buffer[position]) {
          case 58:
            if (fieldLength === -1) {
              fieldLength = position - lineStart;
            }
            break;
          case 13:
            discardTrailingNewline = true;
          case 10:
            lineEnd = position;
            break;
        }
      }
      if (lineEnd === -1) {
        break;
      }
      onLine(buffer.subarray(lineStart, lineEnd), fieldLength);
      lineStart = position;
      fieldLength = -1;
    }
    if (lineStart === bufLength) {
      buffer = void 0;
    } else if (lineStart !== 0) {
      buffer = buffer.subarray(lineStart);
      position -= lineStart;
    }
  };
}
function getMessages(onMessage, onId, onRetry) {
  let message = newMessage();
  const decoder = new TextDecoder();
  return function onLine(line, fieldLength, flush2) {
    if (flush2) {
      if (!isEmpty(message)) {
        onMessage == null ? void 0 : onMessage(message);
        message = newMessage();
      }
      return;
    }
    if (line.length === 0) {
      onMessage == null ? void 0 : onMessage(message);
      message = newMessage();
    } else if (fieldLength > 0) {
      const field = decoder.decode(line.subarray(0, fieldLength));
      const valueOffset = fieldLength + (line[fieldLength + 1] === 32 ? 2 : 1);
      const value = decoder.decode(line.subarray(valueOffset));
      switch (field) {
        case "data":
          message.data = message.data ? message.data + "\n" + value : value;
          break;
        case "event":
          message.event = value;
          break;
        case "id":
          onId == null ? void 0 : onId(message.id = value);
          break;
        case "retry": {
          const retry2 = parseInt(value, 10);
          if (!Number.isNaN(retry2)) {
            onRetry == null ? void 0 : onRetry(message.retry = retry2);
          }
          break;
        }
      }
    }
  };
}
function concat(a, b) {
  const res = new Uint8Array(a.length + b.length);
  res.set(a);
  res.set(b, a.length);
  return res;
}
function newMessage() {
  return {
    data: "",
    event: "",
    id: "",
    retry: void 0
  };
}
function isEmpty(message) {
  return message.data === "" && message.event === "" && message.id === "" && message.retry === void 0;
}
function tryJsonStringify$1(data2) {
  try {
    return JSON.stringify(data2);
  } catch (e) {
    return data2;
  }
}
function settle(resolve, reject, response) {
  const { validateStatus: validateStatus2 } = response.config;
  if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
    resolve(response);
  } else {
    reject(createError(`Request failed with status code ${response.status} and body ${typeof response.data === "string" ? response.data : tryJsonStringify$1(response.data)}`, response.config, null, response.request, response));
  }
}
function isAbsoluteURL(url) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
}
function combineURLs(baseURL, relativeURL) {
  return relativeURL ? baseURL.replace(/\/+$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
}
function encode(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function buildURL2(url, params, paramsSerializer) {
  if (!params) {
    return url;
  }
  var serializedParams;
  if (paramsSerializer) {
    serializedParams = paramsSerializer(params);
  } else if (isURLSearchParams(params)) {
    serializedParams = params.toString();
  } else {
    var parts = [];
    forEach2(params, function serialize(val, key) {
      if (val === null || typeof val === "undefined") {
        return;
      }
      if (isArray(val)) {
        key = `${key}[]`;
      } else {
        val = [val];
      }
      forEach2(val, function parseValue(v) {
        if (isDate(v)) {
          v = v.toISOString();
        } else if (isObject(v)) {
          v = JSON.stringify(v);
        }
        parts.push(`${encode(key)}=${encode(v)}`);
      });
    });
    serializedParams = parts.join("&");
  }
  if (serializedParams) {
    var hashmarkIndex = url.indexOf("#");
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url;
}
function buildFullPath(baseURL, requestedURL) {
  if (baseURL && !isAbsoluteURL(requestedURL)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
}
function isUndefined(val) {
  return typeof val === "undefined";
}
function isObject(val) {
  return val !== null && typeof val === "object";
}
function isDate(val) {
  return toString.call(val) === "[object Date]";
}
function isURLSearchParams(val) {
  return toString.call(val) === "[object URLSearchParams]";
}
function isArray(val) {
  return Array.isArray(val);
}
function forEach2(obj, fn) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray(obj)) {
    for (var i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        fn.call(null, obj[key], key, obj);
      }
    }
  }
}
function isFormData(val) {
  return toString.call(val) === "[object FormData]";
}
function isStandardBrowserEnv() {
  if (typeof navigator !== "undefined" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS")) {
    return false;
  }
  return typeof window !== "undefined" && typeof document !== "undefined";
}
async function fetchAdapter(config2) {
  const request2 = createRequest(config2);
  const data2 = await getResponse(request2, config2);
  return new Promise((resolve, reject) => {
    if (data2 instanceof Error) {
      reject(data2);
    } else {
      Object.prototype.toString.call(config2.settle) === "[object Function]" ? config2.settle(resolve, reject, data2) : settle(resolve, reject, data2);
    }
  });
}
async function getResponse(request2, config2) {
  let stageOne;
  try {
    stageOne = await fetch(request2);
  } catch (e) {
    if (e && e.name === "AbortError") {
      return createError("Request aborted", config2, "ECONNABORTED", request2);
    }
    if (e && e.name === "TimeoutError") {
      return createError("Request timeout", config2, "ECONNABORTED", request2);
    }
    return createError("Network Error", config2, "ERR_NETWORK", request2);
  }
  const headers = {};
  stageOne.headers.forEach((value, key) => {
    headers[key] = value;
  });
  const response = {
    ok: stageOne.ok,
    status: stageOne.status,
    statusText: stageOne.statusText,
    headers,
    config: config2,
    request: request2
  };
  if (stageOne.status >= 200 && stageOne.status !== 204) {
    if (config2.responseType === "stream") {
      const contentType = stageOne.headers.get("content-type");
      if (!(contentType == null ? void 0 : contentType.startsWith(EventStreamContentType))) {
        if (stageOne.status >= 400) {
          if (contentType == null ? void 0 : contentType.startsWith("application/json")) {
            response.data = await stageOne.json();
            return response;
          } else {
            response.data = await stageOne.text();
            return response;
          }
        }
        throw new Error(`Expected content-type to be ${EventStreamContentType}, Actual: ${contentType}`);
      }
      await getBytes(stageOne.body, getLines(getMessages(config2.onmessage)));
    } else {
      switch (config2.responseType) {
        case "arraybuffer":
          response.data = await stageOne.arrayBuffer();
          break;
        case "blob":
          response.data = await stageOne.blob();
          break;
        case "json":
          response.data = await stageOne.json();
          break;
        case "formData":
          response.data = await stageOne.formData();
          break;
        default:
          response.data = await stageOne.text();
          break;
      }
    }
  }
  return response;
}
function createRequest(config2) {
  const headers = new Headers(config2.headers);
  if (config2.auth) {
    const username = config2.auth.username || "";
    const password = config2.auth.password ? decodeURI(encodeURIComponent(config2.auth.password)) : "";
    headers.set("Authorization", `Basic ${btoa(`${username}:${password}`)}`);
  }
  const method = config2.method.toUpperCase();
  const options2 = {
    headers,
    method
  };
  if (method !== "GET" && method !== "HEAD") {
    options2.body = config2.data;
    if (isFormData(options2.body) && isStandardBrowserEnv()) {
      headers.delete("Content-Type");
    }
  }
  if (typeof options2.body === "string") {
    options2.body = new TextEncoder().encode(options2.body);
  }
  if (config2.mode) {
    options2.mode = config2.mode;
  }
  if (config2.cache) {
    options2.cache = config2.cache;
  }
  if (config2.integrity) {
    options2.integrity = config2.integrity;
  }
  if (config2.redirect) {
    options2.redirect = config2.redirect;
  }
  if (config2.referrer) {
    options2.referrer = config2.referrer;
  }
  if (config2.timeout && config2.timeout > 0) {
    options2.signal = AbortSignal.timeout(config2.timeout);
  }
  if (config2.signal) {
    options2.signal = config2.signal;
  }
  if (!isUndefined(config2.withCredentials)) {
    options2.credentials = config2.withCredentials ? "include" : "omit";
  }
  if (config2.responseType === "stream") {
    options2.headers.set("Accept", EventStreamContentType);
  }
  const fullPath = buildFullPath(config2.baseURL, config2.url);
  const url = buildURL2(fullPath, config2.params, config2.paramsSerializer);
  return new Request(url, options2);
}
function createError(message, config2, code2, request2, response) {
  if (axios.AxiosError && typeof axios.AxiosError === "function") {
    return new axios.AxiosError(message, axios.AxiosError[code2], config2, request2, response);
  }
  const error = new Error(message);
  return enhanceError2(error, config2, code2, request2, response);
}
function enhanceError2(error, config2, code2, request2, response) {
  error.config = config2;
  if (code2) {
    error.code = code2;
  }
  error.request = request2;
  error.response = response;
  error.isAxiosError = true;
  error.toJSON = function toJSON() {
    return {
      message: this.message,
      name: this.name,
      description: this.description,
      number: this.number,
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      config: this.config,
      code: this.code,
      status: this.response && this.response.status ? this.response.status : null
    };
  };
  return error;
}
const chunkArray = (arr, chunkSize) => arr.reduce((chunks, elem, index) => {
  const chunkIndex = Math.floor(index / chunkSize);
  const chunk = chunks[chunkIndex] || [];
  chunks[chunkIndex] = chunk.concat([elem]);
  return chunks;
}, []);
function commonjsRequire(path2) {
  throw new Error('Could not dynamically require "' + path2 + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var object_hash = { exports: {} };
(function(module2, exports2) {
  !function(e) {
    module2.exports = e();
  }(function() {
    return function r(o, i, u) {
      function s(n, e2) {
        if (!i[n]) {
          if (!o[n]) {
            var t = "function" == typeof commonjsRequire && commonjsRequire;
            if (!e2 && t)
              return t(n, true);
            if (a)
              return a(n, true);
            throw new Error("Cannot find module '" + n + "'");
          }
          e2 = i[n] = { exports: {} };
          o[n][0].call(e2.exports, function(e3) {
            var t2 = o[n][1][e3];
            return s(t2 || e3);
          }, e2, e2.exports, r, o, i, u);
        }
        return i[n].exports;
      }
      for (var a = "function" == typeof commonjsRequire && commonjsRequire, e = 0; e < u.length; e++)
        s(u[e]);
      return s;
    }({ 1: [function(w, b, m) {
      !function(e, n, s, c, d, h, p, g, y) {
        var r = w("crypto");
        function t(e2, t2) {
          t2 = u(e2, t2);
          var n2;
          return void 0 === (n2 = "passthrough" !== t2.algorithm ? r.createHash(t2.algorithm) : new l()).write && (n2.write = n2.update, n2.end = n2.update), f(t2, n2).dispatch(e2), n2.update || n2.end(""), n2.digest ? n2.digest("buffer" === t2.encoding ? void 0 : t2.encoding) : (e2 = n2.read(), "buffer" !== t2.encoding ? e2.toString(t2.encoding) : e2);
        }
        (m = b.exports = t).sha1 = function(e2) {
          return t(e2);
        }, m.keys = function(e2) {
          return t(e2, { excludeValues: true, algorithm: "sha1", encoding: "hex" });
        }, m.MD5 = function(e2) {
          return t(e2, { algorithm: "md5", encoding: "hex" });
        }, m.keysMD5 = function(e2) {
          return t(e2, { algorithm: "md5", encoding: "hex", excludeValues: true });
        };
        var o = r.getHashes ? r.getHashes().slice() : ["sha1", "md5"], i = (o.push("passthrough"), ["buffer", "hex", "binary", "base64"]);
        function u(e2, t2) {
          var n2 = {};
          if (n2.algorithm = (t2 = t2 || {}).algorithm || "sha1", n2.encoding = t2.encoding || "hex", n2.excludeValues = !!t2.excludeValues, n2.algorithm = n2.algorithm.toLowerCase(), n2.encoding = n2.encoding.toLowerCase(), n2.ignoreUnknown = true === t2.ignoreUnknown, n2.respectType = false !== t2.respectType, n2.respectFunctionNames = false !== t2.respectFunctionNames, n2.respectFunctionProperties = false !== t2.respectFunctionProperties, n2.unorderedArrays = true === t2.unorderedArrays, n2.unorderedSets = false !== t2.unorderedSets, n2.unorderedObjects = false !== t2.unorderedObjects, n2.replacer = t2.replacer || void 0, n2.excludeKeys = t2.excludeKeys || void 0, void 0 === e2)
            throw new Error("Object argument required.");
          for (var r2 = 0; r2 < o.length; ++r2)
            o[r2].toLowerCase() === n2.algorithm.toLowerCase() && (n2.algorithm = o[r2]);
          if (-1 === o.indexOf(n2.algorithm))
            throw new Error('Algorithm "' + n2.algorithm + '"  not supported. supported values: ' + o.join(", "));
          if (-1 === i.indexOf(n2.encoding) && "passthrough" !== n2.algorithm)
            throw new Error('Encoding "' + n2.encoding + '"  not supported. supported values: ' + i.join(", "));
          return n2;
        }
        function a(e2) {
          if ("function" == typeof e2)
            return null != /^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e2));
        }
        function f(o2, t2, i2) {
          i2 = i2 || [];
          function u2(e2) {
            return t2.update ? t2.update(e2, "utf8") : t2.write(e2, "utf8");
          }
          return { dispatch: function(e2) {
            return this["_" + (null === (e2 = o2.replacer ? o2.replacer(e2) : e2) ? "null" : typeof e2)](e2);
          }, _object: function(t3) {
            var n2, e2 = Object.prototype.toString.call(t3), r2 = /\[object (.*)\]/i.exec(e2);
            r2 = (r2 = r2 ? r2[1] : "unknown:[" + e2 + "]").toLowerCase();
            if (0 <= (e2 = i2.indexOf(t3)))
              return this.dispatch("[CIRCULAR:" + e2 + "]");
            if (i2.push(t3), void 0 !== s && s.isBuffer && s.isBuffer(t3))
              return u2("buffer:"), u2(t3);
            if ("object" === r2 || "function" === r2 || "asyncfunction" === r2)
              return e2 = Object.keys(t3), o2.unorderedObjects && (e2 = e2.sort()), false === o2.respectType || a(t3) || e2.splice(0, 0, "prototype", "__proto__", "constructor"), o2.excludeKeys && (e2 = e2.filter(function(e3) {
                return !o2.excludeKeys(e3);
              })), u2("object:" + e2.length + ":"), n2 = this, e2.forEach(function(e3) {
                n2.dispatch(e3), u2(":"), o2.excludeValues || n2.dispatch(t3[e3]), u2(",");
              });
            if (!this["_" + r2]) {
              if (o2.ignoreUnknown)
                return u2("[" + r2 + "]");
              throw new Error('Unknown object type "' + r2 + '"');
            }
            this["_" + r2](t3);
          }, _array: function(e2, t3) {
            t3 = void 0 !== t3 ? t3 : false !== o2.unorderedArrays;
            var n2 = this;
            if (u2("array:" + e2.length + ":"), !t3 || e2.length <= 1)
              return e2.forEach(function(e3) {
                return n2.dispatch(e3);
              });
            var r2 = [], t3 = e2.map(function(e3) {
              var t4 = new l(), n3 = i2.slice();
              return f(o2, t4, n3).dispatch(e3), r2 = r2.concat(n3.slice(i2.length)), t4.read().toString();
            });
            return i2 = i2.concat(r2), t3.sort(), this._array(t3, false);
          }, _date: function(e2) {
            return u2("date:" + e2.toJSON());
          }, _symbol: function(e2) {
            return u2("symbol:" + e2.toString());
          }, _error: function(e2) {
            return u2("error:" + e2.toString());
          }, _boolean: function(e2) {
            return u2("bool:" + e2.toString());
          }, _string: function(e2) {
            u2("string:" + e2.length + ":"), u2(e2.toString());
          }, _function: function(e2) {
            u2("fn:"), a(e2) ? this.dispatch("[native]") : this.dispatch(e2.toString()), false !== o2.respectFunctionNames && this.dispatch("function-name:" + String(e2.name)), o2.respectFunctionProperties && this._object(e2);
          }, _number: function(e2) {
            return u2("number:" + e2.toString());
          }, _xml: function(e2) {
            return u2("xml:" + e2.toString());
          }, _null: function() {
            return u2("Null");
          }, _undefined: function() {
            return u2("Undefined");
          }, _regexp: function(e2) {
            return u2("regex:" + e2.toString());
          }, _uint8array: function(e2) {
            return u2("uint8array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _uint8clampedarray: function(e2) {
            return u2("uint8clampedarray:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _int8array: function(e2) {
            return u2("int8array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _uint16array: function(e2) {
            return u2("uint16array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _int16array: function(e2) {
            return u2("int16array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _uint32array: function(e2) {
            return u2("uint32array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _int32array: function(e2) {
            return u2("int32array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _float32array: function(e2) {
            return u2("float32array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _float64array: function(e2) {
            return u2("float64array:"), this.dispatch(Array.prototype.slice.call(e2));
          }, _arraybuffer: function(e2) {
            return u2("arraybuffer:"), this.dispatch(new Uint8Array(e2));
          }, _url: function(e2) {
            return u2("url:" + e2.toString());
          }, _map: function(e2) {
            u2("map:");
            e2 = Array.from(e2);
            return this._array(e2, false !== o2.unorderedSets);
          }, _set: function(e2) {
            u2("set:");
            e2 = Array.from(e2);
            return this._array(e2, false !== o2.unorderedSets);
          }, _file: function(e2) {
            return u2("file:"), this.dispatch([e2.name, e2.size, e2.type, e2.lastModfied]);
          }, _blob: function() {
            if (o2.ignoreUnknown)
              return u2("[blob]");
            throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n');
          }, _domwindow: function() {
            return u2("domwindow");
          }, _bigint: function(e2) {
            return u2("bigint:" + e2.toString());
          }, _process: function() {
            return u2("process");
          }, _timer: function() {
            return u2("timer");
          }, _pipe: function() {
            return u2("pipe");
          }, _tcp: function() {
            return u2("tcp");
          }, _udp: function() {
            return u2("udp");
          }, _tty: function() {
            return u2("tty");
          }, _statwatcher: function() {
            return u2("statwatcher");
          }, _securecontext: function() {
            return u2("securecontext");
          }, _connection: function() {
            return u2("connection");
          }, _zlib: function() {
            return u2("zlib");
          }, _context: function() {
            return u2("context");
          }, _nodescript: function() {
            return u2("nodescript");
          }, _httpparser: function() {
            return u2("httpparser");
          }, _dataview: function() {
            return u2("dataview");
          }, _signal: function() {
            return u2("signal");
          }, _fsevent: function() {
            return u2("fsevent");
          }, _tlswrap: function() {
            return u2("tlswrap");
          } };
        }
        function l() {
          return { buf: "", write: function(e2) {
            this.buf += e2;
          }, end: function(e2) {
            this.buf += e2;
          }, read: function() {
            return this.buf;
          } };
        }
        m.writeToStream = function(e2, t2, n2) {
          return void 0 === n2 && (n2 = t2, t2 = {}), f(t2 = u(e2, t2), n2).dispatch(e2);
        };
      }.call(this, w("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, w("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/fake_9a5aa49d.js", "/");
    }, { buffer: 3, crypto: 5, lYpoI2: 11 }], 2: [function(e, t, f) {
      !function(e2, t2, n, r, o, i, u, s, a) {
        !function(e3) {
          var a2 = "undefined" != typeof Uint8Array ? Uint8Array : Array, t3 = "+".charCodeAt(0), n2 = "/".charCodeAt(0), r2 = "0".charCodeAt(0), o2 = "a".charCodeAt(0), i2 = "A".charCodeAt(0), u2 = "-".charCodeAt(0), s2 = "_".charCodeAt(0);
          function f2(e4) {
            e4 = e4.charCodeAt(0);
            return e4 === t3 || e4 === u2 ? 62 : e4 === n2 || e4 === s2 ? 63 : e4 < r2 ? -1 : e4 < r2 + 10 ? e4 - r2 + 26 + 26 : e4 < i2 + 26 ? e4 - i2 : e4 < o2 + 26 ? e4 - o2 + 26 : void 0;
          }
          e3.toByteArray = function(e4) {
            var t4, n3;
            if (0 < e4.length % 4)
              throw new Error("Invalid string. Length must be a multiple of 4");
            var r3 = e4.length, r3 = "=" === e4.charAt(r3 - 2) ? 2 : "=" === e4.charAt(r3 - 1) ? 1 : 0, o3 = new a2(3 * e4.length / 4 - r3), i3 = 0 < r3 ? e4.length - 4 : e4.length, u3 = 0;
            function s3(e5) {
              o3[u3++] = e5;
            }
            for (t4 = 0; t4 < i3; t4 += 4, 0)
              s3((16711680 & (n3 = f2(e4.charAt(t4)) << 18 | f2(e4.charAt(t4 + 1)) << 12 | f2(e4.charAt(t4 + 2)) << 6 | f2(e4.charAt(t4 + 3)))) >> 16), s3((65280 & n3) >> 8), s3(255 & n3);
            return 2 == r3 ? s3(255 & (n3 = f2(e4.charAt(t4)) << 2 | f2(e4.charAt(t4 + 1)) >> 4)) : 1 == r3 && (s3((n3 = f2(e4.charAt(t4)) << 10 | f2(e4.charAt(t4 + 1)) << 4 | f2(e4.charAt(t4 + 2)) >> 2) >> 8 & 255), s3(255 & n3)), o3;
          }, e3.fromByteArray = function(e4) {
            var t4, n3, r3, o3, i3 = e4.length % 3, u3 = "";
            function s3(e5) {
              return "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e5);
            }
            for (t4 = 0, r3 = e4.length - i3; t4 < r3; t4 += 3)
              n3 = (e4[t4] << 16) + (e4[t4 + 1] << 8) + e4[t4 + 2], u3 += s3((o3 = n3) >> 18 & 63) + s3(o3 >> 12 & 63) + s3(o3 >> 6 & 63) + s3(63 & o3);
            switch (i3) {
              case 1:
                u3 = (u3 += s3((n3 = e4[e4.length - 1]) >> 2)) + s3(n3 << 4 & 63) + "==";
                break;
              case 2:
                u3 = (u3 = (u3 += s3((n3 = (e4[e4.length - 2] << 8) + e4[e4.length - 1]) >> 10)) + s3(n3 >> 4 & 63)) + s3(n3 << 2 & 63) + "=";
            }
            return u3;
          };
        }(void 0 === f ? this.base64js = {} : f);
      }.call(this, e("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, e("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js", "/node_modules/gulp-browserify/node_modules/base64-js/lib");
    }, { buffer: 3, lYpoI2: 11 }], 3: [function(O, e, H) {
      !function(e2, n, f, r, h, p, g, y, w) {
        var a = O("base64-js"), i = O("ieee754");
        function f(e3, t2, n2) {
          if (!(this instanceof f))
            return new f(e3, t2, n2);
          var r2, o2, i2, u2, s2 = typeof e3;
          if ("base64" === t2 && "string" == s2)
            for (e3 = (u2 = e3).trim ? u2.trim() : u2.replace(/^\s+|\s+$/g, ""); e3.length % 4 != 0; )
              e3 += "=";
          if ("number" == s2)
            r2 = j(e3);
          else if ("string" == s2)
            r2 = f.byteLength(e3, t2);
          else {
            if ("object" != s2)
              throw new Error("First argument needs to be a number, array or string.");
            r2 = j(e3.length);
          }
          if (f._useTypedArrays ? o2 = f._augment(new Uint8Array(r2)) : ((o2 = this).length = r2, o2._isBuffer = true), f._useTypedArrays && "number" == typeof e3.byteLength)
            o2._set(e3);
          else if (C(u2 = e3) || f.isBuffer(u2) || u2 && "object" == typeof u2 && "number" == typeof u2.length)
            for (i2 = 0; i2 < r2; i2++)
              f.isBuffer(e3) ? o2[i2] = e3.readUInt8(i2) : o2[i2] = e3[i2];
          else if ("string" == s2)
            o2.write(e3, 0, t2);
          else if ("number" == s2 && !f._useTypedArrays && !n2)
            for (i2 = 0; i2 < r2; i2++)
              o2[i2] = 0;
          return o2;
        }
        function b(e3, t2, n2, r2) {
          return f._charsWritten = c(function(e4) {
            for (var t3 = [], n3 = 0; n3 < e4.length; n3++)
              t3.push(255 & e4.charCodeAt(n3));
            return t3;
          }(t2), e3, n2, r2);
        }
        function m(e3, t2, n2, r2) {
          return f._charsWritten = c(function(e4) {
            for (var t3, n3, r3 = [], o2 = 0; o2 < e4.length; o2++)
              n3 = e4.charCodeAt(o2), t3 = n3 >> 8, n3 = n3 % 256, r3.push(n3), r3.push(t3);
            return r3;
          }(t2), e3, n2, r2);
        }
        function v(e3, t2, n2) {
          var r2 = "";
          n2 = Math.min(e3.length, n2);
          for (var o2 = t2; o2 < n2; o2++)
            r2 += String.fromCharCode(e3[o2]);
          return r2;
        }
        function o(e3, t2, n2, r2) {
          r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(null != t2, "missing offset"), d(t2 + 1 < e3.length, "Trying to read beyond buffer length"));
          var o2, r2 = e3.length;
          if (!(r2 <= t2))
            return n2 ? (o2 = e3[t2], t2 + 1 < r2 && (o2 |= e3[t2 + 1] << 8)) : (o2 = e3[t2] << 8, t2 + 1 < r2 && (o2 |= e3[t2 + 1])), o2;
        }
        function u(e3, t2, n2, r2) {
          r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(null != t2, "missing offset"), d(t2 + 3 < e3.length, "Trying to read beyond buffer length"));
          var o2, r2 = e3.length;
          if (!(r2 <= t2))
            return n2 ? (t2 + 2 < r2 && (o2 = e3[t2 + 2] << 16), t2 + 1 < r2 && (o2 |= e3[t2 + 1] << 8), o2 |= e3[t2], t2 + 3 < r2 && (o2 += e3[t2 + 3] << 24 >>> 0)) : (t2 + 1 < r2 && (o2 = e3[t2 + 1] << 16), t2 + 2 < r2 && (o2 |= e3[t2 + 2] << 8), t2 + 3 < r2 && (o2 |= e3[t2 + 3]), o2 += e3[t2] << 24 >>> 0), o2;
        }
        function _(e3, t2, n2, r2) {
          if (r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(null != t2, "missing offset"), d(t2 + 1 < e3.length, "Trying to read beyond buffer length")), !(e3.length <= t2))
            return r2 = o(e3, t2, n2, true), 32768 & r2 ? -1 * (65535 - r2 + 1) : r2;
        }
        function E(e3, t2, n2, r2) {
          if (r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(null != t2, "missing offset"), d(t2 + 3 < e3.length, "Trying to read beyond buffer length")), !(e3.length <= t2))
            return r2 = u(e3, t2, n2, true), 2147483648 & r2 ? -1 * (4294967295 - r2 + 1) : r2;
        }
        function I(e3, t2, n2, r2) {
          return r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(t2 + 3 < e3.length, "Trying to read beyond buffer length")), i.read(e3, t2, n2, 23, 4);
        }
        function A(e3, t2, n2, r2) {
          return r2 || (d("boolean" == typeof n2, "missing or invalid endian"), d(t2 + 7 < e3.length, "Trying to read beyond buffer length")), i.read(e3, t2, n2, 52, 8);
        }
        function s(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 1 < e3.length, "trying to write beyond buffer length"), Y(t2, 65535));
          o2 = e3.length;
          if (!(o2 <= n2))
            for (var i2 = 0, u2 = Math.min(o2 - n2, 2); i2 < u2; i2++)
              e3[n2 + i2] = (t2 & 255 << 8 * (r2 ? i2 : 1 - i2)) >>> 8 * (r2 ? i2 : 1 - i2);
        }
        function l(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 3 < e3.length, "trying to write beyond buffer length"), Y(t2, 4294967295));
          o2 = e3.length;
          if (!(o2 <= n2))
            for (var i2 = 0, u2 = Math.min(o2 - n2, 4); i2 < u2; i2++)
              e3[n2 + i2] = t2 >>> 8 * (r2 ? i2 : 3 - i2) & 255;
        }
        function B(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 1 < e3.length, "Trying to write beyond buffer length"), F(t2, 32767, -32768)), e3.length <= n2 || s(e3, 0 <= t2 ? t2 : 65535 + t2 + 1, n2, r2, o2);
        }
        function L(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 3 < e3.length, "Trying to write beyond buffer length"), F(t2, 2147483647, -2147483648)), e3.length <= n2 || l(e3, 0 <= t2 ? t2 : 4294967295 + t2 + 1, n2, r2, o2);
        }
        function U(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 3 < e3.length, "Trying to write beyond buffer length"), D(t2, 34028234663852886e22, -34028234663852886e22)), e3.length <= n2 || i.write(e3, t2, n2, r2, 23, 4);
        }
        function x(e3, t2, n2, r2, o2) {
          o2 || (d(null != t2, "missing value"), d("boolean" == typeof r2, "missing or invalid endian"), d(null != n2, "missing offset"), d(n2 + 7 < e3.length, "Trying to write beyond buffer length"), D(t2, 17976931348623157e292, -17976931348623157e292)), e3.length <= n2 || i.write(e3, t2, n2, r2, 52, 8);
        }
        H.Buffer = f, H.SlowBuffer = f, H.INSPECT_MAX_BYTES = 50, f.poolSize = 8192, f._useTypedArrays = function() {
          try {
            var e3 = new ArrayBuffer(0), t2 = new Uint8Array(e3);
            return t2.foo = function() {
              return 42;
            }, 42 === t2.foo() && "function" == typeof t2.subarray;
          } catch (e4) {
            return false;
          }
        }(), f.isEncoding = function(e3) {
          switch (String(e3).toLowerCase()) {
            case "hex":
            case "utf8":
            case "utf-8":
            case "ascii":
            case "binary":
            case "base64":
            case "raw":
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              return true;
            default:
              return false;
          }
        }, f.isBuffer = function(e3) {
          return !(null == e3 || !e3._isBuffer);
        }, f.byteLength = function(e3, t2) {
          var n2;
          switch (e3 += "", t2 || "utf8") {
            case "hex":
              n2 = e3.length / 2;
              break;
            case "utf8":
            case "utf-8":
              n2 = T(e3).length;
              break;
            case "ascii":
            case "binary":
            case "raw":
              n2 = e3.length;
              break;
            case "base64":
              n2 = M(e3).length;
              break;
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              n2 = 2 * e3.length;
              break;
            default:
              throw new Error("Unknown encoding");
          }
          return n2;
        }, f.concat = function(e3, t2) {
          if (d(C(e3), "Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."), 0 === e3.length)
            return new f(0);
          if (1 === e3.length)
            return e3[0];
          if ("number" != typeof t2)
            for (o2 = t2 = 0; o2 < e3.length; o2++)
              t2 += e3[o2].length;
          for (var n2 = new f(t2), r2 = 0, o2 = 0; o2 < e3.length; o2++) {
            var i2 = e3[o2];
            i2.copy(n2, r2), r2 += i2.length;
          }
          return n2;
        }, f.prototype.write = function(e3, t2, n2, r2) {
          isFinite(t2) ? isFinite(n2) || (r2 = n2, n2 = void 0) : (a2 = r2, r2 = t2, t2 = n2, n2 = a2), t2 = Number(t2) || 0;
          var o2, i2, u2, s2, a2 = this.length - t2;
          switch ((!n2 || a2 < (n2 = Number(n2))) && (n2 = a2), r2 = String(r2 || "utf8").toLowerCase()) {
            case "hex":
              o2 = function(e4, t3, n3, r3) {
                n3 = Number(n3) || 0;
                var o3 = e4.length - n3;
                (!r3 || o3 < (r3 = Number(r3))) && (r3 = o3), d((o3 = t3.length) % 2 == 0, "Invalid hex string"), o3 / 2 < r3 && (r3 = o3 / 2);
                for (var i3 = 0; i3 < r3; i3++) {
                  var u3 = parseInt(t3.substr(2 * i3, 2), 16);
                  d(!isNaN(u3), "Invalid hex string"), e4[n3 + i3] = u3;
                }
                return f._charsWritten = 2 * i3, i3;
              }(this, e3, t2, n2);
              break;
            case "utf8":
            case "utf-8":
              i2 = this, u2 = t2, s2 = n2, o2 = f._charsWritten = c(T(e3), i2, u2, s2);
              break;
            case "ascii":
            case "binary":
              o2 = b(this, e3, t2, n2);
              break;
            case "base64":
              i2 = this, u2 = t2, s2 = n2, o2 = f._charsWritten = c(M(e3), i2, u2, s2);
              break;
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              o2 = m(this, e3, t2, n2);
              break;
            default:
              throw new Error("Unknown encoding");
          }
          return o2;
        }, f.prototype.toString = function(e3, t2, n2) {
          var r2, o2, i2, u2, s2 = this;
          if (e3 = String(e3 || "utf8").toLowerCase(), t2 = Number(t2) || 0, (n2 = void 0 !== n2 ? Number(n2) : s2.length) === t2)
            return "";
          switch (e3) {
            case "hex":
              r2 = function(e4, t3, n3) {
                var r3 = e4.length;
                (!t3 || t3 < 0) && (t3 = 0);
                (!n3 || n3 < 0 || r3 < n3) && (n3 = r3);
                for (var o3 = "", i3 = t3; i3 < n3; i3++)
                  o3 += k(e4[i3]);
                return o3;
              }(s2, t2, n2);
              break;
            case "utf8":
            case "utf-8":
              r2 = function(e4, t3, n3) {
                var r3 = "", o3 = "";
                n3 = Math.min(e4.length, n3);
                for (var i3 = t3; i3 < n3; i3++)
                  e4[i3] <= 127 ? (r3 += N(o3) + String.fromCharCode(e4[i3]), o3 = "") : o3 += "%" + e4[i3].toString(16);
                return r3 + N(o3);
              }(s2, t2, n2);
              break;
            case "ascii":
            case "binary":
              r2 = v(s2, t2, n2);
              break;
            case "base64":
              o2 = s2, u2 = n2, r2 = 0 === (i2 = t2) && u2 === o2.length ? a.fromByteArray(o2) : a.fromByteArray(o2.slice(i2, u2));
              break;
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              r2 = function(e4, t3, n3) {
                for (var r3 = e4.slice(t3, n3), o3 = "", i3 = 0; i3 < r3.length; i3 += 2)
                  o3 += String.fromCharCode(r3[i3] + 256 * r3[i3 + 1]);
                return o3;
              }(s2, t2, n2);
              break;
            default:
              throw new Error("Unknown encoding");
          }
          return r2;
        }, f.prototype.toJSON = function() {
          return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
        }, f.prototype.copy = function(e3, t2, n2, r2) {
          if (t2 = t2 || 0, (r2 = r2 || 0 === r2 ? r2 : this.length) !== (n2 = n2 || 0) && 0 !== e3.length && 0 !== this.length) {
            d(n2 <= r2, "sourceEnd < sourceStart"), d(0 <= t2 && t2 < e3.length, "targetStart out of bounds"), d(0 <= n2 && n2 < this.length, "sourceStart out of bounds"), d(0 <= r2 && r2 <= this.length, "sourceEnd out of bounds"), r2 > this.length && (r2 = this.length);
            var o2 = (r2 = e3.length - t2 < r2 - n2 ? e3.length - t2 + n2 : r2) - n2;
            if (o2 < 100 || !f._useTypedArrays)
              for (var i2 = 0; i2 < o2; i2++)
                e3[i2 + t2] = this[i2 + n2];
            else
              e3._set(this.subarray(n2, n2 + o2), t2);
          }
        }, f.prototype.slice = function(e3, t2) {
          var n2 = this.length;
          if (e3 = S(e3, n2, 0), t2 = S(t2, n2, n2), f._useTypedArrays)
            return f._augment(this.subarray(e3, t2));
          for (var r2 = t2 - e3, o2 = new f(r2, void 0, true), i2 = 0; i2 < r2; i2++)
            o2[i2] = this[i2 + e3];
          return o2;
        }, f.prototype.get = function(e3) {
          return console.log(".get() is deprecated. Access using array indexes instead."), this.readUInt8(e3);
        }, f.prototype.set = function(e3, t2) {
          return console.log(".set() is deprecated. Access using array indexes instead."), this.writeUInt8(e3, t2);
        }, f.prototype.readUInt8 = function(e3, t2) {
          if (t2 || (d(null != e3, "missing offset"), d(e3 < this.length, "Trying to read beyond buffer length")), !(e3 >= this.length))
            return this[e3];
        }, f.prototype.readUInt16LE = function(e3, t2) {
          return o(this, e3, true, t2);
        }, f.prototype.readUInt16BE = function(e3, t2) {
          return o(this, e3, false, t2);
        }, f.prototype.readUInt32LE = function(e3, t2) {
          return u(this, e3, true, t2);
        }, f.prototype.readUInt32BE = function(e3, t2) {
          return u(this, e3, false, t2);
        }, f.prototype.readInt8 = function(e3, t2) {
          if (t2 || (d(null != e3, "missing offset"), d(e3 < this.length, "Trying to read beyond buffer length")), !(e3 >= this.length))
            return 128 & this[e3] ? -1 * (255 - this[e3] + 1) : this[e3];
        }, f.prototype.readInt16LE = function(e3, t2) {
          return _(this, e3, true, t2);
        }, f.prototype.readInt16BE = function(e3, t2) {
          return _(this, e3, false, t2);
        }, f.prototype.readInt32LE = function(e3, t2) {
          return E(this, e3, true, t2);
        }, f.prototype.readInt32BE = function(e3, t2) {
          return E(this, e3, false, t2);
        }, f.prototype.readFloatLE = function(e3, t2) {
          return I(this, e3, true, t2);
        }, f.prototype.readFloatBE = function(e3, t2) {
          return I(this, e3, false, t2);
        }, f.prototype.readDoubleLE = function(e3, t2) {
          return A(this, e3, true, t2);
        }, f.prototype.readDoubleBE = function(e3, t2) {
          return A(this, e3, false, t2);
        }, f.prototype.writeUInt8 = function(e3, t2, n2) {
          n2 || (d(null != e3, "missing value"), d(null != t2, "missing offset"), d(t2 < this.length, "trying to write beyond buffer length"), Y(e3, 255)), t2 >= this.length || (this[t2] = e3);
        }, f.prototype.writeUInt16LE = function(e3, t2, n2) {
          s(this, e3, t2, true, n2);
        }, f.prototype.writeUInt16BE = function(e3, t2, n2) {
          s(this, e3, t2, false, n2);
        }, f.prototype.writeUInt32LE = function(e3, t2, n2) {
          l(this, e3, t2, true, n2);
        }, f.prototype.writeUInt32BE = function(e3, t2, n2) {
          l(this, e3, t2, false, n2);
        }, f.prototype.writeInt8 = function(e3, t2, n2) {
          n2 || (d(null != e3, "missing value"), d(null != t2, "missing offset"), d(t2 < this.length, "Trying to write beyond buffer length"), F(e3, 127, -128)), t2 >= this.length || (0 <= e3 ? this.writeUInt8(e3, t2, n2) : this.writeUInt8(255 + e3 + 1, t2, n2));
        }, f.prototype.writeInt16LE = function(e3, t2, n2) {
          B(this, e3, t2, true, n2);
        }, f.prototype.writeInt16BE = function(e3, t2, n2) {
          B(this, e3, t2, false, n2);
        }, f.prototype.writeInt32LE = function(e3, t2, n2) {
          L(this, e3, t2, true, n2);
        }, f.prototype.writeInt32BE = function(e3, t2, n2) {
          L(this, e3, t2, false, n2);
        }, f.prototype.writeFloatLE = function(e3, t2, n2) {
          U(this, e3, t2, true, n2);
        }, f.prototype.writeFloatBE = function(e3, t2, n2) {
          U(this, e3, t2, false, n2);
        }, f.prototype.writeDoubleLE = function(e3, t2, n2) {
          x(this, e3, t2, true, n2);
        }, f.prototype.writeDoubleBE = function(e3, t2, n2) {
          x(this, e3, t2, false, n2);
        }, f.prototype.fill = function(e3, t2, n2) {
          if (t2 = t2 || 0, n2 = n2 || this.length, d("number" == typeof (e3 = "string" == typeof (e3 = e3 || 0) ? e3.charCodeAt(0) : e3) && !isNaN(e3), "value is not a number"), d(t2 <= n2, "end < start"), n2 !== t2 && 0 !== this.length) {
            d(0 <= t2 && t2 < this.length, "start out of bounds"), d(0 <= n2 && n2 <= this.length, "end out of bounds");
            for (var r2 = t2; r2 < n2; r2++)
              this[r2] = e3;
          }
        }, f.prototype.inspect = function() {
          for (var e3 = [], t2 = this.length, n2 = 0; n2 < t2; n2++)
            if (e3[n2] = k(this[n2]), n2 === H.INSPECT_MAX_BYTES) {
              e3[n2 + 1] = "...";
              break;
            }
          return "<Buffer " + e3.join(" ") + ">";
        }, f.prototype.toArrayBuffer = function() {
          if ("undefined" == typeof Uint8Array)
            throw new Error("Buffer.toArrayBuffer not supported in this browser");
          if (f._useTypedArrays)
            return new f(this).buffer;
          for (var e3 = new Uint8Array(this.length), t2 = 0, n2 = e3.length; t2 < n2; t2 += 1)
            e3[t2] = this[t2];
          return e3.buffer;
        };
        var t = f.prototype;
        function S(e3, t2, n2) {
          return "number" != typeof e3 ? n2 : t2 <= (e3 = ~~e3) ? t2 : 0 <= e3 || 0 <= (e3 += t2) ? e3 : 0;
        }
        function j(e3) {
          return (e3 = ~~Math.ceil(+e3)) < 0 ? 0 : e3;
        }
        function C(e3) {
          return (Array.isArray || function(e4) {
            return "[object Array]" === Object.prototype.toString.call(e4);
          })(e3);
        }
        function k(e3) {
          return e3 < 16 ? "0" + e3.toString(16) : e3.toString(16);
        }
        function T(e3) {
          for (var t2 = [], n2 = 0; n2 < e3.length; n2++) {
            var r2 = e3.charCodeAt(n2);
            if (r2 <= 127)
              t2.push(e3.charCodeAt(n2));
            else
              for (var o2 = n2, i2 = (55296 <= r2 && r2 <= 57343 && n2++, encodeURIComponent(e3.slice(o2, n2 + 1)).substr(1).split("%")), u2 = 0; u2 < i2.length; u2++)
                t2.push(parseInt(i2[u2], 16));
          }
          return t2;
        }
        function M(e3) {
          return a.toByteArray(e3);
        }
        function c(e3, t2, n2, r2) {
          for (var o2 = 0; o2 < r2 && !(o2 + n2 >= t2.length || o2 >= e3.length); o2++)
            t2[o2 + n2] = e3[o2];
          return o2;
        }
        function N(e3) {
          try {
            return decodeURIComponent(e3);
          } catch (e4) {
            return String.fromCharCode(65533);
          }
        }
        function Y(e3, t2) {
          d("number" == typeof e3, "cannot write a non-number as a number"), d(0 <= e3, "specified a negative value for writing an unsigned value"), d(e3 <= t2, "value is larger than maximum value for type"), d(Math.floor(e3) === e3, "value has a fractional component");
        }
        function F(e3, t2, n2) {
          d("number" == typeof e3, "cannot write a non-number as a number"), d(e3 <= t2, "value larger than maximum allowed value"), d(n2 <= e3, "value smaller than minimum allowed value"), d(Math.floor(e3) === e3, "value has a fractional component");
        }
        function D(e3, t2, n2) {
          d("number" == typeof e3, "cannot write a non-number as a number"), d(e3 <= t2, "value larger than maximum allowed value"), d(n2 <= e3, "value smaller than minimum allowed value");
        }
        function d(e3, t2) {
          if (!e3)
            throw new Error(t2 || "Failed assertion");
        }
        f._augment = function(e3) {
          return e3._isBuffer = true, e3._get = e3.get, e3._set = e3.set, e3.get = t.get, e3.set = t.set, e3.write = t.write, e3.toString = t.toString, e3.toLocaleString = t.toString, e3.toJSON = t.toJSON, e3.copy = t.copy, e3.slice = t.slice, e3.readUInt8 = t.readUInt8, e3.readUInt16LE = t.readUInt16LE, e3.readUInt16BE = t.readUInt16BE, e3.readUInt32LE = t.readUInt32LE, e3.readUInt32BE = t.readUInt32BE, e3.readInt8 = t.readInt8, e3.readInt16LE = t.readInt16LE, e3.readInt16BE = t.readInt16BE, e3.readInt32LE = t.readInt32LE, e3.readInt32BE = t.readInt32BE, e3.readFloatLE = t.readFloatLE, e3.readFloatBE = t.readFloatBE, e3.readDoubleLE = t.readDoubleLE, e3.readDoubleBE = t.readDoubleBE, e3.writeUInt8 = t.writeUInt8, e3.writeUInt16LE = t.writeUInt16LE, e3.writeUInt16BE = t.writeUInt16BE, e3.writeUInt32LE = t.writeUInt32LE, e3.writeUInt32BE = t.writeUInt32BE, e3.writeInt8 = t.writeInt8, e3.writeInt16LE = t.writeInt16LE, e3.writeInt16BE = t.writeInt16BE, e3.writeInt32LE = t.writeInt32LE, e3.writeInt32BE = t.writeInt32BE, e3.writeFloatLE = t.writeFloatLE, e3.writeFloatBE = t.writeFloatBE, e3.writeDoubleLE = t.writeDoubleLE, e3.writeDoubleBE = t.writeDoubleBE, e3.fill = t.fill, e3.inspect = t.inspect, e3.toArrayBuffer = t.toArrayBuffer, e3;
        };
      }.call(this, O("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, O("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/buffer/index.js", "/node_modules/gulp-browserify/node_modules/buffer");
    }, { "base64-js": 2, buffer: 3, ieee754: 10, lYpoI2: 11 }], 4: [function(c, d, e) {
      !function(e2, t, a, n, r, o, i, u, s) {
        var a = c("buffer").Buffer, f = 4, l = new a(f);
        l.fill(0);
        d.exports = { hash: function(e3, t2, n2, r2) {
          for (var o2 = t2(function(e4, t3) {
            e4.length % f != 0 && (n3 = e4.length + (f - e4.length % f), e4 = a.concat([e4, l], n3));
            for (var n3, r3 = [], o3 = t3 ? e4.readInt32BE : e4.readInt32LE, i3 = 0; i3 < e4.length; i3 += f)
              r3.push(o3.call(e4, i3));
            return r3;
          }(e3 = a.isBuffer(e3) ? e3 : new a(e3), r2), 8 * e3.length), t2 = r2, i2 = new a(n2), u2 = t2 ? i2.writeInt32BE : i2.writeInt32LE, s2 = 0; s2 < o2.length; s2++)
            u2.call(i2, o2[s2], 4 * s2, true);
          return i2;
        } };
      }.call(this, c("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, c("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { buffer: 3, lYpoI2: 11 }], 5: [function(v, e, _) {
      !function(l, c, u, d, h, p, g, y, w) {
        var u = v("buffer").Buffer, e2 = v("./sha"), t = v("./sha256"), n = v("./rng"), b = { sha1: e2, sha256: t, md5: v("./md5") }, s = 64, a = new u(s);
        function r(e3, n2) {
          var r2 = b[e3 = e3 || "sha1"], o2 = [];
          return r2 || i("algorithm:", e3, "is not yet supported"), { update: function(e4) {
            return u.isBuffer(e4) || (e4 = new u(e4)), o2.push(e4), e4.length, this;
          }, digest: function(e4) {
            var t2 = u.concat(o2), t2 = n2 ? function(e5, t3, n3) {
              u.isBuffer(t3) || (t3 = new u(t3)), u.isBuffer(n3) || (n3 = new u(n3)), t3.length > s ? t3 = e5(t3) : t3.length < s && (t3 = u.concat([t3, a], s));
              for (var r3 = new u(s), o3 = new u(s), i2 = 0; i2 < s; i2++)
                r3[i2] = 54 ^ t3[i2], o3[i2] = 92 ^ t3[i2];
              return n3 = e5(u.concat([r3, n3])), e5(u.concat([o3, n3]));
            }(r2, n2, t2) : r2(t2);
            return o2 = null, e4 ? t2.toString(e4) : t2;
          } };
        }
        function i() {
          var e3 = [].slice.call(arguments).join(" ");
          throw new Error([e3, "we accept pull requests", "http://github.com/dominictarr/crypto-browserify"].join("\n"));
        }
        a.fill(0), _.createHash = function(e3) {
          return r(e3);
        }, _.createHmac = r, _.randomBytes = function(e3, t2) {
          if (!t2 || !t2.call)
            return new u(n(e3));
          try {
            t2.call(this, void 0, new u(n(e3)));
          } catch (e4) {
            t2(e4);
          }
        };
        var o, f = ["createCredentials", "createCipher", "createCipheriv", "createDecipher", "createDecipheriv", "createSign", "createVerify", "createDiffieHellman", "pbkdf2"], m = function(e3) {
          _[e3] = function() {
            i("sorry,", e3, "is not implemented yet");
          };
        };
        for (o in f)
          m(f[o]);
      }.call(this, v("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, v("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { "./md5": 6, "./rng": 7, "./sha": 8, "./sha256": 9, buffer: 3, lYpoI2: 11 }], 6: [function(w, b, e) {
      !function(e2, r, o, i, u, a, f, l, y) {
        var t = w("./helpers");
        function n(e3, t2) {
          e3[t2 >> 5] |= 128 << t2 % 32, e3[14 + (t2 + 64 >>> 9 << 4)] = t2;
          for (var n2 = 1732584193, r2 = -271733879, o2 = -1732584194, i2 = 271733878, u2 = 0; u2 < e3.length; u2 += 16) {
            var s2 = n2, a2 = r2, f2 = o2, l2 = i2, n2 = c(n2, r2, o2, i2, e3[u2 + 0], 7, -680876936), i2 = c(i2, n2, r2, o2, e3[u2 + 1], 12, -389564586), o2 = c(o2, i2, n2, r2, e3[u2 + 2], 17, 606105819), r2 = c(r2, o2, i2, n2, e3[u2 + 3], 22, -1044525330);
            n2 = c(n2, r2, o2, i2, e3[u2 + 4], 7, -176418897), i2 = c(i2, n2, r2, o2, e3[u2 + 5], 12, 1200080426), o2 = c(o2, i2, n2, r2, e3[u2 + 6], 17, -1473231341), r2 = c(r2, o2, i2, n2, e3[u2 + 7], 22, -45705983), n2 = c(n2, r2, o2, i2, e3[u2 + 8], 7, 1770035416), i2 = c(i2, n2, r2, o2, e3[u2 + 9], 12, -1958414417), o2 = c(o2, i2, n2, r2, e3[u2 + 10], 17, -42063), r2 = c(r2, o2, i2, n2, e3[u2 + 11], 22, -1990404162), n2 = c(n2, r2, o2, i2, e3[u2 + 12], 7, 1804603682), i2 = c(i2, n2, r2, o2, e3[u2 + 13], 12, -40341101), o2 = c(o2, i2, n2, r2, e3[u2 + 14], 17, -1502002290), n2 = d(n2, r2 = c(r2, o2, i2, n2, e3[u2 + 15], 22, 1236535329), o2, i2, e3[u2 + 1], 5, -165796510), i2 = d(i2, n2, r2, o2, e3[u2 + 6], 9, -1069501632), o2 = d(o2, i2, n2, r2, e3[u2 + 11], 14, 643717713), r2 = d(r2, o2, i2, n2, e3[u2 + 0], 20, -373897302), n2 = d(n2, r2, o2, i2, e3[u2 + 5], 5, -701558691), i2 = d(i2, n2, r2, o2, e3[u2 + 10], 9, 38016083), o2 = d(o2, i2, n2, r2, e3[u2 + 15], 14, -660478335), r2 = d(r2, o2, i2, n2, e3[u2 + 4], 20, -405537848), n2 = d(n2, r2, o2, i2, e3[u2 + 9], 5, 568446438), i2 = d(i2, n2, r2, o2, e3[u2 + 14], 9, -1019803690), o2 = d(o2, i2, n2, r2, e3[u2 + 3], 14, -187363961), r2 = d(r2, o2, i2, n2, e3[u2 + 8], 20, 1163531501), n2 = d(n2, r2, o2, i2, e3[u2 + 13], 5, -1444681467), i2 = d(i2, n2, r2, o2, e3[u2 + 2], 9, -51403784), o2 = d(o2, i2, n2, r2, e3[u2 + 7], 14, 1735328473), n2 = h(n2, r2 = d(r2, o2, i2, n2, e3[u2 + 12], 20, -1926607734), o2, i2, e3[u2 + 5], 4, -378558), i2 = h(i2, n2, r2, o2, e3[u2 + 8], 11, -2022574463), o2 = h(o2, i2, n2, r2, e3[u2 + 11], 16, 1839030562), r2 = h(r2, o2, i2, n2, e3[u2 + 14], 23, -35309556), n2 = h(n2, r2, o2, i2, e3[u2 + 1], 4, -1530992060), i2 = h(i2, n2, r2, o2, e3[u2 + 4], 11, 1272893353), o2 = h(o2, i2, n2, r2, e3[u2 + 7], 16, -155497632), r2 = h(r2, o2, i2, n2, e3[u2 + 10], 23, -1094730640), n2 = h(n2, r2, o2, i2, e3[u2 + 13], 4, 681279174), i2 = h(i2, n2, r2, o2, e3[u2 + 0], 11, -358537222), o2 = h(o2, i2, n2, r2, e3[u2 + 3], 16, -722521979), r2 = h(r2, o2, i2, n2, e3[u2 + 6], 23, 76029189), n2 = h(n2, r2, o2, i2, e3[u2 + 9], 4, -640364487), i2 = h(i2, n2, r2, o2, e3[u2 + 12], 11, -421815835), o2 = h(o2, i2, n2, r2, e3[u2 + 15], 16, 530742520), n2 = p(n2, r2 = h(r2, o2, i2, n2, e3[u2 + 2], 23, -995338651), o2, i2, e3[u2 + 0], 6, -198630844), i2 = p(i2, n2, r2, o2, e3[u2 + 7], 10, 1126891415), o2 = p(o2, i2, n2, r2, e3[u2 + 14], 15, -1416354905), r2 = p(r2, o2, i2, n2, e3[u2 + 5], 21, -57434055), n2 = p(n2, r2, o2, i2, e3[u2 + 12], 6, 1700485571), i2 = p(i2, n2, r2, o2, e3[u2 + 3], 10, -1894986606), o2 = p(o2, i2, n2, r2, e3[u2 + 10], 15, -1051523), r2 = p(r2, o2, i2, n2, e3[u2 + 1], 21, -2054922799), n2 = p(n2, r2, o2, i2, e3[u2 + 8], 6, 1873313359), i2 = p(i2, n2, r2, o2, e3[u2 + 15], 10, -30611744), o2 = p(o2, i2, n2, r2, e3[u2 + 6], 15, -1560198380), r2 = p(r2, o2, i2, n2, e3[u2 + 13], 21, 1309151649), n2 = p(n2, r2, o2, i2, e3[u2 + 4], 6, -145523070), i2 = p(i2, n2, r2, o2, e3[u2 + 11], 10, -1120210379), o2 = p(o2, i2, n2, r2, e3[u2 + 2], 15, 718787259), r2 = p(r2, o2, i2, n2, e3[u2 + 9], 21, -343485551), n2 = g(n2, s2), r2 = g(r2, a2), o2 = g(o2, f2), i2 = g(i2, l2);
          }
          return Array(n2, r2, o2, i2);
        }
        function s(e3, t2, n2, r2, o2, i2) {
          return g((t2 = g(g(t2, e3), g(r2, i2))) << o2 | t2 >>> 32 - o2, n2);
        }
        function c(e3, t2, n2, r2, o2, i2, u2) {
          return s(t2 & n2 | ~t2 & r2, e3, t2, o2, i2, u2);
        }
        function d(e3, t2, n2, r2, o2, i2, u2) {
          return s(t2 & r2 | n2 & ~r2, e3, t2, o2, i2, u2);
        }
        function h(e3, t2, n2, r2, o2, i2, u2) {
          return s(t2 ^ n2 ^ r2, e3, t2, o2, i2, u2);
        }
        function p(e3, t2, n2, r2, o2, i2, u2) {
          return s(n2 ^ (t2 | ~r2), e3, t2, o2, i2, u2);
        }
        function g(e3, t2) {
          var n2 = (65535 & e3) + (65535 & t2);
          return (e3 >> 16) + (t2 >> 16) + (n2 >> 16) << 16 | 65535 & n2;
        }
        b.exports = function(e3) {
          return t.hash(e3, n, 16);
        };
      }.call(this, w("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, w("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { "./helpers": 4, buffer: 3, lYpoI2: 11 }], 7: [function(e, l, t) {
      !function(e2, t2, n, r, o, i, u, s, f) {
        l.exports = function(e3) {
          for (var t3, n2 = new Array(e3), r2 = 0; r2 < e3; r2++)
            0 == (3 & r2) && (t3 = 4294967296 * Math.random()), n2[r2] = t3 >>> ((3 & r2) << 3) & 255;
          return n2;
        };
      }.call(this, e("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, e("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { buffer: 3, lYpoI2: 11 }], 8: [function(c, d, e) {
      !function(e2, t, n, r, o, s, a, f, l) {
        var i = c("./helpers");
        function u(l2, c2) {
          l2[c2 >> 5] |= 128 << 24 - c2 % 32, l2[15 + (c2 + 64 >> 9 << 4)] = c2;
          for (var e3, t2, n2, r2 = Array(80), o2 = 1732584193, i2 = -271733879, u2 = -1732584194, s2 = 271733878, d2 = -1009589776, h = 0; h < l2.length; h += 16) {
            for (var p = o2, g = i2, y = u2, w = s2, b = d2, a2 = 0; a2 < 80; a2++) {
              r2[a2] = a2 < 16 ? l2[h + a2] : v(r2[a2 - 3] ^ r2[a2 - 8] ^ r2[a2 - 14] ^ r2[a2 - 16], 1);
              var f2 = m(m(v(o2, 5), (f2 = i2, t2 = u2, n2 = s2, (e3 = a2) < 20 ? f2 & t2 | ~f2 & n2 : !(e3 < 40) && e3 < 60 ? f2 & t2 | f2 & n2 | t2 & n2 : f2 ^ t2 ^ n2)), m(m(d2, r2[a2]), (e3 = a2) < 20 ? 1518500249 : e3 < 40 ? 1859775393 : e3 < 60 ? -1894007588 : -899497514)), d2 = s2, s2 = u2, u2 = v(i2, 30), i2 = o2, o2 = f2;
            }
            o2 = m(o2, p), i2 = m(i2, g), u2 = m(u2, y), s2 = m(s2, w), d2 = m(d2, b);
          }
          return Array(o2, i2, u2, s2, d2);
        }
        function m(e3, t2) {
          var n2 = (65535 & e3) + (65535 & t2);
          return (e3 >> 16) + (t2 >> 16) + (n2 >> 16) << 16 | 65535 & n2;
        }
        function v(e3, t2) {
          return e3 << t2 | e3 >>> 32 - t2;
        }
        d.exports = function(e3) {
          return i.hash(e3, u, 20, true);
        };
      }.call(this, c("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, c("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { "./helpers": 4, buffer: 3, lYpoI2: 11 }], 9: [function(c, d, e) {
      !function(e2, t, n, r, u, s, a, f, l) {
        function b(e3, t2) {
          var n2 = (65535 & e3) + (65535 & t2);
          return (e3 >> 16) + (t2 >> 16) + (n2 >> 16) << 16 | 65535 & n2;
        }
        function o(e3, l2) {
          var c2, d2 = new Array(1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298), t2 = new Array(1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225), n2 = new Array(64);
          e3[l2 >> 5] |= 128 << 24 - l2 % 32, e3[15 + (l2 + 64 >> 9 << 4)] = l2;
          for (var r2, o2, h = 0; h < e3.length; h += 16) {
            for (var i2 = t2[0], u2 = t2[1], s2 = t2[2], p = t2[3], a2 = t2[4], g = t2[5], y = t2[6], w = t2[7], f2 = 0; f2 < 64; f2++)
              n2[f2] = f2 < 16 ? e3[f2 + h] : b(b(b((o2 = n2[f2 - 2], m(o2, 17) ^ m(o2, 19) ^ v(o2, 10)), n2[f2 - 7]), (o2 = n2[f2 - 15], m(o2, 7) ^ m(o2, 18) ^ v(o2, 3))), n2[f2 - 16]), c2 = b(b(b(b(w, m(o2 = a2, 6) ^ m(o2, 11) ^ m(o2, 25)), a2 & g ^ ~a2 & y), d2[f2]), n2[f2]), r2 = b(m(r2 = i2, 2) ^ m(r2, 13) ^ m(r2, 22), i2 & u2 ^ i2 & s2 ^ u2 & s2), w = y, y = g, g = a2, a2 = b(p, c2), p = s2, s2 = u2, u2 = i2, i2 = b(c2, r2);
            t2[0] = b(i2, t2[0]), t2[1] = b(u2, t2[1]), t2[2] = b(s2, t2[2]), t2[3] = b(p, t2[3]), t2[4] = b(a2, t2[4]), t2[5] = b(g, t2[5]), t2[6] = b(y, t2[6]), t2[7] = b(w, t2[7]);
          }
          return t2;
        }
        var i = c("./helpers"), m = function(e3, t2) {
          return e3 >>> t2 | e3 << 32 - t2;
        }, v = function(e3, t2) {
          return e3 >>> t2;
        };
        d.exports = function(e3) {
          return i.hash(e3, o, 32, true);
        };
      }.call(this, c("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, c("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js", "/node_modules/gulp-browserify/node_modules/crypto-browserify");
    }, { "./helpers": 4, buffer: 3, lYpoI2: 11 }], 10: [function(e, t, f) {
      !function(e2, t2, n, r, o, i, u, s, a) {
        f.read = function(e3, t3, n2, r2, o2) {
          var i2, u2, l = 8 * o2 - r2 - 1, c = (1 << l) - 1, d = c >> 1, s2 = -7, a2 = n2 ? o2 - 1 : 0, f2 = n2 ? -1 : 1, o2 = e3[t3 + a2];
          for (a2 += f2, i2 = o2 & (1 << -s2) - 1, o2 >>= -s2, s2 += l; 0 < s2; i2 = 256 * i2 + e3[t3 + a2], a2 += f2, s2 -= 8)
            ;
          for (u2 = i2 & (1 << -s2) - 1, i2 >>= -s2, s2 += r2; 0 < s2; u2 = 256 * u2 + e3[t3 + a2], a2 += f2, s2 -= 8)
            ;
          if (0 === i2)
            i2 = 1 - d;
          else {
            if (i2 === c)
              return u2 ? NaN : 1 / 0 * (o2 ? -1 : 1);
            u2 += Math.pow(2, r2), i2 -= d;
          }
          return (o2 ? -1 : 1) * u2 * Math.pow(2, i2 - r2);
        }, f.write = function(e3, t3, l, n2, r2, c) {
          var o2, i2, u2 = 8 * c - r2 - 1, s2 = (1 << u2) - 1, a2 = s2 >> 1, d = 23 === r2 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, f2 = n2 ? 0 : c - 1, h = n2 ? 1 : -1, c = t3 < 0 || 0 === t3 && 1 / t3 < 0 ? 1 : 0;
          for (t3 = Math.abs(t3), isNaN(t3) || t3 === 1 / 0 ? (i2 = isNaN(t3) ? 1 : 0, o2 = s2) : (o2 = Math.floor(Math.log(t3) / Math.LN2), t3 * (n2 = Math.pow(2, -o2)) < 1 && (o2--, n2 *= 2), 2 <= (t3 += 1 <= o2 + a2 ? d / n2 : d * Math.pow(2, 1 - a2)) * n2 && (o2++, n2 /= 2), s2 <= o2 + a2 ? (i2 = 0, o2 = s2) : 1 <= o2 + a2 ? (i2 = (t3 * n2 - 1) * Math.pow(2, r2), o2 += a2) : (i2 = t3 * Math.pow(2, a2 - 1) * Math.pow(2, r2), o2 = 0)); 8 <= r2; e3[l + f2] = 255 & i2, f2 += h, i2 /= 256, r2 -= 8)
            ;
          for (o2 = o2 << r2 | i2, u2 += r2; 0 < u2; e3[l + f2] = 255 & o2, f2 += h, o2 /= 256, u2 -= 8)
            ;
          e3[l + f2 - h] |= 128 * c;
        };
      }.call(this, e("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, e("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/ieee754/index.js", "/node_modules/gulp-browserify/node_modules/ieee754");
    }, { buffer: 3, lYpoI2: 11 }], 11: [function(e, h, t) {
      !function(e2, t2, n, r, o, f, l, c, d) {
        var i, u, s;
        function a() {
        }
        (e2 = h.exports = {}).nextTick = (u = "undefined" != typeof window && window.setImmediate, s = "undefined" != typeof window && window.postMessage && window.addEventListener, u ? function(e3) {
          return window.setImmediate(e3);
        } : s ? (i = [], window.addEventListener("message", function(e3) {
          var t3 = e3.source;
          t3 !== window && null !== t3 || "process-tick" !== e3.data || (e3.stopPropagation(), 0 < i.length && i.shift()());
        }, true), function(e3) {
          i.push(e3), window.postMessage("process-tick", "*");
        }) : function(e3) {
          setTimeout(e3, 0);
        }), e2.title = "browser", e2.browser = true, e2.env = {}, e2.argv = [], e2.on = a, e2.addListener = a, e2.once = a, e2.off = a, e2.removeListener = a, e2.removeAllListeners = a, e2.emit = a, e2.binding = function(e3) {
          throw new Error("process.binding is not supported");
        }, e2.cwd = function() {
          return "/";
        }, e2.chdir = function(e3) {
          throw new Error("process.chdir is not supported");
        };
      }.call(this, e("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, e("buffer").Buffer, arguments[3], arguments[4], arguments[5], arguments[6], "/node_modules/gulp-browserify/node_modules/process/browser.js", "/node_modules/gulp-browserify/node_modules/process");
    }, { buffer: 3, lYpoI2: 11 }] }, {}, [1])(1);
  });
})(object_hash);
const hash = object_hash.exports;
const getCacheKey = (...strings) => hash(strings.join("_"));
const RUN_KEY = "__run";
class BaseChatMessage {
  constructor(text2) {
    Object.defineProperty(this, "text", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.text = text2;
  }
  toJSON() {
    return {
      type: this._getType(),
      data: {
        content: this.text,
        role: "role" in this ? this.role : void 0
      }
    };
  }
}
class HumanChatMessage extends BaseChatMessage {
  _getType() {
    return "human";
  }
}
class AIChatMessage extends BaseChatMessage {
  _getType() {
    return "ai";
  }
}
class SystemChatMessage extends BaseChatMessage {
  _getType() {
    return "system";
  }
}
class ChatMessage extends BaseChatMessage {
  constructor(text2, role) {
    super(text2);
    Object.defineProperty(this, "role", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.role = role;
  }
  _getType() {
    return "generic";
  }
}
class BaseCache {
}
const GLOBAL_MAP = /* @__PURE__ */ new Map();
class InMemoryCache extends BaseCache {
  constructor(map) {
    super();
    Object.defineProperty(this, "cache", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.cache = map != null ? map : /* @__PURE__ */ new Map();
  }
  lookup(prompt, llmKey) {
    var _a;
    return Promise.resolve((_a = this.cache.get(getCacheKey(prompt, llmKey))) != null ? _a : null);
  }
  async update(prompt, llmKey, value) {
    this.cache.set(getCacheKey(prompt, llmKey), value);
  }
  static global() {
    return new InMemoryCache(GLOBAL_MAP);
  }
}
var pRetry$1 = { exports: {} };
var retry$2 = { exports: {} };
var retry$1 = {};
function RetryOperation(timeouts, options2) {
  if (typeof options2 === "boolean") {
    options2 = { forever: options2 };
  }
  this._originalTimeouts = JSON.parse(JSON.stringify(timeouts));
  this._timeouts = timeouts;
  this._options = options2 || {};
  this._maxRetryTime = options2 && options2.maxRetryTime || Infinity;
  this._fn = null;
  this._errors = [];
  this._attempts = 1;
  this._operationTimeout = null;
  this._operationTimeoutCb = null;
  this._timeout = null;
  this._operationStart = null;
  this._timer = null;
  if (this._options.forever) {
    this._cachedTimeouts = this._timeouts.slice(0);
  }
}
var retry_operation = RetryOperation;
RetryOperation.prototype.reset = function() {
  this._attempts = 1;
  this._timeouts = this._originalTimeouts.slice(0);
};
RetryOperation.prototype.stop = function() {
  if (this._timeout) {
    clearTimeout(this._timeout);
  }
  if (this._timer) {
    clearTimeout(this._timer);
  }
  this._timeouts = [];
  this._cachedTimeouts = null;
};
RetryOperation.prototype.retry = function(err) {
  if (this._timeout) {
    clearTimeout(this._timeout);
  }
  if (!err) {
    return false;
  }
  var currentTime = new Date().getTime();
  if (err && currentTime - this._operationStart >= this._maxRetryTime) {
    this._errors.push(err);
    this._errors.unshift(new Error("RetryOperation timeout occurred"));
    return false;
  }
  this._errors.push(err);
  var timeout = this._timeouts.shift();
  if (timeout === void 0) {
    if (this._cachedTimeouts) {
      this._errors.splice(0, this._errors.length - 1);
      timeout = this._cachedTimeouts.slice(-1);
    } else {
      return false;
    }
  }
  var self2 = this;
  this._timer = setTimeout(function() {
    self2._attempts++;
    if (self2._operationTimeoutCb) {
      self2._timeout = setTimeout(function() {
        self2._operationTimeoutCb(self2._attempts);
      }, self2._operationTimeout);
      if (self2._options.unref) {
        self2._timeout.unref();
      }
    }
    self2._fn(self2._attempts);
  }, timeout);
  if (this._options.unref) {
    this._timer.unref();
  }
  return true;
};
RetryOperation.prototype.attempt = function(fn, timeoutOps) {
  this._fn = fn;
  if (timeoutOps) {
    if (timeoutOps.timeout) {
      this._operationTimeout = timeoutOps.timeout;
    }
    if (timeoutOps.cb) {
      this._operationTimeoutCb = timeoutOps.cb;
    }
  }
  var self2 = this;
  if (this._operationTimeoutCb) {
    this._timeout = setTimeout(function() {
      self2._operationTimeoutCb();
    }, self2._operationTimeout);
  }
  this._operationStart = new Date().getTime();
  this._fn(this._attempts);
};
RetryOperation.prototype.try = function(fn) {
  console.log("Using RetryOperation.try() is deprecated");
  this.attempt(fn);
};
RetryOperation.prototype.start = function(fn) {
  console.log("Using RetryOperation.start() is deprecated");
  this.attempt(fn);
};
RetryOperation.prototype.start = RetryOperation.prototype.try;
RetryOperation.prototype.errors = function() {
  return this._errors;
};
RetryOperation.prototype.attempts = function() {
  return this._attempts;
};
RetryOperation.prototype.mainError = function() {
  if (this._errors.length === 0) {
    return null;
  }
  var counts = {};
  var mainError = null;
  var mainErrorCount = 0;
  for (var i = 0; i < this._errors.length; i++) {
    var error = this._errors[i];
    var message = error.message;
    var count = (counts[message] || 0) + 1;
    counts[message] = count;
    if (count >= mainErrorCount) {
      mainError = error;
      mainErrorCount = count;
    }
  }
  return mainError;
};
(function(exports2) {
  var RetryOperation2 = retry_operation;
  exports2.operation = function(options2) {
    var timeouts = exports2.timeouts(options2);
    return new RetryOperation2(timeouts, {
      forever: options2 && (options2.forever || options2.retries === Infinity),
      unref: options2 && options2.unref,
      maxRetryTime: options2 && options2.maxRetryTime
    });
  };
  exports2.timeouts = function(options2) {
    if (options2 instanceof Array) {
      return [].concat(options2);
    }
    var opts = {
      retries: 10,
      factor: 2,
      minTimeout: 1 * 1e3,
      maxTimeout: Infinity,
      randomize: false
    };
    for (var key in options2) {
      opts[key] = options2[key];
    }
    if (opts.minTimeout > opts.maxTimeout) {
      throw new Error("minTimeout is greater than maxTimeout");
    }
    var timeouts = [];
    for (var i = 0; i < opts.retries; i++) {
      timeouts.push(this.createTimeout(i, opts));
    }
    if (options2 && options2.forever && !timeouts.length) {
      timeouts.push(this.createTimeout(i, opts));
    }
    timeouts.sort(function(a, b) {
      return a - b;
    });
    return timeouts;
  };
  exports2.createTimeout = function(attempt, opts) {
    var random = opts.randomize ? Math.random() + 1 : 1;
    var timeout = Math.round(random * Math.max(opts.minTimeout, 1) * Math.pow(opts.factor, attempt));
    timeout = Math.min(timeout, opts.maxTimeout);
    return timeout;
  };
  exports2.wrap = function(obj, options2, methods) {
    if (options2 instanceof Array) {
      methods = options2;
      options2 = null;
    }
    if (!methods) {
      methods = [];
      for (var key in obj) {
        if (typeof obj[key] === "function") {
          methods.push(key);
        }
      }
    }
    for (var i = 0; i < methods.length; i++) {
      var method = methods[i];
      var original = obj[method];
      obj[method] = function retryWrapper(original2) {
        var op = exports2.operation(options2);
        var args = Array.prototype.slice.call(arguments, 1);
        var callback = args.pop();
        args.push(function(err) {
          if (op.retry(err)) {
            return;
          }
          if (err) {
            arguments[0] = op.mainError();
          }
          callback.apply(this, arguments);
        });
        op.attempt(function() {
          original2.apply(obj, args);
        });
      }.bind(obj, original);
      obj[method].options = options2;
    }
  };
})(retry$1);
(function(module2) {
  module2.exports = retry$1;
})(retry$2);
const retry = retry$2.exports;
const networkErrorMsgs = [
  "Failed to fetch",
  "NetworkError when attempting to fetch resource.",
  "The Internet connection appears to be offline.",
  "Network request failed"
];
class AbortError extends Error {
  constructor(message) {
    super();
    if (message instanceof Error) {
      this.originalError = message;
      ({ message } = message);
    } else {
      this.originalError = new Error(message);
      this.originalError.stack = this.stack;
    }
    this.name = "AbortError";
    this.message = message;
  }
}
const decorateErrorWithCounts = (error, attemptNumber, options2) => {
  const retriesLeft = options2.retries - (attemptNumber - 1);
  error.attemptNumber = attemptNumber;
  error.retriesLeft = retriesLeft;
  return error;
};
const isNetworkError = (errorMessage) => networkErrorMsgs.includes(errorMessage);
const pRetry = (input, options2) => new Promise((resolve, reject) => {
  options2 = {
    onFailedAttempt: () => {
    },
    retries: 10,
    ...options2
  };
  const operation = retry.operation(options2);
  operation.attempt(async (attemptNumber) => {
    try {
      resolve(await input(attemptNumber));
    } catch (error) {
      if (!(error instanceof Error)) {
        reject(new TypeError(`Non-error was thrown: "${error}". You should only throw errors.`));
        return;
      }
      if (error instanceof AbortError) {
        operation.stop();
        reject(error.originalError);
      } else if (error instanceof TypeError && !isNetworkError(error.message)) {
        operation.stop();
        reject(error);
      } else {
        decorateErrorWithCounts(error, attemptNumber, options2);
        try {
          await options2.onFailedAttempt(error);
        } catch (error2) {
          reject(error2);
          return;
        }
        if (!operation.retry(error)) {
          reject(operation.mainError());
        }
      }
    }
  });
});
pRetry$1.exports = pRetry;
pRetry$1.exports.default = pRetry;
pRetry$1.exports.AbortError = AbortError;
var dist = {};
var eventemitter3 = { exports: {} };
(function(module2) {
  var has = Object.prototype.hasOwnProperty, prefix = "~";
  function Events() {
  }
  if (Object.create) {
    Events.prototype = /* @__PURE__ */ Object.create(null);
    if (!new Events().__proto__)
      prefix = false;
  }
  function EE(fn, context, once) {
    this.fn = fn;
    this.context = context;
    this.once = once || false;
  }
  function addListener(emitter, event, fn, context, once) {
    if (typeof fn !== "function") {
      throw new TypeError("The listener must be a function");
    }
    var listener = new EE(fn, context || emitter, once), evt = prefix ? prefix + event : event;
    if (!emitter._events[evt])
      emitter._events[evt] = listener, emitter._eventsCount++;
    else if (!emitter._events[evt].fn)
      emitter._events[evt].push(listener);
    else
      emitter._events[evt] = [emitter._events[evt], listener];
    return emitter;
  }
  function clearEvent(emitter, evt) {
    if (--emitter._eventsCount === 0)
      emitter._events = new Events();
    else
      delete emitter._events[evt];
  }
  function EventEmitter2() {
    this._events = new Events();
    this._eventsCount = 0;
  }
  EventEmitter2.prototype.eventNames = function eventNames() {
    var names = [], events, name2;
    if (this._eventsCount === 0)
      return names;
    for (name2 in events = this._events) {
      if (has.call(events, name2))
        names.push(prefix ? name2.slice(1) : name2);
    }
    if (Object.getOwnPropertySymbols) {
      return names.concat(Object.getOwnPropertySymbols(events));
    }
    return names;
  };
  EventEmitter2.prototype.listeners = function listeners(event) {
    var evt = prefix ? prefix + event : event, handlers = this._events[evt];
    if (!handlers)
      return [];
    if (handlers.fn)
      return [handlers.fn];
    for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {
      ee[i] = handlers[i].fn;
    }
    return ee;
  };
  EventEmitter2.prototype.listenerCount = function listenerCount(event) {
    var evt = prefix ? prefix + event : event, listeners = this._events[evt];
    if (!listeners)
      return 0;
    if (listeners.fn)
      return 1;
    return listeners.length;
  };
  EventEmitter2.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
    var evt = prefix ? prefix + event : event;
    if (!this._events[evt])
      return false;
    var listeners = this._events[evt], len = arguments.length, args, i;
    if (listeners.fn) {
      if (listeners.once)
        this.removeListener(event, listeners.fn, void 0, true);
      switch (len) {
        case 1:
          return listeners.fn.call(listeners.context), true;
        case 2:
          return listeners.fn.call(listeners.context, a1), true;
        case 3:
          return listeners.fn.call(listeners.context, a1, a2), true;
        case 4:
          return listeners.fn.call(listeners.context, a1, a2, a3), true;
        case 5:
          return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
        case 6:
          return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
      }
      for (i = 1, args = new Array(len - 1); i < len; i++) {
        args[i - 1] = arguments[i];
      }
      listeners.fn.apply(listeners.context, args);
    } else {
      var length = listeners.length, j;
      for (i = 0; i < length; i++) {
        if (listeners[i].once)
          this.removeListener(event, listeners[i].fn, void 0, true);
        switch (len) {
          case 1:
            listeners[i].fn.call(listeners[i].context);
            break;
          case 2:
            listeners[i].fn.call(listeners[i].context, a1);
            break;
          case 3:
            listeners[i].fn.call(listeners[i].context, a1, a2);
            break;
          case 4:
            listeners[i].fn.call(listeners[i].context, a1, a2, a3);
            break;
          default:
            if (!args)
              for (j = 1, args = new Array(len - 1); j < len; j++) {
                args[j - 1] = arguments[j];
              }
            listeners[i].fn.apply(listeners[i].context, args);
        }
      }
    }
    return true;
  };
  EventEmitter2.prototype.on = function on(event, fn, context) {
    return addListener(this, event, fn, context, false);
  };
  EventEmitter2.prototype.once = function once(event, fn, context) {
    return addListener(this, event, fn, context, true);
  };
  EventEmitter2.prototype.removeListener = function removeListener(event, fn, context, once) {
    var evt = prefix ? prefix + event : event;
    if (!this._events[evt])
      return this;
    if (!fn) {
      clearEvent(this, evt);
      return this;
    }
    var listeners = this._events[evt];
    if (listeners.fn) {
      if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) {
        clearEvent(this, evt);
      }
    } else {
      for (var i = 0, events = [], length = listeners.length; i < length; i++) {
        if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) {
          events.push(listeners[i]);
        }
      }
      if (events.length)
        this._events[evt] = events.length === 1 ? events[0] : events;
      else
        clearEvent(this, evt);
    }
    return this;
  };
  EventEmitter2.prototype.removeAllListeners = function removeAllListeners(event) {
    var evt;
    if (event) {
      evt = prefix ? prefix + event : event;
      if (this._events[evt])
        clearEvent(this, evt);
    } else {
      this._events = new Events();
      this._eventsCount = 0;
    }
    return this;
  };
  EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;
  EventEmitter2.prototype.addListener = EventEmitter2.prototype.on;
  EventEmitter2.prefixed = prefix;
  EventEmitter2.EventEmitter = EventEmitter2;
  {
    module2.exports = EventEmitter2;
  }
})(eventemitter3);
var pTimeout$1 = { exports: {} };
var pFinally$1 = (promise, onFinally) => {
  onFinally = onFinally || (() => {
  });
  return promise.then(
    (val) => new Promise((resolve) => {
      resolve(onFinally());
    }).then(() => val),
    (err) => new Promise((resolve) => {
      resolve(onFinally());
    }).then(() => {
      throw err;
    })
  );
};
const pFinally = pFinally$1;
class TimeoutError extends Error {
  constructor(message) {
    super(message);
    this.name = "TimeoutError";
  }
}
const pTimeout = (promise, milliseconds, fallback) => new Promise((resolve, reject) => {
  if (typeof milliseconds !== "number" || milliseconds < 0) {
    throw new TypeError("Expected `milliseconds` to be a positive number");
  }
  if (milliseconds === Infinity) {
    resolve(promise);
    return;
  }
  const timer = setTimeout(() => {
    if (typeof fallback === "function") {
      try {
        resolve(fallback());
      } catch (error) {
        reject(error);
      }
      return;
    }
    const message = typeof fallback === "string" ? fallback : `Promise timed out after ${milliseconds} milliseconds`;
    const timeoutError2 = fallback instanceof Error ? fallback : new TimeoutError(message);
    if (typeof promise.cancel === "function") {
      promise.cancel();
    }
    reject(timeoutError2);
  }, milliseconds);
  pFinally(
    promise.then(resolve, reject),
    () => {
      clearTimeout(timer);
    }
  );
});
pTimeout$1.exports = pTimeout;
pTimeout$1.exports.default = pTimeout;
pTimeout$1.exports.TimeoutError = TimeoutError;
var priorityQueue = {};
var lowerBound$1 = {};
Object.defineProperty(lowerBound$1, "__esModule", { value: true });
function lowerBound(array, value, comparator) {
  let first = 0;
  let count = array.length;
  while (count > 0) {
    const step = count / 2 | 0;
    let it = first + step;
    if (comparator(array[it], value) <= 0) {
      first = ++it;
      count -= step + 1;
    } else {
      count = step;
    }
  }
  return first;
}
lowerBound$1.default = lowerBound;
Object.defineProperty(priorityQueue, "__esModule", { value: true });
const lower_bound_1 = lowerBound$1;
class PriorityQueue {
  constructor() {
    this._queue = [];
  }
  enqueue(run2, options2) {
    options2 = Object.assign({ priority: 0 }, options2);
    const element2 = {
      priority: options2.priority,
      run: run2
    };
    if (this.size && this._queue[this.size - 1].priority >= options2.priority) {
      this._queue.push(element2);
      return;
    }
    const index = lower_bound_1.default(this._queue, element2, (a, b) => b.priority - a.priority);
    this._queue.splice(index, 0, element2);
  }
  dequeue() {
    const item = this._queue.shift();
    return item === null || item === void 0 ? void 0 : item.run;
  }
  filter(options2) {
    return this._queue.filter((element2) => element2.priority === options2.priority).map((element2) => element2.run);
  }
  get size() {
    return this._queue.length;
  }
}
priorityQueue.default = PriorityQueue;
Object.defineProperty(dist, "__esModule", { value: true });
const EventEmitter = eventemitter3.exports;
const p_timeout_1 = pTimeout$1.exports;
const priority_queue_1 = priorityQueue;
const empty = () => {
};
const timeoutError = new p_timeout_1.TimeoutError();
class PQueue extends EventEmitter {
  constructor(options2) {
    var _a, _b, _c, _d;
    super();
    this._intervalCount = 0;
    this._intervalEnd = 0;
    this._pendingCount = 0;
    this._resolveEmpty = empty;
    this._resolveIdle = empty;
    options2 = Object.assign({ carryoverConcurrencyCount: false, intervalCap: Infinity, interval: 0, concurrency: Infinity, autoStart: true, queueClass: priority_queue_1.default }, options2);
    if (!(typeof options2.intervalCap === "number" && options2.intervalCap >= 1)) {
      throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(_b = (_a = options2.intervalCap) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : ""}\` (${typeof options2.intervalCap})`);
    }
    if (options2.interval === void 0 || !(Number.isFinite(options2.interval) && options2.interval >= 0)) {
      throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(_d = (_c = options2.interval) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : ""}\` (${typeof options2.interval})`);
    }
    this._carryoverConcurrencyCount = options2.carryoverConcurrencyCount;
    this._isIntervalIgnored = options2.intervalCap === Infinity || options2.interval === 0;
    this._intervalCap = options2.intervalCap;
    this._interval = options2.interval;
    this._queue = new options2.queueClass();
    this._queueClass = options2.queueClass;
    this.concurrency = options2.concurrency;
    this._timeout = options2.timeout;
    this._throwOnTimeout = options2.throwOnTimeout === true;
    this._isPaused = options2.autoStart === false;
  }
  get _doesIntervalAllowAnother() {
    return this._isIntervalIgnored || this._intervalCount < this._intervalCap;
  }
  get _doesConcurrentAllowAnother() {
    return this._pendingCount < this._concurrency;
  }
  _next() {
    this._pendingCount--;
    this._tryToStartAnother();
    this.emit("next");
  }
  _resolvePromises() {
    this._resolveEmpty();
    this._resolveEmpty = empty;
    if (this._pendingCount === 0) {
      this._resolveIdle();
      this._resolveIdle = empty;
      this.emit("idle");
    }
  }
  _onResumeInterval() {
    this._onInterval();
    this._initializeIntervalIfNeeded();
    this._timeoutId = void 0;
  }
  _isIntervalPaused() {
    const now = Date.now();
    if (this._intervalId === void 0) {
      const delay = this._intervalEnd - now;
      if (delay < 0) {
        this._intervalCount = this._carryoverConcurrencyCount ? this._pendingCount : 0;
      } else {
        if (this._timeoutId === void 0) {
          this._timeoutId = setTimeout(() => {
            this._onResumeInterval();
          }, delay);
        }
        return true;
      }
    }
    return false;
  }
  _tryToStartAnother() {
    if (this._queue.size === 0) {
      if (this._intervalId) {
        clearInterval(this._intervalId);
      }
      this._intervalId = void 0;
      this._resolvePromises();
      return false;
    }
    if (!this._isPaused) {
      const canInitializeInterval = !this._isIntervalPaused();
      if (this._doesIntervalAllowAnother && this._doesConcurrentAllowAnother) {
        const job = this._queue.dequeue();
        if (!job) {
          return false;
        }
        this.emit("active");
        job();
        if (canInitializeInterval) {
          this._initializeIntervalIfNeeded();
        }
        return true;
      }
    }
    return false;
  }
  _initializeIntervalIfNeeded() {
    if (this._isIntervalIgnored || this._intervalId !== void 0) {
      return;
    }
    this._intervalId = setInterval(() => {
      this._onInterval();
    }, this._interval);
    this._intervalEnd = Date.now() + this._interval;
  }
  _onInterval() {
    if (this._intervalCount === 0 && this._pendingCount === 0 && this._intervalId) {
      clearInterval(this._intervalId);
      this._intervalId = void 0;
    }
    this._intervalCount = this._carryoverConcurrencyCount ? this._pendingCount : 0;
    this._processQueue();
  }
  _processQueue() {
    while (this._tryToStartAnother()) {
    }
  }
  get concurrency() {
    return this._concurrency;
  }
  set concurrency(newConcurrency) {
    if (!(typeof newConcurrency === "number" && newConcurrency >= 1)) {
      throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${newConcurrency}\` (${typeof newConcurrency})`);
    }
    this._concurrency = newConcurrency;
    this._processQueue();
  }
  async add(fn, options2 = {}) {
    return new Promise((resolve, reject) => {
      const run2 = async () => {
        this._pendingCount++;
        this._intervalCount++;
        try {
          const operation = this._timeout === void 0 && options2.timeout === void 0 ? fn() : p_timeout_1.default(Promise.resolve(fn()), options2.timeout === void 0 ? this._timeout : options2.timeout, () => {
            if (options2.throwOnTimeout === void 0 ? this._throwOnTimeout : options2.throwOnTimeout) {
              reject(timeoutError);
            }
            return void 0;
          });
          resolve(await operation);
        } catch (error) {
          reject(error);
        }
        this._next();
      };
      this._queue.enqueue(run2, options2);
      this._tryToStartAnother();
      this.emit("add");
    });
  }
  async addAll(functions, options2) {
    return Promise.all(functions.map(async (function_) => this.add(function_, options2)));
  }
  start() {
    if (!this._isPaused) {
      return this;
    }
    this._isPaused = false;
    this._processQueue();
    return this;
  }
  pause() {
    this._isPaused = true;
  }
  clear() {
    this._queue = new this._queueClass();
  }
  async onEmpty() {
    if (this._queue.size === 0) {
      return;
    }
    return new Promise((resolve) => {
      const existingResolve = this._resolveEmpty;
      this._resolveEmpty = () => {
        existingResolve();
        resolve();
      };
    });
  }
  async onIdle() {
    if (this._pendingCount === 0 && this._queue.size === 0) {
      return;
    }
    return new Promise((resolve) => {
      const existingResolve = this._resolveIdle;
      this._resolveIdle = () => {
        existingResolve();
        resolve();
      };
    });
  }
  get size() {
    return this._queue.size;
  }
  sizeBy(options2) {
    return this._queue.filter(options2).length;
  }
  get pending() {
    return this._pendingCount;
  }
  get isPaused() {
    return this._isPaused;
  }
  get timeout() {
    return this._timeout;
  }
  set timeout(milliseconds) {
    this._timeout = milliseconds;
  }
}
var _default = dist.default = PQueue;
const STATUS_NO_RETRY = [
  400,
  401,
  403,
  404,
  405,
  406,
  407,
  408,
  409
];
class AsyncCaller {
  constructor(params) {
    var _a, _b;
    Object.defineProperty(this, "maxConcurrency", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "maxRetries", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "queue", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.maxConcurrency = (_a = params.maxConcurrency) != null ? _a : Infinity;
    this.maxRetries = (_b = params.maxRetries) != null ? _b : 6;
    const PQueue2 = "default" in _default ? _default.default : _default;
    this.queue = new PQueue2({ concurrency: this.maxConcurrency });
  }
  call(callable, ...args) {
    return this.queue.add(() => pRetry$1.exports(() => callable(...args).catch((error) => {
      if (error instanceof Error) {
        throw error;
      } else {
        throw new Error(error);
      }
    }), {
      onFailedAttempt(error) {
        var _a;
        if (error.message.startsWith("Cancel") || error.message.startsWith("TimeoutError") || error.message.startsWith("AbortError")) {
          throw error;
        }
        if ((error == null ? void 0 : error.code) === "ECONNABORTED") {
          throw error;
        }
        const status = (_a = error == null ? void 0 : error.response) == null ? void 0 : _a.status;
        if (status && STATUS_NO_RETRY.includes(+status)) {
          throw error;
        }
      },
      retries: this.maxRetries,
      randomize: true
    }), { throwOnTimeout: true });
  }
  callWithOptions(options2, callable, ...args) {
    if (options2.signal) {
      return Promise.race([
        this.call(callable, ...args),
        new Promise((_, reject) => {
          var _a;
          (_a = options2.signal) == null ? void 0 : _a.addEventListener("abort", () => {
            reject(new Error("AbortError"));
          });
        })
      ]);
    }
    return this.call(callable, ...args);
  }
  fetch(...args) {
    return this.call(() => fetch(...args).then((res) => res.ok ? res : Promise.reject(res)));
  }
}
var __defProp2 = Object.defineProperty;
var __defNormalProp2 = (obj, key, value) => key in obj ? __defProp2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField2 = (obj, key, value) => {
  __defNormalProp2(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
var base64Js = {};
base64Js.byteLength = byteLength;
base64Js.toByteArray = toByteArray;
base64Js.fromByteArray = fromByteArray;
var lookup = [];
var revLookup = [];
var Arr = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
var code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i];
  revLookup[code.charCodeAt(i)] = i;
}
revLookup["-".charCodeAt(0)] = 62;
revLookup["_".charCodeAt(0)] = 63;
function getLens(b64) {
  var len = b64.length;
  if (len % 4 > 0) {
    throw new Error("Invalid string. Length must be a multiple of 4");
  }
  var validLen = b64.indexOf("=");
  if (validLen === -1)
    validLen = len;
  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;
  return [validLen, placeHoldersLen];
}
function byteLength(b64) {
  var lens = getLens(b64);
  var validLen = lens[0];
  var placeHoldersLen = lens[1];
  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}
function _byteLength(b64, validLen, placeHoldersLen) {
  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}
function toByteArray(b64) {
  var tmp;
  var lens = getLens(b64);
  var validLen = lens[0];
  var placeHoldersLen = lens[1];
  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));
  var curByte = 0;
  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;
  var i;
  for (i = 0; i < len; i += 4) {
    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];
    arr[curByte++] = tmp >> 16 & 255;
    arr[curByte++] = tmp >> 8 & 255;
    arr[curByte++] = tmp & 255;
  }
  if (placeHoldersLen === 2) {
    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;
    arr[curByte++] = tmp & 255;
  }
  if (placeHoldersLen === 1) {
    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;
    arr[curByte++] = tmp >> 8 & 255;
    arr[curByte++] = tmp & 255;
  }
  return arr;
}
function tripletToBase64(num) {
  return lookup[num >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[num & 63];
}
function encodeChunk(uint8, start, end) {
  var tmp;
  var output = [];
  for (var i = start; i < end; i += 3) {
    tmp = (uint8[i] << 16 & 16711680) + (uint8[i + 1] << 8 & 65280) + (uint8[i + 2] & 255);
    output.push(tripletToBase64(tmp));
  }
  return output.join("");
}
function fromByteArray(uint8) {
  var tmp;
  var len = uint8.length;
  var extraBytes = len % 3;
  var parts = [];
  var maxChunkLength = 16383;
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));
  }
  if (extraBytes === 1) {
    tmp = uint8[len - 1];
    parts.push(
      lookup[tmp >> 2] + lookup[tmp << 4 & 63] + "=="
    );
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1];
    parts.push(
      lookup[tmp >> 10] + lookup[tmp >> 4 & 63] + lookup[tmp << 2 & 63] + "="
    );
  }
  return parts.join("");
}
function bytePairMerge(piece, ranks) {
  let parts = Array.from(
    { length: piece.length },
    (_, i) => ({ start: i, end: i + 1 })
  );
  while (parts.length > 1) {
    let minRank = null;
    for (let i = 0; i < parts.length - 1; i++) {
      const slice = piece.slice(parts[i].start, parts[i + 1].end);
      const rank = ranks.get(slice.join(","));
      if (rank == null)
        continue;
      if (minRank == null || rank < minRank[0]) {
        minRank = [rank, i];
      }
    }
    if (minRank != null) {
      const i = minRank[1];
      parts[i] = { start: parts[i].start, end: parts[i + 1].end };
      parts.splice(i + 1, 1);
    } else {
      break;
    }
  }
  return parts;
}
function bytePairEncode(piece, ranks) {
  if (piece.length === 1)
    return [ranks.get(piece.join(","))];
  return bytePairMerge(piece, ranks).map((p) => ranks.get(piece.slice(p.start, p.end).join(","))).filter((x) => x != null);
}
function escapeRegex(str) {
  return str.replace(/[\\^$*+?.()|[\]{}]/g, "\\$&");
}
var _Tiktoken = class {
  constructor(ranks, extendedSpecialTokens) {
    __publicField(this, "specialTokens");
    __publicField(this, "inverseSpecialTokens");
    __publicField(this, "patStr");
    __publicField(this, "textEncoder", new TextEncoder());
    __publicField(this, "textDecoder", new TextDecoder("utf-8"));
    __publicField(this, "rankMap", /* @__PURE__ */ new Map());
    __publicField(this, "textMap", /* @__PURE__ */ new Map());
    this.patStr = ranks.pat_str;
    const uncompressed = ranks.bpe_ranks.split("\n").filter(Boolean).reduce((memo, x) => {
      const [_, offsetStr, ...tokens] = x.split(" ");
      const offset = Number.parseInt(offsetStr, 10);
      tokens.forEach((token, i) => memo[token] = offset + i);
      return memo;
    }, {});
    for (const [token, rank] of Object.entries(uncompressed)) {
      const bytes = base64Js.toByteArray(token);
      this.rankMap.set(bytes.join(","), rank);
      this.textMap.set(rank, bytes);
    }
    this.specialTokens = { ...ranks.special_tokens, ...extendedSpecialTokens };
    this.inverseSpecialTokens = Object.entries(this.specialTokens).reduce((memo, [text2, rank]) => {
      memo[rank] = this.textEncoder.encode(text2);
      return memo;
    }, {});
  }
  encode(text2, allowedSpecial = [], disallowedSpecial = "all") {
    var _a;
    const regexes = new RegExp(this.patStr, "ug");
    const specialRegex = _Tiktoken.specialTokenRegex(
      Object.keys(this.specialTokens)
    );
    const ret = [];
    const allowedSpecialSet = new Set(
      allowedSpecial === "all" ? Object.keys(this.specialTokens) : allowedSpecial
    );
    const disallowedSpecialSet = new Set(
      disallowedSpecial === "all" ? Object.keys(this.specialTokens).filter(
        (x) => !allowedSpecialSet.has(x)
      ) : disallowedSpecial
    );
    if (disallowedSpecialSet.size > 0) {
      const disallowedSpecialRegex = _Tiktoken.specialTokenRegex([
        ...disallowedSpecialSet
      ]);
      const specialMatch = text2.match(disallowedSpecialRegex);
      if (specialMatch != null) {
        throw new Error(
          `The text contains a special token that is not allowed: ${specialMatch[0]}`
        );
      }
    }
    let start = 0;
    while (true) {
      let nextSpecial = null;
      let startFind = start;
      while (true) {
        specialRegex.lastIndex = startFind;
        nextSpecial = specialRegex.exec(text2);
        if (nextSpecial == null || allowedSpecialSet.has(nextSpecial[0]))
          break;
        startFind = nextSpecial.index + 1;
      }
      const end = (_a = nextSpecial == null ? void 0 : nextSpecial.index) != null ? _a : text2.length;
      for (const match of text2.substring(start, end).matchAll(regexes)) {
        const piece = this.textEncoder.encode(match[0]);
        const token2 = this.rankMap.get(piece.join(","));
        if (token2 != null) {
          ret.push(token2);
          continue;
        }
        ret.push(...bytePairEncode(piece, this.rankMap));
      }
      if (nextSpecial == null)
        break;
      let token = this.specialTokens[nextSpecial[0]];
      ret.push(token);
      start = nextSpecial.index + nextSpecial[0].length;
    }
    return ret;
  }
  decode(tokens) {
    var _a;
    const res = [];
    let length = 0;
    for (let i2 = 0; i2 < tokens.length; ++i2) {
      const token = tokens[i2];
      const bytes = (_a = this.textMap.get(token)) != null ? _a : this.inverseSpecialTokens[token];
      if (bytes != null) {
        res.push(bytes);
        length += bytes.length;
      }
    }
    const mergedArray = new Uint8Array(length);
    let i = 0;
    for (const bytes of res) {
      mergedArray.set(bytes, i);
      i += bytes.length;
    }
    return this.textDecoder.decode(mergedArray);
  }
};
var Tiktoken = _Tiktoken;
__publicField2(Tiktoken, "specialTokenRegex", (tokens) => {
  return new RegExp(tokens.map((i) => escapeRegex(i)).join("|"), "g");
});
function getEncodingNameForModel(model) {
  switch (model) {
    case "gpt2": {
      return "gpt2";
    }
    case "code-cushman-001":
    case "code-cushman-002":
    case "code-davinci-001":
    case "code-davinci-002":
    case "cushman-codex":
    case "davinci-codex":
    case "text-davinci-002":
    case "text-davinci-003": {
      return "p50k_base";
    }
    case "code-davinci-edit-001":
    case "text-davinci-edit-001": {
      return "p50k_edit";
    }
    case "ada":
    case "babbage":
    case "code-search-ada-code-001":
    case "code-search-babbage-code-001":
    case "curie":
    case "davinci":
    case "text-ada-001":
    case "text-babbage-001":
    case "text-curie-001":
    case "text-davinci-001":
    case "text-search-ada-doc-001":
    case "text-search-babbage-doc-001":
    case "text-search-curie-doc-001":
    case "text-search-davinci-doc-001":
    case "text-similarity-ada-001":
    case "text-similarity-babbage-001":
    case "text-similarity-curie-001":
    case "text-similarity-davinci-001": {
      return "r50k_base";
    }
    case "gpt-3.5-turbo-0301":
    case "gpt-3.5-turbo":
    case "gpt-4-0314":
    case "gpt-4-32k-0314":
    case "gpt-4-32k":
    case "gpt-4":
    case "text-embedding-ada-002": {
      return "cl100k_base";
    }
    default:
      throw new Error("Unknown model");
  }
}
const cache = {};
const caller = /* @__PURE__ */ new AsyncCaller({});
async function getEncoding(encoding, options2) {
  if (!(encoding in cache)) {
    cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`, {
      signal: options2 == null ? void 0 : options2.signal
    }).then((res) => res.json()).catch((e) => {
      delete cache[encoding];
      throw e;
    });
  }
  return new Tiktoken(await cache[encoding], options2 == null ? void 0 : options2.extendedSpecialTokens);
}
async function encodingForModel(model, options2) {
  return getEncoding(getEncodingNameForModel(model), options2);
}
const getModelNameForTiktoken = (modelName) => {
  if (modelName.startsWith("gpt-3.5-turbo-")) {
    return "gpt-3.5-turbo";
  }
  if (modelName.startsWith("gpt-4-32k-")) {
    return "gpt-4-32k";
  }
  if (modelName.startsWith("gpt-4-")) {
    return "gpt-4";
  }
  return modelName;
};
const getModelContextSize = (modelName) => {
  switch (getModelNameForTiktoken(modelName)) {
    case "gpt-3.5-turbo":
      return 4096;
    case "gpt-4-32k":
      return 32768;
    case "gpt-4":
      return 8192;
    case "text-davinci-003":
      return 4097;
    case "text-curie-001":
      return 2048;
    case "text-babbage-001":
      return 2048;
    case "text-ada-001":
      return 2048;
    case "code-davinci-002":
      return 8e3;
    case "code-cushman-001":
      return 2048;
    default:
      return 4097;
  }
};
const calculateMaxTokens = async ({ prompt, modelName }) => {
  let numTokens = Math.ceil(prompt.length / 4);
  try {
    numTokens = (await encodingForModel(modelName)).encode(prompt).length;
  } catch (error) {
    console.warn("Failed to calculate number of tokens, falling back to approximate count");
  }
  const maxTokens = getModelContextSize(modelName);
  return maxTokens - numTokens;
};
const getVerbosity = () => false;
class BaseLangChain {
  constructor(params) {
    var _a;
    Object.defineProperty(this, "verbose", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "callbacks", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.verbose = (_a = params.verbose) != null ? _a : getVerbosity();
    this.callbacks = params.callbacks;
  }
}
class BaseLanguageModel extends BaseLangChain {
  get callKeys() {
    return ["stop", "timeout", "signal"];
  }
  constructor(params) {
    var _a;
    super({
      verbose: params.verbose,
      callbacks: (_a = params.callbacks) != null ? _a : params.callbackManager
    });
    Object.defineProperty(this, "caller", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "_encoding", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.caller = new AsyncCaller(params != null ? params : {});
  }
  async getNumTokens(text2) {
    let numTokens = Math.ceil(text2.length / 4);
    if (!this._encoding) {
      try {
        this._encoding = await encodingForModel("modelName" in this ? getModelNameForTiktoken(this.modelName) : "gpt2");
      } catch (error) {
        console.warn("Failed to calculate number of tokens, falling back to approximate count", error);
      }
    }
    if (this._encoding) {
      numTokens = this._encoding.encode(text2).length;
    }
    return numTokens;
  }
  _identifyingParams() {
    return {};
  }
  serialize() {
    return {
      ...this._identifyingParams(),
      _type: this._llmType(),
      _model: this._modelType()
    };
  }
  static async deserialize(data2) {
    const { _type, _model, ...rest } = data2;
    if (_model && _model !== "base_chat_model") {
      throw new Error(`Cannot load LLM with model ${_model}`);
    }
    const Cls = {
      openai: (await Promise.resolve().then(() => require("./openai.0bb2bd69.js"))).ChatOpenAI
    }[_type];
    if (Cls === void 0) {
      throw new Error(`Cannot load  LLM with type ${_type}`);
    }
    return new Cls(rest);
  }
}
let getRandomValues;
const rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}
const byteToHex = [];
for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
function unsafeStringify(arr, offset = 0) {
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}
const randomUUID = typeof crypto !== "undefined" && crypto.randomUUID && crypto.randomUUID.bind(crypto);
const native = {
  randomUUID
};
function v4(options2, buf, offset) {
  if (native.randomUUID && !buf && !options2) {
    return native.randomUUID();
  }
  options2 = options2 || {};
  const rnds = options2.random || (options2.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return unsafeStringify(rnds);
}
class BaseCallbackHandlerMethodsClass {
}
class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {
  constructor(input) {
    var _a, _b, _c;
    super();
    Object.defineProperty(this, "ignoreLLM", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    Object.defineProperty(this, "ignoreChain", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    Object.defineProperty(this, "ignoreAgent", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    if (input) {
      this.ignoreLLM = (_a = input.ignoreLLM) != null ? _a : this.ignoreLLM;
      this.ignoreChain = (_b = input.ignoreChain) != null ? _b : this.ignoreChain;
      this.ignoreAgent = (_c = input.ignoreAgent) != null ? _c : this.ignoreAgent;
    }
  }
  copy() {
    return new this.constructor(this);
  }
  static fromMethods(methods) {
    class Handler extends BaseCallbackHandler {
      constructor() {
        super();
        Object.defineProperty(this, "name", {
          enumerable: true,
          configurable: true,
          writable: true,
          value: v4()
        });
        Object.assign(this, methods);
      }
    }
    return new Handler();
  }
}
var ansiStyles = { exports: {} };
(function(module2) {
  const ANSI_BACKGROUND_OFFSET = 10;
  const wrapAnsi256 = (offset = 0) => (code2) => `\x1B[${38 + offset};5;${code2}m`;
  const wrapAnsi16m = (offset = 0) => (red, green, blue) => `\x1B[${38 + offset};2;${red};${green};${blue}m`;
  function assembleStyles() {
    const codes = /* @__PURE__ */ new Map();
    const styles2 = {
      modifier: {
        reset: [0, 0],
        bold: [1, 22],
        dim: [2, 22],
        italic: [3, 23],
        underline: [4, 24],
        overline: [53, 55],
        inverse: [7, 27],
        hidden: [8, 28],
        strikethrough: [9, 29]
      },
      color: {
        black: [30, 39],
        red: [31, 39],
        green: [32, 39],
        yellow: [33, 39],
        blue: [34, 39],
        magenta: [35, 39],
        cyan: [36, 39],
        white: [37, 39],
        blackBright: [90, 39],
        redBright: [91, 39],
        greenBright: [92, 39],
        yellowBright: [93, 39],
        blueBright: [94, 39],
        magentaBright: [95, 39],
        cyanBright: [96, 39],
        whiteBright: [97, 39]
      },
      bgColor: {
        bgBlack: [40, 49],
        bgRed: [41, 49],
        bgGreen: [42, 49],
        bgYellow: [43, 49],
        bgBlue: [44, 49],
        bgMagenta: [45, 49],
        bgCyan: [46, 49],
        bgWhite: [47, 49],
        bgBlackBright: [100, 49],
        bgRedBright: [101, 49],
        bgGreenBright: [102, 49],
        bgYellowBright: [103, 49],
        bgBlueBright: [104, 49],
        bgMagentaBright: [105, 49],
        bgCyanBright: [106, 49],
        bgWhiteBright: [107, 49]
      }
    };
    styles2.color.gray = styles2.color.blackBright;
    styles2.bgColor.bgGray = styles2.bgColor.bgBlackBright;
    styles2.color.grey = styles2.color.blackBright;
    styles2.bgColor.bgGrey = styles2.bgColor.bgBlackBright;
    for (const [groupName, group] of Object.entries(styles2)) {
      for (const [styleName, style] of Object.entries(group)) {
        styles2[styleName] = {
          open: `\x1B[${style[0]}m`,
          close: `\x1B[${style[1]}m`
        };
        group[styleName] = styles2[styleName];
        codes.set(style[0], style[1]);
      }
      Object.defineProperty(styles2, groupName, {
        value: group,
        enumerable: false
      });
    }
    Object.defineProperty(styles2, "codes", {
      value: codes,
      enumerable: false
    });
    styles2.color.close = "\x1B[39m";
    styles2.bgColor.close = "\x1B[49m";
    styles2.color.ansi256 = wrapAnsi256();
    styles2.color.ansi16m = wrapAnsi16m();
    styles2.bgColor.ansi256 = wrapAnsi256(ANSI_BACKGROUND_OFFSET);
    styles2.bgColor.ansi16m = wrapAnsi16m(ANSI_BACKGROUND_OFFSET);
    Object.defineProperties(styles2, {
      rgbToAnsi256: {
        value: (red, green, blue) => {
          if (red === green && green === blue) {
            if (red < 8) {
              return 16;
            }
            if (red > 248) {
              return 231;
            }
            return Math.round((red - 8) / 247 * 24) + 232;
          }
          return 16 + 36 * Math.round(red / 255 * 5) + 6 * Math.round(green / 255 * 5) + Math.round(blue / 255 * 5);
        },
        enumerable: false
      },
      hexToRgb: {
        value: (hex) => {
          const matches = /(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(hex.toString(16));
          if (!matches) {
            return [0, 0, 0];
          }
          let { colorString } = matches.groups;
          if (colorString.length === 3) {
            colorString = colorString.split("").map((character) => character + character).join("");
          }
          const integer = Number.parseInt(colorString, 16);
          return [
            integer >> 16 & 255,
            integer >> 8 & 255,
            integer & 255
          ];
        },
        enumerable: false
      },
      hexToAnsi256: {
        value: (hex) => styles2.rgbToAnsi256(...styles2.hexToRgb(hex)),
        enumerable: false
      }
    });
    return styles2;
  }
  Object.defineProperty(module2, "exports", {
    enumerable: true,
    get: assembleStyles
  });
})(ansiStyles);
const styles = ansiStyles.exports;
class BaseTracer extends BaseCallbackHandler {
  constructor() {
    super();
    Object.defineProperty(this, "runMap", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: /* @__PURE__ */ new Map()
    });
  }
  copy() {
    return this;
  }
  _addChildRun(parentRun, childRun) {
    parentRun.child_runs.push(childRun);
  }
  _startTrace(run2) {
    if (run2.parent_run_id !== void 0) {
      const parentRun = this.runMap.get(run2.parent_run_id);
      if (parentRun) {
        this._addChildRun(parentRun, run2);
      }
    }
    this.runMap.set(run2.id, run2);
  }
  async _endTrace(run2) {
    const parentRun = run2.parent_run_id !== void 0 && this.runMap.get(run2.parent_run_id);
    if (parentRun) {
      parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run2.child_execution_order);
    } else {
      await this.persistRun(run2);
    }
    this.runMap.delete(run2.id);
  }
  _getExecutionOrder(parentRunId) {
    const parentRun = parentRunId !== void 0 && this.runMap.get(parentRunId);
    if (!parentRun) {
      return 1;
    }
    return parentRun.child_execution_order + 1;
  }
  async handleLLMStart(llm, prompts, runId, parentRunId, extraParams) {
    var _a;
    const execution_order = this._getExecutionOrder(parentRunId);
    const run2 = {
      id: runId,
      name: llm.name,
      parent_run_id: parentRunId,
      start_time: Date.now(),
      serialized: llm,
      inputs: { prompts },
      execution_order,
      child_runs: [],
      child_execution_order: execution_order,
      run_type: "llm",
      extra: extraParams
    };
    this._startTrace(run2);
    await ((_a = this.onLLMStart) == null ? void 0 : _a.call(this, run2));
  }
  async handleChatModelStart(llm, messages, runId, parentRunId, extraParams) {
    var _a;
    const execution_order = this._getExecutionOrder(parentRunId);
    const run2 = {
      id: runId,
      name: llm.name,
      parent_run_id: parentRunId,
      start_time: Date.now(),
      serialized: llm,
      inputs: { messages },
      execution_order,
      child_runs: [],
      child_execution_order: execution_order,
      run_type: "llm",
      extra: extraParams
    };
    this._startTrace(run2);
    await ((_a = this.onLLMStart) == null ? void 0 : _a.call(this, run2));
  }
  async handleLLMEnd(output, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "llm") {
      throw new Error("No LLM run to end.");
    }
    run2.end_time = Date.now();
    run2.outputs = output;
    await ((_a = this.onLLMEnd) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleLLMError(error, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "llm") {
      throw new Error("No LLM run to end.");
    }
    run2.end_time = Date.now();
    run2.error = error.message;
    await ((_a = this.onLLMError) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleChainStart(chain, inputs, runId, parentRunId) {
    var _a;
    const execution_order = this._getExecutionOrder(parentRunId);
    const run2 = {
      id: runId,
      name: chain.name,
      parent_run_id: parentRunId,
      start_time: Date.now(),
      serialized: chain,
      inputs,
      execution_order,
      child_execution_order: execution_order,
      run_type: "chain",
      child_runs: []
    };
    this._startTrace(run2);
    await ((_a = this.onChainStart) == null ? void 0 : _a.call(this, run2));
  }
  async handleChainEnd(outputs, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "chain") {
      throw new Error("No chain run to end.");
    }
    run2.end_time = Date.now();
    run2.outputs = outputs;
    await ((_a = this.onChainEnd) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleChainError(error, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "chain") {
      throw new Error("No chain run to end.");
    }
    run2.end_time = Date.now();
    run2.error = error.message;
    await ((_a = this.onChainError) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleToolStart(tool, input, runId, parentRunId) {
    var _a;
    const execution_order = this._getExecutionOrder(parentRunId);
    const run2 = {
      id: runId,
      name: tool.name,
      parent_run_id: parentRunId,
      start_time: Date.now(),
      serialized: tool,
      inputs: { input },
      execution_order,
      child_execution_order: execution_order,
      run_type: "tool",
      child_runs: []
    };
    this._startTrace(run2);
    await ((_a = this.onToolStart) == null ? void 0 : _a.call(this, run2));
  }
  async handleToolEnd(output, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "tool") {
      throw new Error("No tool run to end");
    }
    run2.end_time = Date.now();
    run2.outputs = { output };
    await ((_a = this.onToolEnd) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleToolError(error, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "tool") {
      throw new Error("No tool run to end");
    }
    run2.end_time = Date.now();
    run2.error = error.message;
    await ((_a = this.onToolError) == null ? void 0 : _a.call(this, run2));
    await this._endTrace(run2);
  }
  async handleAgentAction(action, runId) {
    var _a;
    const run2 = this.runMap.get(runId);
    if (!run2 || (run2 == null ? void 0 : run2.run_type) !== "chain") {
      return;
    }
    const agentRun = run2;
    agentRun.actions = agentRun.actions || [];
    agentRun.actions.push(action);
    await ((_a = this.onAgentAction) == null ? void 0 : _a.call(this, run2));
  }
}
function wrap(style, text2) {
  return `${style.open}${text2}${style.close}`;
}
function tryJsonStringify(obj, fallback) {
  try {
    return JSON.stringify(obj, null, 2);
  } catch (err) {
    return fallback;
  }
}
function elapsed(run2) {
  if (!run2.end_time)
    return "";
  const elapsed2 = run2.end_time - run2.start_time;
  if (elapsed2 < 1e3) {
    return `${elapsed2}ms`;
  }
  return `${(elapsed2 / 1e3).toFixed(2)}s`;
}
const { color } = styles;
class ConsoleCallbackHandler extends BaseTracer {
  constructor() {
    super(...arguments);
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "console_callback_handler"
    });
  }
  persistRun(_run) {
    return Promise.resolve();
  }
  getParents(run2) {
    const parents = [];
    let currentRun = run2;
    while (currentRun.parent_run_id) {
      const parent = this.runMap.get(currentRun.parent_run_id);
      if (parent) {
        parents.push(parent);
        currentRun = parent;
      } else {
        break;
      }
    }
    return parents;
  }
  getBreadcrumbs(run2) {
    const parents = this.getParents(run2).reverse();
    const string = [...parents, run2].map((parent, i, arr) => {
      const name2 = `${parent.execution_order}:${parent.run_type}:${parent.name}`;
      return i === arr.length - 1 ? wrap(styles.bold, name2) : name2;
    }).join(" > ");
    return wrap(color.grey, string);
  }
  onChainStart(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.green, "[chain/start]")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run2.inputs, "[inputs]")}`);
  }
  onChainEnd(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.cyan, "[chain/end]")} [${crumbs}] [${elapsed(run2)}] Exiting Chain run with output: ${tryJsonStringify(run2.outputs, "[outputs]")}`);
  }
  onChainError(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.red, "[chain/error]")} [${crumbs}] [${elapsed(run2)}] Chain run errored with error: ${tryJsonStringify(run2.error, "[error]")}`);
  }
  onLLMStart(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    const inputs = "prompts" in run2.inputs ? { prompts: run2.inputs.prompts.map((p) => p.trim()) } : run2.inputs;
    console.log(`${wrap(color.green, "[llm/start]")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, "[inputs]")}`);
  }
  onLLMEnd(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.cyan, "[llm/end]")} [${crumbs}] [${elapsed(run2)}] Exiting LLM run with output: ${tryJsonStringify(run2.outputs, "[response]")}`);
  }
  onLLMError(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.red, "[llm/error]")} [${crumbs}] [${elapsed(run2)}] LLM run errored with error: ${tryJsonStringify(run2.error, "[error]")}`);
  }
  onToolStart(run2) {
    var _a;
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.green, "[tool/start]")} [${crumbs}] Entering Tool run with input: "${(_a = run2.inputs.input) == null ? void 0 : _a.trim()}"`);
  }
  onToolEnd(run2) {
    var _a, _b;
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.cyan, "[tool/end]")} [${crumbs}] [${elapsed(run2)}] Exiting Tool run with output: "${(_b = (_a = run2.outputs) == null ? void 0 : _a.output) == null ? void 0 : _b.trim()}"`);
  }
  onToolError(run2) {
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.red, "[tool/error]")} [${crumbs}] [${elapsed(run2)}] Tool run errored with error: ${tryJsonStringify(run2.error, "[error]")}`);
  }
  onAgentAction(run2) {
    const agentRun = run2;
    const crumbs = this.getBreadcrumbs(run2);
    console.log(`${wrap(color.blue, "[agent/action]")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], "[action]")}`);
  }
}
class LangChainTracer extends BaseTracer {
  constructor({ exampleId, sessionName, callerParams, timeout } = {}) {
    super();
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "langchain_tracer"
    });
    Object.defineProperty(this, "endpoint", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: getEnvironmentVariable("LANGCHAIN_ENDPOINT") || "http://localhost:1984"
    });
    Object.defineProperty(this, "headers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: {
        "Content-Type": "application/json"
      }
    });
    Object.defineProperty(this, "sessionName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "exampleId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "caller", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "timeout", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 5e3
    });
    const apiKey = getEnvironmentVariable("LANGCHAIN_API_KEY");
    if (apiKey) {
      this.headers["x-api-key"] = apiKey;
    }
    this.sessionName = sessionName != null ? sessionName : getEnvironmentVariable("LANGCHAIN_SESSION");
    this.exampleId = exampleId;
    this.timeout = timeout != null ? timeout : this.timeout;
    this.caller = new AsyncCaller(callerParams != null ? callerParams : { maxRetries: 2 });
  }
  async _convertToCreate(run2, example_id = void 0) {
    var _a, _b;
    const runExtra = (_a = run2.extra) != null ? _a : {};
    runExtra.runtime = await getRuntimeEnvironment();
    const persistedRun = {
      id: run2.id,
      name: run2.name,
      start_time: run2.start_time,
      end_time: run2.end_time,
      run_type: run2.run_type,
      reference_example_id: run2.parent_run_id ? void 0 : example_id,
      extra: runExtra,
      parent_run_id: run2.parent_run_id,
      execution_order: run2.execution_order,
      serialized: run2.serialized,
      error: run2.error,
      inputs: run2.inputs,
      outputs: (_b = run2.outputs) != null ? _b : {},
      session_name: this.sessionName,
      child_runs: []
    };
    return persistedRun;
  }
  async persistRun(_run) {
  }
  async _persistRunSingle(run2) {
    const persistedRun = await this._convertToCreate(run2, this.exampleId);
    const endpoint = `${this.endpoint}/runs`;
    const response = await this.caller.call(fetch, endpoint, {
      method: "POST",
      headers: this.headers,
      body: JSON.stringify(persistedRun),
      signal: AbortSignal.timeout(this.timeout)
    });
    const body = await response.text();
    if (!response.ok) {
      throw new Error(`Failed to persist run: ${response.status} ${response.statusText} ${body}`);
    }
  }
  async _updateRunSingle(run2) {
    const runUpdate = {
      end_time: run2.end_time,
      error: run2.error,
      outputs: run2.outputs,
      parent_run_id: run2.parent_run_id,
      reference_example_id: run2.reference_example_id
    };
    const endpoint = `${this.endpoint}/runs/${run2.id}`;
    const response = await this.caller.call(fetch, endpoint, {
      method: "PATCH",
      headers: this.headers,
      body: JSON.stringify(runUpdate),
      signal: AbortSignal.timeout(this.timeout)
    });
    const body = await response.text();
    if (!response.ok) {
      throw new Error(`Failed to update run: ${response.status} ${response.statusText} ${body}`);
    }
  }
  async onLLMStart(run2) {
    await this._persistRunSingle(run2);
  }
  async onLLMEnd(run2) {
    await this._updateRunSingle(run2);
  }
  async onLLMError(run2) {
    await this._updateRunSingle(run2);
  }
  async onChainStart(run2) {
    await this._persistRunSingle(run2);
  }
  async onChainEnd(run2) {
    await this._updateRunSingle(run2);
  }
  async onChainError(run2) {
    await this._updateRunSingle(run2);
  }
  async onToolStart(run2) {
    await this._persistRunSingle(run2);
  }
  async onToolEnd(run2) {
    await this._updateRunSingle(run2);
  }
  async onToolError(run2) {
    await this._updateRunSingle(run2);
  }
}
function getBufferString(messages, humanPrefix = "Human", aiPrefix = "AI") {
  const string_messages = [];
  for (const m of messages) {
    let role;
    if (m._getType() === "human") {
      role = humanPrefix;
    } else if (m._getType() === "ai") {
      role = aiPrefix;
    } else if (m._getType() === "system") {
      role = "System";
    } else if (m._getType() === "generic") {
      role = m.role;
    } else {
      throw new Error(`Got unsupported message type: ${m}`);
    }
    string_messages.push(`${role}: ${m.text}`);
  }
  return string_messages.join("\n");
}
class LangChainTracerV1 extends BaseTracer {
  constructor() {
    super();
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "langchain_tracer"
    });
    Object.defineProperty(this, "endpoint", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: getEnvironmentVariable("LANGCHAIN_ENDPOINT") || "http://localhost:1984"
    });
    Object.defineProperty(this, "headers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: {
        "Content-Type": "application/json"
      }
    });
    Object.defineProperty(this, "session", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    const apiKey = getEnvironmentVariable("LANGCHAIN_API_KEY");
    if (apiKey) {
      this.headers["x-api-key"] = apiKey;
    }
  }
  async newSession(sessionName) {
    const sessionCreate = {
      start_time: Date.now(),
      name: sessionName
    };
    const session = await this.persistSession(sessionCreate);
    this.session = session;
    return session;
  }
  async loadSession(sessionName) {
    const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;
    return this._handleSessionResponse(endpoint);
  }
  async loadDefaultSession() {
    const endpoint = `${this.endpoint}/sessions?name=default`;
    return this._handleSessionResponse(endpoint);
  }
  async convertV2RunToRun(run2) {
    var _a, _b;
    const session = (_a = this.session) != null ? _a : await this.loadDefaultSession();
    const serialized = run2.serialized;
    let runResult;
    if (run2.run_type === "llm") {
      const prompts = run2.inputs.prompts ? run2.inputs.prompts : run2.inputs.messages.map((x) => getBufferString(x));
      const llmRun = {
        uuid: run2.id,
        start_time: run2.start_time,
        end_time: run2.end_time,
        execution_order: run2.execution_order,
        child_execution_order: run2.child_execution_order,
        serialized,
        type: run2.run_type,
        session_id: session.id,
        prompts,
        response: run2.outputs
      };
      runResult = llmRun;
    } else if (run2.run_type === "chain") {
      const child_runs = await Promise.all(run2.child_runs.map((child_run) => this.convertV2RunToRun(child_run)));
      const chainRun = {
        uuid: run2.id,
        start_time: run2.start_time,
        end_time: run2.end_time,
        execution_order: run2.execution_order,
        child_execution_order: run2.child_execution_order,
        serialized,
        type: run2.run_type,
        session_id: session.id,
        inputs: run2.inputs,
        outputs: run2.outputs,
        child_llm_runs: child_runs.filter((child_run) => child_run.type === "llm"),
        child_chain_runs: child_runs.filter((child_run) => child_run.type === "chain"),
        child_tool_runs: child_runs.filter((child_run) => child_run.type === "tool")
      };
      runResult = chainRun;
    } else if (run2.run_type === "tool") {
      const child_runs = await Promise.all(run2.child_runs.map((child_run) => this.convertV2RunToRun(child_run)));
      const toolRun = {
        uuid: run2.id,
        start_time: run2.start_time,
        end_time: run2.end_time,
        execution_order: run2.execution_order,
        child_execution_order: run2.child_execution_order,
        serialized,
        type: run2.run_type,
        session_id: session.id,
        tool_input: run2.inputs.input,
        output: (_b = run2.outputs) == null ? void 0 : _b.output,
        action: JSON.stringify(serialized),
        child_llm_runs: child_runs.filter((child_run) => child_run.type === "llm"),
        child_chain_runs: child_runs.filter((child_run) => child_run.type === "chain"),
        child_tool_runs: child_runs.filter((child_run) => child_run.type === "tool")
      };
      runResult = toolRun;
    } else {
      throw new Error(`Unknown run type: ${run2.run_type}`);
    }
    return runResult;
  }
  async persistRun(run2) {
    let endpoint;
    let v1Run;
    if (run2.run_type !== void 0) {
      v1Run = await this.convertV2RunToRun(run2);
    } else {
      v1Run = run2;
    }
    if (v1Run.type === "llm") {
      endpoint = `${this.endpoint}/llm-runs`;
    } else if (v1Run.type === "chain") {
      endpoint = `${this.endpoint}/chain-runs`;
    } else {
      endpoint = `${this.endpoint}/tool-runs`;
    }
    const response = await fetch(endpoint, {
      method: "POST",
      headers: this.headers,
      body: JSON.stringify(v1Run)
    });
    if (!response.ok) {
      console.error(`Failed to persist run: ${response.status} ${response.statusText}`);
    }
  }
  async persistSession(sessionCreate) {
    const endpoint = `${this.endpoint}/sessions`;
    const response = await fetch(endpoint, {
      method: "POST",
      headers: this.headers,
      body: JSON.stringify(sessionCreate)
    });
    if (!response.ok) {
      console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);
      return {
        id: 1,
        ...sessionCreate
      };
    }
    return {
      id: (await response.json()).id,
      ...sessionCreate
    };
  }
  async _handleSessionResponse(endpoint) {
    const response = await fetch(endpoint, {
      method: "GET",
      headers: this.headers
    });
    let tracerSession;
    if (!response.ok) {
      console.error(`Failed to load session: ${response.status} ${response.statusText}`);
      tracerSession = {
        id: 1,
        start_time: Date.now()
      };
      this.session = tracerSession;
      return tracerSession;
    }
    const resp = await response.json();
    if (resp.length === 0) {
      tracerSession = {
        id: 1,
        start_time: Date.now()
      };
      this.session = tracerSession;
      return tracerSession;
    }
    [tracerSession] = resp;
    this.session = tracerSession;
    return tracerSession;
  }
}
async function getTracingCallbackHandler(session) {
  const tracer = new LangChainTracerV1();
  if (session) {
    await tracer.loadSession(session);
  } else {
    await tracer.loadDefaultSession();
  }
  return tracer;
}
async function getTracingV2CallbackHandler() {
  return new LangChainTracer();
}
class BaseCallbackManager {
  setHandler(handler) {
    return this.setHandlers([handler]);
  }
}
class BaseRunManager {
  constructor(runId, handlers, inheritableHandlers, _parentRunId) {
    Object.defineProperty(this, "runId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: runId
    });
    Object.defineProperty(this, "handlers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: handlers
    });
    Object.defineProperty(this, "inheritableHandlers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: inheritableHandlers
    });
    Object.defineProperty(this, "_parentRunId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: _parentRunId
    });
  }
  async handleText(text2) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      try {
        await ((_a = handler.handleText) == null ? void 0 : _a.call(handler, text2, this.runId, this._parentRunId));
      } catch (err) {
        console.error(`Error in handler ${handler.constructor.name}, handleText: ${err}`);
      }
    }));
  }
}
class CallbackManagerForLLMRun extends BaseRunManager {
  async handleLLMNewToken(token) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreLLM) {
        try {
          await ((_a = handler.handleLLMNewToken) == null ? void 0 : _a.call(handler, token, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);
        }
      }
    }));
  }
  async handleLLMError(err) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreLLM) {
        try {
          await ((_a = handler.handleLLMError) == null ? void 0 : _a.call(handler, err, this.runId, this._parentRunId));
        } catch (err2) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMError: ${err2}`);
        }
      }
    }));
  }
  async handleLLMEnd(output) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreLLM) {
        try {
          await ((_a = handler.handleLLMEnd) == null ? void 0 : _a.call(handler, output, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);
        }
      }
    }));
  }
}
class CallbackManagerForChainRun extends BaseRunManager {
  getChild() {
    const manager = new CallbackManager(this.runId);
    manager.setHandlers(this.inheritableHandlers);
    return manager;
  }
  async handleChainError(err) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreChain) {
        try {
          await ((_a = handler.handleChainError) == null ? void 0 : _a.call(handler, err, this.runId, this._parentRunId));
        } catch (err2) {
          console.error(`Error in handler ${handler.constructor.name}, handleChainError: ${err2}`);
        }
      }
    }));
  }
  async handleChainEnd(output) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreChain) {
        try {
          await ((_a = handler.handleChainEnd) == null ? void 0 : _a.call(handler, output, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);
        }
      }
    }));
  }
  async handleAgentAction(action) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleAgentAction) == null ? void 0 : _a.call(handler, action, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);
        }
      }
    }));
  }
  async handleAgentEnd(action) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleAgentEnd) == null ? void 0 : _a.call(handler, action, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);
        }
      }
    }));
  }
}
class CallbackManagerForToolRun extends BaseRunManager {
  getChild() {
    const manager = new CallbackManager(this.runId);
    manager.setHandlers(this.inheritableHandlers);
    return manager;
  }
  async handleToolError(err) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleToolError) == null ? void 0 : _a.call(handler, err, this.runId, this._parentRunId));
        } catch (err2) {
          console.error(`Error in handler ${handler.constructor.name}, handleToolError: ${err2}`);
        }
      }
    }));
  }
  async handleToolEnd(output) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleToolEnd) == null ? void 0 : _a.call(handler, output, this.runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);
        }
      }
    }));
  }
}
class CallbackManager extends BaseCallbackManager {
  constructor(parentRunId) {
    super();
    Object.defineProperty(this, "handlers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "inheritableHandlers", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "name", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "callback_manager"
    });
    Object.defineProperty(this, "_parentRunId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.handlers = [];
    this.inheritableHandlers = [];
    this._parentRunId = parentRunId;
  }
  async handleLLMStart(llm, prompts, runId = v4(), _parentRunId = void 0, extraParams = void 0) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreLLM) {
        try {
          await ((_a = handler.handleLLMStart) == null ? void 0 : _a.call(handler, llm, prompts, runId, this._parentRunId, extraParams));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);
        }
      }
    }));
    return new CallbackManagerForLLMRun(runId, this.handlers, this.inheritableHandlers, this._parentRunId);
  }
  async handleChatModelStart(llm, messages, runId = v4(), _parentRunId = void 0, extraParams = void 0) {
    let messageStrings;
    await Promise.all(this.handlers.map(async (handler) => {
      var _a, _b;
      if (!handler.ignoreLLM) {
        try {
          if (handler.handleChatModelStart)
            await ((_a = handler.handleChatModelStart) == null ? void 0 : _a.call(handler, llm, messages, runId, this._parentRunId, extraParams));
          else if (handler.handleLLMStart) {
            messageStrings = messages.map((x) => getBufferString(x));
            await ((_b = handler.handleLLMStart) == null ? void 0 : _b.call(handler, llm, messageStrings, runId, this._parentRunId, extraParams));
          }
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);
        }
      }
    }));
    return new CallbackManagerForLLMRun(runId, this.handlers, this.inheritableHandlers, this._parentRunId);
  }
  async handleChainStart(chain, inputs, runId = v4()) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreChain) {
        try {
          await ((_a = handler.handleChainStart) == null ? void 0 : _a.call(handler, chain, inputs, runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);
        }
      }
    }));
    return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this._parentRunId);
  }
  async handleToolStart(tool, input, runId = v4()) {
    await Promise.all(this.handlers.map(async (handler) => {
      var _a;
      if (!handler.ignoreAgent) {
        try {
          await ((_a = handler.handleToolStart) == null ? void 0 : _a.call(handler, tool, input, runId, this._parentRunId));
        } catch (err) {
          console.error(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);
        }
      }
    }));
    return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this._parentRunId);
  }
  addHandler(handler, inherit = true) {
    this.handlers.push(handler);
    if (inherit) {
      this.inheritableHandlers.push(handler);
    }
  }
  removeHandler(handler) {
    this.handlers = this.handlers.filter((_handler) => _handler !== handler);
    this.inheritableHandlers = this.inheritableHandlers.filter((_handler) => _handler !== handler);
  }
  setHandlers(handlers, inherit = true) {
    this.handlers = [];
    this.inheritableHandlers = [];
    for (const handler of handlers) {
      this.addHandler(handler, inherit);
    }
  }
  copy(additionalHandlers = [], inherit = true) {
    const manager = new CallbackManager(this._parentRunId);
    for (const handler of this.handlers) {
      const inheritable = this.inheritableHandlers.includes(handler);
      manager.addHandler(handler, inheritable);
    }
    for (const handler of additionalHandlers) {
      if (manager.handlers.filter((h) => h.name === "console_callback_handler").some((h) => h.name === handler.name)) {
        continue;
      }
      manager.addHandler(handler, inherit);
    }
    return manager;
  }
  static fromHandlers(handlers) {
    class Handler extends BaseCallbackHandler {
      constructor() {
        super();
        Object.defineProperty(this, "name", {
          enumerable: true,
          configurable: true,
          writable: true,
          value: v4()
        });
        Object.assign(this, handlers);
      }
    }
    const manager = new this();
    manager.addHandler(new Handler());
    return manager;
  }
  static async configure(inheritableHandlers, localHandlers, options2) {
    var _a, _b, _c;
    let callbackManager;
    if (inheritableHandlers || localHandlers) {
      if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {
        callbackManager = new CallbackManager();
        callbackManager.setHandlers((_a = inheritableHandlers == null ? void 0 : inheritableHandlers.map(ensureHandler)) != null ? _a : [], true);
      } else {
        callbackManager = inheritableHandlers;
      }
      callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers == null ? void 0 : localHandlers.handlers, false);
    }
    const verboseEnabled = getEnvironmentVariable("LANGCHAIN_VERBOSE") || (options2 == null ? void 0 : options2.verbose);
    const tracingV2Enabled = (_b = getEnvironmentVariable("LANGCHAIN_TRACING_V2")) != null ? _b : false;
    const tracingEnabled = tracingV2Enabled || ((_c = getEnvironmentVariable("LANGCHAIN_TRACING")) != null ? _c : false);
    if (verboseEnabled || tracingEnabled) {
      if (!callbackManager) {
        callbackManager = new CallbackManager();
      }
      if (verboseEnabled && !callbackManager.handlers.some((handler) => handler.name === ConsoleCallbackHandler.prototype.name)) {
        const consoleHandler = new ConsoleCallbackHandler();
        callbackManager.addHandler(consoleHandler, true);
      }
      if (tracingEnabled && !callbackManager.handlers.some((handler) => handler.name === "langchain_tracer")) {
        if (tracingV2Enabled) {
          callbackManager.addHandler(await getTracingV2CallbackHandler(), true);
        } else {
          const session = getEnvironmentVariable("LANGCHAIN_SESSION");
          callbackManager.addHandler(await getTracingCallbackHandler(session), true);
        }
      }
    }
    return callbackManager;
  }
}
function ensureHandler(handler) {
  if ("name" in handler) {
    return handler;
  }
  return BaseCallbackHandler.fromMethods(handler);
}
class BaseLLM extends BaseLanguageModel {
  constructor({ cache: cache2, concurrency, ...rest }) {
    super(concurrency ? { maxConcurrency: concurrency, ...rest } : rest);
    Object.defineProperty(this, "cache", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    if (typeof cache2 === "object") {
      this.cache = cache2;
    } else if (cache2) {
      this.cache = InMemoryCache.global();
    } else {
      this.cache = void 0;
    }
  }
  async generatePrompt(promptValues, options2, callbacks) {
    const prompts = promptValues.map((promptValue) => promptValue.toString());
    return this.generate(prompts, options2, callbacks);
  }
  invocationParams() {
    return {};
  }
  async _generateUncached(prompts, options2, callbacks) {
    const callbackManager_ = await CallbackManager.configure(callbacks, this.callbacks, { verbose: this.verbose });
    const invocationParams = { invocation_params: this == null ? void 0 : this.invocationParams() };
    const runManager = await (callbackManager_ == null ? void 0 : callbackManager_.handleLLMStart({ name: this._llmType() }, prompts, void 0, void 0, invocationParams));
    let output;
    try {
      output = await this._generate(prompts, options2, runManager);
    } catch (err) {
      await (runManager == null ? void 0 : runManager.handleLLMError(err));
      throw err;
    }
    await (runManager == null ? void 0 : runManager.handleLLMEnd(output));
    Object.defineProperty(output, RUN_KEY, {
      value: runManager ? { runId: runManager == null ? void 0 : runManager.runId } : void 0,
      configurable: true
    });
    return output;
  }
  async generate(prompts, options2, callbacks) {
    var _a, _b;
    if (!Array.isArray(prompts)) {
      throw new Error("Argument 'prompts' is expected to be a string[]");
    }
    let parsedOptions;
    if (Array.isArray(options2)) {
      parsedOptions = { stop: options2 };
    } else if ((options2 == null ? void 0 : options2.timeout) && !options2.signal) {
      parsedOptions = {
        ...options2,
        signal: AbortSignal.timeout(options2.timeout)
      };
    } else {
      parsedOptions = options2 != null ? options2 : {};
    }
    if (!this.cache) {
      return this._generateUncached(prompts, parsedOptions, callbacks);
    }
    const { cache: cache2 } = this;
    const params = this.serialize();
    params.stop = (_a = parsedOptions.stop) != null ? _a : params.stop;
    const llmStringKey = `${Object.entries(params).sort()}`;
    const missingPromptIndices = [];
    const generations = await Promise.all(prompts.map(async (prompt, index) => {
      const result = await cache2.lookup(prompt, llmStringKey);
      if (!result) {
        missingPromptIndices.push(index);
      }
      return result;
    }));
    let llmOutput = {};
    if (missingPromptIndices.length > 0) {
      const results = await this._generateUncached(missingPromptIndices.map((i) => prompts[i]), parsedOptions, callbacks);
      await Promise.all(results.generations.map(async (generation, index) => {
        const promptIndex = missingPromptIndices[index];
        generations[promptIndex] = generation;
        return cache2.update(prompts[promptIndex], llmStringKey, generation);
      }));
      llmOutput = (_b = results.llmOutput) != null ? _b : {};
    }
    return { generations, llmOutput };
  }
  async call(prompt, options2, callbacks) {
    const { generations } = await this.generate([prompt], options2 != null ? options2 : {}, callbacks);
    return generations[0][0].text;
  }
  async predict(text2, options2, callbacks) {
    return this.call(text2, options2, callbacks);
  }
  async predictMessages(messages, options2, callbacks) {
    const text2 = getBufferString(messages);
    const prediction = await this.call(text2, options2, callbacks);
    return new AIChatMessage(prediction);
  }
  _identifyingParams() {
    return {};
  }
  serialize() {
    return {
      ...this._identifyingParams(),
      _type: this._llmType(),
      _model: this._modelType()
    };
  }
  _modelType() {
    return "base_llm";
  }
  static async deserialize(data2) {
    const { _type, _model, ...rest } = data2;
    if (_model && _model !== "base_llm") {
      throw new Error(`Cannot load LLM with model ${_model}`);
    }
    const Cls = {
      openai: (await Promise.resolve().then(() => openai)).OpenAI
    }[_type];
    if (Cls === void 0) {
      throw new Error(`Cannot load  LLM with type ${_type}`);
    }
    return new Cls(rest);
  }
}
class LLM extends BaseLLM {
  async _generate(prompts, options2, runManager) {
    const generations = await Promise.all(prompts.map((prompt) => this._call(prompt, options2, runManager).then((text2) => [{ text: text2 }])));
    return { generations };
  }
}
const promptLayerTrackRequest = async (callerFunc, functionName, prompt, kwargs, plTags, requestResponse, startTime, endTime, apiKey) => {
  const promptLayerResp = await callerFunc.call(fetch, "https://api.promptlayer.com/track-request", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Accept: "application/json"
    },
    body: JSON.stringify({
      function_name: functionName,
      provider: "langchain",
      args: prompt,
      kwargs,
      tags: plTags,
      request_response: requestResponse,
      request_start_time: Math.floor(startTime / 1e3),
      request_end_time: Math.floor(endTime / 1e3),
      api_key: apiKey
    })
  });
  return promptLayerResp.json();
};
class OpenAIChat extends LLM {
  get callKeys() {
    return ["stop", "signal", "timeout", "options"];
  }
  constructor(fields, configuration2) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;
    super(fields != null ? fields : {});
    Object.defineProperty(this, "temperature", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "topP", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "frequencyPenalty", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0
    });
    Object.defineProperty(this, "presencePenalty", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0
    });
    Object.defineProperty(this, "n", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "logitBias", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "maxTokens", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "modelName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "gpt-3.5-turbo"
    });
    Object.defineProperty(this, "prefixMessages", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "modelKwargs", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "timeout", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "stop", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "streaming", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    Object.defineProperty(this, "azureOpenAIApiVersion", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiKey", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiInstanceName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiDeploymentName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "client", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "clientConfig", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    const apiKey = (_a = fields == null ? void 0 : fields.openAIApiKey) != null ? _a : getEnvironmentVariable("OPENAI_API_KEY");
    const azureApiKey = (_b = fields == null ? void 0 : fields.azureOpenAIApiKey) != null ? _b : getEnvironmentVariable("AZURE_OPENAI_API_KEY");
    if (!azureApiKey && !apiKey) {
      throw new Error("(Azure) OpenAI API key not found");
    }
    const azureApiInstanceName = (_c = fields == null ? void 0 : fields.azureOpenAIApiInstanceName) != null ? _c : getEnvironmentVariable("AZURE_OPENAI_API_INSTANCE_NAME");
    const azureApiDeploymentName = (_d = fields == null ? void 0 : fields.azureOpenAIApiDeploymentName) != null ? _d : getEnvironmentVariable("AZURE_OPENAI_API_DEPLOYMENT_NAME");
    const azureApiVersion = (_e = fields == null ? void 0 : fields.azureOpenAIApiVersion) != null ? _e : getEnvironmentVariable("AZURE_OPENAI_API_VERSION");
    this.modelName = (_f = fields == null ? void 0 : fields.modelName) != null ? _f : this.modelName;
    this.prefixMessages = (_g = fields == null ? void 0 : fields.prefixMessages) != null ? _g : this.prefixMessages;
    this.modelKwargs = (_h = fields == null ? void 0 : fields.modelKwargs) != null ? _h : {};
    this.timeout = fields == null ? void 0 : fields.timeout;
    this.temperature = (_i = fields == null ? void 0 : fields.temperature) != null ? _i : this.temperature;
    this.topP = (_j = fields == null ? void 0 : fields.topP) != null ? _j : this.topP;
    this.frequencyPenalty = (_k = fields == null ? void 0 : fields.frequencyPenalty) != null ? _k : this.frequencyPenalty;
    this.presencePenalty = (_l = fields == null ? void 0 : fields.presencePenalty) != null ? _l : this.presencePenalty;
    this.n = (_m = fields == null ? void 0 : fields.n) != null ? _m : this.n;
    this.logitBias = fields == null ? void 0 : fields.logitBias;
    this.maxTokens = fields == null ? void 0 : fields.maxTokens;
    this.stop = fields == null ? void 0 : fields.stop;
    this.streaming = (_n = fields == null ? void 0 : fields.streaming) != null ? _n : false;
    this.azureOpenAIApiVersion = azureApiVersion;
    this.azureOpenAIApiKey = azureApiKey;
    this.azureOpenAIApiInstanceName = azureApiInstanceName;
    this.azureOpenAIApiDeploymentName = azureApiDeploymentName;
    if (this.streaming && this.n > 1) {
      throw new Error("Cannot stream results when n > 1");
    }
    if (this.azureOpenAIApiKey) {
      if (!this.azureOpenAIApiInstanceName) {
        throw new Error("Azure OpenAI API instance name not found");
      }
      if (!this.azureOpenAIApiDeploymentName) {
        throw new Error("Azure OpenAI API deployment name not found");
      }
      if (!this.azureOpenAIApiVersion) {
        throw new Error("Azure OpenAI API version not found");
      }
    }
    this.clientConfig = {
      apiKey,
      ...configuration2
    };
  }
  invocationParams() {
    return {
      model: this.modelName,
      temperature: this.temperature,
      top_p: this.topP,
      frequency_penalty: this.frequencyPenalty,
      presence_penalty: this.presencePenalty,
      n: this.n,
      logit_bias: this.logitBias,
      max_tokens: this.maxTokens === -1 ? void 0 : this.maxTokens,
      stop: this.stop,
      stream: this.streaming,
      ...this.modelKwargs
    };
  }
  _identifyingParams() {
    return {
      model_name: this.modelName,
      ...this.invocationParams(),
      ...this.clientConfig
    };
  }
  identifyingParams() {
    return {
      model_name: this.modelName,
      ...this.invocationParams(),
      ...this.clientConfig
    };
  }
  formatMessages(prompt) {
    const message = {
      role: "user",
      content: prompt
    };
    return this.prefixMessages ? [...this.prefixMessages, message] : [message];
  }
  async _call(prompt, options2, runManager) {
    var _a, _b;
    const { stop } = options2;
    const params = this.invocationParams();
    params.stop = stop != null ? stop : params.stop;
    const data2 = params.stream ? await new Promise((resolve, reject) => {
      let response;
      let rejected = false;
      let resolved = false;
      this.completionWithRetry({
        ...params,
        messages: this.formatMessages(prompt)
      }, {
        signal: options2.signal,
        ...options2.options,
        adapter: fetchAdapter,
        responseType: "stream",
        onmessage: (event) => {
          var _a2, _b2, _c, _d, _e, _f, _g, _h, _i, _j;
          if (((_b2 = (_a2 = event.data) == null ? void 0 : _a2.trim) == null ? void 0 : _b2.call(_a2)) === "[DONE]") {
            if (resolved) {
              return;
            }
            resolved = true;
            resolve(response);
          } else {
            const message = JSON.parse(event.data);
            if (!response) {
              response = {
                id: message.id,
                object: message.object,
                created: message.created,
                model: message.model,
                choices: []
              };
            }
            for (const part of message.choices) {
              if (part != null) {
                let choice = response.choices.find((c) => c.index === part.index);
                if (!choice) {
                  choice = {
                    index: part.index,
                    finish_reason: (_c = part.finish_reason) != null ? _c : void 0
                  };
                  response.choices.push(choice);
                }
                if (!choice.message) {
                  choice.message = {
                    role: (_d = part.delta) == null ? void 0 : _d.role,
                    content: (_f = (_e = part.delta) == null ? void 0 : _e.content) != null ? _f : ""
                  };
                }
                choice.message.content += (_h = (_g = part.delta) == null ? void 0 : _g.content) != null ? _h : "";
                void (runManager == null ? void 0 : runManager.handleLLMNewToken((_j = (_i = part.delta) == null ? void 0 : _i.content) != null ? _j : ""));
              }
            }
            if (!resolved && message.choices.every((c) => c.finish_reason != null)) {
              resolved = true;
              resolve(response);
            }
          }
        }
      }).catch((error) => {
        if (!rejected) {
          rejected = true;
          reject(error);
        }
      });
    }) : await this.completionWithRetry({
      ...params,
      messages: this.formatMessages(prompt)
    }, {
      signal: options2.signal,
      ...options2.options
    });
    return (_b = (_a = data2.choices[0].message) == null ? void 0 : _a.content) != null ? _b : "";
  }
  async completionWithRetry(request2, options2) {
    if (!this.client) {
      const endpoint = this.azureOpenAIApiKey ? `https://${this.azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${this.azureOpenAIApiDeploymentName}` : this.clientConfig.basePath;
      const clientConfig = new dist$1.Configuration({
        ...this.clientConfig,
        basePath: endpoint,
        baseOptions: {
          timeout: this.timeout,
          ...this.clientConfig.baseOptions
        }
      });
      this.client = new dist$1.OpenAIApi(clientConfig);
    }
    const axiosOptions = {
      adapter: isNode() ? void 0 : fetchAdapter,
      ...this.clientConfig.baseOptions,
      ...options2
    };
    if (this.azureOpenAIApiKey) {
      axiosOptions.headers = {
        "api-key": this.azureOpenAIApiKey,
        ...axiosOptions.headers
      };
      axiosOptions.params = {
        "api-version": this.azureOpenAIApiVersion,
        ...axiosOptions.params
      };
    }
    return this.caller.call(this.client.createChatCompletion.bind(this.client), request2, axiosOptions).then((res) => res.data);
  }
  _llmType() {
    return "openai";
  }
}
class PromptLayerOpenAIChat extends OpenAIChat {
  constructor(fields) {
    var _a, _b, _c;
    super(fields);
    Object.defineProperty(this, "promptLayerApiKey", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "plTags", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "returnPromptLayerId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.plTags = (_a = fields == null ? void 0 : fields.plTags) != null ? _a : [];
    this.returnPromptLayerId = (_b = fields == null ? void 0 : fields.returnPromptLayerId) != null ? _b : false;
    this.promptLayerApiKey = (_c = fields == null ? void 0 : fields.promptLayerApiKey) != null ? _c : getEnvironmentVariable("PROMPTLAYER_API_KEY");
    if (!this.promptLayerApiKey) {
      throw new Error("Missing PromptLayer API key");
    }
  }
  async completionWithRetry(request2, options2) {
    if (request2.stream) {
      return super.completionWithRetry(request2, options2);
    }
    const response = await super.completionWithRetry(request2);
    return response;
  }
  async _generate(prompts, options2, runManager) {
    let choice;
    const generations = await Promise.all(prompts.map(async (prompt) => {
      const requestStartTime = Date.now();
      const text2 = await this._call(prompt, options2, runManager);
      const requestEndTime = Date.now();
      choice = [{ text: text2 }];
      const parsedResp = {
        text: text2
      };
      const promptLayerRespBody = await promptLayerTrackRequest(this.caller, "langchain.PromptLayerOpenAIChat", [prompt], this._identifyingParams(), this.plTags, parsedResp, requestStartTime, requestEndTime, this.promptLayerApiKey);
      if (this.returnPromptLayerId === true && promptLayerRespBody.success === true) {
        choice[0].generationInfo = {
          promptLayerRequestId: promptLayerRespBody.request_id
        };
      }
      return choice;
    }));
    return { generations };
  }
}
class OpenAI extends BaseLLM {
  get callKeys() {
    return ["stop", "signal", "timeout", "options"];
  }
  constructor(fields, configuration2) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;
    if (((_a = fields == null ? void 0 : fields.modelName) == null ? void 0 : _a.startsWith("gpt-3.5-turbo")) || ((_b = fields == null ? void 0 : fields.modelName) == null ? void 0 : _b.startsWith("gpt-4")) || ((_c = fields == null ? void 0 : fields.modelName) == null ? void 0 : _c.startsWith("gpt-4-32k"))) {
      return new OpenAIChat(fields, configuration2);
    }
    super(fields != null ? fields : {});
    Object.defineProperty(this, "temperature", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0.7
    });
    Object.defineProperty(this, "maxTokens", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 256
    });
    Object.defineProperty(this, "topP", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "frequencyPenalty", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0
    });
    Object.defineProperty(this, "presencePenalty", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 0
    });
    Object.defineProperty(this, "n", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "bestOf", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 1
    });
    Object.defineProperty(this, "logitBias", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "modelName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: "text-davinci-003"
    });
    Object.defineProperty(this, "modelKwargs", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "batchSize", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: 20
    });
    Object.defineProperty(this, "timeout", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "stop", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "streaming", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: false
    });
    Object.defineProperty(this, "azureOpenAIApiVersion", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiKey", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiInstanceName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "azureOpenAIApiDeploymentName", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "client", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "clientConfig", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    const apiKey = (_d = fields == null ? void 0 : fields.openAIApiKey) != null ? _d : getEnvironmentVariable("OPENAI_API_KEY");
    const azureApiKey = (_e = fields == null ? void 0 : fields.azureOpenAIApiKey) != null ? _e : getEnvironmentVariable("AZURE_OPENAI_API_KEY");
    if (!azureApiKey && !apiKey) {
      throw new Error("(Azure) OpenAI API key not found");
    }
    const azureApiInstanceName = (_f = fields == null ? void 0 : fields.azureOpenAIApiInstanceName) != null ? _f : getEnvironmentVariable("AZURE_OPENAI_API_INSTANCE_NAME");
    const azureApiDeploymentName = (_g = (fields == null ? void 0 : fields.azureOpenAIApiCompletionsDeploymentName) || (fields == null ? void 0 : fields.azureOpenAIApiDeploymentName)) != null ? _g : getEnvironmentVariable("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME") || getEnvironmentVariable("AZURE_OPENAI_API_DEPLOYMENT_NAME");
    const azureApiVersion = (_h = fields == null ? void 0 : fields.azureOpenAIApiVersion) != null ? _h : getEnvironmentVariable("AZURE_OPENAI_API_VERSION");
    this.modelName = (_i = fields == null ? void 0 : fields.modelName) != null ? _i : this.modelName;
    this.modelKwargs = (_j = fields == null ? void 0 : fields.modelKwargs) != null ? _j : {};
    this.batchSize = (_k = fields == null ? void 0 : fields.batchSize) != null ? _k : this.batchSize;
    this.timeout = fields == null ? void 0 : fields.timeout;
    this.temperature = (_l = fields == null ? void 0 : fields.temperature) != null ? _l : this.temperature;
    this.maxTokens = (_m = fields == null ? void 0 : fields.maxTokens) != null ? _m : this.maxTokens;
    this.topP = (_n = fields == null ? void 0 : fields.topP) != null ? _n : this.topP;
    this.frequencyPenalty = (_o = fields == null ? void 0 : fields.frequencyPenalty) != null ? _o : this.frequencyPenalty;
    this.presencePenalty = (_p = fields == null ? void 0 : fields.presencePenalty) != null ? _p : this.presencePenalty;
    this.n = (_q = fields == null ? void 0 : fields.n) != null ? _q : this.n;
    this.bestOf = (_r = fields == null ? void 0 : fields.bestOf) != null ? _r : this.bestOf;
    this.logitBias = fields == null ? void 0 : fields.logitBias;
    this.stop = fields == null ? void 0 : fields.stop;
    this.streaming = (_s = fields == null ? void 0 : fields.streaming) != null ? _s : false;
    this.azureOpenAIApiVersion = azureApiVersion;
    this.azureOpenAIApiKey = azureApiKey;
    this.azureOpenAIApiInstanceName = azureApiInstanceName;
    this.azureOpenAIApiDeploymentName = azureApiDeploymentName;
    if (this.streaming && this.n > 1) {
      throw new Error("Cannot stream results when n > 1");
    }
    if (this.streaming && this.bestOf > 1) {
      throw new Error("Cannot stream results when bestOf > 1");
    }
    if (this.azureOpenAIApiKey) {
      if (!this.azureOpenAIApiInstanceName) {
        throw new Error("Azure OpenAI API instance name not found");
      }
      if (!this.azureOpenAIApiDeploymentName) {
        throw new Error("Azure OpenAI API deployment name not found");
      }
      if (!this.azureOpenAIApiVersion) {
        throw new Error("Azure OpenAI API version not found");
      }
    }
    this.clientConfig = {
      apiKey,
      ...configuration2
    };
  }
  invocationParams() {
    return {
      model: this.modelName,
      temperature: this.temperature,
      max_tokens: this.maxTokens,
      top_p: this.topP,
      frequency_penalty: this.frequencyPenalty,
      presence_penalty: this.presencePenalty,
      n: this.n,
      best_of: this.bestOf,
      logit_bias: this.logitBias,
      stop: this.stop,
      stream: this.streaming,
      ...this.modelKwargs
    };
  }
  _identifyingParams() {
    return {
      model_name: this.modelName,
      ...this.invocationParams(),
      ...this.clientConfig
    };
  }
  identifyingParams() {
    return this._identifyingParams();
  }
  async _generate(prompts, options2, runManager) {
    var _a, _b, _c, _d;
    const { stop } = options2;
    const subPrompts = chunkArray(prompts, this.batchSize);
    const choices = [];
    const tokenUsage = {};
    if (this.stop && stop) {
      throw new Error("Stop found in input and default params");
    }
    const params = this.invocationParams();
    params.stop = stop != null ? stop : params.stop;
    if (params.max_tokens === -1) {
      if (prompts.length !== 1) {
        throw new Error("max_tokens set to -1 not supported for multiple inputs");
      }
      params.max_tokens = await calculateMaxTokens({
        prompt: prompts[0],
        modelName: this.modelName
      });
    }
    for (let i = 0; i < subPrompts.length; i += 1) {
      const data2 = params.stream ? await new Promise((resolve, reject) => {
        const choices2 = [];
        let response;
        let rejected = false;
        let resolved = false;
        this.completionWithRetry({
          ...params,
          prompt: subPrompts[i]
        }, {
          signal: options2.signal,
          ...options2.options,
          adapter: fetchAdapter,
          responseType: "stream",
          onmessage: (event) => {
            var _a2, _b2, _c2, _d2, _e;
            if (((_b2 = (_a2 = event.data) == null ? void 0 : _a2.trim) == null ? void 0 : _b2.call(_a2)) === "[DONE]") {
              if (resolved) {
                return;
              }
              resolved = true;
              resolve({
                ...response,
                choices: choices2
              });
            } else {
              const message = JSON.parse(event.data);
              if (!response) {
                response = {
                  id: message.id,
                  object: message.object,
                  created: message.created,
                  model: message.model
                };
              }
              for (const part of message.choices) {
                if (part != null && part.index != null) {
                  if (!choices2[part.index])
                    choices2[part.index] = {};
                  const choice = choices2[part.index];
                  choice.text = ((_c2 = choice.text) != null ? _c2 : "") + ((_d2 = part.text) != null ? _d2 : "");
                  choice.finish_reason = part.finish_reason;
                  choice.logprobs = part.logprobs;
                  void (runManager == null ? void 0 : runManager.handleLLMNewToken((_e = part.text) != null ? _e : ""));
                }
              }
              if (!resolved && choices2.every((c) => c.finish_reason != null)) {
                resolved = true;
                resolve({
                  ...response,
                  choices: choices2
                });
              }
            }
          }
        }).catch((error) => {
          if (!rejected) {
            rejected = true;
            reject(error);
          }
        });
      }) : await this.completionWithRetry({
        ...params,
        prompt: subPrompts[i]
      }, {
        signal: options2.signal,
        ...options2.options
      });
      choices.push(...data2.choices);
      const { completion_tokens: completionTokens, prompt_tokens: promptTokens, total_tokens: totalTokens } = (_a = data2.usage) != null ? _a : {};
      if (completionTokens) {
        tokenUsage.completionTokens = ((_b = tokenUsage.completionTokens) != null ? _b : 0) + completionTokens;
      }
      if (promptTokens) {
        tokenUsage.promptTokens = ((_c = tokenUsage.promptTokens) != null ? _c : 0) + promptTokens;
      }
      if (totalTokens) {
        tokenUsage.totalTokens = ((_d = tokenUsage.totalTokens) != null ? _d : 0) + totalTokens;
      }
    }
    const generations = chunkArray(choices, this.n).map((promptChoices) => promptChoices.map((choice) => {
      var _a2;
      return {
        text: (_a2 = choice.text) != null ? _a2 : "",
        generationInfo: {
          finishReason: choice.finish_reason,
          logprobs: choice.logprobs
        }
      };
    }));
    return {
      generations,
      llmOutput: { tokenUsage }
    };
  }
  async completionWithRetry(request2, options2) {
    if (!this.client) {
      const endpoint = this.azureOpenAIApiKey ? `https://${this.azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${this.azureOpenAIApiDeploymentName}` : this.clientConfig.basePath;
      const clientConfig = new dist$1.Configuration({
        ...this.clientConfig,
        basePath: endpoint,
        baseOptions: {
          timeout: this.timeout,
          ...this.clientConfig.baseOptions
        }
      });
      this.client = new dist$1.OpenAIApi(clientConfig);
    }
    const axiosOptions = {
      adapter: isNode() ? void 0 : fetchAdapter,
      ...this.clientConfig.baseOptions,
      ...options2
    };
    if (this.azureOpenAIApiKey) {
      axiosOptions.headers = {
        "api-key": this.azureOpenAIApiKey,
        ...axiosOptions.headers
      };
      axiosOptions.params = {
        "api-version": this.azureOpenAIApiVersion,
        ...axiosOptions.params
      };
    }
    return this.caller.call(this.client.createCompletion.bind(this.client), request2, axiosOptions).then((res) => res.data);
  }
  _llmType() {
    return "openai";
  }
}
class PromptLayerOpenAI extends OpenAI {
  constructor(fields) {
    var _a, _b;
    super(fields);
    Object.defineProperty(this, "promptLayerApiKey", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "plTags", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    Object.defineProperty(this, "returnPromptLayerId", {
      enumerable: true,
      configurable: true,
      writable: true,
      value: void 0
    });
    this.plTags = (_a = fields == null ? void 0 : fields.plTags) != null ? _a : [];
    this.promptLayerApiKey = (_b = fields == null ? void 0 : fields.promptLayerApiKey) != null ? _b : getEnvironmentVariable("PROMPTLAYER_API_KEY");
    this.returnPromptLayerId = fields == null ? void 0 : fields.returnPromptLayerId;
    if (!this.promptLayerApiKey) {
      throw new Error("Missing PromptLayer API key");
    }
  }
  async completionWithRetry(request2, options2) {
    if (request2.stream) {
      return super.completionWithRetry(request2, options2);
    }
    const response = await super.completionWithRetry(request2);
    return response;
  }
  async _generate(prompts, options2, runManager) {
    const requestStartTime = Date.now();
    const generations = await super._generate(prompts, options2, runManager);
    for (let i = 0; i < generations.generations.length; i += 1) {
      const requestEndTime = Date.now();
      const parsedResp = {
        text: generations.generations[i][0].text,
        llm_output: generations.llmOutput
      };
      const promptLayerRespBody = await promptLayerTrackRequest(this.caller, "langchain.PromptLayerOpenAI", [prompts[i]], this._identifyingParams(), this.plTags, parsedResp, requestStartTime, requestEndTime, this.promptLayerApiKey);
      let promptLayerRequestId;
      if (this.returnPromptLayerId === true) {
        if (promptLayerRespBody && promptLayerRespBody.success === true) {
          promptLayerRequestId = promptLayerRespBody.request_id;
        }
        generations.generations[i][0].generationInfo = {
          ...generations.generations[i][0].generationInfo,
          promptLayerRequestId
        };
      }
    }
    return generations;
  }
}
const openai = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  OpenAI,
  PromptLayerOpenAI,
  OpenAIChat,
  PromptLayerOpenAIChat
}, Symbol.toStringTag, { value: "Module" }));
function create_fragment(ctx) {
  let div;
  let h1;
  let t1;
  let input;
  let t2;
  let button;
  let t4;
  let span;
  let t5;
  let mounted;
  let dispose;
  return {
    c() {
      div = element("div");
      h1 = element("h1");
      h1.textContent = "Basic Prompt";
      t1 = space();
      input = element("input");
      t2 = space();
      button = element("button");
      button.textContent = "Send Prompt";
      t4 = space();
      span = element("span");
      t5 = text(ctx[1]);
      attr(input, "type", "text");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, h1);
      append(div, t1);
      append(div, input);
      set_input_value(input, ctx[0]);
      append(div, t2);
      append(div, button);
      append(div, t4);
      append(div, span);
      append(span, t5);
      if (!mounted) {
        dispose = [
          listen(input, "input", ctx[4]),
          listen(button, "click", ctx[5])
        ];
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 1 && input.value !== ctx2[0]) {
        set_input_value(input, ctx2[0]);
      }
      if (dirty & 2)
        set_data(t5, ctx2[1]);
    },
    i: noop,
    o: noop,
    d(detaching) {
      if (detaching)
        detach(div);
      mounted = false;
      run_all(dispose);
    }
  };
}
function instance($$self, $$props, $$invalidate) {
  let promptInput = "";
  let promptOutput = "res...";
  const openAIKey = "";
  const model = new OpenAI({
    openAIApiKey: openAIKey,
    temperature: 0.4
  });
  function sendPrompt(promptInput2) {
    return __awaiter$1(this, void 0, void 0, function* () {
      console.log("input: " + promptInput2);
      console.log("api-key: " + openAIKey);
      const response = yield model.call(promptInput2);
      $$invalidate(1, promptOutput = response);
    });
  }
  function input_input_handler() {
    promptInput = this.value;
    $$invalidate(0, promptInput);
  }
  const click_handler = () => {
    sendPrompt(promptInput);
  };
  return [
    promptInput,
    promptOutput,
    sendPrompt,
    openAIKey,
    input_input_handler,
    click_handler
  ];
}
class BasicPrompt extends SvelteComponent {
  constructor(options2) {
    super();
    init(this, options2, instance, create_fragment, safe_not_equal, { openAIKey: 3 });
  }
  get openAIKey() {
    return this.$$.ctx[3];
  }
}
const VIEW_TYPE = "svelte-view";
const DEFAULT_SETTINGS = {
  mySetting: "default",
  openAI_API_Key: "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"
};
class BasicPromptView extends obsidian.ItemView {
  constructor(leaf, openAIKey) {
    super(leaf);
    this.openAIKey = openAIKey;
  }
  getViewType() {
    return VIEW_TYPE;
  }
  getDisplayText() {
    return "Basic Prompt";
  }
  getIcon() {
    return "dice";
  }
  async onOpen() {
    this.view = new BasicPrompt({ target: this.contentEl, props: { openAIKey: this.openAIKey } });
  }
}
class MyPlugin extends obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const openAIKey = this.settings.openAI_API_Key;
    this.registerView(
      VIEW_TYPE,
      (leaf) => this.view = new BasicPromptView(leaf, openAIKey)
    );
    this.app.workspace.onLayoutReady(this.onLayoutReady.bind(this));
    this.addRibbonIcon("dice", "Sample Plugin", (evt) => this.openMapView());
    this.addCommand({
      id: "open-sample-modal-simple",
      name: "Open sample modal (simple)",
      callback: () => this.openMapView()
    });
    this.addSettingTab(new SampleSettingTab(this.app, this));
  }
  onLayoutReady() {
    if (this.app.workspace.getLeavesOfType(VIEW_TYPE).length) {
      return;
    }
    this.app.workspace.getRightLeaf(false).setViewState({
      type: VIEW_TYPE
    });
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async openMapView() {
    const workspace = this.app.workspace;
    workspace.detachLeavesOfType(VIEW_TYPE);
    const leaf = workspace.getLeaf(
      !obsidian.Platform.isMobile
    );
    await leaf.setViewState({ type: VIEW_TYPE });
    workspace.revealLeaf(leaf);
  }
}
class SampleSettingTab extends obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for my awesome plugin." });
    new obsidian.Setting(containerEl).setName("Setting #1").setDesc("It's a secret").addText((text2) => text2.setPlaceholder("Enter your secret").setValue(this.plugin.settings.mySetting).onChange(async (value) => {
      this.plugin.settings.mySetting = value;
      await this.plugin.saveSettings();
    }));
    new obsidian.Setting(containerEl).setName("openAI_API_Key").setDesc("Add your openAI API key here").addText((text2) => text2.setPlaceholder("enter key").setValue(this.plugin.settings.mySetting));
  }
}
exports.AIChatMessage = AIChatMessage;
exports.BaseLanguageModel = BaseLanguageModel;
exports.CallbackManager = CallbackManager;
exports.ChatMessage = ChatMessage;
exports.HumanChatMessage = HumanChatMessage;
exports.MyPlugin = MyPlugin;
exports.RUN_KEY = RUN_KEY;
exports.SystemChatMessage = SystemChatMessage;
exports.dist = dist$1;
exports.fetchAdapter = fetchAdapter;
exports.getEnvironmentVariable = getEnvironmentVariable;
exports.getModelNameForTiktoken = getModelNameForTiktoken;
exports.isNode = isNode;
exports.promptLayerTrackRequest = promptLayerTrackRequest;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcnRlckluZGV4LjdkOGM5NjZkLmpzIiwic291cmNlcyI6WyJub2RlX21vZHVsZXMvZG90ZW52L2xpYi9tYWluLmpzIiwibm9kZV9tb2R1bGVzL2RvdGVudi9saWIvZW52LW9wdGlvbnMuanMiLCJub2RlX21vZHVsZXMvZG90ZW52L2xpYi9jbGktb3B0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9kb3RlbnYvY29uZmlnLmpzIiwibm9kZV9tb2R1bGVzL3N2ZWx0ZS9pbnRlcm5hbC9pbmRleC5tanMiLCJub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL3V0aWxzLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2J1aWxkVVJMLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2VuaGFuY2VFcnJvci5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMvdHJhbnNpdGlvbmFsLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2NyZWF0ZUVycm9yLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3NldHRsZS5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvYnVpbGRGdWxsUGF0aC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9wYXJzZUhlYWRlcnMuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9hZGFwdGVycy94aHIuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2RlZmF1bHRzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3RyYW5zZm9ybURhdGEuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvbWVyZ2VDb25maWcuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2Vudi9kYXRhLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3ZhbGlkYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvcy5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL0NhbmNlbFRva2VuLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsIm5vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0F4aW9zRXJyb3IuanMiLCJub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwibm9kZV9tb2R1bGVzL2F4aW9zL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL29wZW5haS9kaXN0L2Jhc2UuanMiLCJub2RlX21vZHVsZXMvb3BlbmFpL2Rpc3QvY29tbW9uLmpzIiwibm9kZV9tb2R1bGVzL29wZW5haS9kaXN0L2FwaS5qcyIsIm5vZGVfbW9kdWxlcy9mb3JtLWRhdGEvbGliL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvb3BlbmFpL2Rpc3QvY29uZmlndXJhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9vcGVuYWkvZGlzdC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC91dGlsL2Vudi5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC91dGlsL2V2ZW50LXNvdXJjZS1wYXJzZS5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC91dGlsL2F4aW9zLWZldGNoLWFkYXB0ZXIuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvdXRpbC9jaHVuay5qcyIsIm5vZGVfbW9kdWxlcy9vYmplY3QtaGFzaC9kaXN0L29iamVjdF9oYXNoLmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2NhY2hlL2Jhc2UuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3Qvc2NoZW1hL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2NhY2hlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JldHJ5L2xpYi9yZXRyeV9vcGVyYXRpb24uanMiLCJub2RlX21vZHVsZXMvcmV0cnkvbGliL3JldHJ5LmpzIiwibm9kZV9tb2R1bGVzL3JldHJ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3AtcmV0cnkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZXZlbnRlbWl0dGVyMy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wLWZpbmFsbHkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcC10aW1lb3V0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3AtcXVldWUvZGlzdC9sb3dlci1ib3VuZC5qcyIsIm5vZGVfbW9kdWxlcy9wLXF1ZXVlL2Rpc3QvcHJpb3JpdHktcXVldWUuanMiLCJub2RlX21vZHVsZXMvcC1xdWV1ZS9kaXN0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L3V0aWwvYXN5bmNfY2FsbGVyLmpzIiwibm9kZV9tb2R1bGVzL2pzLXRpa3Rva2VuL2Rpc3QvY2h1bmstWFhQR1pIV1ouanMiLCJub2RlX21vZHVsZXMvYmFzZTY0LWpzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2pzLXRpa3Rva2VuL2Rpc3QvY2h1bmstSE9ST0RENVAuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvdXRpbC90aWt0b2tlbi5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9iYXNlX2xhbmd1YWdlL2NvdW50X3Rva2Vucy5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9iYXNlX2xhbmd1YWdlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCJub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3N0cmluZ2lmeS5qcyIsIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvbmF0aXZlLmpzIiwibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC9jYWxsYmFja3MvYmFzZS5qcyIsIm5vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL2Fuc2ktc3R5bGVzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2NhbGxiYWNrcy9oYW5kbGVycy90cmFjZXIuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvY2FsbGJhY2tzL2hhbmRsZXJzL2NvbnNvbGUuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvY2FsbGJhY2tzL2hhbmRsZXJzL3RyYWNlcl9sYW5nY2hhaW4uanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvbWVtb3J5L2Jhc2UuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvY2FsbGJhY2tzL2hhbmRsZXJzL3RyYWNlcl9sYW5nY2hhaW5fdjEuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvY2FsbGJhY2tzL2hhbmRsZXJzL2luaXRpYWxpemUuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvY2FsbGJhY2tzL21hbmFnZXIuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvbGxtcy9iYXNlLmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L3V0aWwvcHJvbXB0LWxheWVyLmpzIiwibm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2xsbXMvb3BlbmFpLWNoYXQuanMiLCJub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvbGxtcy9vcGVuYWkuanMiLCJzcmMvdWkvQmFzaWNQcm9tcHQuc3ZlbHRlIiwic3JjL3N0YXJ0ZXJJbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJylcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcbmNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKVxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJylcbmNvbnN0IHBhY2thZ2VKc29uID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJylcblxuY29uc3QgdmVyc2lvbiA9IHBhY2thZ2VKc29uLnZlcnNpb25cblxuY29uc3QgTElORSA9IC8oPzpefF4pXFxzKig/OmV4cG9ydFxccyspPyhbXFx3Li1dKykoPzpcXHMqPVxccyo/fDpcXHMrPykoXFxzKicoPzpcXFxcJ3xbXiddKSonfFxccypcIig/OlxcXFxcInxbXlwiXSkqXCJ8XFxzKmAoPzpcXFxcYHxbXmBdKSpgfFteI1xcclxcbl0rKT9cXHMqKD86Iy4qKT8oPzokfCQpL21nXG5cbi8vIFBhcnNlIHNyYyBpbnRvIGFuIE9iamVjdFxuZnVuY3Rpb24gcGFyc2UgKHNyYykge1xuICBjb25zdCBvYmogPSB7fVxuXG4gIC8vIENvbnZlcnQgYnVmZmVyIHRvIHN0cmluZ1xuICBsZXQgbGluZXMgPSBzcmMudG9TdHJpbmcoKVxuXG4gIC8vIENvbnZlcnQgbGluZSBicmVha3MgdG8gc2FtZSBmb3JtYXRcbiAgbGluZXMgPSBsaW5lcy5yZXBsYWNlKC9cXHJcXG4/L21nLCAnXFxuJylcblxuICBsZXQgbWF0Y2hcbiAgd2hpbGUgKChtYXRjaCA9IExJTkUuZXhlYyhsaW5lcykpICE9IG51bGwpIHtcbiAgICBjb25zdCBrZXkgPSBtYXRjaFsxXVxuXG4gICAgLy8gRGVmYXVsdCB1bmRlZmluZWQgb3IgbnVsbCB0byBlbXB0eSBzdHJpbmdcbiAgICBsZXQgdmFsdWUgPSAobWF0Y2hbMl0gfHwgJycpXG5cbiAgICAvLyBSZW1vdmUgd2hpdGVzcGFjZVxuICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXG5cbiAgICAvLyBDaGVjayBpZiBkb3VibGUgcXVvdGVkXG4gICAgY29uc3QgbWF5YmVRdW90ZSA9IHZhbHVlWzBdXG5cbiAgICAvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzXG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eKFsnXCJgXSkoW1xcc1xcU10qKVxcMSQvbWcsICckMicpXG5cbiAgICAvLyBFeHBhbmQgbmV3bGluZXMgaWYgZG91YmxlIHF1b3RlZFxuICAgIGlmIChtYXliZVF1b3RlID09PSAnXCInKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcXFxuL2csICdcXG4nKVxuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXFxcci9nLCAnXFxyJylcbiAgICB9XG5cbiAgICAvLyBBZGQgdG8gb2JqZWN0XG4gICAgb2JqW2tleV0gPSB2YWx1ZVxuICB9XG5cbiAgcmV0dXJuIG9ialxufVxuXG5mdW5jdGlvbiBfcGFyc2VWYXVsdCAob3B0aW9ucykge1xuICBjb25zdCB2YXVsdFBhdGggPSBfdmF1bHRQYXRoKG9wdGlvbnMpXG5cbiAgLy8gUGFyc2UgLmVudi52YXVsdFxuICBjb25zdCByZXN1bHQgPSBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52KHsgcGF0aDogdmF1bHRQYXRoIH0pXG4gIGlmICghcmVzdWx0LnBhcnNlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTUlTU0lOR19EQVRBOiBDYW5ub3QgcGFyc2UgJHt2YXVsdFBhdGh9IGZvciBhbiB1bmtub3duIHJlYXNvbmApXG4gIH1cblxuICAvLyBoYW5kbGUgc2NlbmFyaW8gZm9yIGNvbW1hIHNlcGFyYXRlZCBrZXlzIC0gZm9yIHVzZSB3aXRoIGtleSByb3RhdGlvblxuICAvLyBleGFtcGxlOiBET1RFTlZfS0VZPVwiZG90ZW52Oi8vOmtleV8xMjM0QGRvdGVudi5vcmcvdmF1bHQvLmVudi52YXVsdD9lbnZpcm9ubWVudD1wcm9kLGRvdGVudjovLzprZXlfNzg5MEBkb3RlbnYub3JnL3ZhdWx0Ly5lbnYudmF1bHQ/ZW52aXJvbm1lbnQ9cHJvZFwiXG4gIGNvbnN0IGtleXMgPSBfZG90ZW52S2V5KCkuc3BsaXQoJywnKVxuICBjb25zdCBsZW5ndGggPSBrZXlzLmxlbmd0aFxuXG4gIGxldCBkZWNyeXB0ZWRcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgZnVsbCBrZXlcbiAgICAgIGNvbnN0IGtleSA9IGtleXNbaV0udHJpbSgpXG5cbiAgICAgIC8vIEdldCBpbnN0cnVjdGlvbnMgZm9yIGRlY3J5cHRcbiAgICAgIGNvbnN0IGF0dHJzID0gX2luc3RydWN0aW9ucyhyZXN1bHQsIGtleSlcblxuICAgICAgLy8gRGVjcnlwdFxuICAgICAgZGVjcnlwdGVkID0gRG90ZW52TW9kdWxlLmRlY3J5cHQoYXR0cnMuY2lwaGVydGV4dCwgYXR0cnMua2V5KVxuXG4gICAgICBicmVha1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBsYXN0IGtleVxuICAgICAgaWYgKGkgKyAxID49IGxlbmd0aCkge1xuICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgfVxuICAgICAgLy8gdHJ5IG5leHQga2V5XG4gICAgfVxuICB9XG5cbiAgLy8gUGFyc2UgZGVjcnlwdGVkIC5lbnYgc3RyaW5nXG4gIHJldHVybiBEb3RlbnZNb2R1bGUucGFyc2UoZGVjcnlwdGVkKVxufVxuXG5mdW5jdGlvbiBfbG9nIChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKGBbZG90ZW52QCR7dmVyc2lvbn1dW0lORk9dICR7bWVzc2FnZX1gKVxufVxuXG5mdW5jdGlvbiBfd2FybiAobWVzc2FnZSkge1xuICBjb25zb2xlLmxvZyhgW2RvdGVudkAke3ZlcnNpb259XVtXQVJOXSAke21lc3NhZ2V9YClcbn1cblxuZnVuY3Rpb24gX2RlYnVnIChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKGBbZG90ZW52QCR7dmVyc2lvbn1dW0RFQlVHXSAke21lc3NhZ2V9YClcbn1cblxuZnVuY3Rpb24gX2RvdGVudktleSAoKSB7XG4gIGlmIChwcm9jZXNzLmVudi5ET1RFTlZfS0VZICYmIHByb2Nlc3MuZW52LkRPVEVOVl9LRVkubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwcm9jZXNzLmVudi5ET1RFTlZfS0VZXG4gIH1cblxuICByZXR1cm4gJydcbn1cblxuZnVuY3Rpb24gX2luc3RydWN0aW9ucyAocmVzdWx0LCBkb3RlbnZLZXkpIHtcbiAgLy8gUGFyc2UgRE9URU5WX0tFWS4gRm9ybWF0IGlzIGEgVVJJXG4gIGxldCB1cmlcbiAgdHJ5IHtcbiAgICB1cmkgPSBuZXcgVVJMKGRvdGVudktleSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0VSUl9JTlZBTElEX1VSTCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSU5WQUxJRF9ET1RFTlZfS0VZOiBXcm9uZyBmb3JtYXQuIE11c3QgYmUgaW4gdmFsaWQgdXJpIGZvcm1hdCBsaWtlIGRvdGVudjovLzprZXlfMTIzNEBkb3RlbnYub3JnL3ZhdWx0Ly5lbnYudmF1bHQ/ZW52aXJvbm1lbnQ9ZGV2ZWxvcG1lbnQnKVxuICAgIH1cblxuICAgIHRocm93IGVycm9yXG4gIH1cblxuICAvLyBHZXQgZGVjcnlwdCBrZXlcbiAgY29uc3Qga2V5ID0gdXJpLnBhc3N3b3JkXG4gIGlmICgha2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJTlZBTElEX0RPVEVOVl9LRVk6IE1pc3Npbmcga2V5IHBhcnQnKVxuICB9XG5cbiAgLy8gR2V0IGVudmlyb25tZW50XG4gIGNvbnN0IGVudmlyb25tZW50ID0gdXJpLnNlYXJjaFBhcmFtcy5nZXQoJ2Vudmlyb25tZW50JylcbiAgaWYgKCFlbnZpcm9ubWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSU5WQUxJRF9ET1RFTlZfS0VZOiBNaXNzaW5nIGVudmlyb25tZW50IHBhcnQnKVxuICB9XG5cbiAgLy8gR2V0IGNpcGhlcnRleHQgcGF5bG9hZFxuICBjb25zdCBlbnZpcm9ubWVudEtleSA9IGBET1RFTlZfVkFVTFRfJHtlbnZpcm9ubWVudC50b1VwcGVyQ2FzZSgpfWBcbiAgY29uc3QgY2lwaGVydGV4dCA9IHJlc3VsdC5wYXJzZWRbZW52aXJvbm1lbnRLZXldIC8vIERPVEVOVl9WQVVMVF9QUk9EVUNUSU9OXG4gIGlmICghY2lwaGVydGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTk9UX0ZPVU5EX0RPVEVOVl9FTlZJUk9OTUVOVDogQ2Fubm90IGxvY2F0ZSBlbnZpcm9ubWVudCAke2Vudmlyb25tZW50S2V5fSBpbiB5b3VyIC5lbnYudmF1bHQgZmlsZS5gKVxuICB9XG5cbiAgcmV0dXJuIHsgY2lwaGVydGV4dCwga2V5IH1cbn1cblxuZnVuY3Rpb24gX3ZhdWx0UGF0aCAob3B0aW9ucykge1xuICBsZXQgZG90ZW52UGF0aCA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnLmVudicpXG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wYXRoICYmIG9wdGlvbnMucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgZG90ZW52UGF0aCA9IG9wdGlvbnMucGF0aFxuICB9XG5cbiAgLy8gTG9jYXRlIC5lbnYudmF1bHRcbiAgcmV0dXJuIGRvdGVudlBhdGguZW5kc1dpdGgoJy52YXVsdCcpID8gZG90ZW52UGF0aCA6IGAke2RvdGVudlBhdGh9LnZhdWx0YFxufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZUhvbWUgKGVudlBhdGgpIHtcbiAgcmV0dXJuIGVudlBhdGhbMF0gPT09ICd+JyA/IHBhdGguam9pbihvcy5ob21lZGlyKCksIGVudlBhdGguc2xpY2UoMSkpIDogZW52UGF0aFxufVxuXG5mdW5jdGlvbiBfY29uZmlnVmF1bHQgKG9wdGlvbnMpIHtcbiAgX2xvZygnTG9hZGluZyBlbnYgZnJvbSBlbmNyeXB0ZWQgLmVudi52YXVsdCcpXG5cbiAgY29uc3QgcGFyc2VkID0gRG90ZW52TW9kdWxlLl9wYXJzZVZhdWx0KG9wdGlvbnMpXG5cbiAgRG90ZW52TW9kdWxlLnBvcHVsYXRlKHByb2Nlc3MuZW52LCBwYXJzZWQsIG9wdGlvbnMpXG5cbiAgcmV0dXJuIHsgcGFyc2VkIH1cbn1cblxuZnVuY3Rpb24gY29uZmlnRG90ZW52IChvcHRpb25zKSB7XG4gIGxldCBkb3RlbnZQYXRoID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICcuZW52JylcbiAgbGV0IGVuY29kaW5nID0gJ3V0ZjgnXG4gIGNvbnN0IGRlYnVnID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMuZGVidWcpXG5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5wYXRoICE9IG51bGwpIHtcbiAgICAgIGRvdGVudlBhdGggPSBfcmVzb2x2ZUhvbWUob3B0aW9ucy5wYXRoKVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5lbmNvZGluZyAhPSBudWxsKSB7XG4gICAgICBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2RpbmdcbiAgICB9XG4gIH1cblxuICB0cnkge1xuICAgIC8vIFNwZWNpZnlpbmcgYW4gZW5jb2RpbmcgcmV0dXJucyBhIHN0cmluZyBpbnN0ZWFkIG9mIGEgYnVmZmVyXG4gICAgY29uc3QgcGFyc2VkID0gRG90ZW52TW9kdWxlLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhkb3RlbnZQYXRoLCB7IGVuY29kaW5nIH0pKVxuXG4gICAgRG90ZW52TW9kdWxlLnBvcHVsYXRlKHByb2Nlc3MuZW52LCBwYXJzZWQsIG9wdGlvbnMpXG5cbiAgICByZXR1cm4geyBwYXJzZWQgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICBfZGVidWcoYEZhaWxlZCB0byBsb2FkICR7ZG90ZW52UGF0aH0gJHtlLm1lc3NhZ2V9YClcbiAgICB9XG5cbiAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gIH1cbn1cblxuLy8gUG9wdWxhdGVzIHByb2Nlc3MuZW52IGZyb20gLmVudiBmaWxlXG5mdW5jdGlvbiBjb25maWcgKG9wdGlvbnMpIHtcbiAgY29uc3QgdmF1bHRQYXRoID0gX3ZhdWx0UGF0aChvcHRpb25zKVxuXG4gIC8vIGZhbGxiYWNrIHRvIG9yaWdpbmFsIGRvdGVudiBpZiBET1RFTlZfS0VZIGlzIG5vdCBzZXRcbiAgaWYgKF9kb3RlbnZLZXkoKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gRG90ZW52TW9kdWxlLmNvbmZpZ0RvdGVudihvcHRpb25zKVxuICB9XG5cbiAgLy8gZG90ZW52S2V5IGV4aXN0cyBidXQgLmVudi52YXVsdCBmaWxlIGRvZXMgbm90IGV4aXN0XG4gIGlmICghZnMuZXhpc3RzU3luYyh2YXVsdFBhdGgpKSB7XG4gICAgX3dhcm4oYFlvdSBzZXQgRE9URU5WX0tFWSBidXQgeW91IGFyZSBtaXNzaW5nIGEgLmVudi52YXVsdCBmaWxlIGF0ICR7dmF1bHRQYXRofS4gRGlkIHlvdSBmb3JnZXQgdG8gYnVpbGQgaXQ/YClcblxuICAgIHJldHVybiBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52KG9wdGlvbnMpXG4gIH1cblxuICByZXR1cm4gRG90ZW52TW9kdWxlLl9jb25maWdWYXVsdChvcHRpb25zKVxufVxuXG5mdW5jdGlvbiBkZWNyeXB0IChlbmNyeXB0ZWQsIGtleVN0cikge1xuICBjb25zdCBrZXkgPSBCdWZmZXIuZnJvbShrZXlTdHIuc2xpY2UoLTY0KSwgJ2hleCcpXG4gIGxldCBjaXBoZXJ0ZXh0ID0gQnVmZmVyLmZyb20oZW5jcnlwdGVkLCAnYmFzZTY0JylcblxuICBjb25zdCBub25jZSA9IGNpcGhlcnRleHQuc2xpY2UoMCwgMTIpXG4gIGNvbnN0IGF1dGhUYWcgPSBjaXBoZXJ0ZXh0LnNsaWNlKC0xNilcbiAgY2lwaGVydGV4dCA9IGNpcGhlcnRleHQuc2xpY2UoMTIsIC0xNilcblxuICB0cnkge1xuICAgIGNvbnN0IGFlc2djbSA9IGNyeXB0by5jcmVhdGVEZWNpcGhlcml2KCdhZXMtMjU2LWdjbScsIGtleSwgbm9uY2UpXG4gICAgYWVzZ2NtLnNldEF1dGhUYWcoYXV0aFRhZylcbiAgICByZXR1cm4gYCR7YWVzZ2NtLnVwZGF0ZShjaXBoZXJ0ZXh0KX0ke2Flc2djbS5maW5hbCgpfWBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBpc1JhbmdlID0gZXJyb3IgaW5zdGFuY2VvZiBSYW5nZUVycm9yXG4gICAgY29uc3QgaW52YWxpZEtleUxlbmd0aCA9IGVycm9yLm1lc3NhZ2UgPT09ICdJbnZhbGlkIGtleSBsZW5ndGgnXG4gICAgY29uc3QgZGVjcnlwdGlvbkZhaWxlZCA9IGVycm9yLm1lc3NhZ2UgPT09ICdVbnN1cHBvcnRlZCBzdGF0ZSBvciB1bmFibGUgdG8gYXV0aGVudGljYXRlIGRhdGEnXG5cbiAgICBpZiAoaXNSYW5nZSB8fCBpbnZhbGlkS2V5TGVuZ3RoKSB7XG4gICAgICBjb25zdCBtc2cgPSAnSU5WQUxJRF9ET1RFTlZfS0VZOiBJdCBtdXN0IGJlIDY0IGNoYXJhY3RlcnMgbG9uZyAob3IgbW9yZSknXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKVxuICAgIH0gZWxzZSBpZiAoZGVjcnlwdGlvbkZhaWxlZCkge1xuICAgICAgY29uc3QgbXNnID0gJ0RFQ1JZUFRJT05fRkFJTEVEOiBQbGVhc2UgY2hlY2sgeW91ciBET1RFTlZfS0VZJ1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6ICcsIGVycm9yLmNvZGUpXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjogJywgZXJyb3IubWVzc2FnZSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59XG5cbi8vIFBvcHVsYXRlIHByb2Nlc3MuZW52IHdpdGggcGFyc2VkIHZhbHVlc1xuZnVuY3Rpb24gcG9wdWxhdGUgKHByb2Nlc3NFbnYsIHBhcnNlZCwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGRlYnVnID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMuZGVidWcpXG4gIGNvbnN0IG92ZXJyaWRlID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMub3ZlcnJpZGUpXG5cbiAgaWYgKHR5cGVvZiBwYXJzZWQgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdPQkpFQ1RfUkVRVUlSRUQ6IFBsZWFzZSBjaGVjayB0aGUgcHJvY2Vzc0VudiBhcmd1bWVudCBiZWluZyBwYXNzZWQgdG8gcG9wdWxhdGUnKVxuICB9XG5cbiAgLy8gU2V0IHByb2Nlc3MuZW52XG4gIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHBhcnNlZCkpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb2Nlc3NFbnYsIGtleSkpIHtcbiAgICAgIGlmIChvdmVycmlkZSA9PT0gdHJ1ZSkge1xuICAgICAgICBwcm9jZXNzRW52W2tleV0gPSBwYXJzZWRba2V5XVxuICAgICAgfVxuXG4gICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgaWYgKG92ZXJyaWRlID09PSB0cnVlKSB7XG4gICAgICAgICAgX2RlYnVnKGBcIiR7a2V5fVwiIGlzIGFscmVhZHkgZGVmaW5lZCBhbmQgV0FTIG92ZXJ3cml0dGVuYClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfZGVidWcoYFwiJHtrZXl9XCIgaXMgYWxyZWFkeSBkZWZpbmVkIGFuZCB3YXMgTk9UIG92ZXJ3cml0dGVuYClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzRW52W2tleV0gPSBwYXJzZWRba2V5XVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBEb3RlbnZNb2R1bGUgPSB7XG4gIGNvbmZpZ0RvdGVudixcbiAgX2NvbmZpZ1ZhdWx0LFxuICBfcGFyc2VWYXVsdCxcbiAgY29uZmlnLFxuICBkZWNyeXB0LFxuICBwYXJzZSxcbiAgcG9wdWxhdGVcbn1cblxubW9kdWxlLmV4cG9ydHMuY29uZmlnRG90ZW52ID0gRG90ZW52TW9kdWxlLmNvbmZpZ0RvdGVudlxubW9kdWxlLmV4cG9ydHMuX2NvbmZpZ1ZhdWx0ID0gRG90ZW52TW9kdWxlLl9jb25maWdWYXVsdFxubW9kdWxlLmV4cG9ydHMuX3BhcnNlVmF1bHQgPSBEb3RlbnZNb2R1bGUuX3BhcnNlVmF1bHRcbm1vZHVsZS5leHBvcnRzLmNvbmZpZyA9IERvdGVudk1vZHVsZS5jb25maWdcbm1vZHVsZS5leHBvcnRzLmRlY3J5cHQgPSBEb3RlbnZNb2R1bGUuZGVjcnlwdFxubW9kdWxlLmV4cG9ydHMucGFyc2UgPSBEb3RlbnZNb2R1bGUucGFyc2Vcbm1vZHVsZS5leHBvcnRzLnBvcHVsYXRlID0gRG90ZW52TW9kdWxlLnBvcHVsYXRlXG5cbm1vZHVsZS5leHBvcnRzID0gRG90ZW52TW9kdWxlXG4iLCIvLyAuLi9jb25maWcuanMgYWNjZXB0cyBvcHRpb25zIHZpYSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IG9wdGlvbnMgPSB7fVxuXG5pZiAocHJvY2Vzcy5lbnYuRE9URU5WX0NPTkZJR19FTkNPRElORyAhPSBudWxsKSB7XG4gIG9wdGlvbnMuZW5jb2RpbmcgPSBwcm9jZXNzLmVudi5ET1RFTlZfQ09ORklHX0VOQ09ESU5HXG59XG5cbmlmIChwcm9jZXNzLmVudi5ET1RFTlZfQ09ORklHX1BBVEggIT0gbnVsbCkge1xuICBvcHRpb25zLnBhdGggPSBwcm9jZXNzLmVudi5ET1RFTlZfQ09ORklHX1BBVEhcbn1cblxuaWYgKHByb2Nlc3MuZW52LkRPVEVOVl9DT05GSUdfREVCVUcgIT0gbnVsbCkge1xuICBvcHRpb25zLmRlYnVnID0gcHJvY2Vzcy5lbnYuRE9URU5WX0NPTkZJR19ERUJVR1xufVxuXG5pZiAocHJvY2Vzcy5lbnYuRE9URU5WX0NPTkZJR19PVkVSUklERSAhPSBudWxsKSB7XG4gIG9wdGlvbnMub3ZlcnJpZGUgPSBwcm9jZXNzLmVudi5ET1RFTlZfQ09ORklHX09WRVJSSURFXG59XG5cbm1vZHVsZS5leHBvcnRzID0gb3B0aW9uc1xuIiwiY29uc3QgcmUgPSAvXmRvdGVudl9jb25maWdfKGVuY29kaW5nfHBhdGh8ZGVidWd8b3ZlcnJpZGUpPSguKykkL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG9wdGlvbk1hdGNoZXIgKGFyZ3MpIHtcbiAgcmV0dXJuIGFyZ3MucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cikge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBjdXIubWF0Y2gocmUpXG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgIGFjY1ttYXRjaGVzWzFdXSA9IG1hdGNoZXNbMl1cbiAgICB9XG4gICAgcmV0dXJuIGFjY1xuICB9LCB7fSlcbn1cbiIsIihmdW5jdGlvbiAoKSB7XG4gIHJlcXVpcmUoJy4vbGliL21haW4nKS5jb25maWcoXG4gICAgT2JqZWN0LmFzc2lnbihcbiAgICAgIHt9LFxuICAgICAgcmVxdWlyZSgnLi9saWIvZW52LW9wdGlvbnMnKSxcbiAgICAgIHJlcXVpcmUoJy4vbGliL2NsaS1vcHRpb25zJykocHJvY2Vzcy5hcmd2KVxuICAgIClcbiAgKVxufSkoKVxuIiwiZnVuY3Rpb24gbm9vcCgpIHsgfVxuY29uc3QgaWRlbnRpdHkgPSB4ID0+IHg7XG5mdW5jdGlvbiBhc3NpZ24odGFyLCBzcmMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZm9yIChjb25zdCBrIGluIHNyYylcbiAgICAgICAgdGFyW2tdID0gc3JjW2tdO1xuICAgIHJldHVybiB0YXI7XG59XG5mdW5jdGlvbiBpc19wcm9taXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBhZGRfbG9jYXRpb24oZWxlbWVudCwgZmlsZSwgbGluZSwgY29sdW1uLCBjaGFyKSB7XG4gICAgZWxlbWVudC5fX3N2ZWx0ZV9tZXRhID0ge1xuICAgICAgICBsb2M6IHsgZmlsZSwgbGluZSwgY29sdW1uLCBjaGFyIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gcnVuKGZuKSB7XG4gICAgcmV0dXJuIGZuKCk7XG59XG5mdW5jdGlvbiBibGFua19vYmplY3QoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5mdW5jdGlvbiBydW5fYWxsKGZucykge1xuICAgIGZucy5mb3JFYWNoKHJ1bik7XG59XG5mdW5jdGlvbiBpc19mdW5jdGlvbih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBzYWZlX25vdF9lcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGIgfHwgKChhICYmIHR5cGVvZiBhID09PSAnb2JqZWN0JykgfHwgdHlwZW9mIGEgPT09ICdmdW5jdGlvbicpO1xufVxubGV0IHNyY191cmxfZXF1YWxfYW5jaG9yO1xuZnVuY3Rpb24gc3JjX3VybF9lcXVhbChlbGVtZW50X3NyYywgdXJsKSB7XG4gICAgaWYgKCFzcmNfdXJsX2VxdWFsX2FuY2hvcikge1xuICAgICAgICBzcmNfdXJsX2VxdWFsX2FuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICB9XG4gICAgc3JjX3VybF9lcXVhbF9hbmNob3IuaHJlZiA9IHVybDtcbiAgICByZXR1cm4gZWxlbWVudF9zcmMgPT09IHNyY191cmxfZXF1YWxfYW5jaG9yLmhyZWY7XG59XG5mdW5jdGlvbiBub3RfZXF1YWwoYSwgYikge1xuICAgIHJldHVybiBhICE9IGEgPyBiID09IGIgOiBhICE9PSBiO1xufVxuZnVuY3Rpb24gaXNfZW1wdHkob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfc3RvcmUoc3RvcmUsIG5hbWUpIHtcbiAgICBpZiAoc3RvcmUgIT0gbnVsbCAmJiB0eXBlb2Ygc3RvcmUuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJyR7bmFtZX0nIGlzIG5vdCBhIHN0b3JlIHdpdGggYSAnc3Vic2NyaWJlJyBtZXRob2RgKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzdWJzY3JpYmUoc3RvcmUsIC4uLmNhbGxiYWNrcykge1xuICAgIGlmIChzdG9yZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBub29wO1xuICAgIH1cbiAgICBjb25zdCB1bnN1YiA9IHN0b3JlLnN1YnNjcmliZSguLi5jYWxsYmFja3MpO1xuICAgIHJldHVybiB1bnN1Yi51bnN1YnNjcmliZSA/ICgpID0+IHVuc3ViLnVuc3Vic2NyaWJlKCkgOiB1bnN1Yjtcbn1cbmZ1bmN0aW9uIGdldF9zdG9yZV92YWx1ZShzdG9yZSkge1xuICAgIGxldCB2YWx1ZTtcbiAgICBzdWJzY3JpYmUoc3RvcmUsIF8gPT4gdmFsdWUgPSBfKSgpO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGNvbXBvbmVudF9zdWJzY3JpYmUoY29tcG9uZW50LCBzdG9yZSwgY2FsbGJhY2spIHtcbiAgICBjb21wb25lbnQuJCQub25fZGVzdHJveS5wdXNoKHN1YnNjcmliZShzdG9yZSwgY2FsbGJhY2spKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9zbG90KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pIHtcbiAgICBpZiAoZGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBzbG90X2N0eCA9IGdldF9zbG90X2NvbnRleHQoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbik7XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uWzBdKHNsb3RfY3R4KTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRfc2xvdF9jb250ZXh0KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pIHtcbiAgICByZXR1cm4gZGVmaW5pdGlvblsxXSAmJiBmblxuICAgICAgICA/IGFzc2lnbigkJHNjb3BlLmN0eC5zbGljZSgpLCBkZWZpbml0aW9uWzFdKGZuKGN0eCkpKVxuICAgICAgICA6ICQkc2NvcGUuY3R4O1xufVxuZnVuY3Rpb24gZ2V0X3Nsb3RfY2hhbmdlcyhkZWZpbml0aW9uLCAkJHNjb3BlLCBkaXJ0eSwgZm4pIHtcbiAgICBpZiAoZGVmaW5pdGlvblsyXSAmJiBmbikge1xuICAgICAgICBjb25zdCBsZXRzID0gZGVmaW5pdGlvblsyXShmbihkaXJ0eSkpO1xuICAgICAgICBpZiAoJCRzY29wZS5kaXJ0eSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbGV0cztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGxldHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGxlbiA9IE1hdGgubWF4KCQkc2NvcGUuZGlydHkubGVuZ3RoLCBsZXRzLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkW2ldID0gJCRzY29wZS5kaXJ0eVtpXSB8IGxldHNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVyZ2VkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkJHNjb3BlLmRpcnR5IHwgbGV0cztcbiAgICB9XG4gICAgcmV0dXJuICQkc2NvcGUuZGlydHk7XG59XG5mdW5jdGlvbiB1cGRhdGVfc2xvdF9iYXNlKHNsb3QsIHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBzbG90X2NoYW5nZXMsIGdldF9zbG90X2NvbnRleHRfZm4pIHtcbiAgICBpZiAoc2xvdF9jaGFuZ2VzKSB7XG4gICAgICAgIGNvbnN0IHNsb3RfY29udGV4dCA9IGdldF9zbG90X2NvbnRleHQoc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGdldF9zbG90X2NvbnRleHRfZm4pO1xuICAgICAgICBzbG90LnAoc2xvdF9jb250ZXh0LCBzbG90X2NoYW5nZXMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZV9zbG90KHNsb3QsIHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBkaXJ0eSwgZ2V0X3Nsb3RfY2hhbmdlc19mbiwgZ2V0X3Nsb3RfY29udGV4dF9mbikge1xuICAgIGNvbnN0IHNsb3RfY2hhbmdlcyA9IGdldF9zbG90X2NoYW5nZXMoc2xvdF9kZWZpbml0aW9uLCAkJHNjb3BlLCBkaXJ0eSwgZ2V0X3Nsb3RfY2hhbmdlc19mbik7XG4gICAgdXBkYXRlX3Nsb3RfYmFzZShzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgc2xvdF9jaGFuZ2VzLCBnZXRfc2xvdF9jb250ZXh0X2ZuKTtcbn1cbmZ1bmN0aW9uIGdldF9hbGxfZGlydHlfZnJvbV9zY29wZSgkJHNjb3BlKSB7XG4gICAgaWYgKCQkc2NvcGUuY3R4Lmxlbmd0aCA+IDMyKSB7XG4gICAgICAgIGNvbnN0IGRpcnR5ID0gW107XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9ICQkc2NvcGUuY3R4Lmxlbmd0aCAvIDMyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkaXJ0eVtpXSA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaXJ0eTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuZnVuY3Rpb24gZXhjbHVkZV9pbnRlcm5hbF9wcm9wcyhwcm9wcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBpbiBwcm9wcylcbiAgICAgICAgaWYgKGtbMF0gIT09ICckJylcbiAgICAgICAgICAgIHJlc3VsdFtrXSA9IHByb3BzW2tdO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjb21wdXRlX3Jlc3RfcHJvcHMocHJvcHMsIGtleXMpIHtcbiAgICBjb25zdCByZXN0ID0ge307XG4gICAga2V5cyA9IG5ldyBTZXQoa2V5cyk7XG4gICAgZm9yIChjb25zdCBrIGluIHByb3BzKVxuICAgICAgICBpZiAoIWtleXMuaGFzKGspICYmIGtbMF0gIT09ICckJylcbiAgICAgICAgICAgIHJlc3Rba10gPSBwcm9wc1trXTtcbiAgICByZXR1cm4gcmVzdDtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVfc2xvdHMoc2xvdHMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzbG90cykge1xuICAgICAgICByZXN1bHRba2V5XSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBvbmNlKGZuKSB7XG4gICAgbGV0IHJhbiA9IGZhbHNlO1xuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBpZiAocmFuKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByYW4gPSB0cnVlO1xuICAgICAgICBmbi5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuICAgIH07XG59XG5mdW5jdGlvbiBudWxsX3RvX2VtcHR5KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xufVxuZnVuY3Rpb24gc2V0X3N0b3JlX3ZhbHVlKHN0b3JlLCByZXQsIHZhbHVlKSB7XG4gICAgc3RvcmUuc2V0KHZhbHVlKTtcbiAgICByZXR1cm4gcmV0O1xufVxuY29uc3QgaGFzX3Byb3AgPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbmZ1bmN0aW9uIGFjdGlvbl9kZXN0cm95ZXIoYWN0aW9uX3Jlc3VsdCkge1xuICAgIHJldHVybiBhY3Rpb25fcmVzdWx0ICYmIGlzX2Z1bmN0aW9uKGFjdGlvbl9yZXN1bHQuZGVzdHJveSkgPyBhY3Rpb25fcmVzdWx0LmRlc3Ryb3kgOiBub29wO1xufVxuXG5jb25zdCBpc19jbGllbnQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbmxldCBub3cgPSBpc19jbGllbnRcbiAgICA/ICgpID0+IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKVxuICAgIDogKCkgPT4gRGF0ZS5ub3coKTtcbmxldCByYWYgPSBpc19jbGllbnQgPyBjYiA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpIDogbm9vcDtcbi8vIHVzZWQgaW50ZXJuYWxseSBmb3IgdGVzdGluZ1xuZnVuY3Rpb24gc2V0X25vdyhmbikge1xuICAgIG5vdyA9IGZuO1xufVxuZnVuY3Rpb24gc2V0X3JhZihmbikge1xuICAgIHJhZiA9IGZuO1xufVxuXG5jb25zdCB0YXNrcyA9IG5ldyBTZXQoKTtcbmZ1bmN0aW9uIHJ1bl90YXNrcyhub3cpIHtcbiAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICBpZiAoIXRhc2suYyhub3cpKSB7XG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzayk7XG4gICAgICAgICAgICB0YXNrLmYoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0YXNrcy5zaXplICE9PSAwKVxuICAgICAgICByYWYocnVuX3Rhc2tzKTtcbn1cbi8qKlxuICogRm9yIHRlc3RpbmcgcHVycG9zZXMgb25seSFcbiAqL1xuZnVuY3Rpb24gY2xlYXJfbG9vcHMoKSB7XG4gICAgdGFza3MuY2xlYXIoKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0YXNrIHRoYXQgcnVucyBvbiBlYWNoIHJhZiBmcmFtZVxuICogdW50aWwgaXQgcmV0dXJucyBhIGZhbHN5IHZhbHVlIG9yIGlzIGFib3J0ZWRcbiAqL1xuZnVuY3Rpb24gbG9vcChjYWxsYmFjaykge1xuICAgIGxldCB0YXNrO1xuICAgIGlmICh0YXNrcy5zaXplID09PSAwKVxuICAgICAgICByYWYocnVuX3Rhc2tzKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9taXNlOiBuZXcgUHJvbWlzZShmdWxmaWxsID0+IHtcbiAgICAgICAgICAgIHRhc2tzLmFkZCh0YXNrID0geyBjOiBjYWxsYmFjaywgZjogZnVsZmlsbCB9KTtcbiAgICAgICAgfSksXG4gICAgICAgIGFib3J0KCkge1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKHRhc2spO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuLy8gVHJhY2sgd2hpY2ggbm9kZXMgYXJlIGNsYWltZWQgZHVyaW5nIGh5ZHJhdGlvbi4gVW5jbGFpbWVkIG5vZGVzIGNhbiB0aGVuIGJlIHJlbW92ZWQgZnJvbSB0aGUgRE9NXG4vLyBhdCB0aGUgZW5kIG9mIGh5ZHJhdGlvbiB3aXRob3V0IHRvdWNoaW5nIHRoZSByZW1haW5pbmcgbm9kZXMuXG5sZXQgaXNfaHlkcmF0aW5nID0gZmFsc2U7XG5mdW5jdGlvbiBzdGFydF9oeWRyYXRpbmcoKSB7XG4gICAgaXNfaHlkcmF0aW5nID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGVuZF9oeWRyYXRpbmcoKSB7XG4gICAgaXNfaHlkcmF0aW5nID0gZmFsc2U7XG59XG5mdW5jdGlvbiB1cHBlcl9ib3VuZChsb3csIGhpZ2gsIGtleSwgdmFsdWUpIHtcbiAgICAvLyBSZXR1cm4gZmlyc3QgaW5kZXggb2YgdmFsdWUgbGFyZ2VyIHRoYW4gaW5wdXQgdmFsdWUgaW4gdGhlIHJhbmdlIFtsb3csIGhpZ2gpXG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgICAgY29uc3QgbWlkID0gbG93ICsgKChoaWdoIC0gbG93KSA+PiAxKTtcbiAgICAgICAgaWYgKGtleShtaWQpIDw9IHZhbHVlKSB7XG4gICAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG93O1xufVxuZnVuY3Rpb24gaW5pdF9oeWRyYXRlKHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQuaHlkcmF0ZV9pbml0KVxuICAgICAgICByZXR1cm47XG4gICAgdGFyZ2V0Lmh5ZHJhdGVfaW5pdCA9IHRydWU7XG4gICAgLy8gV2Uga25vdyB0aGF0IGFsbCBjaGlsZHJlbiBoYXZlIGNsYWltX29yZGVyIHZhbHVlcyBzaW5jZSB0aGUgdW5jbGFpbWVkIGhhdmUgYmVlbiBkZXRhY2hlZCBpZiB0YXJnZXQgaXMgbm90IDxoZWFkPlxuICAgIGxldCBjaGlsZHJlbiA9IHRhcmdldC5jaGlsZE5vZGVzO1xuICAgIC8vIElmIHRhcmdldCBpcyA8aGVhZD4sIHRoZXJlIG1heSBiZSBjaGlsZHJlbiB3aXRob3V0IGNsYWltX29yZGVyXG4gICAgaWYgKHRhcmdldC5ub2RlTmFtZSA9PT0gJ0hFQUQnKSB7XG4gICAgICAgIGNvbnN0IG15Q2hpbGRyZW4gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKG5vZGUuY2xhaW1fb3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG15Q2hpbGRyZW4ucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGlsZHJlbiA9IG15Q2hpbGRyZW47XG4gICAgfVxuICAgIC8qXG4gICAgKiBSZW9yZGVyIGNsYWltZWQgY2hpbGRyZW4gb3B0aW1hbGx5LlxuICAgICogV2UgY2FuIHJlb3JkZXIgY2xhaW1lZCBjaGlsZHJlbiBvcHRpbWFsbHkgYnkgZmluZGluZyB0aGUgbG9uZ2VzdCBzdWJzZXF1ZW5jZSBvZlxuICAgICogbm9kZXMgdGhhdCBhcmUgYWxyZWFkeSBjbGFpbWVkIGluIG9yZGVyIGFuZCBvbmx5IG1vdmluZyB0aGUgcmVzdC4gVGhlIGxvbmdlc3RcbiAgICAqIHN1YnNlcXVlbmNlIHN1YnNlcXVlbmNlIG9mIG5vZGVzIHRoYXQgYXJlIGNsYWltZWQgaW4gb3JkZXIgY2FuIGJlIGZvdW5kIGJ5XG4gICAgKiBjb21wdXRpbmcgdGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiAuY2xhaW1fb3JkZXIgdmFsdWVzLlxuICAgICpcbiAgICAqIFRoaXMgYWxnb3JpdGhtIGlzIG9wdGltYWwgaW4gZ2VuZXJhdGluZyB0aGUgbGVhc3QgYW1vdW50IG9mIHJlb3JkZXIgb3BlcmF0aW9uc1xuICAgICogcG9zc2libGUuXG4gICAgKlxuICAgICogUHJvb2Y6XG4gICAgKiBXZSBrbm93IHRoYXQsIGdpdmVuIGEgc2V0IG9mIHJlb3JkZXJpbmcgb3BlcmF0aW9ucywgdGhlIG5vZGVzIHRoYXQgZG8gbm90IG1vdmVcbiAgICAqIGFsd2F5cyBmb3JtIGFuIGluY3JlYXNpbmcgc3Vic2VxdWVuY2UsIHNpbmNlIHRoZXkgZG8gbm90IG1vdmUgYW1vbmcgZWFjaCBvdGhlclxuICAgICogbWVhbmluZyB0aGF0IHRoZXkgbXVzdCBiZSBhbHJlYWR5IG9yZGVyZWQgYW1vbmcgZWFjaCBvdGhlci4gVGh1cywgdGhlIG1heGltYWxcbiAgICAqIHNldCBvZiBub2RlcyB0aGF0IGRvIG5vdCBtb3ZlIGZvcm0gYSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2UuXG4gICAgKi9cbiAgICAvLyBDb21wdXRlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZVxuICAgIC8vIG06IHN1YnNlcXVlbmNlIGxlbmd0aCBqID0+IGluZGV4IGsgb2Ygc21hbGxlc3QgdmFsdWUgdGhhdCBlbmRzIGFuIGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2YgbGVuZ3RoIGpcbiAgICBjb25zdCBtID0gbmV3IEludDMyQXJyYXkoY2hpbGRyZW4ubGVuZ3RoICsgMSk7XG4gICAgLy8gUHJlZGVjZXNzb3IgaW5kaWNlcyArIDFcbiAgICBjb25zdCBwID0gbmV3IEludDMyQXJyYXkoY2hpbGRyZW4ubGVuZ3RoKTtcbiAgICBtWzBdID0gLTE7XG4gICAgbGV0IGxvbmdlc3QgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IGNoaWxkcmVuW2ldLmNsYWltX29yZGVyO1xuICAgICAgICAvLyBGaW5kIHRoZSBsYXJnZXN0IHN1YnNlcXVlbmNlIGxlbmd0aCBzdWNoIHRoYXQgaXQgZW5kcyBpbiBhIHZhbHVlIGxlc3MgdGhhbiBvdXIgY3VycmVudCB2YWx1ZVxuICAgICAgICAvLyB1cHBlcl9ib3VuZCByZXR1cm5zIGZpcnN0IGdyZWF0ZXIgdmFsdWUsIHNvIHdlIHN1YnRyYWN0IG9uZVxuICAgICAgICAvLyB3aXRoIGZhc3QgcGF0aCBmb3Igd2hlbiB3ZSBhcmUgb24gdGhlIGN1cnJlbnQgbG9uZ2VzdCBzdWJzZXF1ZW5jZVxuICAgICAgICBjb25zdCBzZXFMZW4gPSAoKGxvbmdlc3QgPiAwICYmIGNoaWxkcmVuW21bbG9uZ2VzdF1dLmNsYWltX29yZGVyIDw9IGN1cnJlbnQpID8gbG9uZ2VzdCArIDEgOiB1cHBlcl9ib3VuZCgxLCBsb25nZXN0LCBpZHggPT4gY2hpbGRyZW5bbVtpZHhdXS5jbGFpbV9vcmRlciwgY3VycmVudCkpIC0gMTtcbiAgICAgICAgcFtpXSA9IG1bc2VxTGVuXSArIDE7XG4gICAgICAgIGNvbnN0IG5ld0xlbiA9IHNlcUxlbiArIDE7XG4gICAgICAgIC8vIFdlIGNhbiBndWFyYW50ZWUgdGhhdCBjdXJyZW50IGlzIHRoZSBzbWFsbGVzdCB2YWx1ZS4gT3RoZXJ3aXNlLCB3ZSB3b3VsZCBoYXZlIGdlbmVyYXRlZCBhIGxvbmdlciBzZXF1ZW5jZS5cbiAgICAgICAgbVtuZXdMZW5dID0gaTtcbiAgICAgICAgbG9uZ2VzdCA9IE1hdGgubWF4KG5ld0xlbiwgbG9uZ2VzdCk7XG4gICAgfVxuICAgIC8vIFRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2Ygbm9kZXMgKGluaXRpYWxseSByZXZlcnNlZClcbiAgICBjb25zdCBsaXMgPSBbXTtcbiAgICAvLyBUaGUgcmVzdCBvZiB0aGUgbm9kZXMsIG5vZGVzIHRoYXQgd2lsbCBiZSBtb3ZlZFxuICAgIGNvbnN0IHRvTW92ZSA9IFtdO1xuICAgIGxldCBsYXN0ID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICBmb3IgKGxldCBjdXIgPSBtW2xvbmdlc3RdICsgMTsgY3VyICE9IDA7IGN1ciA9IHBbY3VyIC0gMV0pIHtcbiAgICAgICAgbGlzLnB1c2goY2hpbGRyZW5bY3VyIC0gMV0pO1xuICAgICAgICBmb3IgKDsgbGFzdCA+PSBjdXI7IGxhc3QtLSkge1xuICAgICAgICAgICAgdG9Nb3ZlLnB1c2goY2hpbGRyZW5bbGFzdF0pO1xuICAgICAgICB9XG4gICAgICAgIGxhc3QtLTtcbiAgICB9XG4gICAgZm9yICg7IGxhc3QgPj0gMDsgbGFzdC0tKSB7XG4gICAgICAgIHRvTW92ZS5wdXNoKGNoaWxkcmVuW2xhc3RdKTtcbiAgICB9XG4gICAgbGlzLnJldmVyc2UoKTtcbiAgICAvLyBXZSBzb3J0IHRoZSBub2RlcyBiZWluZyBtb3ZlZCB0byBndWFyYW50ZWUgdGhhdCB0aGVpciBpbnNlcnRpb24gb3JkZXIgbWF0Y2hlcyB0aGUgY2xhaW0gb3JkZXJcbiAgICB0b01vdmUuc29ydCgoYSwgYikgPT4gYS5jbGFpbV9vcmRlciAtIGIuY2xhaW1fb3JkZXIpO1xuICAgIC8vIEZpbmFsbHksIHdlIG1vdmUgdGhlIG5vZGVzXG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgdG9Nb3ZlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHdoaWxlIChqIDwgbGlzLmxlbmd0aCAmJiB0b01vdmVbaV0uY2xhaW1fb3JkZXIgPj0gbGlzW2pdLmNsYWltX29yZGVyKSB7XG4gICAgICAgICAgICBqKys7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYW5jaG9yID0gaiA8IGxpcy5sZW5ndGggPyBsaXNbal0gOiBudWxsO1xuICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKHRvTW92ZVtpXSwgYW5jaG9yKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhcHBlbmQodGFyZ2V0LCBub2RlKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKG5vZGUpO1xufVxuZnVuY3Rpb24gYXBwZW5kX3N0eWxlcyh0YXJnZXQsIHN0eWxlX3NoZWV0X2lkLCBzdHlsZXMpIHtcbiAgICBjb25zdCBhcHBlbmRfc3R5bGVzX3RvID0gZ2V0X3Jvb3RfZm9yX3N0eWxlKHRhcmdldCk7XG4gICAgaWYgKCFhcHBlbmRfc3R5bGVzX3RvLmdldEVsZW1lbnRCeUlkKHN0eWxlX3NoZWV0X2lkKSkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIHN0eWxlLmlkID0gc3R5bGVfc2hlZXRfaWQ7XG4gICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gc3R5bGVzO1xuICAgICAgICBhcHBlbmRfc3R5bGVzaGVldChhcHBlbmRfc3R5bGVzX3RvLCBzdHlsZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0X3Jvb3RfZm9yX3N0eWxlKG5vZGUpIHtcbiAgICBpZiAoIW5vZGUpXG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICBjb25zdCByb290ID0gbm9kZS5nZXRSb290Tm9kZSA/IG5vZGUuZ2V0Um9vdE5vZGUoKSA6IG5vZGUub3duZXJEb2N1bWVudDtcbiAgICBpZiAocm9vdCAmJiByb290Lmhvc3QpIHtcbiAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxuICAgIHJldHVybiBub2RlLm93bmVyRG9jdW1lbnQ7XG59XG5mdW5jdGlvbiBhcHBlbmRfZW1wdHlfc3R5bGVzaGVldChub2RlKSB7XG4gICAgY29uc3Qgc3R5bGVfZWxlbWVudCA9IGVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgYXBwZW5kX3N0eWxlc2hlZXQoZ2V0X3Jvb3RfZm9yX3N0eWxlKG5vZGUpLCBzdHlsZV9lbGVtZW50KTtcbiAgICByZXR1cm4gc3R5bGVfZWxlbWVudC5zaGVldDtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9zdHlsZXNoZWV0KG5vZGUsIHN0eWxlKSB7XG4gICAgYXBwZW5kKG5vZGUuaGVhZCB8fCBub2RlLCBzdHlsZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSkge1xuICAgIGlmIChpc19oeWRyYXRpbmcpIHtcbiAgICAgICAgaW5pdF9oeWRyYXRlKHRhcmdldCk7XG4gICAgICAgIGlmICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPT09IHVuZGVmaW5lZCkgfHwgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCAhPT0gbnVsbCkgJiYgKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLnBhcmVudEVsZW1lbnQgIT09IHRhcmdldCkpKSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IHRhcmdldC5maXJzdENoaWxkO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNraXAgbm9kZXMgb2YgdW5kZWZpbmVkIG9yZGVyaW5nXG4gICAgICAgIHdoaWxlICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgIT09IG51bGwpICYmICh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5jbGFpbV9vcmRlciA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZSAhPT0gdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQpIHtcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgaW5zZXJ0IGlmIHRoZSBvcmRlcmluZyBvZiB0aGlzIG5vZGUgc2hvdWxkIGJlIG1vZGlmaWVkIG9yIHRoZSBwYXJlbnQgbm9kZSBpcyBub3QgdGFyZ2V0XG4gICAgICAgICAgICBpZiAobm9kZS5jbGFpbV9vcmRlciAhPT0gdW5kZWZpbmVkIHx8IG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQgfHwgbm9kZS5uZXh0U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaW5zZXJ0KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCBhbmNob3IgfHwgbnVsbCk7XG59XG5mdW5jdGlvbiBpbnNlcnRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgaWYgKGlzX2h5ZHJhdGluZyAmJiAhYW5jaG9yKSB7XG4gICAgICAgIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQgfHwgbm9kZS5uZXh0U2libGluZyAhPSBhbmNob3IpIHtcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCBhbmNob3IgfHwgbnVsbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoKG5vZGUpIHtcbiAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG59XG5mdW5jdGlvbiBkZXN0cm95X2VhY2goaXRlcmF0aW9ucywgZGV0YWNoaW5nKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChpdGVyYXRpb25zW2ldKVxuICAgICAgICAgICAgaXRlcmF0aW9uc1tpXS5kKGRldGFjaGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG59XG5mdW5jdGlvbiBlbGVtZW50X2lzKG5hbWUsIGlzKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSwgeyBpcyB9KTtcbn1cbmZ1bmN0aW9uIG9iamVjdF93aXRob3V0X3Byb3BlcnRpZXMob2JqLCBleGNsdWRlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgICAgICBpZiAoaGFzX3Byb3Aob2JqLCBrKVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgJiYgZXhjbHVkZS5pbmRleE9mKGspID09PSAtMSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGFyZ2V0W2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBzdmdfZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBuYW1lKTtcbn1cbmZ1bmN0aW9uIHRleHQoZGF0YSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkYXRhKTtcbn1cbmZ1bmN0aW9uIHNwYWNlKCkge1xuICAgIHJldHVybiB0ZXh0KCcgJyk7XG59XG5mdW5jdGlvbiBlbXB0eSgpIHtcbiAgICByZXR1cm4gdGV4dCgnJyk7XG59XG5mdW5jdGlvbiBsaXN0ZW4obm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiAoKSA9PiBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcHJldmVudF9kZWZhdWx0KGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc3RvcF9wcm9wYWdhdGlvbihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBzZWxmKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMpXG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJ1c3RlZChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoZXZlbnQuaXNUcnVzdGVkKVxuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgIGVsc2UgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkgIT09IHZhbHVlKVxuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldF9hdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgZGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhub2RlLl9fcHJvdG9fXyk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBpZiAoYXR0cmlidXRlc1trZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICBub2RlLnN0eWxlLmNzc1RleHQgPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnX192YWx1ZScpIHtcbiAgICAgICAgICAgIG5vZGUudmFsdWUgPSBub2RlW2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVzY3JpcHRvcnNba2V5XSAmJiBkZXNjcmlwdG9yc1trZXldLnNldCkge1xuICAgICAgICAgICAgbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3ZnX2F0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X2N1c3RvbV9lbGVtZW50X2RhdGEobm9kZSwgcHJvcCwgdmFsdWUpIHtcbiAgICBpZiAocHJvcCBpbiBub2RlKSB7XG4gICAgICAgIG5vZGVbcHJvcF0gPSB0eXBlb2Ygbm9kZVtwcm9wXSA9PT0gJ2Jvb2xlYW4nICYmIHZhbHVlID09PSAnJyA/IHRydWUgOiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGF0dHIobm9kZSwgcHJvcCwgdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHhsaW5rX2F0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIG5vZGUuc2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBhdHRyaWJ1dGUsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGdldF9iaW5kaW5nX2dyb3VwX3ZhbHVlKGdyb3VwLCBfX3ZhbHVlLCBjaGVja2VkKSB7XG4gICAgY29uc3QgdmFsdWUgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoZ3JvdXBbaV0uY2hlY2tlZClcbiAgICAgICAgICAgIHZhbHVlLmFkZChncm91cFtpXS5fX3ZhbHVlKTtcbiAgICB9XG4gICAgaWYgKCFjaGVja2VkKSB7XG4gICAgICAgIHZhbHVlLmRlbGV0ZShfX3ZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIEFycmF5LmZyb20odmFsdWUpO1xufVxuZnVuY3Rpb24gdG9fbnVtYmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAnJyA/IG51bGwgOiArdmFsdWU7XG59XG5mdW5jdGlvbiB0aW1lX3Jhbmdlc190b19hcnJheShyYW5nZXMpIHtcbiAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGFycmF5LnB1c2goeyBzdGFydDogcmFuZ2VzLnN0YXJ0KGkpLCBlbmQ6IHJhbmdlcy5lbmQoaSkgfSk7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbn1cbmZ1bmN0aW9uIGNoaWxkcmVuKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50LmNoaWxkTm9kZXMpO1xufVxuZnVuY3Rpb24gaW5pdF9jbGFpbV9pbmZvKG5vZGVzKSB7XG4gICAgaWYgKG5vZGVzLmNsYWltX2luZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBub2Rlcy5jbGFpbV9pbmZvID0geyBsYXN0X2luZGV4OiAwLCB0b3RhbF9jbGFpbWVkOiAwIH07XG4gICAgfVxufVxuZnVuY3Rpb24gY2xhaW1fbm9kZShub2RlcywgcHJlZGljYXRlLCBwcm9jZXNzTm9kZSwgY3JlYXRlTm9kZSwgZG9udFVwZGF0ZUxhc3RJbmRleCA9IGZhbHNlKSB7XG4gICAgLy8gVHJ5IHRvIGZpbmQgbm9kZXMgaW4gYW4gb3JkZXIgc3VjaCB0aGF0IHdlIGxlbmd0aGVuIHRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2VcbiAgICBpbml0X2NsYWltX2luZm8obm9kZXMpO1xuICAgIGNvbnN0IHJlc3VsdE5vZGUgPSAoKCkgPT4ge1xuICAgICAgICAvLyBXZSBmaXJzdCB0cnkgdG8gZmluZCBhbiBlbGVtZW50IGFmdGVyIHRoZSBwcmV2aW91cyBvbmVcbiAgICAgICAgZm9yIChsZXQgaSA9IG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBwcm9jZXNzTm9kZShub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1tpXSA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRVcGRhdGVMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0cnkgdG8gZmluZCBvbmUgYmVmb3JlXG4gICAgICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBzbyB0aGF0IHdlIGRvbid0IGdvIHRvbyBmYXIgYmFja1xuICAgICAgICBmb3IgKGxldCBpID0gbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4IC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHByb2Nlc3NOb2RlKG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzW2ldID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZG9udFVwZGF0ZUxhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHdlIHNwbGljZWQgYmVmb3JlIHRoZSBsYXN0X2luZGV4LCB3ZSBkZWNyZWFzZSBpdFxuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXgtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgZmluZCBhbnkgbWF0Y2hpbmcgbm9kZSwgd2UgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICByZXR1cm4gY3JlYXRlTm9kZSgpO1xuICAgIH0pKCk7XG4gICAgcmVzdWx0Tm9kZS5jbGFpbV9vcmRlciA9IG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZDtcbiAgICBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQgKz0gMTtcbiAgICByZXR1cm4gcmVzdWx0Tm9kZTtcbn1cbmZ1bmN0aW9uIGNsYWltX2VsZW1lbnRfYmFzZShub2RlcywgbmFtZSwgYXR0cmlidXRlcywgY3JlYXRlX2VsZW1lbnQpIHtcbiAgICByZXR1cm4gY2xhaW1fbm9kZShub2RlcywgKG5vZGUpID0+IG5vZGUubm9kZU5hbWUgPT09IG5hbWUsIChub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG5vZGUuYXR0cmlidXRlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlID0gbm9kZS5hdHRyaWJ1dGVzW2pdO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZS5wdXNoKGF0dHJpYnV0ZS5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZW1vdmUuZm9yRWFjaCh2ID0+IG5vZGUucmVtb3ZlQXR0cmlidXRlKHYpKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LCAoKSA9PiBjcmVhdGVfZWxlbWVudChuYW1lKSk7XG59XG5mdW5jdGlvbiBjbGFpbV9lbGVtZW50KG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIGNsYWltX2VsZW1lbnRfYmFzZShub2RlcywgbmFtZSwgYXR0cmlidXRlcywgZWxlbWVudCk7XG59XG5mdW5jdGlvbiBjbGFpbV9zdmdfZWxlbWVudChub2RlcywgbmFtZSwgYXR0cmlidXRlcykge1xuICAgIHJldHVybiBjbGFpbV9lbGVtZW50X2Jhc2Uobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIHN2Z19lbGVtZW50KTtcbn1cbmZ1bmN0aW9uIGNsYWltX3RleHQobm9kZXMsIGRhdGEpIHtcbiAgICByZXR1cm4gY2xhaW1fbm9kZShub2RlcywgKG5vZGUpID0+IG5vZGUubm9kZVR5cGUgPT09IDMsIChub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGFTdHIgPSAnJyArIGRhdGE7XG4gICAgICAgIGlmIChub2RlLmRhdGEuc3RhcnRzV2l0aChkYXRhU3RyKSkge1xuICAgICAgICAgICAgaWYgKG5vZGUuZGF0YS5sZW5ndGggIT09IGRhdGFTdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuc3BsaXRUZXh0KGRhdGFTdHIubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IGRhdGFTdHI7XG4gICAgICAgIH1cbiAgICB9LCAoKSA9PiB0ZXh0KGRhdGEpLCB0cnVlIC8vIFRleHQgbm9kZXMgc2hvdWxkIG5vdCB1cGRhdGUgbGFzdCBpbmRleCBzaW5jZSBpdCBpcyBsaWtlbHkgbm90IHdvcnRoIGl0IHRvIGVsaW1pbmF0ZSBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIGFjdHVhbCBlbGVtZW50c1xuICAgICk7XG59XG5mdW5jdGlvbiBjbGFpbV9zcGFjZShub2Rlcykge1xuICAgIHJldHVybiBjbGFpbV90ZXh0KG5vZGVzLCAnICcpO1xufVxuZnVuY3Rpb24gZmluZF9jb21tZW50KG5vZGVzLCB0ZXh0LCBzdGFydCkge1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IG5vZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDggLyogY29tbWVudCBub2RlICovICYmIG5vZGUudGV4dENvbnRlbnQudHJpbSgpID09PSB0ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZXMubGVuZ3RoO1xufVxuZnVuY3Rpb24gY2xhaW1faHRtbF90YWcobm9kZXMsIGlzX3N2Zykge1xuICAgIC8vIGZpbmQgaHRtbCBvcGVuaW5nIHRhZ1xuICAgIGNvbnN0IHN0YXJ0X2luZGV4ID0gZmluZF9jb21tZW50KG5vZGVzLCAnSFRNTF9UQUdfU1RBUlQnLCAwKTtcbiAgICBjb25zdCBlbmRfaW5kZXggPSBmaW5kX2NvbW1lbnQobm9kZXMsICdIVE1MX1RBR19FTkQnLCBzdGFydF9pbmRleCk7XG4gICAgaWYgKHN0YXJ0X2luZGV4ID09PSBlbmRfaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sVGFnSHlkcmF0aW9uKHVuZGVmaW5lZCwgaXNfc3ZnKTtcbiAgICB9XG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCBodG1sX3RhZ19ub2RlcyA9IG5vZGVzLnNwbGljZShzdGFydF9pbmRleCwgZW5kX2luZGV4IC0gc3RhcnRfaW5kZXggKyAxKTtcbiAgICBkZXRhY2goaHRtbF90YWdfbm9kZXNbMF0pO1xuICAgIGRldGFjaChodG1sX3RhZ19ub2Rlc1todG1sX3RhZ19ub2Rlcy5sZW5ndGggLSAxXSk7XG4gICAgY29uc3QgY2xhaW1lZF9ub2RlcyA9IGh0bWxfdGFnX25vZGVzLnNsaWNlKDEsIGh0bWxfdGFnX25vZGVzLmxlbmd0aCAtIDEpO1xuICAgIGZvciAoY29uc3QgbiBvZiBjbGFpbWVkX25vZGVzKSB7XG4gICAgICAgIG4uY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgICAgIG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZCArPSAxO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24oY2xhaW1lZF9ub2RlcywgaXNfc3ZnKTtcbn1cbmZ1bmN0aW9uIHNldF9kYXRhKHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0Lndob2xlVGV4dCAhPT0gZGF0YSlcbiAgICAgICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF92YWx1ZShpbnB1dCwgdmFsdWUpIHtcbiAgICBpbnB1dC52YWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xufVxuZnVuY3Rpb24gc2V0X2lucHV0X3R5cGUoaW5wdXQsIHR5cGUpIHtcbiAgICB0cnkge1xuICAgICAgICBpbnB1dC50eXBlID0gdHlwZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9zdHlsZShub2RlLCBrZXksIHZhbHVlLCBpbXBvcnRhbnQpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShrZXkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbm9kZS5zdHlsZS5zZXRQcm9wZXJ0eShrZXksIHZhbHVlLCBpbXBvcnRhbnQgPyAnaW1wb3J0YW50JyA6ICcnKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9uKHNlbGVjdCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdC5vcHRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5vcHRpb25zW2ldO1xuICAgICAgICBpZiAob3B0aW9uLl9fdmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbGVjdC5zZWxlY3RlZEluZGV4ID0gLTE7IC8vIG5vIG9wdGlvbiBzaG91bGQgYmUgc2VsZWN0ZWRcbn1cbmZ1bmN0aW9uIHNlbGVjdF9vcHRpb25zKHNlbGVjdCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdC5vcHRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5vcHRpb25zW2ldO1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB+dmFsdWUuaW5kZXhPZihvcHRpb24uX192YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2VsZWN0X3ZhbHVlKHNlbGVjdCkge1xuICAgIGNvbnN0IHNlbGVjdGVkX29wdGlvbiA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKCc6Y2hlY2tlZCcpIHx8IHNlbGVjdC5vcHRpb25zWzBdO1xuICAgIHJldHVybiBzZWxlY3RlZF9vcHRpb24gJiYgc2VsZWN0ZWRfb3B0aW9uLl9fdmFsdWU7XG59XG5mdW5jdGlvbiBzZWxlY3RfbXVsdGlwbGVfdmFsdWUoc2VsZWN0KSB7XG4gICAgcmV0dXJuIFtdLm1hcC5jYWxsKHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKCc6Y2hlY2tlZCcpLCBvcHRpb24gPT4gb3B0aW9uLl9fdmFsdWUpO1xufVxuLy8gdW5mb3J0dW5hdGVseSB0aGlzIGNhbid0IGJlIGEgY29uc3RhbnQgYXMgdGhhdCB3b3VsZG4ndCBiZSB0cmVlLXNoYWtlYWJsZVxuLy8gc28gd2UgY2FjaGUgdGhlIHJlc3VsdCBpbnN0ZWFkXG5sZXQgY3Jvc3NvcmlnaW47XG5mdW5jdGlvbiBpc19jcm9zc29yaWdpbigpIHtcbiAgICBpZiAoY3Jvc3NvcmlnaW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjcm9zc29yaWdpbiA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB2b2lkIHdpbmRvdy5wYXJlbnQuZG9jdW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjcm9zc29yaWdpbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNyb3Nzb3JpZ2luO1xufVxuZnVuY3Rpb24gYWRkX3Jlc2l6ZV9saXN0ZW5lcihub2RlLCBmbikge1xuICAgIGNvbnN0IGNvbXB1dGVkX3N0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICBpZiAoY29tcHV0ZWRfc3R5bGUucG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIH1cbiAgICBjb25zdCBpZnJhbWUgPSBlbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7ICcgK1xuICAgICAgICAnb3ZlcmZsb3c6IGhpZGRlbjsgYm9yZGVyOiAwOyBvcGFjaXR5OiAwOyBwb2ludGVyLWV2ZW50czogbm9uZTsgei1pbmRleDogLTE7Jyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIGlmcmFtZS50YWJJbmRleCA9IC0xO1xuICAgIGNvbnN0IGNyb3Nzb3JpZ2luID0gaXNfY3Jvc3NvcmlnaW4oKTtcbiAgICBsZXQgdW5zdWJzY3JpYmU7XG4gICAgaWYgKGNyb3Nzb3JpZ2luKSB7XG4gICAgICAgIGlmcmFtZS5zcmMgPSBcImRhdGE6dGV4dC9odG1sLDxzY3JpcHQ+b25yZXNpemU9ZnVuY3Rpb24oKXtwYXJlbnQucG9zdE1lc3NhZ2UoMCwnKicpfTwvc2NyaXB0PlwiO1xuICAgICAgICB1bnN1YnNjcmliZSA9IGxpc3Rlbih3aW5kb3csICdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBpZnJhbWUuY29udGVudFdpbmRvdylcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmcmFtZS5zcmMgPSAnYWJvdXQ6YmxhbmsnO1xuICAgICAgICBpZnJhbWUub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSBsaXN0ZW4oaWZyYW1lLmNvbnRlbnRXaW5kb3csICdyZXNpemUnLCBmbik7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGFwcGVuZChub2RlLCBpZnJhbWUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChjcm9zc29yaWdpbikge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1bnN1YnNjcmliZSAmJiBpZnJhbWUuY29udGVudFdpbmRvdykge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBkZXRhY2goaWZyYW1lKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdG9nZ2xlX2NsYXNzKGVsZW1lbnQsIG5hbWUsIHRvZ2dsZSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0W3RvZ2dsZSA/ICdhZGQnIDogJ3JlbW92ZSddKG5hbWUpO1xufVxuZnVuY3Rpb24gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCwgeyBidWJibGVzID0gZmFsc2UsIGNhbmNlbGFibGUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBjb25zdCBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgYnViYmxlcywgY2FuY2VsYWJsZSwgZGV0YWlsKTtcbiAgICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIHF1ZXJ5X3NlbGVjdG9yX2FsbChzZWxlY3RvciwgcGFyZW50ID0gZG9jdW1lbnQuYm9keSkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG59XG5jbGFzcyBIdG1sVGFnIHtcbiAgICBjb25zdHJ1Y3Rvcihpc19zdmcgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmlzX3N2ZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzX3N2ZyA9IGlzX3N2ZztcbiAgICAgICAgdGhpcy5lID0gdGhpcy5uID0gbnVsbDtcbiAgICB9XG4gICAgYyhodG1sKSB7XG4gICAgICAgIHRoaXMuaChodG1sKTtcbiAgICB9XG4gICAgbShodG1sLCB0YXJnZXQsIGFuY2hvciA9IG51bGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzX3N2ZylcbiAgICAgICAgICAgICAgICB0aGlzLmUgPSBzdmdfZWxlbWVudCh0YXJnZXQubm9kZU5hbWUpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuZSA9IGVsZW1lbnQodGFyZ2V0Lm5vZGVOYW1lKTtcbiAgICAgICAgICAgIHRoaXMudCA9IHRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuYyhodG1sKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmkoYW5jaG9yKTtcbiAgICB9XG4gICAgaChodG1sKSB7XG4gICAgICAgIHRoaXMuZS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICB0aGlzLm4gPSBBcnJheS5mcm9tKHRoaXMuZS5jaGlsZE5vZGVzKTtcbiAgICB9XG4gICAgaShhbmNob3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGluc2VydCh0aGlzLnQsIHRoaXMubltpXSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwKGh0bWwpIHtcbiAgICAgICAgdGhpcy5kKCk7XG4gICAgICAgIHRoaXMuaChodG1sKTtcbiAgICAgICAgdGhpcy5pKHRoaXMuYSk7XG4gICAgfVxuICAgIGQoKSB7XG4gICAgICAgIHRoaXMubi5mb3JFYWNoKGRldGFjaCk7XG4gICAgfVxufVxuY2xhc3MgSHRtbFRhZ0h5ZHJhdGlvbiBleHRlbmRzIEh0bWxUYWcge1xuICAgIGNvbnN0cnVjdG9yKGNsYWltZWRfbm9kZXMsIGlzX3N2ZyA9IGZhbHNlKSB7XG4gICAgICAgIHN1cGVyKGlzX3N2Zyk7XG4gICAgICAgIHRoaXMuZSA9IHRoaXMubiA9IG51bGw7XG4gICAgICAgIHRoaXMubCA9IGNsYWltZWRfbm9kZXM7XG4gICAgfVxuICAgIGMoaHRtbCkge1xuICAgICAgICBpZiAodGhpcy5sKSB7XG4gICAgICAgICAgICB0aGlzLm4gPSB0aGlzLmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXBlci5jKGh0bWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGkoYW5jaG9yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpbnNlcnRfaHlkcmF0aW9uKHRoaXMudCwgdGhpcy5uW2ldLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gYXR0cmlidXRlX3RvX29iamVjdChhdHRyaWJ1dGVzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgYXR0cmlidXRlcykge1xuICAgICAgICByZXN1bHRbYXR0cmlidXRlLm5hbWVdID0gYXR0cmlidXRlLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZ2V0X2N1c3RvbV9lbGVtZW50c19zbG90cyhlbGVtZW50KSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZWxlbWVudC5jaGlsZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgcmVzdWx0W25vZGUuc2xvdCB8fCAnZGVmYXVsdCddID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyB3ZSBuZWVkIHRvIHN0b3JlIHRoZSBpbmZvcm1hdGlvbiBmb3IgbXVsdGlwbGUgZG9jdW1lbnRzIGJlY2F1c2UgYSBTdmVsdGUgYXBwbGljYXRpb24gY291bGQgYWxzbyBjb250YWluIGlmcmFtZXNcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zdmVsdGVqcy9zdmVsdGUvaXNzdWVzLzM2MjRcbmNvbnN0IG1hbmFnZWRfc3R5bGVzID0gbmV3IE1hcCgpO1xubGV0IGFjdGl2ZSA9IDA7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZGFya3NreWFwcC9zdHJpbmctaGFzaC9ibG9iL21hc3Rlci9pbmRleC5qc1xuZnVuY3Rpb24gaGFzaChzdHIpIHtcbiAgICBsZXQgaGFzaCA9IDUzODE7XG4gICAgbGV0IGkgPSBzdHIubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pXG4gICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSBeIHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIHJldHVybiBoYXNoID4+PiAwO1xufVxuZnVuY3Rpb24gY3JlYXRlX3N0eWxlX2luZm9ybWF0aW9uKGRvYywgbm9kZSkge1xuICAgIGNvbnN0IGluZm8gPSB7IHN0eWxlc2hlZXQ6IGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0KG5vZGUpLCBydWxlczoge30gfTtcbiAgICBtYW5hZ2VkX3N0eWxlcy5zZXQoZG9jLCBpbmZvKTtcbiAgICByZXR1cm4gaW5mbztcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9ydWxlKG5vZGUsIGEsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzZSwgZm4sIHVpZCA9IDApIHtcbiAgICBjb25zdCBzdGVwID0gMTYuNjY2IC8gZHVyYXRpb247XG4gICAgbGV0IGtleWZyYW1lcyA9ICd7XFxuJztcbiAgICBmb3IgKGxldCBwID0gMDsgcCA8PSAxOyBwICs9IHN0ZXApIHtcbiAgICAgICAgY29uc3QgdCA9IGEgKyAoYiAtIGEpICogZWFzZShwKTtcbiAgICAgICAga2V5ZnJhbWVzICs9IHAgKiAxMDAgKyBgJXske2ZuKHQsIDEgLSB0KX19XFxuYDtcbiAgICB9XG4gICAgY29uc3QgcnVsZSA9IGtleWZyYW1lcyArIGAxMDAlIHske2ZuKGIsIDEgLSBiKX19XFxufWA7XG4gICAgY29uc3QgbmFtZSA9IGBfX3N2ZWx0ZV8ke2hhc2gocnVsZSl9XyR7dWlkfWA7XG4gICAgY29uc3QgZG9jID0gZ2V0X3Jvb3RfZm9yX3N0eWxlKG5vZGUpO1xuICAgIGNvbnN0IHsgc3R5bGVzaGVldCwgcnVsZXMgfSA9IG1hbmFnZWRfc3R5bGVzLmdldChkb2MpIHx8IGNyZWF0ZV9zdHlsZV9pbmZvcm1hdGlvbihkb2MsIG5vZGUpO1xuICAgIGlmICghcnVsZXNbbmFtZV0pIHtcbiAgICAgICAgcnVsZXNbbmFtZV0gPSB0cnVlO1xuICAgICAgICBzdHlsZXNoZWV0Lmluc2VydFJ1bGUoYEBrZXlmcmFtZXMgJHtuYW1lfSAke3J1bGV9YCwgc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbiAgICBjb25zdCBhbmltYXRpb24gPSBub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJztcbiAgICBub2RlLnN0eWxlLmFuaW1hdGlvbiA9IGAke2FuaW1hdGlvbiA/IGAke2FuaW1hdGlvbn0sIGAgOiAnJ30ke25hbWV9ICR7ZHVyYXRpb259bXMgbGluZWFyICR7ZGVsYXl9bXMgMSBib3RoYDtcbiAgICBhY3RpdmUgKz0gMTtcbiAgICByZXR1cm4gbmFtZTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZV9ydWxlKG5vZGUsIG5hbWUpIHtcbiAgICBjb25zdCBwcmV2aW91cyA9IChub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJykuc3BsaXQoJywgJyk7XG4gICAgY29uc3QgbmV4dCA9IHByZXZpb3VzLmZpbHRlcihuYW1lXG4gICAgICAgID8gYW5pbSA9PiBhbmltLmluZGV4T2YobmFtZSkgPCAwIC8vIHJlbW92ZSBzcGVjaWZpYyBhbmltYXRpb25cbiAgICAgICAgOiBhbmltID0+IGFuaW0uaW5kZXhPZignX19zdmVsdGUnKSA9PT0gLTEgLy8gcmVtb3ZlIGFsbCBTdmVsdGUgYW5pbWF0aW9uc1xuICAgICk7XG4gICAgY29uc3QgZGVsZXRlZCA9IHByZXZpb3VzLmxlbmd0aCAtIG5leHQubGVuZ3RoO1xuICAgIGlmIChkZWxldGVkKSB7XG4gICAgICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gbmV4dC5qb2luKCcsICcpO1xuICAgICAgICBhY3RpdmUgLT0gZGVsZXRlZDtcbiAgICAgICAgaWYgKCFhY3RpdmUpXG4gICAgICAgICAgICBjbGVhcl9ydWxlcygpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsZWFyX3J1bGVzKCkge1xuICAgIHJhZigoKSA9PiB7XG4gICAgICAgIGlmIChhY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG1hbmFnZWRfc3R5bGVzLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHN0eWxlc2hlZXQgfSA9IGluZm87XG4gICAgICAgICAgICBsZXQgaSA9IHN0eWxlc2hlZXQuY3NzUnVsZXMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgICAgICBzdHlsZXNoZWV0LmRlbGV0ZVJ1bGUoaSk7XG4gICAgICAgICAgICBpbmZvLnJ1bGVzID0ge307XG4gICAgICAgIH0pO1xuICAgICAgICBtYW5hZ2VkX3N0eWxlcy5jbGVhcigpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVfYW5pbWF0aW9uKG5vZGUsIGZyb20sIGZuLCBwYXJhbXMpIHtcbiAgICBpZiAoIWZyb20pXG4gICAgICAgIHJldHVybiBub29wO1xuICAgIGNvbnN0IHRvID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAoZnJvbS5sZWZ0ID09PSB0by5sZWZ0ICYmIGZyb20ucmlnaHQgPT09IHRvLnJpZ2h0ICYmIGZyb20udG9wID09PSB0by50b3AgJiYgZnJvbS5ib3R0b20gPT09IHRvLmJvdHRvbSlcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgXG4gICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBzaG91bGQgdGhpcyBiZSBzZXBhcmF0ZWQgZnJvbSBkZXN0cnVjdHVyaW5nPyBPciBzdGFydC9lbmQgYWRkZWQgdG8gcHVibGljIGFwaSBhbmQgZG9jdW1lbnRhdGlvbj9cbiAgICBzdGFydDogc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXksIFxuICAgIC8vIEB0cy1pZ25vcmUgdG9kbzpcbiAgICBlbmQgPSBzdGFydF90aW1lICsgZHVyYXRpb24sIHRpY2sgPSBub29wLCBjc3MgfSA9IGZuKG5vZGUsIHsgZnJvbSwgdG8gfSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IHRydWU7XG4gICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICBsZXQgbmFtZTtcbiAgICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDAsIDEsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVsYXkpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBuYW1lKTtcbiAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgIGlmICghc3RhcnRlZCAmJiBub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ZWQgJiYgbm93ID49IGVuZCkge1xuICAgICAgICAgICAgdGljaygxLCAwKTtcbiAgICAgICAgICAgIHN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRlZCkge1xuICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHN0YXJ0X3RpbWU7XG4gICAgICAgICAgICBjb25zdCB0ID0gMCArIDEgKiBlYXNpbmcocCAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHN0YXJ0KCk7XG4gICAgdGljaygwLCAxKTtcbiAgICByZXR1cm4gc3RvcDtcbn1cbmZ1bmN0aW9uIGZpeF9wb3NpdGlvbihub2RlKSB7XG4gICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgIGlmIChzdHlsZS5wb3NpdGlvbiAhPT0gJ2Fic29sdXRlJyAmJiBzdHlsZS5wb3NpdGlvbiAhPT0gJ2ZpeGVkJykge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHN0eWxlO1xuICAgICAgICBjb25zdCBhID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIG5vZGUuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGFkZF90cmFuc2Zvcm0obm9kZSwgYSk7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkX3RyYW5zZm9ybShub2RlLCBhKSB7XG4gICAgY29uc3QgYiA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKGEubGVmdCAhPT0gYi5sZWZ0IHx8IGEudG9wICE9PSBiLnRvcCkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHN0eWxlLnRyYW5zZm9ybSA9PT0gJ25vbmUnID8gJycgOiBzdHlsZS50cmFuc2Zvcm07XG4gICAgICAgIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gYCR7dHJhbnNmb3JtfSB0cmFuc2xhdGUoJHthLmxlZnQgLSBiLmxlZnR9cHgsICR7YS50b3AgLSBiLnRvcH1weClgO1xuICAgIH1cbn1cblxubGV0IGN1cnJlbnRfY29tcG9uZW50O1xuZnVuY3Rpb24gc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIGN1cnJlbnRfY29tcG9uZW50ID0gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkge1xuICAgIGlmICghY3VycmVudF9jb21wb25lbnQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRnVuY3Rpb24gY2FsbGVkIG91dHNpZGUgY29tcG9uZW50IGluaXRpYWxpemF0aW9uJyk7XG4gICAgcmV0dXJuIGN1cnJlbnRfY29tcG9uZW50O1xufVxuZnVuY3Rpb24gYmVmb3JlVXBkYXRlKGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuYmVmb3JlX3VwZGF0ZS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIG9uTW91bnQoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5vbl9tb3VudC5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGFmdGVyVXBkYXRlKGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuYWZ0ZXJfdXBkYXRlLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gb25EZXN0cm95KGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fZGVzdHJveS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpIHtcbiAgICBjb25zdCBjb21wb25lbnQgPSBnZXRfY3VycmVudF9jb21wb25lbnQoKTtcbiAgICByZXR1cm4gKHR5cGUsIGRldGFpbCwgeyBjYW5jZWxhYmxlID0gZmFsc2UgfSA9IHt9KSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbXBvbmVudC4kJC5jYWxsYmFja3NbdHlwZV07XG4gICAgICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gYXJlIHRoZXJlIHNpdHVhdGlvbnMgd2hlcmUgZXZlbnRzIGNvdWxkIGJlIGRpc3BhdGNoZWRcbiAgICAgICAgICAgIC8vIGluIGEgc2VydmVyIChub24tRE9NKSBlbnZpcm9ubWVudD9cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCwgeyBjYW5jZWxhYmxlIH0pO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnNsaWNlKCkuZm9yRWFjaChmbiA9PiB7XG4gICAgICAgICAgICAgICAgZm4uY2FsbChjb21wb25lbnQsIGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5mdW5jdGlvbiBzZXRDb250ZXh0KGtleSwgY29udGV4dCkge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuc2V0KGtleSwgY29udGV4dCk7XG4gICAgcmV0dXJuIGNvbnRleHQ7XG59XG5mdW5jdGlvbiBnZXRDb250ZXh0KGtleSkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LmdldChrZXkpO1xufVxuZnVuY3Rpb24gZ2V0QWxsQ29udGV4dHMoKSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQ7XG59XG5mdW5jdGlvbiBoYXNDb250ZXh0KGtleSkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LmhhcyhrZXkpO1xufVxuLy8gVE9ETyBmaWd1cmUgb3V0IGlmIHdlIHN0aWxsIHdhbnQgdG8gc3VwcG9ydFxuLy8gc2hvcnRoYW5kIGV2ZW50cywgb3IgaWYgd2Ugd2FudCB0byBpbXBsZW1lbnRcbi8vIGEgcmVhbCBidWJibGluZyBtZWNoYW5pc21cbmZ1bmN0aW9uIGJ1YmJsZShjb21wb25lbnQsIGV2ZW50KSB7XG4gICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1tldmVudC50eXBlXTtcbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY2FsbGJhY2tzLnNsaWNlKCkuZm9yRWFjaChmbiA9PiBmbi5jYWxsKHRoaXMsIGV2ZW50KSk7XG4gICAgfVxufVxuXG5jb25zdCBkaXJ0eV9jb21wb25lbnRzID0gW107XG5jb25zdCBpbnRyb3MgPSB7IGVuYWJsZWQ6IGZhbHNlIH07XG5jb25zdCBiaW5kaW5nX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgcmVuZGVyX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgZmx1c2hfY2FsbGJhY2tzID0gW107XG5jb25zdCByZXNvbHZlZF9wcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5sZXQgdXBkYXRlX3NjaGVkdWxlZCA9IGZhbHNlO1xuZnVuY3Rpb24gc2NoZWR1bGVfdXBkYXRlKCkge1xuICAgIGlmICghdXBkYXRlX3NjaGVkdWxlZCkge1xuICAgICAgICB1cGRhdGVfc2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgcmVzb2x2ZWRfcHJvbWlzZS50aGVuKGZsdXNoKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0aWNrKCkge1xuICAgIHNjaGVkdWxlX3VwZGF0ZSgpO1xuICAgIHJldHVybiByZXNvbHZlZF9wcm9taXNlO1xufVxuZnVuY3Rpb24gYWRkX3JlbmRlcl9jYWxsYmFjayhmbikge1xuICAgIHJlbmRlcl9jYWxsYmFja3MucHVzaChmbik7XG59XG5mdW5jdGlvbiBhZGRfZmx1c2hfY2FsbGJhY2soZm4pIHtcbiAgICBmbHVzaF9jYWxsYmFja3MucHVzaChmbik7XG59XG4vLyBmbHVzaCgpIGNhbGxzIGNhbGxiYWNrcyBpbiB0aGlzIG9yZGVyOlxuLy8gMS4gQWxsIGJlZm9yZVVwZGF0ZSBjYWxsYmFja3MsIGluIG9yZGVyOiBwYXJlbnRzIGJlZm9yZSBjaGlsZHJlblxuLy8gMi4gQWxsIGJpbmQ6dGhpcyBjYWxsYmFja3MsIGluIHJldmVyc2Ugb3JkZXI6IGNoaWxkcmVuIGJlZm9yZSBwYXJlbnRzLlxuLy8gMy4gQWxsIGFmdGVyVXBkYXRlIGNhbGxiYWNrcywgaW4gb3JkZXI6IHBhcmVudHMgYmVmb3JlIGNoaWxkcmVuLiBFWENFUFRcbi8vICAgIGZvciBhZnRlclVwZGF0ZXMgY2FsbGVkIGR1cmluZyB0aGUgaW5pdGlhbCBvbk1vdW50LCB3aGljaCBhcmUgY2FsbGVkIGluXG4vLyAgICByZXZlcnNlIG9yZGVyOiBjaGlsZHJlbiBiZWZvcmUgcGFyZW50cy5cbi8vIFNpbmNlIGNhbGxiYWNrcyBtaWdodCB1cGRhdGUgY29tcG9uZW50IHZhbHVlcywgd2hpY2ggY291bGQgdHJpZ2dlciBhbm90aGVyXG4vLyBjYWxsIHRvIGZsdXNoKCksIHRoZSBmb2xsb3dpbmcgc3RlcHMgZ3VhcmQgYWdhaW5zdCB0aGlzOlxuLy8gMS4gRHVyaW5nIGJlZm9yZVVwZGF0ZSwgYW55IHVwZGF0ZWQgY29tcG9uZW50cyB3aWxsIGJlIGFkZGVkIHRvIHRoZVxuLy8gICAgZGlydHlfY29tcG9uZW50cyBhcnJheSBhbmQgd2lsbCBjYXVzZSBhIHJlZW50cmFudCBjYWxsIHRvIGZsdXNoKCkuIEJlY2F1c2Vcbi8vICAgIHRoZSBmbHVzaCBpbmRleCBpcyBrZXB0IG91dHNpZGUgdGhlIGZ1bmN0aW9uLCB0aGUgcmVlbnRyYW50IGNhbGwgd2lsbCBwaWNrXG4vLyAgICB1cCB3aGVyZSB0aGUgZWFybGllciBjYWxsIGxlZnQgb2ZmIGFuZCBnbyB0aHJvdWdoIGFsbCBkaXJ0eSBjb21wb25lbnRzLiBUaGVcbi8vICAgIGN1cnJlbnRfY29tcG9uZW50IHZhbHVlIGlzIHNhdmVkIGFuZCByZXN0b3JlZCBzbyB0aGF0IHRoZSByZWVudHJhbnQgY2FsbCB3aWxsXG4vLyAgICBub3QgaW50ZXJmZXJlIHdpdGggdGhlIFwicGFyZW50XCIgZmx1c2goKSBjYWxsLlxuLy8gMi4gYmluZDp0aGlzIGNhbGxiYWNrcyBjYW5ub3QgdHJpZ2dlciBuZXcgZmx1c2goKSBjYWxscy5cbi8vIDMuIER1cmluZyBhZnRlclVwZGF0ZSwgYW55IHVwZGF0ZWQgY29tcG9uZW50cyB3aWxsIE5PVCBoYXZlIHRoZWlyIGFmdGVyVXBkYXRlXG4vLyAgICBjYWxsYmFjayBjYWxsZWQgYSBzZWNvbmQgdGltZTsgdGhlIHNlZW5fY2FsbGJhY2tzIHNldCwgb3V0c2lkZSB0aGUgZmx1c2goKVxuLy8gICAgZnVuY3Rpb24sIGd1YXJhbnRlZXMgdGhpcyBiZWhhdmlvci5cbmNvbnN0IHNlZW5fY2FsbGJhY2tzID0gbmV3IFNldCgpO1xubGV0IGZsdXNoaWR4ID0gMDsgLy8gRG8gKm5vdCogbW92ZSB0aGlzIGluc2lkZSB0aGUgZmx1c2goKSBmdW5jdGlvblxuZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgY29uc3Qgc2F2ZWRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgZG8ge1xuICAgICAgICAvLyBmaXJzdCwgY2FsbCBiZWZvcmVVcGRhdGUgZnVuY3Rpb25zXG4gICAgICAgIC8vIGFuZCB1cGRhdGUgY29tcG9uZW50c1xuICAgICAgICB3aGlsZSAoZmx1c2hpZHggPCBkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gZGlydHlfY29tcG9uZW50c1tmbHVzaGlkeF07XG4gICAgICAgICAgICBmbHVzaGlkeCsrO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgICAgICAgICB1cGRhdGUoY29tcG9uZW50LiQkKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgIGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgZmx1c2hpZHggPSAwO1xuICAgICAgICB3aGlsZSAoYmluZGluZ19jYWxsYmFja3MubGVuZ3RoKVxuICAgICAgICAgICAgYmluZGluZ19jYWxsYmFja3MucG9wKCkoKTtcbiAgICAgICAgLy8gdGhlbiwgb25jZSBjb21wb25lbnRzIGFyZSB1cGRhdGVkLCBjYWxsXG4gICAgICAgIC8vIGFmdGVyVXBkYXRlIGZ1bmN0aW9ucy4gVGhpcyBtYXkgY2F1c2VcbiAgICAgICAgLy8gc3Vic2VxdWVudCB1cGRhdGVzLi4uXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVuZGVyX2NhbGxiYWNrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSByZW5kZXJfY2FsbGJhY2tzW2ldO1xuICAgICAgICAgICAgaWYgKCFzZWVuX2NhbGxiYWNrcy5oYXMoY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgLy8gLi4uc28gZ3VhcmQgYWdhaW5zdCBpbmZpbml0ZSBsb29wc1xuICAgICAgICAgICAgICAgIHNlZW5fY2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgfSB3aGlsZSAoZGlydHlfY29tcG9uZW50cy5sZW5ndGgpO1xuICAgIHdoaWxlIChmbHVzaF9jYWxsYmFja3MubGVuZ3RoKSB7XG4gICAgICAgIGZsdXNoX2NhbGxiYWNrcy5wb3AoKSgpO1xuICAgIH1cbiAgICB1cGRhdGVfc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgc2Vlbl9jYWxsYmFja3MuY2xlYXIoKTtcbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQoc2F2ZWRfY29tcG9uZW50KTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZSgkJCkge1xuICAgIGlmICgkJC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAkJC51cGRhdGUoKTtcbiAgICAgICAgcnVuX2FsbCgkJC5iZWZvcmVfdXBkYXRlKTtcbiAgICAgICAgY29uc3QgZGlydHkgPSAkJC5kaXJ0eTtcbiAgICAgICAgJCQuZGlydHkgPSBbLTFdO1xuICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5wKCQkLmN0eCwgZGlydHkpO1xuICAgICAgICAkJC5hZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbiAgICB9XG59XG5cbmxldCBwcm9taXNlO1xuZnVuY3Rpb24gd2FpdCgpIHtcbiAgICBpZiAoIXByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoKG5vZGUsIGRpcmVjdGlvbiwga2luZCkge1xuICAgIG5vZGUuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQoYCR7ZGlyZWN0aW9uID8gJ2ludHJvJyA6ICdvdXRybyd9JHtraW5kfWApKTtcbn1cbmNvbnN0IG91dHJvaW5nID0gbmV3IFNldCgpO1xubGV0IG91dHJvcztcbmZ1bmN0aW9uIGdyb3VwX291dHJvcygpIHtcbiAgICBvdXRyb3MgPSB7XG4gICAgICAgIHI6IDAsXG4gICAgICAgIGM6IFtdLFxuICAgICAgICBwOiBvdXRyb3MgLy8gcGFyZW50IGdyb3VwXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNoZWNrX291dHJvcygpIHtcbiAgICBpZiAoIW91dHJvcy5yKSB7XG4gICAgICAgIHJ1bl9hbGwob3V0cm9zLmMpO1xuICAgIH1cbiAgICBvdXRyb3MgPSBvdXRyb3MucDtcbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25faW4oYmxvY2ssIGxvY2FsKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLmkpIHtcbiAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgYmxvY2suaShsb2NhbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdHJhbnNpdGlvbl9vdXQoYmxvY2ssIGxvY2FsLCBkZXRhY2gsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLm8pIHtcbiAgICAgICAgaWYgKG91dHJvaW5nLmhhcyhibG9jaykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG91dHJvaW5nLmFkZChibG9jayk7XG4gICAgICAgIG91dHJvcy5jLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGlmIChkZXRhY2gpXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmQoMSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJsb2NrLm8obG9jYWwpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cbn1cbmNvbnN0IG51bGxfdHJhbnNpdGlvbiA9IHsgZHVyYXRpb246IDAgfTtcbmZ1bmN0aW9uIGNyZWF0ZV9pbl90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMpIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IGZhbHNlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBsZXQgdGFzaztcbiAgICBsZXQgdWlkID0gMDtcbiAgICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdvKCkge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzLCB1aWQrKyk7XG4gICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5O1xuICAgICAgICBjb25zdCBlbmRfdGltZSA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbjtcbiAgICAgICAgaWYgKHRhc2spXG4gICAgICAgICAgICB0YXNrLmFib3J0KCk7XG4gICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIHRydWUsICdzdGFydCcpKTtcbiAgICAgICAgdGFzayA9IGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEsIDApO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCB0cnVlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQoKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnRlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUpO1xuICAgICAgICAgICAgaWYgKGlzX2Z1bmN0aW9uKGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgICAgICB3YWl0KCkudGhlbihnbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbnZhbGlkYXRlKCkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX291dF90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMpIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IHRydWU7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lO1xuICAgIGNvbnN0IGdyb3VwID0gb3V0cm9zO1xuICAgIGdyb3VwLnIgKz0gMTtcbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMSwgMCwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcyk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5O1xuICAgICAgICBjb25zdCBlbmRfdGltZSA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbjtcbiAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCBmYWxzZSwgJ3N0YXJ0JykpO1xuICAgICAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gZW5kX3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgZmFsc2UsICdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEtLWdyb3VwLnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCByZXN1bHQgaW4gYGVuZCgpYCBiZWluZyBjYWxsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBkb24ndCBuZWVkIHRvIGNsZWFuIHVwIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hbGwoZ3JvdXAuYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGVhc2luZygobm93IC0gc3RhcnRfdGltZSkgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMSAtIHQsIHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5uaW5nO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGlzX2Z1bmN0aW9uKGNvbmZpZykpIHtcbiAgICAgICAgd2FpdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uZmlnID0gY29uZmlnKCk7XG4gICAgICAgICAgICBnbygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGdvKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGVuZChyZXNldCkge1xuICAgICAgICAgICAgaWYgKHJlc2V0ICYmIGNvbmZpZy50aWNrKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLnRpY2soMSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfYmlkaXJlY3Rpb25hbF90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMsIGludHJvKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHQgPSBpbnRybyA/IDAgOiAxO1xuICAgIGxldCBydW5uaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgIGxldCBwZW5kaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgIGxldCBhbmltYXRpb25fbmFtZSA9IG51bGw7XG4gICAgZnVuY3Rpb24gY2xlYXJfYW5pbWF0aW9uKCkge1xuICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGluaXQocHJvZ3JhbSwgZHVyYXRpb24pIHtcbiAgICAgICAgY29uc3QgZCA9IChwcm9ncmFtLmIgLSB0KTtcbiAgICAgICAgZHVyYXRpb24gKj0gTWF0aC5hYnMoZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhOiB0LFxuICAgICAgICAgICAgYjogcHJvZ3JhbS5iLFxuICAgICAgICAgICAgZCxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgc3RhcnQ6IHByb2dyYW0uc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IHByb2dyYW0uc3RhcnQgKyBkdXJhdGlvbixcbiAgICAgICAgICAgIGdyb3VwOiBwcm9ncmFtLmdyb3VwXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdvKGIpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiBub3coKSArIGRlbGF5LFxuICAgICAgICAgICAgYlxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWIpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICBwcm9ncmFtLmdyb3VwID0gb3V0cm9zO1xuICAgICAgICAgICAgb3V0cm9zLnIgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtIHx8IHBlbmRpbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgcGVuZGluZ19wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYW4gaW50cm8sIGFuZCB0aGVyZSdzIGEgZGVsYXksIHdlIG5lZWQgdG8gZG9cbiAgICAgICAgICAgIC8vIGFuIGluaXRpYWwgdGljayBhbmQvb3IgYXBwbHkgQ1NTIGFuaW1hdGlvbiBpbW1lZGlhdGVseVxuICAgICAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgdCwgYiwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYilcbiAgICAgICAgICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gaW5pdChwcm9ncmFtLCBkdXJhdGlvbik7XG4gICAgICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIGIsICdzdGFydCcpKTtcbiAgICAgICAgICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGVuZGluZ19wcm9ncmFtICYmIG5vdyA+IHBlbmRpbmdfcHJvZ3JhbS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBpbml0KHBlbmRpbmdfcHJvZ3JhbSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBydW5uaW5nX3Byb2dyYW0uYiwgJ3N0YXJ0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCB0LCBydW5uaW5nX3Byb2dyYW0uYiwgcnVubmluZ19wcm9ncmFtLmR1cmF0aW9uLCAwLCBlYXNpbmcsIGNvbmZpZy5jc3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBydW5uaW5nX3Byb2dyYW0uZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrKHQgPSBydW5uaW5nX3Byb2dyYW0uYiwgMSAtIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgcnVubmluZ19wcm9ncmFtLmIsICdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGVuZGluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgZG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0uYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnRybyDigJQgd2UgY2FuIHRpZHkgdXAgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdXRybyDigJQgbmVlZHMgdG8gYmUgY29vcmRpbmF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEtLXJ1bm5pbmdfcHJvZ3JhbS5ncm91cC5yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2FsbChydW5uaW5nX3Byb2dyYW0uZ3JvdXAuYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChub3cgPj0gcnVubmluZ19wcm9ncmFtLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gbm93IC0gcnVubmluZ19wcm9ncmFtLnN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHJ1bm5pbmdfcHJvZ3JhbS5hICsgcnVubmluZ19wcm9ncmFtLmQgKiBlYXNpbmcocCAvIHJ1bm5pbmdfcHJvZ3JhbS5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gISEocnVubmluZ19wcm9ncmFtIHx8IHBlbmRpbmdfcHJvZ3JhbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBydW4oYikge1xuICAgICAgICAgICAgaWYgKGlzX2Z1bmN0aW9uKGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICB3YWl0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gY29uZmlnKCk7XG4gICAgICAgICAgICAgICAgICAgIGdvKGIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ28oYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVuZCgpIHtcbiAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZV9wcm9taXNlKHByb21pc2UsIGluZm8pIHtcbiAgICBjb25zdCB0b2tlbiA9IGluZm8udG9rZW4gPSB7fTtcbiAgICBmdW5jdGlvbiB1cGRhdGUodHlwZSwgaW5kZXgsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGluZm8udG9rZW4gIT09IHRva2VuKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpbmZvLnJlc29sdmVkID0gdmFsdWU7XG4gICAgICAgIGxldCBjaGlsZF9jdHggPSBpbmZvLmN0eDtcbiAgICAgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjaGlsZF9jdHggPSBjaGlsZF9jdHguc2xpY2UoKTtcbiAgICAgICAgICAgIGNoaWxkX2N0eFtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmxvY2sgPSB0eXBlICYmIChpbmZvLmN1cnJlbnQgPSB0eXBlKShjaGlsZF9jdHgpO1xuICAgICAgICBsZXQgbmVlZHNfZmx1c2ggPSBmYWxzZTtcbiAgICAgICAgaWYgKGluZm8uYmxvY2spIHtcbiAgICAgICAgICAgIGlmIChpbmZvLmJsb2Nrcykge1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2tzLmZvckVhY2goKGJsb2NrLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBpbmRleCAmJiBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBfb3V0cm9zKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uX291dChibG9jaywgMSwgMSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLmJsb2Nrc1tpXSA9PT0gYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5ibG9ja3NbaV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tfb3V0cm9zKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluZm8uYmxvY2suZCgxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJsb2NrLmMoKTtcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW4oYmxvY2ssIDEpO1xuICAgICAgICAgICAgYmxvY2subShpbmZvLm1vdW50KCksIGluZm8uYW5jaG9yKTtcbiAgICAgICAgICAgIG5lZWRzX2ZsdXNoID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLmJsb2NrID0gYmxvY2s7XG4gICAgICAgIGlmIChpbmZvLmJsb2NrcylcbiAgICAgICAgICAgIGluZm8uYmxvY2tzW2luZGV4XSA9IGJsb2NrO1xuICAgICAgICBpZiAobmVlZHNfZmx1c2gpIHtcbiAgICAgICAgICAgIGZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzX3Byb21pc2UocHJvbWlzZSkpIHtcbiAgICAgICAgY29uc3QgY3VycmVudF9jb21wb25lbnQgPSBnZXRfY3VycmVudF9jb21wb25lbnQoKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjdXJyZW50X2NvbXBvbmVudCk7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby50aGVuLCAxLCBpbmZvLnZhbHVlLCB2YWx1ZSk7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjdXJyZW50X2NvbXBvbmVudCk7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby5jYXRjaCwgMiwgaW5mby5lcnJvciwgZXJyb3IpO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICAgICAgaWYgKCFpbmZvLmhhc0NhdGNoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBpZiB3ZSBwcmV2aW91c2x5IGhhZCBhIHRoZW4vY2F0Y2ggYmxvY2ssIGRlc3Ryb3kgaXRcbiAgICAgICAgaWYgKGluZm8uY3VycmVudCAhPT0gaW5mby5wZW5kaW5nKSB7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby5wZW5kaW5nLCAwKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoaW5mby5jdXJyZW50ICE9PSBpbmZvLnRoZW4pIHtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnRoZW4sIDEsIGluZm8udmFsdWUsIHByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5yZXNvbHZlZCA9IHByb21pc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlX2F3YWl0X2Jsb2NrX2JyYW5jaChpbmZvLCBjdHgsIGRpcnR5KSB7XG4gICAgY29uc3QgY2hpbGRfY3R4ID0gY3R4LnNsaWNlKCk7XG4gICAgY29uc3QgeyByZXNvbHZlZCB9ID0gaW5mbztcbiAgICBpZiAoaW5mby5jdXJyZW50ID09PSBpbmZvLnRoZW4pIHtcbiAgICAgICAgY2hpbGRfY3R4W2luZm8udmFsdWVdID0gcmVzb2x2ZWQ7XG4gICAgfVxuICAgIGlmIChpbmZvLmN1cnJlbnQgPT09IGluZm8uY2F0Y2gpIHtcbiAgICAgICAgY2hpbGRfY3R4W2luZm8uZXJyb3JdID0gcmVzb2x2ZWQ7XG4gICAgfVxuICAgIGluZm8uYmxvY2sucChjaGlsZF9jdHgsIGRpcnR5KTtcbn1cblxuY29uc3QgZ2xvYmFscyA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xuICAgID8gd2luZG93XG4gICAgOiB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBnbG9iYWxUaGlzXG4gICAgICAgIDogZ2xvYmFsKTtcblxuZnVuY3Rpb24gZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZCgxKTtcbiAgICBsb29rdXAuZGVsZXRlKGJsb2NrLmtleSk7XG59XG5mdW5jdGlvbiBvdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgdHJhbnNpdGlvbl9vdXQoYmxvY2ssIDEsIDEsICgpID0+IHtcbiAgICAgICAgbG9va3VwLmRlbGV0ZShibG9jay5rZXkpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZml4X2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5mKCk7XG4gICAgZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKTtcbn1cbmZ1bmN0aW9uIGZpeF9hbmRfb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmYoKTtcbiAgICBvdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZV9rZXllZF9lYWNoKG9sZF9ibG9ja3MsIGRpcnR5LCBnZXRfa2V5LCBkeW5hbWljLCBjdHgsIGxpc3QsIGxvb2t1cCwgbm9kZSwgZGVzdHJveSwgY3JlYXRlX2VhY2hfYmxvY2ssIG5leHQsIGdldF9jb250ZXh0KSB7XG4gICAgbGV0IG8gPSBvbGRfYmxvY2tzLmxlbmd0aDtcbiAgICBsZXQgbiA9IGxpc3QubGVuZ3RoO1xuICAgIGxldCBpID0gbztcbiAgICBjb25zdCBvbGRfaW5kZXhlcyA9IHt9O1xuICAgIHdoaWxlIChpLS0pXG4gICAgICAgIG9sZF9pbmRleGVzW29sZF9ibG9ja3NbaV0ua2V5XSA9IGk7XG4gICAgY29uc3QgbmV3X2Jsb2NrcyA9IFtdO1xuICAgIGNvbnN0IG5ld19sb29rdXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgZGVsdGFzID0gbmV3IE1hcCgpO1xuICAgIGkgPSBuO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY29uc3QgY2hpbGRfY3R4ID0gZ2V0X2NvbnRleHQoY3R4LCBsaXN0LCBpKTtcbiAgICAgICAgY29uc3Qga2V5ID0gZ2V0X2tleShjaGlsZF9jdHgpO1xuICAgICAgICBsZXQgYmxvY2sgPSBsb29rdXAuZ2V0KGtleSk7XG4gICAgICAgIGlmICghYmxvY2spIHtcbiAgICAgICAgICAgIGJsb2NrID0gY3JlYXRlX2VhY2hfYmxvY2soa2V5LCBjaGlsZF9jdHgpO1xuICAgICAgICAgICAgYmxvY2suYygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGR5bmFtaWMpIHtcbiAgICAgICAgICAgIGJsb2NrLnAoY2hpbGRfY3R4LCBkaXJ0eSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3X2xvb2t1cC5zZXQoa2V5LCBuZXdfYmxvY2tzW2ldID0gYmxvY2spO1xuICAgICAgICBpZiAoa2V5IGluIG9sZF9pbmRleGVzKVxuICAgICAgICAgICAgZGVsdGFzLnNldChrZXksIE1hdGguYWJzKGkgLSBvbGRfaW5kZXhlc1trZXldKSk7XG4gICAgfVxuICAgIGNvbnN0IHdpbGxfbW92ZSA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBkaWRfbW92ZSA9IG5ldyBTZXQoKTtcbiAgICBmdW5jdGlvbiBpbnNlcnQoYmxvY2spIHtcbiAgICAgICAgdHJhbnNpdGlvbl9pbihibG9jaywgMSk7XG4gICAgICAgIGJsb2NrLm0obm9kZSwgbmV4dCk7XG4gICAgICAgIGxvb2t1cC5zZXQoYmxvY2sua2V5LCBibG9jayk7XG4gICAgICAgIG5leHQgPSBibG9jay5maXJzdDtcbiAgICAgICAgbi0tO1xuICAgIH1cbiAgICB3aGlsZSAobyAmJiBuKSB7XG4gICAgICAgIGNvbnN0IG5ld19ibG9jayA9IG5ld19ibG9ja3NbbiAtIDFdO1xuICAgICAgICBjb25zdCBvbGRfYmxvY2sgPSBvbGRfYmxvY2tzW28gLSAxXTtcbiAgICAgICAgY29uc3QgbmV3X2tleSA9IG5ld19ibG9jay5rZXk7XG4gICAgICAgIGNvbnN0IG9sZF9rZXkgPSBvbGRfYmxvY2sua2V5O1xuICAgICAgICBpZiAobmV3X2Jsb2NrID09PSBvbGRfYmxvY2spIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgIG5leHQgPSBuZXdfYmxvY2suZmlyc3Q7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgICAgICBuLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIW5ld19sb29rdXAuaGFzKG9sZF9rZXkpKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgb2xkIGJsb2NrXG4gICAgICAgICAgICBkZXN0cm95KG9sZF9ibG9jaywgbG9va3VwKTtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbG9va3VwLmhhcyhuZXdfa2V5KSB8fCB3aWxsX21vdmUuaGFzKG5ld19rZXkpKSB7XG4gICAgICAgICAgICBpbnNlcnQobmV3X2Jsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaWRfbW92ZS5oYXMob2xkX2tleSkpIHtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWx0YXMuZ2V0KG5ld19rZXkpID4gZGVsdGFzLmdldChvbGRfa2V5KSkge1xuICAgICAgICAgICAgZGlkX21vdmUuYWRkKG5ld19rZXkpO1xuICAgICAgICAgICAgaW5zZXJ0KG5ld19ibG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3aWxsX21vdmUuYWRkKG9sZF9rZXkpO1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdoaWxlIChvLS0pIHtcbiAgICAgICAgY29uc3Qgb2xkX2Jsb2NrID0gb2xkX2Jsb2Nrc1tvXTtcbiAgICAgICAgaWYgKCFuZXdfbG9va3VwLmhhcyhvbGRfYmxvY2sua2V5KSlcbiAgICAgICAgICAgIGRlc3Ryb3kob2xkX2Jsb2NrLCBsb29rdXApO1xuICAgIH1cbiAgICB3aGlsZSAobilcbiAgICAgICAgaW5zZXJ0KG5ld19ibG9ja3NbbiAtIDFdKTtcbiAgICByZXR1cm4gbmV3X2Jsb2Nrcztcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX2VhY2hfa2V5cyhjdHgsIGxpc3QsIGdldF9jb250ZXh0LCBnZXRfa2V5KSB7XG4gICAgY29uc3Qga2V5cyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZ2V0X2tleShnZXRfY29udGV4dChjdHgsIGxpc3QsIGkpKTtcbiAgICAgICAgaWYgKGtleXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGhhdmUgZHVwbGljYXRlIGtleXMgaW4gYSBrZXllZCBlYWNoJyk7XG4gICAgICAgIH1cbiAgICAgICAga2V5cy5hZGQoa2V5KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldF9zcHJlYWRfdXBkYXRlKGxldmVscywgdXBkYXRlcykge1xuICAgIGNvbnN0IHVwZGF0ZSA9IHt9O1xuICAgIGNvbnN0IHRvX251bGxfb3V0ID0ge307XG4gICAgY29uc3QgYWNjb3VudGVkX2ZvciA9IHsgJCRzY29wZTogMSB9O1xuICAgIGxldCBpID0gbGV2ZWxzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IG8gPSBsZXZlbHNbaV07XG4gICAgICAgIGNvbnN0IG4gPSB1cGRhdGVzW2ldO1xuICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbykge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBuKSlcbiAgICAgICAgICAgICAgICAgICAgdG9fbnVsbF9vdXRba2V5XSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBuKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhY2NvdW50ZWRfZm9yW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlW2tleV0gPSBuW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRlZF9mb3Jba2V5XSA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV2ZWxzW2ldID0gbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG8pIHtcbiAgICAgICAgICAgICAgICBhY2NvdW50ZWRfZm9yW2tleV0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIHRvX251bGxfb3V0KSB7XG4gICAgICAgIGlmICghKGtleSBpbiB1cGRhdGUpKVxuICAgICAgICAgICAgdXBkYXRlW2tleV0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGU7XG59XG5mdW5jdGlvbiBnZXRfc3ByZWFkX29iamVjdChzcHJlYWRfcHJvcHMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHNwcmVhZF9wcm9wcyA9PT0gJ29iamVjdCcgJiYgc3ByZWFkX3Byb3BzICE9PSBudWxsID8gc3ByZWFkX3Byb3BzIDoge307XG59XG5cbi8vIHNvdXJjZTogaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvaW5kaWNlcy5odG1sXG5jb25zdCBib29sZWFuX2F0dHJpYnV0ZXMgPSBuZXcgU2V0KFtcbiAgICAnYWxsb3dmdWxsc2NyZWVuJyxcbiAgICAnYWxsb3dwYXltZW50cmVxdWVzdCcsXG4gICAgJ2FzeW5jJyxcbiAgICAnYXV0b2ZvY3VzJyxcbiAgICAnYXV0b3BsYXknLFxuICAgICdjaGVja2VkJyxcbiAgICAnY29udHJvbHMnLFxuICAgICdkZWZhdWx0JyxcbiAgICAnZGVmZXInLFxuICAgICdkaXNhYmxlZCcsXG4gICAgJ2Zvcm1ub3ZhbGlkYXRlJyxcbiAgICAnaGlkZGVuJyxcbiAgICAnaXNtYXAnLFxuICAgICdsb29wJyxcbiAgICAnbXVsdGlwbGUnLFxuICAgICdtdXRlZCcsXG4gICAgJ25vbW9kdWxlJyxcbiAgICAnbm92YWxpZGF0ZScsXG4gICAgJ29wZW4nLFxuICAgICdwbGF5c2lubGluZScsXG4gICAgJ3JlYWRvbmx5JyxcbiAgICAncmVxdWlyZWQnLFxuICAgICdyZXZlcnNlZCcsXG4gICAgJ3NlbGVjdGVkJ1xuXSk7XG5cbmNvbnN0IHZvaWRfZWxlbWVudF9uYW1lcyA9IC9eKD86YXJlYXxiYXNlfGJyfGNvbHxjb21tYW5kfGVtYmVkfGhyfGltZ3xpbnB1dHxrZXlnZW58bGlua3xtZXRhfHBhcmFtfHNvdXJjZXx0cmFja3x3YnIpJC87XG5mdW5jdGlvbiBpc192b2lkKG5hbWUpIHtcbiAgICByZXR1cm4gdm9pZF9lbGVtZW50X25hbWVzLnRlc3QobmFtZSkgfHwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSAnIWRvY3R5cGUnO1xufVxuXG5jb25zdCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciA9IC9bXFxzJ1wiPi89XFx1e0ZERDB9LVxcdXtGREVGfVxcdXtGRkZFfVxcdXtGRkZGfVxcdXsxRkZGRX1cXHV7MUZGRkZ9XFx1ezJGRkZFfVxcdXsyRkZGRn1cXHV7M0ZGRkV9XFx1ezNGRkZGfVxcdXs0RkZGRX1cXHV7NEZGRkZ9XFx1ezVGRkZFfVxcdXs1RkZGRn1cXHV7NkZGRkV9XFx1ezZGRkZGfVxcdXs3RkZGRX1cXHV7N0ZGRkZ9XFx1ezhGRkZFfVxcdXs4RkZGRn1cXHV7OUZGRkV9XFx1ezlGRkZGfVxcdXtBRkZGRX1cXHV7QUZGRkZ9XFx1e0JGRkZFfVxcdXtCRkZGRn1cXHV7Q0ZGRkV9XFx1e0NGRkZGfVxcdXtERkZGRX1cXHV7REZGRkZ9XFx1e0VGRkZFfVxcdXtFRkZGRn1cXHV7RkZGRkV9XFx1e0ZGRkZGfVxcdXsxMEZGRkV9XFx1ezEwRkZGRn1dL3U7XG4vLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNhdHRyaWJ1dGVzLTJcbi8vIGh0dHBzOi8vaW5mcmEuc3BlYy53aGF0d2cub3JnLyNub25jaGFyYWN0ZXJcbmZ1bmN0aW9uIHNwcmVhZChhcmdzLCBhdHRyc190b19hZGQpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbih7fSwgLi4uYXJncyk7XG4gICAgaWYgKGF0dHJzX3RvX2FkZCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzX3RvX2FkZCA9IGF0dHJzX3RvX2FkZC5jbGFzc2VzO1xuICAgICAgICBjb25zdCBzdHlsZXNfdG9fYWRkID0gYXR0cnNfdG9fYWRkLnN0eWxlcztcbiAgICAgICAgaWYgKGNsYXNzZXNfdG9fYWRkKSB7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcy5jbGFzcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyA9IGNsYXNzZXNfdG9fYWRkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyArPSAnICcgKyBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3R5bGVzX3RvX2FkZCkge1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuc3R5bGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMuc3R5bGUgPSBzdHlsZV9vYmplY3RfdG9fc3RyaW5nKHN0eWxlc190b19hZGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5zdHlsZSA9IHN0eWxlX29iamVjdF90b19zdHJpbmcobWVyZ2Vfc3NyX3N0eWxlcyhhdHRyaWJ1dGVzLnN0eWxlLCBzdHlsZXNfdG9fYWRkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGlmIChpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3Rlci50ZXN0KG5hbWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHN0ciArPSAnICcgKyBuYW1lO1xuICAgICAgICBlbHNlIGlmIChib29sZWFuX2F0dHJpYnV0ZXMuaGFzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgICAgICBzdHIgKz0gJyAnICsgbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzdHIgKz0gYCAke25hbWV9PVwiJHt2YWx1ZX1cImA7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gbWVyZ2Vfc3NyX3N0eWxlcyhzdHlsZV9hdHRyaWJ1dGUsIHN0eWxlX2RpcmVjdGl2ZSkge1xuICAgIGNvbnN0IHN0eWxlX29iamVjdCA9IHt9O1xuICAgIGZvciAoY29uc3QgaW5kaXZpZHVhbF9zdHlsZSBvZiBzdHlsZV9hdHRyaWJ1dGUuc3BsaXQoJzsnKSkge1xuICAgICAgICBjb25zdCBjb2xvbl9pbmRleCA9IGluZGl2aWR1YWxfc3R5bGUuaW5kZXhPZignOicpO1xuICAgICAgICBjb25zdCBuYW1lID0gaW5kaXZpZHVhbF9zdHlsZS5zbGljZSgwLCBjb2xvbl9pbmRleCkudHJpbSgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGluZGl2aWR1YWxfc3R5bGUuc2xpY2UoY29sb25faW5kZXggKyAxKS50cmltKCk7XG4gICAgICAgIGlmICghbmFtZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBzdHlsZV9vYmplY3RbbmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBuYW1lIGluIHN0eWxlX2RpcmVjdGl2ZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHN0eWxlX2RpcmVjdGl2ZVtuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBzdHlsZV9vYmplY3RbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzdHlsZV9vYmplY3RbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlX29iamVjdDtcbn1cbmNvbnN0IEFUVFJfUkVHRVggPSAvWyZcIl0vZztcbmNvbnN0IENPTlRFTlRfUkVHRVggPSAvWyY8XS9nO1xuLyoqXG4gKiBOb3RlOiB0aGlzIG1ldGhvZCBpcyBwZXJmb3JtYW5jZSBzZW5zaXRpdmUgYW5kIGhhcyBiZWVuIG9wdGltaXplZFxuICogaHR0cHM6Ly9naXRodWIuY29tL3N2ZWx0ZWpzL3N2ZWx0ZS9wdWxsLzU3MDFcbiAqL1xuZnVuY3Rpb24gZXNjYXBlKHZhbHVlLCBpc19hdHRyID0gZmFsc2UpIHtcbiAgICBjb25zdCBzdHIgPSBTdHJpbmcodmFsdWUpO1xuICAgIGNvbnN0IHBhdHRlcm4gPSBpc19hdHRyID8gQVRUUl9SRUdFWCA6IENPTlRFTlRfUkVHRVg7XG4gICAgcGF0dGVybi5sYXN0SW5kZXggPSAwO1xuICAgIGxldCBlc2NhcGVkID0gJyc7XG4gICAgbGV0IGxhc3QgPSAwO1xuICAgIHdoaWxlIChwYXR0ZXJuLnRlc3Qoc3RyKSkge1xuICAgICAgICBjb25zdCBpID0gcGF0dGVybi5sYXN0SW5kZXggLSAxO1xuICAgICAgICBjb25zdCBjaCA9IHN0cltpXTtcbiAgICAgICAgZXNjYXBlZCArPSBzdHIuc3Vic3RyaW5nKGxhc3QsIGkpICsgKGNoID09PSAnJicgPyAnJmFtcDsnIDogKGNoID09PSAnXCInID8gJyZxdW90OycgOiAnJmx0OycpKTtcbiAgICAgICAgbGFzdCA9IGkgKyAxO1xuICAgIH1cbiAgICByZXR1cm4gZXNjYXBlZCArIHN0ci5zdWJzdHJpbmcobGFzdCk7XG59XG5mdW5jdGlvbiBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlKHZhbHVlKSB7XG4gICAgLy8ga2VlcCBib29sZWFucywgbnVsbCwgYW5kIHVuZGVmaW5lZCBmb3IgdGhlIHNha2Ugb2YgYHNwcmVhZGBcbiAgICBjb25zdCBzaG91bGRfZXNjYXBlID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jyk7XG4gICAgcmV0dXJuIHNob3VsZF9lc2NhcGUgPyBlc2NhcGUodmFsdWUsIHRydWUpIDogdmFsdWU7XG59XG5mdW5jdGlvbiBlc2NhcGVfb2JqZWN0KG9iaikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICByZXN1bHRba2V5XSA9IGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUob2JqW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZWFjaChpdGVtcywgZm4pIHtcbiAgICBsZXQgc3RyID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBzdHIgKz0gZm4oaXRlbXNbaV0sIGkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuY29uc3QgbWlzc2luZ19jb21wb25lbnQgPSB7XG4gICAgJCRyZW5kZXI6ICgpID0+ICcnXG59O1xuZnVuY3Rpb24gdmFsaWRhdGVfY29tcG9uZW50KGNvbXBvbmVudCwgbmFtZSkge1xuICAgIGlmICghY29tcG9uZW50IHx8ICFjb21wb25lbnQuJCRyZW5kZXIpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdzdmVsdGU6Y29tcG9uZW50JylcbiAgICAgICAgICAgIG5hbWUgKz0gJyB0aGlzPXsuLi59JztcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGA8JHtuYW1lfT4gaXMgbm90IGEgdmFsaWQgU1NSIGNvbXBvbmVudC4gWW91IG1heSBuZWVkIHRvIHJldmlldyB5b3VyIGJ1aWxkIGNvbmZpZyB0byBlbnN1cmUgdGhhdCBkZXBlbmRlbmNpZXMgYXJlIGNvbXBpbGVkLCByYXRoZXIgdGhhbiBpbXBvcnRlZCBhcyBwcmUtY29tcGlsZWQgbW9kdWxlc2ApO1xuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZGVidWcoZmlsZSwgbGluZSwgY29sdW1uLCB2YWx1ZXMpIHtcbiAgICBjb25zb2xlLmxvZyhge0BkZWJ1Z30gJHtmaWxlID8gZmlsZSArICcgJyA6ICcnfSgke2xpbmV9OiR7Y29sdW1ufSlgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2codmFsdWVzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgcmV0dXJuICcnO1xufVxubGV0IG9uX2Rlc3Ryb3k7XG5mdW5jdGlvbiBjcmVhdGVfc3NyX2NvbXBvbmVudChmbikge1xuICAgIGZ1bmN0aW9uICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cywgY29udGV4dCkge1xuICAgICAgICBjb25zdCBwYXJlbnRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgICAgIGNvbnN0ICQkID0ge1xuICAgICAgICAgICAgb25fZGVzdHJveSxcbiAgICAgICAgICAgIGNvbnRleHQ6IG5ldyBNYXAoY29udGV4dCB8fCAocGFyZW50X2NvbXBvbmVudCA/IHBhcmVudF9jb21wb25lbnQuJCQuY29udGV4dCA6IFtdKSksXG4gICAgICAgICAgICAvLyB0aGVzZSB3aWxsIGJlIGltbWVkaWF0ZWx5IGRpc2NhcmRlZFxuICAgICAgICAgICAgb25fbW91bnQ6IFtdLFxuICAgICAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBhZnRlcl91cGRhdGU6IFtdLFxuICAgICAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKVxuICAgICAgICB9O1xuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoeyAkJCB9KTtcbiAgICAgICAgY29uc3QgaHRtbCA9IGZuKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cyk7XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcjogKHByb3BzID0ge30sIHsgJCRzbG90cyA9IHt9LCBjb250ZXh0ID0gbmV3IE1hcCgpIH0gPSB7fSkgPT4ge1xuICAgICAgICAgICAgb25fZGVzdHJveSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0aXRsZTogJycsIGhlYWQ6ICcnLCBjc3M6IG5ldyBTZXQoKSB9O1xuICAgICAgICAgICAgY29uc3QgaHRtbCA9ICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIHt9LCAkJHNsb3RzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIHJ1bl9hbGwob25fZGVzdHJveSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGh0bWwsXG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IEFycmF5LmZyb20ocmVzdWx0LmNzcykubWFwKGNzcyA9PiBjc3MuY29kZSkuam9pbignXFxuJyksXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbnVsbCAvLyBUT0RPXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoZWFkOiByZXN1bHQudGl0bGUgKyByZXN1bHQuaGVhZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgJCRyZW5kZXJcbiAgICB9O1xufVxuZnVuY3Rpb24gYWRkX2F0dHJpYnV0ZShuYW1lLCB2YWx1ZSwgYm9vbGVhbikge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IChib29sZWFuICYmICF2YWx1ZSkpXG4gICAgICAgIHJldHVybiAnJztcbiAgICBjb25zdCBhc3NpZ25tZW50ID0gKGJvb2xlYW4gJiYgdmFsdWUgPT09IHRydWUpID8gJycgOiBgPVwiJHtlc2NhcGUodmFsdWUsIHRydWUpfVwiYDtcbiAgICByZXR1cm4gYCAke25hbWV9JHthc3NpZ25tZW50fWA7XG59XG5mdW5jdGlvbiBhZGRfY2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgcmV0dXJuIGNsYXNzZXMgPyBgIGNsYXNzPVwiJHtjbGFzc2VzfVwiYCA6ICcnO1xufVxuZnVuY3Rpb24gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc3R5bGVfb2JqZWN0KVxuICAgICAgICAuZmlsdGVyKGtleSA9PiBzdHlsZV9vYmplY3Rba2V5XSlcbiAgICAgICAgLm1hcChrZXkgPT4gYCR7a2V5fTogJHtzdHlsZV9vYmplY3Rba2V5XX07YClcbiAgICAgICAgLmpvaW4oJyAnKTtcbn1cbmZ1bmN0aW9uIGFkZF9zdHlsZXMoc3R5bGVfb2JqZWN0KSB7XG4gICAgY29uc3Qgc3R5bGVzID0gc3R5bGVfb2JqZWN0X3RvX3N0cmluZyhzdHlsZV9vYmplY3QpO1xuICAgIHJldHVybiBzdHlsZXMgPyBgIHN0eWxlPVwiJHtzdHlsZXN9XCJgIDogJyc7XG59XG5cbmZ1bmN0aW9uIGJpbmQoY29tcG9uZW50LCBuYW1lLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGluZGV4ID0gY29tcG9uZW50LiQkLnByb3BzW25hbWVdO1xuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbXBvbmVudC4kJC5ib3VuZFtpbmRleF0gPSBjYWxsYmFjaztcbiAgICAgICAgY2FsbGJhY2soY29tcG9uZW50LiQkLmN0eFtpbmRleF0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZV9jb21wb25lbnQoYmxvY2spIHtcbiAgICBibG9jayAmJiBibG9jay5jKCk7XG59XG5mdW5jdGlvbiBjbGFpbV9jb21wb25lbnQoYmxvY2ssIHBhcmVudF9ub2Rlcykge1xuICAgIGJsb2NrICYmIGJsb2NrLmwocGFyZW50X25vZGVzKTtcbn1cbmZ1bmN0aW9uIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIHRhcmdldCwgYW5jaG9yLCBjdXN0b21FbGVtZW50KSB7XG4gICAgY29uc3QgeyBmcmFnbWVudCwgb25fbW91bnQsIG9uX2Rlc3Ryb3ksIGFmdGVyX3VwZGF0ZSB9ID0gY29tcG9uZW50LiQkO1xuICAgIGZyYWdtZW50ICYmIGZyYWdtZW50Lm0odGFyZ2V0LCBhbmNob3IpO1xuICAgIGlmICghY3VzdG9tRWxlbWVudCkge1xuICAgICAgICAvLyBvbk1vdW50IGhhcHBlbnMgYmVmb3JlIHRoZSBpbml0aWFsIGFmdGVyVXBkYXRlXG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3X29uX2Rlc3Ryb3kgPSBvbl9tb3VudC5tYXAocnVuKS5maWx0ZXIoaXNfZnVuY3Rpb24pO1xuICAgICAgICAgICAgaWYgKG9uX2Rlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICBvbl9kZXN0cm95LnB1c2goLi4ubmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRWRnZSBjYXNlIC0gY29tcG9uZW50IHdhcyBkZXN0cm95ZWQgaW1tZWRpYXRlbHksXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBsaWtlbHkgYXMgYSByZXN1bHQgb2YgYSBiaW5kaW5nIGluaXRpYWxpc2luZ1xuICAgICAgICAgICAgICAgIHJ1bl9hbGwobmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LiQkLm9uX21vdW50ID0gW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfY29tcG9uZW50KGNvbXBvbmVudCwgZGV0YWNoaW5nKSB7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQ7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJ1bl9hbGwoJCQub25fZGVzdHJveSk7XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmQoZGV0YWNoaW5nKTtcbiAgICAgICAgLy8gVE9ETyBudWxsIG91dCBvdGhlciByZWZzLCBpbmNsdWRpbmcgY29tcG9uZW50LiQkIChidXQgbmVlZCB0b1xuICAgICAgICAvLyBwcmVzZXJ2ZSBmaW5hbCBzdGF0ZT8pXG4gICAgICAgICQkLm9uX2Rlc3Ryb3kgPSAkJC5mcmFnbWVudCA9IG51bGw7XG4gICAgICAgICQkLmN0eCA9IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKSB7XG4gICAgaWYgKGNvbXBvbmVudC4kJC5kaXJ0eVswXSA9PT0gLTEpIHtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICAgIHNjaGVkdWxlX3VwZGF0ZSgpO1xuICAgICAgICBjb21wb25lbnQuJCQuZGlydHkuZmlsbCgwKTtcbiAgICB9XG4gICAgY29tcG9uZW50LiQkLmRpcnR5WyhpIC8gMzEpIHwgMF0gfD0gKDEgPDwgKGkgJSAzMSkpO1xufVxuZnVuY3Rpb24gaW5pdChjb21wb25lbnQsIG9wdGlvbnMsIGluc3RhbmNlLCBjcmVhdGVfZnJhZ21lbnQsIG5vdF9lcXVhbCwgcHJvcHMsIGFwcGVuZF9zdHlsZXMsIGRpcnR5ID0gWy0xXSkge1xuICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJCA9IHtcbiAgICAgICAgZnJhZ21lbnQ6IG51bGwsXG4gICAgICAgIGN0eDogbnVsbCxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHVwZGF0ZTogbm9vcCxcbiAgICAgICAgbm90X2VxdWFsLFxuICAgICAgICBib3VuZDogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIC8vIGxpZmVjeWNsZVxuICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgIG9uX2Rlc3Ryb3k6IFtdLFxuICAgICAgICBvbl9kaXNjb25uZWN0OiBbXSxcbiAgICAgICAgYmVmb3JlX3VwZGF0ZTogW10sXG4gICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgIGNvbnRleHQ6IG5ldyBNYXAob3B0aW9ucy5jb250ZXh0IHx8IChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pKSxcbiAgICAgICAgLy8gZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIGNhbGxiYWNrczogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIGRpcnR5LFxuICAgICAgICBza2lwX2JvdW5kOiBmYWxzZSxcbiAgICAgICAgcm9vdDogb3B0aW9ucy50YXJnZXQgfHwgcGFyZW50X2NvbXBvbmVudC4kJC5yb290XG4gICAgfTtcbiAgICBhcHBlbmRfc3R5bGVzICYmIGFwcGVuZF9zdHlsZXMoJCQucm9vdCk7XG4gICAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gICAgJCQuY3R4ID0gaW5zdGFuY2VcbiAgICAgICAgPyBpbnN0YW5jZShjb21wb25lbnQsIG9wdGlvbnMucHJvcHMgfHwge30sIChpLCByZXQsIC4uLnJlc3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVzdC5sZW5ndGggPyByZXN0WzBdIDogcmV0O1xuICAgICAgICAgICAgaWYgKCQkLmN0eCAmJiBub3RfZXF1YWwoJCQuY3R4W2ldLCAkJC5jdHhbaV0gPSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQkLnNraXBfYm91bmQgJiYgJCQuYm91bmRbaV0pXG4gICAgICAgICAgICAgICAgICAgICQkLmJvdW5kW2ldKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVhZHkpXG4gICAgICAgICAgICAgICAgICAgIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0pXG4gICAgICAgIDogW107XG4gICAgJCQudXBkYXRlKCk7XG4gICAgcmVhZHkgPSB0cnVlO1xuICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgLy8gYGZhbHNlYCBhcyBhIHNwZWNpYWwgY2FzZSBvZiBubyBET00gY29tcG9uZW50XG4gICAgJCQuZnJhZ21lbnQgPSBjcmVhdGVfZnJhZ21lbnQgPyBjcmVhdGVfZnJhZ21lbnQoJCQuY3R4KSA6IGZhbHNlO1xuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICBpZiAob3B0aW9ucy5oeWRyYXRlKSB7XG4gICAgICAgICAgICBzdGFydF9oeWRyYXRpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gY2hpbGRyZW4ob3B0aW9ucy50YXJnZXQpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50Lmwobm9kZXMpO1xuICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChkZXRhY2gpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbnRybylcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW4oY29tcG9uZW50LiQkLmZyYWdtZW50KTtcbiAgICAgICAgbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgb3B0aW9ucy50YXJnZXQsIG9wdGlvbnMuYW5jaG9yLCBvcHRpb25zLmN1c3RvbUVsZW1lbnQpO1xuICAgICAgICBlbmRfaHlkcmF0aW5nKCk7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgfVxuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbn1cbmxldCBTdmVsdGVFbGVtZW50O1xuaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFN2ZWx0ZUVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uX21vdW50IH0gPSB0aGlzLiQkO1xuICAgICAgICAgICAgdGhpcy4kJC5vbl9kaXNjb25uZWN0ID0gb25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLiQkLnNsb3R0ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy4kJC5zbG90dGVkW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyLCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzW2F0dHJdID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBydW5fYWxsKHRoaXMuJCQub25fZGlzY29ubmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgJGRlc3Ryb3koKSB7XG4gICAgICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgICAgICB9XG4gICAgICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgLy8gVE9ETyBzaG91bGQgdGhpcyBkZWxlZ2F0ZSB0byBhZGRFdmVudExpc3RlbmVyP1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFN2ZWx0ZSBjb21wb25lbnRzLiBVc2VkIHdoZW4gZGV2PWZhbHNlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnQge1xuICAgICRkZXN0cm95KCkge1xuICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgfVxuICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pKTtcbiAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgaWYgKHRoaXMuJCRzZXQgJiYgIWlzX2VtcHR5KCQkcHJvcHMpKSB7XG4gICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaXNwYXRjaF9kZXYodHlwZSwgZGV0YWlsKSB7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQodHlwZSwgT2JqZWN0LmFzc2lnbih7IHZlcnNpb246ICczLjQ5LjAnIH0sIGRldGFpbCksIHsgYnViYmxlczogdHJ1ZSB9KSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kKHRhcmdldCwgbm9kZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfaHlkcmF0aW9uX2Rldih0YXJnZXQsIG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlIH0pO1xuICAgIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0KHRhcmdldCwgbm9kZSwgYW5jaG9yKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9oeWRyYXRpb25fZGV2KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSwgYW5jaG9yIH0pO1xuICAgIGluc2VydF9oeWRyYXRpb24odGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2Rldihub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmUnLCB7IG5vZGUgfSk7XG4gICAgZGV0YWNoKG5vZGUpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2JldHdlZW5fZGV2KGJlZm9yZSwgYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nICYmIGJlZm9yZS5uZXh0U2libGluZyAhPT0gYWZ0ZXIpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaF9iZWZvcmVfZGV2KGFmdGVyKSB7XG4gICAgd2hpbGUgKGFmdGVyLnByZXZpb3VzU2libGluZykge1xuICAgICAgICBkZXRhY2hfZGV2KGFmdGVyLnByZXZpb3VzU2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2FmdGVyX2RldihiZWZvcmUpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYmVmb3JlLm5leHRTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsaXN0ZW5fZGV2KG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zLCBoYXNfcHJldmVudF9kZWZhdWx0LCBoYXNfc3RvcF9wcm9wYWdhdGlvbikge1xuICAgIGNvbnN0IG1vZGlmaWVycyA9IG9wdGlvbnMgPT09IHRydWUgPyBbJ2NhcHR1cmUnXSA6IG9wdGlvbnMgPyBBcnJheS5mcm9tKE9iamVjdC5rZXlzKG9wdGlvbnMpKSA6IFtdO1xuICAgIGlmIChoYXNfcHJldmVudF9kZWZhdWx0KVxuICAgICAgICBtb2RpZmllcnMucHVzaCgncHJldmVudERlZmF1bHQnKTtcbiAgICBpZiAoaGFzX3N0b3BfcHJvcGFnYXRpb24pXG4gICAgICAgIG1vZGlmaWVycy5wdXNoKCdzdG9wUHJvcGFnYXRpb24nKTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUFkZEV2ZW50TGlzdGVuZXInLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgY29uc3QgZGlzcG9zZSA9IGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmVFdmVudExpc3RlbmVyJywgeyBub2RlLCBldmVudCwgaGFuZGxlciwgbW9kaWZpZXJzIH0pO1xuICAgICAgICBkaXNwb3NlKCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGF0dHJfZGV2KG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZUF0dHJpYnV0ZScsIHsgbm9kZSwgYXR0cmlidXRlIH0pO1xuICAgIGVsc2VcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXRBdHRyaWJ1dGUnLCB7IG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBwcm9wX2Rldihub2RlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBub2RlW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0UHJvcGVydHknLCB7IG5vZGUsIHByb3BlcnR5LCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIGRhdGFzZXRfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGUuZGF0YXNldFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldERhdGFzZXQnLCB7IG5vZGUsIHByb3BlcnR5LCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIHNldF9kYXRhX2Rldih0ZXh0LCBkYXRhKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgICBpZiAodGV4dC53aG9sZVRleHQgPT09IGRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldERhdGEnLCB7IG5vZGU6IHRleHQsIGRhdGEgfSk7XG4gICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQoYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdzdHJpbmcnICYmICEoYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmICdsZW5ndGgnIGluIGFyZykpIHtcbiAgICAgICAgbGV0IG1zZyA9ICd7I2VhY2h9IG9ubHkgaXRlcmF0ZXMgb3ZlciBhcnJheS1saWtlIG9iamVjdHMuJztcbiAgICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgYXJnICYmIFN5bWJvbC5pdGVyYXRvciBpbiBhcmcpIHtcbiAgICAgICAgICAgIG1zZyArPSAnIFlvdSBjYW4gdXNlIGEgc3ByZWFkIHRvIGNvbnZlcnQgdGhpcyBpdGVyYWJsZSBpbnRvIGFuIGFycmF5Lic7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVfc2xvdHMobmFtZSwgc2xvdCwga2V5cykge1xuICAgIGZvciAoY29uc3Qgc2xvdF9rZXkgb2YgT2JqZWN0LmtleXMoc2xvdCkpIHtcbiAgICAgICAgaWYgKCF+a2V5cy5pbmRleE9mKHNsb3Rfa2V5KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGA8JHtuYW1lfT4gcmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBzbG90IFwiJHtzbG90X2tleX1cIi5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX2R5bmFtaWNfZWxlbWVudCh0YWcpIHtcbiAgICBjb25zdCBpc19zdHJpbmcgPSB0eXBlb2YgdGFnID09PSAnc3RyaW5nJztcbiAgICBpZiAodGFnICYmICFpc19zdHJpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCc8c3ZlbHRlOmVsZW1lbnQ+IGV4cGVjdHMgXCJ0aGlzXCIgYXR0cmlidXRlIHRvIGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3ZvaWRfZHluYW1pY19lbGVtZW50KHRhZykge1xuICAgIGlmICh0YWcgJiYgaXNfdm9pZCh0YWcpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgPHN2ZWx0ZTplbGVtZW50IHRoaXM9XCIke3RhZ31cIj4gaXMgc2VsZi1jbG9zaW5nIGFuZCBjYW5ub3QgaGF2ZSBjb250ZW50LmApO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgU3ZlbHRlIGNvbXBvbmVudHMgd2l0aCBzb21lIG1pbm9yIGRldi1lbmhhbmNlbWVudHMuIFVzZWQgd2hlbiBkZXY9dHJ1ZS5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50RGV2IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCAoIW9wdGlvbnMudGFyZ2V0ICYmICFvcHRpb25zLiQkaW5saW5lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ3RhcmdldCcgaXMgYSByZXF1aXJlZCBvcHRpb25cIik7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgJGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLiRkZXN0cm95KCk7XG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvbXBvbmVudCB3YXMgYWxyZWFkeSBkZXN0cm95ZWQnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICAgIH07XG4gICAgfVxuICAgICRjYXB0dXJlX3N0YXRlKCkgeyB9XG4gICAgJGluamVjdF9zdGF0ZSgpIHsgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIHRvIGNyZWF0ZSBzdHJvbmdseSB0eXBlZCBTdmVsdGUgY29tcG9uZW50cy5cbiAqIFRoaXMgb25seSBleGlzdHMgZm9yIHR5cGluZyBwdXJwb3NlcyBhbmQgc2hvdWxkIGJlIHVzZWQgaW4gYC5kLnRzYCBmaWxlcy5cbiAqXG4gKiAjIyMgRXhhbXBsZTpcbiAqXG4gKiBZb3UgaGF2ZSBjb21wb25lbnQgbGlicmFyeSBvbiBucG0gY2FsbGVkIGBjb21wb25lbnQtbGlicmFyeWAsIGZyb20gd2hpY2hcbiAqIHlvdSBleHBvcnQgYSBjb21wb25lbnQgY2FsbGVkIGBNeUNvbXBvbmVudGAuIEZvciBTdmVsdGUrVHlwZVNjcmlwdCB1c2VycyxcbiAqIHlvdSB3YW50IHRvIHByb3ZpZGUgdHlwaW5ncy4gVGhlcmVmb3JlIHlvdSBjcmVhdGUgYSBgaW5kZXguZC50c2A6XG4gKiBgYGB0c1xuICogaW1wb3J0IHsgU3ZlbHRlQ29tcG9uZW50VHlwZWQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gKiBleHBvcnQgY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnRUeXBlZDx7Zm9vOiBzdHJpbmd9PiB7fVxuICogYGBgXG4gKiBUeXBpbmcgdGhpcyBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgSURFcyBsaWtlIFZTIENvZGUgd2l0aCB0aGUgU3ZlbHRlIGV4dGVuc2lvblxuICogdG8gcHJvdmlkZSBpbnRlbGxpc2Vuc2UgYW5kIHRvIHVzZSB0aGUgY29tcG9uZW50IGxpa2UgdGhpcyBpbiBhIFN2ZWx0ZSBmaWxlXG4gKiB3aXRoIFR5cGVTY3JpcHQ6XG4gKiBgYGBzdmVsdGVcbiAqIDxzY3JpcHQgbGFuZz1cInRzXCI+XG4gKiBcdGltcG9ydCB7IE15Q29tcG9uZW50IH0gZnJvbSBcImNvbXBvbmVudC1saWJyYXJ5XCI7XG4gKiA8L3NjcmlwdD5cbiAqIDxNeUNvbXBvbmVudCBmb289eydiYXInfSAvPlxuICogYGBgXG4gKlxuICogIyMjIyBXaHkgbm90IG1ha2UgdGhpcyBwYXJ0IG9mIGBTdmVsdGVDb21wb25lbnQoRGV2KWA/XG4gKiBCZWNhdXNlXG4gKiBgYGB0c1xuICogY2xhc3MgQVN1YmNsYXNzT2ZTdmVsdGVDb21wb25lbnQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQ8e2Zvbzogc3RyaW5nfT4ge31cbiAqIGNvbnN0IGNvbXBvbmVudDogdHlwZW9mIFN2ZWx0ZUNvbXBvbmVudCA9IEFTdWJjbGFzc09mU3ZlbHRlQ29tcG9uZW50O1xuICogYGBgXG4gKiB3aWxsIHRocm93IGEgdHlwZSBlcnJvciwgc28gd2UgbmVlZCB0byBzZXBhcmF0ZSB0aGUgbW9yZSBzdHJpY3RseSB0eXBlZCBjbGFzcy5cbiAqL1xuY2xhc3MgU3ZlbHRlQ29tcG9uZW50VHlwZWQgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnREZXYge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgfVxufVxuZnVuY3Rpb24gbG9vcF9ndWFyZCh0aW1lb3V0KSB7XG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnQgPiB0aW1lb3V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZmluaXRlIGxvb3AgZGV0ZWN0ZWQnKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCB7IEh0bWxUYWcsIEh0bWxUYWdIeWRyYXRpb24sIFN2ZWx0ZUNvbXBvbmVudCwgU3ZlbHRlQ29tcG9uZW50RGV2LCBTdmVsdGVDb21wb25lbnRUeXBlZCwgU3ZlbHRlRWxlbWVudCwgYWN0aW9uX2Rlc3Ryb3llciwgYWRkX2F0dHJpYnV0ZSwgYWRkX2NsYXNzZXMsIGFkZF9mbHVzaF9jYWxsYmFjaywgYWRkX2xvY2F0aW9uLCBhZGRfcmVuZGVyX2NhbGxiYWNrLCBhZGRfcmVzaXplX2xpc3RlbmVyLCBhZGRfc3R5bGVzLCBhZGRfdHJhbnNmb3JtLCBhZnRlclVwZGF0ZSwgYXBwZW5kLCBhcHBlbmRfZGV2LCBhcHBlbmRfZW1wdHlfc3R5bGVzaGVldCwgYXBwZW5kX2h5ZHJhdGlvbiwgYXBwZW5kX2h5ZHJhdGlvbl9kZXYsIGFwcGVuZF9zdHlsZXMsIGFzc2lnbiwgYXR0ciwgYXR0cl9kZXYsIGF0dHJpYnV0ZV90b19vYmplY3QsIGJlZm9yZVVwZGF0ZSwgYmluZCwgYmluZGluZ19jYWxsYmFja3MsIGJsYW5rX29iamVjdCwgYnViYmxlLCBjaGVja19vdXRyb3MsIGNoaWxkcmVuLCBjbGFpbV9jb21wb25lbnQsIGNsYWltX2VsZW1lbnQsIGNsYWltX2h0bWxfdGFnLCBjbGFpbV9zcGFjZSwgY2xhaW1fc3ZnX2VsZW1lbnQsIGNsYWltX3RleHQsIGNsZWFyX2xvb3BzLCBjb21wb25lbnRfc3Vic2NyaWJlLCBjb21wdXRlX3Jlc3RfcHJvcHMsIGNvbXB1dGVfc2xvdHMsIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlciwgY3JlYXRlX2FuaW1hdGlvbiwgY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbiwgY3JlYXRlX2NvbXBvbmVudCwgY3JlYXRlX2luX3RyYW5zaXRpb24sIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbiwgY3JlYXRlX3Nsb3QsIGNyZWF0ZV9zc3JfY29tcG9uZW50LCBjdXJyZW50X2NvbXBvbmVudCwgY3VzdG9tX2V2ZW50LCBkYXRhc2V0X2RldiwgZGVidWcsIGRlc3Ryb3lfYmxvY2ssIGRlc3Ryb3lfY29tcG9uZW50LCBkZXN0cm95X2VhY2gsIGRldGFjaCwgZGV0YWNoX2FmdGVyX2RldiwgZGV0YWNoX2JlZm9yZV9kZXYsIGRldGFjaF9iZXR3ZWVuX2RldiwgZGV0YWNoX2RldiwgZGlydHlfY29tcG9uZW50cywgZGlzcGF0Y2hfZGV2LCBlYWNoLCBlbGVtZW50LCBlbGVtZW50X2lzLCBlbXB0eSwgZW5kX2h5ZHJhdGluZywgZXNjYXBlLCBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlLCBlc2NhcGVfb2JqZWN0LCBleGNsdWRlX2ludGVybmFsX3Byb3BzLCBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9hbmRfb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9wb3NpdGlvbiwgZmx1c2gsIGdldEFsbENvbnRleHRzLCBnZXRDb250ZXh0LCBnZXRfYWxsX2RpcnR5X2Zyb21fc2NvcGUsIGdldF9iaW5kaW5nX2dyb3VwX3ZhbHVlLCBnZXRfY3VycmVudF9jb21wb25lbnQsIGdldF9jdXN0b21fZWxlbWVudHNfc2xvdHMsIGdldF9yb290X2Zvcl9zdHlsZSwgZ2V0X3Nsb3RfY2hhbmdlcywgZ2V0X3NwcmVhZF9vYmplY3QsIGdldF9zcHJlYWRfdXBkYXRlLCBnZXRfc3RvcmVfdmFsdWUsIGdsb2JhbHMsIGdyb3VwX291dHJvcywgaGFuZGxlX3Byb21pc2UsIGhhc0NvbnRleHQsIGhhc19wcm9wLCBpZGVudGl0eSwgaW5pdCwgaW5zZXJ0LCBpbnNlcnRfZGV2LCBpbnNlcnRfaHlkcmF0aW9uLCBpbnNlcnRfaHlkcmF0aW9uX2RldiwgaW50cm9zLCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciwgaXNfY2xpZW50LCBpc19jcm9zc29yaWdpbiwgaXNfZW1wdHksIGlzX2Z1bmN0aW9uLCBpc19wcm9taXNlLCBpc192b2lkLCBsaXN0ZW4sIGxpc3Rlbl9kZXYsIGxvb3AsIGxvb3BfZ3VhcmQsIG1lcmdlX3Nzcl9zdHlsZXMsIG1pc3NpbmdfY29tcG9uZW50LCBtb3VudF9jb21wb25lbnQsIG5vb3AsIG5vdF9lcXVhbCwgbm93LCBudWxsX3RvX2VtcHR5LCBvYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzLCBvbkRlc3Ryb3ksIG9uTW91bnQsIG9uY2UsIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrLCBwcmV2ZW50X2RlZmF1bHQsIHByb3BfZGV2LCBxdWVyeV9zZWxlY3Rvcl9hbGwsIHJhZiwgcnVuLCBydW5fYWxsLCBzYWZlX25vdF9lcXVhbCwgc2NoZWR1bGVfdXBkYXRlLCBzZWxlY3RfbXVsdGlwbGVfdmFsdWUsIHNlbGVjdF9vcHRpb24sIHNlbGVjdF9vcHRpb25zLCBzZWxlY3RfdmFsdWUsIHNlbGYsIHNldENvbnRleHQsIHNldF9hdHRyaWJ1dGVzLCBzZXRfY3VycmVudF9jb21wb25lbnQsIHNldF9jdXN0b21fZWxlbWVudF9kYXRhLCBzZXRfZGF0YSwgc2V0X2RhdGFfZGV2LCBzZXRfaW5wdXRfdHlwZSwgc2V0X2lucHV0X3ZhbHVlLCBzZXRfbm93LCBzZXRfcmFmLCBzZXRfc3RvcmVfdmFsdWUsIHNldF9zdHlsZSwgc2V0X3N2Z19hdHRyaWJ1dGVzLCBzcGFjZSwgc3ByZWFkLCBzcmNfdXJsX2VxdWFsLCBzdGFydF9oeWRyYXRpbmcsIHN0b3BfcHJvcGFnYXRpb24sIHN1YnNjcmliZSwgc3ZnX2VsZW1lbnQsIHRleHQsIHRpY2ssIHRpbWVfcmFuZ2VzX3RvX2FycmF5LCB0b19udW1iZXIsIHRvZ2dsZV9jbGFzcywgdHJhbnNpdGlvbl9pbiwgdHJhbnNpdGlvbl9vdXQsIHRydXN0ZWQsIHVwZGF0ZV9hd2FpdF9ibG9ja19icmFuY2gsIHVwZGF0ZV9rZXllZF9lYWNoLCB1cGRhdGVfc2xvdCwgdXBkYXRlX3Nsb3RfYmFzZSwgdmFsaWRhdGVfY29tcG9uZW50LCB2YWxpZGF0ZV9keW5hbWljX2VsZW1lbnQsIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQsIHZhbGlkYXRlX2VhY2hfa2V5cywgdmFsaWRhdGVfc2xvdHMsIHZhbGlkYXRlX3N0b3JlLCB2YWxpZGF0ZV92b2lkX2R5bmFtaWNfZWxlbWVudCwgeGxpbmtfYXR0ciB9O1xuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEluKHN0YXRlLCByZWNlaXZlcikge1xyXG4gICAgaWYgKHJlY2VpdmVyID09PSBudWxsIHx8ICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlY2VpdmVyICE9PSBcImZ1bmN0aW9uXCIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHVzZSAnaW4nIG9wZXJhdG9yIG9uIG5vbi1vYmplY3RcIik7XHJcbiAgICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xyXG59XHJcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xuXG4vLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXksIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWwpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0J1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodmFsKSAmJiB2YWwuY29uc3RydWN0b3IgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbC5jb25zdHJ1Y3RvcilcbiAgICAmJiB0eXBlb2YgdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcih2YWwpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZvcm1EYXRhXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykgJiYgKEFycmF5QnVmZmVyLmlzVmlldykpIHtcbiAgICByZXN1bHQgPSBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSAodmFsKSAmJiAodmFsLmJ1ZmZlcikgJiYgKGlzQXJyYXlCdWZmZXIodmFsLmJ1ZmZlcikpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmluZywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBwbGFpbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgcGxhaW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWwpIHtcbiAgaWYgKHRvU3RyaW5nLmNhbGwodmFsKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbCk7XG4gIHJldHVybiBwcm90b3R5cGUgPT09IG51bGwgfHwgcHJvdG90eXBlID09PSBPYmplY3QucHJvdG90eXBlO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRmlsZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQmxvYih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyZWFtLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBVUkxTZWFyY2hQYXJhbXNdJztcbn1cblxuLyoqXG4gKiBUcmltIGV4Y2VzcyB3aGl0ZXNwYWNlIG9mZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuICogQHJldHVybnMge1N0cmluZ30gVGhlIFN0cmluZyBmcmVlZCBvZiBleGNlc3Mgd2hpdGVzcGFjZVxuICovXG5mdW5jdGlvbiB0cmltKHN0cikge1xuICByZXR1cm4gc3RyLnRyaW0gPyBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBUaGlzIGFsbG93cyBheGlvcyB0byBydW4gaW4gYSB3ZWIgd29ya2VyLCBhbmQgcmVhY3QtbmF0aXZlLlxuICogQm90aCBlbnZpcm9ubWVudHMgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdCwgYnV0IG5vdCBmdWxseSBzdGFuZGFyZCBnbG9iYWxzLlxuICpcbiAqIHdlYiB3b3JrZXJzOlxuICogIHR5cGVvZiB3aW5kb3cgLT4gdW5kZWZpbmVkXG4gKiAgdHlwZW9mIGRvY3VtZW50IC0+IHVuZGVmaW5lZFxuICpcbiAqIHJlYWN0LW5hdGl2ZTpcbiAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnUmVhY3ROYXRpdmUnXG4gKiBuYXRpdmVzY3JpcHRcbiAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnTmF0aXZlU2NyaXB0JyBvciAnTlMnXG4gKi9cbmZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgKG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLnByb2R1Y3QgPT09ICdOYXRpdmVTY3JpcHQnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLnByb2R1Y3QgPT09ICdOUycpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnXG4gICk7XG59XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCBpbnZva2luZyBhIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBpbmRleCwgYW5kIGNvbXBsZXRlIGFycmF5IGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwga2V5LCBhbmQgY29tcGxldGUgb2JqZWN0IGZvciBlYWNoIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIGZvciBlYWNoIGl0ZW1cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7XG4gIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlXG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAgIG9iaiA9IFtvYmpdO1xuICB9XG5cbiAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBhcnJheSB2YWx1ZXNcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXNcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQWNjZXB0cyB2YXJhcmdzIGV4cGVjdGluZyBlYWNoIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCwgdGhlblxuICogaW1tdXRhYmx5IG1lcmdlcyB0aGUgcHJvcGVydGllcyBvZiBlYWNoIG9iamVjdCBhbmQgcmV0dXJucyByZXN1bHQuXG4gKlxuICogV2hlbiBtdWx0aXBsZSBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUga2V5IHRoZSBsYXRlciBvYmplY3QgaW5cbiAqIHRoZSBhcmd1bWVudHMgbGlzdCB3aWxsIHRha2UgcHJlY2VkZW5jZS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgcmVzdWx0ID0gbWVyZ2Uoe2ZvbzogMTIzfSwge2ZvbzogNDU2fSk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQuZm9vKTsgLy8gb3V0cHV0cyA0NTZcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZVxuICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIG1lcmdlKC8qIG9iajEsIG9iajIsIG9iajMsIC4uLiAqLykge1xuICB2YXIgcmVzdWx0ID0ge307XG4gIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG4gICAgaWYgKGlzUGxhaW5PYmplY3QocmVzdWx0W2tleV0pICYmIGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgcmVzdWx0W2tleV0gPSBtZXJnZShyZXN1bHRba2V5XSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgICAgcmVzdWx0W2tleV0gPSBtZXJnZSh7fSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWwuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZFxuICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGFcbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHtcbiAgZm9yRWFjaChiLCBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYVtrZXldID0gdmFsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhO1xufVxuXG4vKipcbiAqIFJlbW92ZSBieXRlIG9yZGVyIG1hcmtlci4gVGhpcyBjYXRjaGVzIEVGIEJCIEJGICh0aGUgVVRGLTggQk9NKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IHdpdGggQk9NXG4gKiBAcmV0dXJuIHtzdHJpbmd9IGNvbnRlbnQgdmFsdWUgd2l0aG91dCBCT01cbiAqL1xuZnVuY3Rpb24gc3RyaXBCT00oY29udGVudCkge1xuICBpZiAoY29udGVudC5jaGFyQ29kZUF0KDApID09PSAweEZFRkYpIHtcbiAgICBjb250ZW50ID0gY29udGVudC5zbGljZSgxKTtcbiAgfVxuICByZXR1cm4gY29udGVudDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzQXJyYXk6IGlzQXJyYXksXG4gIGlzQXJyYXlCdWZmZXI6IGlzQXJyYXlCdWZmZXIsXG4gIGlzQnVmZmVyOiBpc0J1ZmZlcixcbiAgaXNGb3JtRGF0YTogaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LFxuICBpc1N0cmluZzogaXNTdHJpbmcsXG4gIGlzTnVtYmVyOiBpc051bWJlcixcbiAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuICBpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuICBpc1VuZGVmaW5lZDogaXNVbmRlZmluZWQsXG4gIGlzRGF0ZTogaXNEYXRlLFxuICBpc0ZpbGU6IGlzRmlsZSxcbiAgaXNCbG9iOiBpc0Jsb2IsXG4gIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gIGlzU3RyZWFtOiBpc1N0cmVhbSxcbiAgaXNVUkxTZWFyY2hQYXJhbXM6IGlzVVJMU2VhcmNoUGFyYW1zLFxuICBpc1N0YW5kYXJkQnJvd3NlckVudjogaXNTdGFuZGFyZEJyb3dzZXJFbnYsXG4gIGZvckVhY2g6IGZvckVhY2gsXG4gIG1lcmdlOiBtZXJnZSxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIHRyaW06IHRyaW0sXG4gIHN0cmlwQk9NOiBzdHJpcEJPTVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgcGFyYW1zU2VyaWFsaXplcikge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIGlmIChwYXJhbXNTZXJpYWxpemVyKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcbiAgfSBlbHNlIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAga2V5ID0ga2V5ICsgJ1tdJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbCA9IFt2YWxdO1xuICAgICAgfVxuXG4gICAgICB1dGlscy5mb3JFYWNoKHZhbCwgZnVuY3Rpb24gcGFyc2VWYWx1ZSh2KSB7XG4gICAgICAgIGlmICh1dGlscy5pc0RhdGUodikpIHtcbiAgICAgICAgICB2ID0gdi50b0lTT1N0cmluZygpO1xuICAgICAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KHYpKSB7XG4gICAgICAgICAgdiA9IEpTT04uc3RyaW5naWZ5KHYpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnRzLnB1c2goZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodikpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFydHMuam9pbignJicpO1xuICB9XG5cbiAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMpIHtcbiAgICB2YXIgaGFzaG1hcmtJbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG4gICAgaWYgKGhhc2htYXJrSW5kZXggIT09IC0xKSB7XG4gICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgaGFzaG1hcmtJbmRleCk7XG4gICAgfVxuXG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkLCBvcHRpb25zKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkLFxuICAgIHN5bmNocm9ub3VzOiBvcHRpb25zID8gb3B0aW9ucy5zeW5jaHJvbm91cyA6IGZhbHNlLFxuICAgIHJ1bldoZW46IG9wdGlvbnMgPyBvcHRpb25zLnJ1bldoZW4gOiBudWxsXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgbm9ybWFsaXplZE5hbWUpIHtcbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7XG4gICAgaWYgKG5hbWUgIT09IG5vcm1hbGl6ZWROYW1lICYmIG5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9ybWFsaXplZE5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgaGVhZGVyc1tub3JtYWxpemVkTmFtZV0gPSB2YWx1ZTtcbiAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdO1xuICAgIH1cbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIGVycm9yLmNvbmZpZyA9IGNvbmZpZztcbiAgaWYgKGNvZGUpIHtcbiAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgfVxuXG4gIGVycm9yLnJlcXVlc3QgPSByZXF1ZXN0O1xuICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICBlcnJvci5pc0F4aW9zRXJyb3IgPSB0cnVlO1xuXG4gIGVycm9yLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLy8gU3RhbmRhcmRcbiAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIC8vIE1pY3Jvc29mdFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sXG4gICAgICBudW1iZXI6IHRoaXMubnVtYmVyLFxuICAgICAgLy8gTW96aWxsYVxuICAgICAgZmlsZU5hbWU6IHRoaXMuZmlsZU5hbWUsXG4gICAgICBsaW5lTnVtYmVyOiB0aGlzLmxpbmVOdW1iZXIsXG4gICAgICBjb2x1bW5OdW1iZXI6IHRoaXMuY29sdW1uTnVtYmVyLFxuICAgICAgc3RhY2s6IHRoaXMuc3RhY2ssXG4gICAgICAvLyBBeGlvc1xuICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgIGNvZGU6IHRoaXMuY29kZSxcbiAgICAgIHN0YXR1czogdGhpcy5yZXNwb25zZSAmJiB0aGlzLnJlc3BvbnNlLnN0YXR1cyA/IHRoaXMucmVzcG9uc2Uuc3RhdHVzIDogbnVsbFxuICAgIH07XG4gIH07XG4gIHJldHVybiBlcnJvcjtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzaWxlbnRKU09OUGFyc2luZzogdHJ1ZSxcbiAgZm9yY2VkSlNPTlBhcnNpbmc6IHRydWUsXG4gIGNsYXJpZnlUaW1lb3V0RXJyb3I6IGZhbHNlXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW5oYW5jZUVycm9yID0gcmVxdWlyZSgnLi9lbmhhbmNlRXJyb3InKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UsIGNvbmZpZywgZXJyb3IgY29kZSwgcmVxdWVzdCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2UuXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlRXJyb3IobWVzc2FnZSwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi9jcmVhdGVFcnJvcicpO1xuXG4vKipcbiAqIFJlc29sdmUgb3IgcmVqZWN0IGEgUHJvbWlzZSBiYXNlZCBvbiByZXNwb25zZSBzdGF0dXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBBIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgQSBmdW5jdGlvbiB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgVGhlIHJlc3BvbnNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gIHZhciB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztcbiAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgfSBlbHNlIHtcbiAgICByZWplY3QoY3JlYXRlRXJyb3IoXG4gICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmVzcG9uc2UuY29uZmlnLFxuICAgICAgbnVsbCxcbiAgICAgIHJlc3BvbnNlLnJlcXVlc3QsXG4gICAgICByZXNwb25zZVxuICAgICkpO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICAgIHZhciBjb29raWUgPSBbXTtcbiAgICAgICAgICBjb29raWUucHVzaChuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChuYW1lKSB7XG4gICAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcbiAgICAgICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG4gICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQoKSB7IHJldHVybiBudWxsOyB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgICB9O1xuICAgIH0pKClcbik7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkge1xuICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG4gIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi5cbiAgcmV0dXJuIC9eKFthLXpdW2EtelxcZCtcXC0uXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSTCBUaGUgYmFzZSBVUkxcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcbiAgcmV0dXJuIHJlbGF0aXZlVVJMXG4gICAgPyBiYXNlVVJMLnJlcGxhY2UoL1xcLyskLywgJycpICsgJy8nICsgcmVsYXRpdmVVUkwucmVwbGFjZSgvXlxcLysvLCAnJylcbiAgICA6IGJhc2VVUkw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNBYnNvbHV0ZVVSTCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTCcpO1xudmFyIGNvbWJpbmVVUkxzID0gcmVxdWlyZSgnLi4vaGVscGVycy9jb21iaW5lVVJMcycpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgYmFzZVVSTCB3aXRoIHRoZSByZXF1ZXN0ZWRVUkwsXG4gKiBvbmx5IHdoZW4gdGhlIHJlcXVlc3RlZFVSTCBpcyBub3QgYWxyZWFkeSBhbiBhYnNvbHV0ZSBVUkwuXG4gKiBJZiB0aGUgcmVxdWVzdFVSTCBpcyBhYnNvbHV0ZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSByZXF1ZXN0ZWRVUkwgdW50b3VjaGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RlZFVSTCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgdG8gY29tYmluZVxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIGZ1bGwgcGF0aFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkRnVsbFBhdGgoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKSB7XG4gIGlmIChiYXNlVVJMICYmICFpc0Fic29sdXRlVVJMKHJlcXVlc3RlZFVSTCkpIHtcbiAgICByZXR1cm4gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKTtcbiAgfVxuICByZXR1cm4gcmVxdWVzdGVkVVJMO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZVxuLy8gYy5mLiBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVyc1xudmFyIGlnbm9yZUR1cGxpY2F0ZU9mID0gW1xuICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG4gICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcbiAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcbl07XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIGBgYFxuICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcbiAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHt9O1xuICB2YXIga2V5O1xuICB2YXIgdmFsO1xuICB2YXIgaTtcblxuICBpZiAoIWhlYWRlcnMpIHsgcmV0dXJuIHBhcnNlZDsgfVxuXG4gIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgaWYgKHBhcnNlZFtrZXldICYmIGlnbm9yZUR1cGxpY2F0ZU9mLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuICAgICAgICBwYXJzZWRba2V5XSA9IChwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldIDogW10pLmNvbmNhdChbdmFsXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBoYXZlIGZ1bGwgc3VwcG9ydCBvZiB0aGUgQVBJcyBuZWVkZWQgdG8gdGVzdFxuICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cbiAgICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgdmFyIG1zaWUgPSAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgdmFyIHVybFBhcnNpbmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgdmFyIG9yaWdpblVSTDtcblxuICAgICAgLyoqXG4gICAgKiBQYXJzZSBhIFVSTCB0byBkaXNjb3ZlciBpdCdzIGNvbXBvbmVudHNcbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgdG8gYmUgcGFyc2VkXG4gICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICovXG4gICAgICBmdW5jdGlvbiByZXNvbHZlVVJMKHVybCkge1xuICAgICAgICB2YXIgaHJlZiA9IHVybDtcblxuICAgICAgICBpZiAobXNpZSkge1xuICAgICAgICAvLyBJRSBuZWVkcyBhdHRyaWJ1dGUgc2V0IHR3aWNlIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG4gICAgICAgICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7XG4gICAgICAgIH1cblxuICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblxuICAgICAgICAvLyB1cmxQYXJzaW5nTm9kZSBwcm92aWRlcyB0aGUgVXJsVXRpbHMgaW50ZXJmYWNlIC0gaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICAgICAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxuICAgICAgICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG4gICAgICAgICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgICAgICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsXG4gICAgICAgICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuICAgICAgICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgICAgICAgcGF0aG5hbWU6ICh1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJykgP1xuICAgICAgICAgICAgdXJsUGFyc2luZ05vZGUucGF0aG5hbWUgOlxuICAgICAgICAgICAgJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgb3JpZ2luVVJMID0gcmVzb2x2ZVVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cbiAgICAgIC8qKlxuICAgICogRGV0ZXJtaW5lIGlmIGEgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGN1cnJlbnQgbG9jYXRpb25cbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdFVSTCBUaGUgVVJMIHRvIHRlc3RcbiAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luLCBvdGhlcndpc2UgZmFsc2VcbiAgICAqL1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyZXF1ZXN0VVJMKSB7XG4gICAgICAgIHZhciBwYXJzZWQgPSAodXRpbHMuaXNTdHJpbmcocmVxdWVzdFVSTCkpID8gcmVzb2x2ZVVSTChyZXF1ZXN0VVJMKSA6IHJlcXVlc3RVUkw7XG4gICAgICAgIHJldHVybiAocGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VUkwucHJvdG9jb2wgJiZcbiAgICAgICAgICAgIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VUkwuaG9zdCk7XG4gICAgICB9O1xuICAgIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudnMgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gICAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfTtcbiAgICB9KSgpXG4pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuICovXG5mdW5jdGlvbiBDYW5jZWwobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xufVxuXG5DYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpO1xufTtcblxuQ2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWw7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBzZXR0bGUgPSByZXF1aXJlKCcuLy4uL2NvcmUvc2V0dGxlJyk7XG52YXIgY29va2llcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb29raWVzJyk7XG52YXIgYnVpbGRVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBidWlsZEZ1bGxQYXRoID0gcmVxdWlyZSgnLi4vY29yZS9idWlsZEZ1bGxQYXRoJyk7XG52YXIgcGFyc2VIZWFkZXJzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL3BhcnNlSGVhZGVycycpO1xudmFyIGlzVVJMU2FtZU9yaWdpbiA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9pc1VSTFNhbWVPcmlnaW4nKTtcbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJy4uL2NvcmUvY3JlYXRlRXJyb3InKTtcbnZhciB0cmFuc2l0aW9uYWxEZWZhdWx0cyA9IHJlcXVpcmUoJy4uL2RlZmF1bHRzL3RyYW5zaXRpb25hbCcpO1xudmFyIENhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9DYW5jZWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB4aHJBZGFwdGVyKGNvbmZpZykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciByZXF1ZXN0RGF0YSA9IGNvbmZpZy5kYXRhO1xuICAgIHZhciByZXF1ZXN0SGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xuICAgIHZhciByZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuICAgIHZhciBvbkNhbmNlbGVkO1xuICAgIGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbi51bnN1YnNjcmliZShvbkNhbmNlbGVkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbmZpZy5zaWduYWwpIHtcbiAgICAgICAgY29uZmlnLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uQ2FuY2VsZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKHJlcXVlc3REYXRhKSkge1xuICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuICAgIH1cblxuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAvLyBIVFRQIGJhc2ljIGF1dGhlbnRpY2F0aW9uXG4gICAgaWYgKGNvbmZpZy5hdXRoKSB7XG4gICAgICB2YXIgdXNlcm5hbWUgPSBjb25maWcuYXV0aC51c2VybmFtZSB8fCAnJztcbiAgICAgIHZhciBwYXNzd29yZCA9IGNvbmZpZy5hdXRoLnBhc3N3b3JkID8gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGNvbmZpZy5hdXRoLnBhc3N3b3JkKSkgOiAnJztcbiAgICAgIHJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG4gICAgfVxuXG4gICAgdmFyIGZ1bGxQYXRoID0gYnVpbGRGdWxsUGF0aChjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7XG4gICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoZnVsbFBhdGgsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKSwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuICAgIHJlcXVlc3QudGltZW91dCA9IGNvbmZpZy50aW1lb3V0O1xuXG4gICAgZnVuY3Rpb24gb25sb2FkZW5kKCkge1xuICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIFByZXBhcmUgdGhlIHJlc3BvbnNlXG4gICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzID0gJ2dldEFsbFJlc3BvbnNlSGVhZGVycycgaW4gcmVxdWVzdCA/IHBhcnNlSGVhZGVycyhyZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSA6IG51bGw7XG4gICAgICB2YXIgcmVzcG9uc2VEYXRhID0gIXJlc3BvbnNlVHlwZSB8fCByZXNwb25zZVR5cGUgPT09ICd0ZXh0JyB8fCAgcmVzcG9uc2VUeXBlID09PSAnanNvbicgP1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogcmVxdWVzdC5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICByZXF1ZXN0OiByZXF1ZXN0XG4gICAgICB9O1xuXG4gICAgICBzZXR0bGUoZnVuY3Rpb24gX3Jlc29sdmUodmFsdWUpIHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0sIGZ1bmN0aW9uIF9yZWplY3QoZXJyKSB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCByZXNwb25zZSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICgnb25sb2FkZW5kJyBpbiByZXF1ZXN0KSB7XG4gICAgICAvLyBVc2Ugb25sb2FkZW5kIGlmIGF2YWlsYWJsZVxuICAgICAgcmVxdWVzdC5vbmxvYWRlbmQgPSBvbmxvYWRlbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGUgdG8gZW11bGF0ZSBvbmxvYWRlbmRcbiAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0IHx8IHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuICAgICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuICAgICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWFkeXN0YXRlIGhhbmRsZXIgaXMgY2FsbGluZyBiZWZvcmUgb25lcnJvciBvciBvbnRpbWVvdXQgaGFuZGxlcnMsXG4gICAgICAgIC8vIHNvIHdlIHNob3VsZCBjYWxsIG9ubG9hZGVuZCBvbiB0aGUgbmV4dCAndGljaydcbiAgICAgICAgc2V0VGltZW91dChvbmxvYWRlbmQpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgYnJvd3NlciByZXF1ZXN0IGNhbmNlbGxhdGlvbiAoYXMgb3Bwb3NlZCB0byBhIG1hbnVhbCBjYW5jZWxsYXRpb24pXG4gICAgcmVxdWVzdC5vbmFib3J0ID0gZnVuY3Rpb24gaGFuZGxlQWJvcnQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcsIGNvbmZpZywgJ0VDT05OQUJPUlRFRCcsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnNcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcbiAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlclxuICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBjb25maWcsIG51bGwsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSB0aW1lb3V0XG4gICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge1xuICAgICAgdmFyIHRpbWVvdXRFcnJvck1lc3NhZ2UgPSBjb25maWcudGltZW91dCA/ICd0aW1lb3V0IG9mICcgKyBjb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCcgOiAndGltZW91dCBleGNlZWRlZCc7XG4gICAgICB2YXIgdHJhbnNpdGlvbmFsID0gY29uZmlnLnRyYW5zaXRpb25hbCB8fCB0cmFuc2l0aW9uYWxEZWZhdWx0cztcbiAgICAgIGlmIChjb25maWcudGltZW91dEVycm9yTWVzc2FnZSkge1xuICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlID0gY29uZmlnLnRpbWVvdXRFcnJvck1lc3NhZ2U7XG4gICAgICB9XG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoXG4gICAgICAgIHRpbWVvdXRFcnJvck1lc3NhZ2UsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgdHJhbnNpdGlvbmFsLmNsYXJpZnlUaW1lb3V0RXJyb3IgPyAnRVRJTUVET1VUJyA6ICdFQ09OTkFCT1JURUQnLFxuICAgICAgICByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7XG4gICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oZnVsbFBhdGgpKSAmJiBjb25maWcueHNyZkNvb2tpZU5hbWUgP1xuICAgICAgICBjb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKSA6XG4gICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7XG4gICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykge1xuICAgICAgICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGhlYWRlciB0byB0aGUgcmVxdWVzdFxuICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9ICEhY29uZmlnLndpdGhDcmVkZW50aWFscztcbiAgICB9XG5cbiAgICAvLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKHJlc3BvbnNlVHlwZSAmJiByZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWRcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50c1xuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4gfHwgY29uZmlnLnNpZ25hbCkge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAgIG9uQ2FuY2VsZWQgPSBmdW5jdGlvbihjYW5jZWwpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlamVjdCghY2FuY2VsIHx8IChjYW5jZWwgJiYgY2FuY2VsLnR5cGUpID8gbmV3IENhbmNlbCgnY2FuY2VsZWQnKSA6IGNhbmNlbCk7XG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9O1xuXG4gICAgICBjb25maWcuY2FuY2VsVG9rZW4gJiYgY29uZmlnLmNhbmNlbFRva2VuLnN1YnNjcmliZShvbkNhbmNlbGVkKTtcbiAgICAgIGlmIChjb25maWcuc2lnbmFsKSB7XG4gICAgICAgIGNvbmZpZy5zaWduYWwuYWJvcnRlZCA/IG9uQ2FuY2VsZWQoKSA6IGNvbmZpZy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbkNhbmNlbGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXJlcXVlc3REYXRhKSB7XG4gICAgICByZXF1ZXN0RGF0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSk7XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcbnZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gcmVxdWlyZSgnLi4vaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lJyk7XG52YXIgZW5oYW5jZUVycm9yID0gcmVxdWlyZSgnLi4vY29yZS9lbmhhbmNlRXJyb3InKTtcbnZhciB0cmFuc2l0aW9uYWxEZWZhdWx0cyA9IHJlcXVpcmUoJy4vdHJhbnNpdGlvbmFsJyk7XG5cbnZhciBERUZBVUxUX0NPTlRFTlRfVFlQRSA9IHtcbiAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG59O1xuXG5mdW5jdGlvbiBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgdmFsdWUpIHtcbiAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzKSAmJiB1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzWydDb250ZW50LVR5cGUnXSkpIHtcbiAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCkge1xuICB2YXIgYWRhcHRlcjtcbiAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4uL2FkYXB0ZXJzL3hocicpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykge1xuICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi4vYWRhcHRlcnMvaHR0cCcpO1xuICB9XG4gIHJldHVybiBhZGFwdGVyO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlTYWZlbHkocmF3VmFsdWUsIHBhcnNlciwgZW5jb2Rlcikge1xuICBpZiAodXRpbHMuaXNTdHJpbmcocmF3VmFsdWUpKSB7XG4gICAgdHJ5IHtcbiAgICAgIChwYXJzZXIgfHwgSlNPTi5wYXJzZSkocmF3VmFsdWUpO1xuICAgICAgcmV0dXJuIHV0aWxzLnRyaW0ocmF3VmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlLm5hbWUgIT09ICdTeW50YXhFcnJvcicpIHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gKGVuY29kZXIgfHwgSlNPTi5zdHJpbmdpZnkpKHJhd1ZhbHVlKTtcbn1cblxudmFyIGRlZmF1bHRzID0ge1xuXG4gIHRyYW5zaXRpb25hbDogdHJhbnNpdGlvbmFsRGVmYXVsdHMsXG5cbiAgYWRhcHRlcjogZ2V0RGVmYXVsdEFkYXB0ZXIoKSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQWNjZXB0Jyk7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNBcnJheUJ1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzU3RyZWFtKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0ZpbGUoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQmxvYihkYXRhKVxuICAgICkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyVmlldyhkYXRhKSkge1xuICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnKTtcbiAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc09iamVjdChkYXRhKSB8fCAoaGVhZGVycyAmJiBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9PT0gJ2FwcGxpY2F0aW9uL2pzb24nKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICByZXR1cm4gc3RyaW5naWZ5U2FmZWx5KGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKSB7XG4gICAgdmFyIHRyYW5zaXRpb25hbCA9IHRoaXMudHJhbnNpdGlvbmFsIHx8IGRlZmF1bHRzLnRyYW5zaXRpb25hbDtcbiAgICB2YXIgc2lsZW50SlNPTlBhcnNpbmcgPSB0cmFuc2l0aW9uYWwgJiYgdHJhbnNpdGlvbmFsLnNpbGVudEpTT05QYXJzaW5nO1xuICAgIHZhciBmb3JjZWRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbCAmJiB0cmFuc2l0aW9uYWwuZm9yY2VkSlNPTlBhcnNpbmc7XG4gICAgdmFyIHN0cmljdEpTT05QYXJzaW5nID0gIXNpbGVudEpTT05QYXJzaW5nICYmIHRoaXMucmVzcG9uc2VUeXBlID09PSAnanNvbic7XG5cbiAgICBpZiAoc3RyaWN0SlNPTlBhcnNpbmcgfHwgKGZvcmNlZEpTT05QYXJzaW5nICYmIHV0aWxzLmlzU3RyaW5nKGRhdGEpICYmIGRhdGEubGVuZ3RoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChzdHJpY3RKU09OUGFyc2luZykge1xuICAgICAgICAgIGlmIChlLm5hbWUgPT09ICdTeW50YXhFcnJvcicpIHtcbiAgICAgICAgICAgIHRocm93IGVuaGFuY2VFcnJvcihlLCB0aGlzLCAnRV9KU09OX1BBUlNFJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgLyoqXG4gICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYVxuICAgKiB0aW1lb3V0IGlzIG5vdCBjcmVhdGVkLlxuICAgKi9cbiAgdGltZW91dDogMCxcblxuICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsXG5cbiAgbWF4Q29udGVudExlbmd0aDogLTEsXG4gIG1heEJvZHlMZW5ndGg6IC0xLFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH0sXG5cbiAgaGVhZGVyczoge1xuICAgIGNvbW1vbjoge1xuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG4gICAgfVxuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWRcbiAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgVGhlIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBmbnMpIHtcbiAgdmFyIGNvbnRleHQgPSB0aGlzIHx8IGRlZmF1bHRzO1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikge1xuICAgIGRhdGEgPSBmbi5jYWxsKGNvbnRleHQsIGRhdGEsIGhlYWRlcnMpO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHRyYW5zZm9ybURhdGEgPSByZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTtcbnZhciBpc0NhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9pc0NhbmNlbCcpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvQ2FuY2VsJyk7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cblxuICBpZiAoY29uZmlnLnNpZ25hbCAmJiBjb25maWcuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICB0aHJvdyBuZXcgQ2FuY2VsKCdjYW5jZWxlZCcpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcbiAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG4gIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICBjb25maWcsXG4gICAgY29uZmlnLmRhdGEsXG4gICAgY29uZmlnLmhlYWRlcnMsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgY29uZmlnLmhlYWRlcnMgPSB1dGlscy5tZXJnZShcbiAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNcbiAgKTtcblxuICB1dGlscy5mb3JFYWNoKFxuICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF07XG4gICAgfVxuICApO1xuXG4gIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblxuICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkge1xuICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEuY2FsbChcbiAgICAgIGNvbmZpZyxcbiAgICAgIHJlc3BvbnNlLmRhdGEsXG4gICAgICByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24ucmVzcG9uc2UpIHtcbiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoXG4gICAgICAgICAgY29uZmlnLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbi8qKlxuICogQ29uZmlnLXNwZWNpZmljIG1lcmdlLWZ1bmN0aW9uIHdoaWNoIGNyZWF0ZXMgYSBuZXcgY29uZmlnLW9iamVjdFxuICogYnkgbWVyZ2luZyB0d28gY29uZmlndXJhdGlvbiBvYmplY3RzIHRvZ2V0aGVyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcxXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMlxuICogQHJldHVybnMge09iamVjdH0gTmV3IG9iamVjdCByZXN1bHRpbmcgZnJvbSBtZXJnaW5nIGNvbmZpZzIgdG8gY29uZmlnMVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1lcmdlQ29uZmlnKGNvbmZpZzEsIGNvbmZpZzIpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9O1xuICB2YXIgY29uZmlnID0ge307XG5cbiAgZnVuY3Rpb24gZ2V0TWVyZ2VkVmFsdWUodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBpZiAodXRpbHMuaXNQbGFpbk9iamVjdCh0YXJnZXQpICYmIHV0aWxzLmlzUGxhaW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlKHRhcmdldCwgc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlKHt9LCBzb3VyY2UpO1xuICAgIH0gZWxzZSBpZiAodXRpbHMuaXNBcnJheShzb3VyY2UpKSB7XG4gICAgICByZXR1cm4gc291cmNlLnNsaWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gbWVyZ2VEZWVwUHJvcGVydGllcyhwcm9wKSB7XG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcyW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzFbcHJvcF0pKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcxW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gdmFsdWVGcm9tQ29uZmlnMihwcm9wKSB7XG4gICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcyW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMltwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIGRlZmF1bHRUb0NvbmZpZzIocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzFbcHJvcF0pKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcxW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgZnVuY3Rpb24gbWVyZ2VEaXJlY3RLZXlzKHByb3ApIHtcbiAgICBpZiAocHJvcCBpbiBjb25maWcyKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUoY29uZmlnMVtwcm9wXSwgY29uZmlnMltwcm9wXSk7XG4gICAgfSBlbHNlIGlmIChwcm9wIGluIGNvbmZpZzEpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGNvbmZpZzFbcHJvcF0pO1xuICAgIH1cbiAgfVxuXG4gIHZhciBtZXJnZU1hcCA9IHtcbiAgICAndXJsJzogdmFsdWVGcm9tQ29uZmlnMixcbiAgICAnbWV0aG9kJzogdmFsdWVGcm9tQ29uZmlnMixcbiAgICAnZGF0YSc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ2Jhc2VVUkwnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd0cmFuc2Zvcm1SZXF1ZXN0JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNmb3JtUmVzcG9uc2UnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdwYXJhbXNTZXJpYWxpemVyJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndGltZW91dCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RpbWVvdXRNZXNzYWdlJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnd2l0aENyZWRlbnRpYWxzJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnYWRhcHRlcic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3Jlc3BvbnNlVHlwZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3hzcmZDb29raWVOYW1lJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAneHNyZkhlYWRlck5hbWUnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdvblVwbG9hZFByb2dyZXNzJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnb25Eb3dubG9hZFByb2dyZXNzJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnZGVjb21wcmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ21heENvbnRlbnRMZW5ndGgnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdtYXhCb2R5TGVuZ3RoJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNwb3J0JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnaHR0cEFnZW50JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnaHR0cHNBZ2VudCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2NhbmNlbFRva2VuJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnc29ja2V0UGF0aCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3Jlc3BvbnNlRW5jb2RpbmcnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd2YWxpZGF0ZVN0YXR1cyc6IG1lcmdlRGlyZWN0S2V5c1xuICB9O1xuXG4gIHV0aWxzLmZvckVhY2goT2JqZWN0LmtleXMoY29uZmlnMSkuY29uY2F0KE9iamVjdC5rZXlzKGNvbmZpZzIpKSwgZnVuY3Rpb24gY29tcHV0ZUNvbmZpZ1ZhbHVlKHByb3ApIHtcbiAgICB2YXIgbWVyZ2UgPSBtZXJnZU1hcFtwcm9wXSB8fCBtZXJnZURlZXBQcm9wZXJ0aWVzO1xuICAgIHZhciBjb25maWdWYWx1ZSA9IG1lcmdlKHByb3ApO1xuICAgICh1dGlscy5pc1VuZGVmaW5lZChjb25maWdWYWx1ZSkgJiYgbWVyZ2UgIT09IG1lcmdlRGlyZWN0S2V5cykgfHwgKGNvbmZpZ1twcm9wXSA9IGNvbmZpZ1ZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgXCJ2ZXJzaW9uXCI6IFwiMC4yNi4xXCJcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVkVSU0lPTiA9IHJlcXVpcmUoJy4uL2Vudi9kYXRhJykudmVyc2lvbjtcblxudmFyIHZhbGlkYXRvcnMgPSB7fTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblsnb2JqZWN0JywgJ2Jvb2xlYW4nLCAnbnVtYmVyJywgJ2Z1bmN0aW9uJywgJ3N0cmluZycsICdzeW1ib2wnXS5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUsIGkpIHtcbiAgdmFsaWRhdG9yc1t0eXBlXSA9IGZ1bmN0aW9uIHZhbGlkYXRvcih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IHR5cGUgfHwgJ2EnICsgKGkgPCAxID8gJ24gJyA6ICcgJykgKyB0eXBlO1xuICB9O1xufSk7XG5cbnZhciBkZXByZWNhdGVkV2FybmluZ3MgPSB7fTtcblxuLyoqXG4gKiBUcmFuc2l0aW9uYWwgb3B0aW9uIHZhbGlkYXRvclxuICogQHBhcmFtIHtmdW5jdGlvbnxib29sZWFuP30gdmFsaWRhdG9yIC0gc2V0IHRvIGZhbHNlIGlmIHRoZSB0cmFuc2l0aW9uYWwgb3B0aW9uIGhhcyBiZWVuIHJlbW92ZWRcbiAqIEBwYXJhbSB7c3RyaW5nP30gdmVyc2lvbiAtIGRlcHJlY2F0ZWQgdmVyc2lvbiAvIHJlbW92ZWQgc2luY2UgdmVyc2lvblxuICogQHBhcmFtIHtzdHJpbmc/fSBtZXNzYWdlIC0gc29tZSBtZXNzYWdlIHdpdGggYWRkaXRpb25hbCBpbmZvXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb259XG4gKi9cbnZhbGlkYXRvcnMudHJhbnNpdGlvbmFsID0gZnVuY3Rpb24gdHJhbnNpdGlvbmFsKHZhbGlkYXRvciwgdmVyc2lvbiwgbWVzc2FnZSkge1xuICBmdW5jdGlvbiBmb3JtYXRNZXNzYWdlKG9wdCwgZGVzYykge1xuICAgIHJldHVybiAnW0F4aW9zIHYnICsgVkVSU0lPTiArICddIFRyYW5zaXRpb25hbCBvcHRpb24gXFwnJyArIG9wdCArICdcXCcnICsgZGVzYyArIChtZXNzYWdlID8gJy4gJyArIG1lc3NhZ2UgOiAnJyk7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG9wdCwgb3B0cykge1xuICAgIGlmICh2YWxpZGF0b3IgPT09IGZhbHNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0TWVzc2FnZShvcHQsICcgaGFzIGJlZW4gcmVtb3ZlZCcgKyAodmVyc2lvbiA/ICcgaW4gJyArIHZlcnNpb24gOiAnJykpKTtcbiAgICB9XG5cbiAgICBpZiAodmVyc2lvbiAmJiAhZGVwcmVjYXRlZFdhcm5pbmdzW29wdF0pIHtcbiAgICAgIGRlcHJlY2F0ZWRXYXJuaW5nc1tvcHRdID0gdHJ1ZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGZvcm1hdE1lc3NhZ2UoXG4gICAgICAgICAgb3B0LFxuICAgICAgICAgICcgaGFzIGJlZW4gZGVwcmVjYXRlZCBzaW5jZSB2JyArIHZlcnNpb24gKyAnIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlJ1xuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0b3IgPyB2YWxpZGF0b3IodmFsdWUsIG9wdCwgb3B0cykgOiB0cnVlO1xuICB9O1xufTtcblxuLyoqXG4gKiBBc3NlcnQgb2JqZWN0J3MgcHJvcGVydGllcyB0eXBlXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtvYmplY3R9IHNjaGVtYVxuICogQHBhcmFtIHtib29sZWFuP30gYWxsb3dVbmtub3duXG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0T3B0aW9ucyhvcHRpb25zLCBzY2hlbWEsIGFsbG93VW5rbm93bikge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICB9XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgdmFyIG9wdCA9IGtleXNbaV07XG4gICAgdmFyIHZhbGlkYXRvciA9IHNjaGVtYVtvcHRdO1xuICAgIGlmICh2YWxpZGF0b3IpIHtcbiAgICAgIHZhciB2YWx1ZSA9IG9wdGlvbnNbb3B0XTtcbiAgICAgIHZhciByZXN1bHQgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRpb25zKTtcbiAgICAgIGlmIChyZXN1bHQgIT09IHRydWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uICcgKyBvcHQgKyAnIG11c3QgYmUgJyArIHJlc3VsdCk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGFsbG93VW5rbm93biAhPT0gdHJ1ZSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ1Vua25vd24gb3B0aW9uICcgKyBvcHQpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXNzZXJ0T3B0aW9uczogYXNzZXJ0T3B0aW9ucyxcbiAgdmFsaWRhdG9yczogdmFsaWRhdG9yc1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIGJ1aWxkVVJMID0gcmVxdWlyZSgnLi4vaGVscGVycy9idWlsZFVSTCcpO1xudmFyIEludGVyY2VwdG9yTWFuYWdlciA9IHJlcXVpcmUoJy4vSW50ZXJjZXB0b3JNYW5hZ2VyJyk7XG52YXIgZGlzcGF0Y2hSZXF1ZXN0ID0gcmVxdWlyZSgnLi9kaXNwYXRjaFJlcXVlc3QnKTtcbnZhciBtZXJnZUNvbmZpZyA9IHJlcXVpcmUoJy4vbWVyZ2VDb25maWcnKTtcbnZhciB2YWxpZGF0b3IgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3ZhbGlkYXRvcicpO1xuXG52YXIgdmFsaWRhdG9ycyA9IHZhbGlkYXRvci52YWxpZGF0b3JzO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHtcbiAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG4gICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuICB9O1xufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICovXG5BeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnT3JVcmwsIGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZ09yVXJsID09PSAnc3RyaW5nJykge1xuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICBjb25maWcudXJsID0gY29uZmlnT3JVcmw7XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnID0gY29uZmlnT3JVcmwgfHwge307XG4gIH1cblxuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuXG4gIC8vIFNldCBjb25maWcubWV0aG9kXG4gIGlmIChjb25maWcubWV0aG9kKSB7XG4gICAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTtcbiAgfSBlbHNlIGlmICh0aGlzLmRlZmF1bHRzLm1ldGhvZCkge1xuICAgIGNvbmZpZy5tZXRob2QgPSB0aGlzLmRlZmF1bHRzLm1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuICB9IGVsc2Uge1xuICAgIGNvbmZpZy5tZXRob2QgPSAnZ2V0JztcbiAgfVxuXG4gIHZhciB0cmFuc2l0aW9uYWwgPSBjb25maWcudHJhbnNpdGlvbmFsO1xuXG4gIGlmICh0cmFuc2l0aW9uYWwgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhbGlkYXRvci5hc3NlcnRPcHRpb25zKHRyYW5zaXRpb25hbCwge1xuICAgICAgc2lsZW50SlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICBmb3JjZWRKU09OUGFyc2luZzogdmFsaWRhdG9ycy50cmFuc2l0aW9uYWwodmFsaWRhdG9ycy5ib29sZWFuKSxcbiAgICAgIGNsYXJpZnlUaW1lb3V0RXJyb3I6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbilcbiAgICB9LCBmYWxzZSk7XG4gIH1cblxuICAvLyBmaWx0ZXIgb3V0IHNraXBwZWQgaW50ZXJjZXB0b3JzXG4gIHZhciByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICB2YXIgc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzID0gdHJ1ZTtcbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgaWYgKHR5cGVvZiBpbnRlcmNlcHRvci5ydW5XaGVuID09PSAnZnVuY3Rpb24nICYmIGludGVyY2VwdG9yLnJ1bldoZW4oY29uZmlnKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgPSBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgJiYgaW50ZXJjZXB0b3Iuc3luY2hyb25vdXM7XG5cbiAgICByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB2YXIgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluID0gW107XG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHZhciBwcm9taXNlO1xuXG4gIGlmICghc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzKSB7XG4gICAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcblxuICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGNoYWluLCByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbik7XG4gICAgY2hhaW4gPSBjaGFpbi5jb25jYXQocmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTtcblxuICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcbiAgICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cblxuICB2YXIgbmV3Q29uZmlnID0gY29uZmlnO1xuICB3aGlsZSAocmVxdWVzdEludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgdmFyIG9uRnVsZmlsbGVkID0gcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKTtcbiAgICB2YXIgb25SZWplY3RlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCk7XG4gICAgdHJ5IHtcbiAgICAgIG5ld0NvbmZpZyA9IG9uRnVsZmlsbGVkKG5ld0NvbmZpZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG9uUmVqZWN0ZWQoZXJyb3IpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICBwcm9taXNlID0gZGlzcGF0Y2hSZXF1ZXN0KG5ld0NvbmZpZyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgfVxuXG4gIHdoaWxlIChyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCkpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5BeGlvcy5wcm90b3R5cGUuZ2V0VXJpID0gZnVuY3Rpb24gZ2V0VXJpKGNvbmZpZykge1xuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICByZXR1cm4gYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cXD8vLCAnJyk7XG59O1xuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiAoY29uZmlnIHx8IHt9KS5kYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KG1lcmdlQ29uZmlnKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIENhbmNlbCA9IHJlcXVpcmUoJy4vQ2FuY2VsJyk7XG5cbi8qKlxuICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsVG9rZW4oZXhlY3V0b3IpIHtcbiAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHZhciByZXNvbHZlUHJvbWlzZTtcblxuICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiBwcm9taXNlRXhlY3V0b3IocmVzb2x2ZSkge1xuICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgfSk7XG5cbiAgdmFyIHRva2VuID0gdGhpcztcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICB0aGlzLnByb21pc2UudGhlbihmdW5jdGlvbihjYW5jZWwpIHtcbiAgICBpZiAoIXRva2VuLl9saXN0ZW5lcnMpIHJldHVybjtcblxuICAgIHZhciBpO1xuICAgIHZhciBsID0gdG9rZW4uX2xpc3RlbmVycy5sZW5ndGg7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0b2tlbi5fbGlzdGVuZXJzW2ldKGNhbmNlbCk7XG4gICAgfVxuICAgIHRva2VuLl9saXN0ZW5lcnMgPSBudWxsO1xuICB9KTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICB0aGlzLnByb21pc2UudGhlbiA9IGZ1bmN0aW9uKG9uZnVsZmlsbGVkKSB7XG4gICAgdmFyIF9yZXNvbHZlO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICB0b2tlbi5zdWJzY3JpYmUocmVzb2x2ZSk7XG4gICAgICBfcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgfSkudGhlbihvbmZ1bGZpbGxlZCk7XG5cbiAgICBwcm9taXNlLmNhbmNlbCA9IGZ1bmN0aW9uIHJlamVjdCgpIHtcbiAgICAgIHRva2VuLnVuc3Vic2NyaWJlKF9yZXNvbHZlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH07XG5cbiAgZXhlY3V0b3IoZnVuY3Rpb24gY2FuY2VsKG1lc3NhZ2UpIHtcbiAgICBpZiAodG9rZW4ucmVhc29uKSB7XG4gICAgICAvLyBDYW5jZWxsYXRpb24gaGFzIGFscmVhZHkgYmVlbiByZXF1ZXN0ZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0b2tlbi5yZWFzb24gPSBuZXcgQ2FuY2VsKG1lc3NhZ2UpO1xuICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbkNhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkID0gZnVuY3Rpb24gdGhyb3dJZlJlcXVlc3RlZCgpIHtcbiAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgdGhyb3cgdGhpcy5yZWFzb247XG4gIH1cbn07XG5cbi8qKlxuICogU3Vic2NyaWJlIHRvIHRoZSBjYW5jZWwgc2lnbmFsXG4gKi9cblxuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICBsaXN0ZW5lcih0aGlzLnJlYXNvbik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHRoaXMuX2xpc3RlbmVycykge1xuICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSBbbGlzdGVuZXJdO1xuICB9XG59O1xuXG4vKipcbiAqIFVuc3Vic2NyaWJlIGZyb20gdGhlIGNhbmNlbCBzaWduYWxcbiAqL1xuXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiB1bnN1YnNjcmliZShsaXN0ZW5lcikge1xuICBpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgaW5kZXggPSB0aGlzLl9saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovXG5DYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG4gIHZhciBjYW5jZWw7XG4gIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG4gICAgY2FuY2VsID0gYztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgdG9rZW46IHRva2VuLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFN5bnRhY3RpYyBzdWdhciBmb3IgaW52b2tpbmcgYSBmdW5jdGlvbiBhbmQgZXhwYW5kaW5nIGFuIGFycmF5IGZvciBhcmd1bWVudHMuXG4gKlxuICogQ29tbW9uIHVzZSBjYXNlIHdvdWxkIGJlIHRvIHVzZSBgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5YC5cbiAqXG4gKiAgYGBganNcbiAqICBmdW5jdGlvbiBmKHgsIHksIHopIHt9XG4gKiAgdmFyIGFyZ3MgPSBbMSwgMiwgM107XG4gKiAgZi5hcHBseShudWxsLCBhcmdzKTtcbiAqICBgYGBcbiAqXG4gKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi5cbiAqXG4gKiAgYGBganNcbiAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7XG4gKiAgYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvc1xuICpcbiAqIEBwYXJhbSB7Kn0gcGF5bG9hZCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHBheWxvYWQgaXMgYW4gZXJyb3IgdGhyb3duIGJ5IEF4aW9zLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0F4aW9zRXJyb3IocGF5bG9hZCkge1xuICByZXR1cm4gdXRpbHMuaXNPYmplY3QocGF5bG9hZCkgJiYgKHBheWxvYWQuaXNBeGlvc0Vycm9yID09PSB0cnVlKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBBeGlvcyA9IHJlcXVpcmUoJy4vY29yZS9BeGlvcycpO1xudmFyIG1lcmdlQ29uZmlnID0gcmVxdWlyZSgnLi9jb3JlL21lcmdlQ29uZmlnJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7XG4gIHZhciBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuICB2YXIgaW5zdGFuY2UgPSBiaW5kKEF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zLnByb3RvdHlwZSwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgY29udGV4dCk7XG5cbiAgLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuICBpbnN0YW5jZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaW5zdGFuY2VDb25maWcpIHtcbiAgICByZXR1cm4gY3JlYXRlSW5zdGFuY2UobWVyZ2VDb25maWcoZGVmYXVsdENvbmZpZywgaW5zdGFuY2VDb25maWcpKTtcbiAgfTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxudmFyIGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHMpO1xuXG4vLyBFeHBvc2UgQXhpb3MgY2xhc3MgdG8gYWxsb3cgY2xhc3MgaW5oZXJpdGFuY2VcbmF4aW9zLkF4aW9zID0gQXhpb3M7XG5cbi8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuYXhpb3MuQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsJyk7XG5heGlvcy5DYW5jZWxUb2tlbiA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbFRva2VuJyk7XG5heGlvcy5pc0NhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL2lzQ2FuY2VsJyk7XG5heGlvcy5WRVJTSU9OID0gcmVxdWlyZSgnLi9lbnYvZGF0YScpLnZlcnNpb247XG5cbi8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn07XG5heGlvcy5zcHJlYWQgPSByZXF1aXJlKCcuL2hlbHBlcnMvc3ByZWFkJyk7XG5cbi8vIEV4cG9zZSBpc0F4aW9zRXJyb3JcbmF4aW9zLmlzQXhpb3NFcnJvciA9IHJlcXVpcmUoJy4vaGVscGVycy9pc0F4aW9zRXJyb3InKTtcblxubW9kdWxlLmV4cG9ydHMgPSBheGlvcztcblxuLy8gQWxsb3cgdXNlIG9mIGRlZmF1bHQgaW1wb3J0IHN5bnRheCBpbiBUeXBlU2NyaXB0XG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gYXhpb3M7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2F4aW9zJyk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogT3BlbkFJIEFQSVxuICogQVBJcyBmb3Igc2FtcGxpbmcgZnJvbSBhbmQgZmluZS10dW5pbmcgbGFuZ3VhZ2UgbW9kZWxzXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IDEuMi4wXG4gKlxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5SZXF1aXJlZEVycm9yID0gZXhwb3J0cy5CYXNlQVBJID0gZXhwb3J0cy5DT0xMRUNUSU9OX0ZPUk1BVFMgPSBleHBvcnRzLkJBU0VfUEFUSCA9IHZvaWQgMDtcbmNvbnN0IGF4aW9zXzEgPSByZXF1aXJlKFwiYXhpb3NcIik7XG5leHBvcnRzLkJBU0VfUEFUSCA9IFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MVwiLnJlcGxhY2UoL1xcLyskLywgXCJcIik7XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMuQ09MTEVDVElPTl9GT1JNQVRTID0ge1xuICAgIGNzdjogXCIsXCIsXG4gICAgc3N2OiBcIiBcIixcbiAgICB0c3Y6IFwiXFx0XCIsXG4gICAgcGlwZXM6IFwifFwiLFxufTtcbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBCYXNlQVBJXG4gKi9cbmNsYXNzIEJhc2VBUEkge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3VyYXRpb24sIGJhc2VQYXRoID0gZXhwb3J0cy5CQVNFX1BBVEgsIGF4aW9zID0gYXhpb3NfMS5kZWZhdWx0KSB7XG4gICAgICAgIHRoaXMuYmFzZVBhdGggPSBiYXNlUGF0aDtcbiAgICAgICAgdGhpcy5heGlvcyA9IGF4aW9zO1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICAgICAgICAgIHRoaXMuYmFzZVBhdGggPSBjb25maWd1cmF0aW9uLmJhc2VQYXRoIHx8IHRoaXMuYmFzZVBhdGg7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkJhc2VBUEkgPSBCYXNlQVBJO1xuO1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIFJlcXVpcmVkRXJyb3JcbiAqIEBleHRlbmRzIHtFcnJvcn1cbiAqL1xuY2xhc3MgUmVxdWlyZWRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZCwgbXNnKSB7XG4gICAgICAgIHN1cGVyKG1zZyk7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJSZXF1aXJlZEVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0cy5SZXF1aXJlZEVycm9yID0gUmVxdWlyZWRFcnJvcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIE9wZW5BSSBBUElcbiAqIEFQSXMgZm9yIHNhbXBsaW5nIGZyb20gYW5kIGZpbmUtdHVuaW5nIGxhbmd1YWdlIG1vZGVsc1xuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjIuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24gPSBleHBvcnRzLnRvUGF0aFN0cmluZyA9IGV4cG9ydHMuc2VyaWFsaXplRGF0YUlmTmVlZGVkID0gZXhwb3J0cy5zZXRTZWFyY2hQYXJhbXMgPSBleHBvcnRzLnNldE9BdXRoVG9PYmplY3QgPSBleHBvcnRzLnNldEJlYXJlckF1dGhUb09iamVjdCA9IGV4cG9ydHMuc2V0QmFzaWNBdXRoVG9PYmplY3QgPSBleHBvcnRzLnNldEFwaUtleVRvT2JqZWN0ID0gZXhwb3J0cy5hc3NlcnRQYXJhbUV4aXN0cyA9IGV4cG9ydHMuRFVNTVlfQkFTRV9VUkwgPSB2b2lkIDA7XG5jb25zdCBiYXNlXzEgPSByZXF1aXJlKFwiLi9iYXNlXCIpO1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLkRVTU1ZX0JBU0VfVVJMID0gJ2h0dHBzOi8vZXhhbXBsZS5jb20nO1xuLyoqXG4gKlxuICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0cy5hc3NlcnRQYXJhbUV4aXN0cyA9IGZ1bmN0aW9uIChmdW5jdGlvbk5hbWUsIHBhcmFtTmFtZSwgcGFyYW1WYWx1ZSkge1xuICAgIGlmIChwYXJhbVZhbHVlID09PSBudWxsIHx8IHBhcmFtVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgYmFzZV8xLlJlcXVpcmVkRXJyb3IocGFyYW1OYW1lLCBgUmVxdWlyZWQgcGFyYW1ldGVyICR7cGFyYW1OYW1lfSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nICR7ZnVuY3Rpb25OYW1lfS5gKTtcbiAgICB9XG59O1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnNldEFwaUtleVRvT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCwga2V5UGFyYW1OYW1lLCBjb25maWd1cmF0aW9uKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24gJiYgY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXBpS2V5VmFsdWUgPSB0eXBlb2YgY29uZmlndXJhdGlvbi5hcGlLZXkgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IHlpZWxkIGNvbmZpZ3VyYXRpb24uYXBpS2V5KGtleVBhcmFtTmFtZSlcbiAgICAgICAgICAgICAgICA6IHlpZWxkIGNvbmZpZ3VyYXRpb24uYXBpS2V5O1xuICAgICAgICAgICAgb2JqZWN0W2tleVBhcmFtTmFtZV0gPSBsb2NhbFZhckFwaUtleVZhbHVlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnNldEJhc2ljQXV0aFRvT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCwgY29uZmlndXJhdGlvbikge1xuICAgIGlmIChjb25maWd1cmF0aW9uICYmIChjb25maWd1cmF0aW9uLnVzZXJuYW1lIHx8IGNvbmZpZ3VyYXRpb24ucGFzc3dvcmQpKSB7XG4gICAgICAgIG9iamVjdFtcImF1dGhcIl0gPSB7IHVzZXJuYW1lOiBjb25maWd1cmF0aW9uLnVzZXJuYW1lLCBwYXNzd29yZDogY29uZmlndXJhdGlvbi5wYXNzd29yZCB9O1xuICAgIH1cbn07XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMuc2V0QmVhcmVyQXV0aFRvT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCwgY29uZmlndXJhdGlvbikge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gdHlwZW9mIGNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW4gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IHlpZWxkIGNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW4oKVxuICAgICAgICAgICAgICAgIDogeWllbGQgY29uZmlndXJhdGlvbi5hY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgIG9iamVjdFtcIkF1dGhvcml6YXRpb25cIl0gPSBcIkJlYXJlciBcIiArIGFjY2Vzc1Rva2VuO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnNldE9BdXRoVG9PYmplY3QgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lLCBzY29wZXMsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckFjY2Vzc1Rva2VuVmFsdWUgPSB0eXBlb2YgY29uZmlndXJhdGlvbi5hY2Nlc3NUb2tlbiA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgID8geWllbGQgY29uZmlndXJhdGlvbi5hY2Nlc3NUb2tlbihuYW1lLCBzY29wZXMpXG4gICAgICAgICAgICAgICAgOiB5aWVsZCBjb25maWd1cmF0aW9uLmFjY2Vzc1Rva2VuO1xuICAgICAgICAgICAgb2JqZWN0W1wiQXV0aG9yaXphdGlvblwiXSA9IFwiQmVhcmVyIFwiICsgbG9jYWxWYXJBY2Nlc3NUb2tlblZhbHVlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuZnVuY3Rpb24gc2V0RmxhdHRlbmVkUXVlcnlQYXJhbXModXJsU2VhcmNoUGFyYW1zLCBwYXJhbWV0ZXIsIGtleSA9IFwiXCIpIHtcbiAgICBpZiAocGFyYW1ldGVyID09IG51bGwpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAodHlwZW9mIHBhcmFtZXRlciA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJhbWV0ZXIpKSB7XG4gICAgICAgICAgICBwYXJhbWV0ZXIuZm9yRWFjaChpdGVtID0+IHNldEZsYXR0ZW5lZFF1ZXJ5UGFyYW1zKHVybFNlYXJjaFBhcmFtcywgaXRlbSwga2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhwYXJhbWV0ZXIpLmZvckVhY2goY3VycmVudEtleSA9PiBzZXRGbGF0dGVuZWRRdWVyeVBhcmFtcyh1cmxTZWFyY2hQYXJhbXMsIHBhcmFtZXRlcltjdXJyZW50S2V5XSwgYCR7a2V5fSR7a2V5ICE9PSAnJyA/ICcuJyA6ICcnfSR7Y3VycmVudEtleX1gKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICh1cmxTZWFyY2hQYXJhbXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHVybFNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBwYXJhbWV0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXJsU2VhcmNoUGFyYW1zLnNldChrZXksIHBhcmFtZXRlcik7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMuc2V0U2VhcmNoUGFyYW1zID0gZnVuY3Rpb24gKHVybCwgLi4ub2JqZWN0cykge1xuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModXJsLnNlYXJjaCk7XG4gICAgc2V0RmxhdHRlbmVkUXVlcnlQYXJhbXMoc2VhcmNoUGFyYW1zLCBvYmplY3RzKTtcbiAgICB1cmwuc2VhcmNoID0gc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCk7XG59O1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLnNlcmlhbGl6ZURhdGFJZk5lZWRlZCA9IGZ1bmN0aW9uICh2YWx1ZSwgcmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICBjb25zdCBub25TdHJpbmcgPSB0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnO1xuICAgIGNvbnN0IG5lZWRzU2VyaWFsaXphdGlvbiA9IG5vblN0cmluZyAmJiBjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24uaXNKc29uTWltZVxuICAgICAgICA/IGNvbmZpZ3VyYXRpb24uaXNKc29uTWltZShyZXF1ZXN0T3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSlcbiAgICAgICAgOiBub25TdHJpbmc7XG4gICAgcmV0dXJuIG5lZWRzU2VyaWFsaXphdGlvblxuICAgICAgICA/IEpTT04uc3RyaW5naWZ5KHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IHt9KVxuICAgICAgICA6ICh2YWx1ZSB8fCBcIlwiKTtcbn07XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMudG9QYXRoU3RyaW5nID0gZnVuY3Rpb24gKHVybCkge1xuICAgIHJldHVybiB1cmwucGF0aG5hbWUgKyB1cmwuc2VhcmNoICsgdXJsLmhhc2g7XG59O1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbiA9IGZ1bmN0aW9uIChheGlvc0FyZ3MsIGdsb2JhbEF4aW9zLCBCQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICByZXR1cm4gKGF4aW9zID0gZ2xvYmFsQXhpb3MsIGJhc2VQYXRoID0gQkFTRV9QQVRIKSA9PiB7XG4gICAgICAgIGNvbnN0IGF4aW9zUmVxdWVzdEFyZ3MgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGF4aW9zQXJncy5vcHRpb25zKSwgeyB1cmw6ICgoY29uZmlndXJhdGlvbiA9PT0gbnVsbCB8fCBjb25maWd1cmF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWd1cmF0aW9uLmJhc2VQYXRoKSB8fCBiYXNlUGF0aCkgKyBheGlvc0FyZ3MudXJsIH0pO1xuICAgICAgICByZXR1cm4gYXhpb3MucmVxdWVzdChheGlvc1JlcXVlc3RBcmdzKTtcbiAgICB9O1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIE9wZW5BSSBBUElcbiAqIEFQSXMgZm9yIHNhbXBsaW5nIGZyb20gYW5kIGZpbmUtdHVuaW5nIGxhbmd1YWdlIG1vZGVsc1xuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjIuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5PcGVuQUlBcGkgPSBleHBvcnRzLk9wZW5BSUFwaUZhY3RvcnkgPSBleHBvcnRzLk9wZW5BSUFwaUZwID0gZXhwb3J0cy5PcGVuQUlBcGlBeGlvc1BhcmFtQ3JlYXRvciA9IGV4cG9ydHMuQ3JlYXRlSW1hZ2VSZXF1ZXN0UmVzcG9uc2VGb3JtYXRFbnVtID0gZXhwb3J0cy5DcmVhdGVJbWFnZVJlcXVlc3RTaXplRW51bSA9IGV4cG9ydHMuQ2hhdENvbXBsZXRpb25SZXNwb25zZU1lc3NhZ2VSb2xlRW51bSA9IGV4cG9ydHMuQ2hhdENvbXBsZXRpb25SZXF1ZXN0TWVzc2FnZVJvbGVFbnVtID0gdm9pZCAwO1xuY29uc3QgYXhpb3NfMSA9IHJlcXVpcmUoXCJheGlvc1wiKTtcbi8vIFNvbWUgaW1wb3J0cyBub3QgdXNlZCBkZXBlbmRpbmcgb24gdGVtcGxhdGUgY29uZGl0aW9uc1xuLy8gQHRzLWlnbm9yZVxuY29uc3QgY29tbW9uXzEgPSByZXF1aXJlKFwiLi9jb21tb25cIik7XG4vLyBAdHMtaWdub3JlXG5jb25zdCBiYXNlXzEgPSByZXF1aXJlKFwiLi9iYXNlXCIpO1xuZXhwb3J0cy5DaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlUm9sZUVudW0gPSB7XG4gICAgU3lzdGVtOiAnc3lzdGVtJyxcbiAgICBVc2VyOiAndXNlcicsXG4gICAgQXNzaXN0YW50OiAnYXNzaXN0YW50J1xufTtcbmV4cG9ydHMuQ2hhdENvbXBsZXRpb25SZXNwb25zZU1lc3NhZ2VSb2xlRW51bSA9IHtcbiAgICBTeXN0ZW06ICdzeXN0ZW0nLFxuICAgIFVzZXI6ICd1c2VyJyxcbiAgICBBc3Npc3RhbnQ6ICdhc3Npc3RhbnQnXG59O1xuZXhwb3J0cy5DcmVhdGVJbWFnZVJlcXVlc3RTaXplRW51bSA9IHtcbiAgICBfMjU2eDI1NjogJzI1NngyNTYnLFxuICAgIF81MTJ4NTEyOiAnNTEyeDUxMicsXG4gICAgXzEwMjR4MTAyNDogJzEwMjR4MTAyNCdcbn07XG5leHBvcnRzLkNyZWF0ZUltYWdlUmVxdWVzdFJlc3BvbnNlRm9ybWF0RW51bSA9IHtcbiAgICBVcmw6ICd1cmwnLFxuICAgIEI2NEpzb246ICdiNjRfanNvbidcbn07XG4vKipcbiAqIE9wZW5BSUFwaSAtIGF4aW9zIHBhcmFtZXRlciBjcmVhdG9yXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydHMuT3BlbkFJQXBpQXhpb3NQYXJhbUNyZWF0b3IgPSBmdW5jdGlvbiAoY29uZmlndXJhdGlvbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBJbW1lZGlhdGVseSBjYW5jZWwgYSBmaW5lLXR1bmUgam9iLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2IgdG8gY2FuY2VsXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjYW5jZWxGaW5lVHVuZTogKGZpbmVUdW5lSWQsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZmluZVR1bmVJZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY2FuY2VsRmluZVR1bmUnLCAnZmluZVR1bmVJZCcsIGZpbmVUdW5lSWQpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maW5lLXR1bmVzL3tmaW5lX3R1bmVfaWR9L2NhbmNlbGBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJmaW5lX3R1bmVfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhmaW5lVHVuZUlkKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEFuc3dlcnMgdGhlIHNwZWNpZmllZCBxdWVzdGlvbiB1c2luZyB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzIGFuZCBleGFtcGxlcy4gIFRoZSBlbmRwb2ludCBmaXJzdCBbc2VhcmNoZXNdKC9kb2NzL2FwaS1yZWZlcmVuY2Uvc2VhcmNoZXMpIG92ZXIgcHJvdmlkZWQgZG9jdW1lbnRzIG9yIGZpbGVzIHRvIGZpbmQgcmVsZXZhbnQgY29udGV4dC4gVGhlIHJlbGV2YW50IGNvbnRleHQgaXMgY29tYmluZWQgd2l0aCB0aGUgcHJvdmlkZWQgZXhhbXBsZXMgYW5kIHF1ZXN0aW9uIHRvIGNyZWF0ZSB0aGUgcHJvbXB0IGZvciBbY29tcGxldGlvbl0oL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucykuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQW5zd2VyUmVxdWVzdH0gY3JlYXRlQW5zd2VyUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQW5zd2VyOiAoY3JlYXRlQW5zd2VyUmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVBbnN3ZXJSZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVBbnN3ZXInLCAnY3JlYXRlQW5zd2VyUmVxdWVzdCcsIGNyZWF0ZUFuc3dlclJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9hbnN3ZXJzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlQW5zd2VyUmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgY29tcGxldGlvbiBmb3IgdGhlIGNoYXQgbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdH0gY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVDaGF0Q29tcGxldGlvbjogKGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUNoYXRDb21wbGV0aW9uJywgJ2NyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCcsIGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2NoYXQvY29tcGxldGlvbnNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ2xhc3NpZmllcyB0aGUgc3BlY2lmaWVkIGBxdWVyeWAgdXNpbmcgcHJvdmlkZWQgZXhhbXBsZXMuICBUaGUgZW5kcG9pbnQgZmlyc3QgW3NlYXJjaGVzXSgvZG9jcy9hcGktcmVmZXJlbmNlL3NlYXJjaGVzKSBvdmVyIHRoZSBsYWJlbGVkIGV4YW1wbGVzIHRvIHNlbGVjdCB0aGUgb25lcyBtb3N0IHJlbGV2YW50IGZvciB0aGUgcGFydGljdWxhciBxdWVyeS4gVGhlbiwgdGhlIHJlbGV2YW50IGV4YW1wbGVzIGFyZSBjb21iaW5lZCB3aXRoIHRoZSBxdWVyeSB0byBjb25zdHJ1Y3QgYSBwcm9tcHQgdG8gcHJvZHVjZSB0aGUgZmluYWwgbGFiZWwgdmlhIHRoZSBbY29tcGxldGlvbnNdKC9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMpIGVuZHBvaW50LiAgTGFiZWxlZCBleGFtcGxlcyBjYW4gYmUgcHJvdmlkZWQgdmlhIGFuIHVwbG9hZGVkIGBmaWxlYCwgb3IgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIHJlcXVlc3QgdXNpbmcgdGhlIGBleGFtcGxlc2AgcGFyYW1ldGVyIGZvciBxdWljayB0ZXN0cyBhbmQgc21hbGwgc2NhbGUgdXNlIGNhc2VzLlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdH0gY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVDbGFzc2lmaWNhdGlvbjogKGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUNsYXNzaWZpY2F0aW9uJywgJ2NyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCcsIGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2NsYXNzaWZpY2F0aW9uc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCwgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucywgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgY29tcGxldGlvbiBmb3IgdGhlIHByb3ZpZGVkIHByb21wdCBhbmQgcGFyYW1ldGVyc1xuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0fSBjcmVhdGVDb21wbGV0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ29tcGxldGlvbjogKGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVDb21wbGV0aW9uJywgJ2NyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0JywgY3JlYXRlQ29tcGxldGlvblJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9jb21wbGV0aW9uc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBuZXcgZWRpdCBmb3IgdGhlIHByb3ZpZGVkIGlucHV0LCBpbnN0cnVjdGlvbiwgYW5kIHBhcmFtZXRlcnMuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlRWRpdFJlcXVlc3R9IGNyZWF0ZUVkaXRSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVFZGl0OiAoY3JlYXRlRWRpdFJlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlRWRpdFJlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUVkaXQnLCAnY3JlYXRlRWRpdFJlcXVlc3QnLCBjcmVhdGVFZGl0UmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2VkaXRzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlRWRpdFJlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBlbWJlZGRpbmcgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgaW5wdXQgdGV4dC5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVFbWJlZGRpbmdSZXF1ZXN0fSBjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVFbWJlZGRpbmc6IChjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZUVtYmVkZGluZ1JlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUVtYmVkZGluZycsICdjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0JywgY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2VtYmVkZGluZ3NgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdQT1NUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGNvbW1vbl8xLnNlcmlhbGl6ZURhdGFJZk5lZWRlZChjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFVwbG9hZCBhIGZpbGUgdGhhdCBjb250YWlucyBkb2N1bWVudChzKSB0byBiZSB1c2VkIGFjcm9zcyB2YXJpb3VzIGVuZHBvaW50cy9mZWF0dXJlcy4gQ3VycmVudGx5LCB0aGUgc2l6ZSBvZiBhbGwgdGhlIGZpbGVzIHVwbG9hZGVkIGJ5IG9uZSBvcmdhbml6YXRpb24gY2FuIGJlIHVwIHRvIDEgR0IuIFBsZWFzZSBjb250YWN0IHVzIGlmIHlvdSBuZWVkIHRvIGluY3JlYXNlIHRoZSBzdG9yYWdlIGxpbWl0LlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgTmFtZSBvZiB0aGUgW0pTT04gTGluZXNdKGh0dHBzOi8vanNvbmxpbmVzLnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC8pIGZpbGUgdG8gYmUgdXBsb2FkZWQuICBJZiB0aGUgJiN4NjA7cHVycG9zZSYjeDYwOyBpcyBzZXQgdG8gXFxcXFxcJnF1b3Q7ZmluZS10dW5lXFxcXFxcJnF1b3Q7LCBlYWNoIGxpbmUgaXMgYSBKU09OIHJlY29yZCB3aXRoIFxcXFxcXCZxdW90O3Byb21wdFxcXFxcXCZxdW90OyBhbmQgXFxcXFxcJnF1b3Q7Y29tcGxldGlvblxcXFxcXCZxdW90OyBmaWVsZHMgcmVwcmVzZW50aW5nIHlvdXIgW3RyYWluaW5nIGV4YW1wbGVzXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcvcHJlcGFyZS10cmFpbmluZy1kYXRhKS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHB1cnBvc2UgVGhlIGludGVuZGVkIHB1cnBvc2Ugb2YgdGhlIHVwbG9hZGVkIGRvY3VtZW50cy4gIFVzZSBcXFxcXFwmcXVvdDtmaW5lLXR1bmVcXFxcXFwmcXVvdDsgZm9yIFtGaW5lLXR1bmluZ10oL2RvY3MvYXBpLXJlZmVyZW5jZS9maW5lLXR1bmVzKS4gVGhpcyBhbGxvd3MgdXMgdG8gdmFsaWRhdGUgdGhlIGZvcm1hdCBvZiB0aGUgdXBsb2FkZWQgZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUZpbGU6IChmaWxlLCBwdXJwb3NlLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ZpbGUnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZUZpbGUnLCAnZmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAncHVycG9zZScgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlRmlsZScsICdwdXJwb3NlJywgcHVycG9zZSk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbGVzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckZvcm1QYXJhbXMgPSBuZXcgKChjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24uZm9ybURhdGFDdG9yKSB8fCBGb3JtRGF0YSkoKTtcbiAgICAgICAgICAgIGlmIChmaWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHVycG9zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgncHVycG9zZScsIHB1cnBvc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgbG9jYWxWYXJGb3JtUGFyYW1zLmdldEhlYWRlcnMoKSksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gbG9jYWxWYXJGb3JtUGFyYW1zO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGpvYiB0aGF0IGZpbmUtdHVuZXMgYSBzcGVjaWZpZWQgbW9kZWwgZnJvbSBhIGdpdmVuIGRhdGFzZXQuICBSZXNwb25zZSBpbmNsdWRlcyBkZXRhaWxzIG9mIHRoZSBlbnF1ZXVlZCBqb2IgaW5jbHVkaW5nIGpvYiBzdGF0dXMgYW5kIHRoZSBuYW1lIG9mIHRoZSBmaW5lLXR1bmVkIG1vZGVscyBvbmNlIGNvbXBsZXRlLiAgW0xlYXJuIG1vcmUgYWJvdXQgRmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVGaW5lVHVuZVJlcXVlc3R9IGNyZWF0ZUZpbmVUdW5lUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRmluZVR1bmU6IChjcmVhdGVGaW5lVHVuZVJlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlRmluZVR1bmVSZXF1ZXN0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVGaW5lVHVuZScsICdjcmVhdGVGaW5lVHVuZVJlcXVlc3QnLCBjcmVhdGVGaW5lVHVuZVJlcXVlc3QpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maW5lLXR1bmVzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlRmluZVR1bmVSZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gaW1hZ2UgZ2l2ZW4gYSBwcm9tcHQuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlSW1hZ2VSZXF1ZXN0fSBjcmVhdGVJbWFnZVJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUltYWdlOiAoY3JlYXRlSW1hZ2VSZXF1ZXN0LCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2NyZWF0ZUltYWdlUmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlSW1hZ2UnLCAnY3JlYXRlSW1hZ2VSZXF1ZXN0JywgY3JlYXRlSW1hZ2VSZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvaW1hZ2VzL2dlbmVyYXRpb25zYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlSW1hZ2VSZXF1ZXN0LCBsb2NhbFZhclJlcXVlc3RPcHRpb25zLCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gZWRpdGVkIG9yIGV4dGVuZGVkIGltYWdlIGdpdmVuIGFuIG9yaWdpbmFsIGltYWdlIGFuZCBhIHByb21wdC5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBpbWFnZSBUaGUgaW1hZ2UgdG8gZWRpdC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLiBJZiBtYXNrIGlzIG5vdCBwcm92aWRlZCwgaW1hZ2UgbXVzdCBoYXZlIHRyYW5zcGFyZW5jeSwgd2hpY2ggd2lsbCBiZSB1c2VkIGFzIHRoZSBtYXNrLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvbXB0IEEgdGV4dCBkZXNjcmlwdGlvbiBvZiB0aGUgZGVzaXJlZCBpbWFnZShzKS4gVGhlIG1heGltdW0gbGVuZ3RoIGlzIDEwMDAgY2hhcmFjdGVycy5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBbbWFza10gQW4gYWRkaXRpb25hbCBpbWFnZSB3aG9zZSBmdWxseSB0cmFuc3BhcmVudCBhcmVhcyAoZS5nLiB3aGVyZSBhbHBoYSBpcyB6ZXJvKSBpbmRpY2F0ZSB3aGVyZSAmI3g2MDtpbWFnZSYjeDYwOyBzaG91bGQgYmUgZWRpdGVkLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbnMgYXMgJiN4NjA7aW1hZ2UmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXplXSBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7MjU2eDI1NiYjeDYwOywgJiN4NjA7NTEyeDUxMiYjeDYwOywgb3IgJiN4NjA7MTAyNHgxMDI0JiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7dXJsJiN4NjA7IG9yICYjeDYwO2I2NF9qc29uJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3VzZXJdIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVJbWFnZUVkaXQ6IChpbWFnZSwgcHJvbXB0LCBtYXNrLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdpbWFnZScgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlSW1hZ2VFZGl0JywgJ2ltYWdlJywgaW1hZ2UpO1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAncHJvbXB0JyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVJbWFnZUVkaXQnLCAncHJvbXB0JywgcHJvbXB0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvaW1hZ2VzL2VkaXRzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckZvcm1QYXJhbXMgPSBuZXcgKChjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24uZm9ybURhdGFDdG9yKSB8fCBGb3JtRGF0YSkoKTtcbiAgICAgICAgICAgIGlmIChpbWFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnaW1hZ2UnLCBpbWFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWFzayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnbWFzaycsIG1hc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb21wdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgncHJvbXB0JywgcHJvbXB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCduJywgbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnc2l6ZScsIHNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlRm9ybWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdyZXNwb25zZV9mb3JtYXQnLCByZXNwb25zZUZvcm1hdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgndXNlcicsIHVzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgbG9jYWxWYXJGb3JtUGFyYW1zLmdldEhlYWRlcnMoKSksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gbG9jYWxWYXJGb3JtUGFyYW1zO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIHZhcmlhdGlvbiBvZiBhIGdpdmVuIGltYWdlLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGltYWdlIFRoZSBpbWFnZSB0byB1c2UgYXMgdGhlIGJhc2lzIGZvciB0aGUgdmFyaWF0aW9uKHMpLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXplXSBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7MjU2eDI1NiYjeDYwOywgJiN4NjA7NTEyeDUxMiYjeDYwOywgb3IgJiN4NjA7MTAyNHgxMDI0JiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7dXJsJiN4NjA7IG9yICYjeDYwO2I2NF9qc29uJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3VzZXJdIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVJbWFnZVZhcmlhdGlvbjogKGltYWdlLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdpbWFnZScgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlSW1hZ2VWYXJpYXRpb24nLCAnaW1hZ2UnLCBpbWFnZSk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ltYWdlcy92YXJpYXRpb25zYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckZvcm1QYXJhbXMgPSBuZXcgKChjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24uZm9ybURhdGFDdG9yKSB8fCBGb3JtRGF0YSkoKTtcbiAgICAgICAgICAgIGlmIChpbWFnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnaW1hZ2UnLCBpbWFnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnbicsIG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3NpemUnLCBzaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXNwb25zZUZvcm1hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgncmVzcG9uc2VfZm9ybWF0JywgcmVzcG9uc2VGb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVzZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3VzZXInLCB1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGxvY2FsVmFyRm9ybVBhcmFtcy5nZXRIZWFkZXJzKCkpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGxvY2FsVmFyRm9ybVBhcmFtcztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENsYXNzaWZpZXMgaWYgdGV4dCB2aW9sYXRlcyBPcGVuQUlcXCdzIENvbnRlbnQgUG9saWN5XG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlTW9kZXJhdGlvblJlcXVlc3R9IGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVNb2RlcmF0aW9uOiAoY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZU1vZGVyYXRpb24nLCAnY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QnLCBjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL21vZGVyYXRpb25zYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSBjb21tb25fMS5zZXJpYWxpemVEYXRhSWZOZWVkZWQoY3JlYXRlTW9kZXJhdGlvblJlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVGhlIHNlYXJjaCBlbmRwb2ludCBjb21wdXRlcyBzaW1pbGFyaXR5IHNjb3JlcyBiZXR3ZWVuIHByb3ZpZGVkIHF1ZXJ5IGFuZCBkb2N1bWVudHMuIERvY3VtZW50cyBjYW4gYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBBUEkgaWYgdGhlcmUgYXJlIG5vIG1vcmUgdGhhbiAyMDAgb2YgdGhlbS4gIFRvIGdvIGJleW9uZCB0aGUgMjAwIGRvY3VtZW50IGxpbWl0LCBkb2N1bWVudHMgY2FuIGJlIHByb2Nlc3NlZCBvZmZsaW5lIGFuZCB0aGVuIHVzZWQgZm9yIGVmZmljaWVudCByZXRyaWV2YWwgYXQgcXVlcnkgdGltZS4gV2hlbiBgZmlsZWAgaXMgc2V0LCB0aGUgc2VhcmNoIGVuZHBvaW50IHNlYXJjaGVzIG92ZXIgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGdpdmVuIGZpbGUgYW5kIHJldHVybnMgdXAgdG8gdGhlIGBtYXhfcmVyYW5rYCBudW1iZXIgb2YgZG9jdW1lbnRzLiBUaGVzZSBkb2N1bWVudHMgd2lsbCBiZSByZXR1cm5lZCBhbG9uZyB3aXRoIHRoZWlyIHNlYXJjaCBzY29yZXMuICBUaGUgc2ltaWxhcml0eSBzY29yZSBpcyBhIHBvc2l0aXZlIHNjb3JlIHRoYXQgdXN1YWxseSByYW5nZXMgZnJvbSAwIHRvIDMwMCAoYnV0IGNhbiBzb21ldGltZXMgZ28gaGlnaGVyKSwgd2hlcmUgYSBzY29yZSBhYm92ZSAyMDAgdXN1YWxseSBtZWFucyB0aGUgZG9jdW1lbnQgaXMgc2VtYW50aWNhbGx5IHNpbWlsYXIgdG8gdGhlIHF1ZXJ5LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5naW5lSWQgVGhlIElEIG9mIHRoZSBlbmdpbmUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3QuICBZb3UgY2FuIHNlbGVjdCBvbmUgb2YgJiN4NjA7YWRhJiN4NjA7LCAmI3g2MDtiYWJiYWdlJiN4NjA7LCAmI3g2MDtjdXJpZSYjeDYwOywgb3IgJiN4NjA7ZGF2aW5jaSYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVTZWFyY2hSZXF1ZXN0fSBjcmVhdGVTZWFyY2hSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVTZWFyY2g6IChlbmdpbmVJZCwgY3JlYXRlU2VhcmNoUmVxdWVzdCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdlbmdpbmVJZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlU2VhcmNoJywgJ2VuZ2luZUlkJywgZW5naW5lSWQpO1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnY3JlYXRlU2VhcmNoUmVxdWVzdCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnY3JlYXRlU2VhcmNoJywgJ2NyZWF0ZVNlYXJjaFJlcXVlc3QnLCBjcmVhdGVTZWFyY2hSZXF1ZXN0KTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZW5naW5lcy97ZW5naW5lX2lkfS9zZWFyY2hgXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiZW5naW5lX2lkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZW5naW5lSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gY29tbW9uXzEuc2VyaWFsaXplRGF0YUlmTmVlZGVkKGNyZWF0ZVNlYXJjaFJlcXVlc3QsIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVHJhbnNjcmliZXMgYXVkaW8gaW50byB0aGUgaW5wdXQgbGFuZ3VhZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgYXVkaW8gZmlsZSB0byB0cmFuc2NyaWJlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgd2F2LCBvciB3ZWJtLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSAmI3g2MDt3aGlzcGVyLTEmI3g2MDsgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9tcHRdIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsXFxcXFxcJiMzOTtzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW8gc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBtYXRjaCB0aGUgYXVkaW8gbGFuZ3VhZ2UuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LCB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IFt0ZW1wZXJhdHVyZV0gVGhlIHNhbXBsaW5nIHRlbXBlcmF0dXJlLCBiZXR3ZWVuIDAgYW5kIDEuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbCBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZSBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgdXNlIFtsb2cgcHJvYmFiaWxpdHldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvZ19wcm9iYWJpbGl0eSkgdG8gYXV0b21hdGljYWxseSBpbmNyZWFzZSB0aGUgdGVtcGVyYXR1cmUgdW50aWwgY2VydGFpbiB0aHJlc2hvbGRzIGFyZSBoaXQuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFuZ3VhZ2VdIFRoZSBsYW5ndWFnZSBvZiB0aGUgaW5wdXQgYXVkaW8uIFN1cHBseWluZyB0aGUgaW5wdXQgbGFuZ3VhZ2UgaW4gW0lTTy02MzktMV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9JU09fNjM5LTFfY29kZXMpIGZvcm1hdCB3aWxsIGltcHJvdmUgYWNjdXJhY3kgYW5kIGxhdGVuY3kuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVUcmFuc2NyaXB0aW9uOiAoZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBsYW5ndWFnZSwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdmaWxlJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVUcmFuc2NyaXB0aW9uJywgJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ21vZGVsJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVUcmFuc2NyaXB0aW9uJywgJ21vZGVsJywgbW9kZWwpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9hdWRpby90cmFuc2NyaXB0aW9uc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ1BPU1QnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJGb3JtUGFyYW1zID0gbmV3ICgoY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmZvcm1EYXRhQ3RvcikgfHwgRm9ybURhdGEpKCk7XG4gICAgICAgICAgICBpZiAoZmlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vZGVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdtb2RlbCcsIG1vZGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9tcHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3Byb21wdCcsIHByb21wdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VGb3JtYXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ3Jlc3BvbnNlX2Zvcm1hdCcsIHJlc3BvbnNlRm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ZW1wZXJhdHVyZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgndGVtcGVyYXR1cmUnLCB0ZW1wZXJhdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGFuZ3VhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ2xhbmd1YWdlJywgbGFuZ3VhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXJbJ0NvbnRlbnQtVHlwZSddID0gJ211bHRpcGFydC9mb3JtLWRhdGEnO1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgbG9jYWxWYXJGb3JtUGFyYW1zLmdldEhlYWRlcnMoKSksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gbG9jYWxWYXJGb3JtUGFyYW1zO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVHJhbnNsYXRlcyBhdWRpbyBpbnRvIGludG8gRW5nbGlzaC5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBhdWRpbyBmaWxlIHRvIHRyYW5zbGF0ZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6IG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIHdhdiwgb3Igd2VibS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgJiN4NjA7d2hpc3Blci0xJiN4NjA7IGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvbXB0XSBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbFxcXFxcXCYjMzk7cyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgYmUgaW4gRW5nbGlzaC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RlbXBlcmF0dXJlXSBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2UgW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0byBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVRyYW5zbGF0aW9uOiAoZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ZpbGUnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ2NyZWF0ZVRyYW5zbGF0aW9uJywgJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ21vZGVsJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdjcmVhdGVUcmFuc2xhdGlvbicsICdtb2RlbCcsIG1vZGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvYXVkaW8vdHJhbnNsYXRpb25zYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnUE9TVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckZvcm1QYXJhbXMgPSBuZXcgKChjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24uZm9ybURhdGFDdG9yKSB8fCBGb3JtRGF0YSkoKTtcbiAgICAgICAgICAgIGlmIChmaWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9kZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyRm9ybVBhcmFtcy5hcHBlbmQoJ21vZGVsJywgbW9kZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb21wdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgncHJvbXB0JywgcHJvbXB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXNwb25zZUZvcm1hdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJGb3JtUGFyYW1zLmFwcGVuZCgncmVzcG9uc2VfZm9ybWF0JywgcmVzcG9uc2VGb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRlbXBlcmF0dXJlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhckZvcm1QYXJhbXMuYXBwZW5kKCd0ZW1wZXJhdHVyZScsIHRlbXBlcmF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJztcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGxvY2FsVmFyRm9ybVBhcmFtcy5nZXRIZWFkZXJzKCkpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuZGF0YSA9IGxvY2FsVmFyRm9ybVBhcmFtcztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGVGaWxlOiAoZmlsZUlkLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ZpbGVJZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnZGVsZXRlRmlsZScsICdmaWxlSWQnLCBmaWxlSWQpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maWxlcy97ZmlsZV9pZH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiZmlsZV9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGZpbGVJZCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnREVMRVRFJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGZpbmUtdHVuZWQgbW9kZWwuIFlvdSBtdXN0IGhhdmUgdGhlIE93bmVyIHJvbGUgaW4geW91ciBvcmdhbml6YXRpb24uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBUaGUgbW9kZWwgdG8gZGVsZXRlXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGVNb2RlbDogKG1vZGVsLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ21vZGVsJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdkZWxldGVNb2RlbCcsICdtb2RlbCcsIG1vZGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvbW9kZWxzL3ttb2RlbH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wibW9kZWxcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhtb2RlbCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnREVMRVRFJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHVybnMgdGhlIGNvbnRlbnRzIG9mIHRoZSBzcGVjaWZpZWQgZmlsZVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZG93bmxvYWRGaWxlOiAoZmlsZUlkLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2ZpbGVJZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnZG93bmxvYWRGaWxlJywgJ2ZpbGVJZCcsIGZpbGVJZCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbGVzL3tmaWxlX2lkfS9jb250ZW50YFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGB7JHtcImZpbGVfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhmaWxlSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSAobm9uLWZpbmV0dW5lZCkgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RFbmdpbmVzOiAob3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2VuZ2luZXNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0dXJucyBhIGxpc3Qgb2YgZmlsZXMgdGhhdCBiZWxvbmcgdG8gdGhlIHVzZXJcXCdzIG9yZ2FuaXphdGlvbi5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RGaWxlczogKG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maWxlc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBHZXQgZmluZS1ncmFpbmVkIHN0YXR1cyB1cGRhdGVzIGZvciBhIGZpbmUtdHVuZSBqb2IuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYiB0byBnZXQgZXZlbnRzIGZvci5cbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbc3RyZWFtXSBXaGV0aGVyIHRvIHN0cmVhbSBldmVudHMgZm9yIHRoZSBmaW5lLXR1bmUgam9iLiBJZiBzZXQgdG8gdHJ1ZSwgZXZlbnRzIHdpbGwgYmUgc2VudCBhcyBkYXRhLW9ubHkgW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdCkgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLiBUaGUgc3RyZWFtIHdpbGwgdGVybWluYXRlIHdpdGggYSAmI3g2MDtkYXRhOiBbRE9ORV0mI3g2MDsgbWVzc2FnZSB3aGVuIHRoZSBqb2IgaXMgZmluaXNoZWQgKHN1Y2NlZWRlZCwgY2FuY2VsbGVkLCBvciBmYWlsZWQpLiAgSWYgc2V0IHRvIGZhbHNlLCBvbmx5IGV2ZW50cyBnZW5lcmF0ZWQgc28gZmFyIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RmluZVR1bmVFdmVudHM6IChmaW5lVHVuZUlkLCBzdHJlYW0sIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZmluZVR1bmVJZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygnbGlzdEZpbmVUdW5lRXZlbnRzJywgJ2ZpbmVUdW5lSWQnLCBmaW5lVHVuZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvZmluZS10dW5lcy97ZmluZV90dW5lX2lkfS9ldmVudHNgXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiZmluZV90dW5lX2lkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZmluZVR1bmVJZCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGlmIChzdHJlYW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJbJ3N0cmVhbSddID0gc3RyZWFtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgTGlzdCB5b3VyIG9yZ2FuaXphdGlvblxcJ3MgZmluZS10dW5pbmcgam9ic1xuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEZpbmVUdW5lczogKG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maW5lLXR1bmVzYDtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IExpc3RzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIG1vZGVscywgYW5kIHByb3ZpZGVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVhY2ggb25lIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0TW9kZWxzOiAob3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL21vZGVsc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXRyaWV2ZXMgYSBtb2RlbCBpbnN0YW5jZSwgcHJvdmlkaW5nIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGl0IHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmdpbmVJZCBUaGUgSUQgb2YgdGhlIGVuZ2luZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVFbmdpbmU6IChlbmdpbmVJZCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdlbmdpbmVJZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygncmV0cmlldmVFbmdpbmUnLCAnZW5naW5lSWQnLCBlbmdpbmVJZCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2VuZ2luZXMve2VuZ2luZV9pZH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiZW5naW5lX2lkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZW5naW5lSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsIGNvbW1vbl8xLkRVTU1ZX0JBU0VfVVJMKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1ldGhvZDogJ0dFVCcgfSwgYmFzZU9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge307XG4gICAgICAgICAgICBjb21tb25fMS5zZXRTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmosIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyKSwgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyksIG9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogY29tbW9uXzEudG9QYXRoU3RyaW5nKGxvY2FsVmFyVXJsT2JqKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlRmlsZTogKGZpbGVJZCwgb3B0aW9ucyA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdmaWxlSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgY29tbW9uXzEuYXNzZXJ0UGFyYW1FeGlzdHMoJ3JldHJpZXZlRmlsZScsICdmaWxlSWQnLCBmaWxlSWQpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9maWxlcy97ZmlsZV9pZH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiZmlsZV9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGZpbGVJZCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEdldHMgaW5mbyBhYm91dCB0aGUgZmluZS10dW5lIGpvYi4gIFtMZWFybiBtb3JlIGFib3V0IEZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVGaW5lVHVuZTogKGZpbmVUdW5lSWQsIG9wdGlvbnMgPSB7fSkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gdmVyaWZ5IHJlcXVpcmVkIHBhcmFtZXRlciAnZmluZVR1bmVJZCcgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXG4gICAgICAgICAgICBjb21tb25fMS5hc3NlcnRQYXJhbUV4aXN0cygncmV0cmlldmVGaW5lVHVuZScsICdmaW5lVHVuZUlkJywgZmluZVR1bmVJZCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2ZpbmUtdHVuZXMve2ZpbmVfdHVuZV9pZH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiZmluZV90dW5lX2lkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZmluZVR1bmVJZCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgY29tbW9uXzEuRFVNTVlfQkFTRV9VUkwpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbWV0aG9kOiAnR0VUJyB9LCBiYXNlT3B0aW9ucyksIG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fTtcbiAgICAgICAgICAgIGNvbW1vbl8xLnNldFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iaiwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcik7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIpLCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zKSwgb3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXJsOiBjb21tb25fMS50b1BhdGhTdHJpbmcobG9jYWxWYXJVcmxPYmopLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZGVsIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBwZXJtaXNzaW9uaW5nLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgVGhlIElEIG9mIHRoZSBtb2RlbCB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVNb2RlbDogKG1vZGVsLCBvcHRpb25zID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ21vZGVsJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGNvbW1vbl8xLmFzc2VydFBhcmFtRXhpc3RzKCdyZXRyaWV2ZU1vZGVsJywgJ21vZGVsJywgbW9kZWwpO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9tb2RlbHMve21vZGVsfWBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJtb2RlbFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKG1vZGVsKSkpO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCBjb21tb25fMS5EVU1NWV9CQVNFX1VSTCk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBtZXRob2Q6ICdHRVQnIH0sIGJhc2VPcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9O1xuICAgICAgICAgICAgY29tbW9uXzEuc2V0U2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciksIGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMpLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGNvbW1vbl8xLnRvUGF0aFN0cmluZyhsb2NhbFZhclVybE9iaiksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgIH07XG59O1xuLyoqXG4gKiBPcGVuQUlBcGkgLSBmdW5jdGlvbmFsIHByb2dyYW1taW5nIGludGVyZmFjZVxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLk9wZW5BSUFwaUZwID0gZnVuY3Rpb24gKGNvbmZpZ3VyYXRpb24pIHtcbiAgICBjb25zdCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yID0gZXhwb3J0cy5PcGVuQUlBcGlBeGlvc1BhcmFtQ3JlYXRvcihjb25maWd1cmF0aW9uKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgSW1tZWRpYXRlbHkgY2FuY2VsIGEgZmluZS10dW5lIGpvYi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iIHRvIGNhbmNlbFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY2FuY2VsRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY2FuY2VsRmluZVR1bmUoZmluZVR1bmVJZCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQW5zd2VycyB0aGUgc3BlY2lmaWVkIHF1ZXN0aW9uIHVzaW5nIHRoZSBwcm92aWRlZCBkb2N1bWVudHMgYW5kIGV4YW1wbGVzLiAgVGhlIGVuZHBvaW50IGZpcnN0IFtzZWFyY2hlc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9zZWFyY2hlcykgb3ZlciBwcm92aWRlZCBkb2N1bWVudHMgb3IgZmlsZXMgdG8gZmluZCByZWxldmFudCBjb250ZXh0LiBUaGUgcmVsZXZhbnQgY29udGV4dCBpcyBjb21iaW5lZCB3aXRoIHRoZSBwcm92aWRlZCBleGFtcGxlcyBhbmQgcXVlc3Rpb24gdG8gY3JlYXRlIHRoZSBwcm9tcHQgZm9yIFtjb21wbGV0aW9uXSgvZG9jcy9hcGktcmVmZXJlbmNlL2NvbXBsZXRpb25zKS5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVBbnN3ZXJSZXF1ZXN0fSBjcmVhdGVBbnN3ZXJSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVBbnN3ZXIoY3JlYXRlQW5zd2VyUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlQW5zd2VyKGNyZWF0ZUFuc3dlclJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBjb21wbGV0aW9uIGZvciB0aGUgY2hhdCBtZXNzYWdlXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0fSBjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNoYXRDb21wbGV0aW9uKGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlQ2hhdENvbXBsZXRpb24oY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDbGFzc2lmaWVzIHRoZSBzcGVjaWZpZWQgYHF1ZXJ5YCB1c2luZyBwcm92aWRlZCBleGFtcGxlcy4gIFRoZSBlbmRwb2ludCBmaXJzdCBbc2VhcmNoZXNdKC9kb2NzL2FwaS1yZWZlcmVuY2Uvc2VhcmNoZXMpIG92ZXIgdGhlIGxhYmVsZWQgZXhhbXBsZXMgdG8gc2VsZWN0IHRoZSBvbmVzIG1vc3QgcmVsZXZhbnQgZm9yIHRoZSBwYXJ0aWN1bGFyIHF1ZXJ5LiBUaGVuLCB0aGUgcmVsZXZhbnQgZXhhbXBsZXMgYXJlIGNvbWJpbmVkIHdpdGggdGhlIHF1ZXJ5IHRvIGNvbnN0cnVjdCBhIHByb21wdCB0byBwcm9kdWNlIHRoZSBmaW5hbCBsYWJlbCB2aWEgdGhlIFtjb21wbGV0aW9uc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucykgZW5kcG9pbnQuICBMYWJlbGVkIGV4YW1wbGVzIGNhbiBiZSBwcm92aWRlZCB2aWEgYW4gdXBsb2FkZWQgYGZpbGVgLCBvciBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgcmVxdWVzdCB1c2luZyB0aGUgYGV4YW1wbGVzYCBwYXJhbWV0ZXIgZm9yIHF1aWNrIHRlc3RzIGFuZCBzbWFsbCBzY2FsZSB1c2UgY2FzZXMuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0fSBjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNsYXNzaWZpY2F0aW9uKGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlQ2xhc3NpZmljYXRpb24oY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgY29tcGxldGlvbiBmb3IgdGhlIHByb3ZpZGVkIHByb21wdCBhbmQgcGFyYW1ldGVyc1xuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0fSBjcmVhdGVDb21wbGV0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlQ29tcGxldGlvbihjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlQ29tcGxldGlvbihjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIG5ldyBlZGl0IGZvciB0aGUgcHJvdmlkZWQgaW5wdXQsIGluc3RydWN0aW9uLCBhbmQgcGFyYW1ldGVycy5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVFZGl0UmVxdWVzdH0gY3JlYXRlRWRpdFJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUVkaXQoY3JlYXRlRWRpdFJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUVkaXQoY3JlYXRlRWRpdFJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gZW1iZWRkaW5nIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGlucHV0IHRleHQuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlRW1iZWRkaW5nUmVxdWVzdH0gY3JlYXRlRW1iZWRkaW5nUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRW1iZWRkaW5nKGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUVtYmVkZGluZyhjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBVcGxvYWQgYSBmaWxlIHRoYXQgY29udGFpbnMgZG9jdW1lbnQocykgdG8gYmUgdXNlZCBhY3Jvc3MgdmFyaW91cyBlbmRwb2ludHMvZmVhdHVyZXMuIEN1cnJlbnRseSwgdGhlIHNpemUgb2YgYWxsIHRoZSBmaWxlcyB1cGxvYWRlZCBieSBvbmUgb3JnYW5pemF0aW9uIGNhbiBiZSB1cCB0byAxIEdCLiBQbGVhc2UgY29udGFjdCB1cyBpZiB5b3UgbmVlZCB0byBpbmNyZWFzZSB0aGUgc3RvcmFnZSBsaW1pdC5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIE5hbWUgb2YgdGhlIFtKU09OIExpbmVzXShodHRwczovL2pzb25saW5lcy5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3QvKSBmaWxlIHRvIGJlIHVwbG9hZGVkLiAgSWYgdGhlICYjeDYwO3B1cnBvc2UmI3g2MDsgaXMgc2V0IHRvIFxcXFxcXCZxdW90O2ZpbmUtdHVuZVxcXFxcXCZxdW90OywgZWFjaCBsaW5lIGlzIGEgSlNPTiByZWNvcmQgd2l0aCBcXFxcXFwmcXVvdDtwcm9tcHRcXFxcXFwmcXVvdDsgYW5kIFxcXFxcXCZxdW90O2NvbXBsZXRpb25cXFxcXFwmcXVvdDsgZmllbGRzIHJlcHJlc2VudGluZyB5b3VyIFt0cmFpbmluZyBleGFtcGxlc10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nL3ByZXBhcmUtdHJhaW5pbmctZGF0YSkuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwdXJwb3NlIFRoZSBpbnRlbmRlZCBwdXJwb3NlIG9mIHRoZSB1cGxvYWRlZCBkb2N1bWVudHMuICBVc2UgXFxcXFxcJnF1b3Q7ZmluZS10dW5lXFxcXFxcJnF1b3Q7IGZvciBbRmluZS10dW5pbmddKC9kb2NzL2FwaS1yZWZlcmVuY2UvZmluZS10dW5lcykuIFRoaXMgYWxsb3dzIHVzIHRvIHZhbGlkYXRlIHRoZSBmb3JtYXQgb2YgdGhlIHVwbG9hZGVkIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVGaWxlKGZpbGUsIHB1cnBvc2UsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmNyZWF0ZUZpbGUoZmlsZSwgcHVycG9zZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGpvYiB0aGF0IGZpbmUtdHVuZXMgYSBzcGVjaWZpZWQgbW9kZWwgZnJvbSBhIGdpdmVuIGRhdGFzZXQuICBSZXNwb25zZSBpbmNsdWRlcyBkZXRhaWxzIG9mIHRoZSBlbnF1ZXVlZCBqb2IgaW5jbHVkaW5nIGpvYiBzdGF0dXMgYW5kIHRoZSBuYW1lIG9mIHRoZSBmaW5lLXR1bmVkIG1vZGVscyBvbmNlIGNvbXBsZXRlLiAgW0xlYXJuIG1vcmUgYWJvdXQgRmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVGaW5lVHVuZVJlcXVlc3R9IGNyZWF0ZUZpbmVUdW5lUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRmluZVR1bmUoY3JlYXRlRmluZVR1bmVSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVGaW5lVHVuZShjcmVhdGVGaW5lVHVuZVJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gaW1hZ2UgZ2l2ZW4gYSBwcm9tcHQuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlSW1hZ2VSZXF1ZXN0fSBjcmVhdGVJbWFnZVJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUltYWdlKGNyZWF0ZUltYWdlUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlSW1hZ2UoY3JlYXRlSW1hZ2VSZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGVkaXRlZCBvciBleHRlbmRlZCBpbWFnZSBnaXZlbiBhbiBvcmlnaW5hbCBpbWFnZSBhbmQgYSBwcm9tcHQuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gaW1hZ2UgVGhlIGltYWdlIHRvIGVkaXQuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS4gSWYgbWFzayBpcyBub3QgcHJvdmlkZWQsIGltYWdlIG11c3QgaGF2ZSB0cmFuc3BhcmVuY3ksIHdoaWNoIHdpbGwgYmUgdXNlZCBhcyB0aGUgbWFzay5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb21wdCBBIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGRlc2lyZWQgaW1hZ2UocykuIFRoZSBtYXhpbXVtIGxlbmd0aCBpcyAxMDAwIGNoYXJhY3RlcnMuXG4gICAgICAgICAqIEBwYXJhbSB7RmlsZX0gW21hc2tdIEFuIGFkZGl0aW9uYWwgaW1hZ2Ugd2hvc2UgZnVsbHkgdHJhbnNwYXJlbnQgYXJlYXMgKGUuZy4gd2hlcmUgYWxwaGEgaXMgemVybykgaW5kaWNhdGUgd2hlcmUgJiN4NjA7aW1hZ2UmI3g2MDsgc2hvdWxkIGJlIGVkaXRlZC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb25zIGFzICYjeDYwO2ltYWdlJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc2l6ZV0gVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mICYjeDYwOzI1NngyNTYmI3g2MDssICYjeDYwOzUxMng1MTImI3g2MDssIG9yICYjeDYwOzEwMjR4MTAyNCYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mICYjeDYwO3VybCYjeDYwOyBvciAmI3g2MDtiNjRfanNvbiYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VyXSBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlSW1hZ2VFZGl0KGltYWdlLCBwcm9tcHQsIG1hc2ssIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVJbWFnZUVkaXQoaW1hZ2UsIHByb21wdCwgbWFzaywgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSB2YXJpYXRpb24gb2YgYSBnaXZlbiBpbWFnZS5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBpbWFnZSBUaGUgaW1hZ2UgdG8gdXNlIGFzIHRoZSBiYXNpcyBmb3IgdGhlIHZhcmlhdGlvbihzKS4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc2l6ZV0gVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mICYjeDYwOzI1NngyNTYmI3g2MDssICYjeDYwOzUxMng1MTImI3g2MDssIG9yICYjeDYwOzEwMjR4MTAyNCYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mICYjeDYwO3VybCYjeDYwOyBvciAmI3g2MDtiNjRfanNvbiYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VyXSBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlSW1hZ2VWYXJpYXRpb24oaW1hZ2UsIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVJbWFnZVZhcmlhdGlvbihpbWFnZSwgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENsYXNzaWZpZXMgaWYgdGV4dCB2aW9sYXRlcyBPcGVuQUlcXCdzIENvbnRlbnQgUG9saWN5XG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlTW9kZXJhdGlvblJlcXVlc3R9IGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVNb2RlcmF0aW9uKGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVNb2RlcmF0aW9uKGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBUaGUgc2VhcmNoIGVuZHBvaW50IGNvbXB1dGVzIHNpbWlsYXJpdHkgc2NvcmVzIGJldHdlZW4gcHJvdmlkZWQgcXVlcnkgYW5kIGRvY3VtZW50cy4gRG9jdW1lbnRzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIEFQSSBpZiB0aGVyZSBhcmUgbm8gbW9yZSB0aGFuIDIwMCBvZiB0aGVtLiAgVG8gZ28gYmV5b25kIHRoZSAyMDAgZG9jdW1lbnQgbGltaXQsIGRvY3VtZW50cyBjYW4gYmUgcHJvY2Vzc2VkIG9mZmxpbmUgYW5kIHRoZW4gdXNlZCBmb3IgZWZmaWNpZW50IHJldHJpZXZhbCBhdCBxdWVyeSB0aW1lLiBXaGVuIGBmaWxlYCBpcyBzZXQsIHRoZSBzZWFyY2ggZW5kcG9pbnQgc2VhcmNoZXMgb3ZlciBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgZ2l2ZW4gZmlsZSBhbmQgcmV0dXJucyB1cCB0byB0aGUgYG1heF9yZXJhbmtgIG51bWJlciBvZiBkb2N1bWVudHMuIFRoZXNlIGRvY3VtZW50cyB3aWxsIGJlIHJldHVybmVkIGFsb25nIHdpdGggdGhlaXIgc2VhcmNoIHNjb3Jlcy4gIFRoZSBzaW1pbGFyaXR5IHNjb3JlIGlzIGEgcG9zaXRpdmUgc2NvcmUgdGhhdCB1c3VhbGx5IHJhbmdlcyBmcm9tIDAgdG8gMzAwIChidXQgY2FuIHNvbWV0aW1lcyBnbyBoaWdoZXIpLCB3aGVyZSBhIHNjb3JlIGFib3ZlIDIwMCB1c3VhbGx5IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBzZW1hbnRpY2FsbHkgc2ltaWxhciB0byB0aGUgcXVlcnkuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmdpbmVJZCBUaGUgSUQgb2YgdGhlIGVuZ2luZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdC4gIFlvdSBjYW4gc2VsZWN0IG9uZSBvZiAmI3g2MDthZGEmI3g2MDssICYjeDYwO2JhYmJhZ2UmI3g2MDssICYjeDYwO2N1cmllJiN4NjA7LCBvciAmI3g2MDtkYXZpbmNpJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZVNlYXJjaFJlcXVlc3R9IGNyZWF0ZVNlYXJjaFJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVNlYXJjaChlbmdpbmVJZCwgY3JlYXRlU2VhcmNoUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlU2VhcmNoKGVuZ2luZUlkLCBjcmVhdGVTZWFyY2hSZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBUcmFuc2NyaWJlcyBhdWRpbyBpbnRvIHRoZSBpbnB1dCBsYW5ndWFnZS5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBhdWRpbyBmaWxlIHRvIHRyYW5zY3JpYmUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOiBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCB3YXYsIG9yIHdlYm0uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5ICYjeDYwO3doaXNwZXItMSYjeDYwOyBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Byb21wdF0gQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWxcXFxcXFwmIzM5O3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIG1hdGNoIHRoZSBhdWRpbyBsYW5ndWFnZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RlbXBlcmF0dXJlXSBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2UgW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0byBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtsYW5ndWFnZV0gVGhlIGxhbmd1YWdlIG9mIHRoZSBpbnB1dCBhdWRpby4gU3VwcGx5aW5nIHRoZSBpbnB1dCBsYW5ndWFnZSBpbiBbSVNPLTYzOS0xXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0lTT182MzktMV9jb2RlcykgZm9ybWF0IHdpbGwgaW1wcm92ZSBhY2N1cmFjeSBhbmQgbGF0ZW5jeS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVRyYW5zY3JpcHRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBsYW5ndWFnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuY3JlYXRlVHJhbnNjcmlwdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIGxhbmd1YWdlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBUcmFuc2xhdGVzIGF1ZGlvIGludG8gaW50byBFbmdsaXNoLlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgVGhlIGF1ZGlvIGZpbGUgdG8gdHJhbnNsYXRlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgd2F2LCBvciB3ZWJtLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSAmI3g2MDt3aGlzcGVyLTEmI3g2MDsgaXMgY3VycmVudGx5IGF2YWlsYWJsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9tcHRdIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsXFxcXFxcJiMzOTtzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW8gc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBiZSBpbiBFbmdsaXNoLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IG9mIHRoZSB0cmFuc2NyaXB0IG91dHB1dCwgaW4gb25lIG9mIHRoZXNlIG9wdGlvbnM6IGpzb24sIHRleHQsIHNydCwgdmVyYm9zZV9qc29uLCBvciB2dHQuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdGVtcGVyYXR1cmVdIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGwgbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmUgZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy4gSWYgc2V0IHRvIDAsIHRoZSBtb2RlbCB3aWxsIHVzZSBbbG9nIHByb2JhYmlsaXR5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Mb2dfcHJvYmFiaWxpdHkpIHRvIGF1dG9tYXRpY2FsbHkgaW5jcmVhc2UgdGhlIHRlbXBlcmF0dXJlIHVudGlsIGNlcnRhaW4gdGhyZXNob2xkcyBhcmUgaGl0LlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlVHJhbnNsYXRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5jcmVhdGVUcmFuc2xhdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGZpbGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlSWQgVGhlIElEIG9mIHRoZSBmaWxlIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGVGaWxlKGZpbGVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuZGVsZXRlRmlsZShmaWxlSWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGZpbmUtdHVuZWQgbW9kZWwuIFlvdSBtdXN0IGhhdmUgdGhlIE93bmVyIHJvbGUgaW4geW91ciBvcmdhbml6YXRpb24uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBUaGUgbW9kZWwgdG8gZGVsZXRlXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGVNb2RlbChtb2RlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuZGVsZXRlTW9kZWwobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHVybnMgdGhlIGNvbnRlbnRzIG9mIHRoZSBzcGVjaWZpZWQgZmlsZVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZG93bmxvYWRGaWxlKGZpbGVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IuZG93bmxvYWRGaWxlKGZpbGVJZCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgKG5vbi1maW5ldHVuZWQpIG1vZGVscywgYW5kIHByb3ZpZGVzIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGVhY2ggb25lIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RW5naW5lcyhvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5saXN0RW5naW5lcyhvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIGEgbGlzdCBvZiBmaWxlcyB0aGF0IGJlbG9uZyB0byB0aGUgdXNlclxcJ3Mgb3JnYW5pemF0aW9uLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEZpbGVzKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmxpc3RGaWxlcyhvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBHZXQgZmluZS1ncmFpbmVkIHN0YXR1cyB1cGRhdGVzIGZvciBhIGZpbmUtdHVuZSBqb2IuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYiB0byBnZXQgZXZlbnRzIGZvci5cbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBbc3RyZWFtXSBXaGV0aGVyIHRvIHN0cmVhbSBldmVudHMgZm9yIHRoZSBmaW5lLXR1bmUgam9iLiBJZiBzZXQgdG8gdHJ1ZSwgZXZlbnRzIHdpbGwgYmUgc2VudCBhcyBkYXRhLW9ubHkgW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdCkgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLiBUaGUgc3RyZWFtIHdpbGwgdGVybWluYXRlIHdpdGggYSAmI3g2MDtkYXRhOiBbRE9ORV0mI3g2MDsgbWVzc2FnZSB3aGVuIHRoZSBqb2IgaXMgZmluaXNoZWQgKHN1Y2NlZWRlZCwgY2FuY2VsbGVkLCBvciBmYWlsZWQpLiAgSWYgc2V0IHRvIGZhbHNlLCBvbmx5IGV2ZW50cyBnZW5lcmF0ZWQgc28gZmFyIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RmluZVR1bmVFdmVudHMoZmluZVR1bmVJZCwgc3RyZWFtLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5saXN0RmluZVR1bmVFdmVudHMoZmluZVR1bmVJZCwgc3RyZWFtLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBMaXN0IHlvdXIgb3JnYW5pemF0aW9uXFwncyBmaW5lLXR1bmluZyBqb2JzXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBsaXN0RmluZVR1bmVzKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLmxpc3RGaW5lVHVuZXMob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RNb2RlbHMob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IubGlzdE1vZGVscyhvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXRyaWV2ZXMgYSBtb2RlbCBpbnN0YW5jZSwgcHJvdmlkaW5nIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IGl0IHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBhdmFpbGFiaWxpdHkuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmdpbmVJZCBUaGUgSUQgb2YgdGhlIGVuZ2luZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVFbmdpbmUoZW5naW5lSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLnJldHJpZXZlRW5naW5lKGVuZ2luZUlkLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tbW9uXzEuY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKGxvY2FsVmFyQXhpb3NBcmdzLCBheGlvc18xLmRlZmF1bHQsIGJhc2VfMS5CQVNFX1BBVEgsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlRmlsZShmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSB5aWVsZCBsb2NhbFZhckF4aW9zUGFyYW1DcmVhdG9yLnJldHJpZXZlRmlsZShmaWxlSWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEdldHMgaW5mbyBhYm91dCB0aGUgZmluZS10dW5lIGpvYi4gIFtMZWFybiBtb3JlIGFib3V0IEZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0geWllbGQgbG9jYWxWYXJBeGlvc1BhcmFtQ3JlYXRvci5yZXRyaWV2ZUZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21tb25fMS5jcmVhdGVSZXF1ZXN0RnVuY3Rpb24obG9jYWxWYXJBeGlvc0FyZ3MsIGF4aW9zXzEuZGVmYXVsdCwgYmFzZV8xLkJBU0VfUEFUSCwgY29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZGVsIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBwZXJtaXNzaW9uaW5nLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgVGhlIElEIG9mIHRoZSBtb2RlbCB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVNb2RlbChtb2RlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IHlpZWxkIGxvY2FsVmFyQXhpb3NQYXJhbUNyZWF0b3IucmV0cmlldmVNb2RlbChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1vbl8xLmNyZWF0ZVJlcXVlc3RGdW5jdGlvbihsb2NhbFZhckF4aW9zQXJncywgYXhpb3NfMS5kZWZhdWx0LCBiYXNlXzEuQkFTRV9QQVRILCBjb25maWd1cmF0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuLyoqXG4gKiBPcGVuQUlBcGkgLSBmYWN0b3J5IGludGVyZmFjZVxuICogQGV4cG9ydFxuICovXG5leHBvcnRzLk9wZW5BSUFwaUZhY3RvcnkgPSBmdW5jdGlvbiAoY29uZmlndXJhdGlvbiwgYmFzZVBhdGgsIGF4aW9zKSB7XG4gICAgY29uc3QgbG9jYWxWYXJGcCA9IGV4cG9ydHMuT3BlbkFJQXBpRnAoY29uZmlndXJhdGlvbik7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEltbWVkaWF0ZWx5IGNhbmNlbCBhIGZpbmUtdHVuZSBqb2IuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYiB0byBjYW5jZWxcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNhbmNlbEZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNhbmNlbEZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBBbnN3ZXJzIHRoZSBzcGVjaWZpZWQgcXVlc3Rpb24gdXNpbmcgdGhlIHByb3ZpZGVkIGRvY3VtZW50cyBhbmQgZXhhbXBsZXMuICBUaGUgZW5kcG9pbnQgZmlyc3QgW3NlYXJjaGVzXSgvZG9jcy9hcGktcmVmZXJlbmNlL3NlYXJjaGVzKSBvdmVyIHByb3ZpZGVkIGRvY3VtZW50cyBvciBmaWxlcyB0byBmaW5kIHJlbGV2YW50IGNvbnRleHQuIFRoZSByZWxldmFudCBjb250ZXh0IGlzIGNvbWJpbmVkIHdpdGggdGhlIHByb3ZpZGVkIGV4YW1wbGVzIGFuZCBxdWVzdGlvbiB0byBjcmVhdGUgdGhlIHByb21wdCBmb3IgW2NvbXBsZXRpb25dKC9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMpLlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUFuc3dlclJlcXVlc3R9IGNyZWF0ZUFuc3dlclJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUFuc3dlcihjcmVhdGVBbnN3ZXJSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVBbnN3ZXIoY3JlYXRlQW5zd2VyUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBjb21wbGV0aW9uIGZvciB0aGUgY2hhdCBtZXNzYWdlXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0fSBjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUNoYXRDb21wbGV0aW9uKGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlQ2hhdENvbXBsZXRpb24oY3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ2xhc3NpZmllcyB0aGUgc3BlY2lmaWVkIGBxdWVyeWAgdXNpbmcgcHJvdmlkZWQgZXhhbXBsZXMuICBUaGUgZW5kcG9pbnQgZmlyc3QgW3NlYXJjaGVzXSgvZG9jcy9hcGktcmVmZXJlbmNlL3NlYXJjaGVzKSBvdmVyIHRoZSBsYWJlbGVkIGV4YW1wbGVzIHRvIHNlbGVjdCB0aGUgb25lcyBtb3N0IHJlbGV2YW50IGZvciB0aGUgcGFydGljdWxhciBxdWVyeS4gVGhlbiwgdGhlIHJlbGV2YW50IGV4YW1wbGVzIGFyZSBjb21iaW5lZCB3aXRoIHRoZSBxdWVyeSB0byBjb25zdHJ1Y3QgYSBwcm9tcHQgdG8gcHJvZHVjZSB0aGUgZmluYWwgbGFiZWwgdmlhIHRoZSBbY29tcGxldGlvbnNdKC9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMpIGVuZHBvaW50LiAgTGFiZWxlZCBleGFtcGxlcyBjYW4gYmUgcHJvdmlkZWQgdmlhIGFuIHVwbG9hZGVkIGBmaWxlYCwgb3IgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIHJlcXVlc3QgdXNpbmcgdGhlIGBleGFtcGxlc2AgcGFyYW1ldGVyIGZvciBxdWljayB0ZXN0cyBhbmQgc21hbGwgc2NhbGUgdXNlIGNhc2VzLlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdH0gY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEBkZXByZWNhdGVkXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVDbGFzc2lmaWNhdGlvbihjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUNsYXNzaWZpY2F0aW9uKGNyZWF0ZUNsYXNzaWZpY2F0aW9uUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSBjb21wbGV0aW9uIGZvciB0aGUgcHJvdmlkZWQgcHJvbXB0IGFuZCBwYXJhbWV0ZXJzXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlQ29tcGxldGlvblJlcXVlc3R9IGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVDb21wbGV0aW9uKGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVDb21wbGV0aW9uKGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIG5ldyBlZGl0IGZvciB0aGUgcHJvdmlkZWQgaW5wdXQsIGluc3RydWN0aW9uLCBhbmQgcGFyYW1ldGVycy5cbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVFZGl0UmVxdWVzdH0gY3JlYXRlRWRpdFJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUVkaXQoY3JlYXRlRWRpdFJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUVkaXQoY3JlYXRlRWRpdFJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGVtYmVkZGluZyB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBpbnB1dCB0ZXh0LlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUVtYmVkZGluZ1JlcXVlc3R9IGNyZWF0ZUVtYmVkZGluZ1JlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUVtYmVkZGluZyhjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVFbWJlZGRpbmcoY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFVwbG9hZCBhIGZpbGUgdGhhdCBjb250YWlucyBkb2N1bWVudChzKSB0byBiZSB1c2VkIGFjcm9zcyB2YXJpb3VzIGVuZHBvaW50cy9mZWF0dXJlcy4gQ3VycmVudGx5LCB0aGUgc2l6ZSBvZiBhbGwgdGhlIGZpbGVzIHVwbG9hZGVkIGJ5IG9uZSBvcmdhbml6YXRpb24gY2FuIGJlIHVwIHRvIDEgR0IuIFBsZWFzZSBjb250YWN0IHVzIGlmIHlvdSBuZWVkIHRvIGluY3JlYXNlIHRoZSBzdG9yYWdlIGxpbWl0LlxuICAgICAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgTmFtZSBvZiB0aGUgW0pTT04gTGluZXNdKGh0dHBzOi8vanNvbmxpbmVzLnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC8pIGZpbGUgdG8gYmUgdXBsb2FkZWQuICBJZiB0aGUgJiN4NjA7cHVycG9zZSYjeDYwOyBpcyBzZXQgdG8gXFxcXFxcJnF1b3Q7ZmluZS10dW5lXFxcXFxcJnF1b3Q7LCBlYWNoIGxpbmUgaXMgYSBKU09OIHJlY29yZCB3aXRoIFxcXFxcXCZxdW90O3Byb21wdFxcXFxcXCZxdW90OyBhbmQgXFxcXFxcJnF1b3Q7Y29tcGxldGlvblxcXFxcXCZxdW90OyBmaWVsZHMgcmVwcmVzZW50aW5nIHlvdXIgW3RyYWluaW5nIGV4YW1wbGVzXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcvcHJlcGFyZS10cmFpbmluZy1kYXRhKS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHB1cnBvc2UgVGhlIGludGVuZGVkIHB1cnBvc2Ugb2YgdGhlIHVwbG9hZGVkIGRvY3VtZW50cy4gIFVzZSBcXFxcXFwmcXVvdDtmaW5lLXR1bmVcXFxcXFwmcXVvdDsgZm9yIFtGaW5lLXR1bmluZ10oL2RvY3MvYXBpLXJlZmVyZW5jZS9maW5lLXR1bmVzKS4gVGhpcyBhbGxvd3MgdXMgdG8gdmFsaWRhdGUgdGhlIGZvcm1hdCBvZiB0aGUgdXBsb2FkZWQgZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZUZpbGUoZmlsZSwgcHVycG9zZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlRmlsZShmaWxlLCBwdXJwb3NlLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIGpvYiB0aGF0IGZpbmUtdHVuZXMgYSBzcGVjaWZpZWQgbW9kZWwgZnJvbSBhIGdpdmVuIGRhdGFzZXQuICBSZXNwb25zZSBpbmNsdWRlcyBkZXRhaWxzIG9mIHRoZSBlbnF1ZXVlZCBqb2IgaW5jbHVkaW5nIGpvYiBzdGF0dXMgYW5kIHRoZSBuYW1lIG9mIHRoZSBmaW5lLXR1bmVkIG1vZGVscyBvbmNlIGNvbXBsZXRlLiAgW0xlYXJuIG1vcmUgYWJvdXQgRmluZS10dW5pbmddKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZylcbiAgICAgICAgICogQHBhcmFtIHtDcmVhdGVGaW5lVHVuZVJlcXVlc3R9IGNyZWF0ZUZpbmVUdW5lUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlRmluZVR1bmUoY3JlYXRlRmluZVR1bmVSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVGaW5lVHVuZShjcmVhdGVGaW5lVHVuZVJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGltYWdlIGdpdmVuIGEgcHJvbXB0LlxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZUltYWdlUmVxdWVzdH0gY3JlYXRlSW1hZ2VSZXF1ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVJbWFnZShjcmVhdGVJbWFnZVJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUltYWdlKGNyZWF0ZUltYWdlUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gZWRpdGVkIG9yIGV4dGVuZGVkIGltYWdlIGdpdmVuIGFuIG9yaWdpbmFsIGltYWdlIGFuZCBhIHByb21wdC5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBpbWFnZSBUaGUgaW1hZ2UgdG8gZWRpdC4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLiBJZiBtYXNrIGlzIG5vdCBwcm92aWRlZCwgaW1hZ2UgbXVzdCBoYXZlIHRyYW5zcGFyZW5jeSwgd2hpY2ggd2lsbCBiZSB1c2VkIGFzIHRoZSBtYXNrLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvbXB0IEEgdGV4dCBkZXNjcmlwdGlvbiBvZiB0aGUgZGVzaXJlZCBpbWFnZShzKS4gVGhlIG1heGltdW0gbGVuZ3RoIGlzIDEwMDAgY2hhcmFjdGVycy5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBbbWFza10gQW4gYWRkaXRpb25hbCBpbWFnZSB3aG9zZSBmdWxseSB0cmFuc3BhcmVudCBhcmVhcyAoZS5nLiB3aGVyZSBhbHBoYSBpcyB6ZXJvKSBpbmRpY2F0ZSB3aGVyZSAmI3g2MDtpbWFnZSYjeDYwOyBzaG91bGQgYmUgZWRpdGVkLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbnMgYXMgJiN4NjA7aW1hZ2UmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbl0gVGhlIG51bWJlciBvZiBpbWFnZXMgdG8gZ2VuZXJhdGUuIE11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXplXSBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7MjU2eDI1NiYjeDYwOywgJiN4NjA7NTEyeDUxMiYjeDYwOywgb3IgJiN4NjA7MTAyNHgxMDI0JiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7dXJsJiN4NjA7IG9yICYjeDYwO2I2NF9qc29uJiN4NjA7LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3VzZXJdIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBjcmVhdGVJbWFnZUVkaXQoaW1hZ2UsIHByb21wdCwgbWFzaywgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmNyZWF0ZUltYWdlRWRpdChpbWFnZSwgcHJvbXB0LCBtYXNrLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYSB2YXJpYXRpb24gb2YgYSBnaXZlbiBpbWFnZS5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBpbWFnZSBUaGUgaW1hZ2UgdG8gdXNlIGFzIHRoZSBiYXNpcyBmb3IgdGhlIHZhcmlhdGlvbihzKS4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLCBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc2l6ZV0gVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mICYjeDYwOzI1NngyNTYmI3g2MDssICYjeDYwOzUxMng1MTImI3g2MDssIG9yICYjeDYwOzEwMjR4MTAyNCYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mICYjeDYwO3VybCYjeDYwOyBvciAmI3g2MDtiNjRfanNvbiYjeDYwOy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VyXSBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlSW1hZ2VWYXJpYXRpb24oaW1hZ2UsIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVJbWFnZVZhcmlhdGlvbihpbWFnZSwgbiwgc2l6ZSwgcmVzcG9uc2VGb3JtYXQsIHVzZXIsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBDbGFzc2lmaWVzIGlmIHRleHQgdmlvbGF0ZXMgT3BlbkFJXFwncyBDb250ZW50IFBvbGljeVxuICAgICAgICAgKiBAcGFyYW0ge0NyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0fSBjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlTW9kZXJhdGlvbihjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlTW9kZXJhdGlvbihjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFRoZSBzZWFyY2ggZW5kcG9pbnQgY29tcHV0ZXMgc2ltaWxhcml0eSBzY29yZXMgYmV0d2VlbiBwcm92aWRlZCBxdWVyeSBhbmQgZG9jdW1lbnRzLiBEb2N1bWVudHMgY2FuIGJlIHBhc3NlZCBkaXJlY3RseSB0byB0aGUgQVBJIGlmIHRoZXJlIGFyZSBubyBtb3JlIHRoYW4gMjAwIG9mIHRoZW0uICBUbyBnbyBiZXlvbmQgdGhlIDIwMCBkb2N1bWVudCBsaW1pdCwgZG9jdW1lbnRzIGNhbiBiZSBwcm9jZXNzZWQgb2ZmbGluZSBhbmQgdGhlbiB1c2VkIGZvciBlZmZpY2llbnQgcmV0cmlldmFsIGF0IHF1ZXJ5IHRpbWUuIFdoZW4gYGZpbGVgIGlzIHNldCwgdGhlIHNlYXJjaCBlbmRwb2ludCBzZWFyY2hlcyBvdmVyIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBnaXZlbiBmaWxlIGFuZCByZXR1cm5zIHVwIHRvIHRoZSBgbWF4X3JlcmFua2AgbnVtYmVyIG9mIGRvY3VtZW50cy4gVGhlc2UgZG9jdW1lbnRzIHdpbGwgYmUgcmV0dXJuZWQgYWxvbmcgd2l0aCB0aGVpciBzZWFyY2ggc2NvcmVzLiAgVGhlIHNpbWlsYXJpdHkgc2NvcmUgaXMgYSBwb3NpdGl2ZSBzY29yZSB0aGF0IHVzdWFsbHkgcmFuZ2VzIGZyb20gMCB0byAzMDAgKGJ1dCBjYW4gc29tZXRpbWVzIGdvIGhpZ2hlciksIHdoZXJlIGEgc2NvcmUgYWJvdmUgMjAwIHVzdWFsbHkgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHNlbWFudGljYWxseSBzaW1pbGFyIHRvIHRoZSBxdWVyeS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGVuZ2luZUlkIFRoZSBJRCBvZiB0aGUgZW5naW5lIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0LiAgWW91IGNhbiBzZWxlY3Qgb25lIG9mICYjeDYwO2FkYSYjeDYwOywgJiN4NjA7YmFiYmFnZSYjeDYwOywgJiN4NjA7Y3VyaWUmI3g2MDssIG9yICYjeDYwO2RhdmluY2kmI3g2MDsuXG4gICAgICAgICAqIEBwYXJhbSB7Q3JlYXRlU2VhcmNoUmVxdWVzdH0gY3JlYXRlU2VhcmNoUmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgY3JlYXRlU2VhcmNoKGVuZ2luZUlkLCBjcmVhdGVTZWFyY2hSZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5jcmVhdGVTZWFyY2goZW5naW5lSWQsIGNyZWF0ZVNlYXJjaFJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBUcmFuc2NyaWJlcyBhdWRpbyBpbnRvIHRoZSBpbnB1dCBsYW5ndWFnZS5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBhdWRpbyBmaWxlIHRvIHRyYW5zY3JpYmUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOiBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCB3YXYsIG9yIHdlYm0uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5ICYjeDYwO3doaXNwZXItMSYjeDYwOyBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Byb21wdF0gQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWxcXFxcXFwmIzM5O3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIG1hdGNoIHRoZSBhdWRpbyBsYW5ndWFnZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RlbXBlcmF0dXJlXSBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2UgW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0byBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtsYW5ndWFnZV0gVGhlIGxhbmd1YWdlIG9mIHRoZSBpbnB1dCBhdWRpby4gU3VwcGx5aW5nIHRoZSBpbnB1dCBsYW5ndWFnZSBpbiBbSVNPLTYzOS0xXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0lTT182MzktMV9jb2RlcykgZm9ybWF0IHdpbGwgaW1wcm92ZSBhY2N1cmFjeSBhbmQgbGF0ZW5jeS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVRyYW5zY3JpcHRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBsYW5ndWFnZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlVHJhbnNjcmlwdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIGxhbmd1YWdlLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgVHJhbnNsYXRlcyBhdWRpbyBpbnRvIGludG8gRW5nbGlzaC5cbiAgICAgICAgICogQHBhcmFtIHtGaWxlfSBmaWxlIFRoZSBhdWRpbyBmaWxlIHRvIHRyYW5zbGF0ZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6IG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIHdhdiwgb3Igd2VibS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgJiN4NjA7d2hpc3Blci0xJiN4NjA7IGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvbXB0XSBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbFxcXFxcXCYjMzk7cyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgYmUgaW4gRW5nbGlzaC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFtyZXNwb25zZUZvcm1hdF0gVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RlbXBlcmF0dXJlXSBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2UgW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0byBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGNyZWF0ZVRyYW5zbGF0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuY3JlYXRlVHJhbnNsYXRpb24oZmlsZSwgbW9kZWwsIHByb21wdCwgcmVzcG9uc2VGb3JtYXQsIHRlbXBlcmF0dXJlLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgRGVsZXRlIGEgZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGRlbGV0ZUZpbGUoZmlsZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5kZWxldGVGaWxlKGZpbGVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IERlbGV0ZSBhIGZpbmUtdHVuZWQgbW9kZWwuIFlvdSBtdXN0IGhhdmUgdGhlIE93bmVyIHJvbGUgaW4geW91ciBvcmdhbml6YXRpb24uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBUaGUgbW9kZWwgdG8gZGVsZXRlXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGVNb2RlbChtb2RlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAuZGVsZXRlTW9kZWwobW9kZWwsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIHRoZSBjb250ZW50cyBvZiB0aGUgc3BlY2lmaWVkIGZpbGVcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGRvd25sb2FkRmlsZShmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmRvd25sb2FkRmlsZShmaWxlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSAobm9uLWZpbmV0dW5lZCkgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RFbmdpbmVzKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmxpc3RFbmdpbmVzKG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIGEgbGlzdCBvZiBmaWxlcyB0aGF0IGJlbG9uZyB0byB0aGUgdXNlclxcJ3Mgb3JnYW5pemF0aW9uLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEZpbGVzKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLmxpc3RGaWxlcyhvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgR2V0IGZpbmUtZ3JhaW5lZCBzdGF0dXMgdXBkYXRlcyBmb3IgYSBmaW5lLXR1bmUgam9iLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZVR1bmVJZCBUaGUgSUQgb2YgdGhlIGZpbmUtdHVuZSBqb2IgdG8gZ2V0IGV2ZW50cyBmb3IuXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0cmVhbV0gV2hldGhlciB0byBzdHJlYW0gZXZlbnRzIGZvciB0aGUgZmluZS10dW5lIGpvYi4gSWYgc2V0IHRvIHRydWUsIGV2ZW50cyB3aWxsIGJlIHNlbnQgYXMgZGF0YS1vbmx5IFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZS4gVGhlIHN0cmVhbSB3aWxsIHRlcm1pbmF0ZSB3aXRoIGEgJiN4NjA7ZGF0YTogW0RPTkVdJiN4NjA7IG1lc3NhZ2Ugd2hlbiB0aGUgam9iIGlzIGZpbmlzaGVkIChzdWNjZWVkZWQsIGNhbmNlbGxlZCwgb3IgZmFpbGVkKS4gIElmIHNldCB0byBmYWxzZSwgb25seSBldmVudHMgZ2VuZXJhdGVkIHNvIGZhciB3aWxsIGJlIHJldHVybmVkLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgbGlzdEZpbmVUdW5lRXZlbnRzKGZpbmVUdW5lSWQsIHN0cmVhbSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAubGlzdEZpbmVUdW5lRXZlbnRzKGZpbmVUdW5lSWQsIHN0cmVhbSwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IExpc3QgeW91ciBvcmdhbml6YXRpb25cXCdzIGZpbmUtdHVuaW5nIGpvYnNcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RGaW5lVHVuZXMob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAubGlzdEZpbmVUdW5lcyhvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RNb2RlbHMob3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAubGlzdE1vZGVscyhvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHN1bW1hcnkgUmV0cmlldmVzIGEgbW9kZWwgaW5zdGFuY2UsIHByb3ZpZGluZyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBpdCBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZW5naW5lSWQgVGhlIElEIG9mIHRoZSBlbmdpbmUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlRW5naW5lKGVuZ2luZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5yZXRyaWV2ZUVuZ2luZShlbmdpbmVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IFJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpYyBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVGaWxlKGZpbGVJZCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsVmFyRnAucmV0cmlldmVGaWxlKGZpbGVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBzdW1tYXJ5IEdldHMgaW5mbyBhYm91dCB0aGUgZmluZS10dW5lIGpvYi4gIFtMZWFybiBtb3JlIGFib3V0IEZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgcmV0cmlldmVGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxWYXJGcC5yZXRyaWV2ZUZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc3VtbWFyeSBSZXRyaWV2ZXMgYSBtb2RlbCBpbnN0YW5jZSwgcHJvdmlkaW5nIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtb2RlbCBzdWNoIGFzIHRoZSBvd25lciBhbmQgcGVybWlzc2lvbmluZy5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIFRoZSBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHJldHJpZXZlTW9kZWwobW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbFZhckZwLnJldHJpZXZlTW9kZWwobW9kZWwsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG4vKipcbiAqIE9wZW5BSUFwaSAtIG9iamVjdC1vcmllbnRlZCBpbnRlcmZhY2VcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBPcGVuQUlBcGlcbiAqIEBleHRlbmRzIHtCYXNlQVBJfVxuICovXG5jbGFzcyBPcGVuQUlBcGkgZXh0ZW5kcyBiYXNlXzEuQmFzZUFQSSB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBJbW1lZGlhdGVseSBjYW5jZWwgYSBmaW5lLXR1bmUgam9iLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaW5lVHVuZUlkIFRoZSBJRCBvZiB0aGUgZmluZS10dW5lIGpvYiB0byBjYW5jZWxcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNhbmNlbEZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jYW5jZWxGaW5lVHVuZShmaW5lVHVuZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBBbnN3ZXJzIHRoZSBzcGVjaWZpZWQgcXVlc3Rpb24gdXNpbmcgdGhlIHByb3ZpZGVkIGRvY3VtZW50cyBhbmQgZXhhbXBsZXMuICBUaGUgZW5kcG9pbnQgZmlyc3QgW3NlYXJjaGVzXSgvZG9jcy9hcGktcmVmZXJlbmNlL3NlYXJjaGVzKSBvdmVyIHByb3ZpZGVkIGRvY3VtZW50cyBvciBmaWxlcyB0byBmaW5kIHJlbGV2YW50IGNvbnRleHQuIFRoZSByZWxldmFudCBjb250ZXh0IGlzIGNvbWJpbmVkIHdpdGggdGhlIHByb3ZpZGVkIGV4YW1wbGVzIGFuZCBxdWVzdGlvbiB0byBjcmVhdGUgdGhlIHByb21wdCBmb3IgW2NvbXBsZXRpb25dKC9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMpLlxuICAgICAqIEBwYXJhbSB7Q3JlYXRlQW5zd2VyUmVxdWVzdH0gY3JlYXRlQW5zd2VyUmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVBbnN3ZXIoY3JlYXRlQW5zd2VyUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUFuc3dlcihjcmVhdGVBbnN3ZXJSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgY29tcGxldGlvbiBmb3IgdGhlIGNoYXQgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7Q3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0fSBjcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUNoYXRDb21wbGV0aW9uKGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUNoYXRDb21wbGV0aW9uKGNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ2xhc3NpZmllcyB0aGUgc3BlY2lmaWVkIGBxdWVyeWAgdXNpbmcgcHJvdmlkZWQgZXhhbXBsZXMuICBUaGUgZW5kcG9pbnQgZmlyc3QgW3NlYXJjaGVzXSgvZG9jcy9hcGktcmVmZXJlbmNlL3NlYXJjaGVzKSBvdmVyIHRoZSBsYWJlbGVkIGV4YW1wbGVzIHRvIHNlbGVjdCB0aGUgb25lcyBtb3N0IHJlbGV2YW50IGZvciB0aGUgcGFydGljdWxhciBxdWVyeS4gVGhlbiwgdGhlIHJlbGV2YW50IGV4YW1wbGVzIGFyZSBjb21iaW5lZCB3aXRoIHRoZSBxdWVyeSB0byBjb25zdHJ1Y3QgYSBwcm9tcHQgdG8gcHJvZHVjZSB0aGUgZmluYWwgbGFiZWwgdmlhIHRoZSBbY29tcGxldGlvbnNdKC9kb2NzL2FwaS1yZWZlcmVuY2UvY29tcGxldGlvbnMpIGVuZHBvaW50LiAgTGFiZWxlZCBleGFtcGxlcyBjYW4gYmUgcHJvdmlkZWQgdmlhIGFuIHVwbG9hZGVkIGBmaWxlYCwgb3IgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIHJlcXVlc3QgdXNpbmcgdGhlIGBleGFtcGxlc2AgcGFyYW1ldGVyIGZvciBxdWljayB0ZXN0cyBhbmQgc21hbGwgc2NhbGUgdXNlIGNhc2VzLlxuICAgICAqIEBwYXJhbSB7Q3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0fSBjcmVhdGVDbGFzc2lmaWNhdGlvblJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlQ2xhc3NpZmljYXRpb24oY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlQ2xhc3NpZmljYXRpb24oY3JlYXRlQ2xhc3NpZmljYXRpb25SZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgY29tcGxldGlvbiBmb3IgdGhlIHByb3ZpZGVkIHByb21wdCBhbmQgcGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSB7Q3JlYXRlQ29tcGxldGlvblJlcXVlc3R9IGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVDb21wbGV0aW9uKGNyZWF0ZUNvbXBsZXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlQ29tcGxldGlvbihjcmVhdGVDb21wbGV0aW9uUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIG5ldyBlZGl0IGZvciB0aGUgcHJvdmlkZWQgaW5wdXQsIGluc3RydWN0aW9uLCBhbmQgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0ge0NyZWF0ZUVkaXRSZXF1ZXN0fSBjcmVhdGVFZGl0UmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlRWRpdChjcmVhdGVFZGl0UmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUVkaXQoY3JlYXRlRWRpdFJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gZW1iZWRkaW5nIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGlucHV0IHRleHQuXG4gICAgICogQHBhcmFtIHtDcmVhdGVFbWJlZGRpbmdSZXF1ZXN0fSBjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVFbWJlZGRpbmcoY3JlYXRlRW1iZWRkaW5nUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUVtYmVkZGluZyhjcmVhdGVFbWJlZGRpbmdSZXF1ZXN0LCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBVcGxvYWQgYSBmaWxlIHRoYXQgY29udGFpbnMgZG9jdW1lbnQocykgdG8gYmUgdXNlZCBhY3Jvc3MgdmFyaW91cyBlbmRwb2ludHMvZmVhdHVyZXMuIEN1cnJlbnRseSwgdGhlIHNpemUgb2YgYWxsIHRoZSBmaWxlcyB1cGxvYWRlZCBieSBvbmUgb3JnYW5pemF0aW9uIGNhbiBiZSB1cCB0byAxIEdCLiBQbGVhc2UgY29udGFjdCB1cyBpZiB5b3UgbmVlZCB0byBpbmNyZWFzZSB0aGUgc3RvcmFnZSBsaW1pdC5cbiAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGUgTmFtZSBvZiB0aGUgW0pTT04gTGluZXNdKGh0dHBzOi8vanNvbmxpbmVzLnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC8pIGZpbGUgdG8gYmUgdXBsb2FkZWQuICBJZiB0aGUgJiN4NjA7cHVycG9zZSYjeDYwOyBpcyBzZXQgdG8gXFxcXFxcJnF1b3Q7ZmluZS10dW5lXFxcXFxcJnF1b3Q7LCBlYWNoIGxpbmUgaXMgYSBKU09OIHJlY29yZCB3aXRoIFxcXFxcXCZxdW90O3Byb21wdFxcXFxcXCZxdW90OyBhbmQgXFxcXFxcJnF1b3Q7Y29tcGxldGlvblxcXFxcXCZxdW90OyBmaWVsZHMgcmVwcmVzZW50aW5nIHlvdXIgW3RyYWluaW5nIGV4YW1wbGVzXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcvcHJlcGFyZS10cmFpbmluZy1kYXRhKS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHVycG9zZSBUaGUgaW50ZW5kZWQgcHVycG9zZSBvZiB0aGUgdXBsb2FkZWQgZG9jdW1lbnRzLiAgVXNlIFxcXFxcXCZxdW90O2ZpbmUtdHVuZVxcXFxcXCZxdW90OyBmb3IgW0ZpbmUtdHVuaW5nXSgvZG9jcy9hcGktcmVmZXJlbmNlL2ZpbmUtdHVuZXMpLiBUaGlzIGFsbG93cyB1cyB0byB2YWxpZGF0ZSB0aGUgZm9ybWF0IG9mIHRoZSB1cGxvYWRlZCBmaWxlLlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlRmlsZShmaWxlLCBwdXJwb3NlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlRmlsZShmaWxlLCBwdXJwb3NlLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGEgam9iIHRoYXQgZmluZS10dW5lcyBhIHNwZWNpZmllZCBtb2RlbCBmcm9tIGEgZ2l2ZW4gZGF0YXNldC4gIFJlc3BvbnNlIGluY2x1ZGVzIGRldGFpbHMgb2YgdGhlIGVucXVldWVkIGpvYiBpbmNsdWRpbmcgam9iIHN0YXR1cyBhbmQgdGhlIG5hbWUgb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWxzIG9uY2UgY29tcGxldGUuICBbTGVhcm4gbW9yZSBhYm91dCBGaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nKVxuICAgICAqIEBwYXJhbSB7Q3JlYXRlRmluZVR1bmVSZXF1ZXN0fSBjcmVhdGVGaW5lVHVuZVJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUZpbmVUdW5lKGNyZWF0ZUZpbmVUdW5lUmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUZpbmVUdW5lKGNyZWF0ZUZpbmVUdW5lUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBpbWFnZSBnaXZlbiBhIHByb21wdC5cbiAgICAgKiBAcGFyYW0ge0NyZWF0ZUltYWdlUmVxdWVzdH0gY3JlYXRlSW1hZ2VSZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVJbWFnZShjcmVhdGVJbWFnZVJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVJbWFnZShjcmVhdGVJbWFnZVJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gZWRpdGVkIG9yIGV4dGVuZGVkIGltYWdlIGdpdmVuIGFuIG9yaWdpbmFsIGltYWdlIGFuZCBhIHByb21wdC5cbiAgICAgKiBAcGFyYW0ge0ZpbGV9IGltYWdlIFRoZSBpbWFnZSB0byBlZGl0LiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuIElmIG1hc2sgaXMgbm90IHByb3ZpZGVkLCBpbWFnZSBtdXN0IGhhdmUgdHJhbnNwYXJlbmN5LCB3aGljaCB3aWxsIGJlIHVzZWQgYXMgdGhlIG1hc2suXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb21wdCBBIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGRlc2lyZWQgaW1hZ2UocykuIFRoZSBtYXhpbXVtIGxlbmd0aCBpcyAxMDAwIGNoYXJhY3RlcnMuXG4gICAgICogQHBhcmFtIHtGaWxlfSBbbWFza10gQW4gYWRkaXRpb25hbCBpbWFnZSB3aG9zZSBmdWxseSB0cmFuc3BhcmVudCBhcmVhcyAoZS5nLiB3aGVyZSBhbHBoYSBpcyB6ZXJvKSBpbmRpY2F0ZSB3aGVyZSAmI3g2MDtpbWFnZSYjeDYwOyBzaG91bGQgYmUgZWRpdGVkLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbnMgYXMgJiN4NjA7aW1hZ2UmI3g2MDsuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtuXSBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc2l6ZV0gVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mICYjeDYwOzI1NngyNTYmI3g2MDssICYjeDYwOzUxMng1MTImI3g2MDssIG9yICYjeDYwOzEwMjR4MTAyNCYjeDYwOy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3Jlc3BvbnNlRm9ybWF0XSBUaGUgZm9ybWF0IGluIHdoaWNoIHRoZSBnZW5lcmF0ZWQgaW1hZ2VzIGFyZSByZXR1cm5lZC4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7dXJsJiN4NjA7IG9yICYjeDYwO2I2NF9qc29uJiN4NjA7LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcl0gQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZUltYWdlRWRpdChpbWFnZSwgcHJvbXB0LCBtYXNrLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZUltYWdlRWRpdChpbWFnZSwgcHJvbXB0LCBtYXNrLCBuLCBzaXplLCByZXNwb25zZUZvcm1hdCwgdXNlciwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhIHZhcmlhdGlvbiBvZiBhIGdpdmVuIGltYWdlLlxuICAgICAqIEBwYXJhbSB7RmlsZX0gaW1hZ2UgVGhlIGltYWdlIHRvIHVzZSBhcyB0aGUgYmFzaXMgZm9yIHRoZSB2YXJpYXRpb24ocykuIE11c3QgYmUgYSB2YWxpZCBQTkcgZmlsZSwgbGVzcyB0aGFuIDRNQiwgYW5kIHNxdWFyZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW25dIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXplXSBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgJiN4NjA7MjU2eDI1NiYjeDYwOywgJiN4NjA7NTEyeDUxMiYjeDYwOywgb3IgJiN4NjA7MTAyNHgxMDI0JiN4NjA7LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiAmI3g2MDt1cmwmI3g2MDsgb3IgJiN4NjA7YjY0X2pzb24mI3g2MDsuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VyXSBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlSW1hZ2VWYXJpYXRpb24oaW1hZ2UsIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlSW1hZ2VWYXJpYXRpb24oaW1hZ2UsIG4sIHNpemUsIHJlc3BvbnNlRm9ybWF0LCB1c2VyLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBDbGFzc2lmaWVzIGlmIHRleHQgdmlvbGF0ZXMgT3BlbkFJXFwncyBDb250ZW50IFBvbGljeVxuICAgICAqIEBwYXJhbSB7Q3JlYXRlTW9kZXJhdGlvblJlcXVlc3R9IGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVNb2RlcmF0aW9uKGNyZWF0ZU1vZGVyYXRpb25SZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlTW9kZXJhdGlvbihjcmVhdGVNb2RlcmF0aW9uUmVxdWVzdCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgVGhlIHNlYXJjaCBlbmRwb2ludCBjb21wdXRlcyBzaW1pbGFyaXR5IHNjb3JlcyBiZXR3ZWVuIHByb3ZpZGVkIHF1ZXJ5IGFuZCBkb2N1bWVudHMuIERvY3VtZW50cyBjYW4gYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBBUEkgaWYgdGhlcmUgYXJlIG5vIG1vcmUgdGhhbiAyMDAgb2YgdGhlbS4gIFRvIGdvIGJleW9uZCB0aGUgMjAwIGRvY3VtZW50IGxpbWl0LCBkb2N1bWVudHMgY2FuIGJlIHByb2Nlc3NlZCBvZmZsaW5lIGFuZCB0aGVuIHVzZWQgZm9yIGVmZmljaWVudCByZXRyaWV2YWwgYXQgcXVlcnkgdGltZS4gV2hlbiBgZmlsZWAgaXMgc2V0LCB0aGUgc2VhcmNoIGVuZHBvaW50IHNlYXJjaGVzIG92ZXIgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGdpdmVuIGZpbGUgYW5kIHJldHVybnMgdXAgdG8gdGhlIGBtYXhfcmVyYW5rYCBudW1iZXIgb2YgZG9jdW1lbnRzLiBUaGVzZSBkb2N1bWVudHMgd2lsbCBiZSByZXR1cm5lZCBhbG9uZyB3aXRoIHRoZWlyIHNlYXJjaCBzY29yZXMuICBUaGUgc2ltaWxhcml0eSBzY29yZSBpcyBhIHBvc2l0aXZlIHNjb3JlIHRoYXQgdXN1YWxseSByYW5nZXMgZnJvbSAwIHRvIDMwMCAoYnV0IGNhbiBzb21ldGltZXMgZ28gaGlnaGVyKSwgd2hlcmUgYSBzY29yZSBhYm92ZSAyMDAgdXN1YWxseSBtZWFucyB0aGUgZG9jdW1lbnQgaXMgc2VtYW50aWNhbGx5IHNpbWlsYXIgdG8gdGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmdpbmVJZCBUaGUgSUQgb2YgdGhlIGVuZ2luZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdC4gIFlvdSBjYW4gc2VsZWN0IG9uZSBvZiAmI3g2MDthZGEmI3g2MDssICYjeDYwO2JhYmJhZ2UmI3g2MDssICYjeDYwO2N1cmllJiN4NjA7LCBvciAmI3g2MDtkYXZpbmNpJiN4NjA7LlxuICAgICAqIEBwYXJhbSB7Q3JlYXRlU2VhcmNoUmVxdWVzdH0gY3JlYXRlU2VhcmNoUmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBjcmVhdGVTZWFyY2goZW5naW5lSWQsIGNyZWF0ZVNlYXJjaFJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5jcmVhdGVTZWFyY2goZW5naW5lSWQsIGNyZWF0ZVNlYXJjaFJlcXVlc3QsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFRyYW5zY3JpYmVzIGF1ZGlvIGludG8gdGhlIGlucHV0IGxhbmd1YWdlLlxuICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgYXVkaW8gZmlsZSB0byB0cmFuc2NyaWJlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czogbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgd2F2LCBvciB3ZWJtLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5ICYjeDYwO3doaXNwZXItMSYjeDYwOyBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvbXB0XSBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbFxcXFxcXCYjMzk7cyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgbWF0Y2ggdGhlIGF1ZGlvIGxhbmd1YWdlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LCB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RlbXBlcmF0dXJlXSBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2UgW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0byBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhbmd1YWdlXSBUaGUgbGFuZ3VhZ2Ugb2YgdGhlIGlucHV0IGF1ZGlvLiBTdXBwbHlpbmcgdGhlIGlucHV0IGxhbmd1YWdlIGluIFtJU08tNjM5LTFdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfSVNPXzYzOS0xX2NvZGVzKSBmb3JtYXQgd2lsbCBpbXByb3ZlIGFjY3VyYWN5IGFuZCBsYXRlbmN5LlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgY3JlYXRlVHJhbnNjcmlwdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIGxhbmd1YWdlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikuY3JlYXRlVHJhbnNjcmlwdGlvbihmaWxlLCBtb2RlbCwgcHJvbXB0LCByZXNwb25zZUZvcm1hdCwgdGVtcGVyYXR1cmUsIGxhbmd1YWdlLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBUcmFuc2xhdGVzIGF1ZGlvIGludG8gaW50byBFbmdsaXNoLlxuICAgICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgYXVkaW8gZmlsZSB0byB0cmFuc2xhdGUsIGluIG9uZSBvZiB0aGVzZSBmb3JtYXRzOiBtcDMsIG1wNCwgbXBlZywgbXBnYSwgbTRhLCB3YXYsIG9yIHdlYm0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGVsIElEIG9mIHRoZSBtb2RlbCB0byB1c2UuIE9ubHkgJiN4NjA7d2hpc3Blci0xJiN4NjA7IGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9tcHRdIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsXFxcXFxcJiMzOTtzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW8gc2VnbWVudC4gVGhlIFtwcm9tcHRdKC9kb2NzL2d1aWRlcy9zcGVlY2gtdG8tdGV4dC9wcm9tcHRpbmcpIHNob3VsZCBiZSBpbiBFbmdsaXNoLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVzcG9uc2VGb3JtYXRdIFRoZSBmb3JtYXQgb2YgdGhlIHRyYW5zY3JpcHQgb3V0cHV0LCBpbiBvbmUgb2YgdGhlc2Ugb3B0aW9uczoganNvbiwgdGV4dCwgc3J0LCB2ZXJib3NlX2pzb24sIG9yIHZ0dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RlbXBlcmF0dXJlXSBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2UgW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0byBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGNyZWF0ZVRyYW5zbGF0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmNyZWF0ZVRyYW5zbGF0aW9uKGZpbGUsIG1vZGVsLCBwcm9tcHQsIHJlc3BvbnNlRm9ybWF0LCB0ZW1wZXJhdHVyZSwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgRGVsZXRlIGEgZmlsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgZGVsZXRlRmlsZShmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5kZWxldGVGaWxlKGZpbGVJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgRGVsZXRlIGEgZmluZS10dW5lZCBtb2RlbC4gWW91IG11c3QgaGF2ZSB0aGUgT3duZXIgcm9sZSBpbiB5b3VyIG9yZ2FuaXphdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgVGhlIG1vZGVsIHRvIGRlbGV0ZVxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgZGVsZXRlTW9kZWwobW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5kZWxldGVNb2RlbChtb2RlbCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgUmV0dXJucyB0aGUgY29udGVudHMgb2YgdGhlIHNwZWNpZmllZCBmaWxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVJZCBUaGUgSUQgb2YgdGhlIGZpbGUgdG8gdXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGRvd25sb2FkRmlsZShmaWxlSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5kb3dubG9hZEZpbGUoZmlsZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBMaXN0cyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSAobm9uLWZpbmV0dW5lZCkgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgbGlzdEVuZ2luZXMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmxpc3RFbmdpbmVzKG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFJldHVybnMgYSBsaXN0IG9mIGZpbGVzIHRoYXQgYmVsb25nIHRvIHRoZSB1c2VyXFwncyBvcmdhbml6YXRpb24uXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICBsaXN0RmlsZXMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmxpc3RGaWxlcyhvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBHZXQgZmluZS1ncmFpbmVkIHN0YXR1cyB1cGRhdGVzIGZvciBhIGZpbmUtdHVuZSBqb2IuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iIHRvIGdldCBldmVudHMgZm9yLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0cmVhbV0gV2hldGhlciB0byBzdHJlYW0gZXZlbnRzIGZvciB0aGUgZmluZS10dW5lIGpvYi4gSWYgc2V0IHRvIHRydWUsIGV2ZW50cyB3aWxsIGJlIHNlbnQgYXMgZGF0YS1vbmx5IFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZS4gVGhlIHN0cmVhbSB3aWxsIHRlcm1pbmF0ZSB3aXRoIGEgJiN4NjA7ZGF0YTogW0RPTkVdJiN4NjA7IG1lc3NhZ2Ugd2hlbiB0aGUgam9iIGlzIGZpbmlzaGVkIChzdWNjZWVkZWQsIGNhbmNlbGxlZCwgb3IgZmFpbGVkKS4gIElmIHNldCB0byBmYWxzZSwgb25seSBldmVudHMgZ2VuZXJhdGVkIHNvIGZhciB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgbGlzdEZpbmVUdW5lRXZlbnRzKGZpbmVUdW5lSWQsIHN0cmVhbSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmxpc3RGaW5lVHVuZUV2ZW50cyhmaW5lVHVuZUlkLCBzdHJlYW0sIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IExpc3QgeW91ciBvcmdhbml6YXRpb25cXCdzIGZpbmUtdHVuaW5nIGpvYnNcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGxpc3RGaW5lVHVuZXMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmxpc3RGaW5lVHVuZXMob3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaCBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIE9wZW5BSUFwaVxuICAgICAqL1xuICAgIGxpc3RNb2RlbHMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmxpc3RNb2RlbHMob3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgUmV0cmlldmVzIGEgbW9kZWwgaW5zdGFuY2UsIHByb3ZpZGluZyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCBpdCBzdWNoIGFzIHRoZSBvd25lciBhbmQgYXZhaWxhYmlsaXR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbmdpbmVJZCBUaGUgSUQgb2YgdGhlIGVuZ2luZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICByZXRyaWV2ZUVuZ2luZShlbmdpbmVJZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLnJldHJpZXZlRW5naW5lKGVuZ2luZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc3VtbWFyeSBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgZmlsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZUlkIFRoZSBJRCBvZiB0aGUgZmlsZSB0byB1c2UgZm9yIHRoaXMgcmVxdWVzdFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgT3BlbkFJQXBpXG4gICAgICovXG4gICAgcmV0cmlldmVGaWxlKGZpbGVJZCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PcGVuQUlBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLnJldHJpZXZlRmlsZShmaWxlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IEdldHMgaW5mbyBhYm91dCB0aGUgZmluZS10dW5lIGpvYi4gIFtMZWFybiBtb3JlIGFib3V0IEZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmVUdW5lSWQgVGhlIElEIG9mIHRoZSBmaW5lLXR1bmUgam9iXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICByZXRyaWV2ZUZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGV4cG9ydHMuT3BlbkFJQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5yZXRyaWV2ZUZpbmVUdW5lKGZpbmVUdW5lSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFJldHJpZXZlcyBhIG1vZGVsIGluc3RhbmNlLCBwcm92aWRpbmcgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZGVsIHN1Y2ggYXMgdGhlIG93bmVyIGFuZCBwZXJtaXNzaW9uaW5nLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlbCBUaGUgSUQgb2YgdGhlIG1vZGVsIHRvIHVzZSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBPcGVuQUlBcGlcbiAgICAgKi9cbiAgICByZXRyaWV2ZU1vZGVsKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9wZW5BSUFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikucmV0cmlldmVNb2RlbChtb2RlbCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxufVxuZXhwb3J0cy5PcGVuQUlBcGkgPSBPcGVuQUlBcGk7XG4iLCIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cbm1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgPyBzZWxmLkZvcm1EYXRhIDogd2luZG93LkZvcm1EYXRhO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogT3BlbkFJIEFQSVxuICogQVBJcyBmb3Igc2FtcGxpbmcgZnJvbSBhbmQgZmluZS10dW5pbmcgbGFuZ3VhZ2UgbW9kZWxzXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IDEuMi4wXG4gKlxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Db25maWd1cmF0aW9uID0gdm9pZCAwO1xuY29uc3QgcGFja2FnZUpzb24gPSByZXF1aXJlKFwiLi4vcGFja2FnZS5qc29uXCIpO1xuY2xhc3MgQ29uZmlndXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IocGFyYW0gPSB7fSkge1xuICAgICAgICB0aGlzLmFwaUtleSA9IHBhcmFtLmFwaUtleTtcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb24gPSBwYXJhbS5vcmdhbml6YXRpb247XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSBwYXJhbS51c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhcmFtLnBhc3N3b3JkO1xuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gcGFyYW0uYWNjZXNzVG9rZW47XG4gICAgICAgIHRoaXMuYmFzZVBhdGggPSBwYXJhbS5iYXNlUGF0aDtcbiAgICAgICAgdGhpcy5iYXNlT3B0aW9ucyA9IHBhcmFtLmJhc2VPcHRpb25zO1xuICAgICAgICB0aGlzLmZvcm1EYXRhQ3RvciA9IHBhcmFtLmZvcm1EYXRhQ3RvcjtcbiAgICAgICAgaWYgKCF0aGlzLmJhc2VPcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmJhc2VPcHRpb25zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYXNlT3B0aW9ucy5oZWFkZXJzID0gT2JqZWN0LmFzc2lnbih7ICdVc2VyLUFnZW50JzogYE9wZW5BSS9Ob2RlSlMvJHtwYWNrYWdlSnNvbi52ZXJzaW9ufWAsICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAgfSwgdGhpcy5iYXNlT3B0aW9ucy5oZWFkZXJzKTtcbiAgICAgICAgaWYgKHRoaXMub3JnYW5pemF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmJhc2VPcHRpb25zLmhlYWRlcnNbJ09wZW5BSS1Pcmdhbml6YXRpb24nXSA9IHRoaXMub3JnYW5pemF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5mb3JtRGF0YUN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFDdG9yID0gcmVxdWlyZShcImZvcm0tZGF0YVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgZ2l2ZW4gTUlNRSBpcyBhIEpTT04gTUlNRS5cbiAgICAgKiBKU09OIE1JTUUgZXhhbXBsZXM6XG4gICAgICogICBhcHBsaWNhdGlvbi9qc29uXG4gICAgICogICBhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURjhcbiAgICAgKiAgIEFQUExJQ0FUSU9OL0pTT05cbiAgICAgKiAgIGFwcGxpY2F0aW9uL3ZuZC5jb21wYW55K2pzb25cbiAgICAgKiBAcGFyYW0gbWltZSAtIE1JTUUgKE11bHRpcHVycG9zZSBJbnRlcm5ldCBNYWlsIEV4dGVuc2lvbnMpXG4gICAgICogQHJldHVybiBUcnVlIGlmIHRoZSBnaXZlbiBNSU1FIGlzIEpTT04sIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc0pzb25NaW1lKG1pbWUpIHtcbiAgICAgICAgY29uc3QganNvbk1pbWUgPSBuZXcgUmVnRXhwKCdeKGFwcGxpY2F0aW9uXFwvanNvbnxbXjsvIFxcdF0rXFwvW147LyBcXHRdK1srXWpzb24pWyBcXHRdKig7LiopPyQnLCAnaScpO1xuICAgICAgICByZXR1cm4gbWltZSAhPT0gbnVsbCAmJiAoanNvbk1pbWUudGVzdChtaW1lKSB8fCBtaW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhcHBsaWNhdGlvbi9qc29uLXBhdGNoK2pzb24nKTtcbiAgICB9XG59XG5leHBvcnRzLkNvbmZpZ3VyYXRpb24gPSBDb25maWd1cmF0aW9uO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogT3BlbkFJIEFQSVxuICogQVBJcyBmb3Igc2FtcGxpbmcgZnJvbSBhbmQgZmluZS10dW5pbmcgbGFuZ3VhZ2UgbW9kZWxzXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IDEuMi4wXG4gKlxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2FwaVwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29uZmlndXJhdGlvblwiKSwgZXhwb3J0cyk7XG4iLCJleHBvcnQgY29uc3QgaXNCcm93c2VyID0gKCkgPT4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiO1xuZXhwb3J0IGNvbnN0IGlzV2ViV29ya2VyID0gKCkgPT4gdHlwZW9mIGdsb2JhbFRoaXMgPT09IFwib2JqZWN0XCIgJiZcbiAgICBnbG9iYWxUaGlzLmNvbnN0cnVjdG9yICYmXG4gICAgZ2xvYmFsVGhpcy5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIkRlZGljYXRlZFdvcmtlckdsb2JhbFNjb3BlXCI7XG5leHBvcnQgY29uc3QgaXNKc0RvbSA9ICgpID0+ICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5uYW1lID09PSBcIm5vZGVqc1wiKSB8fFxuICAgICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwiTm9kZS5qc1wiKSB8fFxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcImpzZG9tXCIpKSk7XG4vLyBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uIHByb3ZpZGVzIGEgYERlbm9gIGdsb2JhbCBvYmplY3Rcbi8vIHdpdGhvdXQgYHZlcnNpb25gIHByb3BlcnR5XG5leHBvcnQgY29uc3QgaXNEZW5vID0gKCkgPT4gdHlwZW9mIERlbm8gIT09IFwidW5kZWZpbmVkXCI7XG4vLyBNYXJrIG5vdC1hcy1ub2RlIGlmIGluIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb25cbmV4cG9ydCBjb25zdCBpc05vZGUgPSAoKSA9PiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICFpc0Rlbm8oKTtcbmV4cG9ydCBjb25zdCBnZXRFbnYgPSAoKSA9PiB7XG4gICAgbGV0IGVudjtcbiAgICBpZiAoaXNCcm93c2VyKCkpIHtcbiAgICAgICAgZW52ID0gXCJicm93c2VyXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzTm9kZSgpKSB7XG4gICAgICAgIGVudiA9IFwibm9kZVwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1dlYldvcmtlcigpKSB7XG4gICAgICAgIGVudiA9IFwid2Vid29ya2VyXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzSnNEb20oKSkge1xuICAgICAgICBlbnYgPSBcImpzZG9tXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRGVubygpKSB7XG4gICAgICAgIGVudiA9IFwiZGVub1wiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZW52ID0gXCJvdGhlclwiO1xuICAgIH1cbiAgICByZXR1cm4gZW52O1xufTtcbmxldCBydW50aW1lRW52aXJvbm1lbnQ7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UnVudGltZUVudmlyb25tZW50KCkge1xuICAgIGlmIChydW50aW1lRW52aXJvbm1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBlbnYgPSBnZXRFbnYoKTtcbiAgICAgICAgcnVudGltZUVudmlyb25tZW50ID0ge1xuICAgICAgICAgICAgbGlicmFyeTogXCJsYW5nY2hhaW4tanNcIixcbiAgICAgICAgICAgIHJ1bnRpbWU6IGVudixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bnRpbWVFbnZpcm9ubWVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKG5hbWUpIHtcbiAgICAvLyBDZXJ0YWluIERlbm8gc2V0dXBzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgeW91IHRyeSB0byBhY2Nlc3MgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2h3Y2hhc2UxNy9sYW5nY2hhaW5qcy9pc3N1ZXMvMTQxMlxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvY2Vzcy1lbnZcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVudj8uW25hbWVdXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItdGVtcGxhdGUgKi9cbi8qIGVzbGludC1kaXNhYmxlIGRlZmF1bHQtY2FzZSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZ2ZvcnRhaW5lL2ZldGNoLWV2ZW50LXNvdXJjZS9ibG9iL21haW4vc3JjL3BhcnNlLnRzXG4vLyBkdWUgdG8gYSBwYWNrYWdpbmcgaXNzdWUgaW4gdGhlIG9yaWdpbmFsLlxuLy8gTUlUIExpY2Vuc2VcbmV4cG9ydCBjb25zdCBFdmVudFN0cmVhbUNvbnRlbnRUeXBlID0gXCJ0ZXh0L2V2ZW50LXN0cmVhbVwiO1xuLyoqXG4gKiBDb252ZXJ0cyBhIFJlYWRhYmxlU3RyZWFtIGludG8gYSBjYWxsYmFjayBwYXR0ZXJuLlxuICogQHBhcmFtIHN0cmVhbSBUaGUgaW5wdXQgUmVhZGFibGVTdHJlYW0uXG4gKiBAcGFyYW0gb25DaHVuayBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZWFjaCBuZXcgYnl0ZSBjaHVuayBpbiB0aGUgc3RyZWFtLlxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IEEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2hlbiB0aGUgc3RyZWFtIGNsb3Nlcy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJ5dGVzKHN0cmVhbSwgb25DaHVuaykge1xuICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAvLyBDSEFOR0VEOiBJbnRyb2R1Y2VkIGEgXCJmbHVzaFwiIG1lY2hhbmlzbSB0byBwcm9jZXNzIHBvdGVudGlhbCBwZW5kaW5nIG1lc3NhZ2VzIHdoZW4gdGhlIHN0cmVhbSBlbmRzLlxuICAgIC8vICAgICAgICAgIFRoaXMgY2hhbmdlIGlzIGVzc2VudGlhbCB0byBlbnN1cmUgdGhhdCB3ZSBjYXB0dXJlIGV2ZXJ5IGxhc3QgcGllY2Ugb2YgaW5mb3JtYXRpb24gZnJvbSBzdHJlYW1zLFxuICAgIC8vICAgICAgICAgIHN1Y2ggYXMgdGhvc2UgZnJvbSBBenVyZSBPcGVuQUksIHdoaWNoIG1heSBub3QgdGVybWluYXRlIHdpdGggYSBibGFuayBsaW5lLiBXaXRob3V0IHRoaXNcbiAgICAvLyAgICAgICAgICBtZWNoYW5pc20sIHdlIHJpc2sgaWdub3JpbmcgYSBwb3NzaWJseSBzaWduaWZpY2FudCBsYXN0IG1lc3NhZ2UuXG4gICAgLy8gICAgICAgICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9od2NoYXNlMTcvbGFuZ2NoYWluanMvaXNzdWVzLzEyOTkgZm9yIGRldGFpbHMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgb25DaHVuayhuZXcgVWludDhBcnJheSgpLCB0cnVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIG9uQ2h1bmsocmVzdWx0LnZhbHVlKTtcbiAgICB9XG59XG4vKipcbiAqIFBhcnNlcyBhcmJpdGFyeSBieXRlIGNodW5rcyBpbnRvIEV2ZW50U291cmNlIGxpbmUgYnVmZmVycy5cbiAqIEVhY2ggbGluZSBzaG91bGQgYmUgb2YgdGhlIGZvcm1hdCBcImZpZWxkOiB2YWx1ZVwiIGFuZCBlbmRzIHdpdGggXFxyLCBcXG4sIG9yIFxcclxcbi5cbiAqIEBwYXJhbSBvbkxpbmUgQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggbmV3IEV2ZW50U291cmNlIGxpbmUuXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCBmb3IgZWFjaCBpbmNvbWluZyBieXRlIGNodW5rLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGluZXMob25MaW5lKSB7XG4gICAgbGV0IGJ1ZmZlcjtcbiAgICBsZXQgcG9zaXRpb247IC8vIGN1cnJlbnQgcmVhZCBwb3NpdGlvblxuICAgIGxldCBmaWVsZExlbmd0aDsgLy8gbGVuZ3RoIG9mIHRoZSBgZmllbGRgIHBvcnRpb24gb2YgdGhlIGxpbmVcbiAgICBsZXQgZGlzY2FyZFRyYWlsaW5nTmV3bGluZSA9IGZhbHNlO1xuICAgIC8vIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgY2FuIHByb2Nlc3MgZWFjaCBpbmNvbWluZyBieXRlIGNodW5rOlxuICAgIHJldHVybiBmdW5jdGlvbiBvbkNodW5rKGFyciwgZmx1c2gpIHtcbiAgICAgICAgaWYgKGZsdXNoKSB7XG4gICAgICAgICAgICBvbkxpbmUoYXJyLCAwLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnVmZmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJ1ZmZlciA9IGFycjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIGZpZWxkTGVuZ3RoID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB3ZSdyZSBzdGlsbCBwYXJzaW5nIHRoZSBvbGQgbGluZS4gQXBwZW5kIHRoZSBuZXcgYnl0ZXMgaW50byBidWZmZXI6XG4gICAgICAgICAgICBidWZmZXIgPSBjb25jYXQoYnVmZmVyLCBhcnIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ1Zkxlbmd0aCA9IGJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIGxldCBsaW5lU3RhcnQgPSAwOyAvLyBpbmRleCB3aGVyZSB0aGUgY3VycmVudCBsaW5lIHN0YXJ0c1xuICAgICAgICB3aGlsZSAocG9zaXRpb24gPCBidWZMZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChkaXNjYXJkVHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlcltwb3NpdGlvbl0gPT09IDEwIC8qIENvbnRyb2xDaGFycy5OZXdMaW5lICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVTdGFydCA9ICsrcG9zaXRpb247IC8vIHNraXAgdG8gbmV4dCBjaGFyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpc2NhcmRUcmFpbGluZ05ld2xpbmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHN0YXJ0IGxvb2tpbmcgZm9yd2FyZCB0aWxsIHRoZSBlbmQgb2YgbGluZTpcbiAgICAgICAgICAgIGxldCBsaW5lRW5kID0gLTE7IC8vIGluZGV4IG9mIHRoZSBcXHIgb3IgXFxuIGNoYXJcbiAgICAgICAgICAgIGZvciAoOyBwb3NpdGlvbiA8IGJ1Zkxlbmd0aCAmJiBsaW5lRW5kID09PSAtMTsgKytwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoYnVmZmVyW3Bvc2l0aW9uXSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU4IC8qIENvbnRyb2xDaGFycy5Db2xvbiAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZExlbmd0aCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJzdCBjb2xvbiBpbiBsaW5lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRMZW5ndGggPSBwb3NpdGlvbiAtIGxpbmVTdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10cy1jb21tZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmU6NzAyOSBcXHIgY2FzZSBiZWxvdyBzaG91bGQgZmFsbHRocm91Z2ggdG8gXFxuOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEzIC8qIENvbnRyb2xDaGFycy5DYXJyaWFnZVJldHVybiAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2NhcmRUcmFpbGluZ05ld2xpbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZmFsbHRocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMCAvKiBDb250cm9sQ2hhcnMuTmV3TGluZSAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVFbmQgPSBwb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaW5lRW5kID09PSAtMSkge1xuICAgICAgICAgICAgICAgIC8vIFdlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGJ1dCB0aGUgbGluZSBoYXNuJ3QgZW5kZWQuXG4gICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIG5leHQgYXJyIGFuZCB0aGVuIGNvbnRpbnVlIHBhcnNpbmc6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB3ZSd2ZSByZWFjaGVkIHRoZSBsaW5lIGVuZCwgc2VuZCBpdCBvdXQ6XG4gICAgICAgICAgICBvbkxpbmUoYnVmZmVyLnN1YmFycmF5KGxpbmVTdGFydCwgbGluZUVuZCksIGZpZWxkTGVuZ3RoKTtcbiAgICAgICAgICAgIGxpbmVTdGFydCA9IHBvc2l0aW9uOyAvLyB3ZSdyZSBub3cgb24gdGhlIG5leHQgbGluZVxuICAgICAgICAgICAgZmllbGRMZW5ndGggPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGluZVN0YXJ0ID09PSBidWZMZW5ndGgpIHtcbiAgICAgICAgICAgIGJ1ZmZlciA9IHVuZGVmaW5lZDsgLy8gd2UndmUgZmluaXNoZWQgcmVhZGluZyBpdFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxpbmVTdGFydCAhPT0gMCkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHZpZXcgaW50byBidWZmZXIgYmVnaW5uaW5nIGF0IGxpbmVTdGFydCBzbyB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gbmVlZCB0byBjb3B5IG92ZXIgdGhlIHByZXZpb3VzIGxpbmVzIHdoZW4gd2UgZ2V0IHRoZSBuZXcgYXJyOlxuICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyLnN1YmFycmF5KGxpbmVTdGFydCk7XG4gICAgICAgICAgICBwb3NpdGlvbiAtPSBsaW5lU3RhcnQ7XG4gICAgICAgIH1cbiAgICB9O1xufVxuLyoqXG4gKiBQYXJzZXMgbGluZSBidWZmZXJzIGludG8gRXZlbnRTb3VyY2VNZXNzYWdlcy5cbiAqIEBwYXJhbSBvbklkIEEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbiBlYWNoIGBpZGAgZmllbGQuXG4gKiBAcGFyYW0gb25SZXRyeSBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZWFjaCBgcmV0cnlgIGZpZWxkLlxuICogQHBhcmFtIG9uTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZWFjaCBtZXNzYWdlLlxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgZm9yIGVhY2ggaW5jb21pbmcgbGluZSBidWZmZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNZXNzYWdlcyhvbk1lc3NhZ2UsIG9uSWQsIG9uUmV0cnkpIHtcbiAgICBsZXQgbWVzc2FnZSA9IG5ld01lc3NhZ2UoKTtcbiAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgLy8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBjYW4gcHJvY2VzcyBlYWNoIGluY29taW5nIGxpbmUgYnVmZmVyOlxuICAgIHJldHVybiBmdW5jdGlvbiBvbkxpbmUobGluZSwgZmllbGRMZW5ndGgsIGZsdXNoKSB7XG4gICAgICAgIGlmIChmbHVzaCkge1xuICAgICAgICAgICAgaWYgKCFpc0VtcHR5KG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgb25NZXNzYWdlPy4obWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IG5ld01lc3NhZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGluZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIGVtcHR5IGxpbmUgZGVub3RlcyBlbmQgb2YgbWVzc2FnZS4gVHJpZ2dlciB0aGUgY2FsbGJhY2sgYW5kIHN0YXJ0IGEgbmV3IG1lc3NhZ2U6XG4gICAgICAgICAgICBvbk1lc3NhZ2U/LihtZXNzYWdlKTtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBuZXdNZXNzYWdlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmllbGRMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBleGNsdWRlIGNvbW1lbnRzIGFuZCBsaW5lcyB3aXRoIG5vIHZhbHVlc1xuICAgICAgICAgICAgLy8gbGluZSBpcyBvZiBmb3JtYXQgXCI8ZmllbGQ+Ojx2YWx1ZT5cIiBvciBcIjxmaWVsZD46IDx2YWx1ZT5cIlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2VydmVyLXNlbnQtZXZlbnRzLmh0bWwjZXZlbnQtc3RyZWFtLWludGVycHJldGF0aW9uXG4gICAgICAgICAgICBjb25zdCBmaWVsZCA9IGRlY29kZXIuZGVjb2RlKGxpbmUuc3ViYXJyYXkoMCwgZmllbGRMZW5ndGgpKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlT2Zmc2V0ID0gZmllbGRMZW5ndGggKyAobGluZVtmaWVsZExlbmd0aCArIDFdID09PSAzMiAvKiBDb250cm9sQ2hhcnMuU3BhY2UgKi8gPyAyIDogMSk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGRlY29kZXIuZGVjb2RlKGxpbmUuc3ViYXJyYXkodmFsdWVPZmZzZXQpKTtcbiAgICAgICAgICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGF0YVwiOlxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIG1lc3NhZ2UgYWxyZWFkeSBoYXMgZGF0YSwgYXBwZW5kIHRoZSBuZXcgdmFsdWUgdG8gdGhlIG9sZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBqdXN0IHNldCB0byB0aGUgbmV3IHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSBtZXNzYWdlLmRhdGEgPyBtZXNzYWdlLmRhdGEgKyBcIlxcblwiICsgdmFsdWUgOiB2YWx1ZTsgLy8gb3RoZXJ3aXNlLFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZXZlbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ldmVudCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaWRcIjpcbiAgICAgICAgICAgICAgICAgICAgb25JZD8uKChtZXNzYWdlLmlkID0gdmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInJldHJ5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0cnkgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihyZXRyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBlciBzcGVjLCBpZ25vcmUgbm9uLWludGVnZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICBvblJldHJ5Py4oKG1lc3NhZ2UucmV0cnkgPSByZXRyeSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjb25jYXQoYSwgYikge1xuICAgIGNvbnN0IHJlcyA9IG5ldyBVaW50OEFycmF5KGEubGVuZ3RoICsgYi5sZW5ndGgpO1xuICAgIHJlcy5zZXQoYSk7XG4gICAgcmVzLnNldChiLCBhLmxlbmd0aCk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIG5ld01lc3NhZ2UoKSB7XG4gICAgLy8gZGF0YSwgZXZlbnQsIGFuZCBpZCBtdXN0IGJlIGluaXRpYWxpemVkIHRvIGVtcHR5IHN0cmluZ3M6XG4gICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2VydmVyLXNlbnQtZXZlbnRzLmh0bWwjZXZlbnQtc3RyZWFtLWludGVycHJldGF0aW9uXG4gICAgLy8gcmV0cnkgc2hvdWxkIGJlIGluaXRpYWxpemVkIHRvIHVuZGVmaW5lZCBzbyB3ZSByZXR1cm4gYSBjb25zaXN0ZW50IHNoYXBlXG4gICAgLy8gdG8gdGhlIGpzIGVuZ2luZSBhbGwgdGhlIHRpbWU6IGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9zaGFwZXMtaWNzI3Rha2Vhd2F5c1xuICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IFwiXCIsXG4gICAgICAgIGV2ZW50OiBcIlwiLFxuICAgICAgICBpZDogXCJcIixcbiAgICAgICAgcmV0cnk6IHVuZGVmaW5lZCxcbiAgICB9O1xufVxuZnVuY3Rpb24gaXNFbXB0eShtZXNzYWdlKSB7XG4gICAgcmV0dXJuIChtZXNzYWdlLmRhdGEgPT09IFwiXCIgJiZcbiAgICAgICAgbWVzc2FnZS5ldmVudCA9PT0gXCJcIiAmJlxuICAgICAgICBtZXNzYWdlLmlkID09PSBcIlwiICYmXG4gICAgICAgIG1lc3NhZ2UucmV0cnkgPT09IHVuZGVmaW5lZCk7XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLXRlbXBsYXRlICovXG4vKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItYXJyb3ctY2FsbGJhY2sgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXZhciAqL1xuLyogZXNsaW50LWRpc2FibGUgdmFycy1vbi10b3AgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMgKi9cbi8qKlxuICogVGhpcyBpcyBjb3BpZWQgZnJvbSBAdmVzcGFpYWNoL2F4aW9zLWZldGNoLWFkYXB0ZXIsIHdoaWNoIGV4cG9zZXMgYW4gRVNNXG4gKiBtb2R1bGUgd2l0aG91dCBzZXR0aW5nIHRoZSBcInR5cGVcIiBmaWVsZCBpbiBwYWNrYWdlLmpzb24uXG4gKi9cbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcbmltcG9ydCB7IEV2ZW50U3RyZWFtQ29udGVudFR5cGUsIGdldExpbmVzLCBnZXRCeXRlcywgZ2V0TWVzc2FnZXMsIH0gZnJvbSBcIi4vZXZlbnQtc291cmNlLXBhcnNlLmpzXCI7XG5mdW5jdGlvbiB0cnlKc29uU3RyaW5naWZ5KGRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbn1cbi8qKlxuICogSW4gb3JkZXIgdG8gYXZvaWQgaW1wb3J0IGlzc3VlcyB3aXRoIGF4aW9zIDEueCwgY29weWluZyBoZXJlIHRoZSBpbnRlcm5hbFxuICogdXRpbGl0eSBmdW5jdGlvbnMgdGhhdCB3ZSB1c2VkIHRvIGltcG9ydCBkaXJlY3RseSBmcm9tIGF4aW9zLlxuICovXG4vLyBDb3BpZWQgZnJvbSBheGlvcy9saWIvY29yZS9zZXR0bGUuanNcbmZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gICAgY29uc3QgeyB2YWxpZGF0ZVN0YXR1cyB9ID0gcmVzcG9uc2UuY29uZmlnO1xuICAgIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8ICF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKGBSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICR7cmVzcG9uc2Uuc3RhdHVzfSBhbmQgYm9keSAke3R5cGVvZiByZXNwb25zZS5kYXRhID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IHJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgIDogdHJ5SnNvblN0cmluZ2lmeShyZXNwb25zZS5kYXRhKX1gLCByZXNwb25zZS5jb25maWcsIG51bGwsIHJlc3BvbnNlLnJlcXVlc3QsIHJlc3BvbnNlKSk7XG4gICAgfVxufVxuLy8gQ29waWVkIGZyb20gYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qc1xuZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHtcbiAgICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG4gICAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gICAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG4gICAgcmV0dXJuIC9eKFthLXpdW2EtelxcZCtcXC0uXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59XG4vLyBDb3BpZWQgZnJvbSBheGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qc1xuZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcbiAgICByZXR1cm4gcmVsYXRpdmVVUkxcbiAgICAgICAgPyBiYXNlVVJMLnJlcGxhY2UoL1xcLyskLywgXCJcIikgKyBcIi9cIiArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgXCJcIilcbiAgICAgICAgOiBiYXNlVVJMO1xufVxuLy8gQ29waWVkIGZyb20gYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanNcbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbClcbiAgICAgICAgLnJlcGxhY2UoLyUzQS9naSwgXCI6XCIpXG4gICAgICAgIC5yZXBsYWNlKC8lMjQvZywgXCIkXCIpXG4gICAgICAgIC5yZXBsYWNlKC8lMkMvZ2ksIFwiLFwiKVxuICAgICAgICAucmVwbGFjZSgvJTIwL2csIFwiK1wiKVxuICAgICAgICAucmVwbGFjZSgvJTVCL2dpLCBcIltcIilcbiAgICAgICAgLnJlcGxhY2UoLyU1RC9naSwgXCJdXCIpO1xufVxuZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgICB2YXIgc2VyaWFsaXplZFBhcmFtcztcbiAgICBpZiAocGFyYW1zU2VyaWFsaXplcikge1xuICAgICAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7XG4gICAgICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBwYXJ0cyA9IFtdO1xuICAgICAgICBmb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7XG4gICAgICAgICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gYCR7a2V5fVtdYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbCA9IFt2YWxdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuICAgICAgICAgICAgICAgIGlmIChpc0RhdGUodikpIHtcbiAgICAgICAgICAgICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNPYmplY3QodikpIHtcbiAgICAgICAgICAgICAgICAgICAgdiA9IEpTT04uc3RyaW5naWZ5KHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKGAke2VuY29kZShrZXkpfT0ke2VuY29kZSh2KX1gKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oXCImXCIpO1xuICAgIH1cbiAgICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgICAgICB2YXIgaGFzaG1hcmtJbmRleCA9IHVybC5pbmRleE9mKFwiI1wiKTtcbiAgICAgICAgaWYgKGhhc2htYXJrSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgaGFzaG1hcmtJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgdXJsICs9ICh1cmwuaW5kZXhPZihcIj9cIikgPT09IC0xID8gXCI/XCIgOiBcIiZcIikgKyBzZXJpYWxpemVkUGFyYW1zO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xufVxuLy8gQ29waWVkIGZyb20gYXhpb3MvbGliL2NvcmUvYnVpbGRGdWxsUGF0aC5qc1xuZnVuY3Rpb24gYnVpbGRGdWxsUGF0aChiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpIHtcbiAgICBpZiAoYmFzZVVSTCAmJiAhaXNBYnNvbHV0ZVVSTChyZXF1ZXN0ZWRVUkwpKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpO1xuICAgIH1cbiAgICByZXR1cm4gcmVxdWVzdGVkVVJMO1xufVxuLy8gQ29waWVkIGZyb20gYXhpb3MvbGliL3V0aWxzLmpzXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gXCJ1bmRlZmluZWRcIjtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICAgIHJldHVybiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIjtcbn1cbmZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSBcIltvYmplY3QgRGF0ZV1cIjtcbn1cbmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09IFwiW29iamVjdCBVUkxTZWFyY2hQYXJhbXNdXCI7XG59XG5mdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbCk7XG59XG5mdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4pIHtcbiAgICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBGb3JjZSBhbiBhcnJheSBpZiBub3QgYWxyZWFkeSBzb21ldGhpbmcgaXRlcmFibGVcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICBvYmogPSBbb2JqXTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgZm4uY2FsbChudWxsLCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gXCJbb2JqZWN0IEZvcm1EYXRhXVwiO1xufVxuLy8gVE9ETyB0aGlzIG5lZWRzIHRvIGJlIGZpeGVkIHRvIHJ1biBpbiBuZXdlciBicm93c2VyLWxpa2UgZW52aXJvbm1lbnRzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vdmVzcGFpYWNoL2F4aW9zLWZldGNoLWFkYXB0ZXIvaXNzdWVzLzIwI2lzc3VlLTEzOTYzNjUzMjJcbmZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgICAobmF2aWdhdG9yLnByb2R1Y3QgPT09IFwiUmVhY3ROYXRpdmVcIiB8fFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgICAgICAgICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gXCJOYXRpdmVTY3JpcHRcIiB8fFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgICAgICAgICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gXCJOU1wiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbn1cbi8qKlxuICogLSBDcmVhdGUgYSByZXF1ZXN0IG9iamVjdFxuICogLSBHZXQgcmVzcG9uc2UgYm9keVxuICogLSBDaGVjayBpZiB0aW1lb3V0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQWRhcHRlcihjb25maWcpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gY3JlYXRlUmVxdWVzdChjb25maWcpO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRSZXNwb25zZShyZXF1ZXN0LCBjb25maWcpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvbnNcbiAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjb25maWcuc2V0dGxlKSA9PT0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiXG4gICAgICAgICAgICAgICAgPyBjb25maWcuc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZGF0YSlcbiAgICAgICAgICAgICAgICA6IHNldHRsZShyZXNvbHZlLCByZWplY3QsIGRhdGEpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEZldGNoIEFQSSBzdGFnZSB0d28gaXMgdG8gZ2V0IHJlc3BvbnNlIGJvZHkuIFRoaXMgZnVudGlvbiB0cmllcyB0byByZXRyaWV2ZVxuICogcmVzcG9uc2UgYm9keSBiYXNlZCBvbiByZXNwb25zZSdzIHR5cGVcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0UmVzcG9uc2UocmVxdWVzdCwgY29uZmlnKSB7XG4gICAgbGV0IHN0YWdlT25lO1xuICAgIHRyeSB7XG4gICAgICAgIHN0YWdlT25lID0gYXdhaXQgZmV0Y2gocmVxdWVzdCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlICYmIGUubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihcIlJlcXVlc3QgYWJvcnRlZFwiLCBjb25maWcsIFwiRUNPTk5BQk9SVEVEXCIsIHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlICYmIGUubmFtZSA9PT0gXCJUaW1lb3V0RXJyb3JcIikge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKFwiUmVxdWVzdCB0aW1lb3V0XCIsIGNvbmZpZywgXCJFQ09OTkFCT1JURURcIiwgcmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKFwiTmV0d29yayBFcnJvclwiLCBjb25maWcsIFwiRVJSX05FVFdPUktcIiwgcmVxdWVzdCk7XG4gICAgfVxuICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICBzdGFnZU9uZS5oZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgaGVhZGVyc1trZXldID0gdmFsdWU7XG4gICAgfSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgIG9rOiBzdGFnZU9uZS5vayxcbiAgICAgICAgc3RhdHVzOiBzdGFnZU9uZS5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHN0YWdlT25lLnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdCxcbiAgICB9O1xuICAgIGlmIChzdGFnZU9uZS5zdGF0dXMgPj0gMjAwICYmIHN0YWdlT25lLnN0YXR1cyAhPT0gMjA0KSB7XG4gICAgICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlID09PSBcInN0cmVhbVwiKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IHN0YWdlT25lLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpO1xuICAgICAgICAgICAgaWYgKCFjb250ZW50VHlwZT8uc3RhcnRzV2l0aChFdmVudFN0cmVhbUNvbnRlbnRUeXBlKSkge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjb250ZW50LXR5cGUgaXMgbm90IHN0cmVhbSwgcmVzcG9uc2UgaXMgbW9zdCBsaWtlbHkgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICBpZiAoc3RhZ2VPbmUuc3RhdHVzID49IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZXJyb3IgaXMgYSBKU09OLCBwYXJzZSBpdC4gT3RoZXJ3aXNlLCByZXR1cm4gYXMgdGV4dFxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudFR5cGU/LnN0YXJ0c1dpdGgoXCJhcHBsaWNhdGlvbi9qc29uXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID0gYXdhaXQgc3RhZ2VPbmUuanNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IGF3YWl0IHN0YWdlT25lLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbm9uLXN0cmVhbSByZXNwb25zZSBpcyBhbHNvIG5vdCBhbiBlcnJvciwgdGhyb3dcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGNvbnRlbnQtdHlwZSB0byBiZSAke0V2ZW50U3RyZWFtQ29udGVudFR5cGV9LCBBY3R1YWw6ICR7Y29udGVudFR5cGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBnZXRCeXRlcyhzdGFnZU9uZS5ib2R5LCBnZXRMaW5lcyhnZXRNZXNzYWdlcyhjb25maWcub25tZXNzYWdlKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3dpdGNoIChjb25maWcucmVzcG9uc2VUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFycmF5YnVmZmVyXCI6XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSBhd2FpdCBzdGFnZU9uZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiYmxvYlwiOlxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID0gYXdhaXQgc3RhZ2VPbmUuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwianNvblwiOlxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhID0gYXdhaXQgc3RhZ2VPbmUuanNvbigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZm9ybURhdGFcIjpcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YSA9IGF3YWl0IHN0YWdlT25lLmZvcm1EYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEgPSBhd2FpdCBzdGFnZU9uZS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGNyZWF0ZSBhIFJlcXVlc3Qgb2JqZWN0IGJhc2VkIG9uIGNvbmZpZ3VyYXRpb24ncyBheGlvc1xuICovXG5mdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KGNvbmZpZykge1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyhjb25maWcuaGVhZGVycyk7XG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgICBjb25zdCB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gY29uZmlnLmF1dGgucGFzc3dvcmRcbiAgICAgICAgICAgID8gZGVjb2RlVVJJKGVuY29kZVVSSUNvbXBvbmVudChjb25maWcuYXV0aC5wYXNzd29yZCkpXG4gICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIGhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBgQmFzaWMgJHtidG9hKGAke3VzZXJuYW1lfToke3Bhc3N3b3JkfWApfWApO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgbWV0aG9kLFxuICAgIH07XG4gICAgaWYgKG1ldGhvZCAhPT0gXCJHRVRcIiAmJiBtZXRob2QgIT09IFwiSEVBRFwiKSB7XG4gICAgICAgIG9wdGlvbnMuYm9keSA9IGNvbmZpZy5kYXRhO1xuICAgICAgICAvLyBJbiB0aGVzZSBjYXNlcyB0aGUgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgc2V0IHRoZSBjb3JyZWN0IENvbnRlbnQtVHlwZSxcbiAgICAgICAgLy8gYnV0IG9ubHkgaWYgdGhhdCBoZWFkZXIgaGFzbid0IGJlZW4gc2V0IHlldC4gU28gdGhhdCdzIHdoeSB3ZSdyZSBkZWxldGluZyBpdC5cbiAgICAgICAgaWYgKGlzRm9ybURhdGEob3B0aW9ucy5ib2R5KSAmJiBpc1N0YW5kYXJkQnJvd3NlckVudigpKSB7XG4gICAgICAgICAgICBoZWFkZXJzLmRlbGV0ZShcIkNvbnRlbnQtVHlwZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTb21lIGBmZXRjaGAgaW1wbGVtZW50YXRpb25zIHdpbGwgb3ZlcnJpZGUgdGhlIENvbnRlbnQtVHlwZSB0byB0ZXh0L3BsYWluXG4gICAgLy8gd2hlbiBib2R5IGlzIGEgc3RyaW5nLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vaHdjaGFzZTE3L2xhbmdjaGFpbmpzL2lzc3Vlcy8xMDEwXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmJvZHkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgb3B0aW9ucy5ib2R5ID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKG9wdGlvbnMuYm9keSk7XG4gICAgfVxuICAgIGlmIChjb25maWcubW9kZSkge1xuICAgICAgICBvcHRpb25zLm1vZGUgPSBjb25maWcubW9kZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5jYWNoZSkge1xuICAgICAgICBvcHRpb25zLmNhY2hlID0gY29uZmlnLmNhY2hlO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmludGVncml0eSkge1xuICAgICAgICBvcHRpb25zLmludGVncml0eSA9IGNvbmZpZy5pbnRlZ3JpdHk7XG4gICAgfVxuICAgIGlmIChjb25maWcucmVkaXJlY3QpIHtcbiAgICAgICAgb3B0aW9ucy5yZWRpcmVjdCA9IGNvbmZpZy5yZWRpcmVjdDtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5yZWZlcnJlcikge1xuICAgICAgICBvcHRpb25zLnJlZmVycmVyID0gY29uZmlnLnJlZmVycmVyO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnRpbWVvdXQgJiYgY29uZmlnLnRpbWVvdXQgPiAwKSB7XG4gICAgICAgIG9wdGlvbnMuc2lnbmFsID0gQWJvcnRTaWduYWwudGltZW91dChjb25maWcudGltZW91dCk7XG4gICAgfVxuICAgIGlmIChjb25maWcuc2lnbmFsKSB7XG4gICAgICAgIC8vIHRoaXMgb3ZlcnJpZGVzIHRoZSB0aW1lb3V0IHNpZ25hbCBpZiBib3RoIGFyZSBzZXRcbiAgICAgICAgb3B0aW9ucy5zaWduYWwgPSBjb25maWcuc2lnbmFsO1xuICAgIH1cbiAgICAvLyBUaGlzIGNvbmZpZyBpcyBzaW1pbGFyIHRvIFhIUuKAmXMgd2l0aENyZWRlbnRpYWxzIGZsYWcsIGJ1dCB3aXRoIHRocmVlIGF2YWlsYWJsZSB2YWx1ZXMgaW5zdGVhZCBvZiB0d28uXG4gICAgLy8gU28gaWYgd2l0aENyZWRlbnRpYWxzIGlzIG5vdCBzZXQsIGRlZmF1bHQgdmFsdWUgJ3NhbWUtb3JpZ2luJyB3aWxsIGJlIHVzZWRcbiAgICBpZiAoIWlzVW5kZWZpbmVkKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpKSB7XG4gICAgICAgIG9wdGlvbnMuY3JlZGVudGlhbHMgPSBjb25maWcud2l0aENyZWRlbnRpYWxzID8gXCJpbmNsdWRlXCIgOiBcIm9taXRcIjtcbiAgICB9XG4gICAgLy8gZm9yIHN0cmVhbWluZ1xuICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlID09PSBcInN0cmVhbVwiKSB7XG4gICAgICAgIG9wdGlvbnMuaGVhZGVycy5zZXQoXCJBY2NlcHRcIiwgRXZlbnRTdHJlYW1Db250ZW50VHlwZSk7XG4gICAgfVxuICAgIGNvbnN0IGZ1bGxQYXRoID0gYnVpbGRGdWxsUGF0aChjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7XG4gICAgY29uc3QgdXJsID0gYnVpbGRVUkwoZnVsbFBhdGgsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKTtcbiAgICAvLyBFeHBlY3RlZCBicm93c2VyIHRvIHRocm93IGVycm9yIGlmIHRoZXJlIGlzIGFueSB3cm9uZyBjb25maWd1cmF0aW9uIHZhbHVlXG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHVybCwgb3B0aW9ucyk7XG59XG4vKipcbiAqIE5vdGU6XG4gKlxuICogICBGcm9tIHZlcnNpb24gPj0gMC4yNy4wLCBjcmVhdGVFcnJvciBmdW5jdGlvbiBpcyByZXBsYWNlZCBieSBBeGlvc0Vycm9yIGNsYXNzLlxuICogICBTbyBJIGNvcHkgdGhlIG9sZCBjcmVhdGVFcnJvciBmdW5jdGlvbiBoZXJlIGZvciBiYWNrd2FyZCBjb21wYXRpYmxlLlxuICpcbiAqXG4gKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5mdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgaWYgKGF4aW9zLkF4aW9zRXJyb3IgJiYgdHlwZW9mIGF4aW9zLkF4aW9zRXJyb3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gbmV3IGF4aW9zLkF4aW9zRXJyb3IobWVzc2FnZSwgYXhpb3MuQXhpb3NFcnJvcltjb2RlXSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgfVxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIHJldHVybiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpO1xufVxuLyoqXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIFRoaXMgZnVuY3Rpb24gaXMgZm9yIGJhY2t3YXJkIGNvbXBhdGlibGUuXG4gKlxuICpcbiAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgZXJyb3IuXG4gKi9cbmZ1bmN0aW9uIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICAgIGVycm9yLmNvbmZpZyA9IGNvbmZpZztcbiAgICBpZiAoY29kZSkge1xuICAgICAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgICB9XG4gICAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICBlcnJvci5pc0F4aW9zRXJyb3IgPSB0cnVlO1xuICAgIGVycm9yLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIFN0YW5kYXJkXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAvLyBNaWNyb3NvZnRcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgbnVtYmVyOiB0aGlzLm51bWJlcixcbiAgICAgICAgICAgIC8vIE1vemlsbGFcbiAgICAgICAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLFxuICAgICAgICAgICAgbGluZU51bWJlcjogdGhpcy5saW5lTnVtYmVyLFxuICAgICAgICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlcixcbiAgICAgICAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxuICAgICAgICAgICAgLy8gQXhpb3NcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgICAgICBjb2RlOiB0aGlzLmNvZGUsXG4gICAgICAgICAgICBzdGF0dXM6IHRoaXMucmVzcG9uc2UgJiYgdGhpcy5yZXNwb25zZS5zdGF0dXMgPyB0aGlzLnJlc3BvbnNlLnN0YXR1cyA6IG51bGwsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gZXJyb3I7XG59XG4iLCJleHBvcnQgY29uc3QgY2h1bmtBcnJheSA9IChhcnIsIGNodW5rU2l6ZSkgPT4gYXJyLnJlZHVjZSgoY2h1bmtzLCBlbGVtLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGNodW5rSW5kZXggPSBNYXRoLmZsb29yKGluZGV4IC8gY2h1bmtTaXplKTtcbiAgICBjb25zdCBjaHVuayA9IGNodW5rc1tjaHVua0luZGV4XSB8fCBbXTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBjaHVua3NbY2h1bmtJbmRleF0gPSBjaHVuay5jb25jYXQoW2VsZW1dKTtcbiAgICByZXR1cm4gY2h1bmtzO1xufSwgW10pO1xuIiwiIWZ1bmN0aW9uKGUpe3ZhciB0O1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3Q9d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/dD1nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJih0PXNlbGYpLHQub2JqZWN0SGFzaD1lKCkpfShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiByKG8saSx1KXtmdW5jdGlvbiBzKG4sZSl7aWYoIWlbbl0pe2lmKCFvW25dKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFlJiZ0KXJldHVybiB0KG4sITApO2lmKGEpcmV0dXJuIGEobiwhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIituK1wiJ1wiKX1lPWlbbl09e2V4cG9ydHM6e319O29bbl1bMF0uY2FsbChlLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIHQ9b1tuXVsxXVtlXTtyZXR1cm4gcyh0fHxlKX0sZSxlLmV4cG9ydHMscixvLGksdSl9cmV0dXJuIGlbbl0uZXhwb3J0c31mb3IodmFyIGE9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxlPTA7ZTx1Lmxlbmd0aDtlKyspcyh1W2VdKTtyZXR1cm4gc30oezE6W2Z1bmN0aW9uKHcsYixtKXshZnVuY3Rpb24oZSxuLHMsYyxkLGgscCxnLHkpe1widXNlIHN0cmljdFwiO3ZhciByPXcoXCJjcnlwdG9cIik7ZnVuY3Rpb24gdChlLHQpe3Q9dShlLHQpO3ZhciBuO3JldHVybiB2b2lkIDA9PT0obj1cInBhc3N0aHJvdWdoXCIhPT10LmFsZ29yaXRobT9yLmNyZWF0ZUhhc2godC5hbGdvcml0aG0pOm5ldyBsKS53cml0ZSYmKG4ud3JpdGU9bi51cGRhdGUsbi5lbmQ9bi51cGRhdGUpLGYodCxuKS5kaXNwYXRjaChlKSxuLnVwZGF0ZXx8bi5lbmQoXCJcIiksbi5kaWdlc3Q/bi5kaWdlc3QoXCJidWZmZXJcIj09PXQuZW5jb2Rpbmc/dm9pZCAwOnQuZW5jb2RpbmcpOihlPW4ucmVhZCgpLFwiYnVmZmVyXCIhPT10LmVuY29kaW5nP2UudG9TdHJpbmcodC5lbmNvZGluZyk6ZSl9KG09Yi5leHBvcnRzPXQpLnNoYTE9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9LG0ua2V5cz1mdW5jdGlvbihlKXtyZXR1cm4gdChlLHtleGNsdWRlVmFsdWVzOiEwLGFsZ29yaXRobTpcInNoYTFcIixlbmNvZGluZzpcImhleFwifSl9LG0uTUQ1PWZ1bmN0aW9uKGUpe3JldHVybiB0KGUse2FsZ29yaXRobTpcIm1kNVwiLGVuY29kaW5nOlwiaGV4XCJ9KX0sbS5rZXlzTUQ1PWZ1bmN0aW9uKGUpe3JldHVybiB0KGUse2FsZ29yaXRobTpcIm1kNVwiLGVuY29kaW5nOlwiaGV4XCIsZXhjbHVkZVZhbHVlczohMH0pfTt2YXIgbz1yLmdldEhhc2hlcz9yLmdldEhhc2hlcygpLnNsaWNlKCk6W1wic2hhMVwiLFwibWQ1XCJdLGk9KG8ucHVzaChcInBhc3N0aHJvdWdoXCIpLFtcImJ1ZmZlclwiLFwiaGV4XCIsXCJiaW5hcnlcIixcImJhc2U2NFwiXSk7ZnVuY3Rpb24gdShlLHQpe3ZhciBuPXt9O2lmKG4uYWxnb3JpdGhtPSh0PXR8fHt9KS5hbGdvcml0aG18fFwic2hhMVwiLG4uZW5jb2Rpbmc9dC5lbmNvZGluZ3x8XCJoZXhcIixuLmV4Y2x1ZGVWYWx1ZXM9ISF0LmV4Y2x1ZGVWYWx1ZXMsbi5hbGdvcml0aG09bi5hbGdvcml0aG0udG9Mb3dlckNhc2UoKSxuLmVuY29kaW5nPW4uZW5jb2RpbmcudG9Mb3dlckNhc2UoKSxuLmlnbm9yZVVua25vd249ITA9PT10Lmlnbm9yZVVua25vd24sbi5yZXNwZWN0VHlwZT0hMSE9PXQucmVzcGVjdFR5cGUsbi5yZXNwZWN0RnVuY3Rpb25OYW1lcz0hMSE9PXQucmVzcGVjdEZ1bmN0aW9uTmFtZXMsbi5yZXNwZWN0RnVuY3Rpb25Qcm9wZXJ0aWVzPSExIT09dC5yZXNwZWN0RnVuY3Rpb25Qcm9wZXJ0aWVzLG4udW5vcmRlcmVkQXJyYXlzPSEwPT09dC51bm9yZGVyZWRBcnJheXMsbi51bm9yZGVyZWRTZXRzPSExIT09dC51bm9yZGVyZWRTZXRzLG4udW5vcmRlcmVkT2JqZWN0cz0hMSE9PXQudW5vcmRlcmVkT2JqZWN0cyxuLnJlcGxhY2VyPXQucmVwbGFjZXJ8fHZvaWQgMCxuLmV4Y2x1ZGVLZXlzPXQuZXhjbHVkZUtleXN8fHZvaWQgMCx2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcihcIk9iamVjdCBhcmd1bWVudCByZXF1aXJlZC5cIik7Zm9yKHZhciByPTA7cjxvLmxlbmd0aDsrK3Ipb1tyXS50b0xvd2VyQ2FzZSgpPT09bi5hbGdvcml0aG0udG9Mb3dlckNhc2UoKSYmKG4uYWxnb3JpdGhtPW9bcl0pO2lmKC0xPT09by5pbmRleE9mKG4uYWxnb3JpdGhtKSl0aHJvdyBuZXcgRXJyb3IoJ0FsZ29yaXRobSBcIicrbi5hbGdvcml0aG0rJ1wiICBub3Qgc3VwcG9ydGVkLiBzdXBwb3J0ZWQgdmFsdWVzOiAnK28uam9pbihcIiwgXCIpKTtpZigtMT09PWkuaW5kZXhPZihuLmVuY29kaW5nKSYmXCJwYXNzdGhyb3VnaFwiIT09bi5hbGdvcml0aG0pdGhyb3cgbmV3IEVycm9yKCdFbmNvZGluZyBcIicrbi5lbmNvZGluZysnXCIgIG5vdCBzdXBwb3J0ZWQuIHN1cHBvcnRlZCB2YWx1ZXM6ICcraS5qb2luKFwiLCBcIikpO3JldHVybiBufWZ1bmN0aW9uIGEoZSl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZSlyZXR1cm4gbnVsbCE9L15mdW5jdGlvblxccytcXHcqXFxzKlxcKFxccypcXClcXHMqe1xccytcXFtuYXRpdmUgY29kZVxcXVxccyt9JC9pLmV4ZWMoRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpfWZ1bmN0aW9uIGYobyx0LGkpe2k9aXx8W107ZnVuY3Rpb24gdShlKXtyZXR1cm4gdC51cGRhdGU/dC51cGRhdGUoZSxcInV0ZjhcIik6dC53cml0ZShlLFwidXRmOFwiKX1yZXR1cm57ZGlzcGF0Y2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNbXCJfXCIrKG51bGw9PT0oZT1vLnJlcGxhY2VyP28ucmVwbGFjZXIoZSk6ZSk/XCJudWxsXCI6dHlwZW9mIGUpXShlKX0sX29iamVjdDpmdW5jdGlvbih0KXt2YXIgbixlPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSxyPS9cXFtvYmplY3QgKC4qKVxcXS9pLmV4ZWMoZSk7cj0ocj1yP3JbMV06XCJ1bmtub3duOltcIitlK1wiXVwiKS50b0xvd2VyQ2FzZSgpO2lmKDA8PShlPWkuaW5kZXhPZih0KSkpcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJbQ0lSQ1VMQVI6XCIrZStcIl1cIik7aWYoaS5wdXNoKHQpLHZvaWQgMCE9PXMmJnMuaXNCdWZmZXImJnMuaXNCdWZmZXIodCkpcmV0dXJuIHUoXCJidWZmZXI6XCIpLHUodCk7aWYoXCJvYmplY3RcIj09PXJ8fFwiZnVuY3Rpb25cIj09PXJ8fFwiYXN5bmNmdW5jdGlvblwiPT09cilyZXR1cm4gZT1PYmplY3Qua2V5cyh0KSxvLnVub3JkZXJlZE9iamVjdHMmJihlPWUuc29ydCgpKSwhMT09PW8ucmVzcGVjdFR5cGV8fGEodCl8fGUuc3BsaWNlKDAsMCxcInByb3RvdHlwZVwiLFwiX19wcm90b19fXCIsXCJjb25zdHJ1Y3RvclwiKSxvLmV4Y2x1ZGVLZXlzJiYoZT1lLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hby5leGNsdWRlS2V5cyhlKX0pKSx1KFwib2JqZWN0OlwiK2UubGVuZ3RoK1wiOlwiKSxuPXRoaXMsZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe24uZGlzcGF0Y2goZSksdShcIjpcIiksby5leGNsdWRlVmFsdWVzfHxuLmRpc3BhdGNoKHRbZV0pLHUoXCIsXCIpfSk7aWYoIXRoaXNbXCJfXCIrcl0pe2lmKG8uaWdub3JlVW5rbm93bilyZXR1cm4gdShcIltcIityK1wiXVwiKTt0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gb2JqZWN0IHR5cGUgXCInK3IrJ1wiJyl9dGhpc1tcIl9cIityXSh0KX0sX2FycmF5OmZ1bmN0aW9uKGUsdCl7dD12b2lkIDAhPT10P3Q6ITEhPT1vLnVub3JkZXJlZEFycmF5czt2YXIgbj10aGlzO2lmKHUoXCJhcnJheTpcIitlLmxlbmd0aCtcIjpcIiksIXR8fGUubGVuZ3RoPD0xKXJldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIG4uZGlzcGF0Y2goZSl9KTt2YXIgcj1bXSx0PWUubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBsLG49aS5zbGljZSgpO3JldHVybiBmKG8sdCxuKS5kaXNwYXRjaChlKSxyPXIuY29uY2F0KG4uc2xpY2UoaS5sZW5ndGgpKSx0LnJlYWQoKS50b1N0cmluZygpfSk7cmV0dXJuIGk9aS5jb25jYXQociksdC5zb3J0KCksdGhpcy5fYXJyYXkodCwhMSl9LF9kYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB1KFwiZGF0ZTpcIitlLnRvSlNPTigpKX0sX3N5bWJvbDpmdW5jdGlvbihlKXtyZXR1cm4gdShcInN5bWJvbDpcIitlLnRvU3RyaW5nKCkpfSxfZXJyb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJlcnJvcjpcIitlLnRvU3RyaW5nKCkpfSxfYm9vbGVhbjpmdW5jdGlvbihlKXtyZXR1cm4gdShcImJvb2w6XCIrZS50b1N0cmluZygpKX0sX3N0cmluZzpmdW5jdGlvbihlKXt1KFwic3RyaW5nOlwiK2UubGVuZ3RoK1wiOlwiKSx1KGUudG9TdHJpbmcoKSl9LF9mdW5jdGlvbjpmdW5jdGlvbihlKXt1KFwiZm46XCIpLGEoZSk/dGhpcy5kaXNwYXRjaChcIltuYXRpdmVdXCIpOnRoaXMuZGlzcGF0Y2goZS50b1N0cmluZygpKSwhMSE9PW8ucmVzcGVjdEZ1bmN0aW9uTmFtZXMmJnRoaXMuZGlzcGF0Y2goXCJmdW5jdGlvbi1uYW1lOlwiK1N0cmluZyhlLm5hbWUpKSxvLnJlc3BlY3RGdW5jdGlvblByb3BlcnRpZXMmJnRoaXMuX29iamVjdChlKX0sX251bWJlcjpmdW5jdGlvbihlKXtyZXR1cm4gdShcIm51bWJlcjpcIitlLnRvU3RyaW5nKCkpfSxfeG1sOmZ1bmN0aW9uKGUpe3JldHVybiB1KFwieG1sOlwiK2UudG9TdHJpbmcoKSl9LF9udWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJOdWxsXCIpfSxfdW5kZWZpbmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJVbmRlZmluZWRcIil9LF9yZWdleHA6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJyZWdleDpcIitlLnRvU3RyaW5nKCkpfSxfdWludDhhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gdShcInVpbnQ4YXJyYXk6XCIpLHRoaXMuZGlzcGF0Y2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpfSxfdWludDhjbGFtcGVkYXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJ1aW50OGNsYW1wZWRhcnJheTpcIiksdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKSl9LF9pbnQ4YXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJpbnQ4YXJyYXk6XCIpLHRoaXMuZGlzcGF0Y2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpfSxfdWludDE2YXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJ1aW50MTZhcnJheTpcIiksdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKSl9LF9pbnQxNmFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiB1KFwiaW50MTZhcnJheTpcIiksdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKSl9LF91aW50MzJhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gdShcInVpbnQzMmFycmF5OlwiKSx0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpKX0sX2ludDMyYXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJpbnQzMmFycmF5OlwiKSx0aGlzLmRpc3BhdGNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpKX0sX2Zsb2F0MzJhcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gdShcImZsb2F0MzJhcnJheTpcIiksdGhpcy5kaXNwYXRjaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKSl9LF9mbG9hdDY0YXJyYXk6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJmbG9hdDY0YXJyYXk6XCIpLHRoaXMuZGlzcGF0Y2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkpfSxfYXJyYXlidWZmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJhcnJheWJ1ZmZlcjpcIiksdGhpcy5kaXNwYXRjaChuZXcgVWludDhBcnJheShlKSl9LF91cmw6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoXCJ1cmw6XCIrZS50b1N0cmluZygpKX0sX21hcDpmdW5jdGlvbihlKXt1KFwibWFwOlwiKTtlPUFycmF5LmZyb20oZSk7cmV0dXJuIHRoaXMuX2FycmF5KGUsITEhPT1vLnVub3JkZXJlZFNldHMpfSxfc2V0OmZ1bmN0aW9uKGUpe3UoXCJzZXQ6XCIpO2U9QXJyYXkuZnJvbShlKTtyZXR1cm4gdGhpcy5fYXJyYXkoZSwhMSE9PW8udW5vcmRlcmVkU2V0cyl9LF9maWxlOmZ1bmN0aW9uKGUpe3JldHVybiB1KFwiZmlsZTpcIiksdGhpcy5kaXNwYXRjaChbZS5uYW1lLGUuc2l6ZSxlLnR5cGUsZS5sYXN0TW9kZmllZF0pfSxfYmxvYjpmdW5jdGlvbigpe2lmKG8uaWdub3JlVW5rbm93bilyZXR1cm4gdShcIltibG9iXVwiKTt0aHJvdyBFcnJvcignSGFzaGluZyBCbG9iIG9iamVjdHMgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWRcXG4oc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9wdWxlb3Mvb2JqZWN0LWhhc2gvaXNzdWVzLzI2KVxcblVzZSBcIm9wdGlvbnMucmVwbGFjZXJcIiBvciBcIm9wdGlvbnMuaWdub3JlVW5rbm93blwiXFxuJyl9LF9kb213aW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdShcImRvbXdpbmRvd1wiKX0sX2JpZ2ludDpmdW5jdGlvbihlKXtyZXR1cm4gdShcImJpZ2ludDpcIitlLnRvU3RyaW5nKCkpfSxfcHJvY2VzczpmdW5jdGlvbigpe3JldHVybiB1KFwicHJvY2Vzc1wiKX0sX3RpbWVyOmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJ0aW1lclwiKX0sX3BpcGU6ZnVuY3Rpb24oKXtyZXR1cm4gdShcInBpcGVcIil9LF90Y3A6ZnVuY3Rpb24oKXtyZXR1cm4gdShcInRjcFwiKX0sX3VkcDpmdW5jdGlvbigpe3JldHVybiB1KFwidWRwXCIpfSxfdHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJ0dHlcIil9LF9zdGF0d2F0Y2hlcjpmdW5jdGlvbigpe3JldHVybiB1KFwic3RhdHdhdGNoZXJcIil9LF9zZWN1cmVjb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJzZWN1cmVjb250ZXh0XCIpfSxfY29ubmVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB1KFwiY29ubmVjdGlvblwiKX0sX3psaWI6ZnVuY3Rpb24oKXtyZXR1cm4gdShcInpsaWJcIil9LF9jb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJjb250ZXh0XCIpfSxfbm9kZXNjcmlwdDpmdW5jdGlvbigpe3JldHVybiB1KFwibm9kZXNjcmlwdFwiKX0sX2h0dHBwYXJzZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdShcImh0dHBwYXJzZXJcIil9LF9kYXRhdmlldzpmdW5jdGlvbigpe3JldHVybiB1KFwiZGF0YXZpZXdcIil9LF9zaWduYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdShcInNpZ25hbFwiKX0sX2ZzZXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdShcImZzZXZlbnRcIil9LF90bHN3cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHUoXCJ0bHN3cmFwXCIpfX19ZnVuY3Rpb24gbCgpe3JldHVybntidWY6XCJcIix3cml0ZTpmdW5jdGlvbihlKXt0aGlzLmJ1Zis9ZX0sZW5kOmZ1bmN0aW9uKGUpe3RoaXMuYnVmKz1lfSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmfX19bS53cml0ZVRvU3RyZWFtPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49dCx0PXt9KSxmKHQ9dShlLHQpLG4pLmRpc3BhdGNoKGUpfX0uY2FsbCh0aGlzLHcoXCJsWXBvSTJcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSx3KFwiYnVmZmVyXCIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sXCIvZmFrZV85YTVhYTQ5ZC5qc1wiLFwiL1wiKX0se2J1ZmZlcjozLGNyeXB0bzo1LGxZcG9JMjoxMX1dLDI6W2Z1bmN0aW9uKGUsdCxmKXshZnVuY3Rpb24oZSx0LG4scixvLGksdSxzLGEpeyFmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgYT1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheT9VaW50OEFycmF5OkFycmF5LHQ9XCIrXCIuY2hhckNvZGVBdCgwKSxuPVwiL1wiLmNoYXJDb2RlQXQoMCkscj1cIjBcIi5jaGFyQ29kZUF0KDApLG89XCJhXCIuY2hhckNvZGVBdCgwKSxpPVwiQVwiLmNoYXJDb2RlQXQoMCksdT1cIi1cIi5jaGFyQ29kZUF0KDApLHM9XCJfXCIuY2hhckNvZGVBdCgwKTtmdW5jdGlvbiBmKGUpe2U9ZS5jaGFyQ29kZUF0KDApO3JldHVybiBlPT09dHx8ZT09PXU/NjI6ZT09PW58fGU9PT1zPzYzOmU8cj8tMTplPHIrMTA/ZS1yKzI2KzI2OmU8aSsyNj9lLWk6ZTxvKzI2P2UtbysyNjp2b2lkIDB9ZS50b0J5dGVBcnJheT1mdW5jdGlvbihlKXt2YXIgdCxuO2lmKDA8ZS5sZW5ndGglNCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpO3ZhciByPWUubGVuZ3RoLHI9XCI9XCI9PT1lLmNoYXJBdChyLTIpPzI6XCI9XCI9PT1lLmNoYXJBdChyLTEpPzE6MCxvPW5ldyBhKDMqZS5sZW5ndGgvNC1yKSxpPTA8cj9lLmxlbmd0aC00OmUubGVuZ3RoLHU9MDtmdW5jdGlvbiBzKGUpe29bdSsrXT1lfWZvcih0PTA7dDxpO3QrPTQsMClzKCgxNjcxMTY4MCYobj1mKGUuY2hhckF0KHQpKTw8MTh8ZihlLmNoYXJBdCh0KzEpKTw8MTJ8ZihlLmNoYXJBdCh0KzIpKTw8NnxmKGUuY2hhckF0KHQrMykpKSk+PjE2KSxzKCg2NTI4MCZuKT4+OCkscygyNTUmbik7cmV0dXJuIDI9PXI/cygyNTUmKG49ZihlLmNoYXJBdCh0KSk8PDJ8ZihlLmNoYXJBdCh0KzEpKT4+NCkpOjE9PXImJihzKChuPWYoZS5jaGFyQXQodCkpPDwxMHxmKGUuY2hhckF0KHQrMSkpPDw0fGYoZS5jaGFyQXQodCsyKSk+PjIpPj44JjI1NSkscygyNTUmbikpLG99LGUuZnJvbUJ5dGVBcnJheT1mdW5jdGlvbihlKXt2YXIgdCxuLHIsbyxpPWUubGVuZ3RoJTMsdT1cIlwiO2Z1bmN0aW9uIHMoZSl7cmV0dXJuXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIuY2hhckF0KGUpfWZvcih0PTAscj1lLmxlbmd0aC1pO3Q8cjt0Kz0zKW49KGVbdF08PDE2KSsoZVt0KzFdPDw4KStlW3QrMl0sdSs9cygobz1uKT4+MTgmNjMpK3Mobz4+MTImNjMpK3Mobz4+NiY2Mykrcyg2MyZvKTtzd2l0Y2goaSl7Y2FzZSAxOnU9KHUrPXMoKG49ZVtlLmxlbmd0aC0xXSk+PjIpKStzKG48PDQmNjMpK1wiPT1cIjticmVhaztjYXNlIDI6dT0odT0odSs9cygobj0oZVtlLmxlbmd0aC0yXTw8OCkrZVtlLmxlbmd0aC0xXSk+PjEwKSkrcyhuPj40JjYzKSkrcyhuPDwyJjYzKStcIj1cIn1yZXR1cm4gdX19KHZvaWQgMD09PWY/dGhpcy5iYXNlNjRqcz17fTpmKX0uY2FsbCh0aGlzLGUoXCJsWXBvSTJcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxlKFwiYnVmZmVyXCIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYmFzZTY0LWpzL2xpYi9iNjQuanNcIixcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9iYXNlNjQtanMvbGliXCIpfSx7YnVmZmVyOjMsbFlwb0kyOjExfV0sMzpbZnVuY3Rpb24oTyxlLEgpeyFmdW5jdGlvbihlLG4sZixyLGgscCxnLHksdyl7dmFyIGE9TyhcImJhc2U2NC1qc1wiKSxpPU8oXCJpZWVlNzU0XCIpO2Z1bmN0aW9uIGYoZSx0LG4pe2lmKCEodGhpcyBpbnN0YW5jZW9mIGYpKXJldHVybiBuZXcgZihlLHQsbik7dmFyIHIsbyxpLHUscz10eXBlb2YgZTtpZihcImJhc2U2NFwiPT09dCYmXCJzdHJpbmdcIj09cylmb3IoZT0odT1lKS50cmltP3UudHJpbSgpOnUucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKTtlLmxlbmd0aCU0IT0wOyllKz1cIj1cIjtpZihcIm51bWJlclwiPT1zKXI9aihlKTtlbHNlIGlmKFwic3RyaW5nXCI9PXMpcj1mLmJ5dGVMZW5ndGgoZSx0KTtlbHNle2lmKFwib2JqZWN0XCIhPXMpdGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgYXJndW1lbnQgbmVlZHMgdG8gYmUgYSBudW1iZXIsIGFycmF5IG9yIHN0cmluZy5cIik7cj1qKGUubGVuZ3RoKX1pZihmLl91c2VUeXBlZEFycmF5cz9vPWYuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkocikpOigobz10aGlzKS5sZW5ndGg9cixvLl9pc0J1ZmZlcj0hMCksZi5fdXNlVHlwZWRBcnJheXMmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmJ5dGVMZW5ndGgpby5fc2V0KGUpO2Vsc2UgaWYoQyh1PWUpfHxmLmlzQnVmZmVyKHUpfHx1JiZcIm9iamVjdFwiPT10eXBlb2YgdSYmXCJudW1iZXJcIj09dHlwZW9mIHUubGVuZ3RoKWZvcihpPTA7aTxyO2krKylmLmlzQnVmZmVyKGUpP29baV09ZS5yZWFkVUludDgoaSk6b1tpXT1lW2ldO2Vsc2UgaWYoXCJzdHJpbmdcIj09cylvLndyaXRlKGUsMCx0KTtlbHNlIGlmKFwibnVtYmVyXCI9PXMmJiFmLl91c2VUeXBlZEFycmF5cyYmIW4pZm9yKGk9MDtpPHI7aSsrKW9baV09MDtyZXR1cm4gb31mdW5jdGlvbiBiKGUsdCxuLHIpe3JldHVybiBmLl9jaGFyc1dyaXR0ZW49YyhmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0wO248ZS5sZW5ndGg7bisrKXQucHVzaCgyNTUmZS5jaGFyQ29kZUF0KG4pKTtyZXR1cm4gdH0odCksZSxuLHIpfWZ1bmN0aW9uIG0oZSx0LG4scil7cmV0dXJuIGYuX2NoYXJzV3JpdHRlbj1jKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLHI9W10sbz0wO288ZS5sZW5ndGg7bysrKW49ZS5jaGFyQ29kZUF0KG8pLHQ9bj4+OCxuPW4lMjU2LHIucHVzaChuKSxyLnB1c2godCk7cmV0dXJuIHJ9KHQpLGUsbixyKX1mdW5jdGlvbiB2KGUsdCxuKXt2YXIgcj1cIlwiO249TWF0aC5taW4oZS5sZW5ndGgsbik7Zm9yKHZhciBvPXQ7bzxuO28rKylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGVbb10pO3JldHVybiByfWZ1bmN0aW9uIG8oZSx0LG4scil7cnx8KGQoXCJib29sZWFuXCI9PXR5cGVvZiBuLFwibWlzc2luZyBvciBpbnZhbGlkIGVuZGlhblwiKSxkKG51bGwhPXQsXCJtaXNzaW5nIG9mZnNldFwiKSxkKHQrMTxlLmxlbmd0aCxcIlRyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpKTt2YXIgbyxyPWUubGVuZ3RoO2lmKCEocjw9dCkpcmV0dXJuIG4/KG89ZVt0XSx0KzE8ciYmKG98PWVbdCsxXTw8OCkpOihvPWVbdF08PDgsdCsxPHImJihvfD1lW3QrMV0pKSxvfWZ1bmN0aW9uIHUoZSx0LG4scil7cnx8KGQoXCJib29sZWFuXCI9PXR5cGVvZiBuLFwibWlzc2luZyBvciBpbnZhbGlkIGVuZGlhblwiKSxkKG51bGwhPXQsXCJtaXNzaW5nIG9mZnNldFwiKSxkKHQrMzxlLmxlbmd0aCxcIlRyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpKTt2YXIgbyxyPWUubGVuZ3RoO2lmKCEocjw9dCkpcmV0dXJuIG4/KHQrMjxyJiYobz1lW3QrMl08PDE2KSx0KzE8ciYmKG98PWVbdCsxXTw8OCksb3w9ZVt0XSx0KzM8ciYmKG8rPWVbdCszXTw8MjQ+Pj4wKSk6KHQrMTxyJiYobz1lW3QrMV08PDE2KSx0KzI8ciYmKG98PWVbdCsyXTw8OCksdCszPHImJihvfD1lW3QrM10pLG8rPWVbdF08PDI0Pj4+MCksb31mdW5jdGlvbiBfKGUsdCxuLHIpe2lmKHJ8fChkKFwiYm9vbGVhblwiPT10eXBlb2YgbixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZChudWxsIT10LFwibWlzc2luZyBvZmZzZXRcIiksZCh0KzE8ZS5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSksIShlLmxlbmd0aDw9dCkpcmV0dXJuIHI9byhlLHQsbiwhMCksMzI3Njgmcj8tMSooNjU1MzUtcisxKTpyfWZ1bmN0aW9uIEUoZSx0LG4scil7aWYocnx8KGQoXCJib29sZWFuXCI9PXR5cGVvZiBuLFwibWlzc2luZyBvciBpbnZhbGlkIGVuZGlhblwiKSxkKG51bGwhPXQsXCJtaXNzaW5nIG9mZnNldFwiKSxkKHQrMzxlLmxlbmd0aCxcIlRyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpKSwhKGUubGVuZ3RoPD10KSlyZXR1cm4gcj11KGUsdCxuLCEwKSwyMTQ3NDgzNjQ4JnI/LTEqKDQyOTQ5NjcyOTUtcisxKTpyfWZ1bmN0aW9uIEkoZSx0LG4scil7cmV0dXJuIHJ8fChkKFwiYm9vbGVhblwiPT10eXBlb2YgbixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZCh0KzM8ZS5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSksaS5yZWFkKGUsdCxuLDIzLDQpfWZ1bmN0aW9uIEEoZSx0LG4scil7cmV0dXJuIHJ8fChkKFwiYm9vbGVhblwiPT10eXBlb2YgbixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZCh0Kzc8ZS5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSksaS5yZWFkKGUsdCxuLDUyLDgpfWZ1bmN0aW9uIHMoZSx0LG4scixvKXtvfHwoZChudWxsIT10LFwibWlzc2luZyB2YWx1ZVwiKSxkKFwiYm9vbGVhblwiPT10eXBlb2YgcixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZChudWxsIT1uLFwibWlzc2luZyBvZmZzZXRcIiksZChuKzE8ZS5sZW5ndGgsXCJ0cnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIiksWSh0LDY1NTM1KSk7bz1lLmxlbmd0aDtpZighKG88PW4pKWZvcih2YXIgaT0wLHU9TWF0aC5taW4oby1uLDIpO2k8dTtpKyspZVtuK2ldPSh0JjI1NTw8OCoocj9pOjEtaSkpPj4+OCoocj9pOjEtaSl9ZnVuY3Rpb24gbChlLHQsbixyLG8pe298fChkKG51bGwhPXQsXCJtaXNzaW5nIHZhbHVlXCIpLGQoXCJib29sZWFuXCI9PXR5cGVvZiByLFwibWlzc2luZyBvciBpbnZhbGlkIGVuZGlhblwiKSxkKG51bGwhPW4sXCJtaXNzaW5nIG9mZnNldFwiKSxkKG4rMzxlLmxlbmd0aCxcInRyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSxZKHQsNDI5NDk2NzI5NSkpO289ZS5sZW5ndGg7aWYoIShvPD1uKSlmb3IodmFyIGk9MCx1PU1hdGgubWluKG8tbiw0KTtpPHU7aSsrKWVbbitpXT10Pj4+OCoocj9pOjMtaSkmMjU1fWZ1bmN0aW9uIEIoZSx0LG4scixvKXtvfHwoZChudWxsIT10LFwibWlzc2luZyB2YWx1ZVwiKSxkKFwiYm9vbGVhblwiPT10eXBlb2YgcixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZChudWxsIT1uLFwibWlzc2luZyBvZmZzZXRcIiksZChuKzE8ZS5sZW5ndGgsXCJUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIiksRih0LDMyNzY3LC0zMjc2OCkpLGUubGVuZ3RoPD1ufHxzKGUsMDw9dD90OjY1NTM1K3QrMSxuLHIsbyl9ZnVuY3Rpb24gTChlLHQsbixyLG8pe298fChkKG51bGwhPXQsXCJtaXNzaW5nIHZhbHVlXCIpLGQoXCJib29sZWFuXCI9PXR5cGVvZiByLFwibWlzc2luZyBvciBpbnZhbGlkIGVuZGlhblwiKSxkKG51bGwhPW4sXCJtaXNzaW5nIG9mZnNldFwiKSxkKG4rMzxlLmxlbmd0aCxcIlRyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSxGKHQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCkpLGUubGVuZ3RoPD1ufHxsKGUsMDw9dD90OjQyOTQ5NjcyOTUrdCsxLG4scixvKX1mdW5jdGlvbiBVKGUsdCxuLHIsbyl7b3x8KGQobnVsbCE9dCxcIm1pc3NpbmcgdmFsdWVcIiksZChcImJvb2xlYW5cIj09dHlwZW9mIHIsXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLGQobnVsbCE9bixcIm1pc3Npbmcgb2Zmc2V0XCIpLGQobiszPGUubGVuZ3RoLFwiVHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpLEQodCwzNDAyODIzNDY2Mzg1Mjg4NmUyMiwtMzQwMjgyMzQ2NjM4NTI4ODZlMjIpKSxlLmxlbmd0aDw9bnx8aS53cml0ZShlLHQsbixyLDIzLDQpfWZ1bmN0aW9uIHgoZSx0LG4scixvKXtvfHwoZChudWxsIT10LFwibWlzc2luZyB2YWx1ZVwiKSxkKFwiYm9vbGVhblwiPT10eXBlb2YgcixcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksZChudWxsIT1uLFwibWlzc2luZyBvZmZzZXRcIiksZChuKzc8ZS5sZW5ndGgsXCJUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIiksRCh0LDE3OTc2OTMxMzQ4NjIzMTU3ZTI5MiwtMTc5NzY5MzEzNDg2MjMxNTdlMjkyKSksZS5sZW5ndGg8PW58fGkud3JpdGUoZSx0LG4sciw1Miw4KX1ILkJ1ZmZlcj1mLEguU2xvd0J1ZmZlcj1mLEguSU5TUEVDVF9NQVhfQllURVM9NTAsZi5wb29sU2l6ZT04MTkyLGYuX3VzZVR5cGVkQXJyYXlzPWZ1bmN0aW9uKCl7dHJ5e3ZhciBlPW5ldyBBcnJheUJ1ZmZlcigwKSx0PW5ldyBVaW50OEFycmF5KGUpO3JldHVybiB0LmZvbz1mdW5jdGlvbigpe3JldHVybiA0Mn0sNDI9PT10LmZvbygpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnN1YmFycmF5fWNhdGNoKGUpe3JldHVybiExfX0oKSxmLmlzRW5jb2Rpbmc9ZnVuY3Rpb24oZSl7c3dpdGNoKFN0cmluZyhlKS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJoZXhcIjpjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpjYXNlXCJhc2NpaVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcImJhc2U2NFwiOmNhc2VcInJhd1wiOmNhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxmLmlzQnVmZmVyPWZ1bmN0aW9uKGUpe3JldHVybiEobnVsbD09ZXx8IWUuX2lzQnVmZmVyKX0sZi5ieXRlTGVuZ3RoPWZ1bmN0aW9uKGUsdCl7dmFyIG47c3dpdGNoKGUrPVwiXCIsdHx8XCJ1dGY4XCIpe2Nhc2VcImhleFwiOm49ZS5sZW5ndGgvMjticmVhaztjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpuPVQoZSkubGVuZ3RoO2JyZWFrO2Nhc2VcImFzY2lpXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwicmF3XCI6bj1lLmxlbmd0aDticmVhaztjYXNlXCJiYXNlNjRcIjpuPU0oZSkubGVuZ3RoO2JyZWFrO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOm49MiplLmxlbmd0aDticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVua25vd24gZW5jb2RpbmdcIil9cmV0dXJuIG59LGYuY29uY2F0PWZ1bmN0aW9uKGUsdCl7aWYoZChDKGUpLFwiVXNhZ2U6IEJ1ZmZlci5jb25jYXQobGlzdCwgW3RvdGFsTGVuZ3RoXSlcXG5saXN0IHNob3VsZCBiZSBhbiBBcnJheS5cIiksMD09PWUubGVuZ3RoKXJldHVybiBuZXcgZigwKTtpZigxPT09ZS5sZW5ndGgpcmV0dXJuIGVbMF07aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpZm9yKG89dD0wO288ZS5sZW5ndGg7bysrKXQrPWVbb10ubGVuZ3RoO2Zvcih2YXIgbj1uZXcgZih0KSxyPTAsbz0wO288ZS5sZW5ndGg7bysrKXt2YXIgaT1lW29dO2kuY29weShuLHIpLHIrPWkubGVuZ3RofXJldHVybiBufSxmLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlLHQsbixyKXtpc0Zpbml0ZSh0KT9pc0Zpbml0ZShuKXx8KHI9bixuPXZvaWQgMCk6KGE9cixyPXQsdD1uLG49YSksdD1OdW1iZXIodCl8fDA7dmFyIG8saSx1LHMsYT10aGlzLmxlbmd0aC10O3N3aXRjaCgoIW58fGE8KG49TnVtYmVyKG4pKSkmJihuPWEpLHI9U3RyaW5nKHJ8fFwidXRmOFwiKS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJoZXhcIjpvPWZ1bmN0aW9uKGUsdCxuLHIpe249TnVtYmVyKG4pfHwwO3ZhciBvPWUubGVuZ3RoLW47KCFyfHxvPChyPU51bWJlcihyKSkpJiYocj1vKSxkKChvPXQubGVuZ3RoKSUyPT0wLFwiSW52YWxpZCBoZXggc3RyaW5nXCIpLG8vMjxyJiYocj1vLzIpO2Zvcih2YXIgaT0wO2k8cjtpKyspe3ZhciB1PXBhcnNlSW50KHQuc3Vic3RyKDIqaSwyKSwxNik7ZCghaXNOYU4odSksXCJJbnZhbGlkIGhleCBzdHJpbmdcIiksZVtuK2ldPXV9cmV0dXJuIGYuX2NoYXJzV3JpdHRlbj0yKmksaX0odGhpcyxlLHQsbik7YnJlYWs7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6aT10aGlzLHU9dCxzPW4sbz1mLl9jaGFyc1dyaXR0ZW49YyhUKGUpLGksdSxzKTticmVhaztjYXNlXCJhc2NpaVwiOmNhc2VcImJpbmFyeVwiOm89Yih0aGlzLGUsdCxuKTticmVhaztjYXNlXCJiYXNlNjRcIjppPXRoaXMsdT10LHM9bixvPWYuX2NoYXJzV3JpdHRlbj1jKE0oZSksaSx1LHMpO2JyZWFrO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOm89bSh0aGlzLGUsdCxuKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVua25vd24gZW5jb2RpbmdcIil9cmV0dXJuIG99LGYucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixvLGksdSxzPXRoaXM7aWYoZT1TdHJpbmcoZXx8XCJ1dGY4XCIpLnRvTG93ZXJDYXNlKCksdD1OdW1iZXIodCl8fDAsKG49dm9pZCAwIT09bj9OdW1iZXIobik6cy5sZW5ndGgpPT09dClyZXR1cm5cIlwiO3N3aXRjaChlKXtjYXNlXCJoZXhcIjpyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmxlbmd0aDsoIXR8fHQ8MCkmJih0PTApOyghbnx8bjwwfHxyPG4pJiYobj1yKTtmb3IodmFyIG89XCJcIixpPXQ7aTxuO2krKylvKz1rKGVbaV0pO3JldHVybiBvfShzLHQsbik7YnJlYWs7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cj1mdW5jdGlvbihlLHQsbil7dmFyIHI9XCJcIixvPVwiXCI7bj1NYXRoLm1pbihlLmxlbmd0aCxuKTtmb3IodmFyIGk9dDtpPG47aSsrKWVbaV08PTEyNz8ocis9TihvKStTdHJpbmcuZnJvbUNoYXJDb2RlKGVbaV0pLG89XCJcIik6bys9XCIlXCIrZVtpXS50b1N0cmluZygxNik7cmV0dXJuIHIrTihvKX0ocyx0LG4pO2JyZWFrO2Nhc2VcImFzY2lpXCI6Y2FzZVwiYmluYXJ5XCI6cj12KHMsdCxuKTticmVhaztjYXNlXCJiYXNlNjRcIjpvPXMsdT1uLHI9MD09PShpPXQpJiZ1PT09by5sZW5ndGg/YS5mcm9tQnl0ZUFycmF5KG8pOmEuZnJvbUJ5dGVBcnJheShvLnNsaWNlKGksdSkpO2JyZWFrO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnI9ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1lLnNsaWNlKHQsbiksbz1cIlwiLGk9MDtpPHIubGVuZ3RoO2krPTIpbys9U3RyaW5nLmZyb21DaGFyQ29kZShyW2ldKzI1NipyW2krMV0pO3JldHVybiBvfShzLHQsbik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGVuY29kaW5nXCIpfXJldHVybiByfSxmLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIkJ1ZmZlclwiLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX0sZi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlLHQsbixyKXtpZih0PXR8fDAsKHI9cnx8MD09PXI/cjp0aGlzLmxlbmd0aCkhPT0obj1ufHwwKSYmMCE9PWUubGVuZ3RoJiYwIT09dGhpcy5sZW5ndGgpe2Qobjw9cixcInNvdXJjZUVuZCA8IHNvdXJjZVN0YXJ0XCIpLGQoMDw9dCYmdDxlLmxlbmd0aCxcInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHNcIiksZCgwPD1uJiZuPHRoaXMubGVuZ3RoLFwic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kc1wiKSxkKDA8PXImJnI8PXRoaXMubGVuZ3RoLFwic291cmNlRW5kIG91dCBvZiBib3VuZHNcIikscj50aGlzLmxlbmd0aCYmKHI9dGhpcy5sZW5ndGgpO3ZhciBvPShyPWUubGVuZ3RoLXQ8ci1uP2UubGVuZ3RoLXQrbjpyKS1uO2lmKG88MTAwfHwhZi5fdXNlVHlwZWRBcnJheXMpZm9yKHZhciBpPTA7aTxvO2krKyllW2krdF09dGhpc1tpK25dO2Vsc2UgZS5fc2V0KHRoaXMuc3ViYXJyYXkobixuK28pLHQpfX0sZi5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmxlbmd0aDtpZihlPVMoZSxuLDApLHQ9Uyh0LG4sbiksZi5fdXNlVHlwZWRBcnJheXMpcmV0dXJuIGYuX2F1Z21lbnQodGhpcy5zdWJhcnJheShlLHQpKTtmb3IodmFyIHI9dC1lLG89bmV3IGYocix2b2lkIDAsITApLGk9MDtpPHI7aSsrKW9baV09dGhpc1tpK2VdO3JldHVybiBvfSxmLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGNvbnNvbGUubG9nKFwiLmdldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuXCIpLHRoaXMucmVhZFVJbnQ4KGUpfSxmLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gY29uc29sZS5sb2coXCIuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC5cIiksdGhpcy53cml0ZVVJbnQ4KGUsdCl9LGYucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbihlLHQpe2lmKHR8fChkKG51bGwhPWUsXCJtaXNzaW5nIG9mZnNldFwiKSxkKGU8dGhpcy5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSksIShlPj10aGlzLmxlbmd0aCkpcmV0dXJuIHRoaXNbZV19LGYucHJvdG90eXBlLnJlYWRVSW50MTZMRT1mdW5jdGlvbihlLHQpe3JldHVybiBvKHRoaXMsZSwhMCx0KX0sZi5wcm90b3R5cGUucmVhZFVJbnQxNkJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8odGhpcyxlLCExLHQpfSxmLnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdSh0aGlzLGUsITAsdCl9LGYucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbihlLHQpe3JldHVybiB1KHRoaXMsZSwhMSx0KX0sZi5wcm90b3R5cGUucmVhZEludDg9ZnVuY3Rpb24oZSx0KXtpZih0fHwoZChudWxsIT1lLFwibWlzc2luZyBvZmZzZXRcIiksZChlPHRoaXMubGVuZ3RoLFwiVHJ5aW5nIHRvIHJlYWQgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIikpLCEoZT49dGhpcy5sZW5ndGgpKXJldHVybiAxMjgmdGhpc1tlXT8tMSooMjU1LXRoaXNbZV0rMSk6dGhpc1tlXX0sZi5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gXyh0aGlzLGUsITAsdCl9LGYucHJvdG90eXBlLnJlYWRJbnQxNkJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIF8odGhpcyxlLCExLHQpfSxmLnByb3RvdHlwZS5yZWFkSW50MzJMRT1mdW5jdGlvbihlLHQpe3JldHVybiBFKHRoaXMsZSwhMCx0KX0sZi5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRSh0aGlzLGUsITEsdCl9LGYucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEkodGhpcyxlLCEwLHQpfSxmLnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbihlLHQpe3JldHVybiBJKHRoaXMsZSwhMSx0KX0sZi5wcm90b3R5cGUucmVhZERvdWJsZUxFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEEodGhpcyxlLCEwLHQpfSxmLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gQSh0aGlzLGUsITEsdCl9LGYucHJvdG90eXBlLndyaXRlVUludDg9ZnVuY3Rpb24oZSx0LG4pe258fChkKG51bGwhPWUsXCJtaXNzaW5nIHZhbHVlXCIpLGQobnVsbCE9dCxcIm1pc3Npbmcgb2Zmc2V0XCIpLGQodDx0aGlzLmxlbmd0aCxcInRyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSxZKGUsMjU1KSksdD49dGhpcy5sZW5ndGh8fCh0aGlzW3RdPWUpfSxmLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKGUsdCxuKXtzKHRoaXMsZSx0LCEwLG4pfSxmLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKGUsdCxuKXtzKHRoaXMsZSx0LCExLG4pfSxmLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKGUsdCxuKXtsKHRoaXMsZSx0LCEwLG4pfSxmLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uKGUsdCxuKXtsKHRoaXMsZSx0LCExLG4pfSxmLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oZSx0LG4pe258fChkKG51bGwhPWUsXCJtaXNzaW5nIHZhbHVlXCIpLGQobnVsbCE9dCxcIm1pc3Npbmcgb2Zmc2V0XCIpLGQodDx0aGlzLmxlbmd0aCxcIlRyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSxGKGUsMTI3LC0xMjgpKSx0Pj10aGlzLmxlbmd0aHx8KDA8PWU/dGhpcy53cml0ZVVJbnQ4KGUsdCxuKTp0aGlzLndyaXRlVUludDgoMjU1K2UrMSx0LG4pKX0sZi5wcm90b3R5cGUud3JpdGVJbnQxNkxFPWZ1bmN0aW9uKGUsdCxuKXtCKHRoaXMsZSx0LCEwLG4pfSxmLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24oZSx0LG4pe0IodGhpcyxlLHQsITEsbil9LGYucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbihlLHQsbil7TCh0aGlzLGUsdCwhMCxuKX0sZi5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uKGUsdCxuKXtMKHRoaXMsZSx0LCExLG4pfSxmLnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24oZSx0LG4pe1UodGhpcyxlLHQsITAsbil9LGYucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbihlLHQsbil7VSh0aGlzLGUsdCwhMSxuKX0sZi5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbihlLHQsbil7eCh0aGlzLGUsdCwhMCxuKX0sZi5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbihlLHQsbil7eCh0aGlzLGUsdCwhMSxuKX0sZi5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbihlLHQsbil7aWYodD10fHwwLG49bnx8dGhpcy5sZW5ndGgsZChcIm51bWJlclwiPT10eXBlb2YoZT1cInN0cmluZ1wiPT10eXBlb2YoZT1lfHwwKT9lLmNoYXJDb2RlQXQoMCk6ZSkmJiFpc05hTihlKSxcInZhbHVlIGlzIG5vdCBhIG51bWJlclwiKSxkKHQ8PW4sXCJlbmQgPCBzdGFydFwiKSxuIT09dCYmMCE9PXRoaXMubGVuZ3RoKXtkKDA8PXQmJnQ8dGhpcy5sZW5ndGgsXCJzdGFydCBvdXQgb2YgYm91bmRzXCIpLGQoMDw9biYmbjw9dGhpcy5sZW5ndGgsXCJlbmQgb3V0IG9mIGJvdW5kc1wiKTtmb3IodmFyIHI9dDtyPG47cisrKXRoaXNbcl09ZX19LGYucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD10aGlzLmxlbmd0aCxuPTA7bjx0O24rKylpZihlW25dPWsodGhpc1tuXSksbj09PUguSU5TUEVDVF9NQVhfQllURVMpe2VbbisxXT1cIi4uLlwiO2JyZWFrfXJldHVyblwiPEJ1ZmZlciBcIitlLmpvaW4oXCIgXCIpK1wiPlwifSxmLnByb3RvdHlwZS50b0FycmF5QnVmZmVyPWZ1bmN0aW9uKCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFVpbnQ4QXJyYXkpdGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyLnRvQXJyYXlCdWZmZXIgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7aWYoZi5fdXNlVHlwZWRBcnJheXMpcmV0dXJuIG5ldyBmKHRoaXMpLmJ1ZmZlcjtmb3IodmFyIGU9bmV3IFVpbnQ4QXJyYXkodGhpcy5sZW5ndGgpLHQ9MCxuPWUubGVuZ3RoO3Q8bjt0Kz0xKWVbdF09dGhpc1t0XTtyZXR1cm4gZS5idWZmZXJ9O3ZhciB0PWYucHJvdG90eXBlO2Z1bmN0aW9uIFMoZSx0LG4pe3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiBlP246dDw9KGU9fn5lKT90OjA8PWV8fDA8PShlKz10KT9lOjB9ZnVuY3Rpb24gaihlKXtyZXR1cm4oZT1+fk1hdGguY2VpbCgrZSkpPDA/MDplfWZ1bmN0aW9uIEMoZSl7cmV0dXJuKEFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0pKGUpfWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGU8MTY/XCIwXCIrZS50b1N0cmluZygxNik6ZS50b1N0cmluZygxNil9ZnVuY3Rpb24gVChlKXtmb3IodmFyIHQ9W10sbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lLmNoYXJDb2RlQXQobik7aWYocjw9MTI3KXQucHVzaChlLmNoYXJDb2RlQXQobikpO2Vsc2UgZm9yKHZhciBvPW4saT0oNTUyOTY8PXImJnI8PTU3MzQzJiZuKyssZW5jb2RlVVJJQ29tcG9uZW50KGUuc2xpY2UobyxuKzEpKS5zdWJzdHIoMSkuc3BsaXQoXCIlXCIpKSx1PTA7dTxpLmxlbmd0aDt1KyspdC5wdXNoKHBhcnNlSW50KGlbdV0sMTYpKX1yZXR1cm4gdH1mdW5jdGlvbiBNKGUpe3JldHVybiBhLnRvQnl0ZUFycmF5KGUpfWZ1bmN0aW9uIGMoZSx0LG4scil7Zm9yKHZhciBvPTA7bzxyJiYhKG8rbj49dC5sZW5ndGh8fG8+PWUubGVuZ3RoKTtvKyspdFtvK25dPWVbb107cmV0dXJuIG99ZnVuY3Rpb24gTihlKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlKX1jYXRjaChlKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSg2NTUzMyl9fWZ1bmN0aW9uIFkoZSx0KXtkKFwibnVtYmVyXCI9PXR5cGVvZiBlLFwiY2Fubm90IHdyaXRlIGEgbm9uLW51bWJlciBhcyBhIG51bWJlclwiKSxkKDA8PWUsXCJzcGVjaWZpZWQgYSBuZWdhdGl2ZSB2YWx1ZSBmb3Igd3JpdGluZyBhbiB1bnNpZ25lZCB2YWx1ZVwiKSxkKGU8PXQsXCJ2YWx1ZSBpcyBsYXJnZXIgdGhhbiBtYXhpbXVtIHZhbHVlIGZvciB0eXBlXCIpLGQoTWF0aC5mbG9vcihlKT09PWUsXCJ2YWx1ZSBoYXMgYSBmcmFjdGlvbmFsIGNvbXBvbmVudFwiKX1mdW5jdGlvbiBGKGUsdCxuKXtkKFwibnVtYmVyXCI9PXR5cGVvZiBlLFwiY2Fubm90IHdyaXRlIGEgbm9uLW51bWJlciBhcyBhIG51bWJlclwiKSxkKGU8PXQsXCJ2YWx1ZSBsYXJnZXIgdGhhbiBtYXhpbXVtIGFsbG93ZWQgdmFsdWVcIiksZChuPD1lLFwidmFsdWUgc21hbGxlciB0aGFuIG1pbmltdW0gYWxsb3dlZCB2YWx1ZVwiKSxkKE1hdGguZmxvb3IoZSk9PT1lLFwidmFsdWUgaGFzIGEgZnJhY3Rpb25hbCBjb21wb25lbnRcIil9ZnVuY3Rpb24gRChlLHQsbil7ZChcIm51bWJlclwiPT10eXBlb2YgZSxcImNhbm5vdCB3cml0ZSBhIG5vbi1udW1iZXIgYXMgYSBudW1iZXJcIiksZChlPD10LFwidmFsdWUgbGFyZ2VyIHRoYW4gbWF4aW11bSBhbGxvd2VkIHZhbHVlXCIpLGQobjw9ZSxcInZhbHVlIHNtYWxsZXIgdGhhbiBtaW5pbXVtIGFsbG93ZWQgdmFsdWVcIil9ZnVuY3Rpb24gZChlLHQpe2lmKCFlKXRocm93IG5ldyBFcnJvcih0fHxcIkZhaWxlZCBhc3NlcnRpb25cIil9Zi5fYXVnbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gZS5faXNCdWZmZXI9ITAsZS5fZ2V0PWUuZ2V0LGUuX3NldD1lLnNldCxlLmdldD10LmdldCxlLnNldD10LnNldCxlLndyaXRlPXQud3JpdGUsZS50b1N0cmluZz10LnRvU3RyaW5nLGUudG9Mb2NhbGVTdHJpbmc9dC50b1N0cmluZyxlLnRvSlNPTj10LnRvSlNPTixlLmNvcHk9dC5jb3B5LGUuc2xpY2U9dC5zbGljZSxlLnJlYWRVSW50OD10LnJlYWRVSW50OCxlLnJlYWRVSW50MTZMRT10LnJlYWRVSW50MTZMRSxlLnJlYWRVSW50MTZCRT10LnJlYWRVSW50MTZCRSxlLnJlYWRVSW50MzJMRT10LnJlYWRVSW50MzJMRSxlLnJlYWRVSW50MzJCRT10LnJlYWRVSW50MzJCRSxlLnJlYWRJbnQ4PXQucmVhZEludDgsZS5yZWFkSW50MTZMRT10LnJlYWRJbnQxNkxFLGUucmVhZEludDE2QkU9dC5yZWFkSW50MTZCRSxlLnJlYWRJbnQzMkxFPXQucmVhZEludDMyTEUsZS5yZWFkSW50MzJCRT10LnJlYWRJbnQzMkJFLGUucmVhZEZsb2F0TEU9dC5yZWFkRmxvYXRMRSxlLnJlYWRGbG9hdEJFPXQucmVhZEZsb2F0QkUsZS5yZWFkRG91YmxlTEU9dC5yZWFkRG91YmxlTEUsZS5yZWFkRG91YmxlQkU9dC5yZWFkRG91YmxlQkUsZS53cml0ZVVJbnQ4PXQud3JpdGVVSW50OCxlLndyaXRlVUludDE2TEU9dC53cml0ZVVJbnQxNkxFLGUud3JpdGVVSW50MTZCRT10LndyaXRlVUludDE2QkUsZS53cml0ZVVJbnQzMkxFPXQud3JpdGVVSW50MzJMRSxlLndyaXRlVUludDMyQkU9dC53cml0ZVVJbnQzMkJFLGUud3JpdGVJbnQ4PXQud3JpdGVJbnQ4LGUud3JpdGVJbnQxNkxFPXQud3JpdGVJbnQxNkxFLGUud3JpdGVJbnQxNkJFPXQud3JpdGVJbnQxNkJFLGUud3JpdGVJbnQzMkxFPXQud3JpdGVJbnQzMkxFLGUud3JpdGVJbnQzMkJFPXQud3JpdGVJbnQzMkJFLGUud3JpdGVGbG9hdExFPXQud3JpdGVGbG9hdExFLGUud3JpdGVGbG9hdEJFPXQud3JpdGVGbG9hdEJFLGUud3JpdGVEb3VibGVMRT10LndyaXRlRG91YmxlTEUsZS53cml0ZURvdWJsZUJFPXQud3JpdGVEb3VibGVCRSxlLmZpbGw9dC5maWxsLGUuaW5zcGVjdD10Lmluc3BlY3QsZS50b0FycmF5QnVmZmVyPXQudG9BcnJheUJ1ZmZlcixlfX0uY2FsbCh0aGlzLE8oXCJsWXBvSTJcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxPKFwiYnVmZmVyXCIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzXCIsXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyXCIpfSx7XCJiYXNlNjQtanNcIjoyLGJ1ZmZlcjozLGllZWU3NTQ6MTAsbFlwb0kyOjExfV0sNDpbZnVuY3Rpb24oYyxkLGUpeyFmdW5jdGlvbihlLHQsYSxuLHIsbyxpLHUscyl7dmFyIGE9YyhcImJ1ZmZlclwiKS5CdWZmZXIsZj00LGw9bmV3IGEoZik7bC5maWxsKDApO2QuZXhwb3J0cz17aGFzaDpmdW5jdGlvbihlLHQsbixyKXtmb3IodmFyIG89dChmdW5jdGlvbihlLHQpe2UubGVuZ3RoJWYhPTAmJihuPWUubGVuZ3RoKyhmLWUubGVuZ3RoJWYpLGU9YS5jb25jYXQoW2UsbF0sbikpO2Zvcih2YXIgbixyPVtdLG89dD9lLnJlYWRJbnQzMkJFOmUucmVhZEludDMyTEUsaT0wO2k8ZS5sZW5ndGg7aSs9ZilyLnB1c2goby5jYWxsKGUsaSkpO3JldHVybiByfShlPWEuaXNCdWZmZXIoZSk/ZTpuZXcgYShlKSxyKSw4KmUubGVuZ3RoKSx0PXIsaT1uZXcgYShuKSx1PXQ/aS53cml0ZUludDMyQkU6aS53cml0ZUludDMyTEUscz0wO3M8by5sZW5ndGg7cysrKXUuY2FsbChpLG9bc10sNCpzLCEwKTtyZXR1cm4gaX19fS5jYWxsKHRoaXMsYyhcImxZcG9JMlwiKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9LGMoXCJidWZmZXJcIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSxcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9jcnlwdG8tYnJvd3NlcmlmeS9oZWxwZXJzLmpzXCIsXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvY3J5cHRvLWJyb3dzZXJpZnlcIil9LHtidWZmZXI6MyxsWXBvSTI6MTF9XSw1OltmdW5jdGlvbih2LGUsXyl7IWZ1bmN0aW9uKGwsYyx1LGQsaCxwLGcseSx3KXt2YXIgdT12KFwiYnVmZmVyXCIpLkJ1ZmZlcixlPXYoXCIuL3NoYVwiKSx0PXYoXCIuL3NoYTI1NlwiKSxuPXYoXCIuL3JuZ1wiKSxiPXtzaGExOmUsc2hhMjU2OnQsbWQ1OnYoXCIuL21kNVwiKX0scz02NCxhPW5ldyB1KHMpO2Z1bmN0aW9uIHIoZSxuKXt2YXIgcj1iW2U9ZXx8XCJzaGExXCJdLG89W107cmV0dXJuIHJ8fGkoXCJhbGdvcml0aG06XCIsZSxcImlzIG5vdCB5ZXQgc3VwcG9ydGVkXCIpLHt1cGRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHUuaXNCdWZmZXIoZSl8fChlPW5ldyB1KGUpKSxvLnB1c2goZSksZS5sZW5ndGgsdGhpc30sZGlnZXN0OmZ1bmN0aW9uKGUpe3ZhciB0PXUuY29uY2F0KG8pLHQ9bj9mdW5jdGlvbihlLHQsbil7dS5pc0J1ZmZlcih0KXx8KHQ9bmV3IHUodCkpLHUuaXNCdWZmZXIobil8fChuPW5ldyB1KG4pKSx0Lmxlbmd0aD5zP3Q9ZSh0KTp0Lmxlbmd0aDxzJiYodD11LmNvbmNhdChbdCxhXSxzKSk7Zm9yKHZhciByPW5ldyB1KHMpLG89bmV3IHUocyksaT0wO2k8cztpKyspcltpXT01NF50W2ldLG9baV09OTJedFtpXTtyZXR1cm4gbj1lKHUuY29uY2F0KFtyLG5dKSksZSh1LmNvbmNhdChbbyxuXSkpfShyLG4sdCk6cih0KTtyZXR1cm4gbz1udWxsLGU/dC50b1N0cmluZyhlKTp0fX19ZnVuY3Rpb24gaSgpe3ZhciBlPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKFwiIFwiKTt0aHJvdyBuZXcgRXJyb3IoW2UsXCJ3ZSBhY2NlcHQgcHVsbCByZXF1ZXN0c1wiLFwiaHR0cDovL2dpdGh1Yi5jb20vZG9taW5pY3RhcnIvY3J5cHRvLWJyb3dzZXJpZnlcIl0uam9pbihcIlxcblwiKSl9YS5maWxsKDApLF8uY3JlYXRlSGFzaD1mdW5jdGlvbihlKXtyZXR1cm4gcihlKX0sXy5jcmVhdGVIbWFjPXIsXy5yYW5kb21CeXRlcz1mdW5jdGlvbihlLHQpe2lmKCF0fHwhdC5jYWxsKXJldHVybiBuZXcgdShuKGUpKTt0cnl7dC5jYWxsKHRoaXMsdm9pZCAwLG5ldyB1KG4oZSkpKX1jYXRjaChlKXt0KGUpfX07dmFyIG8sZj1bXCJjcmVhdGVDcmVkZW50aWFsc1wiLFwiY3JlYXRlQ2lwaGVyXCIsXCJjcmVhdGVDaXBoZXJpdlwiLFwiY3JlYXRlRGVjaXBoZXJcIixcImNyZWF0ZURlY2lwaGVyaXZcIixcImNyZWF0ZVNpZ25cIixcImNyZWF0ZVZlcmlmeVwiLFwiY3JlYXRlRGlmZmllSGVsbG1hblwiLFwicGJrZGYyXCJdLG09ZnVuY3Rpb24oZSl7X1tlXT1mdW5jdGlvbigpe2koXCJzb3JyeSxcIixlLFwiaXMgbm90IGltcGxlbWVudGVkIHlldFwiKX19O2ZvcihvIGluIGYpbShmW29dLG8pfS5jYWxsKHRoaXMsdihcImxZcG9JMlwiKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9LHYoXCJidWZmZXJcIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSxcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9jcnlwdG8tYnJvd3NlcmlmeS9pbmRleC5qc1wiLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2NyeXB0by1icm93c2VyaWZ5XCIpfSx7XCIuL21kNVwiOjYsXCIuL3JuZ1wiOjcsXCIuL3NoYVwiOjgsXCIuL3NoYTI1NlwiOjksYnVmZmVyOjMsbFlwb0kyOjExfV0sNjpbZnVuY3Rpb24odyxiLGUpeyFmdW5jdGlvbihlLHIsbyxpLHUsYSxmLGwseSl7dmFyIHQ9dyhcIi4vaGVscGVyc1wiKTtmdW5jdGlvbiBuKGUsdCl7ZVt0Pj41XXw9MTI4PDx0JTMyLGVbMTQrKHQrNjQ+Pj45PDw0KV09dDtmb3IodmFyIG49MTczMjU4NDE5MyxyPS0yNzE3MzM4Nzksbz0tMTczMjU4NDE5NCxpPTI3MTczMzg3OCx1PTA7dTxlLmxlbmd0aDt1Kz0xNil7dmFyIHM9bixhPXIsZj1vLGw9aSxuPWMobixyLG8saSxlW3UrMF0sNywtNjgwODc2OTM2KSxpPWMoaSxuLHIsbyxlW3UrMV0sMTIsLTM4OTU2NDU4Niksbz1jKG8saSxuLHIsZVt1KzJdLDE3LDYwNjEwNTgxOSkscj1jKHIsbyxpLG4sZVt1KzNdLDIyLC0xMDQ0NTI1MzMwKTtuPWMobixyLG8saSxlW3UrNF0sNywtMTc2NDE4ODk3KSxpPWMoaSxuLHIsbyxlW3UrNV0sMTIsMTIwMDA4MDQyNiksbz1jKG8saSxuLHIsZVt1KzZdLDE3LC0xNDczMjMxMzQxKSxyPWMocixvLGksbixlW3UrN10sMjIsLTQ1NzA1OTgzKSxuPWMobixyLG8saSxlW3UrOF0sNywxNzcwMDM1NDE2KSxpPWMoaSxuLHIsbyxlW3UrOV0sMTIsLTE5NTg0MTQ0MTcpLG89YyhvLGksbixyLGVbdSsxMF0sMTcsLTQyMDYzKSxyPWMocixvLGksbixlW3UrMTFdLDIyLC0xOTkwNDA0MTYyKSxuPWMobixyLG8saSxlW3UrMTJdLDcsMTgwNDYwMzY4MiksaT1jKGksbixyLG8sZVt1KzEzXSwxMiwtNDAzNDExMDEpLG89YyhvLGksbixyLGVbdSsxNF0sMTcsLTE1MDIwMDIyOTApLG49ZChuLHI9YyhyLG8saSxuLGVbdSsxNV0sMjIsMTIzNjUzNTMyOSksbyxpLGVbdSsxXSw1LC0xNjU3OTY1MTApLGk9ZChpLG4scixvLGVbdSs2XSw5LC0xMDY5NTAxNjMyKSxvPWQobyxpLG4scixlW3UrMTFdLDE0LDY0MzcxNzcxMykscj1kKHIsbyxpLG4sZVt1KzBdLDIwLC0zNzM4OTczMDIpLG49ZChuLHIsbyxpLGVbdSs1XSw1LC03MDE1NTg2OTEpLGk9ZChpLG4scixvLGVbdSsxMF0sOSwzODAxNjA4Myksbz1kKG8saSxuLHIsZVt1KzE1XSwxNCwtNjYwNDc4MzM1KSxyPWQocixvLGksbixlW3UrNF0sMjAsLTQwNTUzNzg0OCksbj1kKG4scixvLGksZVt1KzldLDUsNTY4NDQ2NDM4KSxpPWQoaSxuLHIsbyxlW3UrMTRdLDksLTEwMTk4MDM2OTApLG89ZChvLGksbixyLGVbdSszXSwxNCwtMTg3MzYzOTYxKSxyPWQocixvLGksbixlW3UrOF0sMjAsMTE2MzUzMTUwMSksbj1kKG4scixvLGksZVt1KzEzXSw1LC0xNDQ0NjgxNDY3KSxpPWQoaSxuLHIsbyxlW3UrMl0sOSwtNTE0MDM3ODQpLG89ZChvLGksbixyLGVbdSs3XSwxNCwxNzM1MzI4NDczKSxuPWgobixyPWQocixvLGksbixlW3UrMTJdLDIwLC0xOTI2NjA3NzM0KSxvLGksZVt1KzVdLDQsLTM3ODU1OCksaT1oKGksbixyLG8sZVt1KzhdLDExLC0yMDIyNTc0NDYzKSxvPWgobyxpLG4scixlW3UrMTFdLDE2LDE4MzkwMzA1NjIpLHI9aChyLG8saSxuLGVbdSsxNF0sMjMsLTM1MzA5NTU2KSxuPWgobixyLG8saSxlW3UrMV0sNCwtMTUzMDk5MjA2MCksaT1oKGksbixyLG8sZVt1KzRdLDExLDEyNzI4OTMzNTMpLG89aChvLGksbixyLGVbdSs3XSwxNiwtMTU1NDk3NjMyKSxyPWgocixvLGksbixlW3UrMTBdLDIzLC0xMDk0NzMwNjQwKSxuPWgobixyLG8saSxlW3UrMTNdLDQsNjgxMjc5MTc0KSxpPWgoaSxuLHIsbyxlW3UrMF0sMTEsLTM1ODUzNzIyMiksbz1oKG8saSxuLHIsZVt1KzNdLDE2LC03MjI1MjE5NzkpLHI9aChyLG8saSxuLGVbdSs2XSwyMyw3NjAyOTE4OSksbj1oKG4scixvLGksZVt1KzldLDQsLTY0MDM2NDQ4NyksaT1oKGksbixyLG8sZVt1KzEyXSwxMSwtNDIxODE1ODM1KSxvPWgobyxpLG4scixlW3UrMTVdLDE2LDUzMDc0MjUyMCksbj1wKG4scj1oKHIsbyxpLG4sZVt1KzJdLDIzLC05OTUzMzg2NTEpLG8saSxlW3UrMF0sNiwtMTk4NjMwODQ0KSxpPXAoaSxuLHIsbyxlW3UrN10sMTAsMTEyNjg5MTQxNSksbz1wKG8saSxuLHIsZVt1KzE0XSwxNSwtMTQxNjM1NDkwNSkscj1wKHIsbyxpLG4sZVt1KzVdLDIxLC01NzQzNDA1NSksbj1wKG4scixvLGksZVt1KzEyXSw2LDE3MDA0ODU1NzEpLGk9cChpLG4scixvLGVbdSszXSwxMCwtMTg5NDk4NjYwNiksbz1wKG8saSxuLHIsZVt1KzEwXSwxNSwtMTA1MTUyMykscj1wKHIsbyxpLG4sZVt1KzFdLDIxLC0yMDU0OTIyNzk5KSxuPXAobixyLG8saSxlW3UrOF0sNiwxODczMzEzMzU5KSxpPXAoaSxuLHIsbyxlW3UrMTVdLDEwLC0zMDYxMTc0NCksbz1wKG8saSxuLHIsZVt1KzZdLDE1LC0xNTYwMTk4MzgwKSxyPXAocixvLGksbixlW3UrMTNdLDIxLDEzMDkxNTE2NDkpLG49cChuLHIsbyxpLGVbdSs0XSw2LC0xNDU1MjMwNzApLGk9cChpLG4scixvLGVbdSsxMV0sMTAsLTExMjAyMTAzNzkpLG89cChvLGksbixyLGVbdSsyXSwxNSw3MTg3ODcyNTkpLHI9cChyLG8saSxuLGVbdSs5XSwyMSwtMzQzNDg1NTUxKSxuPWcobixzKSxyPWcocixhKSxvPWcobyxmKSxpPWcoaSxsKX1yZXR1cm4gQXJyYXkobixyLG8saSl9ZnVuY3Rpb24gcyhlLHQsbixyLG8saSl7cmV0dXJuIGcoKHQ9ZyhnKHQsZSksZyhyLGkpKSk8PG98dD4+PjMyLW8sbil9ZnVuY3Rpb24gYyhlLHQsbixyLG8saSx1KXtyZXR1cm4gcyh0Jm58fnQmcixlLHQsbyxpLHUpfWZ1bmN0aW9uIGQoZSx0LG4scixvLGksdSl7cmV0dXJuIHModCZyfG4mfnIsZSx0LG8saSx1KX1mdW5jdGlvbiBoKGUsdCxuLHIsbyxpLHUpe3JldHVybiBzKHRebl5yLGUsdCxvLGksdSl9ZnVuY3Rpb24gcChlLHQsbixyLG8saSx1KXtyZXR1cm4gcyhuXih0fH5yKSxlLHQsbyxpLHUpfWZ1bmN0aW9uIGcoZSx0KXt2YXIgbj0oNjU1MzUmZSkrKDY1NTM1JnQpO3JldHVybihlPj4xNikrKHQ+PjE2KSsobj4+MTYpPDwxNnw2NTUzNSZufWIuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdC5oYXNoKGUsbiwxNil9fS5jYWxsKHRoaXMsdyhcImxZcG9JMlwiKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9LHcoXCJidWZmZXJcIikuQnVmZmVyLGFyZ3VtZW50c1szXSxhcmd1bWVudHNbNF0sYXJndW1lbnRzWzVdLGFyZ3VtZW50c1s2XSxcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9jcnlwdG8tYnJvd3NlcmlmeS9tZDUuanNcIixcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9jcnlwdG8tYnJvd3NlcmlmeVwiKX0se1wiLi9oZWxwZXJzXCI6NCxidWZmZXI6MyxsWXBvSTI6MTF9XSw3OltmdW5jdGlvbihlLGwsdCl7IWZ1bmN0aW9uKGUsdCxuLHIsbyxpLHUscyxmKXt2YXIgYTtsLmV4cG9ydHM9YXx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49bmV3IEFycmF5KGUpLHI9MDtyPGU7cisrKTA9PSgzJnIpJiYodD00Mjk0OTY3Mjk2Kk1hdGgucmFuZG9tKCkpLG5bcl09dD4+PigoMyZyKTw8MykmMjU1O3JldHVybiBufX0uY2FsbCh0aGlzLGUoXCJsWXBvSTJcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxlKFwiYnVmZmVyXCIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvY3J5cHRvLWJyb3dzZXJpZnkvcm5nLmpzXCIsXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvY3J5cHRvLWJyb3dzZXJpZnlcIil9LHtidWZmZXI6MyxsWXBvSTI6MTF9XSw4OltmdW5jdGlvbihjLGQsZSl7IWZ1bmN0aW9uKGUsdCxuLHIsbyxzLGEsZixsKXt2YXIgaT1jKFwiLi9oZWxwZXJzXCIpO2Z1bmN0aW9uIHUobCxjKXtsW2M+PjVdfD0xMjg8PDI0LWMlMzIsbFsxNSsoYys2ND4+OTw8NCldPWM7Zm9yKHZhciBlLHQsbixyPUFycmF5KDgwKSxvPTE3MzI1ODQxOTMsaT0tMjcxNzMzODc5LHU9LTE3MzI1ODQxOTQscz0yNzE3MzM4NzgsZD0tMTAwOTU4OTc3NixoPTA7aDxsLmxlbmd0aDtoKz0xNil7Zm9yKHZhciBwPW8sZz1pLHk9dSx3PXMsYj1kLGE9MDthPDgwO2ErKyl7clthXT1hPDE2P2xbaCthXTp2KHJbYS0zXV5yW2EtOF1eclthLTE0XV5yW2EtMTZdLDEpO3ZhciBmPW0obSh2KG8sNSksKGY9aSx0PXUsbj1zLChlPWEpPDIwP2YmdHx+ZiZuOiEoZTw0MCkmJmU8NjA/ZiZ0fGYmbnx0Jm46Zl50Xm4pKSxtKG0oZCxyW2FdKSwoZT1hKTwyMD8xNTE4NTAwMjQ5OmU8NDA/MTg1OTc3NTM5MzplPDYwPy0xODk0MDA3NTg4Oi04OTk0OTc1MTQpKSxkPXMscz11LHU9dihpLDMwKSxpPW8sbz1mfW89bShvLHApLGk9bShpLGcpLHU9bSh1LHkpLHM9bShzLHcpLGQ9bShkLGIpfXJldHVybiBBcnJheShvLGksdSxzLGQpfWZ1bmN0aW9uIG0oZSx0KXt2YXIgbj0oNjU1MzUmZSkrKDY1NTM1JnQpO3JldHVybihlPj4xNikrKHQ+PjE2KSsobj4+MTYpPDwxNnw2NTUzNSZufWZ1bmN0aW9uIHYoZSx0KXtyZXR1cm4gZTw8dHxlPj4+MzItdH1kLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGkuaGFzaChlLHUsMjAsITApfX0uY2FsbCh0aGlzLGMoXCJsWXBvSTJcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSxjKFwiYnVmZmVyXCIpLkJ1ZmZlcixhcmd1bWVudHNbM10sYXJndW1lbnRzWzRdLGFyZ3VtZW50c1s1XSxhcmd1bWVudHNbNl0sXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvY3J5cHRvLWJyb3dzZXJpZnkvc2hhLmpzXCIsXCIvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvY3J5cHRvLWJyb3dzZXJpZnlcIil9LHtcIi4vaGVscGVyc1wiOjQsYnVmZmVyOjMsbFlwb0kyOjExfV0sOTpbZnVuY3Rpb24oYyxkLGUpeyFmdW5jdGlvbihlLHQsbixyLHUscyxhLGYsbCl7ZnVuY3Rpb24gYihlLHQpe3ZhciBuPSg2NTUzNSZlKSsoNjU1MzUmdCk7cmV0dXJuKGU+PjE2KSsodD4+MTYpKyhuPj4xNik8PDE2fDY1NTM1Jm59ZnVuY3Rpb24gbyhlLGwpe3ZhciBjLGQ9bmV3IEFycmF5KDExMTYzNTI0MDgsMTg5OTQ0NzQ0MSwzMDQ5MzIzNDcxLDM5MjEwMDk1NzMsOTYxOTg3MTYzLDE1MDg5NzA5OTMsMjQ1MzYzNTc0OCwyODcwNzYzMjIxLDM2MjQzODEwODAsMzEwNTk4NDAxLDYwNzIyNTI3OCwxNDI2ODgxOTg3LDE5MjUwNzgzODgsMjE2MjA3ODIwNiwyNjE0ODg4MTAzLDMyNDgyMjI1ODAsMzgzNTM5MDQwMSw0MDIyMjI0Nzc0LDI2NDM0NzA3OCw2MDQ4MDc2MjgsNzcwMjU1OTgzLDEyNDkxNTAxMjIsMTU1NTA4MTY5MiwxOTk2MDY0OTg2LDI1NTQyMjA4ODIsMjgyMTgzNDM0OSwyOTUyOTk2ODA4LDMyMTAzMTM2NzEsMzMzNjU3MTg5MSwzNTg0NTI4NzExLDExMzkyNjk5MywzMzgyNDE4OTUsNjY2MzA3MjA1LDc3MzUyOTkxMiwxMjk0NzU3MzcyLDEzOTYxODIyOTEsMTY5NTE4MzcwMCwxOTg2NjYxMDUxLDIxNzcwMjYzNTAsMjQ1Njk1NjAzNywyNzMwNDg1OTIxLDI4MjAzMDI0MTEsMzI1OTczMDgwMCwzMzQ1NzY0NzcxLDM1MTYwNjU4MTcsMzYwMDM1MjgwNCw0MDk0NTcxOTA5LDI3NTQyMzM0NCw0MzAyMjc3MzQsNTA2OTQ4NjE2LDY1OTA2MDU1Niw4ODM5OTc4NzcsOTU4MTM5NTcxLDEzMjI4MjIyMTgsMTUzNzAwMjA2MywxNzQ3ODczNzc5LDE5NTU1NjIyMjIsMjAyNDEwNDgxNSwyMjI3NzMwNDUyLDIzNjE4NTI0MjQsMjQyODQzNjQ3NCwyNzU2NzM0MTg3LDMyMDQwMzE0NzksMzMyOTMyNTI5OCksdD1uZXcgQXJyYXkoMTc3OTAzMzcwMywzMTQ0MTM0Mjc3LDEwMTM5MDQyNDIsMjc3MzQ4MDc2MiwxMzU5ODkzMTE5LDI2MDA4MjI5MjQsNTI4NzM0NjM1LDE1NDE0NTkyMjUpLG49bmV3IEFycmF5KDY0KTtlW2w+PjVdfD0xMjg8PDI0LWwlMzIsZVsxNSsobCs2ND4+OTw8NCldPWw7Zm9yKHZhciByLG8saD0wO2g8ZS5sZW5ndGg7aCs9MTYpe2Zvcih2YXIgaT10WzBdLHU9dFsxXSxzPXRbMl0scD10WzNdLGE9dFs0XSxnPXRbNV0seT10WzZdLHc9dFs3XSxmPTA7Zjw2NDtmKyspbltmXT1mPDE2P2VbZitoXTpiKGIoYigobz1uW2YtMl0sbShvLDE3KV5tKG8sMTkpXnYobywxMCkpLG5bZi03XSksKG89bltmLTE1XSxtKG8sNylebShvLDE4KV52KG8sMykpKSxuW2YtMTZdKSxjPWIoYihiKGIodyxtKG89YSw2KV5tKG8sMTEpXm0obywyNSkpLGEmZ15+YSZ5KSxkW2ZdKSxuW2ZdKSxyPWIobShyPWksMilebShyLDEzKV5tKHIsMjIpLGkmdV5pJnNedSZzKSx3PXkseT1nLGc9YSxhPWIocCxjKSxwPXMscz11LHU9aSxpPWIoYyxyKTt0WzBdPWIoaSx0WzBdKSx0WzFdPWIodSx0WzFdKSx0WzJdPWIocyx0WzJdKSx0WzNdPWIocCx0WzNdKSx0WzRdPWIoYSx0WzRdKSx0WzVdPWIoZyx0WzVdKSx0WzZdPWIoeSx0WzZdKSx0WzddPWIodyx0WzddKX1yZXR1cm4gdH12YXIgaT1jKFwiLi9oZWxwZXJzXCIpLG09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT4+PnR8ZTw8MzItdH0sdj1mdW5jdGlvbihlLHQpe3JldHVybiBlPj4+dH07ZC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpLmhhc2goZSxvLDMyLCEwKX19LmNhbGwodGhpcyxjKFwibFlwb0kyXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sYyhcImJ1ZmZlclwiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2NyeXB0by1icm93c2VyaWZ5L3NoYTI1Ni5qc1wiLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2NyeXB0by1icm93c2VyaWZ5XCIpfSx7XCIuL2hlbHBlcnNcIjo0LGJ1ZmZlcjozLGxZcG9JMjoxMX1dLDEwOltmdW5jdGlvbihlLHQsZil7IWZ1bmN0aW9uKGUsdCxuLHIsbyxpLHUscyxhKXtmLnJlYWQ9ZnVuY3Rpb24oZSx0LG4scixvKXt2YXIgaSx1LGw9OCpvLXItMSxjPSgxPDxsKS0xLGQ9Yz4+MSxzPS03LGE9bj9vLTE6MCxmPW4/LTE6MSxvPWVbdCthXTtmb3IoYSs9ZixpPW8mKDE8PC1zKS0xLG8+Pj0tcyxzKz1sOzA8cztpPTI1NippK2VbdCthXSxhKz1mLHMtPTgpO2Zvcih1PWkmKDE8PC1zKS0xLGk+Pj0tcyxzKz1yOzA8czt1PTI1Nip1K2VbdCthXSxhKz1mLHMtPTgpO2lmKDA9PT1pKWk9MS1kO2Vsc2V7aWYoaT09PWMpcmV0dXJuIHU/TmFOOjEvMCoobz8tMToxKTt1Kz1NYXRoLnBvdygyLHIpLGktPWR9cmV0dXJuKG8/LTE6MSkqdSpNYXRoLnBvdygyLGktcil9LGYud3JpdGU9ZnVuY3Rpb24oZSx0LGwsbixyLGMpe3ZhciBvLGksdT04KmMtci0xLHM9KDE8PHUpLTEsYT1zPj4xLGQ9MjM9PT1yP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MCxmPW4/MDpjLTEsaD1uPzE6LTEsYz10PDB8fDA9PT10JiYxL3Q8MD8xOjA7Zm9yKHQ9TWF0aC5hYnModCksaXNOYU4odCl8fHQ9PT0xLzA/KGk9aXNOYU4odCk/MTowLG89cyk6KG89TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMiksdCoobj1NYXRoLnBvdygyLC1vKSk8MSYmKG8tLSxuKj0yKSwyPD0odCs9MTw9bythP2QvbjpkKk1hdGgucG93KDIsMS1hKSkqbiYmKG8rKyxuLz0yKSxzPD1vK2E/KGk9MCxvPXMpOjE8PW8rYT8oaT0odCpuLTEpKk1hdGgucG93KDIsciksbys9YSk6KGk9dCpNYXRoLnBvdygyLGEtMSkqTWF0aC5wb3coMixyKSxvPTApKTs4PD1yO2VbbCtmXT0yNTUmaSxmKz1oLGkvPTI1NixyLT04KTtmb3Iobz1vPDxyfGksdSs9cjswPHU7ZVtsK2ZdPTI1NSZvLGYrPWgsby89MjU2LHUtPTgpO2VbbCtmLWhdfD0xMjgqY319LmNhbGwodGhpcyxlKFwibFlwb0kyXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sZShcImJ1ZmZlclwiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2llZWU3NTQvaW5kZXguanNcIixcIi9ub2RlX21vZHVsZXMvZ3VscC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9pZWVlNzU0XCIpfSx7YnVmZmVyOjMsbFlwb0kyOjExfV0sMTE6W2Z1bmN0aW9uKGUsaCx0KXshZnVuY3Rpb24oZSx0LG4scixvLGYsbCxjLGQpe3ZhciBpLHUscztmdW5jdGlvbiBhKCl7fShlPWguZXhwb3J0cz17fSkubmV4dFRpY2s9KHU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LnNldEltbWVkaWF0ZSxzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5wb3N0TWVzc2FnZSYmd2luZG93LmFkZEV2ZW50TGlzdGVuZXIsdT9mdW5jdGlvbihlKXtyZXR1cm4gd2luZG93LnNldEltbWVkaWF0ZShlKX06cz8oaT1bXSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixmdW5jdGlvbihlKXt2YXIgdD1lLnNvdXJjZTt0IT09d2luZG93JiZudWxsIT09dHx8XCJwcm9jZXNzLXRpY2tcIiE9PWUuZGF0YXx8KGUuc3RvcFByb3BhZ2F0aW9uKCksMDxpLmxlbmd0aCYmaS5zaGlmdCgpKCkpfSwhMCksZnVuY3Rpb24oZSl7aS5wdXNoKGUpLHdpbmRvdy5wb3N0TWVzc2FnZShcInByb2Nlc3MtdGlja1wiLFwiKlwiKX0pOmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZSwwKX0pLGUudGl0bGU9XCJicm93c2VyXCIsZS5icm93c2VyPSEwLGUuZW52PXt9LGUuYXJndj1bXSxlLm9uPWEsZS5hZGRMaXN0ZW5lcj1hLGUub25jZT1hLGUub2ZmPWEsZS5yZW1vdmVMaXN0ZW5lcj1hLGUucmVtb3ZlQWxsTGlzdGVuZXJzPWEsZS5lbWl0PWEsZS5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfSxlLmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifSxlLmNoZGlyPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX19LmNhbGwodGhpcyxlKFwibFlwb0kyXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30sZShcImJ1ZmZlclwiKS5CdWZmZXIsYXJndW1lbnRzWzNdLGFyZ3VtZW50c1s0XSxhcmd1bWVudHNbNV0sYXJndW1lbnRzWzZdLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qc1wiLFwiL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL3Byb2Nlc3NcIil9LHtidWZmZXI6MyxsWXBvSTI6MTF9XX0se30sWzFdKSgxKX0pOyIsImltcG9ydCBoYXNoIGZyb20gXCJvYmplY3QtaGFzaFwiO1xuLyoqXG4gKiBUaGlzIGNhY2hlIGtleSBzaG91bGQgYmUgY29uc2lzdGVudCBhY3Jvc3MgYWxsIHZlcnNpb25zIG9mIGxhbmdjaGFpbi5cbiAqIEl0IGlzIGN1cnJlbnRseSBOT1QgY29uc2lzdGVudCBhY3Jvc3MgdmVyc2lvbnMgb2YgbGFuZ2NoYWluLlxuICpcbiAqIEEgaHVnZSBiZW5lZml0IG9mIGhhdmluZyBhIHJlbW90ZSBjYWNoZSAobGlrZSByZWRpcykgaXMgdGhhdCB5b3UgY2FuXG4gKiBhY2Nlc3MgdGhlIGNhY2hlIGZyb20gZGlmZmVyZW50IHByb2Nlc3Nlcy9tYWNoaW5lcy4gVGhlIGFsbG93cyB5b3UgdG9cbiAqIHNlcGVyYXRlIGNvbmNlcm5zIGFuZCBzY2FsZSBob3Jpem9udGFsbHkuXG4gKlxuICogVE9ETzogTWFrZSBjYWNoZSBrZXkgY29uc2lzdGVudCBhY3Jvc3MgdmVyc2lvbnMgb2YgbGFuZ2NoYWluLlxuICovXG5leHBvcnQgY29uc3QgZ2V0Q2FjaGVLZXkgPSAoLi4uc3RyaW5ncykgPT4gaGFzaChzdHJpbmdzLmpvaW4oXCJfXCIpKTtcbiIsImV4cG9ydCBjb25zdCBSVU5fS0VZID0gXCJfX3J1blwiO1xuZXhwb3J0IGNsYXNzIEJhc2VDaGF0TWVzc2FnZSB7XG4gICAgY29uc3RydWN0b3IodGV4dCkge1xuICAgICAgICAvKiogVGhlIHRleHQgb2YgdGhlIG1lc3NhZ2UuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRleHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBtZXNzYWdlIHNlbmRlciBpbiBhIG11bHRpLXVzZXIgY2hhdC4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLl9nZXRUeXBlKCksXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY29udGVudDogdGhpcy50ZXh0LFxuICAgICAgICAgICAgICAgIHJvbGU6IFwicm9sZVwiIGluIHRoaXMgPyB0aGlzLnJvbGUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBIdW1hbkNoYXRNZXNzYWdlIGV4dGVuZHMgQmFzZUNoYXRNZXNzYWdlIHtcbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHVtYW5cIjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQUlDaGF0TWVzc2FnZSBleHRlbmRzIEJhc2VDaGF0TWVzc2FnZSB7XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFN5c3RlbUNoYXRNZXNzYWdlIGV4dGVuZHMgQmFzZUNoYXRNZXNzYWdlIHtcbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENoYXRNZXNzYWdlIGV4dGVuZHMgQmFzZUNoYXRNZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCByb2xlKSB7XG4gICAgICAgIHN1cGVyKHRleHQpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb2xlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJnZW5lcmljXCI7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIFByb21wdFZhbHVlIGNsYXNzLiBBbGwgcHJvbXB0IHZhbHVlcyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUHJvbXB0VmFsdWUge1xufVxuLyoqXG4gKiBCYXNlIEluZGV4IGNsYXNzLiBBbGwgaW5kZXhlcyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUmV0cmlldmVyIHtcbn1cbmV4cG9ydCBjbGFzcyBCYXNlQ2hhdE1lc3NhZ2VIaXN0b3J5IHtcbn1cbmV4cG9ydCBjbGFzcyBCYXNlTGlzdENoYXRNZXNzYWdlSGlzdG9yeSB7XG4gICAgYWRkVXNlck1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRNZXNzYWdlKG5ldyBIdW1hbkNoYXRNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgYWRkQUlDaGF0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZE1lc3NhZ2UobmV3IEFJQ2hhdE1lc3NhZ2UobWVzc2FnZSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXNlQ2FjaGUge1xufVxuZXhwb3J0IGNsYXNzIEJhc2VGaWxlU3RvcmUge1xufVxuZXhwb3J0IGNsYXNzIEJhc2VFbnRpdHlTdG9yZSB7XG59XG4iLCJpbXBvcnQgeyBnZXRDYWNoZUtleSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IEJhc2VDYWNoZSB9IGZyb20gXCIuLi9zY2hlbWEvaW5kZXguanNcIjtcbmNvbnN0IEdMT0JBTF9NQVAgPSBuZXcgTWFwKCk7XG5leHBvcnQgY2xhc3MgSW5NZW1vcnlDYWNoZSBleHRlbmRzIEJhc2VDYWNoZSB7XG4gICAgY29uc3RydWN0b3IobWFwKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhY2hlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBtYXAgPz8gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBsb29rdXAocHJvbXB0LCBsbG1LZXkpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmNhY2hlLmdldChnZXRDYWNoZUtleShwcm9tcHQsIGxsbUtleSkpID8/IG51bGwpO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGUocHJvbXB0LCBsbG1LZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGdldENhY2hlS2V5KHByb21wdCwgbGxtS2V5KSwgdmFsdWUpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2xvYmFsKCkge1xuICAgICAgICByZXR1cm4gbmV3IEluTWVtb3J5Q2FjaGUoR0xPQkFMX01BUCk7XG4gICAgfVxufVxuIiwiZnVuY3Rpb24gUmV0cnlPcGVyYXRpb24odGltZW91dHMsIG9wdGlvbnMpIHtcbiAgLy8gQ29tcGF0aWJpbGl0eSBmb3IgdGhlIG9sZCAodGltZW91dHMsIHJldHJ5Rm9yZXZlcikgc2lnbmF0dXJlXG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucyA9IHsgZm9yZXZlcjogb3B0aW9ucyB9O1xuICB9XG5cbiAgdGhpcy5fb3JpZ2luYWxUaW1lb3V0cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGltZW91dHMpKTtcbiAgdGhpcy5fdGltZW91dHMgPSB0aW1lb3V0cztcbiAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHRoaXMuX21heFJldHJ5VGltZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5tYXhSZXRyeVRpbWUgfHwgSW5maW5pdHk7XG4gIHRoaXMuX2ZuID0gbnVsbDtcbiAgdGhpcy5fZXJyb3JzID0gW107XG4gIHRoaXMuX2F0dGVtcHRzID0gMTtcbiAgdGhpcy5fb3BlcmF0aW9uVGltZW91dCA9IG51bGw7XG4gIHRoaXMuX29wZXJhdGlvblRpbWVvdXRDYiA9IG51bGw7XG4gIHRoaXMuX3RpbWVvdXQgPSBudWxsO1xuICB0aGlzLl9vcGVyYXRpb25TdGFydCA9IG51bGw7XG4gIHRoaXMuX3RpbWVyID0gbnVsbDtcblxuICBpZiAodGhpcy5fb3B0aW9ucy5mb3JldmVyKSB7XG4gICAgdGhpcy5fY2FjaGVkVGltZW91dHMgPSB0aGlzLl90aW1lb3V0cy5zbGljZSgwKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBSZXRyeU9wZXJhdGlvbjtcblxuUmV0cnlPcGVyYXRpb24ucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2F0dGVtcHRzID0gMTtcbiAgdGhpcy5fdGltZW91dHMgPSB0aGlzLl9vcmlnaW5hbFRpbWVvdXRzLnNsaWNlKDApO1xufVxuXG5SZXRyeU9wZXJhdGlvbi5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5fdGltZW91dCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgfVxuICBpZiAodGhpcy5fdGltZXIpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuICB9XG5cbiAgdGhpcy5fdGltZW91dHMgICAgICAgPSBbXTtcbiAgdGhpcy5fY2FjaGVkVGltZW91dHMgPSBudWxsO1xufTtcblxuUmV0cnlPcGVyYXRpb24ucHJvdG90eXBlLnJldHJ5ID0gZnVuY3Rpb24oZXJyKSB7XG4gIGlmICh0aGlzLl90aW1lb3V0KSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpO1xuICB9XG5cbiAgaWYgKCFlcnIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIGlmIChlcnIgJiYgY3VycmVudFRpbWUgLSB0aGlzLl9vcGVyYXRpb25TdGFydCA+PSB0aGlzLl9tYXhSZXRyeVRpbWUpIHtcbiAgICB0aGlzLl9lcnJvcnMucHVzaChlcnIpO1xuICAgIHRoaXMuX2Vycm9ycy51bnNoaWZ0KG5ldyBFcnJvcignUmV0cnlPcGVyYXRpb24gdGltZW91dCBvY2N1cnJlZCcpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB0aGlzLl9lcnJvcnMucHVzaChlcnIpO1xuXG4gIHZhciB0aW1lb3V0ID0gdGhpcy5fdGltZW91dHMuc2hpZnQoKTtcbiAgaWYgKHRpbWVvdXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0aGlzLl9jYWNoZWRUaW1lb3V0cykge1xuICAgICAgLy8gcmV0cnkgZm9yZXZlciwgb25seSBrZWVwIGxhc3QgZXJyb3JcbiAgICAgIHRoaXMuX2Vycm9ycy5zcGxpY2UoMCwgdGhpcy5fZXJyb3JzLmxlbmd0aCAtIDEpO1xuICAgICAgdGltZW91dCA9IHRoaXMuX2NhY2hlZFRpbWVvdXRzLnNsaWNlKC0xKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuX2F0dGVtcHRzKys7XG5cbiAgICBpZiAoc2VsZi5fb3BlcmF0aW9uVGltZW91dENiKSB7XG4gICAgICBzZWxmLl90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5fb3BlcmF0aW9uVGltZW91dENiKHNlbGYuX2F0dGVtcHRzKTtcbiAgICAgIH0sIHNlbGYuX29wZXJhdGlvblRpbWVvdXQpO1xuXG4gICAgICBpZiAoc2VsZi5fb3B0aW9ucy51bnJlZikge1xuICAgICAgICAgIHNlbGYuX3RpbWVvdXQudW5yZWYoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZWxmLl9mbihzZWxmLl9hdHRlbXB0cyk7XG4gIH0sIHRpbWVvdXQpO1xuXG4gIGlmICh0aGlzLl9vcHRpb25zLnVucmVmKSB7XG4gICAgICB0aGlzLl90aW1lci51bnJlZigpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5SZXRyeU9wZXJhdGlvbi5wcm90b3R5cGUuYXR0ZW1wdCA9IGZ1bmN0aW9uKGZuLCB0aW1lb3V0T3BzKSB7XG4gIHRoaXMuX2ZuID0gZm47XG5cbiAgaWYgKHRpbWVvdXRPcHMpIHtcbiAgICBpZiAodGltZW91dE9wcy50aW1lb3V0KSB7XG4gICAgICB0aGlzLl9vcGVyYXRpb25UaW1lb3V0ID0gdGltZW91dE9wcy50aW1lb3V0O1xuICAgIH1cbiAgICBpZiAodGltZW91dE9wcy5jYikge1xuICAgICAgdGhpcy5fb3BlcmF0aW9uVGltZW91dENiID0gdGltZW91dE9wcy5jYjtcbiAgICB9XG4gIH1cblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGlmICh0aGlzLl9vcGVyYXRpb25UaW1lb3V0Q2IpIHtcbiAgICB0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX29wZXJhdGlvblRpbWVvdXRDYigpO1xuICAgIH0sIHNlbGYuX29wZXJhdGlvblRpbWVvdXQpO1xuICB9XG5cbiAgdGhpcy5fb3BlcmF0aW9uU3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICB0aGlzLl9mbih0aGlzLl9hdHRlbXB0cyk7XG59O1xuXG5SZXRyeU9wZXJhdGlvbi5wcm90b3R5cGUudHJ5ID0gZnVuY3Rpb24oZm4pIHtcbiAgY29uc29sZS5sb2coJ1VzaW5nIFJldHJ5T3BlcmF0aW9uLnRyeSgpIGlzIGRlcHJlY2F0ZWQnKTtcbiAgdGhpcy5hdHRlbXB0KGZuKTtcbn07XG5cblJldHJ5T3BlcmF0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKGZuKSB7XG4gIGNvbnNvbGUubG9nKCdVc2luZyBSZXRyeU9wZXJhdGlvbi5zdGFydCgpIGlzIGRlcHJlY2F0ZWQnKTtcbiAgdGhpcy5hdHRlbXB0KGZuKTtcbn07XG5cblJldHJ5T3BlcmF0aW9uLnByb3RvdHlwZS5zdGFydCA9IFJldHJ5T3BlcmF0aW9uLnByb3RvdHlwZS50cnk7XG5cblJldHJ5T3BlcmF0aW9uLnByb3RvdHlwZS5lcnJvcnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2Vycm9ycztcbn07XG5cblJldHJ5T3BlcmF0aW9uLnByb3RvdHlwZS5hdHRlbXB0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5fYXR0ZW1wdHM7XG59O1xuXG5SZXRyeU9wZXJhdGlvbi5wcm90b3R5cGUubWFpbkVycm9yID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLl9lcnJvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgY291bnRzID0ge307XG4gIHZhciBtYWluRXJyb3IgPSBudWxsO1xuICB2YXIgbWFpbkVycm9yQ291bnQgPSAwO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZXJyb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVycm9yID0gdGhpcy5fZXJyb3JzW2ldO1xuICAgIHZhciBtZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICB2YXIgY291bnQgPSAoY291bnRzW21lc3NhZ2VdIHx8IDApICsgMTtcblxuICAgIGNvdW50c1ttZXNzYWdlXSA9IGNvdW50O1xuXG4gICAgaWYgKGNvdW50ID49IG1haW5FcnJvckNvdW50KSB7XG4gICAgICBtYWluRXJyb3IgPSBlcnJvcjtcbiAgICAgIG1haW5FcnJvckNvdW50ID0gY291bnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1haW5FcnJvcjtcbn07XG4iLCJ2YXIgUmV0cnlPcGVyYXRpb24gPSByZXF1aXJlKCcuL3JldHJ5X29wZXJhdGlvbicpO1xuXG5leHBvcnRzLm9wZXJhdGlvbiA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgdmFyIHRpbWVvdXRzID0gZXhwb3J0cy50aW1lb3V0cyhvcHRpb25zKTtcbiAgcmV0dXJuIG5ldyBSZXRyeU9wZXJhdGlvbih0aW1lb3V0cywge1xuICAgICAgZm9yZXZlcjogb3B0aW9ucyAmJiAob3B0aW9ucy5mb3JldmVyIHx8IG9wdGlvbnMucmV0cmllcyA9PT0gSW5maW5pdHkpLFxuICAgICAgdW5yZWY6IG9wdGlvbnMgJiYgb3B0aW9ucy51bnJlZixcbiAgICAgIG1heFJldHJ5VGltZTogb3B0aW9ucyAmJiBvcHRpb25zLm1heFJldHJ5VGltZVxuICB9KTtcbn07XG5cbmV4cG9ydHMudGltZW91dHMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICByZXR1cm4gW10uY29uY2F0KG9wdGlvbnMpO1xuICB9XG5cbiAgdmFyIG9wdHMgPSB7XG4gICAgcmV0cmllczogMTAsXG4gICAgZmFjdG9yOiAyLFxuICAgIG1pblRpbWVvdXQ6IDEgKiAxMDAwLFxuICAgIG1heFRpbWVvdXQ6IEluZmluaXR5LFxuICAgIHJhbmRvbWl6ZTogZmFsc2VcbiAgfTtcbiAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpIHtcbiAgICBvcHRzW2tleV0gPSBvcHRpb25zW2tleV07XG4gIH1cblxuICBpZiAob3B0cy5taW5UaW1lb3V0ID4gb3B0cy5tYXhUaW1lb3V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdtaW5UaW1lb3V0IGlzIGdyZWF0ZXIgdGhhbiBtYXhUaW1lb3V0Jyk7XG4gIH1cblxuICB2YXIgdGltZW91dHMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRzLnJldHJpZXM7IGkrKykge1xuICAgIHRpbWVvdXRzLnB1c2godGhpcy5jcmVhdGVUaW1lb3V0KGksIG9wdHMpKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZm9yZXZlciAmJiAhdGltZW91dHMubGVuZ3RoKSB7XG4gICAgdGltZW91dHMucHVzaCh0aGlzLmNyZWF0ZVRpbWVvdXQoaSwgb3B0cykpO1xuICB9XG5cbiAgLy8gc29ydCB0aGUgYXJyYXkgbnVtZXJpY2FsbHkgYXNjZW5kaW5nXG4gIHRpbWVvdXRzLnNvcnQoZnVuY3Rpb24oYSxiKSB7XG4gICAgcmV0dXJuIGEgLSBiO1xuICB9KTtcblxuICByZXR1cm4gdGltZW91dHM7XG59O1xuXG5leHBvcnRzLmNyZWF0ZVRpbWVvdXQgPSBmdW5jdGlvbihhdHRlbXB0LCBvcHRzKSB7XG4gIHZhciByYW5kb20gPSAob3B0cy5yYW5kb21pemUpXG4gICAgPyAoTWF0aC5yYW5kb20oKSArIDEpXG4gICAgOiAxO1xuXG4gIHZhciB0aW1lb3V0ID0gTWF0aC5yb3VuZChyYW5kb20gKiBNYXRoLm1heChvcHRzLm1pblRpbWVvdXQsIDEpICogTWF0aC5wb3cob3B0cy5mYWN0b3IsIGF0dGVtcHQpKTtcbiAgdGltZW91dCA9IE1hdGgubWluKHRpbWVvdXQsIG9wdHMubWF4VGltZW91dCk7XG5cbiAgcmV0dXJuIHRpbWVvdXQ7XG59O1xuXG5leHBvcnRzLndyYXAgPSBmdW5jdGlvbihvYmosIG9wdGlvbnMsIG1ldGhvZHMpIHtcbiAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIG1ldGhvZHMgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG5cbiAgaWYgKCFtZXRob2RzKSB7XG4gICAgbWV0aG9kcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgbWV0aG9kcy5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRob2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIG1ldGhvZCAgID0gbWV0aG9kc1tpXTtcbiAgICB2YXIgb3JpZ2luYWwgPSBvYmpbbWV0aG9kXTtcblxuICAgIG9ialttZXRob2RdID0gZnVuY3Rpb24gcmV0cnlXcmFwcGVyKG9yaWdpbmFsKSB7XG4gICAgICB2YXIgb3AgICAgICAgPSBleHBvcnRzLm9wZXJhdGlvbihvcHRpb25zKTtcbiAgICAgIHZhciBhcmdzICAgICA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICB2YXIgY2FsbGJhY2sgPSBhcmdzLnBvcCgpO1xuXG4gICAgICBhcmdzLnB1c2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChvcC5yZXRyeShlcnIpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBhcmd1bWVudHNbMF0gPSBvcC5tYWluRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG5cbiAgICAgIG9wLmF0dGVtcHQoZnVuY3Rpb24oKSB7XG4gICAgICAgIG9yaWdpbmFsLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICB9KTtcbiAgICB9LmJpbmQob2JqLCBvcmlnaW5hbCk7XG4gICAgb2JqW21ldGhvZF0ub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL3JldHJ5Jyk7IiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgcmV0cnkgPSByZXF1aXJlKCdyZXRyeScpO1xuXG5jb25zdCBuZXR3b3JrRXJyb3JNc2dzID0gW1xuXHQnRmFpbGVkIHRvIGZldGNoJywgLy8gQ2hyb21lXG5cdCdOZXR3b3JrRXJyb3Igd2hlbiBhdHRlbXB0aW5nIHRvIGZldGNoIHJlc291cmNlLicsIC8vIEZpcmVmb3hcblx0J1RoZSBJbnRlcm5ldCBjb25uZWN0aW9uIGFwcGVhcnMgdG8gYmUgb2ZmbGluZS4nLCAvLyBTYWZhcmlcblx0J05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnIC8vIGBjcm9zcy1mZXRjaGBcbl07XG5cbmNsYXNzIEFib3J0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcblx0XHRzdXBlcigpO1xuXG5cdFx0aWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0dGhpcy5vcmlnaW5hbEVycm9yID0gbWVzc2FnZTtcblx0XHRcdCh7bWVzc2FnZX0gPSBtZXNzYWdlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5vcmlnaW5hbEVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuXHRcdFx0dGhpcy5vcmlnaW5hbEVycm9yLnN0YWNrID0gdGhpcy5zdGFjaztcblx0XHR9XG5cblx0XHR0aGlzLm5hbWUgPSAnQWJvcnRFcnJvcic7XG5cdFx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0fVxufVxuXG5jb25zdCBkZWNvcmF0ZUVycm9yV2l0aENvdW50cyA9IChlcnJvciwgYXR0ZW1wdE51bWJlciwgb3B0aW9ucykgPT4ge1xuXHQvLyBNaW51cyAxIGZyb20gYXR0ZW1wdE51bWJlciBiZWNhdXNlIHRoZSBmaXJzdCBhdHRlbXB0IGRvZXMgbm90IGNvdW50IGFzIGEgcmV0cnlcblx0Y29uc3QgcmV0cmllc0xlZnQgPSBvcHRpb25zLnJldHJpZXMgLSAoYXR0ZW1wdE51bWJlciAtIDEpO1xuXG5cdGVycm9yLmF0dGVtcHROdW1iZXIgPSBhdHRlbXB0TnVtYmVyO1xuXHRlcnJvci5yZXRyaWVzTGVmdCA9IHJldHJpZXNMZWZ0O1xuXHRyZXR1cm4gZXJyb3I7XG59O1xuXG5jb25zdCBpc05ldHdvcmtFcnJvciA9IGVycm9yTWVzc2FnZSA9PiBuZXR3b3JrRXJyb3JNc2dzLmluY2x1ZGVzKGVycm9yTWVzc2FnZSk7XG5cbmNvbnN0IHBSZXRyeSA9IChpbnB1dCwgb3B0aW9ucykgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRvcHRpb25zID0ge1xuXHRcdG9uRmFpbGVkQXR0ZW1wdDogKCkgPT4ge30sXG5cdFx0cmV0cmllczogMTAsXG5cdFx0Li4ub3B0aW9uc1xuXHR9O1xuXG5cdGNvbnN0IG9wZXJhdGlvbiA9IHJldHJ5Lm9wZXJhdGlvbihvcHRpb25zKTtcblxuXHRvcGVyYXRpb24uYXR0ZW1wdChhc3luYyBhdHRlbXB0TnVtYmVyID0+IHtcblx0XHR0cnkge1xuXHRcdFx0cmVzb2x2ZShhd2FpdCBpbnB1dChhdHRlbXB0TnVtYmVyKSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGlmICghKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpKSB7XG5cdFx0XHRcdHJlamVjdChuZXcgVHlwZUVycm9yKGBOb24tZXJyb3Igd2FzIHRocm93bjogXCIke2Vycm9yfVwiLiBZb3Ugc2hvdWxkIG9ubHkgdGhyb3cgZXJyb3JzLmApKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBBYm9ydEVycm9yKSB7XG5cdFx0XHRcdG9wZXJhdGlvbi5zdG9wKCk7XG5cdFx0XHRcdHJlamVjdChlcnJvci5vcmlnaW5hbEVycm9yKTtcblx0XHRcdH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IgJiYgIWlzTmV0d29ya0Vycm9yKGVycm9yLm1lc3NhZ2UpKSB7XG5cdFx0XHRcdG9wZXJhdGlvbi5zdG9wKCk7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWNvcmF0ZUVycm9yV2l0aENvdW50cyhlcnJvciwgYXR0ZW1wdE51bWJlciwgb3B0aW9ucyk7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCBvcHRpb25zLm9uRmFpbGVkQXR0ZW1wdChlcnJvcik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIW9wZXJhdGlvbi5yZXRyeShlcnJvcikpIHtcblx0XHRcdFx0XHRyZWplY3Qob3BlcmF0aW9uLm1haW5FcnJvcigpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBwUmV0cnk7XG4vLyBUT0RPOiByZW1vdmUgdGhpcyBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uXG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gcFJldHJ5O1xuXG5tb2R1bGUuZXhwb3J0cy5BYm9ydEVycm9yID0gQWJvcnRFcnJvcjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcbiAgLCBwcmVmaXggPSAnfic7XG5cbi8qKlxuICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIGEgc3RvcmFnZSBmb3Igb3VyIGBFRWAgb2JqZWN0cy5cbiAqIEFuIGBFdmVudHNgIGluc3RhbmNlIGlzIGEgcGxhaW4gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgYXJlIGV2ZW50IG5hbWVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRXZlbnRzKCkge31cblxuLy9cbi8vIFdlIHRyeSB0byBub3QgaW5oZXJpdCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC4gSW4gc29tZSBlbmdpbmVzIGNyZWF0aW5nIGFuXG4vLyBpbnN0YW5jZSBpbiB0aGlzIHdheSBpcyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGBPYmplY3QuY3JlYXRlKG51bGwpYCBkaXJlY3RseS5cbi8vIElmIGBPYmplY3QuY3JlYXRlKG51bGwpYCBpcyBub3Qgc3VwcG9ydGVkIHdlIHByZWZpeCB0aGUgZXZlbnQgbmFtZXMgd2l0aCBhXG4vLyBjaGFyYWN0ZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJ1aWx0LWluIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBub3Rcbi8vIG92ZXJyaWRkZW4gb3IgdXNlZCBhcyBhbiBhdHRhY2sgdmVjdG9yLlxuLy9cbmlmIChPYmplY3QuY3JlYXRlKSB7XG4gIEV2ZW50cy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIC8vXG4gIC8vIFRoaXMgaGFjayBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgYF9fcHJvdG9fX2AgcHJvcGVydHkgaXMgc3RpbGwgaW5oZXJpdGVkIGluXG4gIC8vIHNvbWUgb2xkIGJyb3dzZXJzIGxpa2UgQW5kcm9pZCA0LCBpUGhvbmUgNS4xLCBPcGVyYSAxMSBhbmQgU2FmYXJpIDUuXG4gIC8vXG4gIGlmICghbmV3IEV2ZW50cygpLl9fcHJvdG9fXykgcHJlZml4ID0gZmFsc2U7XG59XG5cbi8qKlxuICogUmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgZXZlbnQgbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29uY2U9ZmFsc2VdIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEVFKGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHRoaXMuZm4gPSBmbjtcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5vbmNlID0gb25jZSB8fCBmYWxzZTtcbn1cblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZExpc3RlbmVyKGVtaXR0ZXIsIGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IGVtaXR0ZXIsIG9uY2UpXG4gICAgLCBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0pIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gbGlzdGVuZXIsIGVtaXR0ZXIuX2V2ZW50c0NvdW50Kys7XG4gIGVsc2UgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XS5mbikgZW1pdHRlci5fZXZlbnRzW2V2dF0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2UgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBbZW1pdHRlci5fZXZlbnRzW2V2dF0sIGxpc3RlbmVyXTtcblxuICByZXR1cm4gZW1pdHRlcjtcbn1cblxuLyoqXG4gKiBDbGVhciBldmVudCBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZ0IFRoZSBFdmVudCBuYW1lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJFdmVudChlbWl0dGVyLCBldnQpIHtcbiAgaWYgKC0tZW1pdHRlci5fZXZlbnRzQ291bnQgPT09IDApIGVtaXR0ZXIuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgZWxzZSBkZWxldGUgZW1pdHRlci5fZXZlbnRzW2V2dF07XG59XG5cbi8qKlxuICogTWluaW1hbCBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UgdGhhdCBpcyBtb2xkZWQgYWdhaW5zdCB0aGUgTm9kZS5qc1xuICogYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xufVxuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBsaXN0aW5nIHRoZSBldmVudHMgZm9yIHdoaWNoIHRoZSBlbWl0dGVyIGhhcyByZWdpc3RlcmVkXG4gKiBsaXN0ZW5lcnMuXG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICB2YXIgbmFtZXMgPSBbXVxuICAgICwgZXZlbnRzXG4gICAgLCBuYW1lO1xuXG4gIGlmICh0aGlzLl9ldmVudHNDb3VudCA9PT0gMCkgcmV0dXJuIG5hbWVzO1xuXG4gIGZvciAobmFtZSBpbiAoZXZlbnRzID0gdGhpcy5fZXZlbnRzKSkge1xuICAgIGlmIChoYXMuY2FsbChldmVudHMsIG5hbWUpKSBuYW1lcy5wdXNoKHByZWZpeCA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lKTtcbiAgfVxuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgcmV0dXJuIG5hbWVzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGV2ZW50cykpO1xuICB9XG5cbiAgcmV0dXJuIG5hbWVzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtBcnJheX0gVGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgaGFuZGxlcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWhhbmRsZXJzKSByZXR1cm4gW107XG4gIGlmIChoYW5kbGVycy5mbikgcmV0dXJuIFtoYW5kbGVycy5mbl07XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGgsIGVlID0gbmV3IEFycmF5KGwpOyBpIDwgbDsgaSsrKSB7XG4gICAgZWVbaV0gPSBoYW5kbGVyc1tpXS5mbjtcbiAgfVxuXG4gIHJldHVybiBlZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBudW1iZXIgb2YgbGlzdGVuZXJzIGxpc3RlbmluZyB0byBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1iZXIgb2YgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWxpc3RlbmVycykgcmV0dXJuIDA7XG4gIGlmIChsaXN0ZW5lcnMuZm4pIHJldHVybiAxO1xuICByZXR1cm4gbGlzdGVuZXJzLmxlbmd0aDtcbn07XG5cbi8qKlxuICogQ2FsbHMgZWFjaCBvZiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFkIGxpc3RlbmVycywgZWxzZSBgZmFsc2VgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50LCBhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XVxuICAgICwgbGVuID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICwgYXJnc1xuICAgICwgaTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKGxpc3RlbmVycy5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnMuZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgY2FzZSAxOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQpLCB0cnVlO1xuICAgICAgY2FzZSAyOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExKSwgdHJ1ZTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIpLCB0cnVlO1xuICAgICAgY2FzZSA0OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMpLCB0cnVlO1xuICAgICAgY2FzZSA1OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgNjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCwgYTUpLCB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMuZm4uYXBwbHkobGlzdGVuZXJzLmNvbnRleHQsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoXG4gICAgICAsIGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsaXN0ZW5lcnNbaV0ub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzW2ldLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgICBjYXNlIDE6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0KTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMjogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMzogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMik7IGJyZWFrO1xuICAgICAgICBjYXNlIDQ6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIsIGEzKTsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKCFhcmdzKSBmb3IgKGogPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmFwcGx5KGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgZmFsc2UpO1xufTtcblxuLyoqXG4gKiBBZGQgYSBvbmUtdGltZSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZShldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgdHJ1ZSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgbGlzdGVuZXJzIG9mIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IG1hdGNoIHRoaXMgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IGhhdmUgdGhpcyBjb250ZXh0LlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIE9ubHkgcmVtb3ZlIG9uZS10aW1lIGxpc3RlbmVycy5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gdGhpcztcbiAgaWYgKCFmbikge1xuICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKFxuICAgICAgbGlzdGVuZXJzLmZuID09PSBmbiAmJlxuICAgICAgKCFvbmNlIHx8IGxpc3RlbmVycy5vbmNlKSAmJlxuICAgICAgKCFjb250ZXh0IHx8IGxpc3RlbmVycy5jb250ZXh0ID09PSBjb250ZXh0KVxuICAgICkge1xuICAgICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMCwgZXZlbnRzID0gW10sIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBsaXN0ZW5lcnNbaV0uZm4gIT09IGZuIHx8XG4gICAgICAgIChvbmNlICYmICFsaXN0ZW5lcnNbaV0ub25jZSkgfHxcbiAgICAgICAgKGNvbnRleHQgJiYgbGlzdGVuZXJzW2ldLmNvbnRleHQgIT09IGNvbnRleHQpXG4gICAgICApIHtcbiAgICAgICAgZXZlbnRzLnB1c2gobGlzdGVuZXJzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIFJlc2V0IHRoZSBhcnJheSwgb3IgcmVtb3ZlIGl0IGNvbXBsZXRlbHkgaWYgd2UgaGF2ZSBubyBtb3JlIGxpc3RlbmVycy5cbiAgICAvL1xuICAgIGlmIChldmVudHMubGVuZ3RoKSB0aGlzLl9ldmVudHNbZXZ0XSA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBldmVudHNbMF0gOiBldmVudHM7XG4gICAgZWxzZSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBsaXN0ZW5lcnMsIG9yIHRob3NlIG9mIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IFtldmVudF0gVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQ7XG5cbiAgaWYgKGV2ZW50KSB7XG4gICAgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcbiAgICBpZiAodGhpcy5fZXZlbnRzW2V2dF0pIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vL1xuLy8gQWxpYXMgbWV0aG9kcyBuYW1lcyBiZWNhdXNlIHBlb3BsZSByb2xsIGxpa2UgdGhhdC5cbi8vXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgcHJlZml4LlxuLy9cbkV2ZW50RW1pdHRlci5wcmVmaXhlZCA9IHByZWZpeDtcblxuLy9cbi8vIEFsbG93IGBFdmVudEVtaXR0ZXJgIHRvIGJlIGltcG9ydGVkIGFzIG1vZHVsZSBuYW1lc3BhY2UuXG4vL1xuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuLy9cbmlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG1vZHVsZSkge1xuICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbn1cbiIsIid1c2Ugc3RyaWN0Jztcbm1vZHVsZS5leHBvcnRzID0gKHByb21pc2UsIG9uRmluYWxseSkgPT4ge1xuXHRvbkZpbmFsbHkgPSBvbkZpbmFsbHkgfHwgKCgpID0+IHt9KTtcblxuXHRyZXR1cm4gcHJvbWlzZS50aGVuKFxuXHRcdHZhbCA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcblx0XHRcdHJlc29sdmUob25GaW5hbGx5KCkpO1xuXHRcdH0pLnRoZW4oKCkgPT4gdmFsKSxcblx0XHRlcnIgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG5cdFx0XHRyZXNvbHZlKG9uRmluYWxseSgpKTtcblx0XHR9KS50aGVuKCgpID0+IHtcblx0XHRcdHRocm93IGVycjtcblx0XHR9KVxuXHQpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcEZpbmFsbHkgPSByZXF1aXJlKCdwLWZpbmFsbHknKTtcblxuY2xhc3MgVGltZW91dEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG5cdFx0c3VwZXIobWVzc2FnZSk7XG5cdFx0dGhpcy5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG5cdH1cbn1cblxuY29uc3QgcFRpbWVvdXQgPSAocHJvbWlzZSwgbWlsbGlzZWNvbmRzLCBmYWxsYmFjaykgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRpZiAodHlwZW9mIG1pbGxpc2Vjb25kcyAhPT0gJ251bWJlcicgfHwgbWlsbGlzZWNvbmRzIDwgMCkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGBtaWxsaXNlY29uZHNgIHRvIGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG5cdH1cblxuXHRpZiAobWlsbGlzZWNvbmRzID09PSBJbmZpbml0eSkge1xuXHRcdHJlc29sdmUocHJvbWlzZSk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRpZiAodHlwZW9mIGZhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyZXNvbHZlKGZhbGxiYWNrKCkpO1xuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IG1lc3NhZ2UgPSB0eXBlb2YgZmFsbGJhY2sgPT09ICdzdHJpbmcnID8gZmFsbGJhY2sgOiBgUHJvbWlzZSB0aW1lZCBvdXQgYWZ0ZXIgJHttaWxsaXNlY29uZHN9IG1pbGxpc2Vjb25kc2A7XG5cdFx0Y29uc3QgdGltZW91dEVycm9yID0gZmFsbGJhY2sgaW5zdGFuY2VvZiBFcnJvciA/IGZhbGxiYWNrIDogbmV3IFRpbWVvdXRFcnJvcihtZXNzYWdlKTtcblxuXHRcdGlmICh0eXBlb2YgcHJvbWlzZS5jYW5jZWwgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHByb21pc2UuY2FuY2VsKCk7XG5cdFx0fVxuXG5cdFx0cmVqZWN0KHRpbWVvdXRFcnJvcik7XG5cdH0sIG1pbGxpc2Vjb25kcyk7XG5cblx0Ly8gVE9ETzogVXNlIG5hdGl2ZSBgZmluYWxseWAga2V5d29yZCB3aGVuIHRhcmdldGluZyBOb2RlLmpzIDEwXG5cdHBGaW5hbGx5KFxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcm9taXNlL3ByZWZlci1hd2FpdC10by10aGVuXG5cdFx0cHJvbWlzZS50aGVuKHJlc29sdmUsIHJlamVjdCksXG5cdFx0KCkgPT4ge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XHR9XG5cdCk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBwVGltZW91dDtcbi8vIFRPRE86IFJlbW92ZSB0aGlzIGZvciB0aGUgbmV4dCBtYWpvciByZWxlYXNlXG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gcFRpbWVvdXQ7XG5cbm1vZHVsZS5leHBvcnRzLlRpbWVvdXRFcnJvciA9IFRpbWVvdXRFcnJvcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gUG9ydCBvZiBsb3dlcl9ib3VuZCBmcm9tIGh0dHBzOi8vZW4uY3BwcmVmZXJlbmNlLmNvbS93L2NwcC9hbGdvcml0aG0vbG93ZXJfYm91bmRcbi8vIFVzZWQgdG8gY29tcHV0ZSBpbnNlcnRpb24gaW5kZXggdG8ga2VlcCBxdWV1ZSBzb3J0ZWQgYWZ0ZXIgaW5zZXJ0aW9uXG5mdW5jdGlvbiBsb3dlckJvdW5kKGFycmF5LCB2YWx1ZSwgY29tcGFyYXRvcikge1xuICAgIGxldCBmaXJzdCA9IDA7XG4gICAgbGV0IGNvdW50ID0gYXJyYXkubGVuZ3RoO1xuICAgIHdoaWxlIChjb3VudCA+IDApIHtcbiAgICAgICAgY29uc3Qgc3RlcCA9IChjb3VudCAvIDIpIHwgMDtcbiAgICAgICAgbGV0IGl0ID0gZmlyc3QgKyBzdGVwO1xuICAgICAgICBpZiAoY29tcGFyYXRvcihhcnJheVtpdF0sIHZhbHVlKSA8PSAwKSB7XG4gICAgICAgICAgICBmaXJzdCA9ICsraXQ7XG4gICAgICAgICAgICBjb3VudCAtPSBzdGVwICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvdW50ID0gc3RlcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmlyc3Q7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBsb3dlckJvdW5kO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBsb3dlcl9ib3VuZF8xID0gcmVxdWlyZShcIi4vbG93ZXItYm91bmRcIik7XG5jbGFzcyBQcmlvcml0eVF1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcXVldWUgPSBbXTtcbiAgICB9XG4gICAgZW5xdWV1ZShydW4sIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBwcmlvcml0eTogMCB9LCBvcHRpb25zKTtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHtcbiAgICAgICAgICAgIHByaW9yaXR5OiBvcHRpb25zLnByaW9yaXR5LFxuICAgICAgICAgICAgcnVuXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnNpemUgJiYgdGhpcy5fcXVldWVbdGhpcy5zaXplIC0gMV0ucHJpb3JpdHkgPj0gb3B0aW9ucy5wcmlvcml0eSkge1xuICAgICAgICAgICAgdGhpcy5fcXVldWUucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IGxvd2VyX2JvdW5kXzEuZGVmYXVsdCh0aGlzLl9xdWV1ZSwgZWxlbWVudCwgKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KTtcbiAgICAgICAgdGhpcy5fcXVldWUuc3BsaWNlKGluZGV4LCAwLCBlbGVtZW50KTtcbiAgICB9XG4gICAgZGVxdWV1ZSgpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuX3F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIHJldHVybiBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0ucnVuO1xuICAgIH1cbiAgICBmaWx0ZXIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVldWUuZmlsdGVyKChlbGVtZW50KSA9PiBlbGVtZW50LnByaW9yaXR5ID09PSBvcHRpb25zLnByaW9yaXR5KS5tYXAoKGVsZW1lbnQpID0+IGVsZW1lbnQucnVuKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWV1ZS5sZW5ndGg7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gUHJpb3JpdHlRdWV1ZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIik7XG5jb25zdCBwX3RpbWVvdXRfMSA9IHJlcXVpcmUoXCJwLXRpbWVvdXRcIik7XG5jb25zdCBwcmlvcml0eV9xdWV1ZV8xID0gcmVxdWlyZShcIi4vcHJpb3JpdHktcXVldWVcIik7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG5jb25zdCBlbXB0eSA9ICgpID0+IHsgfTtcbmNvbnN0IHRpbWVvdXRFcnJvciA9IG5ldyBwX3RpbWVvdXRfMS5UaW1lb3V0RXJyb3IoKTtcbi8qKlxuUHJvbWlzZSBxdWV1ZSB3aXRoIGNvbmN1cnJlbmN5IGNvbnRyb2wuXG4qL1xuY2xhc3MgUFF1ZXVlIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5faW50ZXJ2YWxDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuX2ludGVydmFsRW5kID0gMDtcbiAgICAgICAgdGhpcy5fcGVuZGluZ0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZUVtcHR5ID0gZW1wdHk7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVJZGxlID0gZW1wdHk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnNcbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBjYXJyeW92ZXJDb25jdXJyZW5jeUNvdW50OiBmYWxzZSwgaW50ZXJ2YWxDYXA6IEluZmluaXR5LCBpbnRlcnZhbDogMCwgY29uY3VycmVuY3k6IEluZmluaXR5LCBhdXRvU3RhcnQ6IHRydWUsIHF1ZXVlQ2xhc3M6IHByaW9yaXR5X3F1ZXVlXzEuZGVmYXVsdCB9LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCEodHlwZW9mIG9wdGlvbnMuaW50ZXJ2YWxDYXAgPT09ICdudW1iZXInICYmIG9wdGlvbnMuaW50ZXJ2YWxDYXAgPj0gMSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIFxcYGludGVydmFsQ2FwXFxgIHRvIGJlIGEgbnVtYmVyIGZyb20gMSBhbmQgdXAsIGdvdCBcXGAkeyhfYiA9IChfYSA9IG9wdGlvbnMuaW50ZXJ2YWxDYXApID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b1N0cmluZygpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAnJ31cXGAgKCR7dHlwZW9mIG9wdGlvbnMuaW50ZXJ2YWxDYXB9KWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmludGVydmFsID09PSB1bmRlZmluZWQgfHwgIShOdW1iZXIuaXNGaW5pdGUob3B0aW9ucy5pbnRlcnZhbCkgJiYgb3B0aW9ucy5pbnRlcnZhbCA+PSAwKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgXFxgaW50ZXJ2YWxcXGAgdG8gYmUgYSBmaW5pdGUgbnVtYmVyID49IDAsIGdvdCBcXGAkeyhfZCA9IChfYyA9IG9wdGlvbnMuaW50ZXJ2YWwpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50b1N0cmluZygpKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAnJ31cXGAgKCR7dHlwZW9mIG9wdGlvbnMuaW50ZXJ2YWx9KWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NhcnJ5b3ZlckNvbmN1cnJlbmN5Q291bnQgPSBvcHRpb25zLmNhcnJ5b3ZlckNvbmN1cnJlbmN5Q291bnQ7XG4gICAgICAgIHRoaXMuX2lzSW50ZXJ2YWxJZ25vcmVkID0gb3B0aW9ucy5pbnRlcnZhbENhcCA9PT0gSW5maW5pdHkgfHwgb3B0aW9ucy5pbnRlcnZhbCA9PT0gMDtcbiAgICAgICAgdGhpcy5faW50ZXJ2YWxDYXAgPSBvcHRpb25zLmludGVydmFsQ2FwO1xuICAgICAgICB0aGlzLl9pbnRlcnZhbCA9IG9wdGlvbnMuaW50ZXJ2YWw7XG4gICAgICAgIHRoaXMuX3F1ZXVlID0gbmV3IG9wdGlvbnMucXVldWVDbGFzcygpO1xuICAgICAgICB0aGlzLl9xdWV1ZUNsYXNzID0gb3B0aW9ucy5xdWV1ZUNsYXNzO1xuICAgICAgICB0aGlzLmNvbmN1cnJlbmN5ID0gb3B0aW9ucy5jb25jdXJyZW5jeTtcbiAgICAgICAgdGhpcy5fdGltZW91dCA9IG9wdGlvbnMudGltZW91dDtcbiAgICAgICAgdGhpcy5fdGhyb3dPblRpbWVvdXQgPSBvcHRpb25zLnRocm93T25UaW1lb3V0ID09PSB0cnVlO1xuICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IG9wdGlvbnMuYXV0b1N0YXJ0ID09PSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IF9kb2VzSW50ZXJ2YWxBbGxvd0Fub3RoZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0ludGVydmFsSWdub3JlZCB8fCB0aGlzLl9pbnRlcnZhbENvdW50IDwgdGhpcy5faW50ZXJ2YWxDYXA7XG4gICAgfVxuICAgIGdldCBfZG9lc0NvbmN1cnJlbnRBbGxvd0Fub3RoZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wZW5kaW5nQ291bnQgPCB0aGlzLl9jb25jdXJyZW5jeTtcbiAgICB9XG4gICAgX25leHQoKSB7XG4gICAgICAgIHRoaXMuX3BlbmRpbmdDb3VudC0tO1xuICAgICAgICB0aGlzLl90cnlUb1N0YXJ0QW5vdGhlcigpO1xuICAgICAgICB0aGlzLmVtaXQoJ25leHQnKTtcbiAgICB9XG4gICAgX3Jlc29sdmVQcm9taXNlcygpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZUVtcHR5KCk7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVFbXB0eSA9IGVtcHR5O1xuICAgICAgICBpZiAodGhpcy5fcGVuZGluZ0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlSWRsZSgpO1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZUlkbGUgPSBlbXB0eTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaWRsZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9vblJlc3VtZUludGVydmFsKCkge1xuICAgICAgICB0aGlzLl9vbkludGVydmFsKCk7XG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVJbnRlcnZhbElmTmVlZGVkKCk7XG4gICAgICAgIHRoaXMuX3RpbWVvdXRJZCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgX2lzSW50ZXJ2YWxQYXVzZWQoKSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGlmICh0aGlzLl9pbnRlcnZhbElkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gdGhpcy5faW50ZXJ2YWxFbmQgLSBub3c7XG4gICAgICAgICAgICBpZiAoZGVsYXkgPCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gQWN0IGFzIHRoZSBpbnRlcnZhbCB3YXMgZG9uZVxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gcmVzdW1lIGl0IGhlcmUgYmVjYXVzZSBpdCB3aWxsIGJlIHJlc3VtZWQgb24gbGluZSAxNjBcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnRlcnZhbENvdW50ID0gKHRoaXMuX2NhcnJ5b3ZlckNvbmN1cnJlbmN5Q291bnQpID8gdGhpcy5fcGVuZGluZ0NvdW50IDogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFjdCBhcyB0aGUgaW50ZXJ2YWwgaXMgcGVuZGluZ1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl90aW1lb3V0SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uUmVzdW1lSW50ZXJ2YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIF90cnlUb1N0YXJ0QW5vdGhlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXVlLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIC8vIFdlIGNhbiBjbGVhciB0aGUgaW50ZXJ2YWwgKFwicGF1c2VcIilcbiAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2UgY2FuIHJlZG8gaXQgbGF0ZXIgKFwicmVzdW1lXCIpXG4gICAgICAgICAgICBpZiAodGhpcy5faW50ZXJ2YWxJZCkge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9pbnRlcnZhbElkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZVByb21pc2VzKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgICAgICAgY29uc3QgY2FuSW5pdGlhbGl6ZUludGVydmFsID0gIXRoaXMuX2lzSW50ZXJ2YWxQYXVzZWQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9kb2VzSW50ZXJ2YWxBbGxvd0Fub3RoZXIgJiYgdGhpcy5fZG9lc0NvbmN1cnJlbnRBbGxvd0Fub3RoZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSB0aGlzLl9xdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFqb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIGpvYigpO1xuICAgICAgICAgICAgICAgIGlmIChjYW5Jbml0aWFsaXplSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZUludGVydmFsSWZOZWVkZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBfaW5pdGlhbGl6ZUludGVydmFsSWZOZWVkZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0ludGVydmFsSWdub3JlZCB8fCB0aGlzLl9pbnRlcnZhbElkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25JbnRlcnZhbCgpO1xuICAgICAgICB9LCB0aGlzLl9pbnRlcnZhbCk7XG4gICAgICAgIHRoaXMuX2ludGVydmFsRW5kID0gRGF0ZS5ub3coKSArIHRoaXMuX2ludGVydmFsO1xuICAgIH1cbiAgICBfb25JbnRlcnZhbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2ludGVydmFsQ291bnQgPT09IDAgJiYgdGhpcy5fcGVuZGluZ0NvdW50ID09PSAwICYmIHRoaXMuX2ludGVydmFsSWQpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICB0aGlzLl9pbnRlcnZhbElkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ludGVydmFsQ291bnQgPSB0aGlzLl9jYXJyeW92ZXJDb25jdXJyZW5jeUNvdW50ID8gdGhpcy5fcGVuZGluZ0NvdW50IDogMDtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEV4ZWN1dGVzIGFsbCBxdWV1ZWQgZnVuY3Rpb25zIHVudGlsIGl0IHJlYWNoZXMgdGhlIGxpbWl0LlxuICAgICovXG4gICAgX3Byb2Nlc3NRdWV1ZSgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgICAgIHdoaWxlICh0aGlzLl90cnlUb1N0YXJ0QW5vdGhlcigpKSB7IH1cbiAgICB9XG4gICAgZ2V0IGNvbmN1cnJlbmN5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29uY3VycmVuY3k7XG4gICAgfVxuICAgIHNldCBjb25jdXJyZW5jeShuZXdDb25jdXJyZW5jeSkge1xuICAgICAgICBpZiAoISh0eXBlb2YgbmV3Q29uY3VycmVuY3kgPT09ICdudW1iZXInICYmIG5ld0NvbmN1cnJlbmN5ID49IDEpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcXGBjb25jdXJyZW5jeVxcYCB0byBiZSBhIG51bWJlciBmcm9tIDEgYW5kIHVwLCBnb3QgXFxgJHtuZXdDb25jdXJyZW5jeX1cXGAgKCR7dHlwZW9mIG5ld0NvbmN1cnJlbmN5fSlgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jb25jdXJyZW5jeSA9IG5ld0NvbmN1cnJlbmN5O1xuICAgICAgICB0aGlzLl9wcm9jZXNzUXVldWUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQWRkcyBhIHN5bmMgb3IgYXN5bmMgdGFzayB0byB0aGUgcXVldWUuIEFsd2F5cyByZXR1cm5zIGEgcHJvbWlzZS5cbiAgICAqL1xuICAgIGFzeW5jIGFkZChmbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBydW4gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZ0NvdW50Kys7XG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWxDb3VudCsrO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9ICh0aGlzLl90aW1lb3V0ID09PSB1bmRlZmluZWQgJiYgb3B0aW9ucy50aW1lb3V0ID09PSB1bmRlZmluZWQpID8gZm4oKSA6IHBfdGltZW91dF8xLmRlZmF1bHQoUHJvbWlzZS5yZXNvbHZlKGZuKCkpLCAob3B0aW9ucy50aW1lb3V0ID09PSB1bmRlZmluZWQgPyB0aGlzLl90aW1lb3V0IDogb3B0aW9ucy50aW1lb3V0KSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGhyb3dPblRpbWVvdXQgPT09IHVuZGVmaW5lZCA/IHRoaXMuX3Rocm93T25UaW1lb3V0IDogb3B0aW9ucy50aHJvd09uVGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh0aW1lb3V0RXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXdhaXQgb3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX25leHQoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLl9xdWV1ZS5lbnF1ZXVlKHJ1biwgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLl90cnlUb1N0YXJ0QW5vdGhlcigpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZGQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFNhbWUgYXMgYC5hZGQoKWAsIGJ1dCBhY2NlcHRzIGFuIGFycmF5IG9mIHN5bmMgb3IgYXN5bmMgZnVuY3Rpb25zLlxuXG4gICAgQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgZnVuY3Rpb25zIGFyZSByZXNvbHZlZC5cbiAgICAqL1xuICAgIGFzeW5jIGFkZEFsbChmdW5jdGlvbnMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGZ1bmN0aW9ucy5tYXAoYXN5bmMgKGZ1bmN0aW9uXykgPT4gdGhpcy5hZGQoZnVuY3Rpb25fLCBvcHRpb25zKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBTdGFydCAob3IgcmVzdW1lKSBleGVjdXRpbmcgZW5xdWV1ZWQgdGFza3Mgd2l0aGluIGNvbmN1cnJlbmN5IGxpbWl0LiBObyBuZWVkIHRvIGNhbGwgdGhpcyBpZiBxdWV1ZSBpcyBub3QgcGF1c2VkICh2aWEgYG9wdGlvbnMuYXV0b1N0YXJ0ID0gZmFsc2VgIG9yIGJ5IGAucGF1c2UoKWAgbWV0aG9kLilcbiAgICAqL1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wcm9jZXNzUXVldWUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFB1dCBxdWV1ZSBleGVjdXRpb24gb24gaG9sZC5cbiAgICAqL1xuICAgIHBhdXNlKCkge1xuICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIENsZWFyIHRoZSBxdWV1ZS5cbiAgICAqL1xuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9xdWV1ZSA9IG5ldyB0aGlzLl9xdWV1ZUNsYXNzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENhbiBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMuIFVzZWZ1bCBpZiB5b3UgZm9yIGV4YW1wbGUgYWRkIGFkZGl0aW9uYWwgaXRlbXMgYXQgYSBsYXRlciB0aW1lLlxuXG4gICAgQHJldHVybnMgQSBwcm9taXNlIHRoYXQgc2V0dGxlcyB3aGVuIHRoZSBxdWV1ZSBiZWNvbWVzIGVtcHR5LlxuICAgICovXG4gICAgYXN5bmMgb25FbXB0eSgpIHtcbiAgICAgICAgLy8gSW5zdGFudGx5IHJlc29sdmUgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5XG4gICAgICAgIGlmICh0aGlzLl9xdWV1ZS5zaXplID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdSZXNvbHZlID0gdGhpcy5fcmVzb2x2ZUVtcHR5O1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZUVtcHR5ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nUmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZGlmZmVyZW5jZSB3aXRoIGAub25FbXB0eWAgaXMgdGhhdCBgLm9uSWRsZWAgZ3VhcmFudGVlcyB0aGF0IGFsbCB3b3JrIGZyb20gdGhlIHF1ZXVlIGhhcyBmaW5pc2hlZC4gYC5vbkVtcHR5YCBtZXJlbHkgc2lnbmFscyB0aGF0IHRoZSBxdWV1ZSBpcyBlbXB0eSwgYnV0IGl0IGNvdWxkIG1lYW4gdGhhdCBzb21lIHByb21pc2VzIGhhdmVuJ3QgY29tcGxldGVkIHlldC5cblxuICAgIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHNldHRsZXMgd2hlbiB0aGUgcXVldWUgYmVjb21lcyBlbXB0eSwgYW5kIGFsbCBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZDsgYHF1ZXVlLnNpemUgPT09IDAgJiYgcXVldWUucGVuZGluZyA9PT0gMGAuXG4gICAgKi9cbiAgICBhc3luYyBvbklkbGUoKSB7XG4gICAgICAgIC8vIEluc3RhbnRseSByZXNvbHZlIGlmIG5vbmUgcGVuZGluZyBhbmQgaWYgbm90aGluZyBlbHNlIGlzIHF1ZXVlZFxuICAgICAgICBpZiAodGhpcy5fcGVuZGluZ0NvdW50ID09PSAwICYmIHRoaXMuX3F1ZXVlLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1Jlc29sdmUgPSB0aGlzLl9yZXNvbHZlSWRsZTtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVJZGxlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nUmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBTaXplIG9mIHRoZSBxdWV1ZS5cbiAgICAqL1xuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVldWUuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgU2l6ZSBvZiB0aGUgcXVldWUsIGZpbHRlcmVkIGJ5IHRoZSBnaXZlbiBvcHRpb25zLlxuXG4gICAgRm9yIGV4YW1wbGUsIHRoaXMgY2FuIGJlIHVzZWQgdG8gZmluZCB0aGUgbnVtYmVyIG9mIGl0ZW1zIHJlbWFpbmluZyBpbiB0aGUgcXVldWUgd2l0aCBhIHNwZWNpZmljIHByaW9yaXR5IGxldmVsLlxuICAgICovXG4gICAgc2l6ZUJ5KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vbm8tZm4tcmVmZXJlbmNlLWluLWl0ZXJhdG9yXG4gICAgICAgIHJldHVybiB0aGlzLl9xdWV1ZS5maWx0ZXIob3B0aW9ucykubGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICBOdW1iZXIgb2YgcGVuZGluZyBwcm9taXNlcy5cbiAgICAqL1xuICAgIGdldCBwZW5kaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVuZGluZ0NvdW50O1xuICAgIH1cbiAgICAvKipcbiAgICBXaGV0aGVyIHRoZSBxdWV1ZSBpcyBjdXJyZW50bHkgcGF1c2VkLlxuICAgICovXG4gICAgZ2V0IGlzUGF1c2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNQYXVzZWQ7XG4gICAgfVxuICAgIGdldCB0aW1lb3V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGltZW91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgU2V0IHRoZSB0aW1lb3V0IGZvciBmdXR1cmUgb3BlcmF0aW9ucy5cbiAgICAqL1xuICAgIHNldCB0aW1lb3V0KG1pbGxpc2Vjb25kcykge1xuICAgICAgICB0aGlzLl90aW1lb3V0ID0gbWlsbGlzZWNvbmRzO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IFBRdWV1ZTtcbiIsImltcG9ydCBwUmV0cnkgZnJvbSBcInAtcmV0cnlcIjtcbmltcG9ydCBQUXVldWVNb2QgZnJvbSBcInAtcXVldWVcIjtcbmNvbnN0IFNUQVRVU19OT19SRVRSWSA9IFtcbiAgICA0MDAsXG4gICAgNDAxLFxuICAgIDQwMyxcbiAgICA0MDQsXG4gICAgNDA1LFxuICAgIDQwNixcbiAgICA0MDcsXG4gICAgNDA4LFxuICAgIDQwOSwgLy8gQ29uZmxpY3Rcbl07XG4vKipcbiAqIEEgY2xhc3MgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIGFzeW5jIGNhbGxzIHdpdGggY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBtYWtpbmcgY2FsbHMgdG8gYW55IGtpbmQgb2YgXCJleHBlbnNpdmVcIiBleHRlcm5hbCByZXNvdXJjZSxcbiAqIGJlIGl0IGJlY2F1c2UgaXQncyByYXRlLWxpbWl0ZWQsIHN1YmplY3QgdG8gbmV0d29yayBpc3N1ZXMsIGV0Yy5cbiAqXG4gKiBDb25jdXJyZW50IGNhbGxzIGFyZSBsaW1pdGVkIGJ5IHRoZSBgbWF4Q29uY3VycmVuY3lgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHNcbiAqIHRvIGBJbmZpbml0eWAuIFRoaXMgbWVhbnMgdGhhdCBieSBkZWZhdWx0LCBhbGwgY2FsbHMgd2lsbCBiZSBtYWRlIGluIHBhcmFsbGVsLlxuICpcbiAqIFJldHJpZXMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhSZXRyaWVzYCBwYXJhbWV0ZXIsIHdoaWNoIGRlZmF1bHRzIHRvIDYuIFRoaXNcbiAqIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgZWFjaCBjYWxsIHdpbGwgYmUgcmV0cmllZCB1cCB0byA2IHRpbWVzLCB3aXRoIGFuXG4gKiBleHBvbmVudGlhbCBiYWNrb2ZmIGJldHdlZW4gZWFjaCBhdHRlbXB0LlxuICovXG5leHBvcnQgY2xhc3MgQXN5bmNDYWxsZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhDb25jdXJyZW5jeVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhSZXRyaWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInF1ZXVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWF4Q29uY3VycmVuY3kgPSBwYXJhbXMubWF4Q29uY3VycmVuY3kgPz8gSW5maW5pdHk7XG4gICAgICAgIHRoaXMubWF4UmV0cmllcyA9IHBhcmFtcy5tYXhSZXRyaWVzID8/IDY7XG4gICAgICAgIGNvbnN0IFBRdWV1ZSA9IFwiZGVmYXVsdFwiIGluIFBRdWV1ZU1vZCA/IFBRdWV1ZU1vZC5kZWZhdWx0IDogUFF1ZXVlTW9kO1xuICAgICAgICB0aGlzLnF1ZXVlID0gbmV3IFBRdWV1ZSh7IGNvbmN1cnJlbmN5OiB0aGlzLm1heENvbmN1cnJlbmN5IH0pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNhbGwoY2FsbGFibGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuYWRkKCgpID0+IHBSZXRyeSgoKSA9PiBjYWxsYWJsZSguLi5hcmdzKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwge1xuICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0KGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkNhbmNlbFwiKSB8fFxuICAgICAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJUaW1lb3V0RXJyb3JcIikgfHxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKFwiQWJvcnRFcnJvclwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3I/LmNvZGUgPT09IFwiRUNPTk5BQk9SVEVEXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gZXJyb3I/LnJlc3BvbnNlPy5zdGF0dXM7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyAmJiBTVEFUVVNfTk9fUkVUUlkuaW5jbHVkZXMoK3N0YXR1cykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJldHJpZXM6IHRoaXMubWF4UmV0cmllcyxcbiAgICAgICAgICAgIHJhbmRvbWl6ZTogdHJ1ZSxcbiAgICAgICAgICAgIC8vIElmIG5lZWRlZCB3ZSBjYW4gY2hhbmdlIHNvbWUgb2YgdGhlIGRlZmF1bHRzIGhlcmUsXG4gICAgICAgICAgICAvLyBidXQgdGhleSdyZSBxdWl0ZSBzZW5zaWJsZS5cbiAgICAgICAgfSksIHsgdGhyb3dPblRpbWVvdXQ6IHRydWUgfSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY2FsbFdpdGhPcHRpb25zKG9wdGlvbnMsIGNhbGxhYmxlLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIE5vdGUgdGhpcyBkb2Vzbid0IGNhbmNlbCB0aGUgdW5kZXJseWluZyByZXF1ZXN0LFxuICAgICAgICAvLyB3aGVuIGF2YWlsYWJsZSBwcmVmZXIgdG8gdXNlIHRoZSBzaWduYWwgb3B0aW9uIG9mIHRoZSB1bmRlcmx5aW5nIGNhbGxcbiAgICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGwoY2FsbGFibGUsIC4uLmFyZ3MpLFxuICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zaWduYWw/LmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiQWJvcnRFcnJvclwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyk7XG4gICAgfVxuICAgIGZldGNoKC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbCgoKSA9PiBmZXRjaCguLi5hcmdzKS50aGVuKChyZXMpID0+IChyZXMub2sgPyByZXMgOiBQcm9taXNlLnJlamVjdChyZXMpKSkpO1xuICAgIH1cbn1cbiIsInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IHtcbiAgX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuZXhwb3J0IHsgX19wdWJsaWNGaWVsZCB9O1xuIiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gZ2V0TGVucyAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZFxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9iZWF0Z2FtbWl0L2Jhc2U2NC1qcy9pc3N1ZXMvNDJcbiAgdmFyIHZhbGlkTGVuID0gYjY0LmluZGV4T2YoJz0nKVxuICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlblxuXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuXG4gICAgPyAwXG4gICAgOiA0IC0gKHZhbGlkTGVuICUgNClcblxuICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dXG59XG5cbi8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHtcbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG5cbiAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSlcblxuICB2YXIgY3VyQnl0ZSA9IDBcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIHZhciBsZW4gPSBwbGFjZUhvbGRlcnNMZW4gPiAwXG4gICAgPyB2YWxpZExlbiAtIDRcbiAgICA6IHZhbGlkTGVuXG5cbiAgdmFyIGlcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8XG4gICAgICByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMikge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNClcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDEpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG4gIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArXG4gICAgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gJiAweDNGXVxufVxuXG5mdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHRtcFxuICB2YXIgb3V0cHV0ID0gW11cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPVxuICAgICAgKCh1aW50OFtpXSA8PCAxNikgJiAweEZGMDAwMCkgK1xuICAgICAgKCh1aW50OFtpICsgMV0gPDwgOCkgJiAweEZGMDApICtcbiAgICAgICh1aW50OFtpICsgMl0gJiAweEZGKVxuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJylcbn1cblxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICB2YXIgcGFydHMgPSBbXVxuICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblxuICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aCkpKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXSArXG4gICAgICAnPT0nXG4gICAgKVxuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDEwXSArXG4gICAgICBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl0gK1xuICAgICAgJz0nXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG4iLCJpbXBvcnQgeyBfX3B1YmxpY0ZpZWxkIH0gZnJvbSAnLi9jaHVuay1YWFBHWkhXWi5qcyc7XG5pbXBvcnQgYmFzZTY0IGZyb20gJ2Jhc2U2NC1qcyc7XG5cbi8vIHNyYy91dGlscy50c1xuZnVuY3Rpb24gbmV2ZXIoXykge1xufVxuZnVuY3Rpb24gYnl0ZVBhaXJNZXJnZShwaWVjZSwgcmFua3MpIHtcbiAgbGV0IHBhcnRzID0gQXJyYXkuZnJvbShcbiAgICB7IGxlbmd0aDogcGllY2UubGVuZ3RoIH0sXG4gICAgKF8sIGkpID0+ICh7IHN0YXJ0OiBpLCBlbmQ6IGkgKyAxIH0pXG4gICk7XG4gIHdoaWxlIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgbGV0IG1pblJhbmsgPSBudWxsO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBjb25zdCBzbGljZSA9IHBpZWNlLnNsaWNlKHBhcnRzW2ldLnN0YXJ0LCBwYXJ0c1tpICsgMV0uZW5kKTtcbiAgICAgIGNvbnN0IHJhbmsgPSByYW5rcy5nZXQoc2xpY2Uuam9pbihcIixcIikpO1xuICAgICAgaWYgKHJhbmsgPT0gbnVsbClcbiAgICAgICAgY29udGludWU7XG4gICAgICBpZiAobWluUmFuayA9PSBudWxsIHx8IHJhbmsgPCBtaW5SYW5rWzBdKSB7XG4gICAgICAgIG1pblJhbmsgPSBbcmFuaywgaV07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtaW5SYW5rICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGkgPSBtaW5SYW5rWzFdO1xuICAgICAgcGFydHNbaV0gPSB7IHN0YXJ0OiBwYXJ0c1tpXS5zdGFydCwgZW5kOiBwYXJ0c1tpICsgMV0uZW5kIH07XG4gICAgICBwYXJ0cy5zcGxpY2UoaSArIDEsIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhcnRzO1xufVxuZnVuY3Rpb24gYnl0ZVBhaXJFbmNvZGUocGllY2UsIHJhbmtzKSB7XG4gIGlmIChwaWVjZS5sZW5ndGggPT09IDEpXG4gICAgcmV0dXJuIFtyYW5rcy5nZXQocGllY2Uuam9pbihcIixcIikpXTtcbiAgcmV0dXJuIGJ5dGVQYWlyTWVyZ2UocGllY2UsIHJhbmtzKS5tYXAoKHApID0+IHJhbmtzLmdldChwaWVjZS5zbGljZShwLnN0YXJ0LCBwLmVuZCkuam9pbihcIixcIikpKS5maWx0ZXIoKHgpID0+IHggIT0gbnVsbCk7XG59XG5mdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFxcXF4kKis/LigpfFtcXF17fV0vZywgXCJcXFxcJCZcIik7XG59XG52YXIgX1Rpa3Rva2VuID0gY2xhc3Mge1xuICAvKiogQGludGVybmFsICovXG4gIHNwZWNpYWxUb2tlbnM7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgaW52ZXJzZVNwZWNpYWxUb2tlbnM7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcGF0U3RyO1xuICAvKiogQGludGVybmFsICovXG4gIHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgdGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICByYW5rTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICB0ZXh0TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgY29uc3RydWN0b3IocmFua3MsIGV4dGVuZGVkU3BlY2lhbFRva2Vucykge1xuICAgIHRoaXMucGF0U3RyID0gcmFua3MucGF0X3N0cjtcbiAgICBjb25zdCB1bmNvbXByZXNzZWQgPSByYW5rcy5icGVfcmFua3Muc3BsaXQoXCJcXG5cIikuZmlsdGVyKEJvb2xlYW4pLnJlZHVjZSgobWVtbywgeCkgPT4ge1xuICAgICAgY29uc3QgW18sIG9mZnNldFN0ciwgLi4udG9rZW5zXSA9IHguc3BsaXQoXCIgXCIpO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gTnVtYmVyLnBhcnNlSW50KG9mZnNldFN0ciwgMTApO1xuICAgICAgdG9rZW5zLmZvckVhY2goKHRva2VuLCBpKSA9PiBtZW1vW3Rva2VuXSA9IG9mZnNldCArIGkpO1xuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfSwge30pO1xuICAgIGZvciAoY29uc3QgW3Rva2VuLCByYW5rXSBvZiBPYmplY3QuZW50cmllcyh1bmNvbXByZXNzZWQpKSB7XG4gICAgICBjb25zdCBieXRlcyA9IGJhc2U2NC50b0J5dGVBcnJheSh0b2tlbik7XG4gICAgICB0aGlzLnJhbmtNYXAuc2V0KGJ5dGVzLmpvaW4oXCIsXCIpLCByYW5rKTtcbiAgICAgIHRoaXMudGV4dE1hcC5zZXQocmFuaywgYnl0ZXMpO1xuICAgIH1cbiAgICB0aGlzLnNwZWNpYWxUb2tlbnMgPSB7IC4uLnJhbmtzLnNwZWNpYWxfdG9rZW5zLCAuLi5leHRlbmRlZFNwZWNpYWxUb2tlbnMgfTtcbiAgICB0aGlzLmludmVyc2VTcGVjaWFsVG9rZW5zID0gT2JqZWN0LmVudHJpZXModGhpcy5zcGVjaWFsVG9rZW5zKS5yZWR1Y2UoKG1lbW8sIFt0ZXh0LCByYW5rXSkgPT4ge1xuICAgICAgbWVtb1tyYW5rXSA9IHRoaXMudGV4dEVuY29kZXIuZW5jb2RlKHRleHQpO1xuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfSwge30pO1xuICB9XG4gIGVuY29kZSh0ZXh0LCBhbGxvd2VkU3BlY2lhbCA9IFtdLCBkaXNhbGxvd2VkU3BlY2lhbCA9IFwiYWxsXCIpIHtcbiAgICBjb25zdCByZWdleGVzID0gbmV3IFJlZ0V4cCh0aGlzLnBhdFN0ciwgXCJ1Z1wiKTtcbiAgICBjb25zdCBzcGVjaWFsUmVnZXggPSBfVGlrdG9rZW4uc3BlY2lhbFRva2VuUmVnZXgoXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnNwZWNpYWxUb2tlbnMpXG4gICAgKTtcbiAgICBjb25zdCByZXQgPSBbXTtcbiAgICBjb25zdCBhbGxvd2VkU3BlY2lhbFNldCA9IG5ldyBTZXQoXG4gICAgICBhbGxvd2VkU3BlY2lhbCA9PT0gXCJhbGxcIiA/IE9iamVjdC5rZXlzKHRoaXMuc3BlY2lhbFRva2VucykgOiBhbGxvd2VkU3BlY2lhbFxuICAgICk7XG4gICAgY29uc3QgZGlzYWxsb3dlZFNwZWNpYWxTZXQgPSBuZXcgU2V0KFxuICAgICAgZGlzYWxsb3dlZFNwZWNpYWwgPT09IFwiYWxsXCIgPyBPYmplY3Qua2V5cyh0aGlzLnNwZWNpYWxUb2tlbnMpLmZpbHRlcihcbiAgICAgICAgKHgpID0+ICFhbGxvd2VkU3BlY2lhbFNldC5oYXMoeClcbiAgICAgICkgOiBkaXNhbGxvd2VkU3BlY2lhbFxuICAgICk7XG4gICAgaWYgKGRpc2FsbG93ZWRTcGVjaWFsU2V0LnNpemUgPiAwKSB7XG4gICAgICBjb25zdCBkaXNhbGxvd2VkU3BlY2lhbFJlZ2V4ID0gX1Rpa3Rva2VuLnNwZWNpYWxUb2tlblJlZ2V4KFtcbiAgICAgICAgLi4uZGlzYWxsb3dlZFNwZWNpYWxTZXRcbiAgICAgIF0pO1xuICAgICAgY29uc3Qgc3BlY2lhbE1hdGNoID0gdGV4dC5tYXRjaChkaXNhbGxvd2VkU3BlY2lhbFJlZ2V4KTtcbiAgICAgIGlmIChzcGVjaWFsTWF0Y2ggIT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFRoZSB0ZXh0IGNvbnRhaW5zIGEgc3BlY2lhbCB0b2tlbiB0aGF0IGlzIG5vdCBhbGxvd2VkOiAke3NwZWNpYWxNYXRjaFswXX1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBzdGFydCA9IDA7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGxldCBuZXh0U3BlY2lhbCA9IG51bGw7XG4gICAgICBsZXQgc3RhcnRGaW5kID0gc3RhcnQ7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzcGVjaWFsUmVnZXgubGFzdEluZGV4ID0gc3RhcnRGaW5kO1xuICAgICAgICBuZXh0U3BlY2lhbCA9IHNwZWNpYWxSZWdleC5leGVjKHRleHQpO1xuICAgICAgICBpZiAobmV4dFNwZWNpYWwgPT0gbnVsbCB8fCBhbGxvd2VkU3BlY2lhbFNldC5oYXMobmV4dFNwZWNpYWxbMF0pKVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBzdGFydEZpbmQgPSBuZXh0U3BlY2lhbC5pbmRleCArIDE7XG4gICAgICB9XG4gICAgICBjb25zdCBlbmQgPSBuZXh0U3BlY2lhbD8uaW5kZXggPz8gdGV4dC5sZW5ndGg7XG4gICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIHRleHQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpLm1hdGNoQWxsKHJlZ2V4ZXMpKSB7XG4gICAgICAgIGNvbnN0IHBpZWNlID0gdGhpcy50ZXh0RW5jb2Rlci5lbmNvZGUobWF0Y2hbMF0pO1xuICAgICAgICBjb25zdCB0b2tlbjIgPSB0aGlzLnJhbmtNYXAuZ2V0KHBpZWNlLmpvaW4oXCIsXCIpKTtcbiAgICAgICAgaWYgKHRva2VuMiAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0LnB1c2godG9rZW4yKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXQucHVzaCguLi5ieXRlUGFpckVuY29kZShwaWVjZSwgdGhpcy5yYW5rTWFwKSk7XG4gICAgICB9XG4gICAgICBpZiAobmV4dFNwZWNpYWwgPT0gbnVsbClcbiAgICAgICAgYnJlYWs7XG4gICAgICBsZXQgdG9rZW4gPSB0aGlzLnNwZWNpYWxUb2tlbnNbbmV4dFNwZWNpYWxbMF1dO1xuICAgICAgcmV0LnB1c2godG9rZW4pO1xuICAgICAgc3RhcnQgPSBuZXh0U3BlY2lhbC5pbmRleCArIG5leHRTcGVjaWFsWzBdLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICBkZWNvZGUodG9rZW5zKSB7XG4gICAgY29uc3QgcmVzID0gW107XG4gICAgbGV0IGxlbmd0aCA9IDA7XG4gICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IHRva2Vucy5sZW5ndGg7ICsraTIpIHtcbiAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zW2kyXTtcbiAgICAgIGNvbnN0IGJ5dGVzID0gdGhpcy50ZXh0TWFwLmdldCh0b2tlbikgPz8gdGhpcy5pbnZlcnNlU3BlY2lhbFRva2Vuc1t0b2tlbl07XG4gICAgICBpZiAoYnl0ZXMgIT0gbnVsbCkge1xuICAgICAgICByZXMucHVzaChieXRlcyk7XG4gICAgICAgIGxlbmd0aCArPSBieXRlcy5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG1lcmdlZEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChjb25zdCBieXRlcyBvZiByZXMpIHtcbiAgICAgIG1lcmdlZEFycmF5LnNldChieXRlcywgaSk7XG4gICAgICBpICs9IGJ5dGVzLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudGV4dERlY29kZXIuZGVjb2RlKG1lcmdlZEFycmF5KTtcbiAgfVxufTtcbnZhciBUaWt0b2tlbiA9IF9UaWt0b2tlbjtcbl9fcHVibGljRmllbGQoVGlrdG9rZW4sIFwic3BlY2lhbFRva2VuUmVnZXhcIiwgKHRva2VucykgPT4ge1xuICByZXR1cm4gbmV3IFJlZ0V4cCh0b2tlbnMubWFwKChpKSA9PiBlc2NhcGVSZWdleChpKSkuam9pbihcInxcIiksIFwiZ1wiKTtcbn0pO1xuZnVuY3Rpb24gZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwobW9kZWwpIHtcbiAgc3dpdGNoIChtb2RlbCkge1xuICAgIGNhc2UgXCJncHQyXCI6IHtcbiAgICAgIHJldHVybiBcImdwdDJcIjtcbiAgICB9XG4gICAgY2FzZSBcImNvZGUtY3VzaG1hbi0wMDFcIjpcbiAgICBjYXNlIFwiY29kZS1jdXNobWFuLTAwMlwiOlxuICAgIGNhc2UgXCJjb2RlLWRhdmluY2ktMDAxXCI6XG4gICAgY2FzZSBcImNvZGUtZGF2aW5jaS0wMDJcIjpcbiAgICBjYXNlIFwiY3VzaG1hbi1jb2RleFwiOlxuICAgIGNhc2UgXCJkYXZpbmNpLWNvZGV4XCI6XG4gICAgY2FzZSBcInRleHQtZGF2aW5jaS0wMDJcIjpcbiAgICBjYXNlIFwidGV4dC1kYXZpbmNpLTAwM1wiOiB7XG4gICAgICByZXR1cm4gXCJwNTBrX2Jhc2VcIjtcbiAgICB9XG4gICAgY2FzZSBcImNvZGUtZGF2aW5jaS1lZGl0LTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LWRhdmluY2ktZWRpdC0wMDFcIjoge1xuICAgICAgcmV0dXJuIFwicDUwa19lZGl0XCI7XG4gICAgfVxuICAgIGNhc2UgXCJhZGFcIjpcbiAgICBjYXNlIFwiYmFiYmFnZVwiOlxuICAgIGNhc2UgXCJjb2RlLXNlYXJjaC1hZGEtY29kZS0wMDFcIjpcbiAgICBjYXNlIFwiY29kZS1zZWFyY2gtYmFiYmFnZS1jb2RlLTAwMVwiOlxuICAgIGNhc2UgXCJjdXJpZVwiOlxuICAgIGNhc2UgXCJkYXZpbmNpXCI6XG4gICAgY2FzZSBcInRleHQtYWRhLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LWJhYmJhZ2UtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtY3VyaWUtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtZGF2aW5jaS0wMDFcIjpcbiAgICBjYXNlIFwidGV4dC1zZWFyY2gtYWRhLWRvYy0wMDFcIjpcbiAgICBjYXNlIFwidGV4dC1zZWFyY2gtYmFiYmFnZS1kb2MtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2VhcmNoLWN1cmllLWRvYy0wMDFcIjpcbiAgICBjYXNlIFwidGV4dC1zZWFyY2gtZGF2aW5jaS1kb2MtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2ltaWxhcml0eS1hZGEtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2ltaWxhcml0eS1iYWJiYWdlLTAwMVwiOlxuICAgIGNhc2UgXCJ0ZXh0LXNpbWlsYXJpdHktY3VyaWUtMDAxXCI6XG4gICAgY2FzZSBcInRleHQtc2ltaWxhcml0eS1kYXZpbmNpLTAwMVwiOiB7XG4gICAgICByZXR1cm4gXCJyNTBrX2Jhc2VcIjtcbiAgICB9XG4gICAgY2FzZSBcImdwdC0zLjUtdHVyYm8tMDMwMVwiOlxuICAgIGNhc2UgXCJncHQtMy41LXR1cmJvXCI6XG4gICAgY2FzZSBcImdwdC00LTAzMTRcIjpcbiAgICBjYXNlIFwiZ3B0LTQtMzJrLTAzMTRcIjpcbiAgICBjYXNlIFwiZ3B0LTQtMzJrXCI6XG4gICAgY2FzZSBcImdwdC00XCI6XG4gICAgY2FzZSBcInRleHQtZW1iZWRkaW5nLWFkYS0wMDJcIjoge1xuICAgICAgcmV0dXJuIFwiY2wxMDBrX2Jhc2VcIjtcbiAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gbW9kZWxcIik7XG4gIH1cbn1cblxuZXhwb3J0IHsgVGlrdG9rZW4sIGdldEVuY29kaW5nTmFtZUZvck1vZGVsLCBuZXZlciB9O1xuIiwiaW1wb3J0IHsgVGlrdG9rZW4sIGdldEVuY29kaW5nTmFtZUZvck1vZGVsLCB9IGZyb20gXCJqcy10aWt0b2tlbi9saXRlXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL2FzeW5jX2NhbGxlci5qc1wiO1xuY29uc3QgY2FjaGUgPSB7fTtcbmNvbnN0IGNhbGxlciA9IC8qICNfX1BVUkVfXyAqLyBuZXcgQXN5bmNDYWxsZXIoe30pO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVuY29kaW5nKGVuY29kaW5nLCBvcHRpb25zKSB7XG4gICAgaWYgKCEoZW5jb2RpbmcgaW4gY2FjaGUpKSB7XG4gICAgICAgIGNhY2hlW2VuY29kaW5nXSA9IGNhbGxlclxuICAgICAgICAgICAgLmZldGNoKGBodHRwczovL3Rpa3Rva2VuLnBhZ2VzLmRldi9qcy8ke2VuY29kaW5nfS5qc29uYCwge1xuICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zPy5zaWduYWwsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbZW5jb2RpbmddO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVGlrdG9rZW4oYXdhaXQgY2FjaGVbZW5jb2RpbmddLCBvcHRpb25zPy5leHRlbmRlZFNwZWNpYWxUb2tlbnMpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuY29kaW5nRm9yTW9kZWwobW9kZWwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZ2V0RW5jb2RpbmcoZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwobW9kZWwpLCBvcHRpb25zKTtcbn1cbiIsImltcG9ydCB7IGVuY29kaW5nRm9yTW9kZWwgfSBmcm9tIFwiLi4vdXRpbC90aWt0b2tlbi5qc1wiO1xuLy8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvanMtdGlrdG9rZW5cbmV4cG9ydCBjb25zdCBnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbiA9IChtb2RlbE5hbWUpID0+IHtcbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtMy41LXR1cmJvLVwiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtMy41LXR1cmJvXCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LTMyay1cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTQtMzJrXCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LVwiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtNFwiO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxOYW1lO1xufTtcbmV4cG9ydCBjb25zdCBnZXRFbWJlZGRpbmdDb250ZXh0U2l6ZSA9IChtb2RlbE5hbWUpID0+IHtcbiAgICBzd2l0Y2ggKG1vZGVsTmFtZSkge1xuICAgICAgICBjYXNlIFwidGV4dC1lbWJlZGRpbmctYWRhLTAwMlwiOlxuICAgICAgICAgICAgcmV0dXJuIDgxOTE7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gMjA0NjtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGdldE1vZGVsQ29udGV4dFNpemUgPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgc3dpdGNoIChnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbihtb2RlbE5hbWUpKSB7XG4gICAgICAgIGNhc2UgXCJncHQtMy41LXR1cmJvXCI6XG4gICAgICAgICAgICByZXR1cm4gNDA5NjtcbiAgICAgICAgY2FzZSBcImdwdC00LTMya1wiOlxuICAgICAgICAgICAgcmV0dXJuIDMyNzY4O1xuICAgICAgICBjYXNlIFwiZ3B0LTRcIjpcbiAgICAgICAgICAgIHJldHVybiA4MTkyO1xuICAgICAgICBjYXNlIFwidGV4dC1kYXZpbmNpLTAwM1wiOlxuICAgICAgICAgICAgcmV0dXJuIDQwOTc7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWN1cmllLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWJhYmJhZ2UtMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgY2FzZSBcInRleHQtYWRhLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJjb2RlLWRhdmluY2ktMDAyXCI6XG4gICAgICAgICAgICByZXR1cm4gODAwMDtcbiAgICAgICAgY2FzZSBcImNvZGUtY3VzaG1hbi0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIDQwOTc7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVNYXhUb2tlbnMgPSBhc3luYyAoeyBwcm9tcHQsIG1vZGVsTmFtZSwgfSkgPT4ge1xuICAgIC8vIGZhbGxiYWNrIHRvIGFwcHJveGltYXRlIGNhbGN1bGF0aW9uIGlmIHRpa3Rva2VuIGlzIG5vdCBhdmFpbGFibGVcbiAgICBsZXQgbnVtVG9rZW5zID0gTWF0aC5jZWlsKHByb21wdC5sZW5ndGggLyA0KTtcbiAgICB0cnkge1xuICAgICAgICBudW1Ub2tlbnMgPSAoYXdhaXQgZW5jb2RpbmdGb3JNb2RlbChtb2RlbE5hbWUpKS5lbmNvZGUocHJvbXB0KS5sZW5ndGg7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiKTtcbiAgICB9XG4gICAgY29uc3QgbWF4VG9rZW5zID0gZ2V0TW9kZWxDb250ZXh0U2l6ZShtb2RlbE5hbWUpO1xuICAgIHJldHVybiBtYXhUb2tlbnMgLSBudW1Ub2tlbnM7XG59O1xuIiwiaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi4vdXRpbC9hc3luY19jYWxsZXIuanNcIjtcbmltcG9ydCB7IGdldE1vZGVsTmFtZUZvclRpa3Rva2VuIH0gZnJvbSBcIi4vY291bnRfdG9rZW5zLmpzXCI7XG5pbXBvcnQgeyBlbmNvZGluZ0Zvck1vZGVsIH0gZnJvbSBcIi4uL3V0aWwvdGlrdG9rZW4uanNcIjtcbmNvbnN0IGdldFZlcmJvc2l0eSA9ICgpID0+IGZhbHNlO1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBsYW5ndWFnZSBtb2RlbHMsIGNoYWlucywgdG9vbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTGFuZ0NoYWluIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdG8gcHJpbnQgb3V0IHJlc3BvbnNlIHRleHQuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZXJib3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxiYWNrc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZlcmJvc2UgPSBwYXJhbXMudmVyYm9zZSA/PyBnZXRWZXJib3NpdHkoKTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSBwYXJhbXMuY2FsbGJhY2tzO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgbGFuZ3VhZ2UgbW9kZWxzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUxhbmd1YWdlTW9kZWwgZXh0ZW5kcyBCYXNlTGFuZ0NoYWluIHtcbiAgICAvKipcbiAgICAgKiBLZXlzIHRoYXQgdGhlIGxhbmd1YWdlIG1vZGVsIGFjY2VwdHMgYXMgY2FsbCBvcHRpb25zLlxuICAgICAqL1xuICAgIGdldCBjYWxsS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFtcInN0b3BcIiwgXCJ0aW1lb3V0XCIsIFwic2lnbmFsXCJdO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgdmVyYm9zZTogcGFyYW1zLnZlcmJvc2UsXG4gICAgICAgICAgICBjYWxsYmFja3M6IHBhcmFtcy5jYWxsYmFja3MgPz8gcGFyYW1zLmNhbGxiYWNrTWFuYWdlcixcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYXN5bmMgY2FsbGVyIHNob3VsZCBiZSB1c2VkIGJ5IHN1YmNsYXNzZXMgdG8gbWFrZSBhbnkgYXN5bmMgY2FsbHMsXG4gICAgICAgICAqIHdoaWNoIHdpbGwgdGh1cyBiZW5lZml0IGZyb20gdGhlIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfZW5jb2RpbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIocGFyYW1zID8/IHt9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TnVtVG9rZW5zKHRleHQpIHtcbiAgICAgICAgLy8gZmFsbGJhY2sgdG8gYXBwcm94aW1hdGUgY2FsY3VsYXRpb24gaWYgdGlrdG9rZW4gaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICBsZXQgbnVtVG9rZW5zID0gTWF0aC5jZWlsKHRleHQubGVuZ3RoIC8gNCk7XG4gICAgICAgIGlmICghdGhpcy5fZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW5jb2RpbmcgPSBhd2FpdCBlbmNvZGluZ0Zvck1vZGVsKFwibW9kZWxOYW1lXCIgaW4gdGhpc1xuICAgICAgICAgICAgICAgICAgICA/IGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKHRoaXMubW9kZWxOYW1lKVxuICAgICAgICAgICAgICAgICAgICA6IFwiZ3B0MlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIG51bVRva2VucyA9IHRoaXMuX2VuY29kaW5nLmVuY29kZSh0ZXh0KS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bVRva2VucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpZGVudGlmeWluZyBwYXJhbWV0ZXJzIG9mIHRoZSBMTE0uXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBfaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEganNvbi1saWtlIG9iamVjdCByZXByZXNlbnRpbmcgdGhpcyBMTE0uXG4gICAgICovXG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4udGhpcy5faWRlbnRpZnlpbmdQYXJhbXMoKSxcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9sbG1UeXBlKCksXG4gICAgICAgICAgICBfbW9kZWw6IHRoaXMuX21vZGVsVHlwZSgpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkIGFuIExMTSBmcm9tIGEganNvbi1saWtlIG9iamVjdCBkZXNjcmliaW5nIGl0LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShkYXRhKSB7XG4gICAgICAgIGNvbnN0IHsgX3R5cGUsIF9tb2RlbCwgLi4ucmVzdCB9ID0gZGF0YTtcbiAgICAgICAgaWYgKF9tb2RlbCAmJiBfbW9kZWwgIT09IFwiYmFzZV9jaGF0X21vZGVsXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGxvYWQgTExNIHdpdGggbW9kZWwgJHtfbW9kZWx9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgQ2xzID0ge1xuICAgICAgICAgICAgb3BlbmFpOiAoYXdhaXQgaW1wb3J0KFwiLi4vY2hhdF9tb2RlbHMvb3BlbmFpLmpzXCIpKS5DaGF0T3BlbkFJLFxuICAgICAgICB9W190eXBlXTtcbiAgICAgICAgaWYgKENscyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBsb2FkICBMTE0gd2l0aCB0eXBlICR7X3R5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDbHMocmVzdCk7XG4gICAgfVxufVxuLypcbiAqIENhbGN1bGF0ZSBtYXggdG9rZW5zIGZvciBnaXZlbiBtb2RlbCBhbmQgcHJvbXB0LlxuICogVGhhdCBpcyB0aGUgbW9kZWwgc2l6ZSAtIG51bWJlciBvZiB0b2tlbnMgaW4gcHJvbXB0LlxuICovXG5leHBvcnQgeyBjYWxjdWxhdGVNYXhUb2tlbnMgfSBmcm9tIFwiLi9jb3VudF90b2tlbnMuanNcIjtcbiIsIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuIEluIHRoZSBicm93c2VyIHdlIHRoZXJlZm9yZVxuLy8gcmVxdWlyZSB0aGUgY3J5cHRvIEFQSSBhbmQgZG8gbm90IHN1cHBvcnQgYnVpbHQtaW4gZmFsbGJhY2sgdG8gbG93ZXIgcXVhbGl0eSByYW5kb20gbnVtYmVyXG4vLyBnZW5lcmF0b3JzIChsaWtlIE1hdGgucmFuZG9tKCkpLlxubGV0IGdldFJhbmRvbVZhbHVlcztcbmNvbnN0IHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcm5nKCkge1xuICAvLyBsYXp5IGxvYWQgc28gdGhhdCBlbnZpcm9ubWVudHMgdGhhdCBuZWVkIHRvIHBvbHlmaWxsIGhhdmUgYSBjaGFuY2UgdG8gZG8gc29cbiAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAvLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG8gaW1wbGVtZW50YXRpb24uXG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKTtcblxuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbmNvbnN0IGJ5dGVUb0hleCA9IFtdO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICByZXR1cm4gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIGNvbnN0IHV1aWQgPSB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQpOyAvLyBDb25zaXN0ZW5jeSBjaGVjayBmb3IgdmFsaWQgVVVJRC4gIElmIHRoaXMgdGhyb3dzLCBpdCdzIGxpa2VseSBkdWUgdG8gb25lXG4gIC8vIG9mIHRoZSBmb2xsb3dpbmc6XG4gIC8vIC0gT25lIG9yIG1vcmUgaW5wdXQgYXJyYXkgdmFsdWVzIGRvbid0IG1hcCB0byBhIGhleCBvY3RldCAobGVhZGluZyB0b1xuICAvLyBcInVuZGVmaW5lZFwiIGluIHRoZSB1dWlkKVxuICAvLyAtIEludmFsaWQgaW5wdXQgdmFsdWVzIGZvciB0aGUgUkZDIGB2ZXJzaW9uYCBvciBgdmFyaWFudGAgZmllbGRzXG5cbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkJyk7XG4gIH1cblxuICByZXR1cm4gdXVpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3RyaW5naWZ5OyIsImNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJhbmRvbVVVSURcbn07IiwiaW1wb3J0IG5hdGl2ZSBmcm9tICcuL25hdGl2ZS5qcyc7XG5pbXBvcnQgcm5nIGZyb20gJy4vcm5nLmpzJztcbmltcG9ydCB7IHVuc2FmZVN0cmluZ2lmeSB9IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgaWYgKG5hdGl2ZS5yYW5kb21VVUlEICYmICFidWYgJiYgIW9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmF0aXZlLnJhbmRvbVVVSUQoKTtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBjb25zdCBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIHVuc2FmZVN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwiaW1wb3J0ICogYXMgdXVpZCBmcm9tIFwidXVpZFwiO1xuY2xhc3MgQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyB7XG59XG5leHBvcnQgY2xhc3MgQmFzZUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXJNZXRob2RzQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUxMTVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUNoYWluXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlQWdlbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlTExNID0gaW5wdXQuaWdub3JlTExNID8/IHRoaXMuaWdub3JlTExNO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVDaGFpbiA9IGlucHV0Lmlnbm9yZUNoYWluID8/IHRoaXMuaWdub3JlQ2hhaW47XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUFnZW50ID0gaW5wdXQuaWdub3JlQWdlbnQgPz8gdGhpcy5pZ25vcmVBZ2VudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcyk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTWV0aG9kcyhtZXRob2RzKSB7XG4gICAgICAgIGNsYXNzIEhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1dWlkLnY0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIG1ldGhvZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSGFuZGxlcigpO1xuICAgIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgQU5TSV9CQUNLR1JPVU5EX09GRlNFVCA9IDEwO1xuXG5jb25zdCB3cmFwQW5zaTI1NiA9IChvZmZzZXQgPSAwKSA9PiBjb2RlID0+IGBcXHUwMDFCWyR7MzggKyBvZmZzZXR9OzU7JHtjb2RlfW1gO1xuXG5jb25zdCB3cmFwQW5zaTE2bSA9IChvZmZzZXQgPSAwKSA9PiAocmVkLCBncmVlbiwgYmx1ZSkgPT4gYFxcdTAwMUJbJHszOCArIG9mZnNldH07Mjske3JlZH07JHtncmVlbn07JHtibHVlfW1gO1xuXG5mdW5jdGlvbiBhc3NlbWJsZVN0eWxlcygpIHtcblx0Y29uc3QgY29kZXMgPSBuZXcgTWFwKCk7XG5cdGNvbnN0IHN0eWxlcyA9IHtcblx0XHRtb2RpZmllcjoge1xuXHRcdFx0cmVzZXQ6IFswLCAwXSxcblx0XHRcdC8vIDIxIGlzbid0IHdpZGVseSBzdXBwb3J0ZWQgYW5kIDIyIGRvZXMgdGhlIHNhbWUgdGhpbmdcblx0XHRcdGJvbGQ6IFsxLCAyMl0sXG5cdFx0XHRkaW06IFsyLCAyMl0sXG5cdFx0XHRpdGFsaWM6IFszLCAyM10sXG5cdFx0XHR1bmRlcmxpbmU6IFs0LCAyNF0sXG5cdFx0XHRvdmVybGluZTogWzUzLCA1NV0sXG5cdFx0XHRpbnZlcnNlOiBbNywgMjddLFxuXHRcdFx0aGlkZGVuOiBbOCwgMjhdLFxuXHRcdFx0c3RyaWtldGhyb3VnaDogWzksIDI5XVxuXHRcdH0sXG5cdFx0Y29sb3I6IHtcblx0XHRcdGJsYWNrOiBbMzAsIDM5XSxcblx0XHRcdHJlZDogWzMxLCAzOV0sXG5cdFx0XHRncmVlbjogWzMyLCAzOV0sXG5cdFx0XHR5ZWxsb3c6IFszMywgMzldLFxuXHRcdFx0Ymx1ZTogWzM0LCAzOV0sXG5cdFx0XHRtYWdlbnRhOiBbMzUsIDM5XSxcblx0XHRcdGN5YW46IFszNiwgMzldLFxuXHRcdFx0d2hpdGU6IFszNywgMzldLFxuXG5cdFx0XHQvLyBCcmlnaHQgY29sb3Jcblx0XHRcdGJsYWNrQnJpZ2h0OiBbOTAsIDM5XSxcblx0XHRcdHJlZEJyaWdodDogWzkxLCAzOV0sXG5cdFx0XHRncmVlbkJyaWdodDogWzkyLCAzOV0sXG5cdFx0XHR5ZWxsb3dCcmlnaHQ6IFs5MywgMzldLFxuXHRcdFx0Ymx1ZUJyaWdodDogWzk0LCAzOV0sXG5cdFx0XHRtYWdlbnRhQnJpZ2h0OiBbOTUsIDM5XSxcblx0XHRcdGN5YW5CcmlnaHQ6IFs5NiwgMzldLFxuXHRcdFx0d2hpdGVCcmlnaHQ6IFs5NywgMzldXG5cdFx0fSxcblx0XHRiZ0NvbG9yOiB7XG5cdFx0XHRiZ0JsYWNrOiBbNDAsIDQ5XSxcblx0XHRcdGJnUmVkOiBbNDEsIDQ5XSxcblx0XHRcdGJnR3JlZW46IFs0MiwgNDldLFxuXHRcdFx0YmdZZWxsb3c6IFs0MywgNDldLFxuXHRcdFx0YmdCbHVlOiBbNDQsIDQ5XSxcblx0XHRcdGJnTWFnZW50YTogWzQ1LCA0OV0sXG5cdFx0XHRiZ0N5YW46IFs0NiwgNDldLFxuXHRcdFx0YmdXaGl0ZTogWzQ3LCA0OV0sXG5cblx0XHRcdC8vIEJyaWdodCBjb2xvclxuXHRcdFx0YmdCbGFja0JyaWdodDogWzEwMCwgNDldLFxuXHRcdFx0YmdSZWRCcmlnaHQ6IFsxMDEsIDQ5XSxcblx0XHRcdGJnR3JlZW5CcmlnaHQ6IFsxMDIsIDQ5XSxcblx0XHRcdGJnWWVsbG93QnJpZ2h0OiBbMTAzLCA0OV0sXG5cdFx0XHRiZ0JsdWVCcmlnaHQ6IFsxMDQsIDQ5XSxcblx0XHRcdGJnTWFnZW50YUJyaWdodDogWzEwNSwgNDldLFxuXHRcdFx0YmdDeWFuQnJpZ2h0OiBbMTA2LCA0OV0sXG5cdFx0XHRiZ1doaXRlQnJpZ2h0OiBbMTA3LCA0OV1cblx0XHR9XG5cdH07XG5cblx0Ly8gQWxpYXMgYnJpZ2h0IGJsYWNrIGFzIGdyYXkgKGFuZCBncmV5KVxuXHRzdHlsZXMuY29sb3IuZ3JheSA9IHN0eWxlcy5jb2xvci5ibGFja0JyaWdodDtcblx0c3R5bGVzLmJnQ29sb3IuYmdHcmF5ID0gc3R5bGVzLmJnQ29sb3IuYmdCbGFja0JyaWdodDtcblx0c3R5bGVzLmNvbG9yLmdyZXkgPSBzdHlsZXMuY29sb3IuYmxhY2tCcmlnaHQ7XG5cdHN0eWxlcy5iZ0NvbG9yLmJnR3JleSA9IHN0eWxlcy5iZ0NvbG9yLmJnQmxhY2tCcmlnaHQ7XG5cblx0Zm9yIChjb25zdCBbZ3JvdXBOYW1lLCBncm91cF0gb2YgT2JqZWN0LmVudHJpZXMoc3R5bGVzKSkge1xuXHRcdGZvciAoY29uc3QgW3N0eWxlTmFtZSwgc3R5bGVdIG9mIE9iamVjdC5lbnRyaWVzKGdyb3VwKSkge1xuXHRcdFx0c3R5bGVzW3N0eWxlTmFtZV0gPSB7XG5cdFx0XHRcdG9wZW46IGBcXHUwMDFCWyR7c3R5bGVbMF19bWAsXG5cdFx0XHRcdGNsb3NlOiBgXFx1MDAxQlske3N0eWxlWzFdfW1gXG5cdFx0XHR9O1xuXG5cdFx0XHRncm91cFtzdHlsZU5hbWVdID0gc3R5bGVzW3N0eWxlTmFtZV07XG5cblx0XHRcdGNvZGVzLnNldChzdHlsZVswXSwgc3R5bGVbMV0pO1xuXHRcdH1cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdHlsZXMsIGdyb3VwTmFtZSwge1xuXHRcdFx0dmFsdWU6IGdyb3VwLFxuXHRcdFx0ZW51bWVyYWJsZTogZmFsc2Vcblx0XHR9KTtcblx0fVxuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdHlsZXMsICdjb2RlcycsIHtcblx0XHR2YWx1ZTogY29kZXMsXG5cdFx0ZW51bWVyYWJsZTogZmFsc2Vcblx0fSk7XG5cblx0c3R5bGVzLmNvbG9yLmNsb3NlID0gJ1xcdTAwMUJbMzltJztcblx0c3R5bGVzLmJnQ29sb3IuY2xvc2UgPSAnXFx1MDAxQls0OW0nO1xuXG5cdHN0eWxlcy5jb2xvci5hbnNpMjU2ID0gd3JhcEFuc2kyNTYoKTtcblx0c3R5bGVzLmNvbG9yLmFuc2kxNm0gPSB3cmFwQW5zaTE2bSgpO1xuXHRzdHlsZXMuYmdDb2xvci5hbnNpMjU2ID0gd3JhcEFuc2kyNTYoQU5TSV9CQUNLR1JPVU5EX09GRlNFVCk7XG5cdHN0eWxlcy5iZ0NvbG9yLmFuc2kxNm0gPSB3cmFwQW5zaTE2bShBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUKTtcblxuXHQvLyBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9RaXgtL2NvbG9yLWNvbnZlcnQvYmxvYi8zZjBlMGQ0ZTkyZTIzNTc5NmNjYjE3ZjZlODVjNzIwOTRhNjUxZjQ5L2NvbnZlcnNpb25zLmpzXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHN0eWxlcywge1xuXHRcdHJnYlRvQW5zaTI1Njoge1xuXHRcdFx0dmFsdWU6IChyZWQsIGdyZWVuLCBibHVlKSA9PiB7XG5cdFx0XHRcdC8vIFdlIHVzZSB0aGUgZXh0ZW5kZWQgZ3JleXNjYWxlIHBhbGV0dGUgaGVyZSwgd2l0aCB0aGUgZXhjZXB0aW9uIG9mXG5cdFx0XHRcdC8vIGJsYWNrIGFuZCB3aGl0ZS4gbm9ybWFsIHBhbGV0dGUgb25seSBoYXMgNCBncmV5c2NhbGUgc2hhZGVzLlxuXHRcdFx0XHRpZiAocmVkID09PSBncmVlbiAmJiBncmVlbiA9PT0gYmx1ZSkge1xuXHRcdFx0XHRcdGlmIChyZWQgPCA4KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gMTY7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHJlZCA+IDI0OCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIDIzMTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gTWF0aC5yb3VuZCgoKHJlZCAtIDgpIC8gMjQ3KSAqIDI0KSArIDIzMjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiAxNiArXG5cdFx0XHRcdFx0KDM2ICogTWF0aC5yb3VuZChyZWQgLyAyNTUgKiA1KSkgK1xuXHRcdFx0XHRcdCg2ICogTWF0aC5yb3VuZChncmVlbiAvIDI1NSAqIDUpKSArXG5cdFx0XHRcdFx0TWF0aC5yb3VuZChibHVlIC8gMjU1ICogNSk7XG5cdFx0XHR9LFxuXHRcdFx0ZW51bWVyYWJsZTogZmFsc2Vcblx0XHR9LFxuXHRcdGhleFRvUmdiOiB7XG5cdFx0XHR2YWx1ZTogaGV4ID0+IHtcblx0XHRcdFx0Y29uc3QgbWF0Y2hlcyA9IC8oPzxjb2xvclN0cmluZz5bYS1mXFxkXXs2fXxbYS1mXFxkXXszfSkvaS5leGVjKGhleC50b1N0cmluZygxNikpO1xuXHRcdFx0XHRpZiAoIW1hdGNoZXMpIHtcblx0XHRcdFx0XHRyZXR1cm4gWzAsIDAsIDBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bGV0IHtjb2xvclN0cmluZ30gPSBtYXRjaGVzLmdyb3VwcztcblxuXHRcdFx0XHRpZiAoY29sb3JTdHJpbmcubGVuZ3RoID09PSAzKSB7XG5cdFx0XHRcdFx0Y29sb3JTdHJpbmcgPSBjb2xvclN0cmluZy5zcGxpdCgnJykubWFwKGNoYXJhY3RlciA9PiBjaGFyYWN0ZXIgKyBjaGFyYWN0ZXIpLmpvaW4oJycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgaW50ZWdlciA9IE51bWJlci5wYXJzZUludChjb2xvclN0cmluZywgMTYpO1xuXG5cdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0KGludGVnZXIgPj4gMTYpICYgMHhGRixcblx0XHRcdFx0XHQoaW50ZWdlciA+PiA4KSAmIDB4RkYsXG5cdFx0XHRcdFx0aW50ZWdlciAmIDB4RkZcblx0XHRcdFx0XTtcblx0XHRcdH0sXG5cdFx0XHRlbnVtZXJhYmxlOiBmYWxzZVxuXHRcdH0sXG5cdFx0aGV4VG9BbnNpMjU2OiB7XG5cdFx0XHR2YWx1ZTogaGV4ID0+IHN0eWxlcy5yZ2JUb0Fuc2kyNTYoLi4uc3R5bGVzLmhleFRvUmdiKGhleCkpLFxuXHRcdFx0ZW51bWVyYWJsZTogZmFsc2Vcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbi8vIE1ha2UgdGhlIGV4cG9ydCBpbW11dGFibGVcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsICdleHBvcnRzJywge1xuXHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRnZXQ6IGFzc2VtYmxlU3R5bGVzXG59KTtcbiIsImltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIgfSBmcm9tIFwiLi4vYmFzZS5qc1wiO1xuZXhwb3J0IGNsYXNzIEJhc2VUcmFjZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvcHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBfYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBjaGlsZFJ1bikge1xuICAgICAgICBwYXJlbnRSdW4uY2hpbGRfcnVucy5wdXNoKGNoaWxkUnVuKTtcbiAgICB9XG4gICAgX3N0YXJ0VHJhY2UocnVuKSB7XG4gICAgICAgIGlmIChydW4ucGFyZW50X3J1bl9pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRSdW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuLnBhcmVudF9ydW5faWQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudFJ1bikge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FkZENoaWxkUnVuKHBhcmVudFJ1biwgcnVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJ1bk1hcC5zZXQocnVuLmlkLCBydW4pO1xuICAgIH1cbiAgICBhc3luYyBfZW5kVHJhY2UocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHJ1bi5wYXJlbnRfcnVuX2lkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ydW5NYXAuZ2V0KHJ1bi5wYXJlbnRfcnVuX2lkKTtcbiAgICAgICAgaWYgKHBhcmVudFJ1bikge1xuICAgICAgICAgICAgcGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciA9IE1hdGgubWF4KHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsIHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0UnVuKHJ1bik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ydW5NYXAuZGVsZXRlKHJ1bi5pZCk7XG4gICAgfVxuICAgIF9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCkge1xuICAgICAgICBjb25zdCBwYXJlbnRSdW4gPSBwYXJlbnRSdW5JZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucnVuTWFwLmdldChwYXJlbnRSdW5JZCk7XG4gICAgICAgIC8vIElmIGEgcnVuIGhhcyBubyBwYXJlbnQgdGhlbiBleGVjdXRpb24gb3JkZXIgaXMgMVxuICAgICAgICBpZiAoIXBhcmVudFJ1bikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgKyAxO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1TdGFydChsbG0sIHByb21wdHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBsbG0ubmFtZSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGxsbSxcbiAgICAgICAgICAgIGlucHV0czogeyBwcm9tcHRzIH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwibGxtXCIsXG4gICAgICAgICAgICBleHRyYTogZXh0cmFQYXJhbXMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTVN0YXJ0Py4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcykge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IGxsbS5uYW1lLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogbGxtLFxuICAgICAgICAgICAgaW5wdXRzOiB7IG1lc3NhZ2VzIH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwibGxtXCIsXG4gICAgICAgICAgICBleHRyYTogZXh0cmFQYXJhbXMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTVN0YXJ0Py4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gTExNIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0gb3V0cHV0O1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIExMTSBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkLCBwYXJlbnRSdW5JZCkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IGNoYWluLm5hbWUsXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBjaGFpbixcbiAgICAgICAgICAgIGlucHV0cyxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwiY2hhaW5cIixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpblN0YXJ0Py4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FbmQob3V0cHV0cywgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjaGFpbiBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IG91dHB1dHM7XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpbkVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhaW4gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkNoYWluRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkLCBwYXJlbnRSdW5JZCkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IHRvb2wsXG4gICAgICAgICAgICBpbnB1dHM6IHsgaW5wdXQgfSxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwidG9vbFwiLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xTdGFydD8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFbmQob3V0cHV0LCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInRvb2xcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdG9vbCBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0geyBvdXRwdXQgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xFbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xFcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50QWN0aW9uKGFjdGlvbiwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWdlbnRSdW4gPSBydW47XG4gICAgICAgIGFnZW50UnVuLmFjdGlvbnMgPSBhZ2VudFJ1bi5hY3Rpb25zIHx8IFtdO1xuICAgICAgICBhZ2VudFJ1bi5hY3Rpb25zLnB1c2goYWN0aW9uKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkFnZW50QWN0aW9uPy4ocnVuKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgc3R5bGVzIGZyb20gXCJhbnNpLXN0eWxlc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL3RyYWNlci5qc1wiO1xuZnVuY3Rpb24gd3JhcChzdHlsZSwgdGV4dCkge1xuICAgIHJldHVybiBgJHtzdHlsZS5vcGVufSR7dGV4dH0ke3N0eWxlLmNsb3NlfWA7XG59XG5mdW5jdGlvbiB0cnlKc29uU3RyaW5naWZ5KG9iaiwgZmFsbGJhY2spIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfVxufVxuZnVuY3Rpb24gZWxhcHNlZChydW4pIHtcbiAgICBpZiAoIXJ1bi5lbmRfdGltZSlcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgY29uc3QgZWxhcHNlZCA9IHJ1bi5lbmRfdGltZSAtIHJ1bi5zdGFydF90aW1lO1xuICAgIGlmIChlbGFwc2VkIDwgMTAwMCkge1xuICAgICAgICByZXR1cm4gYCR7ZWxhcHNlZH1tc2A7XG4gICAgfVxuICAgIHJldHVybiBgJHsoZWxhcHNlZCAvIDEwMDApLnRvRml4ZWQoMil9c2A7XG59XG5jb25zdCB7IGNvbG9yIH0gPSBzdHlsZXM7XG5leHBvcnQgY2xhc3MgQ29uc29sZUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwZXJzaXN0UnVuKF9ydW4pIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvLyB1dGlsaXR5IG1ldGhvZHNcbiAgICBnZXRQYXJlbnRzKHJ1bikge1xuICAgICAgICBjb25zdCBwYXJlbnRzID0gW107XG4gICAgICAgIGxldCBjdXJyZW50UnVuID0gcnVuO1xuICAgICAgICB3aGlsZSAoY3VycmVudFJ1bi5wYXJlbnRfcnVuX2lkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLnJ1bk1hcC5nZXQoY3VycmVudFJ1bi5wYXJlbnRfcnVuX2lkKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgICAgICBjdXJyZW50UnVuID0gcGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudHM7XG4gICAgfVxuICAgIGdldEJyZWFkY3J1bWJzKHJ1bikge1xuICAgICAgICBjb25zdCBwYXJlbnRzID0gdGhpcy5nZXRQYXJlbnRzKHJ1bikucmV2ZXJzZSgpO1xuICAgICAgICBjb25zdCBzdHJpbmcgPSBbLi4ucGFyZW50cywgcnVuXVxuICAgICAgICAgICAgLm1hcCgocGFyZW50LCBpLCBhcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHtwYXJlbnQuZXhlY3V0aW9uX29yZGVyfToke3BhcmVudC5ydW5fdHlwZX06JHtwYXJlbnQubmFtZX1gO1xuICAgICAgICAgICAgcmV0dXJuIGkgPT09IGFyci5sZW5ndGggLSAxID8gd3JhcChzdHlsZXMuYm9sZCwgbmFtZSkgOiBuYW1lO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCIgPiBcIik7XG4gICAgICAgIHJldHVybiB3cmFwKGNvbG9yLmdyZXksIHN0cmluZyk7XG4gICAgfVxuICAgIC8vIGxvZ2dpbmcgbWV0aG9kc1xuICAgIG9uQ2hhaW5TdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIltjaGFpbi9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIENoYWluIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmlucHV0cywgXCJbaW5wdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgb25DaGFpbkVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2NoYWluL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgQ2hhaW4gcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW291dHB1dHNdXCIpfWApO1xuICAgIH1cbiAgICBvbkNoYWluRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW2NoYWluL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gQ2hhaW4gcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICBvbkxMTVN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnN0IGlucHV0cyA9IFwicHJvbXB0c1wiIGluIHJ1bi5pbnB1dHNcbiAgICAgICAgICAgID8geyBwcm9tcHRzOiBydW4uaW5wdXRzLnByb21wdHMubWFwKChwKSA9PiBwLnRyaW0oKSkgfVxuICAgICAgICAgICAgOiBydW4uaW5wdXRzO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIltsbG0vc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBMTE0gcnVuIHdpdGggaW5wdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShpbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIG9uTExNRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbbGxtL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgTExNIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltyZXNwb25zZV1cIil9YCk7XG4gICAgfVxuICAgIG9uTExNRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW2xsbS9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIExMTSBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIG9uVG9vbFN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW3Rvb2wvc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBUb29sIHJ1biB3aXRoIGlucHV0OiBcIiR7cnVuLmlucHV0cy5pbnB1dD8udHJpbSgpfVwiYCk7XG4gICAgfVxuICAgIG9uVG9vbEVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW3Rvb2wvZW5kXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gRXhpdGluZyBUb29sIHJ1biB3aXRoIG91dHB1dDogXCIke3J1bi5vdXRwdXRzPy5vdXRwdXQ/LnRyaW0oKX1cImApO1xuICAgIH1cbiAgICBvblRvb2xFcnJvcihydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbdG9vbC9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIFRvb2wgcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICBvbkFnZW50QWN0aW9uKHJ1bikge1xuICAgICAgICBjb25zdCBhZ2VudFJ1biA9IHJ1bjtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmJsdWUsIFwiW2FnZW50L2FjdGlvbl1cIil9IFske2NydW1ic31dIEFnZW50IHNlbGVjdGVkIGFjdGlvbjogJHt0cnlKc29uU3RyaW5naWZ5KGFnZW50UnVuLmFjdGlvbnNbYWdlbnRSdW4uYWN0aW9ucy5sZW5ndGggLSAxXSwgXCJbYWN0aW9uXVwiKX1gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuLi8uLi91dGlsL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSwgZ2V0UnVudGltZUVudmlyb25tZW50LCB9IGZyb20gXCIuLi8uLi91dGlsL2Vudi5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL3RyYWNlci5qc1wiO1xuZXhwb3J0IGNsYXNzIExhbmdDaGFpblRyYWNlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKHsgZXhhbXBsZUlkLCBzZXNzaW9uTmFtZSwgY2FsbGVyUGFyYW1zLCB0aW1lb3V0LCB9ID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsYW5nY2hhaW5fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuZHBvaW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0VORFBPSU5UXCIpIHx8IFwiaHR0cDovL2xvY2FsaG9zdDoxOTg0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlYWRlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlc3Npb25OYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4YW1wbGVJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGltZW91dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogNTAwMFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoYXBpS2V5KSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNbXCJ4LWFwaS1rZXlcIl0gPSBhcGlLZXk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXNzaW9uTmFtZSA9XG4gICAgICAgICAgICBzZXNzaW9uTmFtZSA/PyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1NFU1NJT05cIik7XG4gICAgICAgIHRoaXMuZXhhbXBsZUlkID0gZXhhbXBsZUlkO1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0ID8/IHRoaXMudGltZW91dDtcbiAgICAgICAgdGhpcy5jYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIoY2FsbGVyUGFyYW1zID8/IHsgbWF4UmV0cmllczogMiB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2NvbnZlcnRUb0NyZWF0ZShydW4sIGV4YW1wbGVfaWQgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgcnVuRXh0cmEgPSBydW4uZXh0cmEgPz8ge307XG4gICAgICAgIHJ1bkV4dHJhLnJ1bnRpbWUgPSBhd2FpdCBnZXRSdW50aW1lRW52aXJvbm1lbnQoKTtcbiAgICAgICAgY29uc3QgcGVyc2lzdGVkUnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJ1bi5uYW1lLFxuICAgICAgICAgICAgc3RhcnRfdGltZTogcnVuLnN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgcnVuX3R5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgIC8vIGV4YW1wbGVfaWQgaXMgb25seSBzZXQgZm9yIHRoZSByb290IHJ1blxuICAgICAgICAgICAgcmVmZXJlbmNlX2V4YW1wbGVfaWQ6IHJ1bi5wYXJlbnRfcnVuX2lkID8gdW5kZWZpbmVkIDogZXhhbXBsZV9pZCxcbiAgICAgICAgICAgIGV4dHJhOiBydW5FeHRyYSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHJ1bi5wYXJlbnRfcnVuX2lkLFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyOiBydW4uZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogcnVuLnNlcmlhbGl6ZWQsXG4gICAgICAgICAgICBlcnJvcjogcnVuLmVycm9yLFxuICAgICAgICAgICAgaW5wdXRzOiBydW4uaW5wdXRzLFxuICAgICAgICAgICAgb3V0cHV0czogcnVuLm91dHB1dHMgPz8ge30sXG4gICAgICAgICAgICBzZXNzaW9uX25hbWU6IHRoaXMuc2Vzc2lvbk5hbWUsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHBlcnNpc3RlZFJ1bjtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihfcnVuKSB7IH1cbiAgICBhc3luYyBfcGVyc2lzdFJ1blNpbmdsZShydW4pIHtcbiAgICAgICAgY29uc3QgcGVyc2lzdGVkUnVuID0gYXdhaXQgdGhpcy5fY29udmVydFRvQ3JlYXRlKHJ1biwgdGhpcy5leGFtcGxlSWQpO1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L3J1bnNgO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGwoZmV0Y2gsIGVuZHBvaW50LCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGVyc2lzdGVkUnVuKSxcbiAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXQpLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gY29uc3VtZSB0aGUgcmVzcG9uc2UgYm9keSB0byByZWxlYXNlIHRoZSBjb25uZWN0aW9uXG4gICAgICAgIC8vIGh0dHBzOi8vdW5kaWNpLm5vZGVqcy5vcmcvIy8/aWQ9Z2FyYmFnZS1jb2xsZWN0aW9uXG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBlcnNpc3QgcnVuOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAke2JvZHl9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgX3VwZGF0ZVJ1blNpbmdsZShydW4pIHtcbiAgICAgICAgY29uc3QgcnVuVXBkYXRlID0ge1xuICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgIGVycm9yOiBydW4uZXJyb3IsXG4gICAgICAgICAgICBvdXRwdXRzOiBydW4ub3V0cHV0cyxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHJ1bi5wYXJlbnRfcnVuX2lkLFxuICAgICAgICAgICAgcmVmZXJlbmNlX2V4YW1wbGVfaWQ6IHJ1bi5yZWZlcmVuY2VfZXhhbXBsZV9pZCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9ydW5zLyR7cnVuLmlkfWA7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jYWxsZXIuY2FsbChmZXRjaCwgZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocnVuVXBkYXRlKSxcbiAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aGlzLnRpbWVvdXQpLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gY29uc3VtZSB0aGUgcmVzcG9uc2UgYm9keSB0byByZWxlYXNlIHRoZSBjb25uZWN0aW9uXG4gICAgICAgIC8vIGh0dHBzOi8vdW5kaWNpLm5vZGVqcy5vcmcvIy8/aWQ9Z2FyYmFnZS1jb2xsZWN0aW9uXG4gICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHVwZGF0ZSBydW46ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9ICR7Ym9keX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvbkxMTVN0YXJ0KHJ1bikge1xuICAgICAgICBhd2FpdCB0aGlzLl9wZXJzaXN0UnVuU2luZ2xlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIG9uTExNRW5kKHJ1bikge1xuICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVSdW5TaW5nbGUocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgb25MTE1FcnJvcihydW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlUnVuU2luZ2xlKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIG9uQ2hhaW5TdGFydChydW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fcGVyc2lzdFJ1blNpbmdsZShydW4pO1xuICAgIH1cbiAgICBhc3luYyBvbkNoYWluRW5kKHJ1bikge1xuICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVSdW5TaW5nbGUocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgb25DaGFpbkVycm9yKHJ1bikge1xuICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVSdW5TaW5nbGUocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgb25Ub29sU3RhcnQocnVuKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX3BlcnNpc3RSdW5TaW5nbGUocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgb25Ub29sRW5kKHJ1bikge1xuICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVSdW5TaW5nbGUocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgb25Ub29sRXJyb3IocnVuKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZVJ1blNpbmdsZShydW4pO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBCYXNlTWVtb3J5IHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJ5IG1lbW9yeSBjbGFzc2VzIHRvIHNlbGVjdCB0aGUgaW5wdXQgdmFsdWVcbiAqIHRvIHVzZSBmb3IgdGhlIG1lbW9yeS4gSWYgdGhlcmUgaXMgb25seSBvbmUgaW5wdXQgdmFsdWUsIGl0IGlzIHVzZWQuXG4gKiBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgaW5wdXQgdmFsdWVzLCB0aGUgaW5wdXRLZXkgbXVzdCBiZSBzcGVjaWZpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRJbnB1dFZhbHVlID0gKGlucHV0VmFsdWVzLCBpbnB1dEtleSkgPT4ge1xuICAgIGlmIChpbnB1dEtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlc1tpbnB1dEtleV07XG4gICAgfVxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dFZhbHVlcyk7XG4gICAgaWYgKGtleXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlc1trZXlzWzBdXTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBpbnB1dCB2YWx1ZXMgaGF2ZSAke2tleXMubGVuZ3RofSBrZXlzLCB5b3UgbXVzdCBzcGVjaWZ5IGFuIGlucHV0IGtleSBvciBwYXNzIG9ubHkgMSBrZXkgYXMgaW5wdXRgKTtcbn07XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBieSBtZW1vcnkgY2xhc3NlcyB0byBnZXQgYSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAqIG9mIHRoZSBjaGF0IG1lc3NhZ2UgaGlzdG9yeSwgYmFzZWQgb24gdGhlIG1lc3NhZ2UgY29udGVudCBhbmQgcm9sZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJ1ZmZlclN0cmluZyhtZXNzYWdlcywgaHVtYW5QcmVmaXggPSBcIkh1bWFuXCIsIGFpUHJlZml4ID0gXCJBSVwiKSB7XG4gICAgY29uc3Qgc3RyaW5nX21lc3NhZ2VzID0gW107XG4gICAgZm9yIChjb25zdCBtIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGxldCByb2xlO1xuICAgICAgICBpZiAobS5fZ2V0VHlwZSgpID09PSBcImh1bWFuXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBodW1hblByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiYWlcIikge1xuICAgICAgICAgICAgcm9sZSA9IGFpUHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICAgICAgcm9sZSA9IFwiU3lzdGVtXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImdlbmVyaWNcIikge1xuICAgICAgICAgICAgcm9sZSA9IG0ucm9sZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR290IHVuc3VwcG9ydGVkIG1lc3NhZ2UgdHlwZTogJHttfWApO1xuICAgICAgICB9XG4gICAgICAgIHN0cmluZ19tZXNzYWdlcy5wdXNoKGAke3JvbGV9OiAke20udGV4dH1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZ19tZXNzYWdlcy5qb2luKFwiXFxuXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb21wdElucHV0S2V5KGlucHV0cywgbWVtb3J5VmFyaWFibGVzKSB7XG4gICAgY29uc3QgcHJvbXB0SW5wdXRLZXlzID0gT2JqZWN0LmtleXMoaW5wdXRzKS5maWx0ZXIoKGtleSkgPT4gIW1lbW9yeVZhcmlhYmxlcy5pbmNsdWRlcyhrZXkpICYmIGtleSAhPT0gXCJzdG9wXCIpO1xuICAgIGlmIChwcm9tcHRJbnB1dEtleXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgT25lIGlucHV0IGtleSBleHBlY3RlZCwgYnV0IGdvdCAke3Byb21wdElucHV0S2V5cy5sZW5ndGh9YCk7XG4gICAgfVxuICAgIHJldHVybiBwcm9tcHRJbnB1dEtleXNbMF07XG59XG4iLCJpbXBvcnQgeyBnZXRCdWZmZXJTdHJpbmcgfSBmcm9tIFwiLi4vLi4vbWVtb3J5L2Jhc2UuanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vLi4vdXRpbC9lbnYuanNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi90cmFjZXIuanNcIjtcbmV4cG9ydCBjbGFzcyBMYW5nQ2hhaW5UcmFjZXJWMSBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImxhbmdjaGFpbl90cmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZW5kcG9pbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fRU5EUE9JTlRcIikgfHwgXCJodHRwOi8vbG9jYWxob3N0OjE5ODRcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGVhZGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2Vzc2lvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0FQSV9LRVlcIik7XG4gICAgICAgIGlmIChhcGlLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyc1tcIngtYXBpLWtleVwiXSA9IGFwaUtleTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBuZXdTZXNzaW9uKHNlc3Npb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25DcmVhdGUgPSB7XG4gICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmFtZTogc2Vzc2lvbk5hbWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCB0aGlzLnBlcnNpc3RTZXNzaW9uKHNlc3Npb25DcmVhdGUpO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgYXN5bmMgbG9hZFNlc3Npb24oc2Vzc2lvbk5hbWUpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9zZXNzaW9ucz9uYW1lPSR7c2Vzc2lvbk5hbWV9YDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVNlc3Npb25SZXNwb25zZShlbmRwb2ludCk7XG4gICAgfVxuICAgIGFzeW5jIGxvYWREZWZhdWx0U2Vzc2lvbigpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9zZXNzaW9ucz9uYW1lPWRlZmF1bHRgO1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlU2Vzc2lvblJlc3BvbnNlKGVuZHBvaW50KTtcbiAgICB9XG4gICAgYXN5bmMgY29udmVydFYyUnVuVG9SdW4ocnVuKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb24gPz8gKGF3YWl0IHRoaXMubG9hZERlZmF1bHRTZXNzaW9uKCkpO1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkID0gcnVuLnNlcmlhbGl6ZWQ7XG4gICAgICAgIGxldCBydW5SZXN1bHQ7XG4gICAgICAgIGlmIChydW4ucnVuX3R5cGUgPT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdHMgPSBydW4uaW5wdXRzLnByb21wdHNcbiAgICAgICAgICAgICAgICA/IHJ1bi5pbnB1dHMucHJvbXB0c1xuICAgICAgICAgICAgICAgIDogcnVuLmlucHV0cy5tZXNzYWdlcy5tYXAoKHgpID0+IGdldEJ1ZmZlclN0cmluZyh4KSk7XG4gICAgICAgICAgICBjb25zdCBsbG1SdW4gPSB7XG4gICAgICAgICAgICAgICAgdXVpZDogcnVuLmlkLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bi5zdGFydF90aW1lLFxuICAgICAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyOiBydW4uZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uLmlkLFxuICAgICAgICAgICAgICAgIHByb21wdHMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJ1bi5vdXRwdXRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1blJlc3VsdCA9IGxsbVJ1bjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydW4ucnVuX3R5cGUgPT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRfcnVucyA9IGF3YWl0IFByb21pc2UuYWxsKHJ1bi5jaGlsZF9ydW5zLm1hcCgoY2hpbGRfcnVuKSA9PiB0aGlzLmNvbnZlcnRWMlJ1blRvUnVuKGNoaWxkX3J1bikpKTtcbiAgICAgICAgICAgIGNvbnN0IGNoYWluUnVuID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMsXG4gICAgICAgICAgICAgICAgb3V0cHV0czogcnVuLm91dHB1dHMsXG4gICAgICAgICAgICAgICAgY2hpbGRfbGxtX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcImxsbVwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF9jaGFpbl9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJjaGFpblwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF90b29sX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcInRvb2xcIiksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuUmVzdWx0ID0gY2hhaW5SdW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocnVuLnJ1bl90eXBlID09PSBcInRvb2xcIikge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRfcnVucyA9IGF3YWl0IFByb21pc2UuYWxsKHJ1bi5jaGlsZF9ydW5zLm1hcCgoY2hpbGRfcnVuKSA9PiB0aGlzLmNvbnZlcnRWMlJ1blRvUnVuKGNoaWxkX3J1bikpKTtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xSdW4gPSB7XG4gICAgICAgICAgICAgICAgdXVpZDogcnVuLmlkLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bi5zdGFydF90aW1lLFxuICAgICAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyOiBydW4uZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uLmlkLFxuICAgICAgICAgICAgICAgIHRvb2xfaW5wdXQ6IHJ1bi5pbnB1dHMuaW5wdXQsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBydW4ub3V0cHV0cz8ub3V0cHV0LFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSlNPTi5zdHJpbmdpZnkoc2VyaWFsaXplZCksXG4gICAgICAgICAgICAgICAgY2hpbGRfbGxtX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcImxsbVwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF9jaGFpbl9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJjaGFpblwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF90b29sX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcInRvb2xcIiksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuUmVzdWx0ID0gdG9vbFJ1bjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBydW4gdHlwZTogJHtydW4ucnVuX3R5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1blJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihydW4pIHtcbiAgICAgICAgbGV0IGVuZHBvaW50O1xuICAgICAgICBsZXQgdjFSdW47XG4gICAgICAgIGlmIChydW4ucnVuX3R5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdjFSdW4gPSBhd2FpdCB0aGlzLmNvbnZlcnRWMlJ1blRvUnVuKHJ1bik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2MVJ1biA9IHJ1bjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodjFSdW4udHlwZSA9PT0gXCJsbG1cIikge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9sbG0tcnVuc2A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodjFSdW4udHlwZSA9PT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L2NoYWluLXJ1bnNgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS90b29sLXJ1bnNgO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh2MVJ1biksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcGVyc2lzdCBydW46ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFNlc3Npb24oc2Vzc2lvbkNyZWF0ZSkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L3Nlc3Npb25zYDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNlc3Npb25DcmVhdGUpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHBlcnNpc3Qgc2Vzc2lvbjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0sIHVzaW5nIGRlZmF1bHQgc2Vzc2lvbi5gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICAgICAgLi4uc2Vzc2lvbkNyZWF0ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiAoYXdhaXQgcmVzcG9uc2UuanNvbigpKS5pZCxcbiAgICAgICAgICAgIC4uLnNlc3Npb25DcmVhdGUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIF9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZW5kcG9pbnQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHRyYWNlclNlc3Npb247XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIHNlc3Npb246ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB0cmFjZXJTZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uID0gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiB0cmFjZXJTZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3AgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgaWYgKHJlc3AubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0cmFjZXJTZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uID0gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiB0cmFjZXJTZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIFt0cmFjZXJTZXNzaW9uXSA9IHJlc3A7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHRyYWNlclNlc3Npb247XG4gICAgICAgIHJldHVybiB0cmFjZXJTZXNzaW9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IExhbmdDaGFpblRyYWNlciB9IGZyb20gXCIuL3RyYWNlcl9sYW5nY2hhaW4uanNcIjtcbmltcG9ydCB7IExhbmdDaGFpblRyYWNlclYxIH0gZnJvbSBcIi4vdHJhY2VyX2xhbmdjaGFpbl92MS5qc1wiO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRyYWNpbmdDYWxsYmFja0hhbmRsZXIoc2Vzc2lvbikge1xuICAgIGNvbnN0IHRyYWNlciA9IG5ldyBMYW5nQ2hhaW5UcmFjZXJWMSgpO1xuICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHRyYWNlci5sb2FkU2Vzc2lvbihzZXNzaW9uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGF3YWl0IHRyYWNlci5sb2FkRGVmYXVsdFNlc3Npb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYWNlcjtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUcmFjaW5nVjJDYWxsYmFja0hhbmRsZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBMYW5nQ2hhaW5UcmFjZXIoKTtcbn1cbiIsImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBCYXNlQ2FsbGJhY2tIYW5kbGVyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ29uc29sZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuL2hhbmRsZXJzL2NvbnNvbGUuanNcIjtcbmltcG9ydCB7IGdldFRyYWNpbmdDYWxsYmFja0hhbmRsZXIsIGdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlciwgfSBmcm9tIFwiLi9oYW5kbGVycy9pbml0aWFsaXplLmpzXCI7XG5pbXBvcnQgeyBnZXRCdWZmZXJTdHJpbmcgfSBmcm9tIFwiLi4vbWVtb3J5L2Jhc2UuanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbC9lbnYuanNcIjtcbmV4cG9ydCBjbGFzcyBCYXNlQ2FsbGJhY2tNYW5hZ2VyIHtcbiAgICBzZXRIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0SGFuZGxlcnMoW2hhbmRsZXJdKTtcbiAgICB9XG59XG5jbGFzcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IocnVuSWQsIGhhbmRsZXJzLCBpbmhlcml0YWJsZUhhbmRsZXJzLCBfcGFyZW50UnVuSWQpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHJ1bklkXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaGFuZGxlcnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlSGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlSGFuZGxlcnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9wYXJlbnRSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogX3BhcmVudFJ1bklkXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUZXh0KHRleHQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUZXh0Py4odGV4dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUZXh0OiAke2Vycn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgYXN5bmMgaGFuZGxlTExNTmV3VG9rZW4odG9rZW4pIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTU5ld1Rva2VuPy4odG9rZW4sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNTmV3VG9rZW46ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcChhc3luYyAoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVycm9yKGVycikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcChhc3luYyAoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpbkVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUNoYWluRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVuZChvdXRwdXQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5FbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5FbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEFjdGlvbihhY3Rpb24pIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRBY3Rpb24/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQWdlbnRBY3Rpb246ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEVuZChhY3Rpb24pIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRFbmQ/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQWdlbnRFbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRXJyb3IoZXJyKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRW5kKG91dHB1dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcChhc3luYyAoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUb29sRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xFbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRSdW5JZCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZUhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiY2FsbGJhY2tfbWFuYWdlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcGFyZW50UnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5fcGFyZW50UnVuSWQgPSBwYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCA9IHV1aWR2NCgpLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIGV4dHJhUGFyYW1zID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKGFzeW5jIChoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1TdGFydD8uKGxsbSwgcHJvbXB0cywgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTVN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCA9IHV1aWR2NCgpLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIGV4dHJhUGFyYW1zID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxldCBtZXNzYWdlU3RyaW5ncztcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5oYW5kbGVDaGF0TW9kZWxTdGFydClcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhdE1vZGVsU3RhcnQ/LihsbG0sIG1lc3NhZ2VzLCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaGFuZGxlci5oYW5kbGVMTE1TdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVN0cmluZ3MgPSBtZXNzYWdlcy5tYXAoKHgpID0+IGdldEJ1ZmZlclN0cmluZyh4KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0Py4obGxtLCBtZXNzYWdlU3RyaW5ncywgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckxMTVJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluU3RhcnQoY2hhaW4sIGlucHV0cywgcnVuSWQgPSB1dWlkdjQoKSkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcChhc3luYyAoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpblN0YXJ0Py4oY2hhaW4sIGlucHV0cywgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yQ2hhaW5SdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkID0gdXVpZHY0KCkpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVG9vbFN0YXJ0Py4odG9vbCwgaW5wdXQsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xTdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgfVxuICAgIGFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICB9XG4gICAgc2V0SGFuZGxlcnMoaGFuZGxlcnMsIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICAgICAgdGhpcy5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvcHkoYWRkaXRpb25hbEhhbmRsZXJzID0gW10sIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIHRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRhYmxlID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmluY2x1ZGVzKGhhbmRsZXIpO1xuICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgYWRkaXRpb25hbEhhbmRsZXJzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBQcmV2ZW50IG11bHRpcGxlIGNvcGllcyBvZiBjb25zb2xlX2NhbGxiYWNrX2hhbmRsZXJcbiAgICAgICAgICAgIG1hbmFnZXIuaGFuZGxlcnNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChoKSA9PiBoLm5hbWUgPT09IFwiY29uc29sZV9jYWxsYmFja19oYW5kbGVyXCIpXG4gICAgICAgICAgICAgICAgLnNvbWUoKGgpID0+IGgubmFtZSA9PT0gaGFuZGxlci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUhhbmRsZXJzKGhhbmRsZXJzKSB7XG4gICAgICAgIGNsYXNzIEhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1dWlkdjQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgaGFuZGxlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgdGhpcygpO1xuICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIobmV3IEhhbmRsZXIoKSk7XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgY29uZmlndXJlKGluaGVyaXRhYmxlSGFuZGxlcnMsIGxvY2FsSGFuZGxlcnMsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGNhbGxiYWNrTWFuYWdlcjtcbiAgICAgICAgaWYgKGluaGVyaXRhYmxlSGFuZGxlcnMgfHwgbG9jYWxIYW5kbGVycykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5oZXJpdGFibGVIYW5kbGVycykgfHwgIWluaGVyaXRhYmxlSGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLnNldEhhbmRsZXJzKGluaGVyaXRhYmxlSGFuZGxlcnM/Lm1hcChlbnN1cmVIYW5kbGVyKSA/PyBbXSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBpbmhlcml0YWJsZUhhbmRsZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gY2FsbGJhY2tNYW5hZ2VyLmNvcHkoQXJyYXkuaXNBcnJheShsb2NhbEhhbmRsZXJzKVxuICAgICAgICAgICAgICAgID8gbG9jYWxIYW5kbGVycy5tYXAoZW5zdXJlSGFuZGxlcilcbiAgICAgICAgICAgICAgICA6IGxvY2FsSGFuZGxlcnM/LmhhbmRsZXJzLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmVyYm9zZUVuYWJsZWQgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1ZFUkJPU0VcIikgfHwgb3B0aW9ucz8udmVyYm9zZTtcbiAgICAgICAgY29uc3QgdHJhY2luZ1YyRW5hYmxlZCA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVFJBQ0lOR19WMlwiKSA/PyBmYWxzZTtcbiAgICAgICAgY29uc3QgdHJhY2luZ0VuYWJsZWQgPSB0cmFjaW5nVjJFbmFibGVkIHx8XG4gICAgICAgICAgICAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9UUkFDSU5HXCIpID8/IGZhbHNlKTtcbiAgICAgICAgaWYgKHZlcmJvc2VFbmFibGVkIHx8IHRyYWNpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2ZXJib3NlRW5hYmxlZCAmJlxuICAgICAgICAgICAgICAgICFjYWxsYmFja01hbmFnZXIuaGFuZGxlcnMuc29tZSgoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyLnByb3RvdHlwZS5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnNvbGVIYW5kbGVyID0gbmV3IENvbnNvbGVDYWxsYmFja0hhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcihjb25zb2xlSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhY2luZ0VuYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhY2FsbGJhY2tNYW5hZ2VyLmhhbmRsZXJzLnNvbWUoKGhhbmRsZXIpID0+IGhhbmRsZXIubmFtZSA9PT0gXCJsYW5nY2hhaW5fdHJhY2VyXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNpbmdWMkVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZEhhbmRsZXIoYXdhaXQgZ2V0VHJhY2luZ1YyQ2FsbGJhY2tIYW5kbGVyKCksIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fU0VTU0lPTlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZEhhbmRsZXIoYXdhaXQgZ2V0VHJhY2luZ0NhbGxiYWNrSGFuZGxlcihzZXNzaW9uKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFja01hbmFnZXI7XG4gICAgfVxufVxuZnVuY3Rpb24gZW5zdXJlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgaWYgKFwibmFtZVwiIGluIGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgfVxuICAgIHJldHVybiBCYXNlQ2FsbGJhY2tIYW5kbGVyLmZyb21NZXRob2RzKGhhbmRsZXIpO1xufVxuIiwiaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gXCIuLi9jYWNoZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQUlDaGF0TWVzc2FnZSwgUlVOX0tFWSwgfSBmcm9tIFwiLi4vc2NoZW1hL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBCYXNlTGFuZ3VhZ2VNb2RlbCwgfSBmcm9tIFwiLi4vYmFzZV9sYW5ndWFnZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyLCB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgZ2V0QnVmZmVyU3RyaW5nIH0gZnJvbSBcIi4uL21lbW9yeS9iYXNlLmpzXCI7XG4vKipcbiAqIExMTSBXcmFwcGVyLiBQcm92aWRlcyBhbiB7QGxpbmsgY2FsbH0gKGFuIHtAbGluayBnZW5lcmF0ZX0pIGZ1bmN0aW9uIHRoYXQgdGFrZXMgaW4gYSBwcm9tcHQgKG9yIHByb21wdHMpIGFuZCByZXR1cm5zIGEgc3RyaW5nLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUxMTSBleHRlbmRzIEJhc2VMYW5ndWFnZU1vZGVsIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGNhY2hlLCBjb25jdXJyZW5jeSwgLi4ucmVzdCB9KSB7XG4gICAgICAgIHN1cGVyKGNvbmN1cnJlbmN5ID8geyBtYXhDb25jdXJyZW5jeTogY29uY3VycmVuY3ksIC4uLnJlc3QgfSA6IHJlc3QpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWNoZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGNhY2hlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSBJbk1lbW9yeUNhY2hlLmdsb2JhbCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZW5lcmF0ZVByb21wdChwcm9tcHRWYWx1ZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCBwcm9tcHRzID0gcHJvbXB0VmFsdWVzLm1hcCgocHJvbXB0VmFsdWUpID0+IHByb21wdFZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZShwcm9tcHRzLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBpbnZva2UgdGhlIG1vZGVsXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpbnZvY2F0aW9uUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgYXN5bmMgX2dlbmVyYXRlVW5jYWNoZWQocHJvbXB0cywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuICAgICAgICBjb25zdCBpbnZvY2F0aW9uUGFyYW1zID0geyBpbnZvY2F0aW9uX3BhcmFtczogdGhpcz8uaW52b2NhdGlvblBhcmFtcygpIH07XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVMTE1TdGFydCh7IG5hbWU6IHRoaXMuX2xsbVR5cGUoKSB9LCBwcm9tcHRzLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaW52b2NhdGlvblBhcmFtcyk7XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCB0aGlzLl9nZW5lcmF0ZShwcm9tcHRzLCBvcHRpb25zLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVuZChvdXRwdXQpO1xuICAgICAgICAvLyBUaGlzIGRlZmluZXMgUlVOX0tFWSBhcyBhIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IG9uIHRoZSBvdXRwdXQgb2JqZWN0XG4gICAgICAgIC8vIHNvIHRoYXQgaXQgaXMgbm90IHNlcmlhbGl6ZWQgd2hlbiB0aGUgb3V0cHV0IGlzIHN0cmluZ2lmaWVkLCBhbmQgc28gdGhhdFxuICAgICAgICAvLyBpdCBpc250IGluY2x1ZGVkIHdoZW4gbGlzdGluZyB0aGUga2V5cyBvZiB0aGUgb3V0cHV0IG9iamVjdC5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dCwgUlVOX0tFWSwge1xuICAgICAgICAgICAgdmFsdWU6IHJ1bk1hbmFnZXIgPyB7IHJ1bklkOiBydW5NYW5hZ2VyPy5ydW5JZCB9IDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVuIHRoZSBMTE0gb24gdGhlIGdpdmVuIHByb3BtdHMgYW4gaW5wdXQsIGhhbmRsaW5nIGNhY2hpbmcuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9tcHRzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgJ3Byb21wdHMnIGlzIGV4cGVjdGVkIHRvIGJlIGEgc3RyaW5nW11cIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcnNlZE9wdGlvbnM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0geyBzdG9wOiBvcHRpb25zIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucz8udGltZW91dCAmJiAhb3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgICAgIHBhcnNlZE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQob3B0aW9ucy50aW1lb3V0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZW5lcmF0ZVVuY2FjaGVkKHByb21wdHMsIHBhcnNlZE9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBjYWNoZSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5zZXJpYWxpemUoKTtcbiAgICAgICAgcGFyYW1zLnN0b3AgPSBwYXJzZWRPcHRpb25zLnN0b3AgPz8gcGFyYW1zLnN0b3A7XG4gICAgICAgIGNvbnN0IGxsbVN0cmluZ0tleSA9IGAke09iamVjdC5lbnRyaWVzKHBhcmFtcykuc29ydCgpfWA7XG4gICAgICAgIGNvbnN0IG1pc3NpbmdQcm9tcHRJbmRpY2VzID0gW107XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoYXN5bmMgKHByb21wdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhY2hlLmxvb2t1cChwcm9tcHQsIGxsbVN0cmluZ0tleSk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIG1pc3NpbmdQcm9tcHRJbmRpY2VzLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgbGxtT3V0cHV0ID0ge307XG4gICAgICAgIGlmIChtaXNzaW5nUHJvbXB0SW5kaWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGVVbmNhY2hlZChtaXNzaW5nUHJvbXB0SW5kaWNlcy5tYXAoKGkpID0+IHByb21wdHNbaV0pLCBwYXJzZWRPcHRpb25zLCBjYWxsYmFja3MpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocmVzdWx0cy5nZW5lcmF0aW9ucy5tYXAoYXN5bmMgKGdlbmVyYXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbXB0SW5kZXggPSBtaXNzaW5nUHJvbXB0SW5kaWNlc1tpbmRleF07XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnNbcHJvbXB0SW5kZXhdID0gZ2VuZXJhdGlvbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGUudXBkYXRlKHByb21wdHNbcHJvbXB0SW5kZXhdLCBsbG1TdHJpbmdLZXksIGdlbmVyYXRpb24pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgbGxtT3V0cHV0ID0gcmVzdWx0cy5sbG1PdXRwdXQgPz8ge307XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZ2VuZXJhdGlvbnMsIGxsbU91dHB1dCB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSB3cmFwcGVyIGZvciB7QGxpbmsgZ2VuZXJhdGV9IHRoYXQgdGFrZXMgaW4gYSBzaW5nbGUgc3RyaW5nIHByb21wdCBhbmQgcmV0dXJucyBhIHNpbmdsZSBzdHJpbmcgb3V0cHV0LlxuICAgICAqL1xuICAgIGFzeW5jIGNhbGwocHJvbXB0LCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY29uc3QgeyBnZW5lcmF0aW9ucyB9ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZShbcHJvbXB0XSwgb3B0aW9ucyA/PyB7fSwgY2FsbGJhY2tzKTtcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRpb25zWzBdWzBdLnRleHQ7XG4gICAgfVxuICAgIGFzeW5jIHByZWRpY3QodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgYXN5bmMgcHJlZGljdE1lc3NhZ2VzKG1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGdldEJ1ZmZlclN0cmluZyhtZXNzYWdlcyk7XG4gICAgICAgIGNvbnN0IHByZWRpY3Rpb24gPSBhd2FpdCB0aGlzLmNhbGwodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBSUNoYXRNZXNzYWdlKHByZWRpY3Rpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGlkZW50aWZ5aW5nIHBhcmFtZXRlcnMgb2YgdGhlIExMTS5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9pZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIExMTS5cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi50aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLFxuICAgICAgICAgICAgX3R5cGU6IHRoaXMuX2xsbVR5cGUoKSxcbiAgICAgICAgICAgIF9tb2RlbDogdGhpcy5fbW9kZWxUeXBlKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9tb2RlbFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImJhc2VfbGxtXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWQgYW4gTExNIGZyb20gYSBqc29uLWxpa2Ugb2JqZWN0IGRlc2NyaWJpbmcgaXQuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGRlc2VyaWFsaXplKGRhdGEpIHtcbiAgICAgICAgY29uc3QgeyBfdHlwZSwgX21vZGVsLCAuLi5yZXN0IH0gPSBkYXRhO1xuICAgICAgICBpZiAoX21vZGVsICYmIF9tb2RlbCAhPT0gXCJiYXNlX2xsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBsb2FkIExMTSB3aXRoIG1vZGVsICR7X21vZGVsfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IENscyA9IHtcbiAgICAgICAgICAgIG9wZW5haTogKGF3YWl0IGltcG9ydChcIi4vb3BlbmFpLmpzXCIpKS5PcGVuQUksXG4gICAgICAgIH1bX3R5cGVdO1xuICAgICAgICBpZiAoQ2xzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGxvYWQgIExMTSB3aXRoIHR5cGUgJHtfdHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IENscyhyZXN0KTtcbiAgICB9XG59XG4vKipcbiAqIExMTSBjbGFzcyB0aGF0IHByb3ZpZGVzIGEgc2ltcGxlciBpbnRlcmZhY2UgdG8gc3ViY2xhc3MgdGhhbiB7QGxpbmsgQmFzZUxMTX0uXG4gKlxuICogUmVxdWlyZXMgb25seSBpbXBsZW1lbnRpbmcgYSBzaW1wbGVyIHtAbGluayBfY2FsbH0gbWV0aG9kIGluc3RlYWQgb2Yge0BsaW5rIF9nZW5lcmF0ZX0uXG4gKlxuICogQGF1Z21lbnRzIEJhc2VMTE1cbiAqL1xuZXhwb3J0IGNsYXNzIExMTSBleHRlbmRzIEJhc2VMTE0ge1xuICAgIGFzeW5jIF9nZW5lcmF0ZShwcm9tcHRzLCBvcHRpb25zLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoKHByb21wdCkgPT4gdGhpcy5fY2FsbChwcm9tcHQsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpLnRoZW4oKHRleHQpID0+IFt7IHRleHQgfV0pKSk7XG4gICAgICAgIHJldHVybiB7IGdlbmVyYXRpb25zIH07XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IHByb21wdExheWVyVHJhY2tSZXF1ZXN0ID0gYXN5bmMgKGNhbGxlckZ1bmMsIGZ1bmN0aW9uTmFtZSwgcHJvbXB0LCBrd2FyZ3MsIHBsVGFncywgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxucmVxdWVzdFJlc3BvbnNlLCBzdGFydFRpbWUsIGVuZFRpbWUsIGFwaUtleSkgPT4ge1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NYWduaXZPcmcvcHJvbXB0bGF5ZXItanMtaGVscGVyXG4gICAgY29uc3QgcHJvbXB0TGF5ZXJSZXNwID0gYXdhaXQgY2FsbGVyRnVuYy5jYWxsKGZldGNoLCBcImh0dHBzOi8vYXBpLnByb21wdGxheWVyLmNvbS90cmFjay1yZXF1ZXN0XCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBmdW5jdGlvbl9uYW1lOiBmdW5jdGlvbk5hbWUsXG4gICAgICAgICAgICBwcm92aWRlcjogXCJsYW5nY2hhaW5cIixcbiAgICAgICAgICAgIGFyZ3M6IHByb21wdCxcbiAgICAgICAgICAgIGt3YXJncyxcbiAgICAgICAgICAgIHRhZ3M6IHBsVGFncyxcbiAgICAgICAgICAgIHJlcXVlc3RfcmVzcG9uc2U6IHJlcXVlc3RSZXNwb25zZSxcbiAgICAgICAgICAgIHJlcXVlc3Rfc3RhcnRfdGltZTogTWF0aC5mbG9vcihzdGFydFRpbWUgLyAxMDAwKSxcbiAgICAgICAgICAgIHJlcXVlc3RfZW5kX3RpbWU6IE1hdGguZmxvb3IoZW5kVGltZSAvIDEwMDApLFxuICAgICAgICAgICAgYXBpX2tleTogYXBpS2V5LFxuICAgICAgICB9KSxcbiAgICB9KTtcbiAgICByZXR1cm4gcHJvbXB0TGF5ZXJSZXNwLmpzb24oKTtcbn07XG4iLCJpbXBvcnQgeyBDb25maWd1cmF0aW9uLCBPcGVuQUlBcGksIH0gZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgaXNOb2RlLCBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWwvZW52LmpzXCI7XG5pbXBvcnQgZmV0Y2hBZGFwdGVyIGZyb20gXCIuLi91dGlsL2F4aW9zLWZldGNoLWFkYXB0ZXIuanNcIjtcbmltcG9ydCB7IExMTSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IHByb21wdExheWVyVHJhY2tSZXF1ZXN0IH0gZnJvbSBcIi4uL3V0aWwvcHJvbXB0LWxheWVyLmpzXCI7XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIE9wZW5BSSBsYXJnZSBsYW5ndWFnZSBtb2RlbHMgdGhhdCB1c2UgdGhlIENoYXQgZW5kcG9pbnQuXG4gKlxuICogVG8gdXNlIHlvdSBzaG91bGQgaGF2ZSB0aGUgYG9wZW5haWAgcGFja2FnZSBpbnN0YWxsZWQsIHdpdGggdGhlXG4gKiBgT1BFTkFJX0FQSV9LRVlgIGVudmlyb25tZW50IHZhcmlhYmxlIHNldC5cbiAqXG4gKiBUbyB1c2Ugd2l0aCBBenVyZSB5b3Ugc2hvdWxkIGhhdmUgdGhlIGBvcGVuYWlgIHBhY2thZ2UgaW5zdGFsbGVkLCB3aXRoIHRoZVxuICogYEFaVVJFX09QRU5BSV9BUElfS0VZYCxcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0lOU1RBTkNFX05BTUVgLFxuICogYEFaVVJFX09QRU5BSV9BUElfREVQTE9ZTUVOVF9OQU1FYFxuICogYW5kIGBBWlVSRV9PUEVOQUlfQVBJX1ZFUlNJT05gIGVudmlyb25tZW50IHZhcmlhYmxlIHNldC5cbiAqXG4gKiBAcmVtYXJrc1xuICogQW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgdmFsaWQgdG8gYmUgcGFzc2VkIHRvIHtAbGlua1xuICogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvYXBpLXJlZmVyZW5jZS9jaGF0L2NyZWF0ZSB8XG4gKiBgb3BlbmFpLmNyZWF0ZUNvbXBsZXRpb25gfSBjYW4gYmUgcGFzc2VkIHRocm91Z2gge0BsaW5rIG1vZGVsS3dhcmdzfSwgZXZlblxuICogaWYgbm90IGV4cGxpY2l0bHkgYXZhaWxhYmxlIG9uIHRoaXMgY2xhc3MuXG4gKlxuICogQGF1Z21lbnRzIEJhc2VMTE1cbiAqIEBhdWdtZW50cyBPcGVuQUlJbnB1dFxuICogQGF1Z21lbnRzIEF6dXJlT3BlbkFJQ2hhdElucHV0XG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlDaGF0IGV4dGVuZHMgTExNIHtcbiAgICBnZXQgY2FsbEtleXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJzdG9wXCIsIFwic2lnbmFsXCIsIFwidGltZW91dFwiLCBcIm9wdGlvbnNcIl07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgY29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcihmaWVsZHMgPz8ge30pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZW1wZXJhdHVyZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9wUFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJlcXVlbmN5UGVuYWx0eVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJlc2VuY2VQZW5hbHR5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsb2dpdEJpYXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4VG9rZW5zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJncHQtMy41LXR1cmJvXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByZWZpeE1lc3NhZ2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsS3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVvdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHJlYW1pbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUFwaVZlcnNpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50Q29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGZpZWxkcz8ub3BlbkFJQXBpS2V5ID8/IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgY29uc3QgYXp1cmVBcGlLZXkgPSBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpS2V5ID8/XG4gICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9LRVlcIik7XG4gICAgICAgIGlmICghYXp1cmVBcGlLZXkgJiYgIWFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiKEF6dXJlKSBPcGVuQUkgQVBJIGtleSBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXp1cmVBcGlJbnN0YW5jZU5hbWUgPSBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lID8/XG4gICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9JTlNUQU5DRV9OQU1FXCIpO1xuICAgICAgICBjb25zdCBhenVyZUFwaURlcGxveW1lbnROYW1lID0gZmllbGRzPy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lID8/XG4gICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9ERVBMT1lNRU5UX05BTUVcIik7XG4gICAgICAgIGNvbnN0IGF6dXJlQXBpVmVyc2lvbiA9IGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlWZXJzaW9uID8/XG4gICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9WRVJTSU9OXCIpO1xuICAgICAgICB0aGlzLm1vZGVsTmFtZSA9IGZpZWxkcz8ubW9kZWxOYW1lID8/IHRoaXMubW9kZWxOYW1lO1xuICAgICAgICB0aGlzLnByZWZpeE1lc3NhZ2VzID0gZmllbGRzPy5wcmVmaXhNZXNzYWdlcyA/PyB0aGlzLnByZWZpeE1lc3NhZ2VzO1xuICAgICAgICB0aGlzLm1vZGVsS3dhcmdzID0gZmllbGRzPy5tb2RlbEt3YXJncyA/PyB7fTtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gZmllbGRzPy50aW1lb3V0O1xuICAgICAgICB0aGlzLnRlbXBlcmF0dXJlID0gZmllbGRzPy50ZW1wZXJhdHVyZSA/PyB0aGlzLnRlbXBlcmF0dXJlO1xuICAgICAgICB0aGlzLnRvcFAgPSBmaWVsZHM/LnRvcFAgPz8gdGhpcy50b3BQO1xuICAgICAgICB0aGlzLmZyZXF1ZW5jeVBlbmFsdHkgPSBmaWVsZHM/LmZyZXF1ZW5jeVBlbmFsdHkgPz8gdGhpcy5mcmVxdWVuY3lQZW5hbHR5O1xuICAgICAgICB0aGlzLnByZXNlbmNlUGVuYWx0eSA9IGZpZWxkcz8ucHJlc2VuY2VQZW5hbHR5ID8/IHRoaXMucHJlc2VuY2VQZW5hbHR5O1xuICAgICAgICB0aGlzLm4gPSBmaWVsZHM/Lm4gPz8gdGhpcy5uO1xuICAgICAgICB0aGlzLmxvZ2l0QmlhcyA9IGZpZWxkcz8ubG9naXRCaWFzO1xuICAgICAgICB0aGlzLm1heFRva2VucyA9IGZpZWxkcz8ubWF4VG9rZW5zO1xuICAgICAgICB0aGlzLnN0b3AgPSBmaWVsZHM/LnN0b3A7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nID0gZmllbGRzPy5zdHJlYW1pbmcgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uID0gYXp1cmVBcGlWZXJzaW9uO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5ID0gYXp1cmVBcGlLZXk7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgPSBhenVyZUFwaUluc3RhbmNlTmFtZTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lID0gYXp1cmVBcGlEZXBsb3ltZW50TmFtZTtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtaW5nICYmIHRoaXMubiA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzdHJlYW0gcmVzdWx0cyB3aGVuIG4gPiAxXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF6dXJlT3BlbkFJQXBpS2V5KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBenVyZSBPcGVuQUkgQVBJIGluc3RhbmNlIG5hbWUgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBenVyZSBPcGVuQUkgQVBJIGRlcGxveW1lbnQgbmFtZSBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSB2ZXJzaW9uIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsaWVudENvbmZpZyA9IHtcbiAgICAgICAgICAgIGFwaUtleSxcbiAgICAgICAgICAgIC4uLmNvbmZpZ3VyYXRpb24sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGFyYW1ldGVycyB1c2VkIHRvIGludm9rZSB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICBpbnZvY2F0aW9uUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHRoaXMudGVtcGVyYXR1cmUsXG4gICAgICAgICAgICB0b3BfcDogdGhpcy50b3BQLFxuICAgICAgICAgICAgZnJlcXVlbmN5X3BlbmFsdHk6IHRoaXMuZnJlcXVlbmN5UGVuYWx0eSxcbiAgICAgICAgICAgIHByZXNlbmNlX3BlbmFsdHk6IHRoaXMucHJlc2VuY2VQZW5hbHR5LFxuICAgICAgICAgICAgbjogdGhpcy5uLFxuICAgICAgICAgICAgbG9naXRfYmlhczogdGhpcy5sb2dpdEJpYXMsXG4gICAgICAgICAgICBtYXhfdG9rZW5zOiB0aGlzLm1heFRva2VucyA9PT0gLTEgPyB1bmRlZmluZWQgOiB0aGlzLm1heFRva2VucyxcbiAgICAgICAgICAgIHN0b3A6IHRoaXMuc3RvcCxcbiAgICAgICAgICAgIHN0cmVhbTogdGhpcy5zdHJlYW1pbmcsXG4gICAgICAgICAgICAuLi50aGlzLm1vZGVsS3dhcmdzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIF9pZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsX25hbWU6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpZGVudGlmeWluZyBwYXJhbWV0ZXJzIGZvciB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICBpZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsX25hbWU6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZm9ybWF0TWVzc2FnZXMocHJvbXB0KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHByb21wdCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJlZml4TWVzc2FnZXMgPyBbLi4udGhpcy5wcmVmaXhNZXNzYWdlcywgbWVzc2FnZV0gOiBbbWVzc2FnZV07XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgYXN5bmMgX2NhbGwocHJvbXB0LCBvcHRpb25zLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IHsgc3RvcCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKCk7XG4gICAgICAgIHBhcmFtcy5zdG9wID0gc3RvcCA/PyBwYXJhbXMuc3RvcDtcbiAgICAgICAgY29uc3QgZGF0YSA9IHBhcmFtcy5zdHJlYW1cbiAgICAgICAgICAgID8gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByZXNwb25zZTtcbiAgICAgICAgICAgICAgICBsZXQgcmVqZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBsZXQgcmVzb2x2ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiB0aGlzLmZvcm1hdE1lc3NhZ2VzKHByb21wdCksXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGFkYXB0ZXI6IGZldGNoQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBcInN0cmVhbVwiLFxuICAgICAgICAgICAgICAgICAgICBvbm1lc3NhZ2U6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGE/LnRyaW0/LigpID09PSBcIltET05FXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24gdGhlIGZpcnN0IG1lc3NhZ2Ugc2V0IHRoZSByZXNwb25zZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBtZXNzYWdlLm9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IG1lc3NhZ2UuY3JlYXRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBtZXNzYWdlLm1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIGFsbCBtZXNzYWdlcywgdXBkYXRlIGNob2ljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBtZXNzYWdlLmNob2ljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNob2ljZSA9IHJlc3BvbnNlLmNob2ljZXMuZmluZCgoYykgPT4gYy5pbmRleCA9PT0gcGFydC5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNob2ljZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHBhcnQuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaF9yZWFzb246IHBhcnQuZmluaXNoX3JlYXNvbiA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5jaG9pY2VzLnB1c2goY2hvaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2hvaWNlLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2UubWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFydC5kZWx0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPy5yb2xlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwYXJ0LmRlbHRhPy5jb250ZW50ID8/IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQgKz0gcGFydC5kZWx0YT8uY29udGVudCA/PyBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZvaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4ocGFydC5kZWx0YT8uY29udGVudCA/PyBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGFsbCBtZXNzYWdlcyBhcmUgZmluaXNoZWQsIHJlc29sdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc29sdmVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuY2hvaWNlcy5ldmVyeSgoYykgPT4gYy5maW5pc2hfcmVhc29uICE9IG51bGwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkoe1xuICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogdGhpcy5mb3JtYXRNZXNzYWdlcyhwcm9tcHQpLFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5vcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZT8uY29udGVudCA/PyBcIlwiO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIGNvbXBsZXRpb25XaXRoUmV0cnkocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuY2xpZW50KSB7XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IHRoaXMuYXp1cmVPcGVuQUlBcGlLZXlcbiAgICAgICAgICAgICAgICA/IGBodHRwczovLyR7dGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZX0ub3BlbmFpLmF6dXJlLmNvbS9vcGVuYWkvZGVwbG95bWVudHMvJHt0aGlzLmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWV9YFxuICAgICAgICAgICAgICAgIDogdGhpcy5jbGllbnRDb25maWcuYmFzZVBhdGg7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRDb25maWcgPSBuZXcgQ29uZmlndXJhdGlvbih7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcsXG4gICAgICAgICAgICAgICAgYmFzZVBhdGg6IGVuZHBvaW50LFxuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMudGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcuYmFzZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgT3BlbkFJQXBpKGNsaWVudENvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXhpb3NPcHRpb25zID0ge1xuICAgICAgICAgICAgYWRhcHRlcjogaXNOb2RlKCkgPyB1bmRlZmluZWQgOiBmZXRjaEFkYXB0ZXIsXG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZy5iYXNlT3B0aW9ucyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmF6dXJlT3BlbkFJQXBpS2V5KSB7XG4gICAgICAgICAgICBheGlvc09wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS1rZXlcIjogdGhpcy5henVyZU9wZW5BSUFwaUtleSxcbiAgICAgICAgICAgICAgICAuLi5heGlvc09wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBheGlvc09wdGlvbnMucGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIFwiYXBpLXZlcnNpb25cIjogdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24sXG4gICAgICAgICAgICAgICAgLi4uYXhpb3NPcHRpb25zLnBhcmFtcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyXG4gICAgICAgICAgICAuY2FsbCh0aGlzLmNsaWVudC5jcmVhdGVDaGF0Q29tcGxldGlvbi5iaW5kKHRoaXMuY2xpZW50KSwgcmVxdWVzdCwgYXhpb3NPcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmRhdGEpO1xuICAgIH1cbiAgICBfbGxtVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwib3BlbmFpXCI7XG4gICAgfVxufVxuLyoqXG4gKiBQcm9tcHRMYXllciB3cmFwcGVyIHRvIE9wZW5BSUNoYXRcbiAqL1xuZXhwb3J0IGNsYXNzIFByb21wdExheWVyT3BlbkFJQ2hhdCBleHRlbmRzIE9wZW5BSUNoYXQge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9tcHRMYXllckFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwbFRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmV0dXJuUHJvbXB0TGF5ZXJJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBsVGFncyA9IGZpZWxkcz8ucGxUYWdzID8/IFtdO1xuICAgICAgICB0aGlzLnJldHVyblByb21wdExheWVySWQgPSBmaWVsZHM/LnJldHVyblByb21wdExheWVySWQgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvbXB0TGF5ZXJBcGlLZXkgPVxuICAgICAgICAgICAgZmllbGRzPy5wcm9tcHRMYXllckFwaUtleSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJQUk9NUFRMQVlFUl9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoIXRoaXMucHJvbXB0TGF5ZXJBcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgUHJvbXB0TGF5ZXIgQVBJIGtleVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjb21wbGV0aW9uV2l0aFJldHJ5KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RyZWFtKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuY29tcGxldGlvbldpdGhSZXRyeShyZXF1ZXN0LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVyLmNvbXBsZXRpb25XaXRoUmV0cnkocmVxdWVzdCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgYXN5bmMgX2dlbmVyYXRlKHByb21wdHMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgbGV0IGNob2ljZTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9tcHRzLm1hcChhc3luYyAocHJvbXB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0U3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCB0aGlzLl9jYWxsKHByb21wdCwgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0RW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjaG9pY2UgPSBbeyB0ZXh0IH1dO1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkUmVzcCA9IHtcbiAgICAgICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdExheWVyUmVzcEJvZHkgPSBhd2FpdCBwcm9tcHRMYXllclRyYWNrUmVxdWVzdCh0aGlzLmNhbGxlciwgXCJsYW5nY2hhaW4uUHJvbXB0TGF5ZXJPcGVuQUlDaGF0XCIsIFtwcm9tcHRdLCB0aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLCB0aGlzLnBsVGFncywgcGFyc2VkUmVzcCwgcmVxdWVzdFN0YXJ0VGltZSwgcmVxdWVzdEVuZFRpbWUsIHRoaXMucHJvbXB0TGF5ZXJBcGlLZXkpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmV0dXJuUHJvbXB0TGF5ZXJJZCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgIHByb21wdExheWVyUmVzcEJvZHkuc3VjY2VzcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNob2ljZVswXS5nZW5lcmF0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbXB0TGF5ZXJSZXF1ZXN0SWQ6IHByb21wdExheWVyUmVzcEJvZHkucmVxdWVzdF9pZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNob2ljZTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucyB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbmZpZ3VyYXRpb24sIE9wZW5BSUFwaSwgfSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBpc05vZGUsIGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbC9lbnYuanNcIjtcbmltcG9ydCBmZXRjaEFkYXB0ZXIgZnJvbSBcIi4uL3V0aWwvYXhpb3MtZmV0Y2gtYWRhcHRlci5qc1wiO1xuaW1wb3J0IHsgY2h1bmtBcnJheSB9IGZyb20gXCIuLi91dGlsL2NodW5rLmpzXCI7XG5pbXBvcnQgeyBCYXNlTExNIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgY2FsY3VsYXRlTWF4VG9rZW5zIH0gZnJvbSBcIi4uL2Jhc2VfbGFuZ3VhZ2UvY291bnRfdG9rZW5zLmpzXCI7XG5pbXBvcnQgeyBPcGVuQUlDaGF0IH0gZnJvbSBcIi4vb3BlbmFpLWNoYXQuanNcIjtcbmltcG9ydCB7IHByb21wdExheWVyVHJhY2tSZXF1ZXN0IH0gZnJvbSBcIi4uL3V0aWwvcHJvbXB0LWxheWVyLmpzXCI7XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIE9wZW5BSSBsYXJnZSBsYW5ndWFnZSBtb2RlbHMuXG4gKlxuICogVG8gdXNlIHlvdSBzaG91bGQgaGF2ZSB0aGUgYG9wZW5haWAgcGFja2FnZSBpbnN0YWxsZWQsIHdpdGggdGhlXG4gKiBgT1BFTkFJX0FQSV9LRVlgIGVudmlyb25tZW50IHZhcmlhYmxlIHNldC5cbiAqXG4gKiBUbyB1c2Ugd2l0aCBBenVyZSB5b3Ugc2hvdWxkIGhhdmUgdGhlIGBvcGVuYWlgIHBhY2thZ2UgaW5zdGFsbGVkLCB3aXRoIHRoZVxuICogYEFaVVJFX09QRU5BSV9BUElfS0VZYCxcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0lOU1RBTkNFX05BTUVgLFxuICogYEFaVVJFX09QRU5BSV9BUElfREVQTE9ZTUVOVF9OQU1FYFxuICogYW5kIGBBWlVSRV9PUEVOQUlfQVBJX1ZFUlNJT05gIGVudmlyb25tZW50IHZhcmlhYmxlIHNldC5cbiAqXG4gKiBAcmVtYXJrc1xuICogQW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgdmFsaWQgdG8gYmUgcGFzc2VkIHRvIHtAbGlua1xuICogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucy9jcmVhdGUgfFxuICogYG9wZW5haS5jcmVhdGVDb21wbGV0aW9uYH0gY2FuIGJlIHBhc3NlZCB0aHJvdWdoIHtAbGluayBtb2RlbEt3YXJnc30sIGV2ZW5cbiAqIGlmIG5vdCBleHBsaWNpdGx5IGF2YWlsYWJsZSBvbiB0aGlzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJIGV4dGVuZHMgQmFzZUxMTSB7XG4gICAgZ2V0IGNhbGxLZXlzKCkge1xuICAgICAgICByZXR1cm4gW1wic3RvcFwiLCBcInNpZ25hbFwiLCBcInRpbWVvdXRcIiwgXCJvcHRpb25zXCJdO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgaWYgKGZpZWxkcz8ubW9kZWxOYW1lPy5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJib1wiKSB8fFxuICAgICAgICAgICAgZmllbGRzPy5tb2RlbE5hbWU/LnN0YXJ0c1dpdGgoXCJncHQtNFwiKSB8fFxuICAgICAgICAgICAgZmllbGRzPy5tb2RlbE5hbWU/LnN0YXJ0c1dpdGgoXCJncHQtNC0zMmtcIikpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdHJ1Y3Rvci1yZXR1cm4sIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHJldHVybiBuZXcgT3BlbkFJQ2hhdChmaWVsZHMsIGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyA/PyB7fSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBlcmF0dXJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwLjdcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heFRva2Vuc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMjU2XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b3BQXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmcmVxdWVuY3lQZW5hbHR5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcmVzZW5jZVBlbmFsdHlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJlc3RPZlwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibG9naXRCaWFzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJ0ZXh0LWRhdmluY2ktMDAzXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsS3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJhdGNoU2l6ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMjBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVvdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHJlYW1pbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUFwaVZlcnNpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50Q29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGZpZWxkcz8ub3BlbkFJQXBpS2V5ID8/IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgY29uc3QgYXp1cmVBcGlLZXkgPSBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpS2V5ID8/XG4gICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9LRVlcIik7XG4gICAgICAgIGlmICghYXp1cmVBcGlLZXkgJiYgIWFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiKEF6dXJlKSBPcGVuQUkgQVBJIGtleSBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXp1cmVBcGlJbnN0YW5jZU5hbWUgPSBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lID8/XG4gICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9JTlNUQU5DRV9OQU1FXCIpO1xuICAgICAgICBjb25zdCBhenVyZUFwaURlcGxveW1lbnROYW1lID0gKGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlDb21wbGV0aW9uc0RlcGxveW1lbnROYW1lIHx8XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUpID8/XG4gICAgICAgICAgICAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfQ09NUExFVElPTlNfREVQTE9ZTUVOVF9OQU1FXCIpIHx8XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfREVQTE9ZTUVOVF9OQU1FXCIpKTtcbiAgICAgICAgY29uc3QgYXp1cmVBcGlWZXJzaW9uID0gZmllbGRzPy5henVyZU9wZW5BSUFwaVZlcnNpb24gPz9cbiAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX1ZFUlNJT05cIik7XG4gICAgICAgIHRoaXMubW9kZWxOYW1lID0gZmllbGRzPy5tb2RlbE5hbWUgPz8gdGhpcy5tb2RlbE5hbWU7XG4gICAgICAgIHRoaXMubW9kZWxLd2FyZ3MgPSBmaWVsZHM/Lm1vZGVsS3dhcmdzID8/IHt9O1xuICAgICAgICB0aGlzLmJhdGNoU2l6ZSA9IGZpZWxkcz8uYmF0Y2hTaXplID8/IHRoaXMuYmF0Y2hTaXplO1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSBmaWVsZHM/LnRpbWVvdXQ7XG4gICAgICAgIHRoaXMudGVtcGVyYXR1cmUgPSBmaWVsZHM/LnRlbXBlcmF0dXJlID8/IHRoaXMudGVtcGVyYXR1cmU7XG4gICAgICAgIHRoaXMubWF4VG9rZW5zID0gZmllbGRzPy5tYXhUb2tlbnMgPz8gdGhpcy5tYXhUb2tlbnM7XG4gICAgICAgIHRoaXMudG9wUCA9IGZpZWxkcz8udG9wUCA/PyB0aGlzLnRvcFA7XG4gICAgICAgIHRoaXMuZnJlcXVlbmN5UGVuYWx0eSA9IGZpZWxkcz8uZnJlcXVlbmN5UGVuYWx0eSA/PyB0aGlzLmZyZXF1ZW5jeVBlbmFsdHk7XG4gICAgICAgIHRoaXMucHJlc2VuY2VQZW5hbHR5ID0gZmllbGRzPy5wcmVzZW5jZVBlbmFsdHkgPz8gdGhpcy5wcmVzZW5jZVBlbmFsdHk7XG4gICAgICAgIHRoaXMubiA9IGZpZWxkcz8ubiA/PyB0aGlzLm47XG4gICAgICAgIHRoaXMuYmVzdE9mID0gZmllbGRzPy5iZXN0T2YgPz8gdGhpcy5iZXN0T2Y7XG4gICAgICAgIHRoaXMubG9naXRCaWFzID0gZmllbGRzPy5sb2dpdEJpYXM7XG4gICAgICAgIHRoaXMuc3RvcCA9IGZpZWxkcz8uc3RvcDtcbiAgICAgICAgdGhpcy5zdHJlYW1pbmcgPSBmaWVsZHM/LnN0cmVhbWluZyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24gPSBhenVyZUFwaVZlcnNpb247XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkgPSBhenVyZUFwaUtleTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSA9IGF6dXJlQXBpSW5zdGFuY2VOYW1lO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUgPSBhenVyZUFwaURlcGxveW1lbnROYW1lO1xuICAgICAgICBpZiAodGhpcy5zdHJlYW1pbmcgJiYgdGhpcy5uID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHN0cmVhbSByZXN1bHRzIHdoZW4gbiA+IDFcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtaW5nICYmIHRoaXMuYmVzdE9mID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHN0cmVhbSByZXN1bHRzIHdoZW4gYmVzdE9mID4gMVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5henVyZU9wZW5BSUFwaUtleSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSBpbnN0YW5jZSBuYW1lIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSBkZXBsb3ltZW50IG5hbWUgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgdmVyc2lvbiBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnRDb25maWcgPSB7XG4gICAgICAgICAgICBhcGlLZXksXG4gICAgICAgICAgICAuLi5jb25maWd1cmF0aW9uLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBpbnZva2UgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaW52b2NhdGlvblBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgbWF4X3Rva2VuczogdGhpcy5tYXhUb2tlbnMsXG4gICAgICAgICAgICB0b3BfcDogdGhpcy50b3BQLFxuICAgICAgICAgICAgZnJlcXVlbmN5X3BlbmFsdHk6IHRoaXMuZnJlcXVlbmN5UGVuYWx0eSxcbiAgICAgICAgICAgIHByZXNlbmNlX3BlbmFsdHk6IHRoaXMucHJlc2VuY2VQZW5hbHR5LFxuICAgICAgICAgICAgbjogdGhpcy5uLFxuICAgICAgICAgICAgYmVzdF9vZjogdGhpcy5iZXN0T2YsXG4gICAgICAgICAgICBsb2dpdF9iaWFzOiB0aGlzLmxvZ2l0QmlhcyxcbiAgICAgICAgICAgIHN0b3A6IHRoaXMuc3RvcCxcbiAgICAgICAgICAgIHN0cmVhbTogdGhpcy5zdHJlYW1pbmcsXG4gICAgICAgICAgICAuLi50aGlzLm1vZGVsS3dhcmdzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbF9uYW1lOiB0aGlzLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvblBhcmFtcygpLFxuICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBmb3IgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIG91dCB0byBPcGVuQUkncyBlbmRwb2ludCB3aXRoIGsgdW5pcXVlIHByb21wdHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBbcHJvbXB0c10gLSBUaGUgcHJvbXB0cyB0byBwYXNzIGludG8gdGhlIG1vZGVsLlxuICAgICAqIEBwYXJhbSBbb3B0aW9uc10gLSBPcHRpb25hbCBsaXN0IG9mIHN0b3Agd29yZHMgdG8gdXNlIHdoZW4gZ2VuZXJhdGluZy5cbiAgICAgKiBAcGFyYW0gW3J1bk1hbmFnZXJdIC0gT3B0aW9uYWwgY2FsbGJhY2sgbWFuYWdlciB0byB1c2Ugd2hlbiBnZW5lcmF0aW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGZ1bGwgTExNIG91dHB1dC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBpbXBvcnQgeyBPcGVuQUkgfSBmcm9tIFwibGFuZ2NoYWluL2xsbXMvb3BlbmFpXCI7XG4gICAgICogY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSgpO1xuICAgICAqIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmdlbmVyYXRlKFtcIlRlbGwgbWUgYSBqb2tlLlwiXSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgYXN5bmMgX2dlbmVyYXRlKHByb21wdHMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgeyBzdG9wIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBzdWJQcm9tcHRzID0gY2h1bmtBcnJheShwcm9tcHRzLCB0aGlzLmJhdGNoU2l6ZSk7XG4gICAgICAgIGNvbnN0IGNob2ljZXMgPSBbXTtcbiAgICAgICAgY29uc3QgdG9rZW5Vc2FnZSA9IHt9O1xuICAgICAgICBpZiAodGhpcy5zdG9wICYmIHN0b3ApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0b3AgZm91bmQgaW4gaW5wdXQgYW5kIGRlZmF1bHQgcGFyYW1zXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuaW52b2NhdGlvblBhcmFtcygpO1xuICAgICAgICBwYXJhbXMuc3RvcCA9IHN0b3AgPz8gcGFyYW1zLnN0b3A7XG4gICAgICAgIGlmIChwYXJhbXMubWF4X3Rva2VucyA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChwcm9tcHRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1heF90b2tlbnMgc2V0IHRvIC0xIG5vdCBzdXBwb3J0ZWQgZm9yIG11bHRpcGxlIGlucHV0c1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcy5tYXhfdG9rZW5zID0gYXdhaXQgY2FsY3VsYXRlTWF4VG9rZW5zKHtcbiAgICAgICAgICAgICAgICBwcm9tcHQ6IHByb21wdHNbMF0sXG4gICAgICAgICAgICAgICAgLy8gQ2FzdCBoZXJlIHRvIGFsbG93IGZvciBvdGhlciBtb2RlbHMgdGhhdCBtYXkgbm90IGZpdCB0aGUgdW5pb25cbiAgICAgICAgICAgICAgICBtb2RlbE5hbWU6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdWJQcm9tcHRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gcGFyYW1zLnN0cmVhbVxuICAgICAgICAgICAgICAgID8gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaG9pY2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlamVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXNvbHZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBzdWJQcm9tcHRzW2ldLFxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRhcHRlcjogZmV0Y2hBZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBcInN0cmVhbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25tZXNzYWdlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YT8udHJpbT8uKCkgPT09IFwiW0RPTkVdXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24gdGhlIGZpcnN0IG1lc3NhZ2Ugc2V0IHRoZSByZXNwb25zZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogbWVzc2FnZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZDogbWVzc2FnZS5jcmVhdGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBtZXNzYWdlLm1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiBhbGwgbWVzc2FnZXMsIHVwZGF0ZSBjaG9pY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIG1lc3NhZ2UuY2hvaWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQgIT0gbnVsbCAmJiBwYXJ0LmluZGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNob2ljZXNbcGFydC5pbmRleF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXNbcGFydC5pbmRleF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaG9pY2UgPSBjaG9pY2VzW3BhcnQuaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS50ZXh0ID0gKGNob2ljZS50ZXh0ID8/IFwiXCIpICsgKHBhcnQudGV4dCA/PyBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2UuZmluaXNoX3JlYXNvbiA9IHBhcnQuZmluaXNoX3JlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2UubG9ncHJvYnMgPSBwYXJ0LmxvZ3Byb2JzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gdGhpcyBzaG91bGQgcGFzcyBwYXJ0LmluZGV4IHRvIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhhdCdzIHN1cHBvcnRlZCB0aGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12b2lkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1OZXdUb2tlbihwYXJ0LnRleHQgPz8gXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBhbGwgbWVzc2FnZXMgYXJlIGZpbmlzaGVkLCByZXNvbHZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzb2x2ZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZXMuZXZlcnkoKGMpID0+IGMuZmluaXNoX3JlYXNvbiAhPSBudWxsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiBhd2FpdCB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHByb21wdDogc3ViUHJvbXB0c1tpXSxcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNob2ljZXMucHVzaCguLi5kYXRhLmNob2ljZXMpO1xuICAgICAgICAgICAgY29uc3QgeyBjb21wbGV0aW9uX3Rva2VuczogY29tcGxldGlvblRva2VucywgcHJvbXB0X3Rva2VuczogcHJvbXB0VG9rZW5zLCB0b3RhbF90b2tlbnM6IHRvdGFsVG9rZW5zLCB9ID0gZGF0YS51c2FnZSA/PyB7fTtcbiAgICAgICAgICAgIGlmIChjb21wbGV0aW9uVG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5Vc2FnZS5jb21wbGV0aW9uVG9rZW5zID1cbiAgICAgICAgICAgICAgICAgICAgKHRva2VuVXNhZ2UuY29tcGxldGlvblRva2VucyA/PyAwKSArIGNvbXBsZXRpb25Ub2tlbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJvbXB0VG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5Vc2FnZS5wcm9tcHRUb2tlbnMgPSAodG9rZW5Vc2FnZS5wcm9tcHRUb2tlbnMgPz8gMCkgKyBwcm9tcHRUb2tlbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG90YWxUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICB0b2tlblVzYWdlLnRvdGFsVG9rZW5zID0gKHRva2VuVXNhZ2UudG90YWxUb2tlbnMgPz8gMCkgKyB0b3RhbFRva2VucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IGNodW5rQXJyYXkoY2hvaWNlcywgdGhpcy5uKS5tYXAoKHByb21wdENob2ljZXMpID0+IHByb21wdENob2ljZXMubWFwKChjaG9pY2UpID0+ICh7XG4gICAgICAgICAgICB0ZXh0OiBjaG9pY2UudGV4dCA/PyBcIlwiLFxuICAgICAgICAgICAgZ2VuZXJhdGlvbkluZm86IHtcbiAgICAgICAgICAgICAgICBmaW5pc2hSZWFzb246IGNob2ljZS5maW5pc2hfcmVhc29uLFxuICAgICAgICAgICAgICAgIGxvZ3Byb2JzOiBjaG9pY2UubG9ncHJvYnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2VuZXJhdGlvbnMsXG4gICAgICAgICAgICBsbG1PdXRwdXQ6IHsgdG9rZW5Vc2FnZSB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIGNvbXBsZXRpb25XaXRoUmV0cnkocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuY2xpZW50KSB7XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IHRoaXMuYXp1cmVPcGVuQUlBcGlLZXlcbiAgICAgICAgICAgICAgICA/IGBodHRwczovLyR7dGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZX0ub3BlbmFpLmF6dXJlLmNvbS9vcGVuYWkvZGVwbG95bWVudHMvJHt0aGlzLmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWV9YFxuICAgICAgICAgICAgICAgIDogdGhpcy5jbGllbnRDb25maWcuYmFzZVBhdGg7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRDb25maWcgPSBuZXcgQ29uZmlndXJhdGlvbih7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcsXG4gICAgICAgICAgICAgICAgYmFzZVBhdGg6IGVuZHBvaW50LFxuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMudGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcuYmFzZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgT3BlbkFJQXBpKGNsaWVudENvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXhpb3NPcHRpb25zID0ge1xuICAgICAgICAgICAgYWRhcHRlcjogaXNOb2RlKCkgPyB1bmRlZmluZWQgOiBmZXRjaEFkYXB0ZXIsXG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZy5iYXNlT3B0aW9ucyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmF6dXJlT3BlbkFJQXBpS2V5KSB7XG4gICAgICAgICAgICBheGlvc09wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS1rZXlcIjogdGhpcy5henVyZU9wZW5BSUFwaUtleSxcbiAgICAgICAgICAgICAgICAuLi5heGlvc09wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBheGlvc09wdGlvbnMucGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIFwiYXBpLXZlcnNpb25cIjogdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24sXG4gICAgICAgICAgICAgICAgLi4uYXhpb3NPcHRpb25zLnBhcmFtcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyXG4gICAgICAgICAgICAuY2FsbCh0aGlzLmNsaWVudC5jcmVhdGVDb21wbGV0aW9uLmJpbmQodGhpcy5jbGllbnQpLCByZXF1ZXN0LCBheGlvc09wdGlvbnMpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuZGF0YSk7XG4gICAgfVxuICAgIF9sbG1UeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJvcGVuYWlcIjtcbiAgICB9XG59XG4vKipcbiAqIFByb21wdExheWVyIHdyYXBwZXIgdG8gT3BlbkFJXG4gKiBAYXVnbWVudHMgT3BlbkFJXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9tcHRMYXllck9wZW5BSSBleHRlbmRzIE9wZW5BSSB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByb21wdExheWVyQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBsVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXR1cm5Qcm9tcHRMYXllcklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGxUYWdzID0gZmllbGRzPy5wbFRhZ3MgPz8gW107XG4gICAgICAgIHRoaXMucHJvbXB0TGF5ZXJBcGlLZXkgPVxuICAgICAgICAgICAgZmllbGRzPy5wcm9tcHRMYXllckFwaUtleSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJQUk9NUFRMQVlFUl9BUElfS0VZXCIpO1xuICAgICAgICB0aGlzLnJldHVyblByb21wdExheWVySWQgPSBmaWVsZHM/LnJldHVyblByb21wdExheWVySWQ7XG4gICAgICAgIGlmICghdGhpcy5wcm9tcHRMYXllckFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBQcm9tcHRMYXllciBBUEkga2V5XCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvbXBsZXRpb25XaXRoUmV0cnkocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICBpZiAocmVxdWVzdC5zdHJlYW0pIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5jb21wbGV0aW9uV2l0aFJldHJ5KHJlcXVlc3QsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXIuY29tcGxldGlvbldpdGhSZXRyeShyZXF1ZXN0KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICBhc3luYyBfZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCByZXF1ZXN0U3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBhd2FpdCBzdXBlci5fZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2VuZXJhdGlvbnMuZ2VuZXJhdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RFbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJlc3AgPSB7XG4gICAgICAgICAgICAgICAgdGV4dDogZ2VuZXJhdGlvbnMuZ2VuZXJhdGlvbnNbaV1bMF0udGV4dCxcbiAgICAgICAgICAgICAgICBsbG1fb3V0cHV0OiBnZW5lcmF0aW9ucy5sbG1PdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0TGF5ZXJSZXNwQm9keSA9IGF3YWl0IHByb21wdExheWVyVHJhY2tSZXF1ZXN0KHRoaXMuY2FsbGVyLCBcImxhbmdjaGFpbi5Qcm9tcHRMYXllck9wZW5BSVwiLCBbcHJvbXB0c1tpXV0sIHRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksIHRoaXMucGxUYWdzLCBwYXJzZWRSZXNwLCByZXF1ZXN0U3RhcnRUaW1lLCByZXF1ZXN0RW5kVGltZSwgdGhpcy5wcm9tcHRMYXllckFwaUtleSk7XG4gICAgICAgICAgICBsZXQgcHJvbXB0TGF5ZXJSZXF1ZXN0SWQ7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXR1cm5Qcm9tcHRMYXllcklkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb21wdExheWVyUmVzcEJvZHkgJiYgcHJvbXB0TGF5ZXJSZXNwQm9keS5zdWNjZXNzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21wdExheWVyUmVxdWVzdElkID0gcHJvbXB0TGF5ZXJSZXNwQm9keS5yZXF1ZXN0X2lkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9ucy5nZW5lcmF0aW9uc1tpXVswXS5nZW5lcmF0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZ2VuZXJhdGlvbnMuZ2VuZXJhdGlvbnNbaV1bMF0uZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgICAgIHByb21wdExheWVyUmVxdWVzdElkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdlbmVyYXRpb25zO1xuICAgIH1cbn1cbmV4cG9ydCB7IE9wZW5BSUNoYXQsIFByb21wdExheWVyT3BlbkFJQ2hhdCB9IGZyb20gXCIuL29wZW5haS1jaGF0LmpzXCI7XG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0ICdkb3RlbnYvY29uZmlnJ1xyXG4gICAgaW1wb3J0IHsgT3BlbkFJIH0gZnJvbSBcImxhbmdjaGFpbi9sbG1zL29wZW5haVwiO1xyXG4gICAgXHJcblxyXG4gICAgbGV0IHByb21wdElucHV0ID0gXCJcIlxyXG4gICAgbGV0IHByb21wdE91dHB1dCA9IFwicmVzLi4uXCJcclxuICAgIGV4cG9ydCBjb25zdCBvcGVuQUlLZXkgPSBcIlwiO1xyXG5cclxuICAgIGNvbnN0IG1vZGVsID0gbmV3IE9wZW5BSSh7IG9wZW5BSUFwaUtleTogb3BlbkFJS2V5LCB0ZW1wZXJhdHVyZTogMC40IH0pO1xyXG5cclxuXHJcbiAgICBhc3luYyBmdW5jdGlvbiBzZW5kUHJvbXB0KHByb21wdElucHV0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImlucHV0OiBcIiArIHByb21wdElucHV0KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImFwaS1rZXk6IFwiICsgb3BlbkFJS2V5KTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1vZGVsLmNhbGwocHJvbXB0SW5wdXQpO1xyXG4gICAgICAgIHByb21wdE91dHB1dCA9IHJlc3BvbnNlO1xyXG4gICAgfVxyXG5cclxuPC9zY3JpcHQ+XHJcblxyXG5cclxuPGRpdj5cclxuICAgIDxoMT5CYXNpYyBQcm9tcHQ8L2gxPlxyXG4gICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYmluZDp2YWx1ZT17cHJvbXB0SW5wdXR9PlxyXG4gICAgPGJ1dHRvbiBvbjpjbGljaz17KCkgPT4ge3NlbmRQcm9tcHQocHJvbXB0SW5wdXQpfX0+U2VuZCBQcm9tcHQ8L2J1dHRvbj5cclxuICAgIDxzcGFuPntwcm9tcHRPdXRwdXR9PC9zcGFuPlxyXG48L2Rpdj4iLCJpbXBvcnQgeyBBcHAsIEl0ZW1WaWV3LCBQbGF0Zm9ybSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuXHJcbmltcG9ydCAnZG90ZW52L2NvbmZpZydcclxuLy8gaW1wb3J0IHsgT3BlbkFJIH0gZnJvbSBcImxhbmdjaGFpbi9sbG1zL29wZW5haVwiO1xyXG4vLyBpbXBvcnQgRGljZVJvbGxlciBmcm9tIFwiLi91aS9ESWNlUm9sbGVyLnN2ZWx0ZVwiO1xyXG5pbXBvcnQgQmFzaWNQcm9tcHQgZnJvbSAnLi91aS9CYXNpY1Byb21wdC5zdmVsdGUnO1xyXG5cclxuY29uc3QgVklFV19UWVBFID0gXCJzdmVsdGUtdmlld1wiO1xyXG5cclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XHJcbiAgICBteVNldHRpbmc6IHN0cmluZztcclxuICAgIG9wZW5BSV9BUElfS2V5OiBhbnk7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XHJcbiAgICBteVNldHRpbmc6ICdkZWZhdWx0JyxcclxuICAgIG9wZW5BSV9BUElfS2V5OiBpbXBvcnQubWV0YS5lbnYuVklURV9PUEVOQUlfQVBJX0tFWVxyXG59XHJcblxyXG5cclxuLy8gY2xhc3MgTXlTdmVsdGVWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xyXG4vLyAgICAgdmlldzogRGljZVJvbGxlcjtcclxuXHJcbi8vICAgICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xyXG4vLyAgICAgICAgIHJldHVybiBWSUVXX1RZUEU7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuLy8gICAgICAgICByZXR1cm4gXCJEaWNlIFJvbGxlclwiO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGdldEljb24oKTogc3RyaW5nIHtcclxuLy8gICAgICAgICByZXR1cm4gXCJkaWNlXCI7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgYXN5bmMgb25PcGVuKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cclxuLy8gICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4vLyAgICAgICAgIHRoaXMudmlldyA9IG5ldyBEaWNlUm9sbGVyKHsgdGFyZ2V0OiAodGhpcyBhcyBhbnkpLmNvbnRlbnRFbCwgcHJvcHM6IHt9IH0pO1xyXG4vLyAgICAgfVxyXG4vLyB9XHJcblxyXG5jbGFzcyBCYXNpY1Byb21wdFZpZXcgZXh0ZW5kcyBJdGVtVmlld3tcclxuICAgIHZpZXc6IEJhc2ljUHJvbXB0O1xyXG4gICAgb3BlbkFJS2V5OiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgb3BlbkFJS2V5OiBzdHJpbmcpe1xyXG4gICAgICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgICAgIHRoaXMub3BlbkFJS2V5ID0gb3BlbkFJS2V5O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBWSUVXX1RZUEVcclxuICAgIH1cclxuXHJcbiAgICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIkJhc2ljIFByb21wdFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEljb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJkaWNlXCJcclxuICAgIH1cclxuXHJcblxyXG4gICAgYXN5bmMgb25PcGVuKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IEJhc2ljUHJvbXB0KHsgdGFyZ2V0OiAodGhpcyBhcyBhbnkpLmNvbnRlbnRFbCwgcHJvcHM6IHtvcGVuQUlLZXk6IHRoaXMub3BlbkFJS2V5fSB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgLy8gcHJpdmF0ZSB2aWV3OiBNeVN2ZWx0ZVZpZXc7XHJcbiAgICBwcml2YXRlIHZpZXc6IEJhc2ljUHJvbXB0VmlldztcclxuICAgIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzO1xyXG5cclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgICAgIGNvbnN0IG9wZW5BSUtleSA9IHRoaXMuc2V0dGluZ3Mub3BlbkFJX0FQSV9LZXk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxyXG4gICAgICAgICAgICBWSUVXX1RZUEUsXHJcbiAgICAgICAgICAgIChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiAodGhpcy52aWV3ID0gbmV3IEJhc2ljUHJvbXB0VmlldyhsZWFmLCBvcGVuQUlLZXkpKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMucmVnaXN0ZXJWaWV3KFxyXG4gICAgICAgIC8vICAgICBWSUVXX1RZUEUsXHJcbiAgICAgICAgLy8gICAgIChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiAodGhpcy52aWV3ID0gbmV3IEJhc2ljUHJvbXB0KGxlYWYpKVxyXG4gICAgICAgIC8vICk7XHJcblxyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KHRoaXMub25MYXlvdXRSZWFkeS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGFuIGljb24gaW4gdGhlIGxlZnQgcmliYm9uLlxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignZGljZScsICdTYW1wbGUgUGx1Z2luJywgKGV2dDogTW91c2VFdmVudCkgPT4gdGhpcy5vcGVuTWFwVmlldygpKTtcclxuXHJcbiAgICAgICAgLy8gVGhpcyBhZGRzIGEgc2ltcGxlIGNvbW1hbmQgdGhhdCBjYW4gYmUgdHJpZ2dlcmVkIGFueXdoZXJlXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdvcGVuLXNhbXBsZS1tb2RhbC1zaW1wbGUnLFxyXG4gICAgICAgICAgICBuYW1lOiAnT3BlbiBzYW1wbGUgbW9kYWwgKHNpbXBsZSknLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuTWFwVmlldygpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXHJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTYW1wbGVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25MYXlvdXRSZWFkeSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEUpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpLnNldFZpZXdTdGF0ZSh7XHJcbiAgICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbnVubG9hZCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9wZW5NYXBWaWV3KCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuYXBwLndvcmtzcGFjZTtcclxuICAgICAgICB3b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRSk7XHJcbiAgICAgICAgY29uc3QgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKFxyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICFQbGF0Zm9ybS5pc01vYmlsZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBWSUVXX1RZUEUgfSk7XHJcbiAgICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFNhbXBsZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIHBsdWdpbjogTXlQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdTZXR0aW5ncyBmb3IgbXkgYXdlc29tZSBwbHVnaW4uJyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdTZXR0aW5nICMxJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0l0XFwncyBhIHNlY3JldCcpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHNlY3JldCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKCdvcGVuQUlfQVBJX0tleScpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnQWRkIHlvdXIgb3BlbkFJIEFQSSBrZXkgaGVyZScpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJlbnRlciBrZXlcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nKSlcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsicmVxdWlyZSQkMCIsInJlcXVpcmUkJDEiLCJyZXF1aXJlJCQyIiwiY3J5cHRvIiwicmVxdWlyZSQkMyIsInBhY2thZ2VKc29uIiwidmVyc2lvbiIsIm9wdGlvbnMiLCJtYWluIiwibWFpbk1vZHVsZSIsIm5hbWUiLCJkYXRhIiwiZWxlbWVudCIsInRleHQiLCJpbnN0YW5jZSIsImNyZWF0ZV9mcmFnbWVudCIsIl9fYXdhaXRlciIsImJpbmQiLCJ3cmFwIiwidG9TdHJpbmciLCJpc0FycmF5IiwiaXNVbmRlZmluZWQiLCJpc0Zvcm1EYXRhIiwiaXNPYmplY3QiLCJpc0RhdGUiLCJpc1VSTFNlYXJjaFBhcmFtcyIsImlzU3RhbmRhcmRCcm93c2VyRW52IiwiZm9yRWFjaCIsInV0aWxzIiwiZW5jb2RlIiwiYnVpbGRVUkwiLCJJbnRlcmNlcHRvck1hbmFnZXIiLCJub3JtYWxpemVIZWFkZXJOYW1lIiwiZW5oYW5jZUVycm9yIiwiY29uZmlnIiwiY29kZSIsInJlcXVlc3QiLCJjcmVhdGVFcnJvciIsInNldHRsZSIsInZhbGlkYXRlU3RhdHVzIiwicGF0aCIsImlzQWJzb2x1dGVVUkwiLCJjb21iaW5lVVJMcyIsImJ1aWxkRnVsbFBhdGgiLCJwYXJzZUhlYWRlcnMiLCJpc1VSTFNhbWVPcmlnaW4iLCJDYW5jZWwiLCJjb29raWVzIiwicmVxdWlyZSQkNCIsInJlcXVpcmUkJDUiLCJyZXF1aXJlJCQ2IiwicmVxdWlyZSQkNyIsInRyYW5zaXRpb25hbERlZmF1bHRzIiwicmVxdWlyZSQkOCIsInJlcXVpcmUkJDkiLCJ0cmFuc2l0aW9uYWwiLCJkZWZhdWx0cyIsInRyYW5zZm9ybURhdGEiLCJpc0NhbmNlbCIsImRpc3BhdGNoUmVxdWVzdCIsIm1lcmdlQ29uZmlnIiwibWVyZ2UiLCJ2YWxpZGF0b3JzIiwidmFsaWRhdG9yIiwiQXhpb3MiLCJmb3JFYWNoTWV0aG9kTm9EYXRhIiwiZm9yRWFjaE1ldGhvZFdpdGhEYXRhIiwic3ByZWFkIiwiaXNBeGlvc0Vycm9yIiwiYXhpb3MiLCJyZXF1aXJlJCQxMCIsImF4aW9zTW9kdWxlIiwiYXhpb3NfMSIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb25maWd1cmF0aW9uIiwidGhpcyIsImJhc2VfMSIsImZsdXNoIiwicmV0cnkiLCJ0cnlKc29uU3RyaW5naWZ5IiwiZSIsInJlcXVpcmUiLCJ0IiwibiIsInIiLCJvIiwiaSIsInUiLCJhIiwicyIsImYiLCJsIiwiYyIsImQiLCJzZWxmIiwiUmV0cnlPcGVyYXRpb24iLCJvcmlnaW5hbCIsImVycm9yIiwicFJldHJ5TW9kdWxlIiwicFJldHJ5XzEiLCJFdmVudEVtaXR0ZXIiLCJwRmluYWxseSIsInRpbWVvdXRFcnJvciIsInBUaW1lb3V0TW9kdWxlIiwicFRpbWVvdXRfMSIsImxvd2VyQm91bmRfMSIsInJ1biIsIlBRdWV1ZSIsIlBRdWV1ZU1vZCIsInBSZXRyeSIsIl9fZGVmUHJvcCIsIl9fZGVmTm9ybWFsUHJvcCIsIl9fcHVibGljRmllbGQiLCJiYXNlNjQiLCJ1dWlkLnY0Iiwic3R5bGVzIiwiZWxhcHNlZCIsImVyciIsInV1aWR2NCIsImNhY2hlIiwiX2IiLCJfYSIsIkNvbmZpZ3VyYXRpb24iLCJPcGVuQUlBcGkiLCJjaG9pY2VzIiwiX2MiLCJfZCIsImN0eCIsInByb21wdElucHV0IiwiSXRlbVZpZXciLCJQbHVnaW4iLCJQbGF0Zm9ybSIsIlBsdWdpblNldHRpbmdUYWIiLCJTZXR0aW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQU0sS0FBS0Esb0JBQWE7QUFDeEIsTUFBTSxPQUFPQyxvQkFBZTtBQUM1QixNQUFNLEtBQUtDLG9CQUFhO0FBQ3hCLE1BQU1DLFdBQVNDLG9CQUFpQjtBQUNoQyxNQUFNQyxnQkFBYztBQUVwQixNQUFNQyxZQUFVRCxjQUFZO0FBRTVCLE1BQU0sT0FBTztBQUdiLFNBQVMsTUFBTyxLQUFLO0FBQ25CLFFBQU0sTUFBTSxDQUFFO0FBR2QsTUFBSSxRQUFRLElBQUksU0FBVTtBQUcxQixVQUFRLE1BQU0sUUFBUSxXQUFXLElBQUk7QUFFckMsTUFBSTtBQUNKLFVBQVEsUUFBUSxLQUFL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LFNBQVM7QUFBQSxVQUFDLEdBQUUsUUFBTyxXQUFVO0FBQUMsbUJBQU9BLEdBQUUsT0FBTztBQUFBLFVBQUMsR0FBRSxPQUFNLFdBQVU7QUFBQyxtQkFBT0EsR0FBRSxNQUFNO0FBQUEsVUFBQyxHQUFFLE1BQUssV0FBVTtBQUFDLG1CQUFPQSxHQUFFLEtBQUs7QUFBQSxVQUFDLEdBQUUsTUFBSyxXQUFVO0FBQUMsbUJBQU9BLEdBQUUsS0FBSztBQUFBLFVBQUMsR0FBRSxNQUFLLFdBQVU7QUFBQyxtQkFBT0EsR0FBRSxLQUFLO0FBQUEsVUFBQyxHQUFFLGNBQWEsV0FBVTtBQUFDLG1CQUFPQSxHQUFFLGFBQWE7QUFBQSxVQUFDLEdBQUUsZ0JBQWUsV0FBVTtBQUFDLG1CQUFPQSxHQUFFLGVBQWU7QUFBQSxVQUFDLEdBQUUsYUFBWSxXQUFVO0FBQUMsbUJBQU9BLEdBQUUsWUFBWTtBQUFBLFVBQUMsR0FBRSxPQUFNLFdBQVU7QUFBQyxtQkFBT0EsR0FBRSxNQUFNO0FBQUEsVUFBQyxHQUFFLFVBQVMsV0FBVTtBQUFDLG1CQUFPQSxHQUFFLFNBQVM7QUFBQSxVQUFDLEdBQUUsYUFBWSxXQUFVO0FBQUMsbUJBQU9BLEdBQUUsWUFBWTtBQUFBLFVBQUMsR0FBRSxhQUFZLFdBQVU7QUFBQyxtQkFBT0EsR0FBRSxZQUFZO0FBQUEsVUFBQyxHQUFFLFdBQVUsV0FBVTtBQUFDLG1CQUFPQSxHQUFFLFVBQVU7QUFBQSxVQUFDLEdBQUUsU0FBUSxXQUFVO0FBQUMsbUJBQU9BLEdBQUUsUUFBUTtBQUFBLFVBQUMsR0FBRSxVQUFTLFdBQVU7QUFBQyxtQkFBT0EsR0FBRSxTQUFTO0FBQUEsVUFBQyxHQUFFLFVBQVMsV0FBVTtBQUFDLG1CQUFPQSxHQUFFLFNBQVM7QUFBQSxVQUFDLEVBQUM7QUFBQSxRQUFDO0FBQUMsaUJBQVMsSUFBRztBQUFDLGlCQUFNLEVBQUMsS0FBSSxJQUFHLE9BQU0sU0FBU1AsSUFBRTtBQUFDLGlCQUFLLE9BQUtBO0FBQUEsVUFBQyxHQUFFLEtBQUksU0FBU0EsSUFBRTtBQUFDLGlCQUFL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RUMsSUFBRUwsR0FBRU8sS0FBRSxJQUFHLElBQUcsV0FBVyxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsS0FBSSxJQUFHLE1BQU0sR0FBRUgsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLEtBQUksSUFBRyxXQUFXLEdBQUVKLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUMsSUFBRU4sR0FBRU8sS0FBRSxLQUFJLEdBQUUsVUFBVSxHQUFFRCxLQUFFLEVBQUVBLElBQUVILElBQUVDLElBQUVDLElBQUVMLEdBQUVPLEtBQUUsS0FBSSxJQUFHLFNBQVMsR0FBRUYsS0FBRSxFQUFFQSxJQUFFQyxJQUFFSCxJQUFFQyxJQUFFSixHQUFFTyxLQUFFLEtBQUksSUFBRyxXQUFXLEdBQUVKLEtBQUUsRUFBRUEsSUFBRUMsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLEtBQUksSUFBRyxVQUFVLEdBQUVGLElBQUVDLElBQUVOLEdBQUVPLEtBQUUsSUFBRyxHQUFFLFVBQVUsR0FBRUQsS0FBRSxFQUFFQSxJQUFFSCxJQUFFQyxJQUFFQyxJQUFFTCxHQUFFTyxLQUFFLElBQUcsR0FBRSxXQUFXLEdBQUVGLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUgsSUFBRUMsSUFBRUosR0FBRU8sS0FBRSxLQUFJLElBQUcsU0FBUyxHQUFFSCxLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVILElBQUVILEdBQUVPLEtBQUUsSUFBRyxJQUFHLFVBQVUsR0FBRUosS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFQyxJQUFFTixHQUFFTyxLQUFFLElBQUcsR0FBRSxVQUFVLEdBQUVELEtBQUUsRUFBRUEsSUFBRUgsSUFBRUMsSUFBRUMsSUFBRUwsR0FBRU8sS0FBRSxLQUFJLEdBQUUsUUFBUSxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsS0FBSSxJQUFHLFVBQVUsR0FBRUgsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLElBQUcsSUFBRyxVQUFVLEdBQUVKLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUMsSUFBRU4sR0FBRU8sS0FBRSxJQUFHLEdBQUUsU0FBUyxHQUFFRCxLQUFFLEVBQUVBLElBQUVILElBQUVDLElBQUVDLElBQUVMLEdBQUVPLEtBQUUsS0FBSSxHQUFFLFdBQVcsR0FBRUYsS0FBRSxFQUFFQSxJQUFFQyxJQUFFSCxJQUFFQyxJQUFFSixHQUFFTyxLQUFFLElBQUcsSUFBRyxVQUFVLEdBQUVILEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUgsSUFBRUgsR0FBRU8sS0FBRSxJQUFHLElBQUcsVUFBVSxHQUFFSixLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVDLElBQUVOLEdBQUVPLEtBQUUsS0FBSSxHQUFFLFdBQVcsR0FBRUQsS0FBRSxFQUFFQSxJQUFFSCxJQUFFQyxJQUFFQyxJQUFFTCxHQUFFTyxLQUFFLElBQUcsR0FBRSxTQUFTLEdBQUVGLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUgsSUFBRUMsSUFBRUosR0FBRU8sS0FBRSxJQUFHLElBQUcsVUFBVSxHQUFFSixLQUFFLEVBQUVBLElBQUVDLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUgsSUFBRUgsR0FBRU8sS0FBRSxLQUFJLElBQUcsV0FBVyxHQUFFRixJQUFFQyxJQUFFTixHQUFFTyxLQUFFLElBQUcsR0FBRSxPQUFPLEdBQUVELEtBQUUsRUFBRUEsSUFBRUgsSUFBRUMsSUFBRUMsSUFBRUwsR0FBRU8sS0FBRSxJQUFHLElBQUcsV0FBVyxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsS0FBSSxJQUFHLFVBQVUsR0FBRUgsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLEtBQUksSUFBRyxTQUFTLEdBQUVKLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUMsSUFBRU4sR0FBRU8sS0FBRSxJQUFHLEdBQUUsV0FBVyxHQUFFRCxLQUFFLEVBQUVBLElBQUVILElBQUVDLElBQUVDLElBQUVMLEdBQUVPLEtBQUUsSUFBRyxJQUFHLFVBQVUsR0FBRUYsS0FBRSxFQUFFQSxJQUFFQyxJQUFFSCxJQUFFQyxJQUFFSixHQUFFTyxLQUFFLElBQUcsSUFBRyxVQUFVLEdBQUVILEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUgsSUFBRUgsR0FBRU8sS0FBRSxLQUFJLElBQUcsV0FBVyxHQUFFSixLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVDLElBQUVOLEdBQUVPLEtBQUUsS0FBSSxHQUFFLFNBQVMsR0FBRUQsS0FBRSxFQUFFQSxJQUFFSCxJQUFFQyxJQUFFQyxJQUFFTCxHQUFFTyxLQUFFLElBQUcsSUFBRyxVQUFVLEdBQUVGLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUgsSUFBRUMsSUFBRUosR0FBRU8sS0FBRSxJQUFHLElBQUcsVUFBVSxHQUFFSCxLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVILElBQUVILEdBQUVPLEtBQUUsSUFBRyxJQUFHLFFBQVEsR0FBRUosS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFQyxJQUFFTixHQUFFTyxLQUFFLElBQUcsR0FBRSxVQUFVLEdBQUVELEtBQUUsRUFBRUEsSUFBRUgsSUFBRUMsSUFBRUMsSUFBRUwsR0FBRU8sS0FBRSxLQUFJLElBQUcsVUFBVSxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsS0FBSSxJQUFHLFNBQVMsR0FBRUosS0FBRSxFQUFFQSxJQUFFQyxLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVILElBQUVILEdBQUVPLEtBQUUsSUFBRyxJQUFHLFVBQVUsR0FBRUYsSUFBRUMsSUFBRU4sR0FBRU8sS0FBRSxJQUFHLEdBQUUsVUFBVSxHQUFFRCxLQUFFLEVBQUVBLElBQUVILElBQUVDLElBQUVDLElBQUVMLEdBQUVPLEtBQUUsSUFBRyxJQUFHLFVBQVUsR0FBRUYsS0FBRSxFQUFFQSxJQUFFQyxJQUFFSCxJQUFFQyxJQUFFSixHQUFFTyxLQUFFLEtBQUksSUFBRyxXQUFXLEdBQUVILEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUgsSUFBRUgsR0FBRU8sS0FBRSxJQUFHLElBQUcsU0FBUyxHQUFFSixLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVDLElBQUVOLEdBQUVPLEtBQUUsS0FBSSxHQUFFLFVBQVUsR0FBRUQsS0FBRSxFQUFFQSxJQUFFSCxJQUFFQyxJQUFFQyxJQUFFTCxHQUFFTyxLQUFFLElBQUcsSUFBRyxXQUFXLEdBQUVGLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUgsSUFBRUMsSUFBRUosR0FBRU8sS0FBRSxLQUFJLElBQUcsUUFBUSxHQUFFSCxLQUFFLEVBQUVBLElBQUVDLElBQUVDLElBQUVILElBQUVILEdBQUVPLEtBQUUsSUFBRyxJQUFHLFdBQVcsR0FBRUosS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFQyxJQUFFTixHQUFFTyxLQUFFLElBQUcsR0FBRSxVQUFVLEdBQUVELEtBQUUsRUFBRUEsSUFBRUgsSUFBRUMsSUFBRUMsSUFBRUwsR0FBRU8sS0FBRSxLQUFJLElBQUcsU0FBUyxHQUFFRixLQUFFLEVBQUVBLElBQUVDLElBQUVILElBQUVDLElBQUVKLEdBQUVPLEtBQUUsSUFBRyxJQUFHLFdBQVcsR0FBRUgsS0FBRSxFQUFFQSxJQUFFQyxJQUFFQyxJQUFFSCxJQUFFSCxHQUFFTyxLQUFFLEtBQUksSUFBRyxVQUFVLEdBQUVKLEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFBRUMsSUFBRU4sR0FBRU8sS0FBRSxJQUFHLEdBQUUsVUFBVSxHQUFFRCxLQUFFLEVBQUVBLElBQUVILElBQUVDLElBQUVDLElBQUVMLEdBQUVPLEtBQUUsS0FBSSxJQUFHLFdBQVcsR0FBRUYsS0FBRSxFQUFFQSxJQUFFQyxJQUFFSCxJQUFFQyxJQUFFSixHQUFFTyxLQUFFLElBQUcsSUFBRyxTQUFTLEdBQUVILEtBQUUsRUFBRUEsSUFBRUMsSUFBRUMsSUFB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SUFBRUEsR0FBRSxJQUFHUSxLQUFFLEdBQUVBLEtBQUUsSUFBR0E7QUFBSSxjQUFBUCxHQUFFTyxNQUFHQSxLQUFFLEtBQUdWLEdBQUVVLEtBQUUsS0FBRyxFQUFFLEVBQUUsR0FBR0wsS0FBRUYsR0FBRU8sS0FBRSxJQUFHLEVBQUVMLElBQUUsRUFBRSxJQUFFLEVBQUVBLElBQUUsRUFBRSxJQUFFLEVBQUVBLElBQUUsRUFBRSxJQUFHRixHQUFFTyxLQUFFLEVBQUUsSUFBR0wsS0FBRUYsR0FBRU8sS0FBRSxLQUFJLEVBQUVMLElBQUUsQ0FBQyxJQUFFLEVBQUVBLElBQUUsRUFBRSxJQUFFLEVBQUVBLElBQUUsQ0FBQyxFQUFHLEdBQUNGLEdBQUVPLEtBQUUsR0FBRyxHQUFFRSxLQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRSxFQUFFUCxLQUFFRyxJQUFFLENBQUMsSUFBRSxFQUFFSCxJQUFFLEVBQUUsSUFBRSxFQUFFQSxJQUFFLEVBQUUsQ0FBQyxHQUFFRyxLQUFFLElBQUUsQ0FBQ0EsS0FBRSxDQUFDLEdBQUVLLEdBQUVILEdBQUUsR0FBRVAsR0FBRU8sR0FBRSxHQUFFTixLQUFFLEVBQUUsRUFBRUEsS0FBRUUsSUFBRSxDQUFDLElBQUUsRUFBRUYsSUFBRSxFQUFFLElBQUUsRUFBRUEsSUFBRSxFQUFFLEdBQUVFLEtBQUVDLEtBQUVELEtBQUVHLEtBQUVGLEtBQUVFLEVBQUMsR0FBRSxJQUFFLEdBQUUsSUFBRSxHQUFFLElBQUVELElBQUVBLEtBQUUsRUFBRSxHQUFFSSxFQUFDLEdBQUUsSUFBRUgsSUFBRUEsS0FBRUYsSUFBRUEsS0FBRUQsSUFBRUEsS0FBRSxFQUFFTSxJQUFFUixFQUFDO0FBQUUsWUFBQUYsR0FBRSxLQUFHLEVBQUVJLElBQUVKLEdBQUUsRUFBRSxHQUFFQSxHQUFFLEtBQUcsRUFBRUssSUFBRUwsR0FBRSxFQUFFLEdBQUVBLEdBQUUsS0FBRyxFQUFFTyxJQUFFUCxHQUFFLEVBQUUsR0FBRUEsR0FBRSxLQUFHLEVBQUUsR0FBRUEsR0FBRSxFQUFFLEdBQUVBLEdBQUUs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
